{"version":3,"file":"static/js/monaco-editor-vendor.77eea609.83f6a39e.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollModelProvider.js","../node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollElement.js","../node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollProvider.js","../node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollActions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollContribution.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/completionModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggest.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordContextKey.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestAlternatives.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestCommitCharacters.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestOvertypingCapturer.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetStatus.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetDetails.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetRenderer.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestInlineCompletions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestMemory.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordDistance.js","../node_modules/monaco-editor/esm/vs/editor/contrib/symbolIcons/browser/symbolIcons.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { OutlineElement, OutlineGroup, OutlineModel } from '../../documentSymbols/browser/outlineModel.js';\nimport { createCancelablePromise, Delayer } from '../../../../base/common/async.js';\nimport { FoldingController, RangesLimitReporter } from '../../folding/browser/folding.js';\nimport { SyntaxRangeProvider } from '../../folding/browser/syntaxRangeProvider.js';\nimport { IndentRangeProvider } from '../../folding/browser/indentRangeProvider.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { StickyElement, StickyModel, StickyRange } from './stickyScrollElement.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nvar ModelProvider;\n(function (ModelProvider) {\n    ModelProvider[\"OUTLINE_MODEL\"] = \"outlineModel\";\n    ModelProvider[\"FOLDING_PROVIDER_MODEL\"] = \"foldingProviderModel\";\n    ModelProvider[\"INDENTATION_MODEL\"] = \"indentationModel\";\n})(ModelProvider || (ModelProvider = {}));\nvar Status;\n(function (Status) {\n    Status[Status[\"VALID\"] = 0] = \"VALID\";\n    Status[Status[\"INVALID\"] = 1] = \"INVALID\";\n    Status[Status[\"CANCELED\"] = 2] = \"CANCELED\";\n})(Status || (Status = {}));\nlet StickyModelProvider = class StickyModelProvider extends Disposable {\n    constructor(_editor, _languageConfigurationService, _languageFeaturesService, defaultModel) {\n        super();\n        this._editor = _editor;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._modelProviders = [];\n        this._modelPromise = null;\n        this._updateScheduler = this._register(new Delayer(300));\n        this._updateOperation = this._register(new DisposableStore());\n        const stickyModelFromCandidateOutlineProvider = new StickyModelFromCandidateOutlineProvider(_languageFeaturesService);\n        const stickyModelFromSyntaxFoldingProvider = new StickyModelFromCandidateSyntaxFoldingProvider(this._editor, _languageFeaturesService);\n        const stickyModelFromIndentationFoldingProvider = new StickyModelFromCandidateIndentationFoldingProvider(this._editor, _languageConfigurationService);\n        switch (defaultModel) {\n            case ModelProvider.OUTLINE_MODEL:\n                this._modelProviders.push(stickyModelFromCandidateOutlineProvider);\n                this._modelProviders.push(stickyModelFromSyntaxFoldingProvider);\n                this._modelProviders.push(stickyModelFromIndentationFoldingProvider);\n                break;\n            case ModelProvider.FOLDING_PROVIDER_MODEL:\n                this._modelProviders.push(stickyModelFromSyntaxFoldingProvider);\n                this._modelProviders.push(stickyModelFromIndentationFoldingProvider);\n                break;\n            case ModelProvider.INDENTATION_MODEL:\n                this._modelProviders.push(stickyModelFromIndentationFoldingProvider);\n                break;\n        }\n    }\n    _cancelModelPromise() {\n        if (this._modelPromise) {\n            this._modelPromise.cancel();\n            this._modelPromise = null;\n        }\n    }\n    update(textModel, textModelVersionId, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._updateOperation.clear();\n            this._updateOperation.add({\n                dispose: () => {\n                    this._cancelModelPromise();\n                    this._updateScheduler.cancel();\n                }\n            });\n            this._cancelModelPromise();\n            return yield this._updateScheduler.trigger(() => __awaiter(this, void 0, void 0, function* () {\n                for (const modelProvider of this._modelProviders) {\n                    const { statusPromise, modelPromise } = modelProvider.computeStickyModel(textModel, textModelVersionId, token);\n                    this._modelPromise = modelPromise;\n                    const status = yield statusPromise;\n                    if (this._modelPromise !== modelPromise) {\n                        return null;\n                    }\n                    switch (status) {\n                        case Status.CANCELED:\n                            this._updateOperation.clear();\n                            return null;\n                        case Status.VALID:\n                            return modelProvider.stickyModel;\n                    }\n                }\n                return null;\n            })).catch((error) => {\n                onUnexpectedError(error);\n                return null;\n            });\n        });\n    }\n};\nStickyModelProvider = __decorate([\n    __param(1, ILanguageConfigurationService),\n    __param(2, ILanguageFeaturesService)\n], StickyModelProvider);\nexport { StickyModelProvider };\nclass StickyModelCandidateProvider {\n    constructor() {\n        this._stickyModel = null;\n    }\n    get stickyModel() {\n        return this._stickyModel;\n    }\n    _invalid() {\n        this._stickyModel = null;\n        return Status.INVALID;\n    }\n    computeStickyModel(textModel, modelVersionId, token) {\n        if (token.isCancellationRequested || !this.isProviderValid(textModel)) {\n            return { statusPromise: this._invalid(), modelPromise: null };\n        }\n        const providerModelPromise = createCancelablePromise(token => this.createModelFromProvider(textModel, modelVersionId, token));\n        return {\n            statusPromise: providerModelPromise.then(providerModel => {\n                if (!this.isModelValid(providerModel)) {\n                    return this._invalid();\n                }\n                if (token.isCancellationRequested) {\n                    return Status.CANCELED;\n                }\n                this._stickyModel = this.createStickyModel(textModel, modelVersionId, token, providerModel);\n                return Status.VALID;\n            }).then(undefined, (err) => {\n                onUnexpectedError(err);\n                return Status.CANCELED;\n            }),\n            modelPromise: providerModelPromise\n        };\n    }\n    /**\n     * Method which checks whether the model returned by the provider is valid and can be used to compute a sticky model.\n     * This method by default returns true.\n     * @param model model returned by the provider\n     * @returns boolean indicating whether the model is valid\n     */\n    isModelValid(model) {\n        return true;\n    }\n    /**\n     * Method which checks whether the provider is valid before applying it to find the provider model.\n     * This method by default returns true.\n     * @param textModel text-model of the editor\n     * @returns boolean indicating whether the provider is valid\n     */\n    isProviderValid(textModel) {\n        return true;\n    }\n}\nlet StickyModelFromCandidateOutlineProvider = class StickyModelFromCandidateOutlineProvider extends StickyModelCandidateProvider {\n    constructor(_languageFeaturesService) {\n        super();\n        this._languageFeaturesService = _languageFeaturesService;\n    }\n    createModelFromProvider(textModel, modelVersionId, token) {\n        return OutlineModel.create(this._languageFeaturesService.documentSymbolProvider, textModel, token);\n    }\n    createStickyModel(textModel, modelVersionId, token, model) {\n        var _a;\n        const { stickyOutlineElement, providerID } = this._stickyModelFromOutlineModel(model, (_a = this._stickyModel) === null || _a === void 0 ? void 0 : _a.outlineProviderId);\n        return new StickyModel(textModel.uri, modelVersionId, stickyOutlineElement, providerID);\n    }\n    isModelValid(model) {\n        return model && model.children.size > 0;\n    }\n    _stickyModelFromOutlineModel(outlineModel, preferredProvider) {\n        let outlineElements;\n        // When several possible outline providers\n        if (Iterable.first(outlineModel.children.values()) instanceof OutlineGroup) {\n            const provider = Iterable.find(outlineModel.children.values(), outlineGroupOfModel => outlineGroupOfModel.id === preferredProvider);\n            if (provider) {\n                outlineElements = provider.children;\n            }\n            else {\n                let tempID = '';\n                let maxTotalSumOfRanges = -1;\n                let optimalOutlineGroup = undefined;\n                for (const [_key, outlineGroup] of outlineModel.children.entries()) {\n                    const totalSumRanges = this._findSumOfRangesOfGroup(outlineGroup);\n                    if (totalSumRanges > maxTotalSumOfRanges) {\n                        optimalOutlineGroup = outlineGroup;\n                        maxTotalSumOfRanges = totalSumRanges;\n                        tempID = outlineGroup.id;\n                    }\n                }\n                preferredProvider = tempID;\n                outlineElements = optimalOutlineGroup.children;\n            }\n        }\n        else {\n            outlineElements = outlineModel.children;\n        }\n        const stickyChildren = [];\n        const outlineElementsArray = Array.from(outlineElements.values()).sort((element1, element2) => {\n            const range1 = new StickyRange(element1.symbol.range.startLineNumber, element1.symbol.range.endLineNumber);\n            const range2 = new StickyRange(element2.symbol.range.startLineNumber, element2.symbol.range.endLineNumber);\n            return this._comparator(range1, range2);\n        });\n        for (const outlineElement of outlineElementsArray) {\n            stickyChildren.push(this._stickyModelFromOutlineElement(outlineElement, outlineElement.symbol.selectionRange.startLineNumber));\n        }\n        const stickyOutlineElement = new StickyElement(undefined, stickyChildren, undefined);\n        return {\n            stickyOutlineElement: stickyOutlineElement,\n            providerID: preferredProvider\n        };\n    }\n    _stickyModelFromOutlineElement(outlineElement, previousStartLine) {\n        const children = [];\n        for (const child of outlineElement.children.values()) {\n            if (child.symbol.selectionRange.startLineNumber !== child.symbol.range.endLineNumber) {\n                if (child.symbol.selectionRange.startLineNumber !== previousStartLine) {\n                    children.push(this._stickyModelFromOutlineElement(child, child.symbol.selectionRange.startLineNumber));\n                }\n                else {\n                    for (const subchild of child.children.values()) {\n                        children.push(this._stickyModelFromOutlineElement(subchild, child.symbol.selectionRange.startLineNumber));\n                    }\n                }\n            }\n        }\n        children.sort((child1, child2) => this._comparator(child1.range, child2.range));\n        const range = new StickyRange(outlineElement.symbol.selectionRange.startLineNumber, outlineElement.symbol.range.endLineNumber);\n        return new StickyElement(range, children, undefined);\n    }\n    _comparator(range1, range2) {\n        if (range1.startLineNumber !== range2.startLineNumber) {\n            return range1.startLineNumber - range2.startLineNumber;\n        }\n        else {\n            return range2.endLineNumber - range1.endLineNumber;\n        }\n    }\n    _findSumOfRangesOfGroup(outline) {\n        let res = 0;\n        for (const child of outline.children.values()) {\n            res += this._findSumOfRangesOfGroup(child);\n        }\n        if (outline instanceof OutlineElement) {\n            return res + outline.symbol.range.endLineNumber - outline.symbol.selectionRange.startLineNumber;\n        }\n        else {\n            return res;\n        }\n    }\n};\nStickyModelFromCandidateOutlineProvider = __decorate([\n    __param(0, ILanguageFeaturesService)\n], StickyModelFromCandidateOutlineProvider);\nclass StickyModelFromCandidateFoldingProvider extends StickyModelCandidateProvider {\n    constructor(editor) {\n        super();\n        this._foldingLimitReporter = new RangesLimitReporter(editor);\n    }\n    createStickyModel(textModel, modelVersionId, token, model) {\n        const foldingElement = this._fromFoldingRegions(model);\n        return new StickyModel(textModel.uri, modelVersionId, foldingElement, undefined);\n    }\n    isModelValid(model) {\n        return model !== null;\n    }\n    _fromFoldingRegions(foldingRegions) {\n        const length = foldingRegions.length;\n        const orderedStickyElements = [];\n        // The root sticky outline element\n        const stickyOutlineElement = new StickyElement(undefined, [], undefined);\n        for (let i = 0; i < length; i++) {\n            // Finding the parent index of the current range\n            const parentIndex = foldingRegions.getParentIndex(i);\n            let parentNode;\n            if (parentIndex !== -1) {\n                // Access the reference of the parent node\n                parentNode = orderedStickyElements[parentIndex];\n            }\n            else {\n                // In that case the parent node is the root node\n                parentNode = stickyOutlineElement;\n            }\n            const child = new StickyElement(new StickyRange(foldingRegions.getStartLineNumber(i), foldingRegions.getEndLineNumber(i) + 1), [], parentNode);\n            parentNode.children.push(child);\n            orderedStickyElements.push(child);\n        }\n        return stickyOutlineElement;\n    }\n}\nlet StickyModelFromCandidateIndentationFoldingProvider = class StickyModelFromCandidateIndentationFoldingProvider extends StickyModelFromCandidateFoldingProvider {\n    constructor(editor, _languageConfigurationService) {\n        super(editor);\n        this._languageConfigurationService = _languageConfigurationService;\n    }\n    createModelFromProvider(textModel, modelVersionId, token) {\n        const provider = new IndentRangeProvider(textModel, this._languageConfigurationService, this._foldingLimitReporter);\n        return provider.compute(token);\n    }\n};\nStickyModelFromCandidateIndentationFoldingProvider = __decorate([\n    __param(1, ILanguageConfigurationService)\n], StickyModelFromCandidateIndentationFoldingProvider);\nlet StickyModelFromCandidateSyntaxFoldingProvider = class StickyModelFromCandidateSyntaxFoldingProvider extends StickyModelFromCandidateFoldingProvider {\n    constructor(editor, _languageFeaturesService) {\n        super(editor);\n        this._languageFeaturesService = _languageFeaturesService;\n    }\n    isProviderValid(textModel) {\n        const selectedProviders = FoldingController.getFoldingRangeProviders(this._languageFeaturesService, textModel);\n        return selectedProviders.length > 0;\n    }\n    createModelFromProvider(textModel, modelVersionId, token) {\n        const selectedProviders = FoldingController.getFoldingRangeProviders(this._languageFeaturesService, textModel);\n        const provider = new SyntaxRangeProvider(textModel, selectedProviders, () => this.createModelFromProvider(textModel, modelVersionId, token), this._foldingLimitReporter, undefined);\n        return provider.compute(token);\n    }\n};\nStickyModelFromCandidateSyntaxFoldingProvider = __decorate([\n    __param(1, ILanguageFeaturesService)\n], StickyModelFromCandidateSyntaxFoldingProvider);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { createTrustedTypesPolicy } from '../../../../base/browser/trustedTypes.js';\nimport { equals } from '../../../../base/common/arrays.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport './stickyScroll.css';\nimport { getColumnOfNodeOffset } from '../../../browser/viewParts/lines/viewLine.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { Position } from '../../../common/core/position.js';\nimport { StringBuilder } from '../../../common/core/stringBuilder.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { foldingCollapsedIcon, foldingExpandedIcon } from '../../folding/browser/foldingDecorations.js';\nexport class StickyScrollWidgetState {\n    constructor(startLineNumbers, endLineNumbers, lastLineRelativePosition, showEndForLine = null) {\n        this.startLineNumbers = startLineNumbers;\n        this.endLineNumbers = endLineNumbers;\n        this.lastLineRelativePosition = lastLineRelativePosition;\n        this.showEndForLine = showEndForLine;\n    }\n    equals(other) {\n        return !!other\n            && this.lastLineRelativePosition === other.lastLineRelativePosition\n            && this.showEndForLine === other.showEndForLine\n            && equals(this.startLineNumbers, other.startLineNumbers)\n            && equals(this.endLineNumbers, other.endLineNumbers);\n    }\n}\nconst _ttPolicy = createTrustedTypesPolicy('stickyScrollViewLayer', { createHTML: value => value });\nconst STICKY_INDEX_ATTR = 'data-sticky-line-index';\nconst STICKY_IS_LINE_ATTR = 'data-sticky-is-line';\nconst STICKY_IS_LINE_NUMBER_ATTR = 'data-sticky-is-line-number';\nconst STICKY_IS_FOLDING_ICON_ATTR = 'data-sticky-is-folding-icon';\nexport class StickyScrollWidget extends Disposable {\n    constructor(_editor) {\n        super();\n        this._editor = _editor;\n        this._foldingIconStore = new DisposableStore();\n        this._rootDomNode = document.createElement('div');\n        this._lineNumbersDomNode = document.createElement('div');\n        this._linesDomNodeScrollable = document.createElement('div');\n        this._linesDomNode = document.createElement('div');\n        this._lineHeight = this._editor.getOption(66 /* EditorOption.lineHeight */);\n        this._stickyLines = [];\n        this._lineNumbers = [];\n        this._lastLineRelativePosition = 0;\n        this._minContentWidthInPx = 0;\n        this._isOnGlyphMargin = false;\n        this._lineNumbersDomNode.className = 'sticky-widget-line-numbers';\n        this._lineNumbersDomNode.setAttribute('role', 'none');\n        this._linesDomNode.className = 'sticky-widget-lines';\n        this._linesDomNode.setAttribute('role', 'list');\n        this._linesDomNodeScrollable.className = 'sticky-widget-lines-scrollable';\n        this._linesDomNodeScrollable.appendChild(this._linesDomNode);\n        this._rootDomNode.className = 'sticky-widget';\n        this._rootDomNode.classList.toggle('peek', _editor instanceof EmbeddedCodeEditorWidget);\n        this._rootDomNode.appendChild(this._lineNumbersDomNode);\n        this._rootDomNode.appendChild(this._linesDomNodeScrollable);\n        const updateScrollLeftPosition = () => {\n            this._linesDomNode.style.left = this._editor.getOption(114 /* EditorOption.stickyScroll */).scrollWithEditor ? `-${this._editor.getScrollLeft()}px` : '0px';\n        };\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(114 /* EditorOption.stickyScroll */)) {\n                updateScrollLeftPosition();\n            }\n            if (e.hasChanged(66 /* EditorOption.lineHeight */)) {\n                this._lineHeight = this._editor.getOption(66 /* EditorOption.lineHeight */);\n            }\n        }));\n        this._register(this._editor.onDidScrollChange((e) => {\n            if (e.scrollLeftChanged) {\n                updateScrollLeftPosition();\n            }\n            if (e.scrollWidthChanged) {\n                this._updateWidgetWidth();\n            }\n        }));\n        this._register(this._editor.onDidChangeModel(() => {\n            updateScrollLeftPosition();\n            this._updateWidgetWidth();\n        }));\n        this._register(this._foldingIconStore);\n        updateScrollLeftPosition();\n        this._register(this._editor.onDidLayoutChange((e) => {\n            this._updateWidgetWidth();\n        }));\n        this._updateWidgetWidth();\n    }\n    get lineNumbers() {\n        return this._lineNumbers;\n    }\n    get lineNumberCount() {\n        return this._lineNumbers.length;\n    }\n    getStickyLineForLine(lineNumber) {\n        return this._stickyLines.find(stickyLine => stickyLine.lineNumber === lineNumber);\n    }\n    getCurrentLines() {\n        return this._lineNumbers;\n    }\n    setState(state, foldingModel, rebuildFromLine = Infinity) {\n        if (((!this._previousState && !state) || (this._previousState && this._previousState.equals(state)))\n            && rebuildFromLine === Infinity) {\n            return;\n        }\n        this._previousState = state;\n        const previousStickyLines = this._stickyLines;\n        this._clearStickyWidget();\n        if (!state || !this._editor._getViewModel()) {\n            return;\n        }\n        const futureWidgetHeight = state.startLineNumbers.length * this._lineHeight + state.lastLineRelativePosition;\n        if (futureWidgetHeight > 0) {\n            this._lastLineRelativePosition = state.lastLineRelativePosition;\n            const lineNumbers = [...state.startLineNumbers];\n            if (state.showEndForLine !== null) {\n                lineNumbers[state.showEndForLine] = state.endLineNumbers[state.showEndForLine];\n            }\n            this._lineNumbers = lineNumbers;\n        }\n        else {\n            this._lastLineRelativePosition = 0;\n            this._lineNumbers = [];\n        }\n        this._renderRootNode(previousStickyLines, foldingModel, rebuildFromLine);\n    }\n    _updateWidgetWidth() {\n        const layoutInfo = this._editor.getLayoutInfo();\n        const lineNumbersWidth = layoutInfo.contentLeft;\n        this._lineNumbersDomNode.style.width = `${lineNumbersWidth}px`;\n        this._linesDomNodeScrollable.style.setProperty('--vscode-editorStickyScroll-scrollableWidth', `${this._editor.getScrollWidth() - layoutInfo.verticalScrollbarWidth}px`);\n        this._rootDomNode.style.width = `${layoutInfo.width - layoutInfo.verticalScrollbarWidth}px`;\n    }\n    _clearStickyWidget() {\n        this._stickyLines = [];\n        this._foldingIconStore.clear();\n        dom.clearNode(this._lineNumbersDomNode);\n        dom.clearNode(this._linesDomNode);\n        this._rootDomNode.style.display = 'none';\n    }\n    _useFoldingOpacityTransition(requireTransitions) {\n        this._lineNumbersDomNode.style.setProperty('--vscode-editorStickyScroll-foldingOpacityTransition', `opacity ${requireTransitions ? 0.5 : 0}s`);\n    }\n    _setFoldingIconsVisibility(allVisible) {\n        for (const line of this._stickyLines) {\n            const foldingIcon = line.foldingIcon;\n            if (!foldingIcon) {\n                continue;\n            }\n            foldingIcon.setVisible(allVisible ? true : foldingIcon.isCollapsed);\n        }\n    }\n    _renderRootNode(previousStickyLines, foldingModel, rebuildFromLine = Infinity) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const layoutInfo = this._editor.getLayoutInfo();\n            for (const [index, line] of this._lineNumbers.entries()) {\n                const previousStickyLine = previousStickyLines[index];\n                const stickyLine = (line >= rebuildFromLine || (previousStickyLine === null || previousStickyLine === void 0 ? void 0 : previousStickyLine.lineNumber) !== line)\n                    ? this._renderChildNode(index, line, foldingModel, layoutInfo)\n                    : this._updateTopAndZIndexOfStickyLine(previousStickyLine);\n                if (!stickyLine) {\n                    continue;\n                }\n                this._linesDomNode.appendChild(stickyLine.lineDomNode);\n                this._lineNumbersDomNode.appendChild(stickyLine.lineNumberDomNode);\n                this._stickyLines.push(stickyLine);\n            }\n            if (foldingModel) {\n                this._setFoldingHoverListeners();\n                this._useFoldingOpacityTransition(!this._isOnGlyphMargin);\n            }\n            const widgetHeight = this._lineNumbers.length * this._lineHeight + this._lastLineRelativePosition;\n            if (widgetHeight === 0) {\n                this._clearStickyWidget();\n                return;\n            }\n            this._rootDomNode.style.display = 'block';\n            this._lineNumbersDomNode.style.height = `${widgetHeight}px`;\n            this._linesDomNodeScrollable.style.height = `${widgetHeight}px`;\n            this._rootDomNode.style.height = `${widgetHeight}px`;\n            this._rootDomNode.style.marginLeft = '0px';\n            this._updateMinContentWidth();\n            this._editor.layoutOverlayWidget(this);\n        });\n    }\n    _setFoldingHoverListeners() {\n        const showFoldingControls = this._editor.getOption(109 /* EditorOption.showFoldingControls */);\n        if (showFoldingControls !== 'mouseover') {\n            return;\n        }\n        this._foldingIconStore.add(dom.addDisposableListener(this._lineNumbersDomNode, dom.EventType.MOUSE_ENTER, (e) => {\n            this._isOnGlyphMargin = true;\n            this._setFoldingIconsVisibility(true);\n        }));\n        this._foldingIconStore.add(dom.addDisposableListener(this._lineNumbersDomNode, dom.EventType.MOUSE_LEAVE, () => {\n            this._isOnGlyphMargin = false;\n            this._useFoldingOpacityTransition(true);\n            this._setFoldingIconsVisibility(false);\n        }));\n    }\n    _renderChildNode(index, line, foldingModel, layoutInfo) {\n        const viewModel = this._editor._getViewModel();\n        if (!viewModel) {\n            return;\n        }\n        const viewLineNumber = viewModel.coordinatesConverter.convertModelPositionToViewPosition(new Position(line, 1)).lineNumber;\n        const lineRenderingData = viewModel.getViewLineRenderingData(viewLineNumber);\n        const lineNumberOption = this._editor.getOption(67 /* EditorOption.lineNumbers */);\n        let actualInlineDecorations;\n        try {\n            actualInlineDecorations = LineDecoration.filter(lineRenderingData.inlineDecorations, viewLineNumber, lineRenderingData.minColumn, lineRenderingData.maxColumn);\n        }\n        catch (err) {\n            actualInlineDecorations = [];\n        }\n        const renderLineInput = new RenderLineInput(true, true, lineRenderingData.content, lineRenderingData.continuesWithWrappedLine, lineRenderingData.isBasicASCII, lineRenderingData.containsRTL, 0, lineRenderingData.tokens, actualInlineDecorations, lineRenderingData.tabSize, lineRenderingData.startVisibleColumn, 1, 1, 1, 500, 'none', true, true, null);\n        const sb = new StringBuilder(2000);\n        const renderOutput = renderViewLine(renderLineInput, sb);\n        let newLine;\n        if (_ttPolicy) {\n            newLine = _ttPolicy.createHTML(sb.build());\n        }\n        else {\n            newLine = sb.build();\n        }\n        const lineHTMLNode = document.createElement('span');\n        lineHTMLNode.setAttribute(STICKY_INDEX_ATTR, String(index));\n        lineHTMLNode.setAttribute(STICKY_IS_LINE_ATTR, '');\n        lineHTMLNode.setAttribute('role', 'listitem');\n        lineHTMLNode.tabIndex = 0;\n        lineHTMLNode.className = 'sticky-line-content';\n        lineHTMLNode.classList.add(`stickyLine${line}`);\n        lineHTMLNode.style.lineHeight = `${this._lineHeight}px`;\n        lineHTMLNode.innerHTML = newLine;\n        const lineNumberHTMLNode = document.createElement('span');\n        lineNumberHTMLNode.setAttribute(STICKY_INDEX_ATTR, String(index));\n        lineNumberHTMLNode.setAttribute(STICKY_IS_LINE_NUMBER_ATTR, '');\n        lineNumberHTMLNode.className = 'sticky-line-number';\n        lineNumberHTMLNode.style.lineHeight = `${this._lineHeight}px`;\n        const lineNumbersWidth = layoutInfo.contentLeft;\n        lineNumberHTMLNode.style.width = `${lineNumbersWidth}px`;\n        const innerLineNumberHTML = document.createElement('span');\n        if (lineNumberOption.renderType === 1 /* RenderLineNumbersType.On */ || lineNumberOption.renderType === 3 /* RenderLineNumbersType.Interval */ && line % 10 === 0) {\n            innerLineNumberHTML.innerText = line.toString();\n        }\n        else if (lineNumberOption.renderType === 2 /* RenderLineNumbersType.Relative */) {\n            innerLineNumberHTML.innerText = Math.abs(line - this._editor.getPosition().lineNumber).toString();\n        }\n        innerLineNumberHTML.className = 'sticky-line-number-inner';\n        innerLineNumberHTML.style.lineHeight = `${this._lineHeight}px`;\n        innerLineNumberHTML.style.width = `${layoutInfo.lineNumbersWidth}px`;\n        innerLineNumberHTML.style.paddingLeft = `${layoutInfo.lineNumbersLeft}px`;\n        lineNumberHTMLNode.appendChild(innerLineNumberHTML);\n        const foldingIcon = this._renderFoldingIconForLine(foldingModel, line);\n        if (foldingIcon) {\n            lineNumberHTMLNode.appendChild(foldingIcon.domNode);\n        }\n        this._editor.applyFontInfo(lineHTMLNode);\n        this._editor.applyFontInfo(innerLineNumberHTML);\n        lineNumberHTMLNode.style.lineHeight = `${this._lineHeight}px`;\n        lineHTMLNode.style.lineHeight = `${this._lineHeight}px`;\n        lineNumberHTMLNode.style.height = `${this._lineHeight}px`;\n        lineHTMLNode.style.height = `${this._lineHeight}px`;\n        const renderedLine = new RenderedStickyLine(index, line, lineHTMLNode, lineNumberHTMLNode, foldingIcon, renderOutput.characterMapping);\n        return this._updateTopAndZIndexOfStickyLine(renderedLine);\n    }\n    _updateTopAndZIndexOfStickyLine(stickyLine) {\n        var _a;\n        const index = stickyLine.index;\n        const lineHTMLNode = stickyLine.lineDomNode;\n        const lineNumberHTMLNode = stickyLine.lineNumberDomNode;\n        const isLastLine = index === this._lineNumbers.length - 1;\n        const lastLineZIndex = '0';\n        const intermediateLineZIndex = '1';\n        lineHTMLNode.style.zIndex = isLastLine ? lastLineZIndex : intermediateLineZIndex;\n        lineNumberHTMLNode.style.zIndex = isLastLine ? lastLineZIndex : intermediateLineZIndex;\n        const lastLineTop = `${index * this._lineHeight + this._lastLineRelativePosition + (((_a = stickyLine.foldingIcon) === null || _a === void 0 ? void 0 : _a.isCollapsed) ? 1 : 0)}px`;\n        const intermediateLineTop = `${index * this._lineHeight}px`;\n        lineHTMLNode.style.top = isLastLine ? lastLineTop : intermediateLineTop;\n        lineNumberHTMLNode.style.top = isLastLine ? lastLineTop : intermediateLineTop;\n        return stickyLine;\n    }\n    _renderFoldingIconForLine(foldingModel, line) {\n        const showFoldingControls = this._editor.getOption(109 /* EditorOption.showFoldingControls */);\n        if (!foldingModel || showFoldingControls === 'never') {\n            return;\n        }\n        const foldingRegions = foldingModel.regions;\n        const indexOfFoldingRegion = foldingRegions.findRange(line);\n        const startLineNumber = foldingRegions.getStartLineNumber(indexOfFoldingRegion);\n        const isFoldingScope = line === startLineNumber;\n        if (!isFoldingScope) {\n            return;\n        }\n        const isCollapsed = foldingRegions.isCollapsed(indexOfFoldingRegion);\n        const foldingIcon = new StickyFoldingIcon(isCollapsed, startLineNumber, foldingRegions.getEndLineNumber(indexOfFoldingRegion), this._lineHeight);\n        foldingIcon.setVisible(this._isOnGlyphMargin ? true : (isCollapsed || showFoldingControls === 'always'));\n        foldingIcon.domNode.setAttribute(STICKY_IS_FOLDING_ICON_ATTR, '');\n        return foldingIcon;\n    }\n    _updateMinContentWidth() {\n        this._minContentWidthInPx = 0;\n        for (const stickyLine of this._stickyLines) {\n            if (stickyLine.lineDomNode.scrollWidth > this._minContentWidthInPx) {\n                this._minContentWidthInPx = stickyLine.lineDomNode.scrollWidth;\n            }\n        }\n        this._minContentWidthInPx += this._editor.getLayoutInfo().verticalScrollbarWidth;\n    }\n    getId() {\n        return 'editor.contrib.stickyScrollWidget';\n    }\n    getDomNode() {\n        return this._rootDomNode;\n    }\n    getPosition() {\n        return {\n            preference: null\n        };\n    }\n    getMinContentWidthInPx() {\n        return this._minContentWidthInPx;\n    }\n    focusLineWithIndex(index) {\n        if (0 <= index && index < this._stickyLines.length) {\n            this._stickyLines[index].lineDomNode.focus();\n        }\n    }\n    /**\n     * Given a leaf dom node, tries to find the editor position.\n     */\n    getEditorPositionFromNode(spanDomNode) {\n        if (!spanDomNode || spanDomNode.children.length > 0) {\n            // This is not a leaf node\n            return null;\n        }\n        const renderedStickyLine = this._getRenderedStickyLineFromChildDomNode(spanDomNode);\n        if (!renderedStickyLine) {\n            return null;\n        }\n        const column = getColumnOfNodeOffset(renderedStickyLine.characterMapping, spanDomNode, 0);\n        return new Position(renderedStickyLine.lineNumber, column);\n    }\n    getLineNumberFromChildDomNode(domNode) {\n        var _a, _b;\n        return (_b = (_a = this._getRenderedStickyLineFromChildDomNode(domNode)) === null || _a === void 0 ? void 0 : _a.lineNumber) !== null && _b !== void 0 ? _b : null;\n    }\n    _getRenderedStickyLineFromChildDomNode(domNode) {\n        const index = this.getLineIndexFromChildDomNode(domNode);\n        if (index === null || index < 0 || index >= this._stickyLines.length) {\n            return null;\n        }\n        return this._stickyLines[index];\n    }\n    /**\n     * Given a child dom node, tries to find the line number attribute that was stored in the node.\n     * @returns the attribute value or null if none is found.\n     */\n    getLineIndexFromChildDomNode(domNode) {\n        const lineIndex = this._getAttributeValue(domNode, STICKY_INDEX_ATTR);\n        return lineIndex ? parseInt(lineIndex, 10) : null;\n    }\n    /**\n     * Given a child dom node, tries to find if it is (contained in) a sticky line.\n     * @returns a boolean.\n     */\n    isInStickyLine(domNode) {\n        const isInLine = this._getAttributeValue(domNode, STICKY_IS_LINE_ATTR);\n        return isInLine !== undefined;\n    }\n    /**\n     * Given a child dom node, tries to find if this dom node is (contained in) a sticky folding icon.\n     * @returns a boolean.\n     */\n    isInFoldingIconDomNode(domNode) {\n        const isInFoldingIcon = this._getAttributeValue(domNode, STICKY_IS_FOLDING_ICON_ATTR);\n        return isInFoldingIcon !== undefined;\n    }\n    /**\n     * Given the dom node, finds if it or its parent sequence contains the given attribute.\n     * @returns the attribute value or undefined.\n     */\n    _getAttributeValue(domNode, attribute) {\n        while (domNode && domNode !== this._rootDomNode) {\n            const line = domNode.getAttribute(attribute);\n            if (line !== null) {\n                return line;\n            }\n            domNode = domNode.parentElement;\n        }\n        return;\n    }\n}\nclass RenderedStickyLine {\n    constructor(index, lineNumber, lineDomNode, lineNumberDomNode, foldingIcon, characterMapping) {\n        this.index = index;\n        this.lineNumber = lineNumber;\n        this.lineDomNode = lineDomNode;\n        this.lineNumberDomNode = lineNumberDomNode;\n        this.foldingIcon = foldingIcon;\n        this.characterMapping = characterMapping;\n    }\n}\nclass StickyFoldingIcon {\n    constructor(isCollapsed, foldingStartLine, foldingEndLine, dimension) {\n        this.isCollapsed = isCollapsed;\n        this.foldingStartLine = foldingStartLine;\n        this.foldingEndLine = foldingEndLine;\n        this.dimension = dimension;\n        this.domNode = document.createElement('div');\n        this.domNode.style.width = `${dimension}px`;\n        this.domNode.style.height = `${dimension}px`;\n        this.domNode.className = ThemeIcon.asClassName(isCollapsed ? foldingCollapsedIcon : foldingExpandedIcon);\n    }\n    setVisible(visible) {\n        this.domNode.style.cursor = visible ? 'pointer' : 'default';\n        this.domNode.style.opacity = visible ? '1' : '0';\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class StickyRange {\n    constructor(startLineNumber, endLineNumber) {\n        this.startLineNumber = startLineNumber;\n        this.endLineNumber = endLineNumber;\n    }\n}\nexport class StickyElement {\n    constructor(\n    /**\n     * Range of line numbers spanned by the current scope\n     */\n    range, \n    /**\n     * Must be sorted by start line number\n    */\n    children, \n    /**\n     * Parent sticky outline element\n     */\n    parent) {\n        this.range = range;\n        this.children = children;\n        this.parent = parent;\n    }\n}\nexport class StickyModel {\n    constructor(uri, version, element, outlineProviderId) {\n        this.uri = uri;\n        this.version = version;\n        this.element = element;\n        this.outlineProviderId = outlineProviderId;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { binarySearch } from '../../../../base/common/arrays.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { StickyModelProvider } from './stickyScrollModelProvider.js';\nexport class StickyLineCandidate {\n    constructor(startLineNumber, endLineNumber, nestingDepth) {\n        this.startLineNumber = startLineNumber;\n        this.endLineNumber = endLineNumber;\n        this.nestingDepth = nestingDepth;\n    }\n}\nlet StickyLineCandidateProvider = class StickyLineCandidateProvider extends Disposable {\n    constructor(editor, _languageFeaturesService, _languageConfigurationService) {\n        super();\n        this._languageFeaturesService = _languageFeaturesService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._onDidChangeStickyScroll = this._register(new Emitter());\n        this.onDidChangeStickyScroll = this._onDidChangeStickyScroll.event;\n        this._options = null;\n        this._model = null;\n        this._cts = null;\n        this._stickyModelProvider = null;\n        this._editor = editor;\n        this._sessionStore = this._register(new DisposableStore());\n        this._updateSoon = this._register(new RunOnceScheduler(() => this.update(), 50));\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(114 /* EditorOption.stickyScroll */)) {\n                this.readConfiguration();\n            }\n        }));\n        this.readConfiguration();\n    }\n    readConfiguration() {\n        this._stickyModelProvider = null;\n        this._sessionStore.clear();\n        this._options = this._editor.getOption(114 /* EditorOption.stickyScroll */);\n        if (!this._options.enabled) {\n            return;\n        }\n        this._stickyModelProvider = this._sessionStore.add(new StickyModelProvider(this._editor, this._languageConfigurationService, this._languageFeaturesService, this._options.defaultModel));\n        this._sessionStore.add(this._editor.onDidChangeModel(() => {\n            // We should not show an old model for a different file, it will always be wrong.\n            // So we clear the model here immediately and then trigger an update.\n            this._model = null;\n            this._onDidChangeStickyScroll.fire();\n            this.update();\n        }));\n        this._sessionStore.add(this._editor.onDidChangeHiddenAreas(() => this.update()));\n        this._sessionStore.add(this._editor.onDidChangeModelContent(() => this._updateSoon.schedule()));\n        this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => this.update()));\n        this.update();\n    }\n    getVersionId() {\n        var _a;\n        return (_a = this._model) === null || _a === void 0 ? void 0 : _a.version;\n    }\n    update() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = this._cts) === null || _a === void 0 ? void 0 : _a.dispose(true);\n            this._cts = new CancellationTokenSource();\n            yield this.updateStickyModel(this._cts.token);\n            this._onDidChangeStickyScroll.fire();\n        });\n    }\n    updateStickyModel(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel() || !this._stickyModelProvider || this._editor.getModel().isTooLargeForTokenization()) {\n                this._model = null;\n                return;\n            }\n            const textModel = this._editor.getModel();\n            const modelVersionId = textModel.getVersionId();\n            const model = yield this._stickyModelProvider.update(textModel, modelVersionId, token);\n            if (token.isCancellationRequested) {\n                // the computation was canceled, so do not overwrite the model\n                return;\n            }\n            this._model = model;\n        });\n    }\n    updateIndex(index) {\n        if (index === -1) {\n            index = 0;\n        }\n        else if (index < 0) {\n            index = -index - 2;\n        }\n        return index;\n    }\n    getCandidateStickyLinesIntersectingFromStickyModel(range, outlineModel, result, depth, lastStartLineNumber) {\n        if (outlineModel.children.length === 0) {\n            return;\n        }\n        let lastLine = lastStartLineNumber;\n        const childrenStartLines = [];\n        for (let i = 0; i < outlineModel.children.length; i++) {\n            const child = outlineModel.children[i];\n            if (child.range) {\n                childrenStartLines.push(child.range.startLineNumber);\n            }\n        }\n        const lowerBound = this.updateIndex(binarySearch(childrenStartLines, range.startLineNumber, (a, b) => { return a - b; }));\n        const upperBound = this.updateIndex(binarySearch(childrenStartLines, range.startLineNumber + depth, (a, b) => { return a - b; }));\n        for (let i = lowerBound; i <= upperBound; i++) {\n            const child = outlineModel.children[i];\n            if (!child) {\n                return;\n            }\n            if (child.range) {\n                const childStartLine = child.range.startLineNumber;\n                const childEndLine = child.range.endLineNumber;\n                if (range.startLineNumber <= childEndLine + 1 && childStartLine - 1 <= range.endLineNumber && childStartLine !== lastLine) {\n                    lastLine = childStartLine;\n                    result.push(new StickyLineCandidate(childStartLine, childEndLine - 1, depth + 1));\n                    this.getCandidateStickyLinesIntersectingFromStickyModel(range, child, result, depth + 1, childStartLine);\n                }\n            }\n            else {\n                this.getCandidateStickyLinesIntersectingFromStickyModel(range, child, result, depth, lastStartLineNumber);\n            }\n        }\n    }\n    getCandidateStickyLinesIntersecting(range) {\n        var _a, _b;\n        if (!((_a = this._model) === null || _a === void 0 ? void 0 : _a.element)) {\n            return [];\n        }\n        let stickyLineCandidates = [];\n        this.getCandidateStickyLinesIntersectingFromStickyModel(range, this._model.element, stickyLineCandidates, 0, -1);\n        const hiddenRanges = (_b = this._editor._getViewModel()) === null || _b === void 0 ? void 0 : _b.getHiddenAreas();\n        if (hiddenRanges) {\n            for (const hiddenRange of hiddenRanges) {\n                stickyLineCandidates = stickyLineCandidates.filter(stickyLine => !(stickyLine.startLineNumber >= hiddenRange.startLineNumber && stickyLine.endLineNumber <= hiddenRange.endLineNumber + 1));\n            }\n        }\n        return stickyLineCandidates;\n    }\n};\nStickyLineCandidateProvider = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ILanguageConfigurationService)\n], StickyLineCandidateProvider);\nexport { StickyLineCandidateProvider };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar StickyScrollController_1;\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { StickyScrollWidget, StickyScrollWidgetState } from './stickyScrollWidget.js';\nimport { StickyLineCandidateProvider } from './stickyScrollProvider.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\nimport { Range } from '../../../common/core/range.js';\nimport { getDefinitionsAtPosition } from '../../gotoSymbol/browser/goToSymbol.js';\nimport { goToDefinitionWithLocation } from '../../inlayHints/browser/inlayHintsLocations.js';\nimport { Position } from '../../../common/core/position.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { StickyRange } from './stickyScrollElement.js';\nimport { StandardMouseEvent } from '../../../../base/browser/mouseEvent.js';\nimport { FoldingController } from '../../folding/browser/folding.js';\nimport { toggleCollapseState } from '../../folding/browser/foldingModel.js';\nlet StickyScrollController = StickyScrollController_1 = class StickyScrollController extends Disposable {\n    constructor(_editor, _contextMenuService, _languageFeaturesService, _instaService, _languageConfigurationService, _languageFeatureDebounceService, _contextKeyService) {\n        super();\n        this._editor = _editor;\n        this._contextMenuService = _contextMenuService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._instaService = _instaService;\n        this._contextKeyService = _contextKeyService;\n        this._sessionStore = new DisposableStore();\n        this._foldingModel = null;\n        this._maxStickyLines = Number.MAX_SAFE_INTEGER;\n        this._candidateDefinitionsLength = -1;\n        this._focusedStickyElementIndex = -1;\n        this._enabled = false;\n        this._focused = false;\n        this._positionRevealed = false;\n        this._onMouseDown = false;\n        this._endLineNumbers = [];\n        this._showEndForLine = null;\n        this._stickyScrollWidget = new StickyScrollWidget(this._editor);\n        this._stickyLineCandidateProvider = new StickyLineCandidateProvider(this._editor, _languageFeaturesService, _languageConfigurationService);\n        this._register(this._stickyScrollWidget);\n        this._register(this._stickyLineCandidateProvider);\n        this._widgetState = new StickyScrollWidgetState([], [], 0);\n        this._readConfiguration();\n        const stickyScrollDomNode = this._stickyScrollWidget.getDomNode();\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(114 /* EditorOption.stickyScroll */)\n                || e.hasChanged(72 /* EditorOption.minimap */)\n                || e.hasChanged(66 /* EditorOption.lineHeight */)\n                || e.hasChanged(109 /* EditorOption.showFoldingControls */)) {\n                this._readConfiguration();\n            }\n        }));\n        this._register(dom.addDisposableListener(stickyScrollDomNode, dom.EventType.CONTEXT_MENU, (event) => __awaiter(this, void 0, void 0, function* () {\n            this._onContextMenu(event);\n        })));\n        this._stickyScrollFocusedContextKey = EditorContextKeys.stickyScrollFocused.bindTo(this._contextKeyService);\n        this._stickyScrollVisibleContextKey = EditorContextKeys.stickyScrollVisible.bindTo(this._contextKeyService);\n        const focusTracker = this._register(dom.trackFocus(stickyScrollDomNode));\n        this._register(focusTracker.onDidBlur(_ => {\n            // Suppose that the blurring is caused by scrolling, then keep the focus on the sticky scroll\n            // This is determined by the fact that the height of the widget has become zero and there has been no position revealing\n            if (this._positionRevealed === false && stickyScrollDomNode.clientHeight === 0) {\n                this._focusedStickyElementIndex = -1;\n                this.focus();\n            }\n            // In all other casees, dispose the focus on the sticky scroll\n            else {\n                this._disposeFocusStickyScrollStore();\n            }\n        }));\n        this._register(focusTracker.onDidFocus(_ => {\n            this.focus();\n        }));\n        this._registerMouseListeners();\n        // Suppose that mouse down on the sticky scroll, then do not focus on the sticky scroll because this will be followed by the revealing of a position\n        this._register(dom.addDisposableListener(stickyScrollDomNode, dom.EventType.MOUSE_DOWN, (e) => {\n            this._onMouseDown = true;\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(StickyScrollController_1.ID);\n    }\n    _disposeFocusStickyScrollStore() {\n        var _a;\n        this._stickyScrollFocusedContextKey.set(false);\n        (_a = this._focusDisposableStore) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._focused = false;\n        this._positionRevealed = false;\n        this._onMouseDown = false;\n    }\n    focus() {\n        // If the mouse is down, do not focus on the sticky scroll\n        if (this._onMouseDown) {\n            this._onMouseDown = false;\n            this._editor.focus();\n            return;\n        }\n        const focusState = this._stickyScrollFocusedContextKey.get();\n        if (focusState === true) {\n            return;\n        }\n        this._focused = true;\n        this._focusDisposableStore = new DisposableStore();\n        this._stickyScrollFocusedContextKey.set(true);\n        this._focusedStickyElementIndex = this._stickyScrollWidget.lineNumbers.length - 1;\n        this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);\n    }\n    focusNext() {\n        if (this._focusedStickyElementIndex < this._stickyScrollWidget.lineNumberCount - 1) {\n            this._focusNav(true);\n        }\n    }\n    focusPrevious() {\n        if (this._focusedStickyElementIndex > 0) {\n            this._focusNav(false);\n        }\n    }\n    selectEditor() {\n        this._editor.focus();\n    }\n    // True is next, false is previous\n    _focusNav(direction) {\n        this._focusedStickyElementIndex = direction ? this._focusedStickyElementIndex + 1 : this._focusedStickyElementIndex - 1;\n        this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);\n    }\n    goToFocused() {\n        const lineNumbers = this._stickyScrollWidget.lineNumbers;\n        this._disposeFocusStickyScrollStore();\n        this._revealPosition({ lineNumber: lineNumbers[this._focusedStickyElementIndex], column: 1 });\n    }\n    _revealPosition(position) {\n        this._reveaInEditor(position, () => this._editor.revealPosition(position));\n    }\n    _revealLineInCenterIfOutsideViewport(position) {\n        this._reveaInEditor(position, () => this._editor.revealLineInCenterIfOutsideViewport(position.lineNumber, 0 /* ScrollType.Smooth */));\n    }\n    _reveaInEditor(position, revealFunction) {\n        if (this._focused) {\n            this._disposeFocusStickyScrollStore();\n        }\n        this._positionRevealed = true;\n        revealFunction();\n        this._editor.setSelection(Range.fromPositions(position));\n        this._editor.focus();\n    }\n    _registerMouseListeners() {\n        const sessionStore = this._register(new DisposableStore());\n        const gesture = this._register(new ClickLinkGesture(this._editor, {\n            extractLineNumberFromMouseEvent: (e) => {\n                const position = this._stickyScrollWidget.getEditorPositionFromNode(e.target.element);\n                return position ? position.lineNumber : 0;\n            }\n        }));\n        const getMouseEventTarget = (mouseEvent) => {\n            if (!this._editor.hasModel()) {\n                return null;\n            }\n            if (mouseEvent.target.type !== 12 /* MouseTargetType.OVERLAY_WIDGET */ || mouseEvent.target.detail !== this._stickyScrollWidget.getId()) {\n                // not hovering over our widget\n                return null;\n            }\n            const mouseTargetElement = mouseEvent.target.element;\n            if (!mouseTargetElement || mouseTargetElement.innerText !== mouseTargetElement.innerHTML) {\n                // not on a span element rendering text\n                return null;\n            }\n            const position = this._stickyScrollWidget.getEditorPositionFromNode(mouseTargetElement);\n            if (!position) {\n                // not hovering a sticky scroll line\n                return null;\n            }\n            return {\n                range: new Range(position.lineNumber, position.column, position.lineNumber, position.column + mouseTargetElement.innerText.length),\n                textElement: mouseTargetElement\n            };\n        };\n        const stickyScrollWidgetDomNode = this._stickyScrollWidget.getDomNode();\n        this._register(dom.addStandardDisposableListener(stickyScrollWidgetDomNode, dom.EventType.CLICK, (mouseEvent) => {\n            if (mouseEvent.ctrlKey || mouseEvent.altKey || mouseEvent.metaKey) {\n                // modifier pressed\n                return;\n            }\n            if (!mouseEvent.leftButton) {\n                // not left click\n                return;\n            }\n            if (mouseEvent.shiftKey) {\n                // shift click\n                const lineIndex = this._stickyScrollWidget.getLineIndexFromChildDomNode(mouseEvent.target);\n                if (lineIndex === null) {\n                    return;\n                }\n                const position = new Position(this._endLineNumbers[lineIndex], 1);\n                this._revealLineInCenterIfOutsideViewport(position);\n                return;\n            }\n            const isInFoldingIconDomNode = this._stickyScrollWidget.isInFoldingIconDomNode(mouseEvent.target);\n            if (isInFoldingIconDomNode) {\n                // clicked on folding icon\n                const lineNumber = this._stickyScrollWidget.getLineNumberFromChildDomNode(mouseEvent.target);\n                this._toggleFoldingRegionForLine(lineNumber);\n                return;\n            }\n            const isInStickyLine = this._stickyScrollWidget.isInStickyLine(mouseEvent.target);\n            if (!isInStickyLine) {\n                return;\n            }\n            // normal click\n            let position = this._stickyScrollWidget.getEditorPositionFromNode(mouseEvent.target);\n            if (!position) {\n                const lineNumber = this._stickyScrollWidget.getLineNumberFromChildDomNode(mouseEvent.target);\n                if (lineNumber === null) {\n                    // not hovering a sticky scroll line\n                    return;\n                }\n                position = new Position(lineNumber, 1);\n            }\n            this._revealPosition(position);\n        }));\n        this._register(dom.addStandardDisposableListener(stickyScrollWidgetDomNode, dom.EventType.MOUSE_MOVE, (mouseEvent) => {\n            if (mouseEvent.shiftKey) {\n                const currentEndForLineIndex = this._stickyScrollWidget.getLineIndexFromChildDomNode(mouseEvent.target);\n                if (currentEndForLineIndex === null || this._showEndForLine !== null && this._showEndForLine === currentEndForLineIndex) {\n                    return;\n                }\n                this._showEndForLine = currentEndForLineIndex;\n                this._renderStickyScroll();\n                return;\n            }\n            if (this._showEndForLine !== null) {\n                this._showEndForLine = null;\n                this._renderStickyScroll();\n            }\n        }));\n        this._register(dom.addDisposableListener(stickyScrollWidgetDomNode, dom.EventType.MOUSE_LEAVE, (e) => {\n            if (this._showEndForLine !== null) {\n                this._showEndForLine = null;\n                this._renderStickyScroll();\n            }\n        }));\n        this._register(gesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, _keyboardEvent]) => {\n            const mouseTarget = getMouseEventTarget(mouseEvent);\n            if (!mouseTarget || !mouseEvent.hasTriggerModifier || !this._editor.hasModel()) {\n                sessionStore.clear();\n                return;\n            }\n            const { range, textElement } = mouseTarget;\n            if (!range.equalsRange(this._stickyRangeProjectedOnEditor)) {\n                this._stickyRangeProjectedOnEditor = range;\n                sessionStore.clear();\n            }\n            else if (textElement.style.textDecoration === 'underline') {\n                return;\n            }\n            const cancellationToken = new CancellationTokenSource();\n            sessionStore.add(toDisposable(() => cancellationToken.dispose(true)));\n            let currentHTMLChild;\n            getDefinitionsAtPosition(this._languageFeaturesService.definitionProvider, this._editor.getModel(), new Position(range.startLineNumber, range.startColumn + 1), cancellationToken.token).then((candidateDefinitions => {\n                if (cancellationToken.token.isCancellationRequested) {\n                    return;\n                }\n                if (candidateDefinitions.length !== 0) {\n                    this._candidateDefinitionsLength = candidateDefinitions.length;\n                    const childHTML = textElement;\n                    if (currentHTMLChild !== childHTML) {\n                        sessionStore.clear();\n                        currentHTMLChild = childHTML;\n                        currentHTMLChild.style.textDecoration = 'underline';\n                        sessionStore.add(toDisposable(() => {\n                            currentHTMLChild.style.textDecoration = 'none';\n                        }));\n                    }\n                    else if (!currentHTMLChild) {\n                        currentHTMLChild = childHTML;\n                        currentHTMLChild.style.textDecoration = 'underline';\n                        sessionStore.add(toDisposable(() => {\n                            currentHTMLChild.style.textDecoration = 'none';\n                        }));\n                    }\n                }\n                else {\n                    sessionStore.clear();\n                }\n            }));\n        }));\n        this._register(gesture.onCancel(() => {\n            sessionStore.clear();\n        }));\n        this._register(gesture.onExecute((e) => __awaiter(this, void 0, void 0, function* () {\n            if (e.target.type !== 12 /* MouseTargetType.OVERLAY_WIDGET */ || e.target.detail !== this._stickyScrollWidget.getId()) {\n                // not hovering over our widget\n                return;\n            }\n            const position = this._stickyScrollWidget.getEditorPositionFromNode(e.target.element);\n            if (!position) {\n                // not hovering a sticky scroll line\n                return;\n            }\n            if (this._candidateDefinitionsLength > 1) {\n                if (this._focused) {\n                    this._disposeFocusStickyScrollStore();\n                }\n                this._revealPosition({ lineNumber: position.lineNumber, column: 1 });\n            }\n            this._instaService.invokeFunction(goToDefinitionWithLocation, e, this._editor, { uri: this._editor.getModel().uri, range: this._stickyRangeProjectedOnEditor });\n        })));\n    }\n    _onContextMenu(e) {\n        const event = new StandardMouseEvent(e);\n        this._contextMenuService.showContextMenu({\n            menuId: MenuId.StickyScrollContext,\n            getAnchor: () => event,\n        });\n    }\n    _toggleFoldingRegionForLine(line) {\n        if (!this._foldingModel || line === null) {\n            return;\n        }\n        const stickyLine = this._stickyScrollWidget.getStickyLineForLine(line);\n        const foldingIcon = stickyLine === null || stickyLine === void 0 ? void 0 : stickyLine.foldingIcon;\n        if (!foldingIcon) {\n            return;\n        }\n        toggleCollapseState(this._foldingModel, Number.MAX_VALUE, [line]);\n        foldingIcon.isCollapsed = !foldingIcon.isCollapsed;\n        const scrollTop = (foldingIcon.isCollapsed ?\n            this._editor.getTopForLineNumber(foldingIcon.foldingEndLine)\n            : this._editor.getTopForLineNumber(foldingIcon.foldingStartLine))\n            - this._editor.getOption(66 /* EditorOption.lineHeight */) * stickyLine.index + 1;\n        this._editor.setScrollTop(scrollTop);\n        this._renderStickyScroll(line);\n    }\n    _readConfiguration() {\n        const options = this._editor.getOption(114 /* EditorOption.stickyScroll */);\n        if (options.enabled === false) {\n            this._editor.removeOverlayWidget(this._stickyScrollWidget);\n            this._sessionStore.clear();\n            this._enabled = false;\n            return;\n        }\n        else if (options.enabled && !this._enabled) {\n            // When sticky scroll was just enabled, add the listeners on the sticky scroll\n            this._editor.addOverlayWidget(this._stickyScrollWidget);\n            this._sessionStore.add(this._editor.onDidScrollChange((e) => {\n                if (e.scrollTopChanged) {\n                    this._showEndForLine = null;\n                    this._renderStickyScroll();\n                }\n            }));\n            this._sessionStore.add(this._editor.onDidLayoutChange(() => this._onDidResize()));\n            this._sessionStore.add(this._editor.onDidChangeModelTokens((e) => this._onTokensChange(e)));\n            this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(() => {\n                this._showEndForLine = null;\n                this._renderStickyScroll();\n            }));\n            this._enabled = true;\n        }\n        const lineNumberOption = this._editor.getOption(67 /* EditorOption.lineNumbers */);\n        if (lineNumberOption.renderType === 2 /* RenderLineNumbersType.Relative */) {\n            this._sessionStore.add(this._editor.onDidChangeCursorPosition(() => {\n                this._showEndForLine = null;\n                this._renderStickyScroll();\n            }));\n        }\n    }\n    _needsUpdate(event) {\n        const stickyLineNumbers = this._stickyScrollWidget.getCurrentLines();\n        for (const stickyLineNumber of stickyLineNumbers) {\n            for (const range of event.ranges) {\n                if (stickyLineNumber >= range.fromLineNumber && stickyLineNumber <= range.toLineNumber) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    _onTokensChange(event) {\n        if (this._needsUpdate(event)) {\n            // Rebuilding the whole widget from line -1\n            this._renderStickyScroll(-1);\n        }\n    }\n    _onDidResize() {\n        const layoutInfo = this._editor.getLayoutInfo();\n        // Make sure sticky scroll doesn't take up more than 25% of the editor\n        const theoreticalLines = layoutInfo.height / this._editor.getOption(66 /* EditorOption.lineHeight */);\n        this._maxStickyLines = Math.round(theoreticalLines * .25);\n    }\n    _renderStickyScroll(rebuildFromLine = Infinity) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const model = this._editor.getModel();\n            if (!model || model.isTooLargeForTokenization()) {\n                this._foldingModel = null;\n                this._stickyScrollWidget.setState(undefined, null, rebuildFromLine);\n                return;\n            }\n            const stickyLineVersion = this._stickyLineCandidateProvider.getVersionId();\n            if (stickyLineVersion === undefined || stickyLineVersion === model.getVersionId()) {\n                this._foldingModel = (_b = yield ((_a = FoldingController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.getFoldingModel())) !== null && _b !== void 0 ? _b : null;\n                this._widgetState = this.findScrollWidgetState();\n                this._stickyScrollVisibleContextKey.set(!(this._widgetState.startLineNumbers.length === 0));\n                if (!this._focused) {\n                    this._stickyScrollWidget.setState(this._widgetState, this._foldingModel, rebuildFromLine);\n                }\n                else {\n                    // Suppose that previously the sticky scroll widget had height 0, then if there are visible lines, set the last line as focused\n                    if (this._focusedStickyElementIndex === -1) {\n                        this._stickyScrollWidget.setState(this._widgetState, this._foldingModel, rebuildFromLine);\n                        this._focusedStickyElementIndex = this._stickyScrollWidget.lineNumberCount - 1;\n                        if (this._focusedStickyElementIndex !== -1) {\n                            this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);\n                        }\n                    }\n                    else {\n                        const focusedStickyElementLineNumber = this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];\n                        this._stickyScrollWidget.setState(this._widgetState, this._foldingModel, rebuildFromLine);\n                        // Suppose that after setting the state, there are no sticky lines, set the focused index to -1\n                        if (this._stickyScrollWidget.lineNumberCount === 0) {\n                            this._focusedStickyElementIndex = -1;\n                        }\n                        else {\n                            const previousFocusedLineNumberExists = this._stickyScrollWidget.lineNumbers.includes(focusedStickyElementLineNumber);\n                            // If the line number is still there, do not change anything\n                            // If the line number is not there, set the new focused line to be the last line\n                            if (!previousFocusedLineNumberExists) {\n                                this._focusedStickyElementIndex = this._stickyScrollWidget.lineNumberCount - 1;\n                            }\n                            this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);\n                        }\n                    }\n                }\n            }\n        });\n    }\n    findScrollWidgetState() {\n        const lineHeight = this._editor.getOption(66 /* EditorOption.lineHeight */);\n        const maxNumberStickyLines = Math.min(this._maxStickyLines, this._editor.getOption(114 /* EditorOption.stickyScroll */).maxLineCount);\n        const scrollTop = this._editor.getScrollTop();\n        let lastLineRelativePosition = 0;\n        const startLineNumbers = [];\n        const endLineNumbers = [];\n        const arrayVisibleRanges = this._editor.getVisibleRanges();\n        if (arrayVisibleRanges.length !== 0) {\n            const fullVisibleRange = new StickyRange(arrayVisibleRanges[0].startLineNumber, arrayVisibleRanges[arrayVisibleRanges.length - 1].endLineNumber);\n            const candidateRanges = this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(fullVisibleRange);\n            for (const range of candidateRanges) {\n                const start = range.startLineNumber;\n                const end = range.endLineNumber;\n                const depth = range.nestingDepth;\n                if (end - start > 0) {\n                    const topOfElementAtDepth = (depth - 1) * lineHeight;\n                    const bottomOfElementAtDepth = depth * lineHeight;\n                    const bottomOfBeginningLine = this._editor.getBottomForLineNumber(start) - scrollTop;\n                    const topOfEndLine = this._editor.getTopForLineNumber(end) - scrollTop;\n                    const bottomOfEndLine = this._editor.getBottomForLineNumber(end) - scrollTop;\n                    if (topOfElementAtDepth > topOfEndLine && topOfElementAtDepth <= bottomOfEndLine) {\n                        startLineNumbers.push(start);\n                        endLineNumbers.push(end + 1);\n                        lastLineRelativePosition = bottomOfEndLine - bottomOfElementAtDepth;\n                        break;\n                    }\n                    else if (bottomOfElementAtDepth > bottomOfBeginningLine && bottomOfElementAtDepth <= bottomOfEndLine) {\n                        startLineNumbers.push(start);\n                        endLineNumbers.push(end + 1);\n                    }\n                    if (startLineNumbers.length === maxNumberStickyLines) {\n                        break;\n                    }\n                }\n            }\n        }\n        this._endLineNumbers = endLineNumbers;\n        return new StickyScrollWidgetState(startLineNumbers, endLineNumbers, lastLineRelativePosition, this._showEndForLine);\n    }\n    dispose() {\n        super.dispose();\n        this._sessionStore.dispose();\n    }\n};\nStickyScrollController.ID = 'store.contrib.stickyScrollController';\nStickyScrollController = StickyScrollController_1 = __decorate([\n    __param(1, IContextMenuService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, IInstantiationService),\n    __param(4, ILanguageConfigurationService),\n    __param(5, ILanguageFeatureDebounceService),\n    __param(6, IContextKeyService)\n], StickyScrollController);\nexport { StickyScrollController };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { EditorAction2 } from '../../../browser/editorExtensions.js';\nimport { localize } from '../../../../nls.js';\nimport { Categories } from '../../../../platform/action/common/actionCommonCategories.js';\nimport { Action2, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { StickyScrollController } from './stickyScrollController.js';\nexport class ToggleStickyScroll extends Action2 {\n    constructor() {\n        super({\n            id: 'editor.action.toggleStickyScroll',\n            title: {\n                value: localize('toggleStickyScroll', \"Toggle Sticky Scroll\"),\n                mnemonicTitle: localize({ key: 'mitoggleStickyScroll', comment: ['&& denotes a mnemonic'] }, \"&&Toggle Sticky Scroll\"),\n                original: 'Toggle Sticky Scroll',\n            },\n            category: Categories.View,\n            toggled: {\n                condition: ContextKeyExpr.equals('config.editor.stickyScroll.enabled', true),\n                title: localize('stickyScroll', \"Sticky Scroll\"),\n                mnemonicTitle: localize({ key: 'miStickyScroll', comment: ['&& denotes a mnemonic'] }, \"&&Sticky Scroll\"),\n            },\n            menu: [\n                { id: MenuId.CommandPalette },\n                { id: MenuId.MenubarAppearanceMenu, group: '4_editor', order: 3 },\n                { id: MenuId.StickyScrollContext }\n            ]\n        });\n    }\n    run(accessor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor.get(IConfigurationService);\n            const newValue = !configurationService.getValue('editor.stickyScroll.enabled');\n            return configurationService.updateValue('editor.stickyScroll.enabled', newValue);\n        });\n    }\n}\nconst weight = 100 /* KeybindingWeight.EditorContrib */;\nexport class FocusStickyScroll extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.focusStickyScroll',\n            title: {\n                value: localize('focusStickyScroll', \"Focus Sticky Scroll\"),\n                mnemonicTitle: localize({ key: 'mifocusStickyScroll', comment: ['&& denotes a mnemonic'] }, \"&&Focus Sticky Scroll\"),\n                original: 'Focus Sticky Scroll',\n            },\n            precondition: ContextKeyExpr.and(ContextKeyExpr.has('config.editor.stickyScroll.enabled'), EditorContextKeys.stickyScrollVisible),\n            menu: [\n                { id: MenuId.CommandPalette },\n            ]\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n}\nexport class SelectNextStickyScrollLine extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.selectNextStickyScrollLine',\n            title: {\n                value: localize('selectNextStickyScrollLine.title', \"Select next sticky scroll line\"),\n                original: 'Select next sticky scroll line'\n            },\n            precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\n            keybinding: {\n                weight,\n                primary: 18 /* KeyCode.DownArrow */\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.focusNext();\n    }\n}\nexport class SelectPreviousStickyScrollLine extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.selectPreviousStickyScrollLine',\n            title: {\n                value: localize('selectPreviousStickyScrollLine.title', \"Select previous sticky scroll line\"),\n                original: 'Select previous sticky scroll line'\n            },\n            precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\n            keybinding: {\n                weight,\n                primary: 16 /* KeyCode.UpArrow */\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.focusPrevious();\n    }\n}\nexport class GoToStickyScrollLine extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.goToFocusedStickyScrollLine',\n            title: {\n                value: localize('goToFocusedStickyScrollLine.title', \"Go to focused sticky scroll line\"),\n                original: 'Go to focused sticky scroll line'\n            },\n            precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\n            keybinding: {\n                weight,\n                primary: 3 /* KeyCode.Enter */\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.goToFocused();\n    }\n}\nexport class SelectEditor extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.selectEditor',\n            title: {\n                value: localize('selectEditor.title', \"Select Editor\"),\n                original: 'Select Editor'\n            },\n            precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\n            keybinding: {\n                weight,\n                primary: 9 /* KeyCode.Escape */\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectEditor();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ToggleStickyScroll, FocusStickyScroll, SelectEditor, SelectPreviousStickyScrollLine, SelectNextStickyScrollLine, GoToStickyScrollLine } from './stickyScrollActions.js';\nimport { StickyScrollController } from './stickyScrollController.js';\nimport { registerAction2 } from '../../../../platform/actions/common/actions.js';\nregisterEditorContribution(StickyScrollController.ID, StickyScrollController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterAction2(ToggleStickyScroll);\nregisterAction2(FocusStickyScroll);\nregisterAction2(SelectPreviousStickyScrollLine);\nregisterAction2(SelectNextStickyScrollLine);\nregisterAction2(GoToStickyScrollLine);\nregisterAction2(SelectEditor);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { quickSelect } from '../../../../base/common/arrays.js';\nimport { anyScore, fuzzyScore, FuzzyScore, fuzzyScoreGracefulAggressive, FuzzyScoreOptions } from '../../../../base/common/filters.js';\nimport { compareIgnoreCase } from '../../../../base/common/strings.js';\nexport class LineContext {\n    constructor(leadingLineContent, characterCountDelta) {\n        this.leadingLineContent = leadingLineContent;\n        this.characterCountDelta = characterCountDelta;\n    }\n}\n/**\n * Sorted, filtered completion view model\n * */\nexport class CompletionModel {\n    constructor(items, column, lineContext, wordDistance, options, snippetSuggestions, fuzzyScoreOptions = FuzzyScoreOptions.default, clipboardText = undefined) {\n        this.clipboardText = clipboardText;\n        this._snippetCompareFn = CompletionModel._compareCompletionItems;\n        this._items = items;\n        this._column = column;\n        this._wordDistance = wordDistance;\n        this._options = options;\n        this._refilterKind = 1 /* Refilter.All */;\n        this._lineContext = lineContext;\n        this._fuzzyScoreOptions = fuzzyScoreOptions;\n        if (snippetSuggestions === 'top') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsUp;\n        }\n        else if (snippetSuggestions === 'bottom') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsDown;\n        }\n    }\n    get lineContext() {\n        return this._lineContext;\n    }\n    set lineContext(value) {\n        if (this._lineContext.leadingLineContent !== value.leadingLineContent\n            || this._lineContext.characterCountDelta !== value.characterCountDelta) {\n            this._refilterKind = this._lineContext.characterCountDelta < value.characterCountDelta && this._filteredItems ? 2 /* Refilter.Incr */ : 1 /* Refilter.All */;\n            this._lineContext = value;\n        }\n    }\n    get items() {\n        this._ensureCachedState();\n        return this._filteredItems;\n    }\n    getItemsByProvider() {\n        this._ensureCachedState();\n        return this._itemsByProvider;\n    }\n    getIncompleteProvider() {\n        this._ensureCachedState();\n        const result = new Set();\n        for (const [provider, items] of this.getItemsByProvider()) {\n            if (items.length > 0 && items[0].container.incomplete) {\n                result.add(provider);\n            }\n        }\n        return result;\n    }\n    get stats() {\n        this._ensureCachedState();\n        return this._stats;\n    }\n    _ensureCachedState() {\n        if (this._refilterKind !== 0 /* Refilter.Nothing */) {\n            this._createCachedState();\n        }\n    }\n    _createCachedState() {\n        this._itemsByProvider = new Map();\n        const labelLengths = [];\n        const { leadingLineContent, characterCountDelta } = this._lineContext;\n        let word = '';\n        let wordLow = '';\n        // incrementally filter less\n        const source = this._refilterKind === 1 /* Refilter.All */ ? this._items : this._filteredItems;\n        const target = [];\n        // picks a score function based on the number of\n        // items that we have to score/filter and based on the\n        // user-configuration\n        const scoreFn = (!this._options.filterGraceful || source.length > 2000) ? fuzzyScore : fuzzyScoreGracefulAggressive;\n        for (let i = 0; i < source.length; i++) {\n            const item = source[i];\n            if (item.isInvalid) {\n                continue; // SKIP invalid items\n            }\n            // keep all items by their provider\n            const arr = this._itemsByProvider.get(item.provider);\n            if (arr) {\n                arr.push(item);\n            }\n            else {\n                this._itemsByProvider.set(item.provider, [item]);\n            }\n            // 'word' is that remainder of the current line that we\n            // filter and score against. In theory each suggestion uses a\n            // different word, but in practice not - that's why we cache\n            const overwriteBefore = item.position.column - item.editStart.column;\n            const wordLen = overwriteBefore + characterCountDelta - (item.position.column - this._column);\n            if (word.length !== wordLen) {\n                word = wordLen === 0 ? '' : leadingLineContent.slice(-wordLen);\n                wordLow = word.toLowerCase();\n            }\n            // remember the word against which this item was\n            // scored\n            item.word = word;\n            if (wordLen === 0) {\n                // when there is nothing to score against, don't\n                // event try to do. Use a const rank and rely on\n                // the fallback-sort using the initial sort order.\n                // use a score of `-100` because that is out of the\n                // bound of values `fuzzyScore` will return\n                item.score = FuzzyScore.Default;\n            }\n            else {\n                // skip word characters that are whitespace until\n                // we have hit the replace range (overwriteBefore)\n                let wordPos = 0;\n                while (wordPos < overwriteBefore) {\n                    const ch = word.charCodeAt(wordPos);\n                    if (ch === 32 /* CharCode.Space */ || ch === 9 /* CharCode.Tab */) {\n                        wordPos += 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n                if (wordPos >= wordLen) {\n                    // the wordPos at which scoring starts is the whole word\n                    // and therefore the same rules as not having a word apply\n                    item.score = FuzzyScore.Default;\n                }\n                else if (typeof item.completion.filterText === 'string') {\n                    // when there is a `filterText` it must match the `word`.\n                    // if it matches we check with the label to compute highlights\n                    // and if that doesn't yield a result we have no highlights,\n                    // despite having the match\n                    const match = scoreFn(word, wordLow, wordPos, item.completion.filterText, item.filterTextLow, 0, this._fuzzyScoreOptions);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    if (compareIgnoreCase(item.completion.filterText, item.textLabel) === 0) {\n                        // filterText and label are actually the same -> use good highlights\n                        item.score = match;\n                    }\n                    else {\n                        // re-run the scorer on the label in the hope of a result BUT use the rank\n                        // of the filterText-match\n                        item.score = anyScore(word, wordLow, wordPos, item.textLabel, item.labelLow, 0);\n                        item.score[0] = match[0]; // use score from filterText\n                    }\n                }\n                else {\n                    // by default match `word` against the `label`\n                    const match = scoreFn(word, wordLow, wordPos, item.textLabel, item.labelLow, 0, this._fuzzyScoreOptions);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    item.score = match;\n                }\n            }\n            item.idx = i;\n            item.distance = this._wordDistance.distance(item.position, item.completion);\n            target.push(item);\n            // update stats\n            labelLengths.push(item.textLabel.length);\n        }\n        this._filteredItems = target.sort(this._snippetCompareFn);\n        this._refilterKind = 0 /* Refilter.Nothing */;\n        this._stats = {\n            pLabelLen: labelLengths.length ?\n                quickSelect(labelLengths.length - .85, labelLengths, (a, b) => a - b)\n                : 0\n        };\n    }\n    static _compareCompletionItems(a, b) {\n        if (a.score[0] > b.score[0]) {\n            return -1;\n        }\n        else if (a.score[0] < b.score[0]) {\n            return 1;\n        }\n        else if (a.distance < b.distance) {\n            return -1;\n        }\n        else if (a.distance > b.distance) {\n            return 1;\n        }\n        else if (a.idx < b.idx) {\n            return -1;\n        }\n        else if (a.idx > b.idx) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    static _compareCompletionItemsSnippetsDown(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return 1;\n            }\n            else if (b.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return -1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n    static _compareCompletionItemsSnippetsUp(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return -1;\n            }\n            else if (b.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return 1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { CancellationError, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { DisposableStore, isDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { historyNavigationVisible } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nexport const Context = {\n    Visible: historyNavigationVisible,\n    HasFocusedSuggestion: new RawContextKey('suggestWidgetHasFocusedSuggestion', false, localize('suggestWidgetHasSelection', \"Whether any suggestion is focused\")),\n    DetailsVisible: new RawContextKey('suggestWidgetDetailsVisible', false, localize('suggestWidgetDetailsVisible', \"Whether suggestion details are visible\")),\n    MultipleSuggestions: new RawContextKey('suggestWidgetMultipleSuggestions', false, localize('suggestWidgetMultipleSuggestions', \"Whether there are multiple suggestions to pick from\")),\n    MakesTextEdit: new RawContextKey('suggestionMakesTextEdit', true, localize('suggestionMakesTextEdit', \"Whether inserting the current suggestion yields in a change or has everything already been typed\")),\n    AcceptSuggestionsOnEnter: new RawContextKey('acceptSuggestionOnEnter', true, localize('acceptSuggestionOnEnter', \"Whether suggestions are inserted when pressing Enter\")),\n    HasInsertAndReplaceRange: new RawContextKey('suggestionHasInsertAndReplaceRange', false, localize('suggestionHasInsertAndReplaceRange', \"Whether the current suggestion has insert and replace behaviour\")),\n    InsertMode: new RawContextKey('suggestionInsertMode', undefined, { type: 'string', description: localize('suggestionInsertMode', \"Whether the default behaviour is to insert or replace\") }),\n    CanResolve: new RawContextKey('suggestionCanResolve', false, localize('suggestionCanResolve', \"Whether the current suggestion supports to resolve further details\")),\n};\nexport const suggestWidgetStatusbarMenu = new MenuId('suggestWidgetStatusBar');\nexport class CompletionItem {\n    constructor(position, completion, container, provider) {\n        var _a;\n        this.position = position;\n        this.completion = completion;\n        this.container = container;\n        this.provider = provider;\n        // validation\n        this.isInvalid = false;\n        // sorting, filtering\n        this.score = FuzzyScore.Default;\n        this.distance = 0;\n        this.textLabel = typeof completion.label === 'string'\n            ? completion.label\n            : (_a = completion.label) === null || _a === void 0 ? void 0 : _a.label;\n        // ensure lower-variants (perf)\n        this.labelLow = this.textLabel.toLowerCase();\n        // validate label\n        this.isInvalid = !this.textLabel;\n        this.sortTextLow = completion.sortText && completion.sortText.toLowerCase();\n        this.filterTextLow = completion.filterText && completion.filterText.toLowerCase();\n        this.extensionId = completion.extensionId;\n        // normalize ranges\n        if (Range.isIRange(completion.range)) {\n            this.editStart = new Position(completion.range.startLineNumber, completion.range.startColumn);\n            this.editInsertEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            this.editReplaceEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            // validate range\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range) || completion.range.startLineNumber !== position.lineNumber;\n        }\n        else {\n            this.editStart = new Position(completion.range.insert.startLineNumber, completion.range.insert.startColumn);\n            this.editInsertEnd = new Position(completion.range.insert.endLineNumber, completion.range.insert.endColumn);\n            this.editReplaceEnd = new Position(completion.range.replace.endLineNumber, completion.range.replace.endColumn);\n            // validate ranges\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range.insert) || Range.spansMultipleLines(completion.range.replace)\n                || completion.range.insert.startLineNumber !== position.lineNumber || completion.range.replace.startLineNumber !== position.lineNumber\n                || completion.range.insert.startColumn !== completion.range.replace.startColumn;\n        }\n        // create the suggestion resolver\n        if (typeof provider.resolveCompletionItem !== 'function') {\n            this._resolveCache = Promise.resolve();\n            this._resolveDuration = 0;\n        }\n    }\n    // ---- resolving\n    get isResolved() {\n        return this._resolveDuration !== undefined;\n    }\n    get resolveDuration() {\n        return this._resolveDuration !== undefined ? this._resolveDuration : -1;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._resolveCache) {\n                const sub = token.onCancellationRequested(() => {\n                    this._resolveCache = undefined;\n                    this._resolveDuration = undefined;\n                });\n                const sw = new StopWatch(true);\n                this._resolveCache = Promise.resolve(this.provider.resolveCompletionItem(this.completion, token)).then(value => {\n                    Object.assign(this.completion, value);\n                    this._resolveDuration = sw.elapsed();\n                }, err => {\n                    if (isCancellationError(err)) {\n                        // the IPC queue will reject the request with the\n                        // cancellation error -> reset cached\n                        this._resolveCache = undefined;\n                        this._resolveDuration = undefined;\n                    }\n                }).finally(() => {\n                    sub.dispose();\n                });\n            }\n            return this._resolveCache;\n        });\n    }\n}\nexport class CompletionOptions {\n    constructor(snippetSortOrder = 2 /* SnippetSortOrder.Bottom */, kindFilter = new Set(), providerFilter = new Set(), providerItemsToReuse = new Map(), showDeprecated = true) {\n        this.snippetSortOrder = snippetSortOrder;\n        this.kindFilter = kindFilter;\n        this.providerFilter = providerFilter;\n        this.providerItemsToReuse = providerItemsToReuse;\n        this.showDeprecated = showDeprecated;\n    }\n}\nCompletionOptions.default = new CompletionOptions();\nlet _snippetSuggestSupport;\nexport function getSnippetSuggestSupport() {\n    return _snippetSuggestSupport;\n}\nexport class CompletionItemModel {\n    constructor(items, needsClipboard, durations, disposable) {\n        this.items = items;\n        this.needsClipboard = needsClipboard;\n        this.durations = durations;\n        this.disposable = disposable;\n    }\n}\nexport function provideSuggestionItems(registry, model, position, options = CompletionOptions.default, context = { triggerKind: 0 /* languages.CompletionTriggerKind.Invoke */ }, token = CancellationToken.None) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const sw = new StopWatch();\n        position = position.clone();\n        const word = model.getWordAtPosition(position);\n        const defaultReplaceRange = word ? new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn) : Range.fromPositions(position);\n        const defaultRange = { replace: defaultReplaceRange, insert: defaultReplaceRange.setEndPosition(position.lineNumber, position.column) };\n        const result = [];\n        const disposables = new DisposableStore();\n        const durations = [];\n        let needsClipboard = false;\n        const onCompletionList = (provider, container, sw) => {\n            var _a, _b, _c;\n            let didAddResult = false;\n            if (!container) {\n                return didAddResult;\n            }\n            for (const suggestion of container.suggestions) {\n                if (!options.kindFilter.has(suggestion.kind)) {\n                    // skip if not showing deprecated suggestions\n                    if (!options.showDeprecated && ((_a = suggestion === null || suggestion === void 0 ? void 0 : suggestion.tags) === null || _a === void 0 ? void 0 : _a.includes(1 /* languages.CompletionItemTag.Deprecated */))) {\n                        continue;\n                    }\n                    // fill in default range when missing\n                    if (!suggestion.range) {\n                        suggestion.range = defaultRange;\n                    }\n                    // fill in default sortText when missing\n                    if (!suggestion.sortText) {\n                        suggestion.sortText = typeof suggestion.label === 'string' ? suggestion.label : suggestion.label.label;\n                    }\n                    if (!needsClipboard && suggestion.insertTextRules && suggestion.insertTextRules & 4 /* languages.CompletionItemInsertTextRule.InsertAsSnippet */) {\n                        needsClipboard = SnippetParser.guessNeedsClipboard(suggestion.insertText);\n                    }\n                    result.push(new CompletionItem(position, suggestion, container, provider));\n                    didAddResult = true;\n                }\n            }\n            if (isDisposable(container)) {\n                disposables.add(container);\n            }\n            durations.push({\n                providerName: (_b = provider._debugDisplayName) !== null && _b !== void 0 ? _b : 'unknown_provider', elapsedProvider: (_c = container.duration) !== null && _c !== void 0 ? _c : -1, elapsedOverall: sw.elapsed()\n            });\n            return didAddResult;\n        };\n        // ask for snippets in parallel to asking \"real\" providers. Only do something if configured to\n        // do so - no snippet filter, no special-providers-only request\n        const snippetCompletions = (() => __awaiter(this, void 0, void 0, function* () {\n            if (!_snippetSuggestSupport || options.kindFilter.has(27 /* languages.CompletionItemKind.Snippet */)) {\n                return;\n            }\n            // we have items from a previous session that we can reuse\n            const reuseItems = options.providerItemsToReuse.get(_snippetSuggestSupport);\n            if (reuseItems) {\n                reuseItems.forEach(item => result.push(item));\n                return;\n            }\n            if (options.providerFilter.size > 0 && !options.providerFilter.has(_snippetSuggestSupport)) {\n                return;\n            }\n            const sw = new StopWatch();\n            const list = yield _snippetSuggestSupport.provideCompletionItems(model, position, context, token);\n            onCompletionList(_snippetSuggestSupport, list, sw);\n        }))();\n        // add suggestions from contributed providers - providers are ordered in groups of\n        // equal score and once a group produces a result the process stops\n        // get provider groups, always add snippet suggestion provider\n        for (const providerGroup of registry.orderedGroups(model)) {\n            // for each support in the group ask for suggestions\n            let didAddResult = false;\n            yield Promise.all(providerGroup.map((provider) => __awaiter(this, void 0, void 0, function* () {\n                // we have items from a previous session that we can reuse\n                if (options.providerItemsToReuse.has(provider)) {\n                    const items = options.providerItemsToReuse.get(provider);\n                    items.forEach(item => result.push(item));\n                    didAddResult = didAddResult || items.length > 0;\n                    return;\n                }\n                // check if this provider is filtered out\n                if (options.providerFilter.size > 0 && !options.providerFilter.has(provider)) {\n                    return;\n                }\n                try {\n                    const sw = new StopWatch();\n                    const list = yield provider.provideCompletionItems(model, position, context, token);\n                    didAddResult = onCompletionList(provider, list, sw) || didAddResult;\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n            })));\n            if (didAddResult || token.isCancellationRequested) {\n                break;\n            }\n        }\n        yield snippetCompletions;\n        if (token.isCancellationRequested) {\n            disposables.dispose();\n            return Promise.reject(new CancellationError());\n        }\n        return new CompletionItemModel(result.sort(getSuggestionComparator(options.snippetSortOrder)), needsClipboard, { entries: durations, elapsed: sw.elapsed() }, disposables);\n    });\n}\nfunction defaultComparator(a, b) {\n    // check with 'sortText'\n    if (a.sortTextLow && b.sortTextLow) {\n        if (a.sortTextLow < b.sortTextLow) {\n            return -1;\n        }\n        else if (a.sortTextLow > b.sortTextLow) {\n            return 1;\n        }\n    }\n    // check with 'label'\n    if (a.textLabel < b.textLabel) {\n        return -1;\n    }\n    else if (a.textLabel > b.textLabel) {\n        return 1;\n    }\n    // check with 'type'\n    return a.completion.kind - b.completion.kind;\n}\nfunction snippetUpComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return -1;\n        }\n        else if (b.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return 1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nfunction snippetDownComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return 1;\n        }\n        else if (b.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return -1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nconst _snippetComparators = new Map();\n_snippetComparators.set(0 /* SnippetSortOrder.Top */, snippetUpComparator);\n_snippetComparators.set(2 /* SnippetSortOrder.Bottom */, snippetDownComparator);\n_snippetComparators.set(1 /* SnippetSortOrder.Inline */, defaultComparator);\nexport function getSuggestionComparator(snippetConfig) {\n    return _snippetComparators.get(snippetConfig);\n}\nCommandsRegistry.registerCommand('_executeCompletionItemProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, position, triggerCharacter, maxItemsToResolve] = args;\n    assertType(URI.isUri(uri));\n    assertType(Position.isIPosition(position));\n    assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\n    assertType(typeof maxItemsToResolve === 'number' || !maxItemsToResolve);\n    const { completionProvider } = accessor.get(ILanguageFeaturesService);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const result = {\n            incomplete: false,\n            suggestions: []\n        };\n        const resolving = [];\n        const actualPosition = ref.object.textEditorModel.validatePosition(position);\n        const completions = yield provideSuggestionItems(completionProvider, ref.object.textEditorModel, actualPosition, undefined, { triggerCharacter: triggerCharacter !== null && triggerCharacter !== void 0 ? triggerCharacter : undefined, triggerKind: triggerCharacter ? 1 /* languages.CompletionTriggerKind.TriggerCharacter */ : 0 /* languages.CompletionTriggerKind.Invoke */ });\n        for (const item of completions.items) {\n            if (resolving.length < (maxItemsToResolve !== null && maxItemsToResolve !== void 0 ? maxItemsToResolve : 0)) {\n                resolving.push(item.resolve(CancellationToken.None));\n            }\n            result.incomplete = result.incomplete || item.container.incomplete;\n            result.suggestions.push(item.completion);\n        }\n        try {\n            yield Promise.all(resolving);\n            return result;\n        }\n        finally {\n            setTimeout(() => completions.disposable.dispose(), 100);\n        }\n    }\n    finally {\n        ref.dispose();\n    }\n}));\nexport function showSimpleSuggestions(editor, provider) {\n    var _a;\n    (_a = editor.getContribution('editor.contrib.suggestController')) === null || _a === void 0 ? void 0 : _a.triggerSuggest(new Set().add(provider), undefined, true);\n}\nexport class QuickSuggestionsOptions {\n    static isAllOff(config) {\n        return config.other === 'off' && config.comments === 'off' && config.strings === 'off';\n    }\n    static isAllOn(config) {\n        return config.other === 'on' && config.comments === 'on' && config.strings === 'on';\n    }\n    static valueFor(config, tokenType) {\n        switch (tokenType) {\n            case 1 /* StandardTokenType.Comment */: return config.comments;\n            case 2 /* StandardTokenType.String */: return config.strings;\n            default: return config.other;\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar WordContextKey_1;\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet WordContextKey = WordContextKey_1 = class WordContextKey {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._enabled = false;\n        this._ckAtEnd = WordContextKey_1.AtEnd.bindTo(contextKeyService);\n        this._configListener = this._editor.onDidChangeConfiguration(e => e.hasChanged(122 /* EditorOption.tabCompletion */) && this._update());\n        this._update();\n    }\n    dispose() {\n        var _a;\n        this._configListener.dispose();\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._ckAtEnd.reset();\n    }\n    _update() {\n        // only update this when tab completions are enabled\n        const enabled = this._editor.getOption(122 /* EditorOption.tabCompletion */) === 'on';\n        if (this._enabled === enabled) {\n            return;\n        }\n        this._enabled = enabled;\n        if (this._enabled) {\n            const checkForWordEnd = () => {\n                if (!this._editor.hasModel()) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                const model = this._editor.getModel();\n                const selection = this._editor.getSelection();\n                const word = model.getWordAtPosition(selection.getStartPosition());\n                if (!word) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                this._ckAtEnd.set(word.endColumn === selection.getStartPosition().column);\n            };\n            this._selectionListener = this._editor.onDidChangeCursorSelection(checkForWordEnd);\n            checkForWordEnd();\n        }\n        else if (this._selectionListener) {\n            this._ckAtEnd.reset();\n            this._selectionListener.dispose();\n            this._selectionListener = undefined;\n        }\n    }\n};\nWordContextKey.AtEnd = new RawContextKey('atEndOfWord', false);\nWordContextKey = WordContextKey_1 = __decorate([\n    __param(1, IContextKeyService)\n], WordContextKey);\nexport { WordContextKey };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar SuggestAlternatives_1;\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet SuggestAlternatives = SuggestAlternatives_1 = class SuggestAlternatives {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._index = 0;\n        this._ckOtherSuggestions = SuggestAlternatives_1.OtherSuggestions.bindTo(contextKeyService);\n    }\n    dispose() {\n        this.reset();\n    }\n    reset() {\n        var _a;\n        this._ckOtherSuggestions.reset();\n        (_a = this._listener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._model = undefined;\n        this._acceptNext = undefined;\n        this._ignore = false;\n    }\n    set({ model, index }, acceptNext) {\n        // no suggestions -> nothing to do\n        if (model.items.length === 0) {\n            this.reset();\n            return;\n        }\n        // no alternative suggestions -> nothing to do\n        const nextIndex = SuggestAlternatives_1._moveIndex(true, model, index);\n        if (nextIndex === index) {\n            this.reset();\n            return;\n        }\n        this._acceptNext = acceptNext;\n        this._model = model;\n        this._index = index;\n        this._listener = this._editor.onDidChangeCursorPosition(() => {\n            if (!this._ignore) {\n                this.reset();\n            }\n        });\n        this._ckOtherSuggestions.set(true);\n    }\n    static _moveIndex(fwd, model, index) {\n        let newIndex = index;\n        for (let rounds = model.items.length; rounds > 0; rounds--) {\n            newIndex = (newIndex + model.items.length + (fwd ? +1 : -1)) % model.items.length;\n            if (newIndex === index) {\n                break;\n            }\n            if (!model.items[newIndex].completion.additionalTextEdits) {\n                break;\n            }\n        }\n        return newIndex;\n    }\n    next() {\n        this._move(true);\n    }\n    prev() {\n        this._move(false);\n    }\n    _move(fwd) {\n        if (!this._model) {\n            // nothing to reason about\n            return;\n        }\n        try {\n            this._ignore = true;\n            this._index = SuggestAlternatives_1._moveIndex(fwd, this._model, this._index);\n            this._acceptNext({ index: this._index, item: this._model.items[this._index], model: this._model });\n        }\n        finally {\n            this._ignore = false;\n        }\n    }\n};\nSuggestAlternatives.OtherSuggestions = new RawContextKey('hasOtherSuggestions', false);\nSuggestAlternatives = SuggestAlternatives_1 = __decorate([\n    __param(1, IContextKeyService)\n], SuggestAlternatives);\nexport { SuggestAlternatives };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar SuggestModel_1;\nimport { TimeoutTimer } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace, isHighSurrogate, isLowSurrogate } from '../../../../base/common/strings.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CompletionModel } from './completionModel.js';\nimport { CompletionOptions, getSnippetSuggestSupport, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { FuzzyScoreOptions } from '../../../../base/common/filters.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { InlineCompletionContextKeys } from '../../inlineCompletions/browser/inlineCompletionContextKeys.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { IEnvironmentService } from '../../../../platform/environment/common/environment.js';\nexport class LineContext {\n    static shouldAutoTrigger(editor) {\n        if (!editor.hasModel()) {\n            return false;\n        }\n        const model = editor.getModel();\n        const pos = editor.getPosition();\n        model.tokenization.tokenizeIfCheap(pos.lineNumber);\n        const word = model.getWordAtPosition(pos);\n        if (!word) {\n            return false;\n        }\n        if (word.endColumn !== pos.column &&\n            word.startColumn + 1 !== pos.column /* after typing a single character before a word */) {\n            return false;\n        }\n        if (!isNaN(Number(word.word))) {\n            return false;\n        }\n        return true;\n    }\n    constructor(model, position, triggerOptions) {\n        this.leadingLineContent = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n        this.leadingWord = model.getWordUntilPosition(position);\n        this.lineNumber = position.lineNumber;\n        this.column = position.column;\n        this.triggerOptions = triggerOptions;\n    }\n}\nfunction canShowQuickSuggest(editor, contextKeyService, configurationService) {\n    if (!Boolean(contextKeyService.getContextKeyValue(InlineCompletionContextKeys.inlineSuggestionVisible.key))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const suppressSuggestions = contextKeyService.getContextKeyValue(InlineCompletionContextKeys.suppressSuggestions.key);\n    if (suppressSuggestions !== undefined) {\n        return !suppressSuggestions;\n    }\n    return !editor.getOption(62 /* EditorOption.inlineSuggest */).suppressSuggestions;\n}\nfunction canShowSuggestOnTriggerCharacters(editor, contextKeyService, configurationService) {\n    if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const suppressSuggestions = contextKeyService.getContextKeyValue(InlineCompletionContextKeys.suppressSuggestions.key);\n    if (suppressSuggestions !== undefined) {\n        return !suppressSuggestions;\n    }\n    return !editor.getOption(62 /* EditorOption.inlineSuggest */).suppressSuggestions;\n}\nlet SuggestModel = SuggestModel_1 = class SuggestModel {\n    constructor(_editor, _editorWorkerService, _clipboardService, _telemetryService, _logService, _contextKeyService, _configurationService, _languageFeaturesService, _envService) {\n        this._editor = _editor;\n        this._editorWorkerService = _editorWorkerService;\n        this._clipboardService = _clipboardService;\n        this._telemetryService = _telemetryService;\n        this._logService = _logService;\n        this._contextKeyService = _contextKeyService;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._envService = _envService;\n        this._toDispose = new DisposableStore();\n        this._triggerCharacterListener = new DisposableStore();\n        this._triggerQuickSuggest = new TimeoutTimer();\n        this._triggerState = undefined;\n        this._completionDisposables = new DisposableStore();\n        this._onDidCancel = new Emitter();\n        this._onDidTrigger = new Emitter();\n        this._onDidSuggest = new Emitter();\n        this.onDidCancel = this._onDidCancel.event;\n        this.onDidTrigger = this._onDidTrigger.event;\n        this.onDidSuggest = this._onDidSuggest.event;\n        this._telemetryGate = 0;\n        this._currentSelection = this._editor.getSelection() || new Selection(1, 1, 1, 1);\n        // wire up various listeners\n        this._toDispose.add(this._editor.onDidChangeModel(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelLanguage(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeConfiguration(() => {\n            this._updateTriggerCharacters();\n        }));\n        this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(() => {\n            this._updateTriggerCharacters();\n            this._updateActiveSuggestSession();\n        }));\n        let editorIsComposing = false;\n        this._toDispose.add(this._editor.onDidCompositionStart(() => {\n            editorIsComposing = true;\n        }));\n        this._toDispose.add(this._editor.onDidCompositionEnd(() => {\n            editorIsComposing = false;\n            this._onCompositionEnd();\n        }));\n        this._toDispose.add(this._editor.onDidChangeCursorSelection(e => {\n            // only trigger suggest when the editor isn't composing a character\n            if (!editorIsComposing) {\n                this._onCursorChange(e);\n            }\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelContent(() => {\n            // only filter completions when the editor isn't composing a character\n            // allow-any-unicode-next-line\n            // e.g.  + u makes  but just  cannot be used for filtering\n            if (!editorIsComposing && this._triggerState !== undefined) {\n                this._refilterCompletionItems();\n            }\n        }));\n        this._updateTriggerCharacters();\n    }\n    dispose() {\n        dispose(this._triggerCharacterListener);\n        dispose([this._onDidCancel, this._onDidSuggest, this._onDidTrigger, this._triggerQuickSuggest]);\n        this._toDispose.dispose();\n        this._completionDisposables.dispose();\n        this.cancel();\n    }\n    _updateTriggerCharacters() {\n        this._triggerCharacterListener.clear();\n        if (this._editor.getOption(90 /* EditorOption.readOnly */)\n            || !this._editor.hasModel()\n            || !this._editor.getOption(120 /* EditorOption.suggestOnTriggerCharacters */)) {\n            return;\n        }\n        const supportsByTriggerCharacter = new Map();\n        for (const support of this._languageFeaturesService.completionProvider.all(this._editor.getModel())) {\n            for (const ch of support.triggerCharacters || []) {\n                let set = supportsByTriggerCharacter.get(ch);\n                if (!set) {\n                    set = new Set();\n                    set.add(getSnippetSuggestSupport());\n                    supportsByTriggerCharacter.set(ch, set);\n                }\n                set.add(support);\n            }\n        }\n        const checkTriggerCharacter = (text) => {\n            var _a;\n            if (!canShowSuggestOnTriggerCharacters(this._editor, this._contextKeyService, this._configurationService)) {\n                return;\n            }\n            if (LineContext.shouldAutoTrigger(this._editor)) {\n                // don't trigger by trigger characters when this is a case for quick suggest\n                return;\n            }\n            if (!text) {\n                // came here from the compositionEnd-event\n                const position = this._editor.getPosition();\n                const model = this._editor.getModel();\n                text = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n            }\n            let lastChar = '';\n            if (isLowSurrogate(text.charCodeAt(text.length - 1))) {\n                if (isHighSurrogate(text.charCodeAt(text.length - 2))) {\n                    lastChar = text.substr(text.length - 2);\n                }\n            }\n            else {\n                lastChar = text.charAt(text.length - 1);\n            }\n            const supports = supportsByTriggerCharacter.get(lastChar);\n            if (supports) {\n                // keep existing items that where not computed by the\n                // supports/providers that want to trigger now\n                const providerItemsToReuse = new Map();\n                if (this._completionModel) {\n                    for (const [provider, items] of this._completionModel.getItemsByProvider()) {\n                        if (!supports.has(provider)) {\n                            providerItemsToReuse.set(provider, items);\n                        }\n                    }\n                }\n                this.trigger({\n                    auto: true,\n                    triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */,\n                    triggerCharacter: lastChar,\n                    retrigger: Boolean(this._completionModel),\n                    clipboardText: (_a = this._completionModel) === null || _a === void 0 ? void 0 : _a.clipboardText,\n                    completionOptions: { providerFilter: supports, providerItemsToReuse }\n                });\n            }\n        };\n        this._triggerCharacterListener.add(this._editor.onDidType(checkTriggerCharacter));\n        this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(() => checkTriggerCharacter()));\n    }\n    // --- trigger/retrigger/cancel suggest\n    get state() {\n        if (!this._triggerState) {\n            return 0 /* State.Idle */;\n        }\n        else if (!this._triggerState.auto) {\n            return 1 /* State.Manual */;\n        }\n        else {\n            return 2 /* State.Auto */;\n        }\n    }\n    cancel(retrigger = false) {\n        var _a;\n        if (this._triggerState !== undefined) {\n            this._triggerQuickSuggest.cancel();\n            (_a = this._requestToken) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._requestToken = undefined;\n            this._triggerState = undefined;\n            this._completionModel = undefined;\n            this._context = undefined;\n            this._onDidCancel.fire({ retrigger });\n        }\n    }\n    clear() {\n        this._completionDisposables.clear();\n    }\n    _updateActiveSuggestSession() {\n        if (this._triggerState !== undefined) {\n            if (!this._editor.hasModel() || !this._languageFeaturesService.completionProvider.has(this._editor.getModel())) {\n                this.cancel();\n            }\n            else {\n                this.trigger({ auto: this._triggerState.auto, retrigger: true });\n            }\n        }\n    }\n    _onCursorChange(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const prevSelection = this._currentSelection;\n        this._currentSelection = this._editor.getSelection();\n        if (!e.selection.isEmpty()\n            || (e.reason !== 0 /* CursorChangeReason.NotSet */ && e.reason !== 3 /* CursorChangeReason.Explicit */)\n            || (e.source !== 'keyboard' && e.source !== 'deleteLeft')) {\n            // Early exit if nothing needs to be done!\n            // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n            this.cancel();\n            return;\n        }\n        if (this._triggerState === undefined && e.reason === 0 /* CursorChangeReason.NotSet */) {\n            if (prevSelection.containsRange(this._currentSelection) || prevSelection.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition())) {\n                // cursor did move RIGHT due to typing -> trigger quick suggest\n                this._doTriggerQuickSuggest();\n            }\n        }\n        else if (this._triggerState !== undefined && e.reason === 3 /* CursorChangeReason.Explicit */) {\n            // suggest is active and something like cursor keys are used to move\n            // the cursor. this means we can refilter at the new position\n            this._refilterCompletionItems();\n        }\n    }\n    _onCompositionEnd() {\n        // trigger or refilter when composition ends\n        if (this._triggerState === undefined) {\n            this._doTriggerQuickSuggest();\n        }\n        else {\n            this._refilterCompletionItems();\n        }\n    }\n    _doTriggerQuickSuggest() {\n        var _a;\n        if (QuickSuggestionsOptions.isAllOff(this._editor.getOption(88 /* EditorOption.quickSuggestions */))) {\n            // not enabled\n            return;\n        }\n        if (this._editor.getOption(117 /* EditorOption.suggest */).snippetsPreventQuickSuggestions && ((_a = SnippetController2.get(this._editor)) === null || _a === void 0 ? void 0 : _a.isInSnippet())) {\n            // no quick suggestion when in snippet mode\n            return;\n        }\n        this.cancel();\n        this._triggerQuickSuggest.cancelAndSet(() => {\n            if (this._triggerState !== undefined) {\n                return;\n            }\n            if (!LineContext.shouldAutoTrigger(this._editor)) {\n                return;\n            }\n            if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            const pos = this._editor.getPosition();\n            // validate enabled now\n            const config = this._editor.getOption(88 /* EditorOption.quickSuggestions */);\n            if (QuickSuggestionsOptions.isAllOff(config)) {\n                return;\n            }\n            if (!QuickSuggestionsOptions.isAllOn(config)) {\n                // Check the type of the token that triggered this\n                model.tokenization.tokenizeIfCheap(pos.lineNumber);\n                const lineTokens = model.tokenization.getLineTokens(pos.lineNumber);\n                const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(pos.column - 1 - 1, 0)));\n                if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'on') {\n                    return;\n                }\n            }\n            if (!canShowQuickSuggest(this._editor, this._contextKeyService, this._configurationService)) {\n                // do not trigger quick suggestions if inline suggestions are shown\n                return;\n            }\n            if (!this._languageFeaturesService.completionProvider.has(model)) {\n                return;\n            }\n            // we made it till here -> trigger now\n            this.trigger({ auto: true });\n        }, this._editor.getOption(89 /* EditorOption.quickSuggestionsDelay */));\n    }\n    _refilterCompletionItems() {\n        assertType(this._editor.hasModel());\n        assertType(this._triggerState !== undefined);\n        const model = this._editor.getModel();\n        const position = this._editor.getPosition();\n        const ctx = new LineContext(model, position, Object.assign(Object.assign({}, this._triggerState), { refilter: true }));\n        this._onNewContext(ctx);\n    }\n    trigger(options) {\n        var _a, _b, _c, _d, _e, _f;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const ctx = new LineContext(model, this._editor.getPosition(), options);\n        // Cancel previous requests, change state & update UI\n        this.cancel(options.retrigger);\n        this._triggerState = options;\n        this._onDidTrigger.fire({ auto: options.auto, shy: (_a = options.shy) !== null && _a !== void 0 ? _a : false, position: this._editor.getPosition() });\n        // Capture context when request was sent\n        this._context = ctx;\n        // Build context for request\n        let suggestCtx = { triggerKind: (_b = options.triggerKind) !== null && _b !== void 0 ? _b : 0 /* CompletionTriggerKind.Invoke */ };\n        if (options.triggerCharacter) {\n            suggestCtx = {\n                triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */,\n                triggerCharacter: options.triggerCharacter\n            };\n        }\n        this._requestToken = new CancellationTokenSource();\n        // kind filter and snippet sort rules\n        const snippetSuggestions = this._editor.getOption(111 /* EditorOption.snippetSuggestions */);\n        let snippetSortOrder = 1 /* SnippetSortOrder.Inline */;\n        switch (snippetSuggestions) {\n            case 'top':\n                snippetSortOrder = 0 /* SnippetSortOrder.Top */;\n                break;\n            // \t that's the default anyways...\n            // case 'inline':\n            // \tsnippetSortOrder = SnippetSortOrder.Inline;\n            // \tbreak;\n            case 'bottom':\n                snippetSortOrder = 2 /* SnippetSortOrder.Bottom */;\n                break;\n        }\n        const { itemKind: itemKindFilter, showDeprecated } = SuggestModel_1._createSuggestFilter(this._editor);\n        const completionOptions = new CompletionOptions(snippetSortOrder, (_d = (_c = options.completionOptions) === null || _c === void 0 ? void 0 : _c.kindFilter) !== null && _d !== void 0 ? _d : itemKindFilter, (_e = options.completionOptions) === null || _e === void 0 ? void 0 : _e.providerFilter, (_f = options.completionOptions) === null || _f === void 0 ? void 0 : _f.providerItemsToReuse, showDeprecated);\n        const wordDistance = WordDistance.create(this._editorWorkerService, this._editor);\n        const completions = provideSuggestionItems(this._languageFeaturesService.completionProvider, model, this._editor.getPosition(), completionOptions, suggestCtx, this._requestToken.token);\n        Promise.all([completions, wordDistance]).then(([completions, wordDistance]) => __awaiter(this, void 0, void 0, function* () {\n            var _g;\n            (_g = this._requestToken) === null || _g === void 0 ? void 0 : _g.dispose();\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            let clipboardText = options === null || options === void 0 ? void 0 : options.clipboardText;\n            if (!clipboardText && completions.needsClipboard) {\n                clipboardText = yield this._clipboardService.readText();\n            }\n            if (this._triggerState === undefined) {\n                return;\n            }\n            const model = this._editor.getModel();\n            // const items = completions.items;\n            // if (existing) {\n            // \tconst cmpFn = getSuggestionComparator(snippetSortOrder);\n            // \titems = items.concat(existing.items).sort(cmpFn);\n            // }\n            const ctx = new LineContext(model, this._editor.getPosition(), options);\n            const fuzzySearchOptions = Object.assign(Object.assign({}, FuzzyScoreOptions.default), { firstMatchCanBeWeak: !this._editor.getOption(117 /* EditorOption.suggest */).matchOnWordStartOnly });\n            this._completionModel = new CompletionModel(completions.items, this._context.column, {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            }, wordDistance, this._editor.getOption(117 /* EditorOption.suggest */), this._editor.getOption(111 /* EditorOption.snippetSuggestions */), fuzzySearchOptions, clipboardText);\n            // store containers so that they can be disposed later\n            this._completionDisposables.add(completions.disposable);\n            this._onNewContext(ctx);\n            // finally report telemetry about durations\n            this._reportDurationsTelemetry(completions.durations);\n            // report invalid completions by source\n            if (!this._envService.isBuilt || this._envService.isExtensionDevelopment) {\n                for (const item of completions.items) {\n                    if (item.isInvalid) {\n                        this._logService.warn(`[suggest] did IGNORE invalid completion item from ${item.provider._debugDisplayName}`, item.completion);\n                    }\n                }\n            }\n        })).catch(onUnexpectedError);\n    }\n    _reportDurationsTelemetry(durations) {\n        if (this._telemetryGate++ % 230 !== 0) {\n            return;\n        }\n        setTimeout(() => {\n            this._telemetryService.publicLog2('suggest.durations.json', { data: JSON.stringify(durations) });\n            this._logService.debug('suggest.durations.json', durations);\n        });\n    }\n    static _createSuggestFilter(editor) {\n        // kind filter and snippet sort rules\n        const result = new Set();\n        // snippet setting\n        const snippetSuggestions = editor.getOption(111 /* EditorOption.snippetSuggestions */);\n        if (snippetSuggestions === 'none') {\n            result.add(27 /* CompletionItemKind.Snippet */);\n        }\n        // type setting\n        const suggestOptions = editor.getOption(117 /* EditorOption.suggest */);\n        if (!suggestOptions.showMethods) {\n            result.add(0 /* CompletionItemKind.Method */);\n        }\n        if (!suggestOptions.showFunctions) {\n            result.add(1 /* CompletionItemKind.Function */);\n        }\n        if (!suggestOptions.showConstructors) {\n            result.add(2 /* CompletionItemKind.Constructor */);\n        }\n        if (!suggestOptions.showFields) {\n            result.add(3 /* CompletionItemKind.Field */);\n        }\n        if (!suggestOptions.showVariables) {\n            result.add(4 /* CompletionItemKind.Variable */);\n        }\n        if (!suggestOptions.showClasses) {\n            result.add(5 /* CompletionItemKind.Class */);\n        }\n        if (!suggestOptions.showStructs) {\n            result.add(6 /* CompletionItemKind.Struct */);\n        }\n        if (!suggestOptions.showInterfaces) {\n            result.add(7 /* CompletionItemKind.Interface */);\n        }\n        if (!suggestOptions.showModules) {\n            result.add(8 /* CompletionItemKind.Module */);\n        }\n        if (!suggestOptions.showProperties) {\n            result.add(9 /* CompletionItemKind.Property */);\n        }\n        if (!suggestOptions.showEvents) {\n            result.add(10 /* CompletionItemKind.Event */);\n        }\n        if (!suggestOptions.showOperators) {\n            result.add(11 /* CompletionItemKind.Operator */);\n        }\n        if (!suggestOptions.showUnits) {\n            result.add(12 /* CompletionItemKind.Unit */);\n        }\n        if (!suggestOptions.showValues) {\n            result.add(13 /* CompletionItemKind.Value */);\n        }\n        if (!suggestOptions.showConstants) {\n            result.add(14 /* CompletionItemKind.Constant */);\n        }\n        if (!suggestOptions.showEnums) {\n            result.add(15 /* CompletionItemKind.Enum */);\n        }\n        if (!suggestOptions.showEnumMembers) {\n            result.add(16 /* CompletionItemKind.EnumMember */);\n        }\n        if (!suggestOptions.showKeywords) {\n            result.add(17 /* CompletionItemKind.Keyword */);\n        }\n        if (!suggestOptions.showWords) {\n            result.add(18 /* CompletionItemKind.Text */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(19 /* CompletionItemKind.Color */);\n        }\n        if (!suggestOptions.showFiles) {\n            result.add(20 /* CompletionItemKind.File */);\n        }\n        if (!suggestOptions.showReferences) {\n            result.add(21 /* CompletionItemKind.Reference */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(22 /* CompletionItemKind.Customcolor */);\n        }\n        if (!suggestOptions.showFolders) {\n            result.add(23 /* CompletionItemKind.Folder */);\n        }\n        if (!suggestOptions.showTypeParameters) {\n            result.add(24 /* CompletionItemKind.TypeParameter */);\n        }\n        if (!suggestOptions.showSnippets) {\n            result.add(27 /* CompletionItemKind.Snippet */);\n        }\n        if (!suggestOptions.showUsers) {\n            result.add(25 /* CompletionItemKind.User */);\n        }\n        if (!suggestOptions.showIssues) {\n            result.add(26 /* CompletionItemKind.Issue */);\n        }\n        return { itemKind: result, showDeprecated: suggestOptions.showDeprecated };\n    }\n    _onNewContext(ctx) {\n        if (!this._context) {\n            // happens when 24x7 IntelliSense is enabled and still in its delay\n            return;\n        }\n        if (ctx.lineNumber !== this._context.lineNumber) {\n            // e.g. happens when pressing Enter while IntelliSense is computed\n            this.cancel();\n            return;\n        }\n        if (getLeadingWhitespace(ctx.leadingLineContent) !== getLeadingWhitespace(this._context.leadingLineContent)) {\n            // cancel IntelliSense when line start changes\n            // happens when the current word gets outdented\n            this.cancel();\n            return;\n        }\n        if (ctx.column < this._context.column) {\n            // typed -> moved cursor LEFT -> retrigger if still on a word\n            if (ctx.leadingWord.word) {\n                this.trigger({ auto: this._context.triggerOptions.auto, retrigger: true });\n            }\n            else {\n                this.cancel();\n            }\n            return;\n        }\n        if (!this._completionModel) {\n            // happens when IntelliSense is not yet computed\n            return;\n        }\n        if (ctx.leadingWord.word.length !== 0 && ctx.leadingWord.startColumn > this._context.leadingWord.startColumn) {\n            // started a new word while IntelliSense shows -> retrigger but reuse all items that we currently have\n            const shouldAutoTrigger = LineContext.shouldAutoTrigger(this._editor);\n            if (shouldAutoTrigger && this._context) {\n                // shouldAutoTrigger forces tokenization, which can cause pending cursor change events to be emitted, which can cause\n                // suggestions to be cancelled, which causes `this._context` to be undefined\n                const map = this._completionModel.getItemsByProvider();\n                this.trigger({\n                    auto: this._context.triggerOptions.auto,\n                    retrigger: true,\n                    clipboardText: this._completionModel.clipboardText,\n                    completionOptions: { providerItemsToReuse: map }\n                });\n            }\n            return;\n        }\n        if (ctx.column > this._context.column && this._completionModel.getIncompleteProvider().size > 0 && ctx.leadingWord.word.length !== 0) {\n            // typed -> moved cursor RIGHT & incomple model & still on a word -> retrigger\n            const providerItemsToReuse = new Map();\n            const providerFilter = new Set();\n            for (const [provider, items] of this._completionModel.getItemsByProvider()) {\n                if (items.length > 0 && items[0].container.incomplete) {\n                    providerFilter.add(provider);\n                }\n                else {\n                    providerItemsToReuse.set(provider, items);\n                }\n            }\n            this.trigger({\n                auto: this._context.triggerOptions.auto,\n                triggerKind: 2 /* CompletionTriggerKind.TriggerForIncompleteCompletions */,\n                retrigger: true,\n                clipboardText: this._completionModel.clipboardText,\n                completionOptions: { providerFilter, providerItemsToReuse }\n            });\n        }\n        else {\n            // typed -> moved cursor RIGHT -> update UI\n            const oldLineContext = this._completionModel.lineContext;\n            let isFrozen = false;\n            this._completionModel.lineContext = {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            };\n            if (this._completionModel.items.length === 0) {\n                const shouldAutoTrigger = LineContext.shouldAutoTrigger(this._editor);\n                if (!this._context) {\n                    // shouldAutoTrigger forces tokenization, which can cause pending cursor change events to be emitted, which can cause\n                    // suggestions to be cancelled, which causes `this._context` to be undefined\n                    this.cancel();\n                    return;\n                }\n                if (shouldAutoTrigger && this._context.leadingWord.endColumn < ctx.leadingWord.startColumn) {\n                    // retrigger when heading into a new word\n                    this.trigger({ auto: this._context.triggerOptions.auto, retrigger: true });\n                    return;\n                }\n                if (!this._context.triggerOptions.auto) {\n                    // freeze when IntelliSense was manually requested\n                    this._completionModel.lineContext = oldLineContext;\n                    isFrozen = this._completionModel.items.length > 0;\n                    if (isFrozen && ctx.leadingWord.word.length === 0) {\n                        // there were results before but now there aren't\n                        // and also we are not on a word anymore -> cancel\n                        this.cancel();\n                        return;\n                    }\n                }\n                else {\n                    // nothing left\n                    this.cancel();\n                    return;\n                }\n            }\n            this._onDidSuggest.fire({\n                completionModel: this._completionModel,\n                triggerOptions: ctx.triggerOptions,\n                isFrozen,\n            });\n        }\n    }\n};\nSuggestModel = SuggestModel_1 = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, IClipboardService),\n    __param(3, ITelemetryService),\n    __param(4, ILogService),\n    __param(5, IContextKeyService),\n    __param(6, IConfigurationService),\n    __param(7, ILanguageFeaturesService),\n    __param(8, IEnvironmentService)\n], SuggestModel);\nexport { SuggestModel };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nexport class CommitCharacterController {\n    constructor(editor, widget, model, accept) {\n        this._disposables = new DisposableStore();\n        this._disposables.add(model.onDidSuggest(e => {\n            if (e.completionModel.items.length === 0) {\n                this.reset();\n            }\n        }));\n        this._disposables.add(model.onDidCancel(e => {\n            this.reset();\n        }));\n        this._disposables.add(widget.onDidShow(() => this._onItem(widget.getFocusedItem())));\n        this._disposables.add(widget.onDidFocus(this._onItem, this));\n        this._disposables.add(widget.onDidHide(this.reset, this));\n        this._disposables.add(editor.onWillType(text => {\n            if (this._active && !widget.isFrozen() && model.state !== 0 /* State.Idle */) {\n                const ch = text.charCodeAt(text.length - 1);\n                if (this._active.acceptCharacters.has(ch) && editor.getOption(0 /* EditorOption.acceptSuggestionOnCommitCharacter */)) {\n                    accept(this._active.item);\n                }\n            }\n        }));\n    }\n    _onItem(selected) {\n        if (!selected || !isNonEmptyArray(selected.item.completion.commitCharacters)) {\n            // no item or no commit characters\n            this.reset();\n            return;\n        }\n        if (this._active && this._active.item.item === selected.item) {\n            // still the same item\n            return;\n        }\n        // keep item and its commit characters\n        const acceptCharacters = new CharacterSet();\n        for (const ch of selected.item.completion.commitCharacters) {\n            if (ch.length > 0) {\n                acceptCharacters.add(ch.charCodeAt(0));\n            }\n        }\n        this._active = { acceptCharacters, item: selected };\n    }\n    reset() {\n        this._active = undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nexport class OvertypingCapturer {\n    constructor(editor, suggestModel) {\n        this._disposables = new DisposableStore();\n        this._lastOvertyped = [];\n        this._locked = false;\n        this._disposables.add(editor.onWillType(() => {\n            if (this._locked || !editor.hasModel()) {\n                return;\n            }\n            const selections = editor.getSelections();\n            const selectionsLength = selections.length;\n            // Check if it will overtype any selections\n            let willOvertype = false;\n            for (let i = 0; i < selectionsLength; i++) {\n                if (!selections[i].isEmpty()) {\n                    willOvertype = true;\n                    break;\n                }\n            }\n            if (!willOvertype) {\n                if (this._lastOvertyped.length !== 0) {\n                    this._lastOvertyped.length = 0;\n                }\n                return;\n            }\n            this._lastOvertyped = [];\n            const model = editor.getModel();\n            for (let i = 0; i < selectionsLength; i++) {\n                const selection = selections[i];\n                // Check for overtyping capturer restrictions\n                if (model.getValueLengthInRange(selection) > OvertypingCapturer._maxSelectionLength) {\n                    return;\n                }\n                this._lastOvertyped[i] = { value: model.getValueInRange(selection), multiline: selection.startLineNumber !== selection.endLineNumber };\n            }\n        }));\n        this._disposables.add(suggestModel.onDidTrigger(e => {\n            this._locked = true;\n        }));\n        this._disposables.add(suggestModel.onDidCancel(e => {\n            this._locked = false;\n        }));\n    }\n    getLastOvertypedInfo(idx) {\n        if (idx >= 0 && idx < this._lastOvertyped.length) {\n            return this._lastOvertyped[idx];\n        }\n        return undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\nOvertypingCapturer._maxSelectionLength = 51200;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuEntryActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nclass StatusBarViewItem extends MenuEntryActionViewItem {\n    updateLabel() {\n        const kb = this._keybindingService.lookupKeybinding(this._action.id, this._contextKeyService);\n        if (!kb) {\n            return super.updateLabel();\n        }\n        if (this.label) {\n            this.label.textContent = localize({ key: 'content', comment: ['A label', 'A keybinding'] }, '{0} ({1})', this._action.label, StatusBarViewItem.symbolPrintEnter(kb));\n        }\n    }\n    static symbolPrintEnter(kb) {\n        var _a;\n        return (_a = kb.getLabel()) === null || _a === void 0 ? void 0 : _a.replace(/\\benter\\b/gi, '\\u23CE');\n    }\n}\nlet SuggestWidgetStatus = class SuggestWidgetStatus {\n    constructor(container, _menuId, instantiationService, _menuService, _contextKeyService) {\n        this._menuId = _menuId;\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._menuDisposables = new DisposableStore();\n        this.element = dom.append(container, dom.$('.suggest-status-bar'));\n        const actionViewItemProvider = (action => {\n            return action instanceof MenuItemAction ? instantiationService.createInstance(StatusBarViewItem, action, undefined) : undefined;\n        });\n        this._leftActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._rightActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._leftActions.domNode.classList.add('left');\n        this._rightActions.domNode.classList.add('right');\n    }\n    dispose() {\n        this._menuDisposables.dispose();\n        this._leftActions.dispose();\n        this._rightActions.dispose();\n        this.element.remove();\n    }\n    show() {\n        const menu = this._menuService.createMenu(this._menuId, this._contextKeyService);\n        const renderMenu = () => {\n            const left = [];\n            const right = [];\n            for (const [group, actions] of menu.getActions()) {\n                if (group === 'left') {\n                    left.push(...actions);\n                }\n                else {\n                    right.push(...actions);\n                }\n            }\n            this._leftActions.clear();\n            this._leftActions.push(left);\n            this._rightActions.clear();\n            this._rightActions.push(right);\n        };\n        this._menuDisposables.add(menu.onDidChange(() => renderMenu()));\n        this._menuDisposables.add(menu);\n    }\n    hide() {\n        this._menuDisposables.clear();\n    }\n};\nSuggestWidgetStatus = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, IMenuService),\n    __param(4, IContextKeyService)\n], SuggestWidgetStatus);\nexport { SuggestWidgetStatus };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport * as nls from '../../../../nls.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nexport function canExpandCompletionItem(item) {\n    return !!item && Boolean(item.completion.documentation || item.completion.detail && item.completion.detail !== item.completion.label);\n}\nlet SuggestDetailsWidget = class SuggestDetailsWidget {\n    constructor(_editor, instaService) {\n        this._editor = _editor;\n        this._onDidClose = new Emitter();\n        this.onDidClose = this._onDidClose.event;\n        this._onDidChangeContents = new Emitter();\n        this.onDidChangeContents = this._onDidChangeContents.event;\n        this._disposables = new DisposableStore();\n        this._renderDisposeable = new DisposableStore();\n        this._borderWidth = 1;\n        this._size = new dom.Dimension(330, 0);\n        this.domNode = dom.$('.suggest-details');\n        this.domNode.classList.add('no-docs');\n        this._markdownRenderer = instaService.createInstance(MarkdownRenderer, { editor: _editor });\n        this._body = dom.$('.body');\n        this._scrollbar = new DomScrollableElement(this._body, {\n            alwaysConsumeMouseWheel: true,\n        });\n        dom.append(this.domNode, this._scrollbar.getDomNode());\n        this._disposables.add(this._scrollbar);\n        this._header = dom.append(this._body, dom.$('.header'));\n        this._close = dom.append(this._header, dom.$('span' + ThemeIcon.asCSSSelector(Codicon.close)));\n        this._close.title = nls.localize('details.close', \"Close\");\n        this._type = dom.append(this._header, dom.$('p.type'));\n        this._docs = dom.append(this._body, dom.$('p.docs'));\n        this._configureFont();\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(50 /* EditorOption.fontInfo */)) {\n                this._configureFont();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._renderDisposeable.dispose();\n    }\n    _configureFont() {\n        const options = this._editor.getOptions();\n        const fontInfo = options.get(50 /* EditorOption.fontInfo */);\n        const fontFamily = fontInfo.getMassagedFontFamily();\n        const fontSize = options.get(118 /* EditorOption.suggestFontSize */) || fontInfo.fontSize;\n        const lineHeight = options.get(119 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight;\n        const fontWeight = fontInfo.fontWeight;\n        const fontSizePx = `${fontSize}px`;\n        const lineHeightPx = `${lineHeight}px`;\n        this.domNode.style.fontSize = fontSizePx;\n        this.domNode.style.lineHeight = `${lineHeight / fontSize}`;\n        this.domNode.style.fontWeight = fontWeight;\n        this.domNode.style.fontFeatureSettings = fontInfo.fontFeatureSettings;\n        this._type.style.fontFamily = fontFamily;\n        this._close.style.height = lineHeightPx;\n        this._close.style.width = lineHeightPx;\n    }\n    getLayoutInfo() {\n        const lineHeight = this._editor.getOption(119 /* EditorOption.suggestLineHeight */) || this._editor.getOption(50 /* EditorOption.fontInfo */).lineHeight;\n        const borderWidth = this._borderWidth;\n        const borderHeight = borderWidth * 2;\n        return {\n            lineHeight,\n            borderWidth,\n            borderHeight,\n            verticalPadding: 22,\n            horizontalPadding: 14\n        };\n    }\n    renderLoading() {\n        this._type.textContent = nls.localize('loading', \"Loading...\");\n        this._docs.textContent = '';\n        this.domNode.classList.remove('no-docs', 'no-type');\n        this.layout(this.size.width, this.getLayoutInfo().lineHeight * 2);\n        this._onDidChangeContents.fire(this);\n    }\n    renderItem(item, explainMode) {\n        var _a, _b;\n        this._renderDisposeable.clear();\n        let { detail, documentation } = item.completion;\n        if (explainMode) {\n            let md = '';\n            md += `score: ${item.score[0]}\\n`;\n            md += `prefix: ${(_a = item.word) !== null && _a !== void 0 ? _a : '(no prefix)'}\\n`;\n            md += `word: ${item.completion.filterText ? item.completion.filterText + ' (filterText)' : item.textLabel}\\n`;\n            md += `distance: ${item.distance} (localityBonus-setting)\\n`;\n            md += `index: ${item.idx}, based on ${item.completion.sortText && `sortText: \"${item.completion.sortText}\"` || 'label'}\\n`;\n            md += `commit_chars: ${(_b = item.completion.commitCharacters) === null || _b === void 0 ? void 0 : _b.join('')}\\n`;\n            documentation = new MarkdownString().appendCodeblock('empty', md);\n            detail = `Provider: ${item.provider._debugDisplayName}`;\n        }\n        if (!explainMode && !canExpandCompletionItem(item)) {\n            this.clearContents();\n            return;\n        }\n        this.domNode.classList.remove('no-docs', 'no-type');\n        // --- details\n        if (detail) {\n            const cappedDetail = detail.length > 100000 ? `${detail.substr(0, 100000)}` : detail;\n            this._type.textContent = cappedDetail;\n            this._type.title = cappedDetail;\n            dom.show(this._type);\n            this._type.classList.toggle('auto-wrap', !/\\r?\\n^\\s+/gmi.test(cappedDetail));\n        }\n        else {\n            dom.clearNode(this._type);\n            this._type.title = '';\n            dom.hide(this._type);\n            this.domNode.classList.add('no-type');\n        }\n        // --- documentation\n        dom.clearNode(this._docs);\n        if (typeof documentation === 'string') {\n            this._docs.classList.remove('markdown-docs');\n            this._docs.textContent = documentation;\n        }\n        else if (documentation) {\n            this._docs.classList.add('markdown-docs');\n            dom.clearNode(this._docs);\n            const renderedContents = this._markdownRenderer.render(documentation);\n            this._docs.appendChild(renderedContents.element);\n            this._renderDisposeable.add(renderedContents);\n            this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(() => {\n                this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n                this._onDidChangeContents.fire(this);\n            }));\n        }\n        this.domNode.style.userSelect = 'text';\n        this.domNode.tabIndex = -1;\n        this._close.onmousedown = e => {\n            e.preventDefault();\n            e.stopPropagation();\n        };\n        this._close.onclick = e => {\n            e.preventDefault();\n            e.stopPropagation();\n            this._onDidClose.fire();\n        };\n        this._body.scrollTop = 0;\n        this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n        this._onDidChangeContents.fire(this);\n    }\n    clearContents() {\n        this.domNode.classList.add('no-docs');\n        this._type.textContent = '';\n        this._docs.textContent = '';\n    }\n    get size() {\n        return this._size;\n    }\n    layout(width, height) {\n        const newSize = new dom.Dimension(width, height);\n        if (!dom.Dimension.equals(newSize, this._size)) {\n            this._size = newSize;\n            dom.size(this.domNode, width, height);\n        }\n        this._scrollbar.scanDomNode();\n    }\n    scrollDown(much = 8) {\n        this._body.scrollTop += much;\n    }\n    scrollUp(much = 8) {\n        this._body.scrollTop -= much;\n    }\n    scrollTop() {\n        this._body.scrollTop = 0;\n    }\n    scrollBottom() {\n        this._body.scrollTop = this._body.scrollHeight;\n    }\n    pageDown() {\n        this.scrollDown(80);\n    }\n    pageUp() {\n        this.scrollUp(80);\n    }\n    set borderWidth(width) {\n        this._borderWidth = width;\n    }\n    get borderWidth() {\n        return this._borderWidth;\n    }\n};\nSuggestDetailsWidget = __decorate([\n    __param(1, IInstantiationService)\n], SuggestDetailsWidget);\nexport { SuggestDetailsWidget };\nexport class SuggestDetailsOverlay {\n    constructor(widget, _editor) {\n        this.widget = widget;\n        this._editor = _editor;\n        this._disposables = new DisposableStore();\n        this._added = false;\n        this._preferAlignAtTop = true;\n        this._resizable = new ResizableHTMLElement();\n        this._resizable.domNode.classList.add('suggest-details-container');\n        this._resizable.domNode.appendChild(widget.domNode);\n        this._resizable.enableSashes(false, true, true, false);\n        let topLeftNow;\n        let sizeNow;\n        let deltaTop = 0;\n        let deltaLeft = 0;\n        this._disposables.add(this._resizable.onDidWillResize(() => {\n            topLeftNow = this._topLeft;\n            sizeNow = this._resizable.size;\n        }));\n        this._disposables.add(this._resizable.onDidResize(e => {\n            if (topLeftNow && sizeNow) {\n                this.widget.layout(e.dimension.width, e.dimension.height);\n                let updateTopLeft = false;\n                if (e.west) {\n                    deltaLeft = sizeNow.width - e.dimension.width;\n                    updateTopLeft = true;\n                }\n                if (e.north) {\n                    deltaTop = sizeNow.height - e.dimension.height;\n                    updateTopLeft = true;\n                }\n                if (updateTopLeft) {\n                    this._applyTopLeft({\n                        top: topLeftNow.top + deltaTop,\n                        left: topLeftNow.left + deltaLeft,\n                    });\n                }\n            }\n            if (e.done) {\n                topLeftNow = undefined;\n                sizeNow = undefined;\n                deltaTop = 0;\n                deltaLeft = 0;\n                this._userSize = e.dimension;\n            }\n        }));\n        this._disposables.add(this.widget.onDidChangeContents(() => {\n            var _a;\n            if (this._anchorBox) {\n                this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, this._preferAlignAtTop);\n            }\n        }));\n    }\n    dispose() {\n        this._resizable.dispose();\n        this._disposables.dispose();\n        this.hide();\n    }\n    getId() {\n        return 'suggest.details';\n    }\n    getDomNode() {\n        return this._resizable.domNode;\n    }\n    getPosition() {\n        return null;\n    }\n    show() {\n        if (!this._added) {\n            this._editor.addOverlayWidget(this);\n            this.getDomNode().style.position = 'fixed';\n            this._added = true;\n        }\n    }\n    hide(sessionEnded = false) {\n        this._resizable.clearSashHoverState();\n        if (this._added) {\n            this._editor.removeOverlayWidget(this);\n            this._added = false;\n            this._anchorBox = undefined;\n            this._topLeft = undefined;\n        }\n        if (sessionEnded) {\n            this._userSize = undefined;\n            this.widget.clearContents();\n        }\n    }\n    placeAtAnchor(anchor, preferAlignAtTop) {\n        var _a;\n        const anchorBox = anchor.getBoundingClientRect();\n        this._anchorBox = anchorBox;\n        this._preferAlignAtTop = preferAlignAtTop;\n        this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, preferAlignAtTop);\n    }\n    _placeAtAnchor(anchorBox, size, preferAlignAtTop) {\n        var _a;\n        const bodyBox = dom.getClientArea(this.getDomNode().ownerDocument.body);\n        const info = this.widget.getLayoutInfo();\n        const defaultMinSize = new dom.Dimension(220, 2 * info.lineHeight);\n        const defaultTop = anchorBox.top;\n        // EAST\n        const eastPlacement = (function () {\n            const width = bodyBox.width - (anchorBox.left + anchorBox.width + info.borderWidth + info.horizontalPadding);\n            const left = -info.borderWidth + anchorBox.left + anchorBox.width;\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // WEST\n        const westPlacement = (function () {\n            const width = anchorBox.left - info.borderWidth - info.horizontalPadding;\n            const left = Math.max(info.horizontalPadding, anchorBox.left - size.width - info.borderWidth);\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // SOUTH\n        const southPacement = (function () {\n            const left = anchorBox.left;\n            const top = -info.borderWidth + anchorBox.top + anchorBox.height;\n            const maxSizeBottom = new dom.Dimension(anchorBox.width - info.borderHeight, bodyBox.height - anchorBox.top - anchorBox.height - info.verticalPadding);\n            return { top, left, fit: maxSizeBottom.height - size.height, maxSizeBottom, maxSizeTop: maxSizeBottom, minSize: defaultMinSize.with(maxSizeBottom.width) };\n        })();\n        // take first placement that fits or the first with \"least bad\" fit\n        const placements = [eastPlacement, westPlacement, southPacement];\n        const placement = (_a = placements.find(p => p.fit >= 0)) !== null && _a !== void 0 ? _a : placements.sort((a, b) => b.fit - a.fit)[0];\n        // top/bottom placement\n        const bottom = anchorBox.top + anchorBox.height - info.borderHeight;\n        let alignAtTop;\n        let height = size.height;\n        const maxHeight = Math.max(placement.maxSizeTop.height, placement.maxSizeBottom.height);\n        if (height > maxHeight) {\n            height = maxHeight;\n        }\n        let maxSize;\n        if (preferAlignAtTop) {\n            if (height <= placement.maxSizeTop.height) {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n            else {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n        }\n        else {\n            if (height <= placement.maxSizeBottom.height) {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n            else {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n        }\n        this._applyTopLeft({ left: placement.left, top: alignAtTop ? placement.top : bottom - height });\n        this.getDomNode().style.position = 'fixed';\n        this._resizable.enableSashes(!alignAtTop, placement === eastPlacement, alignAtTop, placement !== eastPlacement);\n        this._resizable.minSize = placement.minSize;\n        this._resizable.maxSize = maxSize;\n        this._resizable.layout(height, Math.min(maxSize.width, size.width));\n        this.widget.layout(this._resizable.size.width, this._resizable.size.height);\n    }\n    _applyTopLeft(topLeft) {\n        this._topLeft = topLeft;\n        this.getDomNode().style.left = `${this._topLeft.left}px`;\n        this.getDomNode().style.top = `${this._topLeft.top}px`;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a;\nimport { $, append, hide, show } from '../../../../base/browser/dom.js';\nimport { IconLabel } from '../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { createMatches } from '../../../../base/common/filters.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { getIconClasses } from '../../../common/services/getIconClasses.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport * as nls from '../../../../nls.js';\nimport { FileKind } from '../../../../platform/files/common/files.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { canExpandCompletionItem } from './suggestWidgetDetails.js';\nexport function getAriaId(index) {\n    return `suggest-aria-id:${index}`;\n}\nconst suggestMoreInfoIcon = registerIcon('suggest-more-info', Codicon.chevronRight, nls.localize('suggestMoreInfoIcon', 'Icon for more information in the suggest widget.'));\nconst _completionItemColor = new (_a = class ColorExtractor {\n        extract(item, out) {\n            if (item.textLabel.match(_a._regexStrict)) {\n                out[0] = item.textLabel;\n                return true;\n            }\n            if (item.completion.detail && item.completion.detail.match(_a._regexStrict)) {\n                out[0] = item.completion.detail;\n                return true;\n            }\n            if (typeof item.completion.documentation === 'string') {\n                const match = _a._regexRelaxed.exec(item.completion.documentation);\n                if (match && (match.index === 0 || match.index + match[0].length === item.completion.documentation.length)) {\n                    out[0] = match[0];\n                    return true;\n                }\n            }\n            return false;\n        }\n    },\n    _a._regexRelaxed = /(#([\\da-fA-F]{3}){1,2}|(rgb|hsl)a\\(\\s*(\\d{1,3}%?\\s*,\\s*){3}(1|0?\\.\\d+)\\)|(rgb|hsl)\\(\\s*\\d{1,3}%?(\\s*,\\s*\\d{1,3}%?){2}\\s*\\))/,\n    _a._regexStrict = new RegExp(`^${_a._regexRelaxed.source}$`, 'i'),\n    _a);\nlet ItemRenderer = class ItemRenderer {\n    constructor(_editor, _modelService, _languageService, _themeService) {\n        this._editor = _editor;\n        this._modelService = _modelService;\n        this._languageService = _languageService;\n        this._themeService = _themeService;\n        this._onDidToggleDetails = new Emitter();\n        this.onDidToggleDetails = this._onDidToggleDetails.event;\n        this.templateId = 'suggestion';\n    }\n    dispose() {\n        this._onDidToggleDetails.dispose();\n    }\n    renderTemplate(container) {\n        const disposables = new DisposableStore();\n        const root = container;\n        root.classList.add('show-file-icons');\n        const icon = append(container, $('.icon'));\n        const colorspan = append(icon, $('span.colorspan'));\n        const text = append(container, $('.contents'));\n        const main = append(text, $('.main'));\n        const iconContainer = append(main, $('.icon-label.codicon'));\n        const left = append(main, $('span.left'));\n        const right = append(main, $('span.right'));\n        const iconLabel = new IconLabel(left, { supportHighlights: true, supportIcons: true });\n        disposables.add(iconLabel);\n        const parametersLabel = append(left, $('span.signature-label'));\n        const qualifierLabel = append(left, $('span.qualifier-label'));\n        const detailsLabel = append(right, $('span.details-label'));\n        const readMore = append(right, $('span.readMore' + ThemeIcon.asCSSSelector(suggestMoreInfoIcon)));\n        readMore.title = nls.localize('readMore', \"Read More\");\n        const configureFont = () => {\n            const options = this._editor.getOptions();\n            const fontInfo = options.get(50 /* EditorOption.fontInfo */);\n            const fontFamily = fontInfo.getMassagedFontFamily();\n            const fontFeatureSettings = fontInfo.fontFeatureSettings;\n            const fontSize = options.get(118 /* EditorOption.suggestFontSize */) || fontInfo.fontSize;\n            const lineHeight = options.get(119 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight;\n            const fontWeight = fontInfo.fontWeight;\n            const letterSpacing = fontInfo.letterSpacing;\n            const fontSizePx = `${fontSize}px`;\n            const lineHeightPx = `${lineHeight}px`;\n            const letterSpacingPx = `${letterSpacing}px`;\n            root.style.fontSize = fontSizePx;\n            root.style.fontWeight = fontWeight;\n            root.style.letterSpacing = letterSpacingPx;\n            main.style.fontFamily = fontFamily;\n            main.style.fontFeatureSettings = fontFeatureSettings;\n            main.style.lineHeight = lineHeightPx;\n            icon.style.height = lineHeightPx;\n            icon.style.width = lineHeightPx;\n            readMore.style.height = lineHeightPx;\n            readMore.style.width = lineHeightPx;\n        };\n        configureFont();\n        disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(50 /* EditorOption.fontInfo */) || e.hasChanged(118 /* EditorOption.suggestFontSize */) || e.hasChanged(119 /* EditorOption.suggestLineHeight */)) {\n                configureFont();\n            }\n        }));\n        return { root, left, right, icon, colorspan, iconLabel, iconContainer, parametersLabel, qualifierLabel, detailsLabel, readMore, disposables };\n    }\n    renderElement(element, index, data) {\n        const { completion } = element;\n        data.root.id = getAriaId(index);\n        data.colorspan.style.backgroundColor = '';\n        const labelOptions = {\n            labelEscapeNewLines: true,\n            matches: createMatches(element.score)\n        };\n        const color = [];\n        if (completion.kind === 19 /* CompletionItemKind.Color */ && _completionItemColor.extract(element, color)) {\n            // special logic for 'color' completion items\n            data.icon.className = 'icon customcolor';\n            data.iconContainer.className = 'icon hide';\n            data.colorspan.style.backgroundColor = color[0];\n        }\n        else if (completion.kind === 20 /* CompletionItemKind.File */ && this._themeService.getFileIconTheme().hasFileIcons) {\n            // special logic for 'file' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            const labelClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FILE);\n            const detailClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FILE);\n            labelOptions.extraClasses = labelClasses.length > detailClasses.length ? labelClasses : detailClasses;\n        }\n        else if (completion.kind === 23 /* CompletionItemKind.Folder */ && this._themeService.getFileIconTheme().hasFolderIcons) {\n            // special logic for 'folder' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            labelOptions.extraClasses = [\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FOLDER),\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FOLDER)\n            ].flat();\n        }\n        else {\n            // normal icon\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = '';\n            data.iconContainer.classList.add('suggest-icon', ...ThemeIcon.asClassNameArray(CompletionItemKinds.toIcon(completion.kind)));\n        }\n        if (completion.tags && completion.tags.indexOf(1 /* CompletionItemTag.Deprecated */) >= 0) {\n            labelOptions.extraClasses = (labelOptions.extraClasses || []).concat(['deprecated']);\n            labelOptions.matches = [];\n        }\n        data.iconLabel.setLabel(element.textLabel, undefined, labelOptions);\n        if (typeof completion.label === 'string') {\n            data.parametersLabel.textContent = '';\n            data.detailsLabel.textContent = stripNewLines(completion.detail || '');\n            data.root.classList.add('string-label');\n        }\n        else {\n            data.parametersLabel.textContent = stripNewLines(completion.label.detail || '');\n            data.detailsLabel.textContent = stripNewLines(completion.label.description || '');\n            data.root.classList.remove('string-label');\n        }\n        if (this._editor.getOption(117 /* EditorOption.suggest */).showInlineDetails) {\n            show(data.detailsLabel);\n        }\n        else {\n            hide(data.detailsLabel);\n        }\n        if (canExpandCompletionItem(element)) {\n            data.right.classList.add('can-expand-details');\n            show(data.readMore);\n            data.readMore.onmousedown = e => {\n                e.stopPropagation();\n                e.preventDefault();\n            };\n            data.readMore.onclick = e => {\n                e.stopPropagation();\n                e.preventDefault();\n                this._onDidToggleDetails.fire();\n            };\n        }\n        else {\n            data.right.classList.remove('can-expand-details');\n            hide(data.readMore);\n            data.readMore.onmousedown = null;\n            data.readMore.onclick = null;\n        }\n    }\n    disposeTemplate(templateData) {\n        templateData.disposables.dispose();\n    }\n};\nItemRenderer = __decorate([\n    __param(1, IModelService),\n    __param(2, ILanguageService),\n    __param(3, IThemeService)\n], ItemRenderer);\nexport { ItemRenderer };\nfunction stripNewLines(str) {\n    return str.replace(/\\r\\n|\\r|\\n/g, '');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar SuggestWidget_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport { createCancelablePromise, disposableTimeout, TimeoutTimer } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter, PauseableEmitter } from '../../../../base/common/event.js';\nimport { DisposableStore, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { clamp } from '../../../../base/common/numbers.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './media/suggest.css';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { SuggestWidgetStatus } from './suggestWidgetStatus.js';\nimport '../../symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { activeContrastBorder, editorForeground, editorWidgetBackground, editorWidgetBorder, listFocusHighlightForeground, listHighlightForeground, quickInputListFocusBackground, quickInputListFocusForeground, quickInputListFocusIconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport { Context as SuggestContext, suggestWidgetStatusbarMenu } from './suggest.js';\nimport { canExpandCompletionItem, SuggestDetailsOverlay, SuggestDetailsWidget } from './suggestWidgetDetails.js';\nimport { getAriaId, ItemRenderer } from './suggestWidgetRenderer.js';\nimport { getListStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\n/**\n * Suggest widget colors\n */\nregisterColor('editorSuggestWidget.background', { dark: editorWidgetBackground, light: editorWidgetBackground, hcDark: editorWidgetBackground, hcLight: editorWidgetBackground }, nls.localize('editorSuggestWidgetBackground', 'Background color of the suggest widget.'));\nregisterColor('editorSuggestWidget.border', { dark: editorWidgetBorder, light: editorWidgetBorder, hcDark: editorWidgetBorder, hcLight: editorWidgetBorder }, nls.localize('editorSuggestWidgetBorder', 'Border color of the suggest widget.'));\nconst editorSuggestWidgetForeground = registerColor('editorSuggestWidget.foreground', { dark: editorForeground, light: editorForeground, hcDark: editorForeground, hcLight: editorForeground }, nls.localize('editorSuggestWidgetForeground', 'Foreground color of the suggest widget.'));\nregisterColor('editorSuggestWidget.selectedForeground', { dark: quickInputListFocusForeground, light: quickInputListFocusForeground, hcDark: quickInputListFocusForeground, hcLight: quickInputListFocusForeground }, nls.localize('editorSuggestWidgetSelectedForeground', 'Foreground color of the selected entry in the suggest widget.'));\nregisterColor('editorSuggestWidget.selectedIconForeground', { dark: quickInputListFocusIconForeground, light: quickInputListFocusIconForeground, hcDark: quickInputListFocusIconForeground, hcLight: quickInputListFocusIconForeground }, nls.localize('editorSuggestWidgetSelectedIconForeground', 'Icon foreground color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetSelectedBackground = registerColor('editorSuggestWidget.selectedBackground', { dark: quickInputListFocusBackground, light: quickInputListFocusBackground, hcDark: quickInputListFocusBackground, hcLight: quickInputListFocusBackground }, nls.localize('editorSuggestWidgetSelectedBackground', 'Background color of the selected entry in the suggest widget.'));\nregisterColor('editorSuggestWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hcDark: listHighlightForeground, hcLight: listHighlightForeground }, nls.localize('editorSuggestWidgetHighlightForeground', 'Color of the match highlights in the suggest widget.'));\nregisterColor('editorSuggestWidget.focusHighlightForeground', { dark: listFocusHighlightForeground, light: listFocusHighlightForeground, hcDark: listFocusHighlightForeground, hcLight: listFocusHighlightForeground }, nls.localize('editorSuggestWidgetFocusHighlightForeground', 'Color of the match highlights in the suggest widget when an item is focused.'));\nregisterColor('editorSuggestWidgetStatus.foreground', { dark: transparent(editorSuggestWidgetForeground, .5), light: transparent(editorSuggestWidgetForeground, .5), hcDark: transparent(editorSuggestWidgetForeground, .5), hcLight: transparent(editorSuggestWidgetForeground, .5) }, nls.localize('editorSuggestWidgetStatusForeground', 'Foreground color of the suggest widget status.'));\nclass PersistedWidgetSize {\n    constructor(_service, editor) {\n        this._service = _service;\n        this._key = `suggestWidget.size/${editor.getEditorType()}/${editor instanceof EmbeddedCodeEditorWidget}`;\n    }\n    restore() {\n        var _a;\n        const raw = (_a = this._service.get(this._key, 0 /* StorageScope.PROFILE */)) !== null && _a !== void 0 ? _a : '';\n        try {\n            const obj = JSON.parse(raw);\n            if (dom.Dimension.is(obj)) {\n                return dom.Dimension.lift(obj);\n            }\n        }\n        catch (_b) {\n            // ignore\n        }\n        return undefined;\n    }\n    store(size) {\n        this._service.store(this._key, JSON.stringify(size), 0 /* StorageScope.PROFILE */, 1 /* StorageTarget.MACHINE */);\n    }\n    reset() {\n        this._service.remove(this._key, 0 /* StorageScope.PROFILE */);\n    }\n}\nlet SuggestWidget = SuggestWidget_1 = class SuggestWidget {\n    constructor(editor, _storageService, _contextKeyService, _themeService, instantiationService) {\n        this.editor = editor;\n        this._storageService = _storageService;\n        this._state = 0 /* State.Hidden */;\n        this._isAuto = false;\n        this._pendingLayout = new MutableDisposable();\n        this._pendingShowDetails = new MutableDisposable();\n        this._ignoreFocusEvents = false;\n        this._forceRenderingAbove = false;\n        this._explainMode = false;\n        this._showTimeout = new TimeoutTimer();\n        this._disposables = new DisposableStore();\n        this._onDidSelect = new PauseableEmitter();\n        this._onDidFocus = new PauseableEmitter();\n        this._onDidHide = new Emitter();\n        this._onDidShow = new Emitter();\n        this.onDidSelect = this._onDidSelect.event;\n        this.onDidFocus = this._onDidFocus.event;\n        this.onDidHide = this._onDidHide.event;\n        this.onDidShow = this._onDidShow.event;\n        this._onDetailsKeydown = new Emitter();\n        this.onDetailsKeyDown = this._onDetailsKeydown.event;\n        this.element = new ResizableHTMLElement();\n        this.element.domNode.classList.add('editor-widget', 'suggest-widget');\n        this._contentWidget = new SuggestContentWidget(this, editor);\n        this._persistedSize = new PersistedWidgetSize(_storageService, editor);\n        class ResizeState {\n            constructor(persistedSize, currentSize, persistHeight = false, persistWidth = false) {\n                this.persistedSize = persistedSize;\n                this.currentSize = currentSize;\n                this.persistHeight = persistHeight;\n                this.persistWidth = persistWidth;\n            }\n        }\n        let state;\n        this._disposables.add(this.element.onDidWillResize(() => {\n            this._contentWidget.lockPreference();\n            state = new ResizeState(this._persistedSize.restore(), this.element.size);\n        }));\n        this._disposables.add(this.element.onDidResize(e => {\n            var _a, _b, _c, _d;\n            this._resize(e.dimension.width, e.dimension.height);\n            if (state) {\n                state.persistHeight = state.persistHeight || !!e.north || !!e.south;\n                state.persistWidth = state.persistWidth || !!e.east || !!e.west;\n            }\n            if (!e.done) {\n                return;\n            }\n            if (state) {\n                // only store width or height value that have changed and also\n                // only store changes that are above a certain threshold\n                const { itemHeight, defaultSize } = this.getLayoutInfo();\n                const threshold = Math.round(itemHeight / 2);\n                let { width, height } = this.element.size;\n                if (!state.persistHeight || Math.abs(state.currentSize.height - height) <= threshold) {\n                    height = (_b = (_a = state.persistedSize) === null || _a === void 0 ? void 0 : _a.height) !== null && _b !== void 0 ? _b : defaultSize.height;\n                }\n                if (!state.persistWidth || Math.abs(state.currentSize.width - width) <= threshold) {\n                    width = (_d = (_c = state.persistedSize) === null || _c === void 0 ? void 0 : _c.width) !== null && _d !== void 0 ? _d : defaultSize.width;\n                }\n                this._persistedSize.store(new dom.Dimension(width, height));\n            }\n            // reset working state\n            this._contentWidget.unlockPreference();\n            state = undefined;\n        }));\n        this._messageElement = dom.append(this.element.domNode, dom.$('.message'));\n        this._listElement = dom.append(this.element.domNode, dom.$('.tree'));\n        const details = this._disposables.add(instantiationService.createInstance(SuggestDetailsWidget, this.editor));\n        details.onDidClose(this.toggleDetails, this, this._disposables);\n        this._details = new SuggestDetailsOverlay(details, this.editor);\n        const applyIconStyle = () => this.element.domNode.classList.toggle('no-icons', !this.editor.getOption(117 /* EditorOption.suggest */).showIcons);\n        applyIconStyle();\n        const renderer = instantiationService.createInstance(ItemRenderer, this.editor);\n        this._disposables.add(renderer);\n        this._disposables.add(renderer.onDidToggleDetails(() => this.toggleDetails()));\n        this._list = new List('SuggestWidget', this._listElement, {\n            getHeight: (_element) => this.getLayoutInfo().itemHeight,\n            getTemplateId: (_element) => 'suggestion'\n        }, [renderer], {\n            alwaysConsumeMouseWheel: true,\n            useShadows: false,\n            mouseSupport: false,\n            multipleSelectionSupport: false,\n            accessibilityProvider: {\n                getRole: () => 'option',\n                getWidgetAriaLabel: () => nls.localize('suggest', \"Suggest\"),\n                getWidgetRole: () => 'listbox',\n                getAriaLabel: (item) => {\n                    let label = item.textLabel;\n                    if (typeof item.completion.label !== 'string') {\n                        const { detail, description } = item.completion.label;\n                        if (detail && description) {\n                            label = nls.localize('label.full', '{0} {1}, {2}', label, detail, description);\n                        }\n                        else if (detail) {\n                            label = nls.localize('label.detail', '{0} {1}', label, detail);\n                        }\n                        else if (description) {\n                            label = nls.localize('label.desc', '{0}, {1}', label, description);\n                        }\n                    }\n                    if (!item.isResolved || !this._isDetailsVisible()) {\n                        return label;\n                    }\n                    const { documentation, detail } = item.completion;\n                    const docs = strings.format('{0}{1}', detail || '', documentation ? (typeof documentation === 'string' ? documentation : documentation.value) : '');\n                    return nls.localize('ariaCurrenttSuggestionReadDetails', \"{0}, docs: {1}\", label, docs);\n                },\n            }\n        });\n        this._list.style(getListStyles({\n            listInactiveFocusBackground: editorSuggestWidgetSelectedBackground,\n            listInactiveFocusOutline: activeContrastBorder\n        }));\n        this._status = instantiationService.createInstance(SuggestWidgetStatus, this.element.domNode, suggestWidgetStatusbarMenu);\n        const applyStatusBarStyle = () => this.element.domNode.classList.toggle('with-status-bar', this.editor.getOption(117 /* EditorOption.suggest */).showStatusBar);\n        applyStatusBarStyle();\n        this._disposables.add(_themeService.onDidColorThemeChange(t => this._onThemeChange(t)));\n        this._onThemeChange(_themeService.getColorTheme());\n        this._disposables.add(this._list.onMouseDown(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onTap(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onDidChangeSelection(e => this._onListSelection(e)));\n        this._disposables.add(this._list.onDidChangeFocus(e => this._onListFocus(e)));\n        this._disposables.add(this.editor.onDidChangeCursorSelection(() => this._onCursorSelectionChanged()));\n        this._disposables.add(this.editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(117 /* EditorOption.suggest */)) {\n                applyStatusBarStyle();\n                applyIconStyle();\n            }\n        }));\n        this._ctxSuggestWidgetVisible = SuggestContext.Visible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetDetailsVisible = SuggestContext.DetailsVisible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetMultipleSuggestions = SuggestContext.MultipleSuggestions.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetHasFocusedSuggestion = SuggestContext.HasFocusedSuggestion.bindTo(_contextKeyService);\n        this._disposables.add(dom.addStandardDisposableListener(this._details.widget.domNode, 'keydown', e => {\n            this._onDetailsKeydown.fire(e);\n        }));\n        this._disposables.add(this.editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n    }\n    dispose() {\n        var _a;\n        this._details.widget.dispose();\n        this._details.dispose();\n        this._list.dispose();\n        this._status.dispose();\n        this._disposables.dispose();\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._pendingLayout.dispose();\n        this._pendingShowDetails.dispose();\n        this._showTimeout.dispose();\n        this._contentWidget.dispose();\n        this.element.dispose();\n    }\n    _onEditorMouseDown(mouseEvent) {\n        if (this._details.widget.domNode.contains(mouseEvent.target.element)) {\n            // Clicking inside details\n            this._details.widget.domNode.focus();\n        }\n        else {\n            // Clicking outside details and inside suggest\n            if (this.element.domNode.contains(mouseEvent.target.element)) {\n                this.editor.focus();\n            }\n        }\n    }\n    _onCursorSelectionChanged() {\n        if (this._state !== 0 /* State.Hidden */) {\n            this._contentWidget.layout();\n        }\n    }\n    _onListMouseDownOrTap(e) {\n        if (typeof e.element === 'undefined' || typeof e.index === 'undefined') {\n            return;\n        }\n        // prevent stealing browser focus from the editor\n        e.browserEvent.preventDefault();\n        e.browserEvent.stopPropagation();\n        this._select(e.element, e.index);\n    }\n    _onListSelection(e) {\n        if (e.elements.length) {\n            this._select(e.elements[0], e.indexes[0]);\n        }\n    }\n    _select(item, index) {\n        const completionModel = this._completionModel;\n        if (completionModel) {\n            this._onDidSelect.fire({ item, index, model: completionModel });\n            this.editor.focus();\n        }\n    }\n    _onThemeChange(theme) {\n        this._details.widget.borderWidth = isHighContrast(theme.type) ? 2 : 1;\n    }\n    _onListFocus(e) {\n        var _a;\n        if (this._ignoreFocusEvents) {\n            return;\n        }\n        if (!e.elements.length) {\n            if (this._currentSuggestionDetails) {\n                this._currentSuggestionDetails.cancel();\n                this._currentSuggestionDetails = undefined;\n                this._focusedItem = undefined;\n            }\n            this.editor.setAriaOptions({ activeDescendant: undefined });\n            this._ctxSuggestWidgetHasFocusedSuggestion.set(false);\n            return;\n        }\n        if (!this._completionModel) {\n            return;\n        }\n        this._ctxSuggestWidgetHasFocusedSuggestion.set(true);\n        const item = e.elements[0];\n        const index = e.indexes[0];\n        if (item !== this._focusedItem) {\n            (_a = this._currentSuggestionDetails) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._currentSuggestionDetails = undefined;\n            this._focusedItem = item;\n            this._list.reveal(index);\n            this._currentSuggestionDetails = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                const loading = disposableTimeout(() => {\n                    if (this._isDetailsVisible()) {\n                        this.showDetails(true);\n                    }\n                }, 250);\n                const sub = token.onCancellationRequested(() => loading.dispose());\n                try {\n                    return yield item.resolve(token);\n                }\n                finally {\n                    loading.dispose();\n                    sub.dispose();\n                }\n            }));\n            this._currentSuggestionDetails.then(() => {\n                if (index >= this._list.length || item !== this._list.element(index)) {\n                    return;\n                }\n                // item can have extra information, so re-render\n                this._ignoreFocusEvents = true;\n                this._list.splice(index, 1, [item]);\n                this._list.setFocus([index]);\n                this._ignoreFocusEvents = false;\n                if (this._isDetailsVisible()) {\n                    this.showDetails(false);\n                }\n                else {\n                    this.element.domNode.classList.remove('docs-side');\n                }\n                this.editor.setAriaOptions({ activeDescendant: getAriaId(index) });\n            }).catch(onUnexpectedError);\n        }\n        // emit an event\n        this._onDidFocus.fire({ item, index, model: this._completionModel });\n    }\n    _setState(state) {\n        if (this._state === state) {\n            return;\n        }\n        this._state = state;\n        this.element.domNode.classList.toggle('frozen', state === 4 /* State.Frozen */);\n        this.element.domNode.classList.remove('message');\n        switch (state) {\n            case 0 /* State.Hidden */:\n                dom.hide(this._messageElement, this._listElement, this._status.element);\n                this._details.hide(true);\n                this._status.hide();\n                this._contentWidget.hide();\n                this._ctxSuggestWidgetVisible.reset();\n                this._ctxSuggestWidgetMultipleSuggestions.reset();\n                this._ctxSuggestWidgetHasFocusedSuggestion.reset();\n                this._showTimeout.cancel();\n                this.element.domNode.classList.remove('visible');\n                this._list.splice(0, this._list.length);\n                this._focusedItem = undefined;\n                this._cappedHeight = undefined;\n                this._explainMode = false;\n                break;\n            case 1 /* State.Loading */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget_1.LOADING_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                status(SuggestWidget_1.LOADING_MESSAGE);\n                break;\n            case 2 /* State.Empty */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget_1.NO_SUGGESTIONS_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                status(SuggestWidget_1.NO_SUGGESTIONS_MESSAGE);\n                break;\n            case 3 /* State.Open */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 4 /* State.Frozen */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 5 /* State.Details */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._details.show();\n                this._show();\n                break;\n        }\n    }\n    _show() {\n        this._status.show();\n        this._contentWidget.show();\n        this._layout(this._persistedSize.restore());\n        this._ctxSuggestWidgetVisible.set(true);\n        this._showTimeout.cancelAndSet(() => {\n            this.element.domNode.classList.add('visible');\n            this._onDidShow.fire(this);\n        }, 100);\n    }\n    showTriggered(auto, delay) {\n        if (this._state !== 0 /* State.Hidden */) {\n            return;\n        }\n        this._contentWidget.setPosition(this.editor.getPosition());\n        this._isAuto = !!auto;\n        if (!this._isAuto) {\n            this._loadingTimeout = disposableTimeout(() => this._setState(1 /* State.Loading */), delay);\n        }\n    }\n    showSuggestions(completionModel, selectionIndex, isFrozen, isAuto, noFocus) {\n        var _a, _b;\n        this._contentWidget.setPosition(this.editor.getPosition());\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._currentSuggestionDetails) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._currentSuggestionDetails = undefined;\n        if (this._completionModel !== completionModel) {\n            this._completionModel = completionModel;\n        }\n        if (isFrozen && this._state !== 2 /* State.Empty */ && this._state !== 0 /* State.Hidden */) {\n            this._setState(4 /* State.Frozen */);\n            return;\n        }\n        const visibleCount = this._completionModel.items.length;\n        const isEmpty = visibleCount === 0;\n        this._ctxSuggestWidgetMultipleSuggestions.set(visibleCount > 1);\n        if (isEmpty) {\n            this._setState(isAuto ? 0 /* State.Hidden */ : 2 /* State.Empty */);\n            this._completionModel = undefined;\n            return;\n        }\n        this._focusedItem = undefined;\n        // calling list.splice triggers focus event which this widget forwards. That can lead to\n        // suggestions being cancelled and the widget being cleared (and hidden). All this happens\n        // before revealing and focusing is done which means revealing and focusing will fail when\n        // they get run.\n        this._onDidFocus.pause();\n        this._onDidSelect.pause();\n        try {\n            this._list.splice(0, this._list.length, this._completionModel.items);\n            this._setState(isFrozen ? 4 /* State.Frozen */ : 3 /* State.Open */);\n            this._list.reveal(selectionIndex, 0);\n            this._list.setFocus(noFocus ? [] : [selectionIndex]);\n        }\n        finally {\n            this._onDidFocus.resume();\n            this._onDidSelect.resume();\n        }\n        this._pendingLayout.value = dom.runAtThisOrScheduleAtNextAnimationFrame(() => {\n            this._pendingLayout.clear();\n            this._layout(this.element.size);\n            // Reset focus border\n            this._details.widget.domNode.classList.remove('focused');\n        });\n    }\n    focusSelected() {\n        if (this._list.length > 0) {\n            this._list.setFocus([0]);\n        }\n    }\n    selectNextPage() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.pageDown();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNextPage();\n                return true;\n        }\n    }\n    selectNext() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNext(1, true);\n                return true;\n        }\n    }\n    selectLast() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.scrollBottom();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusLast();\n                return true;\n        }\n    }\n    selectPreviousPage() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.pageUp();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPreviousPage();\n                return true;\n        }\n    }\n    selectPrevious() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPrevious(1, true);\n                return false;\n        }\n    }\n    selectFirst() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.scrollTop();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusFirst();\n                return true;\n        }\n    }\n    getFocusedItem() {\n        if (this._state !== 0 /* State.Hidden */\n            && this._state !== 2 /* State.Empty */\n            && this._state !== 1 /* State.Loading */\n            && this._completionModel\n            && this._list.getFocus().length > 0) {\n            return {\n                item: this._list.getFocusedElements()[0],\n                index: this._list.getFocus()[0],\n                model: this._completionModel\n            };\n        }\n        return undefined;\n    }\n    toggleDetailsFocus() {\n        if (this._state === 5 /* State.Details */) {\n            this._setState(3 /* State.Open */);\n            this._details.widget.domNode.classList.remove('focused');\n        }\n        else if (this._state === 3 /* State.Open */ && this._isDetailsVisible()) {\n            this._setState(5 /* State.Details */);\n            this._details.widget.domNode.classList.add('focused');\n        }\n    }\n    toggleDetails() {\n        if (this._isDetailsVisible()) {\n            // hide details widget\n            this._pendingShowDetails.clear();\n            this._ctxSuggestWidgetDetailsVisible.set(false);\n            this._setDetailsVisible(false);\n            this._details.hide();\n            this.element.domNode.classList.remove('shows-details');\n        }\n        else if ((canExpandCompletionItem(this._list.getFocusedElements()[0]) || this._explainMode) && (this._state === 3 /* State.Open */ || this._state === 5 /* State.Details */ || this._state === 4 /* State.Frozen */)) {\n            // show details widget (iff possible)\n            this._ctxSuggestWidgetDetailsVisible.set(true);\n            this._setDetailsVisible(true);\n            this.showDetails(false);\n        }\n    }\n    showDetails(loading) {\n        this._pendingShowDetails.value = dom.runAtThisOrScheduleAtNextAnimationFrame(() => {\n            this._pendingShowDetails.clear();\n            this._details.show();\n            if (loading) {\n                this._details.widget.renderLoading();\n            }\n            else {\n                this._details.widget.renderItem(this._list.getFocusedElements()[0], this._explainMode);\n            }\n            this._positionDetails();\n            this.editor.focus();\n            this.element.domNode.classList.add('shows-details');\n        });\n    }\n    toggleExplainMode() {\n        if (this._list.getFocusedElements()[0]) {\n            this._explainMode = !this._explainMode;\n            if (!this._isDetailsVisible()) {\n                this.toggleDetails();\n            }\n            else {\n                this.showDetails(false);\n            }\n        }\n    }\n    resetPersistedSize() {\n        this._persistedSize.reset();\n    }\n    hideWidget() {\n        var _a;\n        this._pendingLayout.clear();\n        this._pendingShowDetails.clear();\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._setState(0 /* State.Hidden */);\n        this._onDidHide.fire(this);\n        this.element.clearSashHoverState();\n        // ensure that a reasonable widget height is persisted so that\n        // accidential \"resize-to-single-items\" cases aren't happening\n        const dim = this._persistedSize.restore();\n        const minPersistedHeight = Math.ceil(this.getLayoutInfo().itemHeight * 4.3);\n        if (dim && dim.height < minPersistedHeight) {\n            this._persistedSize.store(dim.with(undefined, minPersistedHeight));\n        }\n    }\n    isFrozen() {\n        return this._state === 4 /* State.Frozen */;\n    }\n    _afterRender(position) {\n        if (position === null) {\n            if (this._isDetailsVisible()) {\n                this._details.hide(); //todo@jrieken soft-hide\n            }\n            return;\n        }\n        if (this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */) {\n            // no special positioning when widget isn't showing list\n            return;\n        }\n        if (this._isDetailsVisible()) {\n            this._details.show();\n        }\n        this._positionDetails();\n    }\n    _layout(size) {\n        var _a, _b, _c;\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        if (!this.editor.getDomNode()) {\n            // happens when running tests\n            return;\n        }\n        const bodyBox = dom.getClientArea(this.element.domNode.ownerDocument.body);\n        const info = this.getLayoutInfo();\n        if (!size) {\n            size = info.defaultSize;\n        }\n        let height = size.height;\n        let width = size.width;\n        // status bar\n        this._status.element.style.height = `${info.itemHeight}px`;\n        if (this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */) {\n            // showing a message only\n            height = info.itemHeight + info.borderHeight;\n            width = info.defaultSize.width / 2;\n            this.element.enableSashes(false, false, false, false);\n            this.element.minSize = this.element.maxSize = new dom.Dimension(width, height);\n            this._contentWidget.setPreference(2 /* ContentWidgetPositionPreference.BELOW */);\n        }\n        else {\n            // showing items\n            // width math\n            const maxWidth = bodyBox.width - info.borderHeight - 2 * info.horizontalPadding;\n            if (width > maxWidth) {\n                width = maxWidth;\n            }\n            const preferredWidth = this._completionModel ? this._completionModel.stats.pLabelLen * info.typicalHalfwidthCharacterWidth : width;\n            // height math\n            const fullHeight = info.statusBarHeight + this._list.contentHeight + info.borderHeight;\n            const minHeight = info.itemHeight + info.statusBarHeight;\n            const editorBox = dom.getDomNodePagePosition(this.editor.getDomNode());\n            const cursorBox = this.editor.getScrolledVisiblePosition(this.editor.getPosition());\n            const cursorBottom = editorBox.top + cursorBox.top + cursorBox.height;\n            const maxHeightBelow = Math.min(bodyBox.height - cursorBottom - info.verticalPadding, fullHeight);\n            const availableSpaceAbove = editorBox.top + cursorBox.top - info.verticalPadding;\n            const maxHeightAbove = Math.min(availableSpaceAbove, fullHeight);\n            let maxHeight = Math.min(Math.max(maxHeightAbove, maxHeightBelow) + info.borderHeight, fullHeight);\n            if (height === ((_a = this._cappedHeight) === null || _a === void 0 ? void 0 : _a.capped)) {\n                // Restore the old (wanted) height when the current\n                // height is capped to fit\n                height = this._cappedHeight.wanted;\n            }\n            if (height < minHeight) {\n                height = minHeight;\n            }\n            if (height > maxHeight) {\n                height = maxHeight;\n            }\n            const forceRenderingAboveRequiredSpace = 150;\n            if (height > maxHeightBelow || (this._forceRenderingAbove && availableSpaceAbove > forceRenderingAboveRequiredSpace)) {\n                this._contentWidget.setPreference(1 /* ContentWidgetPositionPreference.ABOVE */);\n                this.element.enableSashes(true, true, false, false);\n                maxHeight = maxHeightAbove;\n            }\n            else {\n                this._contentWidget.setPreference(2 /* ContentWidgetPositionPreference.BELOW */);\n                this.element.enableSashes(false, true, true, false);\n                maxHeight = maxHeightBelow;\n            }\n            this.element.preferredSize = new dom.Dimension(preferredWidth, info.defaultSize.height);\n            this.element.maxSize = new dom.Dimension(maxWidth, maxHeight);\n            this.element.minSize = new dom.Dimension(220, minHeight);\n            // Know when the height was capped to fit and remember\n            // the wanted height for later. This is required when going\n            // left to widen suggestions.\n            this._cappedHeight = height === fullHeight\n                ? { wanted: (_c = (_b = this._cappedHeight) === null || _b === void 0 ? void 0 : _b.wanted) !== null && _c !== void 0 ? _c : size.height, capped: height }\n                : undefined;\n        }\n        this._resize(width, height);\n    }\n    _resize(width, height) {\n        const { width: maxWidth, height: maxHeight } = this.element.maxSize;\n        width = Math.min(maxWidth, width);\n        height = Math.min(maxHeight, height);\n        const { statusBarHeight } = this.getLayoutInfo();\n        this._list.layout(height - statusBarHeight, width);\n        this._listElement.style.height = `${height - statusBarHeight}px`;\n        this.element.layout(height, width);\n        this._contentWidget.layout();\n        this._positionDetails();\n    }\n    _positionDetails() {\n        var _a;\n        if (this._isDetailsVisible()) {\n            this._details.placeAtAnchor(this.element.domNode, ((_a = this._contentWidget.getPosition()) === null || _a === void 0 ? void 0 : _a.preference[0]) === 2 /* ContentWidgetPositionPreference.BELOW */);\n        }\n    }\n    getLayoutInfo() {\n        const fontInfo = this.editor.getOption(50 /* EditorOption.fontInfo */);\n        const itemHeight = clamp(this.editor.getOption(119 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight, 8, 1000);\n        const statusBarHeight = !this.editor.getOption(117 /* EditorOption.suggest */).showStatusBar || this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */ ? 0 : itemHeight;\n        const borderWidth = this._details.widget.borderWidth;\n        const borderHeight = 2 * borderWidth;\n        return {\n            itemHeight,\n            statusBarHeight,\n            borderWidth,\n            borderHeight,\n            typicalHalfwidthCharacterWidth: fontInfo.typicalHalfwidthCharacterWidth,\n            verticalPadding: 22,\n            horizontalPadding: 14,\n            defaultSize: new dom.Dimension(430, statusBarHeight + 12 * itemHeight + borderHeight)\n        };\n    }\n    _isDetailsVisible() {\n        return this._storageService.getBoolean('expandSuggestionDocs', 0 /* StorageScope.PROFILE */, false);\n    }\n    _setDetailsVisible(value) {\n        this._storageService.store('expandSuggestionDocs', value, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n    }\n    forceRenderingAbove() {\n        if (!this._forceRenderingAbove) {\n            this._forceRenderingAbove = true;\n            this._layout(this._persistedSize.restore());\n        }\n    }\n    stopForceRenderingAbove() {\n        this._forceRenderingAbove = false;\n    }\n};\nSuggestWidget.LOADING_MESSAGE = nls.localize('suggestWidget.loading', \"Loading...\");\nSuggestWidget.NO_SUGGESTIONS_MESSAGE = nls.localize('suggestWidget.noSuggestions', \"No suggestions.\");\nSuggestWidget = SuggestWidget_1 = __decorate([\n    __param(1, IStorageService),\n    __param(2, IContextKeyService),\n    __param(3, IThemeService),\n    __param(4, IInstantiationService)\n], SuggestWidget);\nexport { SuggestWidget };\nexport class SuggestContentWidget {\n    constructor(_widget, _editor) {\n        this._widget = _widget;\n        this._editor = _editor;\n        this.allowEditorOverflow = true;\n        this.suppressMouseDown = false;\n        this._preferenceLocked = false;\n        this._added = false;\n        this._hidden = false;\n    }\n    dispose() {\n        if (this._added) {\n            this._added = false;\n            this._editor.removeContentWidget(this);\n        }\n    }\n    getId() {\n        return 'editor.widget.suggestWidget';\n    }\n    getDomNode() {\n        return this._widget.element.domNode;\n    }\n    show() {\n        this._hidden = false;\n        if (!this._added) {\n            this._added = true;\n            this._editor.addContentWidget(this);\n        }\n    }\n    hide() {\n        if (!this._hidden) {\n            this._hidden = true;\n            this.layout();\n        }\n    }\n    layout() {\n        this._editor.layoutContentWidget(this);\n    }\n    getPosition() {\n        if (this._hidden || !this._position || !this._preference) {\n            return null;\n        }\n        return {\n            position: this._position,\n            preference: [this._preference]\n        };\n    }\n    beforeRender() {\n        const { height, width } = this._widget.element.size;\n        const { borderWidth, horizontalPadding } = this._widget.getLayoutInfo();\n        return new dom.Dimension(width + 2 * borderWidth + horizontalPadding, height + 2 * borderWidth);\n    }\n    afterRender(position) {\n        this._widget._afterRender(position);\n    }\n    setPreference(preference) {\n        if (!this._preferenceLocked) {\n            this._preference = preference;\n        }\n    }\n    lockPreference() {\n        this._preferenceLocked = true;\n    }\n    unlockPreference() {\n        this._preferenceLocked = false;\n    }\n    setPosition(position) {\n        this._position = position;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar SuggestController_1;\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { IdleValue } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { KeyCodeChord } from '../../../../base/common/keybindings.js';\nimport { DisposableStore, dispose, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType, isObject } from '../../../../base/common/types.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordContextKey } from './wordContextKey.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { Context as SuggestContext, suggestWidgetStatusbarMenu } from './suggest.js';\nimport { SuggestAlternatives } from './suggestAlternatives.js';\nimport { CommitCharacterController } from './suggestCommitCharacters.js';\nimport { SuggestModel } from './suggestModel.js';\nimport { OvertypingCapturer } from './suggestOvertypingCapturer.js';\nimport { SuggestWidget } from './suggestWidget.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { basename, extname } from '../../../../base/common/resources.js';\nimport { hash } from '../../../../base/common/hash.js';\n// sticky suggest widget which doesn't disappear on focus out and such\nconst _sticky = false;\nclass LineSuffix {\n    constructor(_model, _position) {\n        this._model = _model;\n        this._position = _position;\n        // spy on what's happening right of the cursor. two cases:\n        // 1. end of line -> check that it's still end of line\n        // 2. mid of line -> add a marker and compute the delta\n        const maxColumn = _model.getLineMaxColumn(_position.lineNumber);\n        if (maxColumn !== _position.column) {\n            const offset = _model.getOffsetAt(_position);\n            const end = _model.getPositionAt(offset + 1);\n            this._marker = _model.deltaDecorations([], [{\n                    range: Range.fromPositions(_position, end),\n                    options: { description: 'suggest-line-suffix', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */ }\n                }]);\n        }\n    }\n    dispose() {\n        if (this._marker && !this._model.isDisposed()) {\n            this._model.deltaDecorations(this._marker, []);\n        }\n    }\n    delta(position) {\n        if (this._model.isDisposed() || this._position.lineNumber !== position.lineNumber) {\n            // bail out early if things seems fishy\n            return 0;\n        }\n        // read the marker (in case suggest was triggered at line end) or compare\n        // the cursor to the line end.\n        if (this._marker) {\n            const range = this._model.getDecorationRange(this._marker[0]);\n            const end = this._model.getOffsetAt(range.getStartPosition());\n            return end - this._model.getOffsetAt(position);\n        }\n        else {\n            return this._model.getLineMaxColumn(position.lineNumber) - position.column;\n        }\n    }\n}\nlet SuggestController = SuggestController_1 = class SuggestController {\n    static get(editor) {\n        return editor.getContribution(SuggestController_1.ID);\n    }\n    constructor(editor, _memoryService, _commandService, _contextKeyService, _instantiationService, _logService, _telemetryService) {\n        this._memoryService = _memoryService;\n        this._commandService = _commandService;\n        this._contextKeyService = _contextKeyService;\n        this._instantiationService = _instantiationService;\n        this._logService = _logService;\n        this._telemetryService = _telemetryService;\n        this._lineSuffix = new MutableDisposable();\n        this._toDispose = new DisposableStore();\n        this._selectors = new PriorityRegistry(s => s.priority);\n        this._onWillInsertSuggestItem = new Emitter();\n        this.onWillInsertSuggestItem = this._onWillInsertSuggestItem.event;\n        this.editor = editor;\n        this.model = _instantiationService.createInstance(SuggestModel, this.editor);\n        // default selector\n        this._selectors.register({\n            priority: 0,\n            select: (model, pos, items) => this._memoryService.select(model, pos, items)\n        });\n        // context key: update insert/replace mode\n        const ctxInsertMode = SuggestContext.InsertMode.bindTo(_contextKeyService);\n        ctxInsertMode.set(editor.getOption(117 /* EditorOption.suggest */).insertMode);\n        this._toDispose.add(this.model.onDidTrigger(() => ctxInsertMode.set(editor.getOption(117 /* EditorOption.suggest */).insertMode)));\n        this.widget = this._toDispose.add(new IdleValue(() => {\n            const widget = this._instantiationService.createInstance(SuggestWidget, this.editor);\n            this._toDispose.add(widget);\n            this._toDispose.add(widget.onDidSelect(item => this._insertSuggestion(item, 0 /* InsertFlags.None */), this));\n            // Wire up logic to accept a suggestion on certain characters\n            const commitCharacterController = new CommitCharacterController(this.editor, widget, this.model, item => this._insertSuggestion(item, 2 /* InsertFlags.NoAfterUndoStop */));\n            this._toDispose.add(commitCharacterController);\n            // Wire up makes text edit context key\n            const ctxMakesTextEdit = SuggestContext.MakesTextEdit.bindTo(this._contextKeyService);\n            const ctxHasInsertAndReplace = SuggestContext.HasInsertAndReplaceRange.bindTo(this._contextKeyService);\n            const ctxCanResolve = SuggestContext.CanResolve.bindTo(this._contextKeyService);\n            this._toDispose.add(toDisposable(() => {\n                ctxMakesTextEdit.reset();\n                ctxHasInsertAndReplace.reset();\n                ctxCanResolve.reset();\n            }));\n            this._toDispose.add(widget.onDidFocus(({ item }) => {\n                // (ctx: makesTextEdit)\n                const position = this.editor.getPosition();\n                const startColumn = item.editStart.column;\n                const endColumn = position.column;\n                let value = true;\n                if (this.editor.getOption(1 /* EditorOption.acceptSuggestionOnEnter */) === 'smart'\n                    && this.model.state === 2 /* State.Auto */\n                    && !item.completion.additionalTextEdits\n                    && !(item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)\n                    && endColumn - startColumn === item.completion.insertText.length) {\n                    const oldText = this.editor.getModel().getValueInRange({\n                        startLineNumber: position.lineNumber,\n                        startColumn,\n                        endLineNumber: position.lineNumber,\n                        endColumn\n                    });\n                    value = oldText !== item.completion.insertText;\n                }\n                ctxMakesTextEdit.set(value);\n                // (ctx: hasInsertAndReplaceRange)\n                ctxHasInsertAndReplace.set(!Position.equals(item.editInsertEnd, item.editReplaceEnd));\n                // (ctx: canResolve)\n                ctxCanResolve.set(Boolean(item.provider.resolveCompletionItem) || Boolean(item.completion.documentation) || item.completion.detail !== item.completion.label);\n            }));\n            this._toDispose.add(widget.onDetailsKeyDown(e => {\n                // cmd + c on macOS, ctrl + c on Win / Linux\n                if (e.toKeyCodeChord().equals(new KeyCodeChord(true, false, false, false, 33 /* KeyCode.KeyC */)) ||\n                    (platform.isMacintosh && e.toKeyCodeChord().equals(new KeyCodeChord(false, false, false, true, 33 /* KeyCode.KeyC */)))) {\n                    e.stopPropagation();\n                    return;\n                }\n                if (!e.toKeyCodeChord().isModifierKey()) {\n                    this.editor.focus();\n                }\n            }));\n            return widget;\n        }));\n        // Wire up text overtyping capture\n        this._overtypingCapturer = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new OvertypingCapturer(this.editor, this.model));\n        }));\n        this._alternatives = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new SuggestAlternatives(this.editor, this._contextKeyService));\n        }));\n        this._toDispose.add(_instantiationService.createInstance(WordContextKey, editor));\n        this._toDispose.add(this.model.onDidTrigger(e => {\n            this.widget.value.showTriggered(e.auto, e.shy ? 250 : 50);\n            this._lineSuffix.value = new LineSuffix(this.editor.getModel(), e.position);\n        }));\n        this._toDispose.add(this.model.onDidSuggest(e => {\n            if (e.triggerOptions.shy) {\n                return;\n            }\n            let index = -1;\n            for (const selector of this._selectors.itemsOrderedByPriorityDesc) {\n                index = selector.select(this.editor.getModel(), this.editor.getPosition(), e.completionModel.items);\n                if (index !== -1) {\n                    break;\n                }\n            }\n            if (index === -1) {\n                index = 0;\n            }\n            let noFocus = false;\n            if (e.triggerOptions.auto) {\n                // don't \"focus\" item when configured to do\n                const options = this.editor.getOption(117 /* EditorOption.suggest */);\n                if (options.selectionMode === 'never' || options.selectionMode === 'always') {\n                    // simple: always or never\n                    noFocus = options.selectionMode === 'never';\n                }\n                else if (options.selectionMode === 'whenTriggerCharacter') {\n                    // on with trigger character\n                    noFocus = e.triggerOptions.triggerKind !== 1 /* CompletionTriggerKind.TriggerCharacter */;\n                }\n                else if (options.selectionMode === 'whenQuickSuggestion') {\n                    // without trigger character or when refiltering\n                    noFocus = e.triggerOptions.triggerKind === 1 /* CompletionTriggerKind.TriggerCharacter */ && !e.triggerOptions.refilter;\n                }\n            }\n            this.widget.value.showSuggestions(e.completionModel, index, e.isFrozen, e.triggerOptions.auto, noFocus);\n        }));\n        this._toDispose.add(this.model.onDidCancel(e => {\n            if (!e.retrigger) {\n                this.widget.value.hideWidget();\n            }\n        }));\n        this._toDispose.add(this.editor.onDidBlurEditorWidget(() => {\n            if (!_sticky) {\n                this.model.cancel();\n                this.model.clear();\n            }\n        }));\n        // Manage the acceptSuggestionsOnEnter context key\n        const acceptSuggestionsOnEnter = SuggestContext.AcceptSuggestionsOnEnter.bindTo(_contextKeyService);\n        const updateFromConfig = () => {\n            const acceptSuggestionOnEnter = this.editor.getOption(1 /* EditorOption.acceptSuggestionOnEnter */);\n            acceptSuggestionsOnEnter.set(acceptSuggestionOnEnter === 'on' || acceptSuggestionOnEnter === 'smart');\n        };\n        this._toDispose.add(this.editor.onDidChangeConfiguration(() => updateFromConfig()));\n        updateFromConfig();\n    }\n    dispose() {\n        this._alternatives.dispose();\n        this._toDispose.dispose();\n        this.widget.dispose();\n        this.model.dispose();\n        this._lineSuffix.dispose();\n        this._onWillInsertSuggestItem.dispose();\n    }\n    _insertSuggestion(event, flags) {\n        if (!event || !event.item) {\n            this._alternatives.value.reset();\n            this.model.cancel();\n            this.model.clear();\n            return;\n        }\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const snippetController = SnippetController2.get(this.editor);\n        if (!snippetController) {\n            return;\n        }\n        this._onWillInsertSuggestItem.fire({ item: event.item });\n        const model = this.editor.getModel();\n        const modelVersionNow = model.getAlternativeVersionId();\n        const { item } = event;\n        //\n        const tasks = [];\n        const cts = new CancellationTokenSource();\n        // pushing undo stops *before* additional text edits and\n        // *after* the main edit\n        if (!(flags & 1 /* InsertFlags.NoBeforeUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        // compute overwrite[Before|After] deltas BEFORE applying extra edits\n        const info = this.getOverwriteInfo(item, Boolean(flags & 8 /* InsertFlags.AlternativeOverwriteConfig */));\n        // keep item in memory\n        this._memoryService.memorize(model, this.editor.getPosition(), item);\n        const isResolved = item.isResolved;\n        // telemetry data points: duration of command execution, info about async additional edits (-1=n/a, -2=none, 1=success, 0=failed)\n        let _commandExectionDuration = -1;\n        let _additionalEditsAppliedAsync = -1;\n        if (Array.isArray(item.completion.additionalTextEdits)) {\n            // cancel -> stops all listening and closes widget\n            this.model.cancel();\n            // sync additional edits\n            const scrollState = StableEditorScrollState.capture(this.editor);\n            this.editor.executeEdits('suggestController.additionalTextEdits.sync', item.completion.additionalTextEdits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n            scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n        }\n        else if (!isResolved) {\n            // async additional edits\n            const sw = new StopWatch();\n            let position;\n            const docListener = model.onDidChangeContent(e => {\n                if (e.isFlush) {\n                    cts.cancel();\n                    docListener.dispose();\n                    return;\n                }\n                for (const change of e.changes) {\n                    const thisPosition = Range.getEndPosition(change.range);\n                    if (!position || Position.isBefore(thisPosition, position)) {\n                        position = thisPosition;\n                    }\n                }\n            });\n            const oldFlags = flags;\n            flags |= 2 /* InsertFlags.NoAfterUndoStop */;\n            let didType = false;\n            const typeListener = this.editor.onWillType(() => {\n                typeListener.dispose();\n                didType = true;\n                if (!(oldFlags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n            });\n            tasks.push(item.resolve(cts.token).then(() => {\n                if (!item.completion.additionalTextEdits || cts.token.isCancellationRequested) {\n                    return undefined;\n                }\n                if (position && item.completion.additionalTextEdits.some(edit => Position.isBefore(position, Range.getStartPosition(edit.range)))) {\n                    return false;\n                }\n                if (didType) {\n                    this.editor.pushUndoStop();\n                }\n                const scrollState = StableEditorScrollState.capture(this.editor);\n                this.editor.executeEdits('suggestController.additionalTextEdits.async', item.completion.additionalTextEdits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n                scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n                if (didType || !(oldFlags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n                return true;\n            }).then(applied => {\n                this._logService.trace('[suggest] async resolving of edits DONE (ms, applied?)', sw.elapsed(), applied);\n                _additionalEditsAppliedAsync = applied === true ? 1 : applied === false ? 0 : -2;\n            }).finally(() => {\n                docListener.dispose();\n                typeListener.dispose();\n            }));\n        }\n        let { insertText } = item.completion;\n        if (!(item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)) {\n            insertText = SnippetParser.escape(insertText);\n        }\n        // cancel -> stops all listening and closes widget\n        this.model.cancel();\n        snippetController.insert(insertText, {\n            overwriteBefore: info.overwriteBefore,\n            overwriteAfter: info.overwriteAfter,\n            undoStopBefore: false,\n            undoStopAfter: false,\n            adjustWhitespace: !(item.completion.insertTextRules & 1 /* CompletionItemInsertTextRule.KeepWhitespace */),\n            clipboardText: event.model.clipboardText,\n            overtypingCapturer: this._overtypingCapturer.value\n        });\n        if (!(flags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        if (item.completion.command) {\n            if (item.completion.command.id === TriggerSuggestAction.id) {\n                // retigger\n                this.model.trigger({ auto: true, retrigger: true });\n            }\n            else {\n                // exec command, done\n                const sw = new StopWatch();\n                tasks.push(this._commandService.executeCommand(item.completion.command.id, ...(item.completion.command.arguments ? [...item.completion.command.arguments] : [])).catch(e => {\n                    if (item.completion.extensionId) {\n                        onUnexpectedExternalError(e);\n                    }\n                    else {\n                        onUnexpectedError(e);\n                    }\n                }).finally(() => {\n                    _commandExectionDuration = sw.elapsed();\n                }));\n            }\n        }\n        if (flags & 4 /* InsertFlags.KeepAlternativeSuggestions */) {\n            this._alternatives.value.set(event, next => {\n                // cancel resolving of additional edits\n                cts.cancel();\n                // this is not so pretty. when inserting the 'next'\n                // suggestion we undo until we are at the state at\n                // which we were before inserting the previous suggestion...\n                while (model.canUndo()) {\n                    if (modelVersionNow !== model.getAlternativeVersionId()) {\n                        model.undo();\n                    }\n                    this._insertSuggestion(next, 1 /* InsertFlags.NoBeforeUndoStop */ | 2 /* InsertFlags.NoAfterUndoStop */ | (flags & 8 /* InsertFlags.AlternativeOverwriteConfig */ ? 8 /* InsertFlags.AlternativeOverwriteConfig */ : 0));\n                    break;\n                }\n            });\n        }\n        this._alertCompletionItem(item);\n        // clear only now - after all tasks are done\n        Promise.all(tasks).finally(() => {\n            this._reportSuggestionAcceptedTelemetry(item, model, isResolved, _commandExectionDuration, _additionalEditsAppliedAsync);\n            this.model.clear();\n            cts.dispose();\n        });\n    }\n    _reportSuggestionAcceptedTelemetry(item, model, itemResolved, commandExectionDuration, additionalEditsAppliedAsync) {\n        var _a, _b, _c;\n        if (Math.floor(Math.random() * 100) === 0) {\n            // throttle telemetry event because accepting completions happens a lot\n            return;\n        }\n        this._telemetryService.publicLog2('suggest.acceptedSuggestion', {\n            extensionId: (_b = (_a = item.extensionId) === null || _a === void 0 ? void 0 : _a.value) !== null && _b !== void 0 ? _b : 'unknown',\n            providerId: (_c = item.provider._debugDisplayName) !== null && _c !== void 0 ? _c : 'unknown',\n            kind: item.completion.kind,\n            basenameHash: hash(basename(model.uri)).toString(16),\n            languageId: model.getLanguageId(),\n            fileExtension: extname(model.uri),\n            resolveInfo: !item.provider.resolveCompletionItem ? -1 : itemResolved ? 1 : 0,\n            resolveDuration: item.resolveDuration,\n            commandDuration: commandExectionDuration,\n            additionalEditsAsync: additionalEditsAppliedAsync\n        });\n    }\n    getOverwriteInfo(item, toggleMode) {\n        assertType(this.editor.hasModel());\n        let replace = this.editor.getOption(117 /* EditorOption.suggest */).insertMode === 'replace';\n        if (toggleMode) {\n            replace = !replace;\n        }\n        const overwriteBefore = item.position.column - item.editStart.column;\n        const overwriteAfter = (replace ? item.editReplaceEnd.column : item.editInsertEnd.column) - item.position.column;\n        const columnDelta = this.editor.getPosition().column - item.position.column;\n        const suffixDelta = this._lineSuffix.value ? this._lineSuffix.value.delta(this.editor.getPosition()) : 0;\n        return {\n            overwriteBefore: overwriteBefore + columnDelta,\n            overwriteAfter: overwriteAfter + suffixDelta\n        };\n    }\n    _alertCompletionItem(item) {\n        if (isNonEmptyArray(item.completion.additionalTextEdits)) {\n            const msg = nls.localize('aria.alert.snippet', \"Accepting '{0}' made {1} additional edits\", item.textLabel, item.completion.additionalTextEdits.length);\n            alert(msg);\n        }\n    }\n    triggerSuggest(onlyFrom, auto, noFilter) {\n        if (this.editor.hasModel()) {\n            this.model.trigger({\n                auto: auto !== null && auto !== void 0 ? auto : false,\n                completionOptions: { providerFilter: onlyFrom, kindFilter: noFilter ? new Set() : undefined }\n            });\n            this.editor.revealPosition(this.editor.getPosition(), 0 /* ScrollType.Smooth */);\n            this.editor.focus();\n        }\n    }\n    triggerSuggestAndAcceptBest(arg) {\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const positionNow = this.editor.getPosition();\n        const fallback = () => {\n            if (positionNow.equals(this.editor.getPosition())) {\n                this._commandService.executeCommand(arg.fallback);\n            }\n        };\n        const makesTextEdit = (item) => {\n            if (item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */ || item.completion.additionalTextEdits) {\n                // snippet, other editor -> makes edit\n                return true;\n            }\n            const position = this.editor.getPosition();\n            const startColumn = item.editStart.column;\n            const endColumn = position.column;\n            if (endColumn - startColumn !== item.completion.insertText.length) {\n                // unequal lengths -> makes edit\n                return true;\n            }\n            const textNow = this.editor.getModel().getValueInRange({\n                startLineNumber: position.lineNumber,\n                startColumn,\n                endLineNumber: position.lineNumber,\n                endColumn\n            });\n            // unequal text -> makes edit\n            return textNow !== item.completion.insertText;\n        };\n        Event.once(this.model.onDidTrigger)(_ => {\n            // wait for trigger because only then the cancel-event is trustworthy\n            const listener = [];\n            Event.any(this.model.onDidTrigger, this.model.onDidCancel)(() => {\n                // retrigger or cancel -> try to type default text\n                dispose(listener);\n                fallback();\n            }, undefined, listener);\n            this.model.onDidSuggest(({ completionModel }) => {\n                dispose(listener);\n                if (completionModel.items.length === 0) {\n                    fallback();\n                    return;\n                }\n                const index = this._memoryService.select(this.editor.getModel(), this.editor.getPosition(), completionModel.items);\n                const item = completionModel.items[index];\n                if (!makesTextEdit(item)) {\n                    fallback();\n                    return;\n                }\n                this.editor.pushUndoStop();\n                this._insertSuggestion({ index, item, model: completionModel }, 4 /* InsertFlags.KeepAlternativeSuggestions */ | 1 /* InsertFlags.NoBeforeUndoStop */ | 2 /* InsertFlags.NoAfterUndoStop */);\n            }, undefined, listener);\n        });\n        this.model.trigger({ auto: false, shy: true });\n        this.editor.revealPosition(positionNow, 0 /* ScrollType.Smooth */);\n        this.editor.focus();\n    }\n    acceptSelectedSuggestion(keepAlternativeSuggestions, alternativeOverwriteConfig) {\n        const item = this.widget.value.getFocusedItem();\n        let flags = 0;\n        if (keepAlternativeSuggestions) {\n            flags |= 4 /* InsertFlags.KeepAlternativeSuggestions */;\n        }\n        if (alternativeOverwriteConfig) {\n            flags |= 8 /* InsertFlags.AlternativeOverwriteConfig */;\n        }\n        this._insertSuggestion(item, flags);\n    }\n    acceptNextSuggestion() {\n        this._alternatives.value.next();\n    }\n    acceptPrevSuggestion() {\n        this._alternatives.value.prev();\n    }\n    cancelSuggestWidget() {\n        this.model.cancel();\n        this.model.clear();\n        this.widget.value.hideWidget();\n    }\n    focusSuggestion() {\n        this.widget.value.focusSelected();\n    }\n    selectNextSuggestion() {\n        this.widget.value.selectNext();\n    }\n    selectNextPageSuggestion() {\n        this.widget.value.selectNextPage();\n    }\n    selectLastSuggestion() {\n        this.widget.value.selectLast();\n    }\n    selectPrevSuggestion() {\n        this.widget.value.selectPrevious();\n    }\n    selectPrevPageSuggestion() {\n        this.widget.value.selectPreviousPage();\n    }\n    selectFirstSuggestion() {\n        this.widget.value.selectFirst();\n    }\n    toggleSuggestionDetails() {\n        this.widget.value.toggleDetails();\n    }\n    toggleExplainMode() {\n        this.widget.value.toggleExplainMode();\n    }\n    toggleSuggestionFocus() {\n        this.widget.value.toggleDetailsFocus();\n    }\n    resetWidgetSize() {\n        this.widget.value.resetPersistedSize();\n    }\n    forceRenderingAbove() {\n        this.widget.value.forceRenderingAbove();\n    }\n    stopForceRenderingAbove() {\n        if (!this.widget.isInitialized) {\n            // This method has no effect if the widget is not initialized yet.\n            return;\n        }\n        this.widget.value.stopForceRenderingAbove();\n    }\n    registerSelector(selector) {\n        return this._selectors.register(selector);\n    }\n};\nSuggestController.ID = 'editor.contrib.suggestController';\nSuggestController = SuggestController_1 = __decorate([\n    __param(1, ISuggestMemoryService),\n    __param(2, ICommandService),\n    __param(3, IContextKeyService),\n    __param(4, IInstantiationService),\n    __param(5, ILogService),\n    __param(6, ITelemetryService)\n], SuggestController);\nexport { SuggestController };\nclass PriorityRegistry {\n    constructor(prioritySelector) {\n        this.prioritySelector = prioritySelector;\n        this._items = new Array();\n    }\n    register(value) {\n        if (this._items.indexOf(value) !== -1) {\n            throw new Error('Value is already registered');\n        }\n        this._items.push(value);\n        this._items.sort((s1, s2) => this.prioritySelector(s2) - this.prioritySelector(s1));\n        return {\n            dispose: () => {\n                const idx = this._items.indexOf(value);\n                if (idx >= 0) {\n                    this._items.splice(idx, 1);\n                }\n            }\n        };\n    }\n    get itemsOrderedByPriorityDesc() {\n        return this._items;\n    }\n}\nexport class TriggerSuggestAction extends EditorAction {\n    constructor() {\n        super({\n            id: TriggerSuggestAction.id,\n            label: nls.localize('suggest.trigger.label', \"Trigger Suggest\"),\n            alias: 'Trigger Suggest',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCompletionItemProvider, SuggestContext.Visible.toNegated()),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */, 2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor, args) {\n        const controller = SuggestController.get(editor);\n        if (!controller) {\n            return;\n        }\n        let auto;\n        if (args && typeof args === 'object') {\n            if (args.auto === true) {\n                auto = true;\n            }\n        }\n        controller.triggerSuggest(undefined, auto, undefined);\n    }\n}\nTriggerSuggestAction.id = 'editor.action.triggerSuggest';\nregisterEditorContribution(SuggestController.ID, SuggestController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(TriggerSuggestAction);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 90;\nconst SuggestCommand = EditorCommand.bindToContribution(SuggestController.get);\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptSelectedSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion),\n    handler(x) {\n        x.acceptSelectedSuggestion(true, false);\n    },\n    kbOpts: [{\n            // normal tab\n            primary: 2 /* KeyCode.Tab */,\n            kbExpr: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\n            weight,\n        }, {\n            // accept on enter has special rules\n            primary: 3 /* KeyCode.Enter */,\n            kbExpr: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.AcceptSuggestionsOnEnter, SuggestContext.MakesTextEdit),\n            weight,\n        }],\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.insert', \"Insert\"),\n            group: 'left',\n            order: 1,\n            when: SuggestContext.HasInsertAndReplaceRange.toNegated()\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.insert', \"Insert\"),\n            group: 'left',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert'))\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.replace', \"Replace\"),\n            group: 'left',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace'))\n        }]\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptAlternativeSelectedSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.HasFocusedSuggestion),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n        secondary: [1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */],\n    },\n    handler(x) {\n        x.acceptSelectedSuggestion(false, true);\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert')),\n            title: nls.localize('accept.replace', \"Replace\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace')),\n            title: nls.localize('accept.insert', \"Insert\")\n        }]\n}));\n// continue to support the old command\nCommandsRegistry.registerCommandAlias('acceptSelectedSuggestionOnEnter', 'acceptSelectedSuggestion');\nregisterEditorCommand(new SuggestCommand({\n    id: 'hideSuggestWidget',\n    precondition: SuggestContext.Visible,\n    handler: x => x.cancelSuggestWidget(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n    handler: c => c.selectNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 18 /* KeyCode.DownArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\n        mac: { primary: 18 /* KeyCode.DownArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n    handler: c => c.selectNextPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 12 /* KeyCode.PageDown */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 12 /* KeyCode.PageDown */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectLastSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n    handler: c => c.selectLastSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n    handler: c => c.selectPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 16 /* KeyCode.UpArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\n        mac: { primary: 16 /* KeyCode.UpArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n    handler: c => c.selectPrevPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 11 /* KeyCode.PageUp */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 11 /* KeyCode.PageUp */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectFirstSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n    handler: c => c.selectFirstSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'focusSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion.negate()),\n    handler: x => x.focusSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] }\n    },\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'focusAndAcceptSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion.negate()),\n    handler: c => {\n        c.focusSuggestion();\n        c.acceptSelectedSuggestion(true, false);\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionDetails',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion),\n    handler: x => x.toggleSuggestionDetails(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] }\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible, SuggestContext.CanResolve),\n            title: nls.localize('detail.more', \"show less\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible.toNegated(), SuggestContext.CanResolve),\n            title: nls.localize('detail.less', \"show more\")\n        }]\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleExplainMode',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleExplainMode(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 90 /* KeyCode.Slash */,\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionFocus',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleSuggestionFocus(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 10 /* KeyCode.Space */,\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 10 /* KeyCode.Space */ }\n    }\n}));\n//#region tab completions\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertBestCompletion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), WordContextKey.AtEnd, SuggestContext.Visible.toNegated(), SuggestAlternatives.OtherSuggestions.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: (x, arg) => {\n        x.triggerSuggestAndAcceptBest(isObject(arg) ? Object.assign({ fallback: 'tab' }, arg) : { fallback: 'tab' });\n    },\n    kbOpts: {\n        weight,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertNextSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertPrevSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorAction(class extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.resetSuggestSize',\n            label: nls.localize('suggest.reset.label', \"Reset Suggest Widget Size\"),\n            alias: 'Reset Suggest Widget Size',\n            precondition: undefined\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        (_a = SuggestController.get(editor)) === null || _a === void 0 ? void 0 : _a.resetWidgetSize();\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar EditorContribution_1;\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { RefCountedDisposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { CompletionModel, LineContext } from './completionModel.js';\nimport { CompletionOptions, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nclass SuggestInlineCompletion {\n    constructor(range, insertText, filterText, additionalTextEdits, command, completion) {\n        this.range = range;\n        this.insertText = insertText;\n        this.filterText = filterText;\n        this.additionalTextEdits = additionalTextEdits;\n        this.command = command;\n        this.completion = completion;\n    }\n}\nlet InlineCompletionResults = class InlineCompletionResults extends RefCountedDisposable {\n    constructor(model, line, word, completionModel, completions, _suggestMemoryService) {\n        super(completions.disposable);\n        this.model = model;\n        this.line = line;\n        this.word = word;\n        this.completionModel = completionModel;\n        this._suggestMemoryService = _suggestMemoryService;\n    }\n    canBeReused(model, line, word) {\n        return this.model === model // same model\n            && this.line === line\n            && this.word.word.length > 0\n            && this.word.startColumn === word.startColumn && this.word.endColumn < word.endColumn // same word\n            && this.completionModel.getIncompleteProvider().size === 0; // no incomplete results\n    }\n    get items() {\n        var _a;\n        const result = [];\n        // Split items by preselected index. This ensures the memory-selected item shows first and that better/worst\n        // ranked items are before/after\n        const { items } = this.completionModel;\n        const selectedIndex = this._suggestMemoryService.select(this.model, { lineNumber: this.line, column: this.word.endColumn + this.completionModel.lineContext.characterCountDelta }, items);\n        const first = Iterable.slice(items, selectedIndex);\n        const second = Iterable.slice(items, 0, selectedIndex);\n        let resolveCount = 5;\n        for (const item of Iterable.concat(first, second)) {\n            if (item.score === FuzzyScore.Default) {\n                // skip items that have no overlap\n                continue;\n            }\n            const range = new Range(item.editStart.lineNumber, item.editStart.column, item.editInsertEnd.lineNumber, item.editInsertEnd.column + this.completionModel.lineContext.characterCountDelta // end PLUS character delta\n            );\n            const insertText = item.completion.insertTextRules && (item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)\n                ? { snippet: item.completion.insertText }\n                : item.completion.insertText;\n            result.push(new SuggestInlineCompletion(range, insertText, (_a = item.filterTextLow) !== null && _a !== void 0 ? _a : item.labelLow, item.completion.additionalTextEdits, item.completion.command, item));\n            // resolve the first N suggestions eagerly\n            if (resolveCount-- >= 0) {\n                item.resolve(CancellationToken.None);\n            }\n        }\n        return result;\n    }\n};\nInlineCompletionResults = __decorate([\n    __param(5, ISuggestMemoryService)\n], InlineCompletionResults);\nlet SuggestInlineCompletions = class SuggestInlineCompletions {\n    constructor(_getEditorOption, _languageFeatureService, _clipboardService, _suggestMemoryService) {\n        this._getEditorOption = _getEditorOption;\n        this._languageFeatureService = _languageFeatureService;\n        this._clipboardService = _clipboardService;\n        this._suggestMemoryService = _suggestMemoryService;\n    }\n    provideInlineCompletions(model, position, context, token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (context.selectedSuggestionInfo) {\n                return;\n            }\n            const config = this._getEditorOption(88 /* EditorOption.quickSuggestions */, model);\n            if (QuickSuggestionsOptions.isAllOff(config)) {\n                // quick suggest is off (for this model/language)\n                return;\n            }\n            model.tokenization.tokenizeIfCheap(position.lineNumber);\n            const lineTokens = model.tokenization.getLineTokens(position.lineNumber);\n            const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(position.column - 1 - 1, 0)));\n            if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'inline') {\n                // quick suggest is off (for this token)\n                return undefined;\n            }\n            // We consider non-empty leading words and trigger characters. The latter only\n            // when no word is being typed (word characters superseed trigger characters)\n            let wordInfo = model.getWordAtPosition(position);\n            let triggerCharacterInfo;\n            if (!(wordInfo === null || wordInfo === void 0 ? void 0 : wordInfo.word)) {\n                triggerCharacterInfo = this._getTriggerCharacterInfo(model, position);\n            }\n            if (!(wordInfo === null || wordInfo === void 0 ? void 0 : wordInfo.word) && !triggerCharacterInfo) {\n                // not at word, not a trigger character\n                return;\n            }\n            // ensure that we have word information and that we are at the end of a word\n            // otherwise we stop because we don't want to do quick suggestions inside words\n            if (!wordInfo) {\n                wordInfo = model.getWordUntilPosition(position);\n            }\n            if (wordInfo.endColumn !== position.column) {\n                return;\n            }\n            let result;\n            const leadingLineContents = model.getValueInRange(new Range(position.lineNumber, 1, position.lineNumber, position.column));\n            if (!triggerCharacterInfo && ((_a = this._lastResult) === null || _a === void 0 ? void 0 : _a.canBeReused(model, position.lineNumber, wordInfo))) {\n                // reuse a previous result iff possible, only a refilter is needed\n                // TODO@jrieken this can be improved further and only incomplete results can be updated\n                // console.log(`REUSE with ${wordInfo.word}`);\n                const newLineContext = new LineContext(leadingLineContents, position.column - this._lastResult.word.endColumn);\n                this._lastResult.completionModel.lineContext = newLineContext;\n                this._lastResult.acquire();\n                result = this._lastResult;\n            }\n            else {\n                // refesh model is required\n                const completions = yield provideSuggestionItems(this._languageFeatureService.completionProvider, model, position, new CompletionOptions(undefined, undefined, triggerCharacterInfo === null || triggerCharacterInfo === void 0 ? void 0 : triggerCharacterInfo.providers), triggerCharacterInfo && { triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */, triggerCharacter: triggerCharacterInfo.ch }, token);\n                let clipboardText;\n                if (completions.needsClipboard) {\n                    clipboardText = yield this._clipboardService.readText();\n                }\n                const completionModel = new CompletionModel(completions.items, position.column, new LineContext(leadingLineContents, 0), WordDistance.None, this._getEditorOption(117 /* EditorOption.suggest */, model), this._getEditorOption(111 /* EditorOption.snippetSuggestions */, model), { boostFullMatch: false, firstMatchCanBeWeak: false }, clipboardText);\n                result = new InlineCompletionResults(model, position.lineNumber, wordInfo, completionModel, completions, this._suggestMemoryService);\n            }\n            this._lastResult = result;\n            return result;\n        });\n    }\n    handleItemDidShow(_completions, item) {\n        item.completion.resolve(CancellationToken.None);\n    }\n    freeInlineCompletions(result) {\n        result.release();\n    }\n    _getTriggerCharacterInfo(model, position) {\n        var _a;\n        const ch = model.getValueInRange(Range.fromPositions({ lineNumber: position.lineNumber, column: position.column - 1 }, position));\n        const providers = new Set();\n        for (const provider of this._languageFeatureService.completionProvider.all(model)) {\n            if ((_a = provider.triggerCharacters) === null || _a === void 0 ? void 0 : _a.includes(ch)) {\n                providers.add(provider);\n            }\n        }\n        if (providers.size === 0) {\n            return undefined;\n        }\n        return { providers, ch };\n    }\n};\nSuggestInlineCompletions = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IClipboardService),\n    __param(3, ISuggestMemoryService)\n], SuggestInlineCompletions);\nexport { SuggestInlineCompletions };\nlet EditorContribution = EditorContribution_1 = class EditorContribution {\n    constructor(_editor, languageFeatureService, editorService, instaService) {\n        // HACK - way to contribute something only once\n        if (++EditorContribution_1._counter === 1) {\n            const provider = instaService.createInstance(SuggestInlineCompletions, (id, model) => {\n                var _a;\n                // HACK - reuse the editor options world outside from a \"normal\" contribution\n                const editor = (_a = editorService.listCodeEditors().find(editor => editor.getModel() === model)) !== null && _a !== void 0 ? _a : _editor;\n                return editor.getOption(id);\n            });\n            EditorContribution_1._disposable = languageFeatureService.inlineCompletionsProvider.register('*', provider);\n        }\n    }\n    dispose() {\n        var _a;\n        if (--EditorContribution_1._counter === 0) {\n            (_a = EditorContribution_1._disposable) === null || _a === void 0 ? void 0 : _a.dispose();\n            EditorContribution_1._disposable = undefined;\n        }\n    }\n};\nEditorContribution._counter = 0;\nEditorContribution = EditorContribution_1 = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ICodeEditorService),\n    __param(3, IInstantiationService)\n], EditorContribution);\nregisterEditorContribution('suggest.inlineCompletionsProvider', EditorContribution, 0 /* EditorContributionInstantiation.Eager */); // eager because the contribution is used as a way to ONCE access a service to which a provider is registered\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar SuggestMemoryService_1;\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { TernarySearchTree } from '../../../../base/common/ternarySearchTree.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport class Memory {\n    constructor(name) {\n        this.name = name;\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        const topScore = items[0].score[0];\n        for (let i = 0; i < items.length; i++) {\n            const { score, completion: suggestion } = items[i];\n            if (score[0] !== topScore) {\n                // stop when leaving the group of top matches\n                break;\n            }\n            if (suggestion.preselect) {\n                // stop when seeing an auto-select-item\n                return i;\n            }\n        }\n        return 0;\n    }\n}\nexport class NoMemory extends Memory {\n    constructor() {\n        super('first');\n    }\n    memorize(model, pos, item) {\n        // no-op\n    }\n    toJSON() {\n        return undefined;\n    }\n    fromJSON() {\n        //\n    }\n}\nexport class LRUMemory extends Memory {\n    constructor() {\n        super('recentlyUsed');\n        this._cache = new LRUCache(300, 0.66);\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const key = `${model.getLanguageId()}/${item.textLabel}`;\n        this._cache.set(key, {\n            touch: this._seq++,\n            type: item.completion.kind,\n            insertText: item.completion.insertText\n        });\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        const lineSuffix = model.getLineContent(pos.lineNumber).substr(pos.column - 10, pos.column - 1);\n        if (/\\s$/.test(lineSuffix)) {\n            return super.select(model, pos, items);\n        }\n        const topScore = items[0].score[0];\n        let indexPreselect = -1;\n        let indexRecency = -1;\n        let seq = -1;\n        for (let i = 0; i < items.length; i++) {\n            if (items[i].score[0] !== topScore) {\n                // consider only top items\n                break;\n            }\n            const key = `${model.getLanguageId()}/${items[i].textLabel}`;\n            const item = this._cache.peek(key);\n            if (item && item.touch > seq && item.type === items[i].completion.kind && item.insertText === items[i].completion.insertText) {\n                seq = item.touch;\n                indexRecency = i;\n            }\n            if (items[i].completion.preselect && indexPreselect === -1) {\n                // stop when seeing an auto-select-item\n                return indexPreselect = i;\n            }\n        }\n        if (indexRecency !== -1) {\n            return indexRecency;\n        }\n        else if (indexPreselect !== -1) {\n            return indexPreselect;\n        }\n        else {\n            return 0;\n        }\n    }\n    toJSON() {\n        return this._cache.toJSON();\n    }\n    fromJSON(data) {\n        this._cache.clear();\n        const seq = 0;\n        for (const [key, value] of data) {\n            value.touch = seq;\n            value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n            this._cache.set(key, value);\n        }\n        this._seq = this._cache.size;\n    }\n}\nexport class PrefixMemory extends Memory {\n    constructor() {\n        super('recentlyUsedByPrefix');\n        this._trie = TernarySearchTree.forStrings();\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const { word } = model.getWordUntilPosition(pos);\n        const key = `${model.getLanguageId()}/${word}`;\n        this._trie.set(key, {\n            type: item.completion.kind,\n            insertText: item.completion.insertText,\n            touch: this._seq++\n        });\n    }\n    select(model, pos, items) {\n        const { word } = model.getWordUntilPosition(pos);\n        if (!word) {\n            return super.select(model, pos, items);\n        }\n        const key = `${model.getLanguageId()}/${word}`;\n        let item = this._trie.get(key);\n        if (!item) {\n            item = this._trie.findSubstr(key);\n        }\n        if (item) {\n            for (let i = 0; i < items.length; i++) {\n                const { kind, insertText } = items[i].completion;\n                if (kind === item.type && insertText === item.insertText) {\n                    return i;\n                }\n            }\n        }\n        return super.select(model, pos, items);\n    }\n    toJSON() {\n        const entries = [];\n        this._trie.forEach((value, key) => entries.push([key, value]));\n        // sort by last recently used (touch), then\n        // take the top 200 item and normalize their\n        // touch\n        entries\n            .sort((a, b) => -(a[1].touch - b[1].touch))\n            .forEach((value, i) => value[1].touch = i);\n        return entries.slice(0, 200);\n    }\n    fromJSON(data) {\n        this._trie.clear();\n        if (data.length > 0) {\n            this._seq = data[0][1].touch + 1;\n            for (const [key, value] of data) {\n                value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n                this._trie.set(key, value);\n            }\n        }\n    }\n}\nlet SuggestMemoryService = SuggestMemoryService_1 = class SuggestMemoryService {\n    constructor(_storageService, _configService) {\n        this._storageService = _storageService;\n        this._configService = _configService;\n        this._disposables = new DisposableStore();\n        this._persistSoon = new RunOnceScheduler(() => this._saveState(), 500);\n        this._disposables.add(_storageService.onWillSaveState(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                this._saveState();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._persistSoon.dispose();\n    }\n    memorize(model, pos, item) {\n        this._withStrategy(model, pos).memorize(model, pos, item);\n        this._persistSoon.schedule();\n    }\n    select(model, pos, items) {\n        return this._withStrategy(model, pos).select(model, pos, items);\n    }\n    _withStrategy(model, pos) {\n        var _a;\n        const mode = this._configService.getValue('editor.suggestSelection', {\n            overrideIdentifier: model.getLanguageIdAtPosition(pos.lineNumber, pos.column),\n            resource: model.uri\n        });\n        if (((_a = this._strategy) === null || _a === void 0 ? void 0 : _a.name) !== mode) {\n            this._saveState();\n            const ctor = SuggestMemoryService_1._strategyCtors.get(mode) || NoMemory;\n            this._strategy = new ctor();\n            try {\n                const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n                const scope = share ? 0 /* StorageScope.PROFILE */ : 1 /* StorageScope.WORKSPACE */;\n                const raw = this._storageService.get(`${SuggestMemoryService_1._storagePrefix}/${mode}`, scope);\n                if (raw) {\n                    this._strategy.fromJSON(JSON.parse(raw));\n                }\n            }\n            catch (e) {\n                // things can go wrong with JSON...\n            }\n        }\n        return this._strategy;\n    }\n    _saveState() {\n        if (this._strategy) {\n            const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n            const scope = share ? 0 /* StorageScope.PROFILE */ : 1 /* StorageScope.WORKSPACE */;\n            const raw = JSON.stringify(this._strategy);\n            this._storageService.store(`${SuggestMemoryService_1._storagePrefix}/${this._strategy.name}`, raw, scope, 1 /* StorageTarget.MACHINE */);\n        }\n    }\n};\nSuggestMemoryService._strategyCtors = new Map([\n    ['recentlyUsedByPrefix', PrefixMemory],\n    ['recentlyUsed', LRUMemory],\n    ['first', NoMemory]\n]);\nSuggestMemoryService._storagePrefix = 'suggest/memories';\nSuggestMemoryService = SuggestMemoryService_1 = __decorate([\n    __param(0, IStorageService),\n    __param(1, IConfigurationService)\n], SuggestMemoryService);\nexport { SuggestMemoryService };\nexport const ISuggestMemoryService = createDecorator('ISuggestMemories');\nregisterSingleton(ISuggestMemoryService, SuggestMemoryService, 1 /* InstantiationType.Delayed */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { binarySearch, isFalsyOrEmpty } from '../../../../base/common/arrays.js';\nimport { Range } from '../../../common/core/range.js';\nimport { BracketSelectionRangeProvider } from '../../smartSelect/browser/bracketSelections.js';\nexport class WordDistance {\n    static create(service, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.getOption(117 /* EditorOption.suggest */).localityBonus) {\n                return WordDistance.None;\n            }\n            if (!editor.hasModel()) {\n                return WordDistance.None;\n            }\n            const model = editor.getModel();\n            const position = editor.getPosition();\n            if (!service.canComputeWordRanges(model.uri)) {\n                return WordDistance.None;\n            }\n            const [ranges] = yield new BracketSelectionRangeProvider().provideSelectionRanges(model, [position]);\n            if (ranges.length === 0) {\n                return WordDistance.None;\n            }\n            const wordRanges = yield service.computeWordRanges(model.uri, ranges[0].range);\n            if (!wordRanges) {\n                return WordDistance.None;\n            }\n            // remove current word\n            const wordUntilPos = model.getWordUntilPosition(position);\n            delete wordRanges[wordUntilPos.word];\n            return new class extends WordDistance {\n                distance(anchor, item) {\n                    if (!position.equals(editor.getPosition())) {\n                        return 0;\n                    }\n                    if (item.kind === 17 /* CompletionItemKind.Keyword */) {\n                        return 2 << 20;\n                    }\n                    const word = typeof item.label === 'string' ? item.label : item.label.label;\n                    const wordLines = wordRanges[word];\n                    if (isFalsyOrEmpty(wordLines)) {\n                        return 2 << 20;\n                    }\n                    const idx = binarySearch(wordLines, Range.fromPositions(anchor), Range.compareRangesUsingStarts);\n                    const bestWordRange = idx >= 0 ? wordLines[idx] : wordLines[Math.max(0, ~idx - 1)];\n                    let blockDistance = ranges.length;\n                    for (const range of ranges) {\n                        if (!Range.containsRange(range.range, bestWordRange)) {\n                            break;\n                        }\n                        blockDistance -= 1;\n                    }\n                    return blockDistance;\n                }\n            };\n        });\n    }\n}\nWordDistance.None = new class extends WordDistance {\n    distance() { return 0; }\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './symbolIcons.css';\nimport { localize } from '../../../../nls.js';\nimport { foreground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nexport const SYMBOL_ICON_ARRAY_FOREGROUND = registerColor('symbolIcon.arrayForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.arrayForeground', 'The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_BOOLEAN_FOREGROUND = registerColor('symbolIcon.booleanForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.booleanForeground', 'The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CLASS_FOREGROUND = registerColor('symbolIcon.classForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.classForeground', 'The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_COLOR_FOREGROUND = registerColor('symbolIcon.colorForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.colorForeground', 'The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTANT_FOREGROUND = registerColor('symbolIcon.constantForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.constantForeground', 'The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTRUCTOR_FOREGROUND = registerColor('symbolIcon.constructorForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.constructorForeground', 'The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_FOREGROUND = registerColor('symbolIcon.enumeratorForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.enumeratorForeground', 'The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND = registerColor('symbolIcon.enumeratorMemberForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.enumeratorMemberForeground', 'The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_EVENT_FOREGROUND = registerColor('symbolIcon.eventForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.eventForeground', 'The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FIELD_FOREGROUND = registerColor('symbolIcon.fieldForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.fieldForeground', 'The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FILE_FOREGROUND = registerColor('symbolIcon.fileForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.fileForeground', 'The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FOLDER_FOREGROUND = registerColor('symbolIcon.folderForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.folderForeground', 'The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FUNCTION_FOREGROUND = registerColor('symbolIcon.functionForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.functionForeground', 'The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_INTERFACE_FOREGROUND = registerColor('symbolIcon.interfaceForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.interfaceForeground', 'The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEY_FOREGROUND = registerColor('symbolIcon.keyForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.keyForeground', 'The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEYWORD_FOREGROUND = registerColor('symbolIcon.keywordForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.keywordForeground', 'The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_METHOD_FOREGROUND = registerColor('symbolIcon.methodForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.methodForeground', 'The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_MODULE_FOREGROUND = registerColor('symbolIcon.moduleForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.moduleForeground', 'The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NAMESPACE_FOREGROUND = registerColor('symbolIcon.namespaceForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.namespaceForeground', 'The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NULL_FOREGROUND = registerColor('symbolIcon.nullForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.nullForeground', 'The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NUMBER_FOREGROUND = registerColor('symbolIcon.numberForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.numberForeground', 'The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OBJECT_FOREGROUND = registerColor('symbolIcon.objectForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.objectForeground', 'The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OPERATOR_FOREGROUND = registerColor('symbolIcon.operatorForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.operatorForeground', 'The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PACKAGE_FOREGROUND = registerColor('symbolIcon.packageForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.packageForeground', 'The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PROPERTY_FOREGROUND = registerColor('symbolIcon.propertyForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.propertyForeground', 'The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_REFERENCE_FOREGROUND = registerColor('symbolIcon.referenceForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.referenceForeground', 'The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_SNIPPET_FOREGROUND = registerColor('symbolIcon.snippetForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.snippetForeground', 'The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRING_FOREGROUND = registerColor('symbolIcon.stringForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.stringForeground', 'The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRUCT_FOREGROUND = registerColor('symbolIcon.structForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.structForeground', 'The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TEXT_FOREGROUND = registerColor('symbolIcon.textForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.textForeground', 'The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TYPEPARAMETER_FOREGROUND = registerColor('symbolIcon.typeParameterForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.typeParameterForeground', 'The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_UNIT_FOREGROUND = registerColor('symbolIcon.unitForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.unitForeground', 'The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_VARIABLE_FOREGROUND = registerColor('symbolIcon.variableForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC',\n}, localize('symbolIcon.variableForeground', 'The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\n"],"names":["ModelProvider","Status","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","StickyScrollWidgetState","startLineNumbers","endLineNumbers","lastLineRelativePosition","showEndForLine","arguments","length","undefined","_classCallCheck","this","_createClass","key","other","equals","_ttPolicy","createTrustedTypesPolicy","createHTML","STICKY_INDEX_ATTR","STICKY_IS_LINE_ATTR","STICKY_IS_FOLDING_ICON_ATTR","StickyScrollWidget","_Disposable","_inherits","_super","_createSuper","_editor","_this","call","_foldingIconStore","DisposableStore","_rootDomNode","document","createElement","_lineNumbersDomNode","_linesDomNodeScrollable","_linesDomNode","_lineHeight","getOption","_stickyLines","_lineNumbers","_lastLineRelativePosition","_minContentWidthInPx","_isOnGlyphMargin","className","setAttribute","appendChild","classList","toggle","EmbeddedCodeEditorWidget","updateScrollLeftPosition","style","left","scrollWithEditor","concat","getScrollLeft","_register","onDidChangeConfiguration","hasChanged","onDidScrollChange","scrollLeftChanged","scrollWidthChanged","_updateWidgetWidth","onDidChangeModel","onDidLayoutChange","get","lineNumber","find","stickyLine","state","foldingModel","rebuildFromLine","Infinity","_previousState","previousStickyLines","_clearStickyWidget","_getViewModel","lineNumbers","_toConsumableArray","_renderRootNode","layoutInfo","getLayoutInfo","lineNumbersWidth","contentLeft","width","setProperty","getScrollWidth","verticalScrollbarWidth","clear","dom","clearNode","display","requireTransitions","allVisible","_step","_iterator","_createForOfIteratorHelper","s","n","foldingIcon","setVisible","isCollapsed","err","f","_regeneratorRuntime","mark","_callee","_iterator2","_step2","_step2$value","index","line","previousStickyLine","widgetHeight","wrap","_context","prev","entries","_slicedToArray","_renderChildNode","_updateTopAndZIndexOfStickyLine","abrupt","lineDomNode","lineNumberDomNode","push","t0","finish","_setFoldingHoverListeners","_useFoldingOpacityTransition","height","marginLeft","_updateMinContentWidth","layoutOverlayWidget","stop","_this2","add","addDisposableListener","EventType","MOUSE_ENTER","_setFoldingIconsVisibility","MOUSE_LEAVE","viewModel","actualInlineDecorations","viewLineNumber","coordinatesConverter","convertModelPositionToViewPosition","Position","lineRenderingData","getViewLineRenderingData","lineNumberOption","LineDecoration","filter","inlineDecorations","minColumn","maxColumn","newLine","renderLineInput","RenderLineInput","content","continuesWithWrappedLine","isBasicASCII","containsRTL","tokens","tabSize","startVisibleColumn","sb","StringBuilder","renderOutput","renderViewLine","build","lineHTMLNode","String","tabIndex","lineHeight","innerHTML","lineNumberHTMLNode","innerLineNumberHTML","renderType","innerText","toString","Math","abs","getPosition","paddingLeft","lineNumbersLeft","_renderFoldingIconForLine","domNode","applyFontInfo","renderedLine","RenderedStickyLine","characterMapping","_a","isLastLine","zIndex","lastLineTop","intermediateLineTop","top","showFoldingControls","foldingRegions","regions","indexOfFoldingRegion","findRange","startLineNumber","getStartLineNumber","StickyFoldingIcon","getEndLineNumber","_step3","_iterator3","scrollWidth","preference","focus","spanDomNode","children","renderedStickyLine","_getRenderedStickyLineFromChildDomNode","column","getColumnOfNodeOffset","_b","getLineIndexFromChildDomNode","lineIndex","_getAttributeValue","parseInt","attribute","getAttribute","parentElement","Disposable","foldingStartLine","foldingEndLine","dimension","ThemeIcon","asClassName","foldingCollapsedIcon","foldingExpandedIcon","visible","cursor","opacity","StickyRange","endLineNumber","StickyElement","range","parent","StickyModel","uri","version","element","outlineProviderId","__decorate","decorators","target","desc","d","c","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","StickyModelProvider","_languageConfigurationService","_languageFeaturesService","defaultModel","_modelProviders","_modelPromise","_updateScheduler","Delayer","_updateOperation","stickyModelFromCandidateOutlineProvider","StickyModelFromCandidateOutlineProvider","stickyModelFromSyntaxFoldingProvider","StickyModelFromCandidateSyntaxFoldingProvider","stickyModelFromIndentationFoldingProvider","StickyModelFromCandidateIndentationFoldingProvider","OUTLINE_MODEL","FOLDING_PROVIDER_MODEL","INDENTATION_MODEL","cancel","textModel","textModelVersionId","token","_callee2","_context2","dispose","_cancelModelPromise","trigger","modelProvider","_modelProvider$comput","statusPromise","modelPromise","status","computeStickyModel","sent","CANCELED","VALID","stickyModel","t1","catch","error","onUnexpectedError","ILanguageConfigurationService","ILanguageFeaturesService","StickyModelCandidateProvider","_stickyModel","INVALID","modelVersionId","_this3","isCancellationRequested","isProviderValid","_invalid","providerModelPromise","createCancelablePromise","createModelFromProvider","providerModel","isModelValid","createStickyModel","model","_StickyModelCandidate","_super2","_this4","OutlineModel","create","documentSymbolProvider","_this$_stickyModelFro","_stickyModelFromOutlineModel","stickyOutlineElement","providerID","size","outlineModel","preferredProvider","outlineElements","_this5","Iterable","first","values","OutlineGroup","provider","outlineGroupOfModel","id","tempID","maxTotalSumOfRanges","optimalOutlineGroup","outlineGroup","totalSumRanges","_findSumOfRangesOfGroup","stickyChildren","outlineElementsArray","Array","from","sort","element1","element2","range1","symbol","range2","_comparator","outlineElement","_stickyModelFromOutlineElement","selectionRange","previousStartLine","_step4","_this6","_iterator4","child","_step5","_iterator5","subchild","child1","child2","outline","_step6","res","_iterator6","OutlineElement","StickyModelFromCandidateFoldingProvider","_StickyModelCandidate2","_super3","editor","_this7","_foldingLimitReporter","RangesLimitReporter","foldingElement","_fromFoldingRegions","orderedStickyElements","parentIndex","getParentIndex","parentNode","_StickyModelFromCandi","_super4","_this8","IndentRangeProvider","compute","_StickyModelFromCandi2","_super5","_this9","FoldingController","getFoldingRangeProviders","_this10","selectedProviders","SyntaxRangeProvider","StickyLineCandidate","nestingDepth","StickyLineCandidateProvider","_onDidChangeStickyScroll","Emitter","onDidChangeStickyScroll","event","_options","_model","_cts","_stickyModelProvider","_sessionStore","_updateSoon","RunOnceScheduler","update","readConfiguration","enabled","fire","onDidChangeHiddenAreas","onDidChangeModelContent","schedule","onDidChange","CancellationTokenSource","updateStickyModel","hasModel","getModel","isTooLargeForTokenization","getVersionId","depth","lastStartLineNumber","lastLine","childrenStartLines","lowerBound","updateIndex","binarySearch","a","b","upperBound","childStartLine","childEndLine","getCandidateStickyLinesIntersectingFromStickyModel","stickyLineCandidates","hiddenRanges","getHiddenAreas","_loop","hiddenRange","StickyScrollController_1","StickyScrollController","_contextMenuService","_instaService","_languageFeatureDebounceService","_contextKeyService","_foldingModel","_maxStickyLines","Number","MAX_SAFE_INTEGER","_candidateDefinitionsLength","_focusedStickyElementIndex","_enabled","_focused","_positionRevealed","_onMouseDown","_endLineNumbers","_showEndForLine","_stickyScrollWidget","_stickyLineCandidateProvider","_widgetState","_readConfiguration","stickyScrollDomNode","getDomNode","CONTEXT_MENU","_assertThisInitialized","_onContextMenu","_stickyScrollFocusedContextKey","EditorContextKeys","stickyScrollFocused","bindTo","_stickyScrollVisibleContextKey","stickyScrollVisible","focusTracker","trackFocus","onDidBlur","_","clientHeight","_disposeFocusStickyScrollStore","onDidFocus","_registerMouseListeners","MOUSE_DOWN","set","_focusDisposableStore","focusLineWithIndex","lineNumberCount","_focusNav","direction","_revealPosition","position","_reveaInEditor","revealPosition","revealLineInCenterIfOutsideViewport","revealFunction","setSelection","Range","fromPositions","sessionStore","gesture","ClickLinkGesture","extractLineNumberFromMouseEvent","getEditorPositionFromNode","getMouseEventTarget","mouseEvent","type","detail","getId","mouseTargetElement","textElement","stickyScrollWidgetDomNode","addStandardDisposableListener","CLICK","ctrlKey","altKey","metaKey","leftButton","shiftKey","_revealLineInCenterIfOutsideViewport","isInFoldingIconDomNode","getLineNumberFromChildDomNode","_toggleFoldingRegionForLine","isInStickyLine","MOUSE_MOVE","currentEndForLineIndex","_renderStickyScroll","onMouseMoveOrRelevantKeyDown","_ref","_ref2","mouseTarget","hasTriggerModifier","equalsRange","_stickyRangeProjectedOnEditor","textDecoration","currentHTMLChild","cancellationToken","toDisposable","getDefinitionsAtPosition","definitionProvider","startColumn","candidateDefinitions","childHTML","onCancel","onExecute","invokeFunction","goToDefinitionWithLocation","StandardMouseEvent","showContextMenu","menuId","MenuId","StickyScrollContext","getAnchor","getStickyLineForLine","toggleCollapseState","MAX_VALUE","scrollTop","getTopForLineNumber","setScrollTop","options","removeOverlayWidget","addOverlayWidget","scrollTopChanged","_onDidResize","onDidChangeModelTokens","_onTokensChange","onDidChangeCursorPosition","stickyLineNumbers","getCurrentLines","stickyLineNumber","ranges","fromLineNumber","toLineNumber","_needsUpdate","theoreticalLines","round","_callee3","stickyLineVersion","focusedStickyElementLineNumber","_context3","setState","getFoldingModel","t2","findScrollWidgetState","includes","maxNumberStickyLines","min","maxLineCount","getScrollTop","arrayVisibleRanges","getVisibleRanges","fullVisibleRange","candidateRanges","getCandidateStickyLinesIntersecting","start","end","topOfElementAtDepth","bottomOfElementAtDepth","bottomOfBeginningLine","getBottomForLineNumber","topOfEndLine","bottomOfEndLine","_get","_getPrototypeOf","prototype","getContribution","ID","IContextMenuService","IInstantiationService","ILanguageFeatureDebounceService","IContextKeyService","ToggleStickyScroll","_Action","title","localize","mnemonicTitle","comment","original","category","Categories","View","toggled","condition","ContextKeyExpr","menu","CommandPalette","MenubarAppearanceMenu","group","order","accessor","configurationService","newValue","IConfigurationService","getValue","updateValue","Action2","weight","FocusStickyScroll","_EditorAction","precondition","and","has","_accessor","EditorAction2","SelectNextStickyScrollLine","_EditorAction2","isEqualTo","keybinding","primary","focusNext","SelectPreviousStickyScrollLine","_EditorAction3","focusPrevious","GoToStickyScrollLine","_EditorAction4","goToFocused","SelectEditor","_EditorAction5","_super6","selectEditor","registerEditorContribution","registerAction2","LineContext","leadingLineContent","characterCountDelta","CompletionModel","items","lineContext","wordDistance","snippetSuggestions","fuzzyScoreOptions","FuzzyScoreOptions","default","clipboardText","_snippetCompareFn","_compareCompletionItems","_items","_column","_wordDistance","_refilterKind","_lineContext","_fuzzyScoreOptions","_compareCompletionItemsSnippetsUp","_compareCompletionItemsSnippetsDown","_filteredItems","_ensureCachedState","_itemsByProvider","Set","getItemsByProvider","_step$value","container","incomplete","_stats","_createCachedState","Map","labelLengths","_this$_lineContext","word","wordLow","source","scoreFn","filterGraceful","fuzzyScore","fuzzyScoreGracefulAggressive","item","isInvalid","arr","overwriteBefore","editStart","wordLen","slice","toLowerCase","score","FuzzyScore","Default","wordPos","ch","charCodeAt","completion","filterText","match","filterTextLow","compareIgnoreCase","textLabel","anyScore","labelLow","idx","distance","pLabelLen","quickSelect","kind","_snippetSuggestSupport","Context","Visible","historyNavigationVisible","HasFocusedSuggestion","RawContextKey","DetailsVisible","MultipleSuggestions","MakesTextEdit","AcceptSuggestionsOnEnter","HasInsertAndReplaceRange","InsertMode","description","CanResolve","suggestWidgetStatusbarMenu","CompletionItem","label","sortTextLow","sortText","extensionId","isIRange","editInsertEnd","endColumn","editReplaceEnd","spansMultipleLines","insert","replace","resolveCompletionItem","_resolveCache","_resolveDuration","sub","sw","onCancellationRequested","StopWatch","assign","elapsed","isCancellationError","finally","CompletionOptions","snippetSortOrder","kindFilter","providerFilter","providerItemsToReuse","showDeprecated","getSnippetSuggestSupport","CompletionItemModel","needsClipboard","durations","disposable","provideSuggestionItems","registry","context","triggerKind","CancellationToken","None","_callee4","defaultReplaceRange","defaultRange","disposables","onCompletionList","snippetCompletions","_context5","clone","getWordAtPosition","setEndPosition","_c","didAddResult","suggestions","suggestion","tags","insertTextRules","SnippetParser","guessNeedsClipboard","insertText","isDisposable","providerName","_debugDisplayName","elapsedProvider","duration","elapsedOverall","reuseItems","list","forEach","provideCompletionItems","orderedGroups","providerGroup","_context4","all","map","_sw","onUnexpectedExternalError","delegateYield","CancellationError","snippetConfig","_snippetComparators","defaultComparator","showSimpleSuggestions","triggerSuggest","CommandsRegistry","registerCommand","_len","args","_key","_callee5","triggerCharacter","maxItemsToResolve","_accessor$get","completionProvider","ref","_result","resolving","actualPosition","completions","_context6","assertType","URI","isUri","isIPosition","ITextModelService","createModelReference","object","textEditorModel","validatePosition","setTimeout","QuickSuggestionsOptions","config","comments","strings","tokenType","WordContextKey_1","WordContextKey","contextKeyService","_ckAtEnd","AtEnd","_configListener","_update","_selectionListener","reset","checkForWordEnd","selection","getSelection","getStartPosition","onDidChangeCursorSelection","SuggestAlternatives_1","SuggestAlternatives","_index","_ckOtherSuggestions","OtherSuggestions","_listener","_acceptNext","_ignore","acceptNext","_moveIndex","_move","fwd","newIndex","rounds","additionalTextEdits","SuggestModel_1","CommitCharacterController","widget","accept","_disposables","onDidSuggest","completionModel","onDidCancel","onDidShow","_onItem","getFocusedItem","onDidHide","onWillType","text","_active","isFrozen","acceptCharacters","selected","isNonEmptyArray","commitCharacters","CharacterSet","triggerOptions","getLineContent","substr","leadingWord","getWordUntilPosition","pos","tokenization","tokenizeIfCheap","isNaN","SuggestModel","_editorWorkerService","_clipboardService","_telemetryService","_logService","_configurationService","_envService","_toDispose","_triggerCharacterListener","_triggerQuickSuggest","TimeoutTimer","_triggerState","_completionDisposables","_onDidCancel","_onDidTrigger","_onDidSuggest","onDidTrigger","_telemetryGate","_currentSelection","Selection","_updateTriggerCharacters","onDidChangeModelLanguage","_updateActiveSuggestSession","editorIsComposing","onDidCompositionStart","onDidCompositionEnd","_onCompositionEnd","_onCursorChange","_refilterCompletionItems","supportsByTriggerCharacter","support","triggerCharacters","checkTriggerCharacter","Boolean","getContextKeyValue","suppressSuggestions","InlineCompletionContextKeys","canShowSuggestOnTriggerCharacters","shouldAutoTrigger","lastChar","isLowSurrogate","isHighSurrogate","charAt","supports","_completionModel","auto","retrigger","completionOptions","onDidType","_requestToken","prevSelection","isEmpty","reason","containsRange","getEndPosition","isBeforeOrEqual","_doTriggerQuickSuggest","isAllOff","snippetsPreventQuickSuggestions","SnippetController2","isInSnippet","cancelAndSet","hasWidgetFocus","isAllOn","lineTokens","getLineTokens","getStandardTokenType","findTokenIndexAtOffset","max","valueFor","inlineSuggestionVisible","canShowQuickSuggest","ctx","refilter","_onNewContext","_d","_e","_f","shy","suggestCtx","_SuggestModel_1$_crea","_createSuggestFilter","itemKindFilter","itemKind","WordDistance","_g","fuzzySearchOptions","readText","firstMatchCanBeWeak","matchOnWordStartOnly","_reportDurationsTelemetry","isBuilt","isExtensionDevelopment","warn","publicLog2","data","JSON","stringify","debug","getLeadingWhitespace","getIncompleteProvider","_step5$value","oldLineContext","suggestOptions","showMethods","showFunctions","showConstructors","showFields","showVariables","showClasses","showStructs","showInterfaces","showModules","showProperties","showEvents","showOperators","showUnits","showValues","showConstants","showEnums","showEnumMembers","showKeywords","showWords","showColors","showFiles","showReferences","showFolders","showTypeParameters","showSnippets","showUsers","showIssues","IEditorWorkerService","IClipboardService","ITelemetryService","ILogService","IEnvironmentService","OvertypingCapturer","suggestModel","_lastOvertyped","_locked","selections","getSelections","selectionsLength","willOvertype","getValueLengthInRange","_maxSelectionLength","getValueInRange","multiline","StatusBarViewItem","_MenuEntryActionViewI","kb","_keybindingService","lookupKeybinding","_action","textContent","symbolPrintEnter","getLabel","MenuEntryActionViewItem","SuggestWidgetStatus","_menuId","instantiationService","_menuService","_menuDisposables","append","$","actionViewItemProvider","action","MenuItemAction","createInstance","_leftActions","ActionBar","_rightActions","remove","createMenu","right","getActions","actions","renderMenu","IMenuService","canExpandCompletionItem","documentation","SuggestDetailsWidget","instaService","_onDidClose","onDidClose","_onDidChangeContents","onDidChangeContents","_renderDisposeable","_borderWidth","_size","Dimension","_markdownRenderer","MarkdownRenderer","_body","_scrollbar","DomScrollableElement","alwaysConsumeMouseWheel","_header","_close","asCSSSelector","Codicon","close","nls","_type","_docs","_configureFont","getOptions","fontInfo","fontFamily","getMassagedFontFamily","fontSize","fontWeight","fontSizePx","lineHeightPx","fontFeatureSettings","borderWidth","borderHeight","verticalPadding","horizontalPadding","layout","explainMode","_item$completion","md","join","MarkdownString","appendCodeblock","cappedDetail","show","test","hide","renderedContents","render","onDidRenderAsync","userSelect","onmousedown","preventDefault","stopPropagation","onclick","clearContents","newSize","scanDomNode","much","scrollHeight","scrollDown","scrollUp","SuggestDetailsOverlay","topLeftNow","sizeNow","_added","_preferAlignAtTop","_resizable","ResizableHTMLElement","enableSashes","deltaTop","deltaLeft","onDidWillResize","_topLeft","onDidResize","updateTopLeft","west","north","_applyTopLeft","_userSize","_anchorBox","_placeAtAnchor","sessionEnded","clearSashHoverState","anchor","preferAlignAtTop","anchorBox","getBoundingClientRect","alignAtTop","maxSize","bodyBox","getClientArea","ownerDocument","body","info","defaultMinSize","defaultTop","eastPlacement","maxSizeTop","maxSizeBottom","with","fit","minSize","placements","placement","p","bottom","maxHeight","topLeft","getAriaId","suggestMoreInfoIcon","registerIcon","chevronRight","_completionItemColor","ColorExtractor","out","_regexStrict","_regexRelaxed","exec","RegExp","ItemRenderer","_modelService","_languageService","_themeService","_onDidToggleDetails","onDidToggleDetails","templateId","root","icon","colorspan","main","iconContainer","iconLabel","IconLabel","supportHighlights","supportIcons","parametersLabel","qualifierLabel","detailsLabel","readMore","configureFont","letterSpacing","letterSpacingPx","backgroundColor","labelOptions","labelEscapeNewLines","matches","createMatches","color","extract","getFileIconTheme","hasFileIcons","labelClasses","getIconClasses","scheme","path","FileKind","FILE","detailClasses","extraClasses","hasFolderIcons","FOLDER","flat","_data$iconContainer$c","asClassNameArray","CompletionItemKinds","toIcon","indexOf","setLabel","stripNewLines","showInlineDetails","templateData","str","IModelService","ILanguageService","IThemeService","SuggestWidget_1","registerColor","dark","editorWidgetBackground","light","hcDark","hcLight","editorWidgetBorder","editorSuggestWidgetForeground","editorForeground","quickInputListFocusForeground","quickInputListFocusIconForeground","editorSuggestWidgetSelectedBackground","quickInputListFocusBackground","listHighlightForeground","listFocusHighlightForeground","transparent","PersistedWidgetSize","_service","getEditorType","raw","obj","parse","is","lift","store","SuggestWidget","_storageService","_state","_isAuto","_pendingLayout","MutableDisposable","_pendingShowDetails","_ignoreFocusEvents","_forceRenderingAbove","_explainMode","_showTimeout","_onDidSelect","PauseableEmitter","_onDidFocus","_onDidHide","_onDidShow","onDidSelect","_onDetailsKeydown","onDetailsKeyDown","_contentWidget","SuggestContentWidget","_persistedSize","ResizeState","persistedSize","currentSize","persistHeight","persistWidth","lockPreference","restore","_resize","south","east","_this$getLayoutInfo","itemHeight","defaultSize","threshold","_this$element$size","unlockPreference","_messageElement","_listElement","details","toggleDetails","_details","applyIconStyle","showIcons","renderer","_list","List","getHeight","_element","getTemplateId","useShadows","mouseSupport","multipleSelectionSupport","accessibilityProvider","getRole","getWidgetAriaLabel","getWidgetRole","getAriaLabel","_item$completion$labe","isResolved","_isDetailsVisible","docs","getListStyles","listInactiveFocusBackground","listInactiveFocusOutline","activeContrastBorder","_status","applyStatusBarStyle","showStatusBar","onDidColorThemeChange","t","_onThemeChange","getColorTheme","onMouseDown","_onListMouseDownOrTap","onTap","onDidChangeSelection","_onListSelection","onDidChangeFocus","_onListFocus","_onCursorSelectionChanged","_ctxSuggestWidgetVisible","SuggestContext","_ctxSuggestWidgetDetailsVisible","_ctxSuggestWidgetMultipleSuggestions","_ctxSuggestWidgetHasFocusedSuggestion","_onEditorMouseDown","_loadingTimeout","contains","browserEvent","_select","elements","indexes","theme","isHighContrast","_currentSuggestionDetails","_focusedItem","setAriaOptions","activeDescendant","reveal","loading","disposableTimeout","showDetails","splice","setFocus","_cappedHeight","LOADING_MESSAGE","_show","NO_SUGGESTIONS_MESSAGE","_layout","delay","setPosition","_setState","selectionIndex","isAuto","noFocus","visibleCount","pause","resume","runAtThisOrScheduleAtNextAnimationFrame","pageDown","focusNextPage","scrollBottom","focusLast","pageUp","focusPreviousPage","focusFirst","getFocus","getFocusedElements","_setDetailsVisible","renderLoading","renderItem","_positionDetails","dim","minPersistedHeight","ceil","setPreference","maxWidth","preferredWidth","stats","typicalHalfwidthCharacterWidth","fullHeight","statusBarHeight","contentHeight","minHeight","editorBox","getDomNodePagePosition","cursorBox","getScrolledVisiblePosition","cursorBottom","maxHeightBelow","availableSpaceAbove","maxHeightAbove","capped","wanted","preferredSize","_this$element$maxSize","placeAtAnchor","clamp","getBoolean","IStorageService","SuggestController_1","_widget","allowEditorOverflow","suppressMouseDown","_preferenceLocked","_hidden","removeContentWidget","addContentWidget","layoutContentWidget","_position","_preference","_this$_widget$element","_this$_widget$getLayo","_afterRender","LineSuffix","getLineMaxColumn","offset","getOffsetAt","getPositionAt","_marker","deltaDecorations","stickiness","isDisposed","getDecorationRange","SuggestController","_memoryService","_commandService","_instantiationService","_lineSuffix","_selectors","PriorityRegistry","priority","_onWillInsertSuggestItem","onWillInsertSuggestItem","register","select","ctxInsertMode","insertMode","IdleValue","_insertSuggestion","commitCharacterController","ctxMakesTextEdit","ctxHasInsertAndReplace","ctxCanResolve","toKeyCodeChord","KeyCodeChord","platform","isModifierKey","_overtypingCapturer","_alternatives","showTriggered","itemsOrderedByPriorityDesc","selectionMode","showSuggestions","hideWidget","onDidBlurEditorWidget","acceptSuggestionsOnEnter","updateFromConfig","acceptSuggestionOnEnter","flags","snippetController","modelVersionNow","getAlternativeVersionId","tasks","cts","pushUndoStop","getOverwriteInfo","memorize","_commandExectionDuration","_additionalEditsAppliedAsync","isArray","scrollState","StableEditorScrollState","capture","executeEdits","edit","EditOperation","replaceMove","restoreRelativeVerticalPositionOfCursor","docListener","onDidChangeContent","isFlush","changes","change","thisPosition","isBefore","oldFlags","didType","typeListener","some","applied","trace","escape","overwriteAfter","undoStopBefore","undoStopAfter","adjustWhitespace","overtypingCapturer","command","TriggerSuggestAction","_this$_commandService","executeCommand","canUndo","undo","_alertCompletionItem","_reportSuggestionAcceptedTelemetry","itemResolved","commandExectionDuration","additionalEditsAppliedAsync","floor","random","providerId","basenameHash","hash","basename","languageId","getLanguageId","fileExtension","extname","resolveInfo","resolveDuration","commandDuration","additionalEditsAsync","toggleMode","delta","msg","alert","onlyFrom","noFilter","arg","positionNow","fallback","Event","once","listener","any","makesTextEdit","keepAlternativeSuggestions","alternativeOverwriteConfig","focusSelected","selectNext","selectNextPage","selectLast","selectPrevious","selectPreviousPage","selectFirst","toggleExplainMode","toggleDetailsFocus","resetPersistedSize","forceRenderingAbove","isInitialized","stopForceRenderingAbove","selector","ISuggestMemoryService","ICommandService","prioritySelector","Error","s1","s2","alias","writable","hasCompletionItemProvider","toNegated","kbOpts","kbExpr","textInputFocus","secondary","mac","controller","EditorAction","registerEditorAction","SuggestCommand","EditorCommand","bindToContribution","registerEditorCommand","handler","x","acceptSelectedSuggestion","menuOpts","when","registerCommandAlias","cancelSuggestWidget","or","negate","selectNextSuggestion","selectNextPageSuggestion","selectLastSuggestion","selectPrevSuggestion","selectPrevPageSuggestion","selectFirstSuggestion","focusSuggestion","toggleSuggestionDetails","toggleSuggestionFocus","InSnippetMode","triggerSuggestAndAcceptBest","isObject","acceptNextSuggestion","acceptPrevSuggestion","_class","resetWidgetSize","EditorContribution_1","SuggestInlineCompletion","InlineCompletionResults","_RefCountedDisposable","_suggestMemoryService","selectedIndex","second","resolveCount","snippet","RefCountedDisposable","SuggestInlineCompletions","_getEditorOption","_languageFeatureService","wordInfo","triggerCharacterInfo","leadingLineContents","newLineContext","selectedSuggestionInfo","_getTriggerCharacterInfo","_lastResult","canBeReused","acquire","providers","boostFullMatch","_completions","release","EditorContribution","languageFeatureService","editorService","_counter","listCodeEditors","_disposable","inlineCompletionsProvider","ICodeEditorService","SuggestMemoryService_1","Memory","name","topScore","_items$i","preselect","NoMemory","_Memory","LRUMemory","_Memory2","_cache","LRUCache","_seq","touch","lineSuffix","indexPreselect","indexRecency","seq","peek","toJSON","fromString","PrefixMemory","_Memory3","_trie","TernarySearchTree","forStrings","findSubstr","_items$i$completion","SuggestMemoryService","_configService","_persistSoon","_saveState","onWillSaveState","WillSaveStateReason","SHUTDOWN","_withStrategy","mode","overrideIdentifier","getLanguageIdAtPosition","resource","_strategy","ctor","_strategyCtors","scope","_storagePrefix","fromJSON","createDecorator","registerSingleton","service","_yield$BracketSelecti","_yield$BracketSelecti2","wordRanges","wordUntilPos","localityBonus","canComputeWordRanges","BracketSelectionRangeProvider","provideSelectionRanges","computeWordRanges","_WordDistance","wordLines","isFalsyOrEmpty","compareRangesUsingStarts","bestWordRange","blockDistance","_WordDistance2","_class2","foreground"],"sourceRoot":""}