{"version":3,"file":"static/js/monaco-editor-vendor.4c895aa2.add2ad76.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor.contribution.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/inlineDiffMargin.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget2/decorations.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget2/movedBlocksLines.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget2/utils.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget2/diffEditorDecorations.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget2/diffEditorSash.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget2/diffEditorViewModel.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget2/inlineDiffDeletedCodeMargin.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget2/renderLines.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget2/lineAlignment.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget2/overviewRulerPart.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget2/unchangedRanges.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget2/delegatingEditorImpl.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget2/diffEditorEditors.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget2/diffEditorOptions.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget2/accessibleDiffViewer.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget2/colors.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget2/diffEditorWidget2.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffNavigator.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffReview.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/embeddedCodeEditorWidget.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/workerBasedDocumentDiffProvider.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { localize } from '../../../nls.js';\nimport { Action2, MenuId, MenuRegistry, registerAction2 } from '../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\nconst accessibleDiffViewerCategory = {\n    value: localize('accessibleDiffViewer', 'Accessible Diff Viewer'),\n    original: 'Accessible Diff Viewer',\n};\nexport class AccessibleDiffViewerNext extends Action2 {\n    constructor() {\n        super({\n            id: AccessibleDiffViewerNext.id,\n            title: { value: localize('editor.action.accessibleDiffViewer.next', \"Go to Next Difference\"), original: 'Go to Next Difference' },\n            category: accessibleDiffViewerCategory,\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            keybinding: {\n                primary: 65 /* KeyCode.F7 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            f1: true,\n        });\n    }\n    run(accessor) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        diffEditor === null || diffEditor === void 0 ? void 0 : diffEditor.accessibleDiffViewerNext();\n    }\n}\nAccessibleDiffViewerNext.id = 'editor.action.accessibleDiffViewer.next';\nMenuRegistry.appendMenuItem(MenuId.EditorTitle, {\n    command: {\n        id: AccessibleDiffViewerNext.id,\n        title: localize('Open Accessible Diff Viewer', \"Open Accessible Diff Viewer\"),\n    },\n    order: 10,\n    group: '2_diff',\n    when: ContextKeyExpr.and(EditorContextKeys.accessibleDiffViewerVisible.negate(), ContextKeyExpr.has('isInDiffEditor')),\n});\nexport class AccessibleDiffViewerPrev extends Action2 {\n    constructor() {\n        super({\n            id: AccessibleDiffViewerPrev.id,\n            title: { value: localize('editor.action.accessibleDiffViewer.prev', \"Go to Previous Difference\"), original: 'Go to Previous Difference' },\n            category: accessibleDiffViewerCategory,\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            keybinding: {\n                primary: 1024 /* KeyMod.Shift */ | 65 /* KeyCode.F7 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            f1: true,\n        });\n    }\n    run(accessor) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        diffEditor === null || diffEditor === void 0 ? void 0 : diffEditor.accessibleDiffViewerPrev();\n    }\n}\nAccessibleDiffViewerPrev.id = 'editor.action.accessibleDiffViewer.prev';\nexport function findFocusedDiffEditor(accessor) {\n    var _a;\n    const codeEditorService = accessor.get(ICodeEditorService);\n    const diffEditors = codeEditorService.listDiffEditors();\n    const activeCodeEditor = (_a = codeEditorService.getFocusedCodeEditor()) !== null && _a !== void 0 ? _a : codeEditorService.getActiveCodeEditor();\n    if (!activeCodeEditor) {\n        return null;\n    }\n    for (let i = 0, len = diffEditors.length; i < len; i++) {\n        const diffEditor = diffEditors[i];\n        if (diffEditor.getModifiedEditor().getId() === activeCodeEditor.getId() || diffEditor.getOriginalEditor().getId() === activeCodeEditor.getId()) {\n            return diffEditor;\n        }\n    }\n    if (document.activeElement) {\n        for (const d of diffEditors) {\n            const container = d.getContainerDomNode();\n            if (isElementOrParentOf(container, document.activeElement)) {\n                return d;\n            }\n        }\n    }\n    return null;\n}\nfunction isElementOrParentOf(elementOrParent, element) {\n    let e = element;\n    while (e) {\n        if (e === elementOrParent) {\n            return true;\n        }\n        e = e.parentElement;\n    }\n    return false;\n}\nCommandsRegistry.registerCommandAlias('editor.action.diffReview.next', AccessibleDiffViewerNext.id);\nregisterAction2(AccessibleDiffViewerNext);\nCommandsRegistry.registerCommandAlias('editor.action.diffReview.prev', AccessibleDiffViewerPrev.id);\nregisterAction2(AccessibleDiffViewerPrev);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as nls from '../../../nls.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { Action } from '../../../base/common/actions.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { Range } from '../../common/core/range.js';\nimport { Codicon } from '../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../base/common/themables.js';\nimport { isIOS } from '../../../base/common/platform.js';\nexport class InlineDiffMargin extends Disposable {\n    get visibility() {\n        return this._visibility;\n    }\n    set visibility(_visibility) {\n        if (this._visibility !== _visibility) {\n            this._visibility = _visibility;\n            if (_visibility) {\n                this._diffActions.style.visibility = 'visible';\n            }\n            else {\n                this._diffActions.style.visibility = 'hidden';\n            }\n        }\n    }\n    constructor(_viewZoneId, _marginDomNode, editor, diff, _contextMenuService, _clipboardService) {\n        super();\n        this._viewZoneId = _viewZoneId;\n        this._marginDomNode = _marginDomNode;\n        this.editor = editor;\n        this.diff = diff;\n        this._contextMenuService = _contextMenuService;\n        this._clipboardService = _clipboardService;\n        this._visibility = false;\n        // make sure the diff margin shows above overlay.\n        this._marginDomNode.style.zIndex = '10';\n        this._diffActions = document.createElement('div');\n        this._diffActions.className = ThemeIcon.asClassName(Codicon.lightBulb) + ' lightbulb-glyph';\n        this._diffActions.style.position = 'absolute';\n        const lineHeight = editor.getOption(65 /* EditorOption.lineHeight */);\n        const lineFeed = editor.getModel().getEOL();\n        this._diffActions.style.right = '0px';\n        this._diffActions.style.visibility = 'hidden';\n        this._diffActions.style.height = `${lineHeight}px`;\n        this._diffActions.style.lineHeight = `${lineHeight}px`;\n        this._marginDomNode.appendChild(this._diffActions);\n        const actions = [];\n        const isDeletion = diff.modifiedEndLineNumber === 0;\n        // default action\n        actions.push(new Action('diff.clipboard.copyDeletedContent', isDeletion\n            ? (diff.originalEndLineNumber > diff.modifiedStartLineNumber\n                ? nls.localize('diff.clipboard.copyDeletedLinesContent.label', \"Copy deleted lines\")\n                : nls.localize('diff.clipboard.copyDeletedLinesContent.single.label', \"Copy deleted line\"))\n            : (diff.originalEndLineNumber > diff.modifiedStartLineNumber\n                ? nls.localize('diff.clipboard.copyChangedLinesContent.label', \"Copy changed lines\")\n                : nls.localize('diff.clipboard.copyChangedLinesContent.single.label', \"Copy changed line\")), undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n            const range = new Range(diff.originalStartLineNumber, 1, diff.originalEndLineNumber + 1, 1);\n            const deletedText = diff.originalModel.getValueInRange(range);\n            yield this._clipboardService.writeText(deletedText);\n        })));\n        let currentLineNumberOffset = 0;\n        let copyLineAction = undefined;\n        if (diff.originalEndLineNumber > diff.modifiedStartLineNumber) {\n            copyLineAction = new Action('diff.clipboard.copyDeletedLineContent', isDeletion\n                ? nls.localize('diff.clipboard.copyDeletedLineContent.label', \"Copy deleted line ({0})\", diff.originalStartLineNumber)\n                : nls.localize('diff.clipboard.copyChangedLineContent.label', \"Copy changed line ({0})\", diff.originalStartLineNumber), undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                const lineContent = diff.originalModel.getLineContent(diff.originalStartLineNumber + currentLineNumberOffset);\n                if (lineContent === '') {\n                    // empty line\n                    const eof = diff.originalModel.getEndOfLineSequence();\n                    yield this._clipboardService.writeText(eof === 0 /* EndOfLineSequence.LF */ ? '\\n' : '\\r\\n');\n                }\n                else {\n                    yield this._clipboardService.writeText(lineContent);\n                }\n            }));\n            actions.push(copyLineAction);\n        }\n        const readOnly = editor.getOption(89 /* EditorOption.readOnly */);\n        if (!readOnly) {\n            actions.push(new Action('diff.inline.revertChange', nls.localize('diff.inline.revertChange.label', \"Revert this change\"), undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                const range = new Range(diff.originalStartLineNumber, 1, diff.originalEndLineNumber, diff.originalModel.getLineMaxColumn(diff.originalEndLineNumber));\n                const deletedText = diff.originalModel.getValueInRange(range);\n                if (diff.modifiedEndLineNumber === 0) {\n                    // deletion only\n                    const column = editor.getModel().getLineMaxColumn(diff.modifiedStartLineNumber);\n                    editor.executeEdits('diffEditor', [\n                        {\n                            range: new Range(diff.modifiedStartLineNumber, column, diff.modifiedStartLineNumber, column),\n                            text: lineFeed + deletedText\n                        }\n                    ]);\n                }\n                else {\n                    const column = editor.getModel().getLineMaxColumn(diff.modifiedEndLineNumber);\n                    editor.executeEdits('diffEditor', [\n                        {\n                            range: new Range(diff.modifiedStartLineNumber, 1, diff.modifiedEndLineNumber, column),\n                            text: deletedText\n                        }\n                    ]);\n                }\n            })));\n        }\n        const useShadowDOM = editor.getOption(125 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        const showContextMenu = (x, y) => {\n            var _a;\n            this._contextMenuService.showContextMenu({\n                domForShadowRoot: useShadowDOM ? (_a = editor.getDomNode()) !== null && _a !== void 0 ? _a : undefined : undefined,\n                getAnchor: () => {\n                    return {\n                        x,\n                        y\n                    };\n                },\n                getActions: () => {\n                    if (copyLineAction) {\n                        copyLineAction.label =\n                            isDeletion\n                                ? nls.localize('diff.clipboard.copyDeletedLineContent.label', \"Copy deleted line ({0})\", diff.originalStartLineNumber + currentLineNumberOffset)\n                                : nls.localize('diff.clipboard.copyChangedLineContent.label', \"Copy changed line ({0})\", diff.originalStartLineNumber + currentLineNumberOffset);\n                    }\n                    return actions;\n                },\n                autoSelectFirstItem: true\n            });\n        };\n        this._register(dom.addStandardDisposableListener(this._diffActions, 'mousedown', e => {\n            const { top, height } = dom.getDomNodePagePosition(this._diffActions);\n            const pad = Math.floor(lineHeight / 3);\n            e.preventDefault();\n            showContextMenu(e.posx, top + height + pad);\n        }));\n        this._register(editor.onMouseMove((e) => {\n            if (e.target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ || e.target.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */) {\n                const viewZoneId = e.target.detail.viewZoneId;\n                if (viewZoneId === this._viewZoneId) {\n                    this.visibility = true;\n                    currentLineNumberOffset = this._updateLightBulbPosition(this._marginDomNode, e.event.browserEvent.y, lineHeight);\n                }\n                else {\n                    this.visibility = false;\n                }\n            }\n            else {\n                this.visibility = false;\n            }\n        }));\n        this._register(editor.onMouseDown((e) => {\n            if (!e.event.rightButton) {\n                return;\n            }\n            if (e.target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ || e.target.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */) {\n                const viewZoneId = e.target.detail.viewZoneId;\n                if (viewZoneId === this._viewZoneId) {\n                    e.event.preventDefault();\n                    currentLineNumberOffset = this._updateLightBulbPosition(this._marginDomNode, e.event.browserEvent.y, lineHeight);\n                    showContextMenu(e.event.posx, e.event.posy + lineHeight);\n                }\n            }\n        }));\n    }\n    _updateLightBulbPosition(marginDomNode, y, lineHeight) {\n        const { top } = dom.getDomNodePagePosition(marginDomNode);\n        const offset = y - top;\n        const lineNumberOffset = Math.floor(offset / lineHeight);\n        const newTop = lineNumberOffset * lineHeight;\n        this._diffActions.style.top = `${newTop}px`;\n        if (this.diff.viewLineCounts) {\n            let acc = 0;\n            for (let i = 0; i < this.diff.viewLineCounts.length; i++) {\n                acc += this.diff.viewLineCounts[i];\n                if (lineNumberOffset < acc) {\n                    return i;\n                }\n            }\n        }\n        return lineNumberOffset;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../base/browser/dom.js';\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\nimport { createTrustedTypesPolicy } from '../../../base/browser/trustedTypes.js';\nimport { MOUSE_CURSOR_TEXT_CSS_CLASS_NAME } from '../../../base/browser/ui/mouseCursor/mouseCursor.js';\nimport { Sash } from '../../../base/browser/ui/sash/sash.js';\nimport * as assert from '../../../base/common/assert.js';\nimport { RunOnceScheduler } from '../../../base/common/async.js';\nimport { Codicon } from '../../../base/common/codicons.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { MarkdownString } from '../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { ThemeIcon } from '../../../base/common/themables.js';\nimport './media/diffEditor.css';\nimport { applyFontInfo } from '../config/domFontInfo.js';\nimport { ElementSizeObserver } from '../config/elementSizeObserver.js';\nimport { EditorExtensionsRegistry } from '../editorExtensions.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { StableEditorScrollState } from '../stableEditorScroll.js';\nimport { CodeEditorWidget } from './codeEditorWidget.js';\nimport { DiffNavigator } from './diffNavigator.js';\nimport { DiffReview } from './diffReview.js';\nimport { InlineDiffMargin } from './inlineDiffMargin.js';\nimport { WorkerBasedDocumentDiffProvider } from './workerBasedDocumentDiffProvider.js';\nimport { clampedFloat, clampedInt, EditorFontLigatures, EditorOptions, boolean as validateBooleanOption, stringSet as validateStringSetOption } from '../../common/config/editorOptions.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { StringBuilder } from '../../common/core/stringBuilder.js';\nimport * as editorCommon from '../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { LineDecoration } from '../../common/viewLayout/lineDecorations.js';\nimport { RenderLineInput, renderViewLine } from '../../common/viewLayout/viewLineRenderer.js';\nimport { InlineDecoration, ViewLineRenderingData } from '../../common/viewModel.js';\nimport { OverviewRulerZone } from '../../common/viewModel/overviewZoneManager.js';\nimport * as nls from '../../../nls.js';\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\nimport { defaultInsertColor, defaultRemoveColor, diffDiagonalFill, diffInserted, diffOverviewRulerInserted, diffOverviewRulerRemoved, diffRemoved } from '../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon } from '../../../platform/theme/common/iconRegistry.js';\nimport { getThemeTypeSelector, IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nclass VisualEditorState {\n    constructor(_contextMenuService, _clipboardService) {\n        this._contextMenuService = _contextMenuService;\n        this._clipboardService = _clipboardService;\n        this._zones = [];\n        this._inlineDiffMargins = [];\n        this._zonesMap = {};\n        this._decorations = [];\n    }\n    getForeignViewZones(allViewZones) {\n        return allViewZones.filter((z) => !this._zonesMap[String(z.id)]);\n    }\n    clean(editor) {\n        // (1) View zones\n        if (this._zones.length > 0) {\n            editor.changeViewZones((viewChangeAccessor) => {\n                for (const zoneId of this._zones) {\n                    viewChangeAccessor.removeZone(zoneId);\n                }\n            });\n        }\n        this._zones = [];\n        this._zonesMap = {};\n        // (2) Model decorations\n        editor.changeDecorations((changeAccessor) => {\n            this._decorations = changeAccessor.deltaDecorations(this._decorations, []);\n        });\n    }\n    apply(editor, overviewRuler, newDecorations, restoreScrollState) {\n        const scrollState = restoreScrollState ? StableEditorScrollState.capture(editor) : null;\n        // view zones\n        editor.changeViewZones((viewChangeAccessor) => {\n            var _a;\n            for (const zoneId of this._zones) {\n                viewChangeAccessor.removeZone(zoneId);\n            }\n            for (const inlineDiffMargin of this._inlineDiffMargins) {\n                inlineDiffMargin.dispose();\n            }\n            this._zones = [];\n            this._zonesMap = {};\n            this._inlineDiffMargins = [];\n            for (let i = 0, length = newDecorations.zones.length; i < length; i++) {\n                const viewZone = newDecorations.zones[i];\n                viewZone.suppressMouseDown = true;\n                viewZone.showInHiddenAreas = true;\n                const zoneId = viewChangeAccessor.addZone(viewZone);\n                this._zones.push(zoneId);\n                this._zonesMap[String(zoneId)] = true;\n                if (newDecorations.zones[i].diff && viewZone.marginDomNode) {\n                    viewZone.suppressMouseDown = false;\n                    if (((_a = newDecorations.zones[i].diff) === null || _a === void 0 ? void 0 : _a.originalModel.getValueLength()) !== 0) {\n                        // do not contribute diff margin actions for newly created files\n                        this._inlineDiffMargins.push(new InlineDiffMargin(zoneId, viewZone.marginDomNode, editor, newDecorations.zones[i].diff, this._contextMenuService, this._clipboardService));\n                    }\n                }\n            }\n        });\n        scrollState === null || scrollState === void 0 ? void 0 : scrollState.restore(editor);\n        // decorations\n        editor.changeDecorations((changeAccessor) => {\n            this._decorations = changeAccessor.deltaDecorations(this._decorations, newDecorations.decorations);\n        });\n        // overview ruler\n        overviewRuler === null || overviewRuler === void 0 ? void 0 : overviewRuler.setZones(newDecorations.overviewZones);\n    }\n}\nlet DIFF_EDITOR_ID = 0;\nconst diffInsertIcon = registerIcon('diff-insert', Codicon.add, nls.localize('diffInsertIcon', 'Line decoration for inserts in the diff editor.'));\nconst diffRemoveIcon = registerIcon('diff-remove', Codicon.remove, nls.localize('diffRemoveIcon', 'Line decoration for removals in the diff editor.'));\nexport const diffEditorWidgetTtPolicy = createTrustedTypesPolicy('diffEditorWidget', { createHTML: value => value });\nconst ariaNavigationTip = nls.localize('diff-aria-navigation-tip', ' use Shift + F7 to navigate changes');\nlet DiffEditorWidget = class DiffEditorWidget extends Disposable {\n    constructor(domElement, options, codeEditorWidgetOptions, clipboardService, contextKeyService, instantiationService, codeEditorService, themeService, notificationService, contextMenuService, _editorProgressService) {\n        super();\n        this._editorProgressService = _editorProgressService;\n        this._onDidDispose = this._register(new Emitter());\n        this.onDidDispose = this._onDidDispose.event;\n        this._onDidChangeModel = this._register(new Emitter());\n        this.onDidChangeModel = this._onDidChangeModel.event;\n        this._onDidUpdateDiff = this._register(new Emitter());\n        this.onDidUpdateDiff = this._onDidUpdateDiff.event;\n        this._onDidContentSizeChange = this._register(new Emitter());\n        this._lastOriginalWarning = null;\n        this._lastModifiedWarning = null;\n        codeEditorService.willCreateDiffEditor();\n        this._documentDiffProvider = this._register(instantiationService.createInstance(WorkerBasedDocumentDiffProvider, options));\n        this._register(this._documentDiffProvider.onDidChange(e => this._beginUpdateDecorationsSoon()));\n        this._codeEditorService = codeEditorService;\n        this._contextKeyService = this._register(contextKeyService.createScoped(domElement));\n        this._instantiationService = instantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\n        this._contextKeyService.createKey('isInDiffEditor', true);\n        this._themeService = themeService;\n        this._notificationService = notificationService;\n        this._id = (++DIFF_EDITOR_ID);\n        this._state = 0 /* editorBrowser.DiffEditorState.Idle */;\n        this._updatingDiffProgress = null;\n        this._domElement = domElement;\n        options = options || {};\n        this._options = validateDiffEditorOptions(options, {\n            enableSplitViewResizing: true,\n            splitViewDefaultRatio: 0.5,\n            renderSideBySide: true,\n            renderMarginRevertIcon: true,\n            maxComputationTime: 5000,\n            maxFileSize: 50,\n            ignoreTrimWhitespace: true,\n            renderIndicators: true,\n            originalEditable: false,\n            diffCodeLens: false,\n            renderOverviewRuler: true,\n            diffWordWrap: 'inherit',\n            diffAlgorithm: 'advanced',\n            accessibilityVerbose: false,\n            experimental: {\n                collapseUnchangedRegions: false,\n            },\n            isInEmbeddedEditor: false,\n            onlyShowAccessibleDiffViewer: false,\n        });\n        this.isEmbeddedDiffEditorKey = EditorContextKeys.isEmbeddedDiffEditor.bindTo(this._contextKeyService);\n        this.isEmbeddedDiffEditorKey.set(typeof options.isInEmbeddedEditor !== 'undefined' ? options.isInEmbeddedEditor : false);\n        this._updateDecorationsRunner = this._register(new RunOnceScheduler(() => this._updateDecorations(), 0));\n        this._containerDomElement = document.createElement('div');\n        this._containerDomElement.className = DiffEditorWidget._getClassName(this._themeService.getColorTheme(), this._options.renderSideBySide);\n        this._containerDomElement.style.position = 'relative';\n        this._containerDomElement.style.height = '100%';\n        this._domElement.appendChild(this._containerDomElement);\n        this._overviewViewportDomElement = createFastDomNode(document.createElement('div'));\n        this._overviewViewportDomElement.setClassName('diffViewport');\n        this._overviewViewportDomElement.setPosition('absolute');\n        this._overviewDomElement = document.createElement('div');\n        this._overviewDomElement.className = 'diffOverview';\n        this._overviewDomElement.style.position = 'absolute';\n        this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode);\n        this._register(dom.addStandardDisposableListener(this._overviewDomElement, dom.EventType.POINTER_DOWN, (e) => {\n            this._modifiedEditor.delegateVerticalScrollbarPointerDown(e);\n        }));\n        this._register(dom.addDisposableListener(this._overviewDomElement, dom.EventType.MOUSE_WHEEL, (e) => {\n            this._modifiedEditor.delegateScrollFromMouseWheelEvent(e);\n        }, { passive: false }));\n        if (this._options.renderOverviewRuler) {\n            this._containerDomElement.appendChild(this._overviewDomElement);\n        }\n        // Create left side\n        this._originalDomNode = document.createElement('div');\n        this._originalDomNode.className = 'editor original';\n        this._originalDomNode.style.position = 'absolute';\n        this._originalDomNode.style.height = '100%';\n        this._containerDomElement.appendChild(this._originalDomNode);\n        // Create right side\n        this._modifiedDomNode = document.createElement('div');\n        this._modifiedDomNode.className = 'editor modified';\n        this._modifiedDomNode.style.position = 'absolute';\n        this._modifiedDomNode.style.height = '100%';\n        this._containerDomElement.appendChild(this._modifiedDomNode);\n        this._beginUpdateDecorationsTimeout = -1;\n        this._currentlyChangingViewZones = false;\n        this._diffComputationToken = 0;\n        this._originalEditorState = new VisualEditorState(contextMenuService, clipboardService);\n        this._modifiedEditorState = new VisualEditorState(contextMenuService, clipboardService);\n        this._isVisible = true;\n        this._isHandlingScrollEvent = false;\n        this._elementSizeObserver = this._register(new ElementSizeObserver(this._containerDomElement, options.dimension));\n        this._register(this._elementSizeObserver.onDidChange(() => this._onDidContainerSizeChanged()));\n        if (options.automaticLayout) {\n            this._elementSizeObserver.startObserving();\n        }\n        this._diffComputationResult = null;\n        this._originalEditor = this._createLeftHandSideEditor(options, codeEditorWidgetOptions.originalEditor || {});\n        this._modifiedEditor = this._createRightHandSideEditor(options, codeEditorWidgetOptions.modifiedEditor || {});\n        this._originalOverviewRuler = null;\n        this._modifiedOverviewRuler = null;\n        this._reviewPane = instantiationService.createInstance(DiffReview, this);\n        this._containerDomElement.appendChild(this._reviewPane.domNode.domNode);\n        this._containerDomElement.appendChild(this._reviewPane.shadow.domNode);\n        this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode);\n        if (this._options.renderSideBySide) {\n            this._setStrategy(new DiffEditorWidgetSideBySide(this._createDataSource(), this._options.enableSplitViewResizing, this._options.splitViewDefaultRatio));\n        }\n        else {\n            this._setStrategy(new DiffEditorWidgetInline(this._createDataSource(), this._options.enableSplitViewResizing));\n        }\n        this._register(themeService.onDidColorThemeChange(t => {\n            if (this._strategy && this._strategy.applyColors(t)) {\n                this._updateDecorationsRunner.schedule();\n            }\n            this._containerDomElement.className = DiffEditorWidget._getClassName(this._themeService.getColorTheme(), this._options.renderSideBySide);\n        }));\n        const contributions = EditorExtensionsRegistry.getDiffEditorContributions();\n        for (const desc of contributions) {\n            try {\n                this._register(instantiationService.createInstance(desc.ctor, this));\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n        }\n        this._codeEditorService.addDiffEditor(this);\n    }\n    _setState(newState) {\n        if (this._state === newState) {\n            return;\n        }\n        this._state = newState;\n        if (this._updatingDiffProgress) {\n            this._updatingDiffProgress.done();\n            this._updatingDiffProgress = null;\n        }\n        if (this._state === 1 /* editorBrowser.DiffEditorState.ComputingDiff */) {\n            this._updatingDiffProgress = this._editorProgressService.show(true, 1000);\n        }\n    }\n    accessibleDiffViewerNext() {\n        this._reviewPane.next();\n    }\n    accessibleDiffViewerPrev() {\n        this._reviewPane.prev();\n    }\n    static _getClassName(theme, renderSideBySide) {\n        let result = 'monaco-diff-editor monaco-editor-background ';\n        if (renderSideBySide) {\n            result += 'side-by-side ';\n        }\n        result += getThemeTypeSelector(theme.type);\n        return result;\n    }\n    _disposeOverviewRulers() {\n        if (this._originalOverviewRuler) {\n            this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode());\n            this._originalOverviewRuler.dispose();\n            this._originalOverviewRuler = null;\n        }\n        if (this._modifiedOverviewRuler) {\n            this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode());\n            this._modifiedOverviewRuler.dispose();\n            this._modifiedOverviewRuler = null;\n        }\n    }\n    _createOverviewRulers() {\n        if (!this._options.renderOverviewRuler) {\n            return;\n        }\n        assert.ok(!this._originalOverviewRuler && !this._modifiedOverviewRuler);\n        if (this._originalEditor.hasModel()) {\n            this._originalOverviewRuler = this._originalEditor.createOverviewRuler('original diffOverviewRuler');\n            this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode());\n        }\n        if (this._modifiedEditor.hasModel()) {\n            this._modifiedOverviewRuler = this._modifiedEditor.createOverviewRuler('modified diffOverviewRuler');\n            this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode());\n        }\n        this._layoutOverviewRulers();\n    }\n    _createLeftHandSideEditor(options, codeEditorWidgetOptions) {\n        const editor = this._createInnerEditor(this._instantiationService, this._originalDomNode, this._adjustOptionsForLeftHandSide(options), codeEditorWidgetOptions);\n        this._register(editor.onDidScrollChange((e) => {\n            if (this._isHandlingScrollEvent) {\n                return;\n            }\n            if (!e.scrollTopChanged && !e.scrollLeftChanged && !e.scrollHeightChanged) {\n                return;\n            }\n            this._isHandlingScrollEvent = true;\n            this._modifiedEditor.setScrollPosition({\n                scrollLeft: e.scrollLeft,\n                scrollTop: e.scrollTop\n            });\n            this._isHandlingScrollEvent = false;\n            this._layoutOverviewViewport();\n        }));\n        this._register(editor.onDidChangeViewZones(() => {\n            this._onViewZonesChanged();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (!editor.getModel()) {\n                return;\n            }\n            if (e.hasChanged(49 /* EditorOption.fontInfo */)) {\n                this._updateDecorationsRunner.schedule();\n            }\n            if (e.hasChanged(143 /* EditorOption.wrappingInfo */)) {\n                this._updateDecorationsRunner.cancel();\n                this._updateDecorations();\n            }\n        }));\n        this._register(editor.onDidChangeHiddenAreas(() => {\n            this._updateDecorationsRunner.cancel();\n            this._updateDecorations();\n        }));\n        this._register(editor.onDidChangeModelContent(() => {\n            if (this._isVisible) {\n                this._beginUpdateDecorationsSoon();\n            }\n        }));\n        const isInDiffLeftEditorKey = this._contextKeyService.createKey('isInDiffLeftEditor', editor.hasWidgetFocus());\n        this._register(editor.onDidFocusEditorWidget(() => isInDiffLeftEditorKey.set(true)));\n        this._register(editor.onDidBlurEditorWidget(() => isInDiffLeftEditorKey.set(false)));\n        this._register(editor.onDidContentSizeChange(e => {\n            const width = this._originalEditor.getContentWidth() + this._modifiedEditor.getContentWidth() + DiffEditorWidget.ONE_OVERVIEW_WIDTH;\n            const height = Math.max(this._modifiedEditor.getContentHeight(), this._originalEditor.getContentHeight());\n            this._onDidContentSizeChange.fire({\n                contentHeight: height,\n                contentWidth: width,\n                contentHeightChanged: e.contentHeightChanged,\n                contentWidthChanged: e.contentWidthChanged\n            });\n        }));\n        return editor;\n    }\n    _createRightHandSideEditor(options, codeEditorWidgetOptions) {\n        const editor = this._createInnerEditor(this._instantiationService, this._modifiedDomNode, this._adjustOptionsForRightHandSide(options), codeEditorWidgetOptions);\n        this._register(editor.onDidScrollChange((e) => {\n            if (this._isHandlingScrollEvent) {\n                return;\n            }\n            if (!e.scrollTopChanged && !e.scrollLeftChanged && !e.scrollHeightChanged) {\n                return;\n            }\n            this._isHandlingScrollEvent = true;\n            this._originalEditor.setScrollPosition({\n                scrollLeft: e.scrollLeft,\n                scrollTop: e.scrollTop\n            });\n            this._isHandlingScrollEvent = false;\n            this._layoutOverviewViewport();\n        }));\n        this._register(editor.onDidChangeViewZones(() => {\n            this._onViewZonesChanged();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (!editor.getModel()) {\n                return;\n            }\n            if (e.hasChanged(49 /* EditorOption.fontInfo */)) {\n                this._updateDecorationsRunner.schedule();\n            }\n            if (e.hasChanged(143 /* EditorOption.wrappingInfo */)) {\n                this._updateDecorationsRunner.cancel();\n                this._updateDecorations();\n            }\n        }));\n        this._register(editor.onDidChangeHiddenAreas(() => {\n            this._updateDecorationsRunner.cancel();\n            this._updateDecorations();\n        }));\n        this._register(editor.onDidChangeModelContent(() => {\n            if (this._isVisible) {\n                this._beginUpdateDecorationsSoon();\n            }\n        }));\n        this._register(editor.onDidChangeModelOptions((e) => {\n            if (e.tabSize) {\n                this._updateDecorationsRunner.schedule();\n            }\n        }));\n        const isInDiffRightEditorKey = this._contextKeyService.createKey('isInDiffRightEditor', editor.hasWidgetFocus());\n        this._register(editor.onDidFocusEditorWidget(() => isInDiffRightEditorKey.set(true)));\n        this._register(editor.onDidBlurEditorWidget(() => isInDiffRightEditorKey.set(false)));\n        this._register(editor.onDidContentSizeChange(e => {\n            const width = this._originalEditor.getContentWidth() + this._modifiedEditor.getContentWidth() + DiffEditorWidget.ONE_OVERVIEW_WIDTH;\n            const height = Math.max(this._modifiedEditor.getContentHeight(), this._originalEditor.getContentHeight());\n            this._onDidContentSizeChange.fire({\n                contentHeight: height,\n                contentWidth: width,\n                contentHeightChanged: e.contentHeightChanged,\n                contentWidthChanged: e.contentWidthChanged\n            });\n        }));\n        // Revert change when an arrow is clicked.\n        this._register(editor.onMouseDown(event => {\n            var _a, _b;\n            if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? void 0 : _a.className.includes('arrow-revert-change'))) {\n                const lineNumber = event.target.position.lineNumber;\n                const viewZone = event.target;\n                const change = (_b = this._diffComputationResult) === null || _b === void 0 ? void 0 : _b.changes.find(c => \n                // delete change\n                (viewZone === null || viewZone === void 0 ? void 0 : viewZone.detail.afterLineNumber) === c.modifiedStartLineNumber ||\n                    // other changes\n                    (c.modifiedEndLineNumber > 0 && c.modifiedStartLineNumber === lineNumber));\n                if (change) {\n                    this.revertChange(change);\n                }\n                event.event.stopPropagation();\n                this._updateDecorations();\n                return;\n            }\n        }));\n        return editor;\n    }\n    /**\n     * Reverts a change in the modified editor.\n     */\n    revertChange(change) {\n        const editor = this._modifiedEditor;\n        const original = this._originalEditor.getModel();\n        const modified = this._modifiedEditor.getModel();\n        if (!original || !modified || !editor) {\n            return;\n        }\n        const originalRange = change.originalEndLineNumber > 0 ? new Range(change.originalStartLineNumber, 1, change.originalEndLineNumber, original.getLineMaxColumn(change.originalEndLineNumber)) : null;\n        const originalContent = originalRange ? original.getValueInRange(originalRange) : null;\n        const newRange = change.modifiedEndLineNumber > 0 ? new Range(change.modifiedStartLineNumber, 1, change.modifiedEndLineNumber, modified.getLineMaxColumn(change.modifiedEndLineNumber)) : null;\n        const eol = modified.getEOL();\n        if (change.originalEndLineNumber === 0 && newRange) {\n            // Insert change.\n            // To revert: delete the new content and a linebreak (if possible)\n            let range = newRange;\n            if (change.modifiedStartLineNumber > 1) {\n                // Try to include a linebreak from before.\n                range = newRange.setStartPosition(change.modifiedStartLineNumber - 1, modified.getLineMaxColumn(change.modifiedStartLineNumber - 1));\n            }\n            else if (change.modifiedEndLineNumber < modified.getLineCount()) {\n                // Try to include the linebreak from after.\n                range = newRange.setEndPosition(change.modifiedEndLineNumber + 1, 1);\n            }\n            editor.executeEdits('diffEditor', [{\n                    range,\n                    text: '',\n                }]);\n        }\n        else if (change.modifiedEndLineNumber === 0 && originalContent !== null) {\n            // Delete change.\n            // To revert: insert the old content and a linebreak.\n            const insertAt = change.modifiedStartLineNumber < modified.getLineCount() ? new Position(change.modifiedStartLineNumber + 1, 1) : new Position(change.modifiedStartLineNumber, modified.getLineMaxColumn(change.modifiedStartLineNumber));\n            editor.executeEdits('diffEditor', [{\n                    range: Range.fromPositions(insertAt, insertAt),\n                    text: change.modifiedStartLineNumber < modified.getLineCount() ? originalContent + eol : eol + originalContent,\n                }]);\n        }\n        else if (newRange && originalContent !== null) {\n            // Modified change.\n            editor.executeEdits('diffEditor', [{\n                    range: newRange,\n                    text: originalContent,\n                }]);\n        }\n    }\n    _createInnerEditor(instantiationService, container, options, editorWidgetOptions) {\n        return instantiationService.createInstance(CodeEditorWidget, container, options, editorWidgetOptions);\n    }\n    dispose() {\n        this._codeEditorService.removeDiffEditor(this);\n        if (this._beginUpdateDecorationsTimeout !== -1) {\n            window.clearTimeout(this._beginUpdateDecorationsTimeout);\n            this._beginUpdateDecorationsTimeout = -1;\n        }\n        this._cleanViewZonesAndDecorations();\n        if (this._originalOverviewRuler) {\n            this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode());\n            this._originalOverviewRuler.dispose();\n        }\n        if (this._modifiedOverviewRuler) {\n            this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode());\n            this._modifiedOverviewRuler.dispose();\n        }\n        this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode);\n        if (this._options.renderOverviewRuler) {\n            this._containerDomElement.removeChild(this._overviewDomElement);\n        }\n        this._containerDomElement.removeChild(this._originalDomNode);\n        this._originalEditor.dispose();\n        this._containerDomElement.removeChild(this._modifiedDomNode);\n        this._modifiedEditor.dispose();\n        this._strategy.dispose();\n        this._containerDomElement.removeChild(this._reviewPane.domNode.domNode);\n        this._containerDomElement.removeChild(this._reviewPane.shadow.domNode);\n        this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode);\n        this._reviewPane.dispose();\n        this._domElement.removeChild(this._containerDomElement);\n        this._onDidDispose.fire();\n        super.dispose();\n    }\n    //------------ begin IDiffEditor methods\n    getId() {\n        return this.getEditorType() + ':' + this._id;\n    }\n    getEditorType() {\n        return editorCommon.EditorType.IDiffEditor;\n    }\n    getLineChanges() {\n        if (!this._diffComputationResult) {\n            return null;\n        }\n        return this._diffComputationResult.changes;\n    }\n    getOriginalEditor() {\n        return this._originalEditor;\n    }\n    getModifiedEditor() {\n        return this._modifiedEditor;\n    }\n    updateOptions(_newOptions) {\n        const newOptions = validateDiffEditorOptions(_newOptions, this._options);\n        const changed = changedDiffEditorOptions(this._options, newOptions);\n        this._options = newOptions;\n        this.isEmbeddedDiffEditorKey.set(typeof _newOptions.isInEmbeddedEditor !== 'undefined' ? _newOptions.isInEmbeddedEditor : false);\n        const beginUpdateDecorations = (changed.ignoreTrimWhitespace || changed.renderIndicators || changed.renderMarginRevertIcon);\n        const beginUpdateDecorationsSoon = (this._isVisible && (changed.maxComputationTime || changed.maxFileSize));\n        this._documentDiffProvider.setOptions(newOptions);\n        if (beginUpdateDecorations) {\n            this._beginUpdateDecorations();\n        }\n        else if (beginUpdateDecorationsSoon) {\n            this._beginUpdateDecorationsSoon();\n        }\n        this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(_newOptions));\n        this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(_newOptions));\n        // enableSplitViewResizing\n        this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing, this._options.splitViewDefaultRatio);\n        // renderSideBySide\n        if (changed.renderSideBySide) {\n            if (this._options.renderSideBySide) {\n                this._setStrategy(new DiffEditorWidgetSideBySide(this._createDataSource(), this._options.enableSplitViewResizing, this._options.splitViewDefaultRatio));\n            }\n            else {\n                this._setStrategy(new DiffEditorWidgetInline(this._createDataSource(), this._options.enableSplitViewResizing));\n            }\n            // Update class name\n            this._containerDomElement.className = DiffEditorWidget._getClassName(this._themeService.getColorTheme(), this._options.renderSideBySide);\n        }\n        // renderOverviewRuler\n        if (changed.renderOverviewRuler) {\n            if (this._options.renderOverviewRuler) {\n                this._containerDomElement.appendChild(this._overviewDomElement);\n            }\n            else {\n                this._containerDomElement.removeChild(this._overviewDomElement);\n            }\n        }\n    }\n    getModel() {\n        return {\n            original: this._originalEditor.getModel(),\n            modified: this._modifiedEditor.getModel()\n        };\n    }\n    createViewModel(model) {\n        return {\n            model,\n            waitForDiff() {\n                return __awaiter(this, void 0, void 0, function* () {\n                    // noop\n                });\n            },\n        };\n    }\n    setModel(model) {\n        if (model && 'model' in model) {\n            model = model.model;\n        }\n        // Guard us against partial null model\n        if (model && (!model.original || !model.modified)) {\n            throw new Error(!model.original ? 'DiffEditorWidget.setModel: Original model is null' : 'DiffEditorWidget.setModel: Modified model is null');\n        }\n        // Remove all view zones & decorations\n        this._cleanViewZonesAndDecorations();\n        this._disposeOverviewRulers();\n        // Update code editor models\n        this._originalEditor.setModel(model ? model.original : null);\n        this._modifiedEditor.setModel(model ? model.modified : null);\n        this._updateDecorationsRunner.cancel();\n        // this.originalEditor.onDidChangeModelOptions\n        if (model) {\n            this._originalEditor.setScrollTop(0);\n            this._modifiedEditor.setScrollTop(0);\n        }\n        // Disable any diff computations that will come in\n        this._diffComputationResult = null;\n        this._diffComputationToken++;\n        this._setState(0 /* editorBrowser.DiffEditorState.Idle */);\n        if (model) {\n            this._createOverviewRulers();\n            // Begin comparing\n            this._beginUpdateDecorations();\n        }\n        this._layoutOverviewViewport();\n        this._onDidChangeModel.fire();\n        // Diff navigator\n        this._diffNavigator = this._register(this._instantiationService.createInstance(DiffNavigator, this, {\n            alwaysRevealFirst: false,\n            findResultLoop: this.getModifiedEditor().getOption(40 /* EditorOption.find */).loop\n        }));\n    }\n    getContainerDomNode() {\n        return this._domElement;\n    }\n    // #region editorBrowser.IDiffEditor: Delegating to modified Editor\n    getVisibleColumnFromPosition(position) {\n        return this._modifiedEditor.getVisibleColumnFromPosition(position);\n    }\n    getPosition() {\n        return this._modifiedEditor.getPosition();\n    }\n    setPosition(position, source = 'api') {\n        this._modifiedEditor.setPosition(position, source);\n    }\n    revealLine(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealLine(lineNumber, scrollType);\n    }\n    revealLineInCenter(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealLineInCenter(lineNumber, scrollType);\n    }\n    revealLineInCenterIfOutsideViewport(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealLineInCenterIfOutsideViewport(lineNumber, scrollType);\n    }\n    revealLineNearTop(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealLineNearTop(lineNumber, scrollType);\n    }\n    revealPosition(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealPosition(position, scrollType);\n    }\n    revealPositionInCenter(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealPositionInCenter(position, scrollType);\n    }\n    revealPositionInCenterIfOutsideViewport(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealPositionInCenterIfOutsideViewport(position, scrollType);\n    }\n    revealPositionNearTop(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealPositionNearTop(position, scrollType);\n    }\n    getSelection() {\n        return this._modifiedEditor.getSelection();\n    }\n    getSelections() {\n        return this._modifiedEditor.getSelections();\n    }\n    setSelection(something, source = 'api') {\n        this._modifiedEditor.setSelection(something, source);\n    }\n    setSelections(ranges, source = 'api') {\n        this._modifiedEditor.setSelections(ranges, source);\n    }\n    revealLines(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealLines(startLineNumber, endLineNumber, scrollType);\n    }\n    revealLinesInCenter(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealLinesInCenter(startLineNumber, endLineNumber, scrollType);\n    }\n    revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType);\n    }\n    revealLinesNearTop(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealLinesNearTop(startLineNumber, endLineNumber, scrollType);\n    }\n    revealRange(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */, revealVerticalInCenter = false, revealHorizontal = true) {\n        this._modifiedEditor.revealRange(range, scrollType, revealVerticalInCenter, revealHorizontal);\n    }\n    revealRangeInCenter(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealRangeInCenter(range, scrollType);\n    }\n    revealRangeInCenterIfOutsideViewport(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealRangeInCenterIfOutsideViewport(range, scrollType);\n    }\n    revealRangeNearTop(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealRangeNearTop(range, scrollType);\n    }\n    revealRangeNearTopIfOutsideViewport(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealRangeNearTopIfOutsideViewport(range, scrollType);\n    }\n    revealRangeAtTop(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealRangeAtTop(range, scrollType);\n    }\n    getSupportedActions() {\n        return this._modifiedEditor.getSupportedActions();\n    }\n    focus() {\n        this._modifiedEditor.focus();\n    }\n    trigger(source, handlerId, payload) {\n        this._modifiedEditor.trigger(source, handlerId, payload);\n    }\n    createDecorationsCollection(decorations) {\n        return this._modifiedEditor.createDecorationsCollection(decorations);\n    }\n    changeDecorations(callback) {\n        return this._modifiedEditor.changeDecorations(callback);\n    }\n    // #endregion\n    saveViewState() {\n        const originalViewState = this._originalEditor.saveViewState();\n        const modifiedViewState = this._modifiedEditor.saveViewState();\n        return {\n            original: originalViewState,\n            modified: modifiedViewState,\n        };\n    }\n    restoreViewState(s) {\n        if (s && s.original && s.modified) {\n            const diffEditorState = s;\n            this._originalEditor.restoreViewState(diffEditorState.original);\n            this._modifiedEditor.restoreViewState(diffEditorState.modified);\n        }\n    }\n    layout(dimension) {\n        this._elementSizeObserver.observe(dimension);\n    }\n    hasTextFocus() {\n        return this._originalEditor.hasTextFocus() || this._modifiedEditor.hasTextFocus();\n    }\n    //------------ end IDiffEditor methods\n    //------------ begin layouting methods\n    _onDidContainerSizeChanged() {\n        this._doLayout();\n    }\n    _getReviewHeight() {\n        return this._reviewPane.isVisible() ? this._elementSizeObserver.getHeight() : 0;\n    }\n    _layoutOverviewRulers() {\n        if (!this._options.renderOverviewRuler) {\n            return;\n        }\n        if (!this._originalOverviewRuler || !this._modifiedOverviewRuler) {\n            return;\n        }\n        const height = this._elementSizeObserver.getHeight();\n        const reviewHeight = this._getReviewHeight();\n        const freeSpace = DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH - 2 * DiffEditorWidget.ONE_OVERVIEW_WIDTH;\n        const layoutInfo = this._modifiedEditor.getLayoutInfo();\n        if (layoutInfo) {\n            this._originalOverviewRuler.setLayout({\n                top: 0,\n                width: DiffEditorWidget.ONE_OVERVIEW_WIDTH,\n                right: freeSpace + DiffEditorWidget.ONE_OVERVIEW_WIDTH,\n                height: (height - reviewHeight)\n            });\n            this._modifiedOverviewRuler.setLayout({\n                top: 0,\n                right: 0,\n                width: DiffEditorWidget.ONE_OVERVIEW_WIDTH,\n                height: (height - reviewHeight)\n            });\n        }\n    }\n    //------------ end layouting methods\n    _onViewZonesChanged() {\n        if (this._currentlyChangingViewZones) {\n            return;\n        }\n        this._updateDecorationsRunner.schedule();\n    }\n    _beginUpdateDecorationsSoon() {\n        // Clear previous timeout if necessary\n        if (this._beginUpdateDecorationsTimeout !== -1) {\n            window.clearTimeout(this._beginUpdateDecorationsTimeout);\n            this._beginUpdateDecorationsTimeout = -1;\n        }\n        this._beginUpdateDecorationsTimeout = window.setTimeout(() => this._beginUpdateDecorations(), DiffEditorWidget.UPDATE_DIFF_DECORATIONS_DELAY);\n    }\n    static _equals(a, b) {\n        if (!a && !b) {\n            return true;\n        }\n        if (!a || !b) {\n            return false;\n        }\n        return (a.toString() === b.toString());\n    }\n    _beginUpdateDecorations() {\n        if (this._beginUpdateDecorationsTimeout !== -1) {\n            // Cancel any pending requests in case this method is called directly\n            window.clearTimeout(this._beginUpdateDecorationsTimeout);\n            this._beginUpdateDecorationsTimeout = -1;\n        }\n        const currentOriginalModel = this._originalEditor.getModel();\n        const currentModifiedModel = this._modifiedEditor.getModel();\n        if (!currentOriginalModel || !currentModifiedModel) {\n            return;\n        }\n        // Prevent old diff requests to come if a new request has been initiated\n        // The best method would be to call cancel on the Promise, but this is not\n        // yet supported, so using tokens for now.\n        this._diffComputationToken++;\n        const currentToken = this._diffComputationToken;\n        const diffLimit = this._options.maxFileSize * 1024 * 1024; // MB\n        const canSyncModelForDiff = (model) => {\n            const bufferTextLength = model.getValueLength();\n            return (diffLimit === 0 || bufferTextLength <= diffLimit);\n        };\n        if (!canSyncModelForDiff(currentOriginalModel) || !canSyncModelForDiff(currentModifiedModel)) {\n            if (!DiffEditorWidget._equals(currentOriginalModel.uri, this._lastOriginalWarning)\n                || !DiffEditorWidget._equals(currentModifiedModel.uri, this._lastModifiedWarning)) {\n                this._lastOriginalWarning = currentOriginalModel.uri;\n                this._lastModifiedWarning = currentModifiedModel.uri;\n                this._notificationService.warn(nls.localize(\"diff.tooLarge\", \"Cannot compare files because one file is too large.\"));\n            }\n            return;\n        }\n        this._setState(1 /* editorBrowser.DiffEditorState.ComputingDiff */);\n        this._documentDiffProvider.computeDiff(currentOriginalModel, currentModifiedModel, {\n            ignoreTrimWhitespace: this._options.ignoreTrimWhitespace,\n            maxComputationTimeMs: this._options.maxComputationTime,\n            computeMoves: false,\n        }).then(result => {\n            if (currentToken === this._diffComputationToken\n                && currentOriginalModel === this._originalEditor.getModel()\n                && currentModifiedModel === this._modifiedEditor.getModel()) {\n                this._setState(2 /* editorBrowser.DiffEditorState.DiffComputed */);\n                this._diffComputationResult = {\n                    identical: result.identical,\n                    quitEarly: result.quitEarly,\n                    changes2: result.changes,\n                    changes: result.changes.map(m => {\n                        // TODO don't do this translation, but use the diff result directly\n                        let originalStartLineNumber;\n                        let originalEndLineNumber;\n                        let modifiedStartLineNumber;\n                        let modifiedEndLineNumber;\n                        let innerChanges = m.innerChanges;\n                        if (m.originalRange.isEmpty) {\n                            // Insertion\n                            originalStartLineNumber = m.originalRange.startLineNumber - 1;\n                            originalEndLineNumber = 0;\n                            innerChanges = undefined;\n                        }\n                        else {\n                            originalStartLineNumber = m.originalRange.startLineNumber;\n                            originalEndLineNumber = m.originalRange.endLineNumberExclusive - 1;\n                        }\n                        if (m.modifiedRange.isEmpty) {\n                            // Deletion\n                            modifiedStartLineNumber = m.modifiedRange.startLineNumber - 1;\n                            modifiedEndLineNumber = 0;\n                            innerChanges = undefined;\n                        }\n                        else {\n                            modifiedStartLineNumber = m.modifiedRange.startLineNumber;\n                            modifiedEndLineNumber = m.modifiedRange.endLineNumberExclusive - 1;\n                        }\n                        return {\n                            originalStartLineNumber,\n                            originalEndLineNumber,\n                            modifiedStartLineNumber,\n                            modifiedEndLineNumber,\n                            charChanges: innerChanges === null || innerChanges === void 0 ? void 0 : innerChanges.map(m => ({\n                                originalStartLineNumber: m.originalRange.startLineNumber,\n                                originalStartColumn: m.originalRange.startColumn,\n                                originalEndLineNumber: m.originalRange.endLineNumber,\n                                originalEndColumn: m.originalRange.endColumn,\n                                modifiedStartLineNumber: m.modifiedRange.startLineNumber,\n                                modifiedStartColumn: m.modifiedRange.startColumn,\n                                modifiedEndLineNumber: m.modifiedRange.endLineNumber,\n                                modifiedEndColumn: m.modifiedRange.endColumn,\n                            }))\n                        };\n                    })\n                };\n                this._updateDecorationsRunner.schedule();\n                this._onDidUpdateDiff.fire();\n            }\n        }, (error) => {\n            if (currentToken === this._diffComputationToken\n                && currentOriginalModel === this._originalEditor.getModel()\n                && currentModifiedModel === this._modifiedEditor.getModel()) {\n                this._setState(2 /* editorBrowser.DiffEditorState.DiffComputed */);\n                this._diffComputationResult = null;\n                this._updateDecorationsRunner.schedule();\n            }\n        });\n    }\n    _cleanViewZonesAndDecorations() {\n        this._originalEditorState.clean(this._originalEditor);\n        this._modifiedEditorState.clean(this._modifiedEditor);\n    }\n    _updateDecorations() {\n        if (!this._originalEditor.getModel() || !this._modifiedEditor.getModel()) {\n            return;\n        }\n        const lineChanges = (this._diffComputationResult ? this._diffComputationResult.changes : []);\n        const foreignOriginal = this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces());\n        const foreignModified = this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces());\n        const renderMarginRevertIcon = this._options.renderMarginRevertIcon && !this._modifiedEditor.getOption(89 /* EditorOption.readOnly */);\n        const diffDecorations = this._strategy.getEditorsDiffDecorations(lineChanges, this._options.ignoreTrimWhitespace, this._options.renderIndicators, renderMarginRevertIcon, foreignOriginal, foreignModified);\n        try {\n            this._currentlyChangingViewZones = true;\n            this._originalEditorState.apply(this._originalEditor, this._originalOverviewRuler, diffDecorations.original, false);\n            this._modifiedEditorState.apply(this._modifiedEditor, this._modifiedOverviewRuler, diffDecorations.modified, true);\n        }\n        finally {\n            this._currentlyChangingViewZones = false;\n        }\n    }\n    _adjustOptionsForSubEditor(options) {\n        const clonedOptions = Object.assign({}, options);\n        clonedOptions.inDiffEditor = true;\n        clonedOptions.automaticLayout = false;\n        // Clone scrollbar options before changing them\n        clonedOptions.scrollbar = Object.assign({}, (clonedOptions.scrollbar || {}));\n        clonedOptions.scrollbar.vertical = 'visible';\n        clonedOptions.folding = false;\n        clonedOptions.codeLens = this._options.diffCodeLens;\n        clonedOptions.fixedOverflowWidgets = true;\n        // clonedOptions.lineDecorationsWidth = '2ch';\n        // Clone minimap options before changing them\n        clonedOptions.minimap = Object.assign({}, (clonedOptions.minimap || {}));\n        clonedOptions.minimap.enabled = false;\n        return clonedOptions;\n    }\n    _adjustOptionsForLeftHandSide(options) {\n        const result = this._adjustOptionsForSubEditor(options);\n        if (!this._options.renderSideBySide) {\n            // never wrap hidden editor\n            result.wordWrapOverride1 = 'off';\n            result.wordWrapOverride2 = 'off';\n            result.stickyScroll = { enabled: false };\n        }\n        else {\n            result.wordWrapOverride1 = this._options.diffWordWrap;\n        }\n        if (options.originalAriaLabel) {\n            result.ariaLabel = options.originalAriaLabel;\n        }\n        this._updateAriaLabel(result);\n        result.readOnly = !this._options.originalEditable;\n        result.dropIntoEditor = { enabled: !result.readOnly };\n        result.extraEditorClassName = 'original-in-monaco-diff-editor';\n        return Object.assign(Object.assign({}, result), { dimension: {\n                height: 0,\n                width: 0\n            } });\n    }\n    _updateAriaLabel(options) {\n        var _a;\n        let ariaLabel = (_a = options.ariaLabel) !== null && _a !== void 0 ? _a : '';\n        if (this._options.accessibilityVerbose) {\n            ariaLabel += ariaNavigationTip;\n        }\n        else if (ariaLabel) {\n            ariaLabel = ariaLabel.replaceAll(ariaNavigationTip, '');\n        }\n        options.ariaLabel = ariaLabel;\n    }\n    _adjustOptionsForRightHandSide(options) {\n        const result = this._adjustOptionsForSubEditor(options);\n        if (options.modifiedAriaLabel) {\n            result.ariaLabel = options.modifiedAriaLabel;\n        }\n        this._updateAriaLabel(result);\n        result.wordWrapOverride1 = this._options.diffWordWrap;\n        result.revealHorizontalRightPadding = EditorOptions.revealHorizontalRightPadding.defaultValue + DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH;\n        result.scrollbar.verticalHasArrows = false;\n        result.extraEditorClassName = 'modified-in-monaco-diff-editor';\n        return Object.assign(Object.assign({}, result), { dimension: {\n                height: 0,\n                width: 0\n            } });\n    }\n    doLayout() {\n        this._elementSizeObserver.observe();\n        this._doLayout();\n    }\n    _doLayout() {\n        const width = this._elementSizeObserver.getWidth();\n        const height = this._elementSizeObserver.getHeight();\n        const reviewHeight = this._getReviewHeight();\n        const splitPoint = this._strategy.layout();\n        this._originalDomNode.style.width = splitPoint + 'px';\n        this._originalDomNode.style.left = '0px';\n        this._modifiedDomNode.style.width = (width - splitPoint - DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH) + 'px';\n        this._modifiedDomNode.style.left = splitPoint + 'px';\n        this._overviewDomElement.style.top = '0px';\n        this._overviewDomElement.style.height = (height - reviewHeight) + 'px';\n        this._overviewDomElement.style.width = DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH + 'px';\n        this._overviewDomElement.style.left = (width - DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH) + 'px';\n        this._overviewViewportDomElement.setWidth(DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH);\n        this._overviewViewportDomElement.setHeight(30);\n        this._originalEditor.layout({ width: splitPoint, height: (height - reviewHeight) });\n        this._modifiedEditor.layout({ width: width - splitPoint - (this._options.renderOverviewRuler ? DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH : 0), height: (height - reviewHeight) });\n        if (this._originalOverviewRuler || this._modifiedOverviewRuler) {\n            this._layoutOverviewRulers();\n        }\n        this._reviewPane.layout(height - reviewHeight, width, reviewHeight);\n        this._layoutOverviewViewport();\n    }\n    _layoutOverviewViewport() {\n        const layout = this._computeOverviewViewport();\n        if (!layout) {\n            this._overviewViewportDomElement.setTop(0);\n            this._overviewViewportDomElement.setHeight(0);\n        }\n        else {\n            this._overviewViewportDomElement.setTop(layout.top);\n            this._overviewViewportDomElement.setHeight(layout.height);\n        }\n    }\n    _computeOverviewViewport() {\n        const layoutInfo = this._modifiedEditor.getLayoutInfo();\n        if (!layoutInfo) {\n            return null;\n        }\n        const scrollTop = this._modifiedEditor.getScrollTop();\n        const scrollHeight = this._modifiedEditor.getScrollHeight();\n        const computedAvailableSize = Math.max(0, layoutInfo.height);\n        const computedRepresentableSize = Math.max(0, computedAvailableSize - 2 * 0);\n        const computedRatio = scrollHeight > 0 ? (computedRepresentableSize / scrollHeight) : 0;\n        const computedSliderSize = Math.max(0, Math.floor(layoutInfo.height * computedRatio));\n        const computedSliderPosition = Math.floor(scrollTop * computedRatio);\n        return {\n            height: computedSliderSize,\n            top: computedSliderPosition\n        };\n    }\n    _createDataSource() {\n        return {\n            getWidth: () => {\n                return this._elementSizeObserver.getWidth();\n            },\n            getHeight: () => {\n                return (this._elementSizeObserver.getHeight() - this._getReviewHeight());\n            },\n            getOptions: () => {\n                return {\n                    renderOverviewRuler: this._options.renderOverviewRuler\n                };\n            },\n            getContainerDomNode: () => {\n                return this._containerDomElement;\n            },\n            relayoutEditors: () => {\n                this._doLayout();\n            },\n            getOriginalEditor: () => {\n                return this._originalEditor;\n            },\n            getModifiedEditor: () => {\n                return this._modifiedEditor;\n            }\n        };\n    }\n    _setStrategy(newStrategy) {\n        var _a;\n        (_a = this._strategy) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._strategy = newStrategy;\n        if (this._boundarySashes) {\n            newStrategy.setBoundarySashes(this._boundarySashes);\n        }\n        newStrategy.applyColors(this._themeService.getColorTheme());\n        if (this._diffComputationResult) {\n            this._updateDecorations();\n        }\n        // Just do a layout, the strategy might need it\n        this._doLayout();\n    }\n};\nDiffEditorWidget.ONE_OVERVIEW_WIDTH = 15;\nDiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH = 30;\nDiffEditorWidget.UPDATE_DIFF_DECORATIONS_DELAY = 200; // ms\nDiffEditorWidget = __decorate([\n    __param(3, IClipboardService),\n    __param(4, IContextKeyService),\n    __param(5, IInstantiationService),\n    __param(6, ICodeEditorService),\n    __param(7, IThemeService),\n    __param(8, INotificationService),\n    __param(9, IContextMenuService),\n    __param(10, IEditorProgressService)\n], DiffEditorWidget);\nexport { DiffEditorWidget };\nclass DiffEditorWidgetStyle extends Disposable {\n    constructor(dataSource) {\n        super();\n        this._dataSource = dataSource;\n        this._insertColor = null;\n        this._removeColor = null;\n    }\n    applyColors(theme) {\n        const newInsertColor = theme.getColor(diffOverviewRulerInserted) || (theme.getColor(diffInserted) || defaultInsertColor).transparent(2);\n        const newRemoveColor = theme.getColor(diffOverviewRulerRemoved) || (theme.getColor(diffRemoved) || defaultRemoveColor).transparent(2);\n        const hasChanges = !newInsertColor.equals(this._insertColor) || !newRemoveColor.equals(this._removeColor);\n        this._insertColor = newInsertColor;\n        this._removeColor = newRemoveColor;\n        return hasChanges;\n    }\n    getEditorsDiffDecorations(lineChanges, ignoreTrimWhitespace, renderIndicators, renderMarginRevertIcon, originalWhitespaces, modifiedWhitespaces) {\n        // Get view zones\n        modifiedWhitespaces = modifiedWhitespaces.sort((a, b) => {\n            return a.afterLineNumber - b.afterLineNumber;\n        });\n        originalWhitespaces = originalWhitespaces.sort((a, b) => {\n            return a.afterLineNumber - b.afterLineNumber;\n        });\n        const zones = this._getViewZones(lineChanges, originalWhitespaces, modifiedWhitespaces, renderIndicators);\n        // Get decorations & overview ruler zones\n        const originalDecorations = this._getOriginalEditorDecorations(zones, lineChanges, ignoreTrimWhitespace, renderIndicators);\n        const modifiedDecorations = this._getModifiedEditorDecorations(zones, lineChanges, ignoreTrimWhitespace, renderIndicators, renderMarginRevertIcon);\n        return {\n            original: {\n                decorations: originalDecorations.decorations,\n                overviewZones: originalDecorations.overviewZones,\n                zones: zones.original\n            },\n            modified: {\n                decorations: modifiedDecorations.decorations,\n                overviewZones: modifiedDecorations.overviewZones,\n                zones: zones.modified\n            }\n        };\n    }\n    setBoundarySashes(_sashes) {\n        // To be implemented by subclasses\n    }\n}\nclass ForeignViewZonesIterator {\n    constructor(source) {\n        this._source = source;\n        this._index = -1;\n        this.current = null;\n        this.advance();\n    }\n    advance() {\n        this._index++;\n        if (this._index < this._source.length) {\n            this.current = this._source[this._index];\n        }\n        else {\n            this.current = null;\n        }\n    }\n}\nclass ViewZonesComputer {\n    constructor(_lineChanges, _originalForeignVZ, _modifiedForeignVZ, _originalEditor, _modifiedEditor) {\n        this._lineChanges = _lineChanges;\n        this._originalForeignVZ = _originalForeignVZ;\n        this._modifiedForeignVZ = _modifiedForeignVZ;\n        this._originalEditor = _originalEditor;\n        this._modifiedEditor = _modifiedEditor;\n    }\n    static _getViewLineCount(editor, startLineNumber, endLineNumber) {\n        const model = editor.getModel();\n        const viewModel = editor._getViewModel();\n        if (model && viewModel) {\n            const viewRange = getViewRange(model, viewModel, startLineNumber, endLineNumber);\n            return (viewRange.endLineNumber - viewRange.startLineNumber + 1);\n        }\n        return (endLineNumber - startLineNumber + 1);\n    }\n    getViewZones() {\n        const originalLineHeight = this._originalEditor.getOption(65 /* EditorOption.lineHeight */);\n        const modifiedLineHeight = this._modifiedEditor.getOption(65 /* EditorOption.lineHeight */);\n        const originalHasWrapping = (this._originalEditor.getOption(143 /* EditorOption.wrappingInfo */).wrappingColumn !== -1);\n        const modifiedHasWrapping = (this._modifiedEditor.getOption(143 /* EditorOption.wrappingInfo */).wrappingColumn !== -1);\n        const hasWrapping = (originalHasWrapping || modifiedHasWrapping);\n        const originalModel = this._originalEditor.getModel();\n        const originalCoordinatesConverter = this._originalEditor._getViewModel().coordinatesConverter;\n        const modifiedCoordinatesConverter = this._modifiedEditor._getViewModel().coordinatesConverter;\n        const result = {\n            original: [],\n            modified: []\n        };\n        let lineChangeModifiedLength = 0;\n        let lineChangeOriginalLength = 0;\n        let originalEquivalentLineNumber = 0;\n        let modifiedEquivalentLineNumber = 0;\n        let originalEndEquivalentLineNumber = 0;\n        let modifiedEndEquivalentLineNumber = 0;\n        const sortMyViewZones = (a, b) => {\n            return a.afterLineNumber - b.afterLineNumber;\n        };\n        const addAndCombineIfPossible = (destination, item) => {\n            if (item.domNode === null && destination.length > 0) {\n                const lastItem = destination[destination.length - 1];\n                if (lastItem.afterLineNumber === item.afterLineNumber && lastItem.domNode === null) {\n                    lastItem.heightInLines += item.heightInLines;\n                    return;\n                }\n            }\n            destination.push(item);\n        };\n        const modifiedForeignVZ = new ForeignViewZonesIterator(this._modifiedForeignVZ);\n        const originalForeignVZ = new ForeignViewZonesIterator(this._originalForeignVZ);\n        let lastOriginalLineNumber = 1;\n        let lastModifiedLineNumber = 1;\n        // In order to include foreign view zones after the last line change, the for loop will iterate once more after the end of the `lineChanges` array\n        for (let i = 0, length = this._lineChanges.length; i <= length; i++) {\n            const lineChange = (i < length ? this._lineChanges[i] : null);\n            if (lineChange !== null) {\n                originalEquivalentLineNumber = lineChange.originalStartLineNumber + (lineChange.originalEndLineNumber > 0 ? -1 : 0);\n                modifiedEquivalentLineNumber = lineChange.modifiedStartLineNumber + (lineChange.modifiedEndLineNumber > 0 ? -1 : 0);\n                lineChangeOriginalLength = (lineChange.originalEndLineNumber > 0 ? ViewZonesComputer._getViewLineCount(this._originalEditor, lineChange.originalStartLineNumber, lineChange.originalEndLineNumber) : 0);\n                lineChangeModifiedLength = (lineChange.modifiedEndLineNumber > 0 ? ViewZonesComputer._getViewLineCount(this._modifiedEditor, lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber) : 0);\n                originalEndEquivalentLineNumber = Math.max(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber);\n                modifiedEndEquivalentLineNumber = Math.max(lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber);\n            }\n            else {\n                // Increase to very large value to get the producing tests of foreign view zones running\n                originalEquivalentLineNumber += 10000000 + lineChangeOriginalLength;\n                modifiedEquivalentLineNumber += 10000000 + lineChangeModifiedLength;\n                originalEndEquivalentLineNumber = originalEquivalentLineNumber;\n                modifiedEndEquivalentLineNumber = modifiedEquivalentLineNumber;\n            }\n            // Each step produces view zones, and after producing them, we try to cancel them out, to avoid empty-empty view zone cases\n            let stepOriginal = [];\n            let stepModified = [];\n            // ---------------------------- PRODUCE VIEW ZONES\n            // [PRODUCE] View zones due to line mapping differences (equal lines but wrapped differently)\n            if (hasWrapping) {\n                let count;\n                if (lineChange) {\n                    if (lineChange.originalEndLineNumber > 0) {\n                        count = lineChange.originalStartLineNumber - lastOriginalLineNumber;\n                    }\n                    else {\n                        count = lineChange.modifiedStartLineNumber - lastModifiedLineNumber;\n                    }\n                }\n                else {\n                    // `lastOriginalLineNumber` has not been looked at yet\n                    count = originalModel.getLineCount() - lastOriginalLineNumber + 1;\n                }\n                for (let i = 0; i < count; i++) {\n                    const originalLineNumber = lastOriginalLineNumber + i;\n                    const modifiedLineNumber = lastModifiedLineNumber + i;\n                    const originalViewLineCount = originalCoordinatesConverter.getModelLineViewLineCount(originalLineNumber);\n                    const modifiedViewLineCount = modifiedCoordinatesConverter.getModelLineViewLineCount(modifiedLineNumber);\n                    if (originalViewLineCount < modifiedViewLineCount) {\n                        stepOriginal.push({\n                            afterLineNumber: originalLineNumber,\n                            heightInLines: modifiedViewLineCount - originalViewLineCount,\n                            domNode: null,\n                            marginDomNode: null\n                        });\n                    }\n                    else if (originalViewLineCount > modifiedViewLineCount) {\n                        stepModified.push({\n                            afterLineNumber: modifiedLineNumber,\n                            heightInLines: originalViewLineCount - modifiedViewLineCount,\n                            domNode: null,\n                            marginDomNode: null\n                        });\n                    }\n                }\n                if (lineChange) {\n                    lastOriginalLineNumber = (lineChange.originalEndLineNumber > 0 ? lineChange.originalEndLineNumber : lineChange.originalStartLineNumber) + 1;\n                    lastModifiedLineNumber = (lineChange.modifiedEndLineNumber > 0 ? lineChange.modifiedEndLineNumber : lineChange.modifiedStartLineNumber) + 1;\n                }\n            }\n            // [PRODUCE] View zone(s) in original-side due to foreign view zone(s) in modified-side\n            while (modifiedForeignVZ.current && modifiedForeignVZ.current.afterLineNumber <= modifiedEndEquivalentLineNumber) {\n                let viewZoneLineNumber;\n                if (modifiedForeignVZ.current.afterLineNumber <= modifiedEquivalentLineNumber) {\n                    viewZoneLineNumber = originalEquivalentLineNumber - modifiedEquivalentLineNumber + modifiedForeignVZ.current.afterLineNumber;\n                }\n                else {\n                    viewZoneLineNumber = originalEndEquivalentLineNumber;\n                }\n                let marginDomNode = null;\n                if (lineChange && lineChange.modifiedStartLineNumber <= modifiedForeignVZ.current.afterLineNumber && modifiedForeignVZ.current.afterLineNumber <= lineChange.modifiedEndLineNumber) {\n                    marginDomNode = this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion();\n                }\n                stepOriginal.push({\n                    afterLineNumber: viewZoneLineNumber,\n                    heightInLines: modifiedForeignVZ.current.height / modifiedLineHeight,\n                    domNode: null,\n                    marginDomNode: marginDomNode\n                });\n                modifiedForeignVZ.advance();\n            }\n            // [PRODUCE] View zone(s) in modified-side due to foreign view zone(s) in original-side\n            while (originalForeignVZ.current && originalForeignVZ.current.afterLineNumber <= originalEndEquivalentLineNumber) {\n                let viewZoneLineNumber;\n                if (originalForeignVZ.current.afterLineNumber <= originalEquivalentLineNumber) {\n                    viewZoneLineNumber = modifiedEquivalentLineNumber - originalEquivalentLineNumber + originalForeignVZ.current.afterLineNumber;\n                }\n                else {\n                    viewZoneLineNumber = modifiedEndEquivalentLineNumber;\n                }\n                stepModified.push({\n                    afterLineNumber: viewZoneLineNumber,\n                    heightInLines: originalForeignVZ.current.height / originalLineHeight,\n                    domNode: null\n                });\n                originalForeignVZ.advance();\n            }\n            if (lineChange !== null && isChangeOrInsert(lineChange)) {\n                const r = this._produceOriginalFromDiff(lineChange, lineChangeOriginalLength, lineChangeModifiedLength);\n                if (r) {\n                    stepOriginal.push(r);\n                }\n            }\n            if (lineChange !== null && isChangeOrDelete(lineChange)) {\n                const r = this._produceModifiedFromDiff(lineChange, lineChangeOriginalLength, lineChangeModifiedLength);\n                if (r) {\n                    stepModified.push(r);\n                }\n            }\n            // ---------------------------- END PRODUCE VIEW ZONES\n            // ---------------------------- EMIT MINIMAL VIEW ZONES\n            // [CANCEL & EMIT] Try to cancel view zones out\n            let stepOriginalIndex = 0;\n            let stepModifiedIndex = 0;\n            stepOriginal = stepOriginal.sort(sortMyViewZones);\n            stepModified = stepModified.sort(sortMyViewZones);\n            while (stepOriginalIndex < stepOriginal.length && stepModifiedIndex < stepModified.length) {\n                const original = stepOriginal[stepOriginalIndex];\n                const modified = stepModified[stepModifiedIndex];\n                const originalDelta = original.afterLineNumber - originalEquivalentLineNumber;\n                const modifiedDelta = modified.afterLineNumber - modifiedEquivalentLineNumber;\n                if (originalDelta < modifiedDelta) {\n                    addAndCombineIfPossible(result.original, original);\n                    stepOriginalIndex++;\n                }\n                else if (modifiedDelta < originalDelta) {\n                    addAndCombineIfPossible(result.modified, modified);\n                    stepModifiedIndex++;\n                }\n                else if (original.shouldNotShrink) {\n                    addAndCombineIfPossible(result.original, original);\n                    stepOriginalIndex++;\n                }\n                else if (modified.shouldNotShrink) {\n                    addAndCombineIfPossible(result.modified, modified);\n                    stepModifiedIndex++;\n                }\n                else {\n                    if (original.heightInLines >= modified.heightInLines) {\n                        // modified view zone gets removed\n                        original.heightInLines -= modified.heightInLines;\n                        stepModifiedIndex++;\n                    }\n                    else {\n                        // original view zone gets removed\n                        modified.heightInLines -= original.heightInLines;\n                        stepOriginalIndex++;\n                    }\n                }\n            }\n            // [EMIT] Remaining original view zones\n            while (stepOriginalIndex < stepOriginal.length) {\n                addAndCombineIfPossible(result.original, stepOriginal[stepOriginalIndex]);\n                stepOriginalIndex++;\n            }\n            // [EMIT] Remaining modified view zones\n            while (stepModifiedIndex < stepModified.length) {\n                addAndCombineIfPossible(result.modified, stepModified[stepModifiedIndex]);\n                stepModifiedIndex++;\n            }\n            // ---------------------------- END EMIT MINIMAL VIEW ZONES\n        }\n        return {\n            original: ViewZonesComputer._ensureDomNodes(result.original),\n            modified: ViewZonesComputer._ensureDomNodes(result.modified),\n        };\n    }\n    static _ensureDomNodes(zones) {\n        return zones.map((z) => {\n            if (!z.domNode) {\n                z.domNode = createFakeLinesDiv();\n            }\n            return z;\n        });\n    }\n}\nfunction createDecoration(startLineNumber, startColumn, endLineNumber, endColumn, options) {\n    return {\n        range: new Range(startLineNumber, startColumn, endLineNumber, endColumn),\n        options: options\n    };\n}\nconst DECORATIONS = {\n    arrowRevertChange: ModelDecorationOptions.register({\n        description: 'diff-editor-arrow-revert-change',\n        glyphMarginHoverMessage: new MarkdownString(undefined, { isTrusted: true, supportThemeIcons: true }).appendMarkdown(nls.localize('revertChangeHoverMessage', 'Click to revert change')),\n        glyphMarginClassName: 'arrow-revert-change ' + ThemeIcon.asClassName(Codicon.arrowRight),\n        zIndex: 10001,\n    }),\n    charDelete: ModelDecorationOptions.register({\n        description: 'diff-editor-char-delete',\n        className: 'char-delete'\n    }),\n    charDeleteWholeLine: ModelDecorationOptions.register({\n        description: 'diff-editor-char-delete-whole-line',\n        className: 'char-delete',\n        isWholeLine: true\n    }),\n    charInsert: ModelDecorationOptions.register({\n        description: 'diff-editor-char-insert',\n        className: 'char-insert'\n    }),\n    charInsertWholeLine: ModelDecorationOptions.register({\n        description: 'diff-editor-char-insert-whole-line',\n        className: 'char-insert',\n        isWholeLine: true\n    }),\n    lineInsert: ModelDecorationOptions.register({\n        description: 'diff-editor-line-insert',\n        className: \"line-insert\" /* DiffEditorLineClasses.Insert */,\n        marginClassName: 'gutter-insert',\n        isWholeLine: true\n    }),\n    lineInsertWithSign: ModelDecorationOptions.register({\n        description: 'diff-editor-line-insert-with-sign',\n        className: \"line-insert\" /* DiffEditorLineClasses.Insert */,\n        linesDecorationsClassName: 'insert-sign ' + ThemeIcon.asClassName(diffInsertIcon),\n        marginClassName: 'gutter-insert',\n        isWholeLine: true\n    }),\n    lineDelete: ModelDecorationOptions.register({\n        description: 'diff-editor-line-delete',\n        className: \"line-delete\" /* DiffEditorLineClasses.Delete */,\n        marginClassName: 'gutter-delete',\n        isWholeLine: true\n    }),\n    lineDeleteWithSign: ModelDecorationOptions.register({\n        description: 'diff-editor-line-delete-with-sign',\n        className: \"line-delete\" /* DiffEditorLineClasses.Delete */,\n        linesDecorationsClassName: 'delete-sign ' + ThemeIcon.asClassName(diffRemoveIcon),\n        marginClassName: 'gutter-delete',\n        isWholeLine: true\n    }),\n    lineDeleteMargin: ModelDecorationOptions.register({\n        description: 'diff-editor-line-delete-margin',\n        marginClassName: 'gutter-delete',\n    })\n};\nclass DiffEditorWidgetSideBySide extends DiffEditorWidgetStyle {\n    constructor(dataSource, enableSplitViewResizing, defaultSashRatio) {\n        super(dataSource);\n        this._disableSash = (enableSplitViewResizing === false);\n        this._defaultRatio = defaultSashRatio;\n        this._sashRatio = null;\n        this._sashPosition = null;\n        this._startSashPosition = null;\n        this._sash = this._register(new Sash(this._dataSource.getContainerDomNode(), this, { orientation: 0 /* Orientation.VERTICAL */ }));\n        if (this._disableSash) {\n            this._sash.state = 0 /* SashState.Disabled */;\n        }\n        this._sash.onDidStart(() => this._onSashDragStart());\n        this._sash.onDidChange((e) => this._onSashDrag(e));\n        this._sash.onDidEnd(() => this._onSashDragEnd());\n        this._sash.onDidReset(() => this._onSashReset());\n    }\n    setEnableSplitViewResizing(enableSplitViewResizing, defaultRatio) {\n        this._defaultRatio = defaultRatio;\n        const newDisableSash = (enableSplitViewResizing === false);\n        if (this._disableSash !== newDisableSash) {\n            this._disableSash = newDisableSash;\n            this._sash.state = this._disableSash ? 0 /* SashState.Disabled */ : 3 /* SashState.Enabled */;\n        }\n    }\n    layout(sashRatio = this._sashRatio || this._defaultRatio) {\n        const w = this._dataSource.getWidth();\n        const contentWidth = w - (this._dataSource.getOptions().renderOverviewRuler ? DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH : 0);\n        let sashPosition = Math.floor((sashRatio || this._defaultRatio) * contentWidth);\n        const midPoint = Math.floor(this._defaultRatio * contentWidth);\n        sashPosition = this._disableSash ? midPoint : sashPosition || midPoint;\n        if (contentWidth > DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH * 2) {\n            if (sashPosition < DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH) {\n                sashPosition = DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH;\n            }\n            if (sashPosition > contentWidth - DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH) {\n                sashPosition = contentWidth - DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH;\n            }\n        }\n        else {\n            sashPosition = midPoint;\n        }\n        if (this._sashPosition !== sashPosition) {\n            this._sashPosition = sashPosition;\n        }\n        this._sash.layout();\n        return this._sashPosition;\n    }\n    _onSashDragStart() {\n        this._startSashPosition = this._sashPosition;\n    }\n    _onSashDrag(e) {\n        const w = this._dataSource.getWidth();\n        const contentWidth = w - (this._dataSource.getOptions().renderOverviewRuler ? DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH : 0);\n        const sashPosition = this.layout((this._startSashPosition + (e.currentX - e.startX)) / contentWidth);\n        this._sashRatio = sashPosition / contentWidth;\n        this._dataSource.relayoutEditors();\n    }\n    _onSashDragEnd() {\n        this._sash.layout();\n    }\n    _onSashReset() {\n        this._sashRatio = this._defaultRatio;\n        this._dataSource.relayoutEditors();\n        this._sash.layout();\n    }\n    getVerticalSashTop(sash) {\n        return 0;\n    }\n    getVerticalSashLeft(sash) {\n        return this._sashPosition;\n    }\n    getVerticalSashHeight(sash) {\n        return this._dataSource.getHeight();\n    }\n    setBoundarySashes(sashes) {\n        this._sash.orthogonalEndSash = sashes.bottom;\n    }\n    _getViewZones(lineChanges, originalForeignVZ, modifiedForeignVZ) {\n        const originalEditor = this._dataSource.getOriginalEditor();\n        const modifiedEditor = this._dataSource.getModifiedEditor();\n        const c = new SideBySideViewZonesComputer(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor);\n        return c.getViewZones();\n    }\n    _getOriginalEditorDecorations(zones, lineChanges, ignoreTrimWhitespace, renderIndicators) {\n        const originalEditor = this._dataSource.getOriginalEditor();\n        const overviewZoneColor = String(this._removeColor);\n        const result = {\n            decorations: [],\n            overviewZones: []\n        };\n        const originalModel = originalEditor.getModel();\n        const originalViewModel = originalEditor._getViewModel();\n        for (const lineChange of lineChanges) {\n            if (isChangeOrDelete(lineChange)) {\n                result.decorations.push({\n                    range: new Range(lineChange.originalStartLineNumber, 1, lineChange.originalEndLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n                    options: (renderIndicators ? DECORATIONS.lineDeleteWithSign : DECORATIONS.lineDelete)\n                });\n                if (!isChangeOrInsert(lineChange) || !lineChange.charChanges) {\n                    result.decorations.push(createDecoration(lineChange.originalStartLineNumber, 1, lineChange.originalEndLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */, DECORATIONS.charDeleteWholeLine));\n                }\n                const viewRange = getViewRange(originalModel, originalViewModel, lineChange.originalStartLineNumber, lineChange.originalEndLineNumber);\n                result.overviewZones.push(new OverviewRulerZone(viewRange.startLineNumber, viewRange.endLineNumber, /*use endLineNumber*/ 0, overviewZoneColor));\n                if (lineChange.charChanges) {\n                    for (const charChange of lineChange.charChanges) {\n                        if (isCharChangeOrDelete(charChange)) {\n                            if (ignoreTrimWhitespace) {\n                                for (let lineNumber = charChange.originalStartLineNumber; lineNumber <= charChange.originalEndLineNumber; lineNumber++) {\n                                    let startColumn;\n                                    let endColumn;\n                                    if (lineNumber === charChange.originalStartLineNumber) {\n                                        startColumn = charChange.originalStartColumn;\n                                    }\n                                    else {\n                                        startColumn = originalModel.getLineFirstNonWhitespaceColumn(lineNumber);\n                                    }\n                                    if (lineNumber === charChange.originalEndLineNumber) {\n                                        endColumn = charChange.originalEndColumn;\n                                    }\n                                    else {\n                                        endColumn = originalModel.getLineLastNonWhitespaceColumn(lineNumber);\n                                    }\n                                    result.decorations.push(createDecoration(lineNumber, startColumn, lineNumber, endColumn, DECORATIONS.charDelete));\n                                }\n                            }\n                            else {\n                                result.decorations.push(createDecoration(charChange.originalStartLineNumber, charChange.originalStartColumn, charChange.originalEndLineNumber, charChange.originalEndColumn, DECORATIONS.charDelete));\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return result;\n    }\n    _getModifiedEditorDecorations(zones, lineChanges, ignoreTrimWhitespace, renderIndicators, renderMarginRevertIcon) {\n        const modifiedEditor = this._dataSource.getModifiedEditor();\n        const overviewZoneColor = String(this._insertColor);\n        const result = {\n            decorations: [],\n            overviewZones: []\n        };\n        const modifiedModel = modifiedEditor.getModel();\n        const modifiedViewModel = modifiedEditor._getViewModel();\n        for (const lineChange of lineChanges) {\n            // Arrows for reverting changes.\n            if (renderMarginRevertIcon) {\n                if (lineChange.modifiedEndLineNumber > 0) {\n                    result.decorations.push({\n                        range: new Range(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedStartLineNumber, 1),\n                        options: DECORATIONS.arrowRevertChange\n                    });\n                }\n                else {\n                    const viewZone = zones.modified.find(z => z.afterLineNumber === lineChange.modifiedStartLineNumber);\n                    if (viewZone) {\n                        viewZone.marginDomNode = createViewZoneMarginArrow();\n                    }\n                }\n            }\n            if (isChangeOrInsert(lineChange)) {\n                result.decorations.push({\n                    range: new Range(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n                    options: (renderIndicators ? DECORATIONS.lineInsertWithSign : DECORATIONS.lineInsert)\n                });\n                if (!isChangeOrDelete(lineChange) || !lineChange.charChanges) {\n                    result.decorations.push(createDecoration(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */, DECORATIONS.charInsertWholeLine));\n                }\n                const viewRange = getViewRange(modifiedModel, modifiedViewModel, lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber);\n                result.overviewZones.push(new OverviewRulerZone(viewRange.startLineNumber, viewRange.endLineNumber, /*use endLineNumber*/ 0, overviewZoneColor));\n                if (lineChange.charChanges) {\n                    for (const charChange of lineChange.charChanges) {\n                        if (isCharChangeOrInsert(charChange)) {\n                            if (ignoreTrimWhitespace) {\n                                for (let lineNumber = charChange.modifiedStartLineNumber; lineNumber <= charChange.modifiedEndLineNumber; lineNumber++) {\n                                    let startColumn;\n                                    let endColumn;\n                                    if (lineNumber === charChange.modifiedStartLineNumber) {\n                                        startColumn = charChange.modifiedStartColumn;\n                                    }\n                                    else {\n                                        startColumn = modifiedModel.getLineFirstNonWhitespaceColumn(lineNumber);\n                                    }\n                                    if (lineNumber === charChange.modifiedEndLineNumber) {\n                                        endColumn = charChange.modifiedEndColumn;\n                                    }\n                                    else {\n                                        endColumn = modifiedModel.getLineLastNonWhitespaceColumn(lineNumber);\n                                    }\n                                    result.decorations.push(createDecoration(lineNumber, startColumn, lineNumber, endColumn, DECORATIONS.charInsert));\n                                }\n                            }\n                            else {\n                                result.decorations.push(createDecoration(charChange.modifiedStartLineNumber, charChange.modifiedStartColumn, charChange.modifiedEndLineNumber, charChange.modifiedEndColumn, DECORATIONS.charInsert));\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return result;\n    }\n}\nDiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH = 100;\nclass SideBySideViewZonesComputer extends ViewZonesComputer {\n    constructor(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor) {\n        super(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor);\n    }\n    _createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion() {\n        return null;\n    }\n    _produceOriginalFromDiff(lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\n        if (lineChangeModifiedLength > lineChangeOriginalLength) {\n            return {\n                afterLineNumber: Math.max(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber),\n                heightInLines: (lineChangeModifiedLength - lineChangeOriginalLength),\n                domNode: null\n            };\n        }\n        return null;\n    }\n    _produceModifiedFromDiff(lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\n        if (lineChangeOriginalLength > lineChangeModifiedLength) {\n            return {\n                afterLineNumber: Math.max(lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber),\n                heightInLines: (lineChangeOriginalLength - lineChangeModifiedLength),\n                domNode: null\n            };\n        }\n        return null;\n    }\n}\nclass DiffEditorWidgetInline extends DiffEditorWidgetStyle {\n    constructor(dataSource, enableSplitViewResizing) {\n        super(dataSource);\n        this._decorationsLeft = dataSource.getOriginalEditor().getLayoutInfo().decorationsLeft;\n        this._register(dataSource.getOriginalEditor().onDidLayoutChange((layoutInfo) => {\n            if (this._decorationsLeft !== layoutInfo.decorationsLeft) {\n                this._decorationsLeft = layoutInfo.decorationsLeft;\n                dataSource.relayoutEditors();\n            }\n        }));\n    }\n    setEnableSplitViewResizing(enableSplitViewResizing) {\n        // Nothing to do..\n    }\n    _getViewZones(lineChanges, originalForeignVZ, modifiedForeignVZ, renderIndicators) {\n        const originalEditor = this._dataSource.getOriginalEditor();\n        const modifiedEditor = this._dataSource.getModifiedEditor();\n        const computer = new InlineViewZonesComputer(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor, renderIndicators);\n        return computer.getViewZones();\n    }\n    _getOriginalEditorDecorations(zones, lineChanges, ignoreTrimWhitespace, renderIndicators) {\n        const overviewZoneColor = String(this._removeColor);\n        const result = {\n            decorations: [],\n            overviewZones: []\n        };\n        const originalEditor = this._dataSource.getOriginalEditor();\n        const originalModel = originalEditor.getModel();\n        const originalViewModel = originalEditor._getViewModel();\n        let zoneIndex = 0;\n        for (const lineChange of lineChanges) {\n            // Add overview zones in the overview ruler\n            if (isChangeOrDelete(lineChange)) {\n                result.decorations.push({\n                    range: new Range(lineChange.originalStartLineNumber, 1, lineChange.originalEndLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n                    options: DECORATIONS.lineDeleteMargin\n                });\n                while (zoneIndex < zones.modified.length) {\n                    const zone = zones.modified[zoneIndex];\n                    if (zone.diff && zone.diff.originalStartLineNumber >= lineChange.originalStartLineNumber) {\n                        break;\n                    }\n                    zoneIndex++;\n                }\n                let zoneHeightInLines = 0;\n                if (zoneIndex < zones.modified.length) {\n                    const zone = zones.modified[zoneIndex];\n                    if (zone.diff\n                        && zone.diff.originalStartLineNumber === lineChange.originalStartLineNumber\n                        && zone.diff.originalEndLineNumber === lineChange.originalEndLineNumber\n                        && zone.diff.modifiedStartLineNumber === lineChange.modifiedStartLineNumber\n                        && zone.diff.modifiedEndLineNumber === lineChange.modifiedEndLineNumber) {\n                        zoneHeightInLines = zone.heightInLines;\n                    }\n                }\n                const viewRange = getViewRange(originalModel, originalViewModel, lineChange.originalStartLineNumber, lineChange.originalEndLineNumber);\n                result.overviewZones.push(new OverviewRulerZone(viewRange.startLineNumber, viewRange.endLineNumber, zoneHeightInLines, overviewZoneColor));\n            }\n        }\n        return result;\n    }\n    _getModifiedEditorDecorations(zones, lineChanges, ignoreTrimWhitespace, renderIndicators, renderMarginRevertIcon) {\n        const modifiedEditor = this._dataSource.getModifiedEditor();\n        const overviewZoneColor = String(this._insertColor);\n        const result = {\n            decorations: [],\n            overviewZones: []\n        };\n        const modifiedModel = modifiedEditor.getModel();\n        const modifiedViewModel = modifiedEditor._getViewModel();\n        for (const lineChange of lineChanges) {\n            // Add decorations & overview zones\n            if (isChangeOrInsert(lineChange)) {\n                result.decorations.push({\n                    range: new Range(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n                    options: (renderIndicators ? DECORATIONS.lineInsertWithSign : DECORATIONS.lineInsert)\n                });\n                const viewRange = getViewRange(modifiedModel, modifiedViewModel, lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber);\n                result.overviewZones.push(new OverviewRulerZone(viewRange.startLineNumber, viewRange.endLineNumber, /*use endLineNumber*/ 0, overviewZoneColor));\n                if (lineChange.charChanges) {\n                    for (const charChange of lineChange.charChanges) {\n                        if (isCharChangeOrInsert(charChange)) {\n                            if (ignoreTrimWhitespace) {\n                                for (let lineNumber = charChange.modifiedStartLineNumber; lineNumber <= charChange.modifiedEndLineNumber; lineNumber++) {\n                                    let startColumn;\n                                    let endColumn;\n                                    if (lineNumber === charChange.modifiedStartLineNumber) {\n                                        startColumn = charChange.modifiedStartColumn;\n                                    }\n                                    else {\n                                        startColumn = modifiedModel.getLineFirstNonWhitespaceColumn(lineNumber);\n                                    }\n                                    if (lineNumber === charChange.modifiedEndLineNumber) {\n                                        endColumn = charChange.modifiedEndColumn;\n                                    }\n                                    else {\n                                        endColumn = modifiedModel.getLineLastNonWhitespaceColumn(lineNumber);\n                                    }\n                                    result.decorations.push(createDecoration(lineNumber, startColumn, lineNumber, endColumn, DECORATIONS.charInsert));\n                                }\n                            }\n                            else {\n                                result.decorations.push(createDecoration(charChange.modifiedStartLineNumber, charChange.modifiedStartColumn, charChange.modifiedEndLineNumber, charChange.modifiedEndColumn, DECORATIONS.charInsert));\n                            }\n                        }\n                    }\n                }\n                else {\n                    result.decorations.push(createDecoration(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */, DECORATIONS.charInsertWholeLine));\n                }\n            }\n        }\n        return result;\n    }\n    layout() {\n        // An editor should not be smaller than 5px\n        return Math.max(5, this._decorationsLeft);\n    }\n}\nclass InlineViewZonesComputer extends ViewZonesComputer {\n    constructor(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor, renderIndicators) {\n        super(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor);\n        this._originalModel = originalEditor.getModel();\n        this._renderIndicators = renderIndicators;\n        this._pendingLineChange = [];\n        this._pendingViewZones = [];\n        this._lineBreaksComputer = this._modifiedEditor._getViewModel().createLineBreaksComputer();\n    }\n    getViewZones() {\n        const result = super.getViewZones();\n        this._finalize(result);\n        return result;\n    }\n    _createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion() {\n        const result = document.createElement('div');\n        result.className = 'inline-added-margin-view-zone';\n        return result;\n    }\n    _produceOriginalFromDiff(lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\n        const marginDomNode = document.createElement('div');\n        marginDomNode.className = 'inline-added-margin-view-zone';\n        return {\n            afterLineNumber: Math.max(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber),\n            heightInLines: lineChangeModifiedLength,\n            domNode: document.createElement('div'),\n            marginDomNode: marginDomNode\n        };\n    }\n    _produceModifiedFromDiff(lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\n        const domNode = document.createElement('div');\n        domNode.className = `view-lines line-delete ${MOUSE_CURSOR_TEXT_CSS_CLASS_NAME}`;\n        const marginDomNode = document.createElement('div');\n        marginDomNode.className = 'inline-deleted-margin-view-zone';\n        const viewZone = {\n            shouldNotShrink: true,\n            afterLineNumber: (lineChange.modifiedEndLineNumber === 0 ? lineChange.modifiedStartLineNumber : lineChange.modifiedStartLineNumber - 1),\n            heightInLines: lineChangeOriginalLength,\n            minWidthInPx: 0,\n            domNode: domNode,\n            marginDomNode: marginDomNode,\n            diff: {\n                originalStartLineNumber: lineChange.originalStartLineNumber,\n                originalEndLineNumber: lineChange.originalEndLineNumber,\n                modifiedStartLineNumber: lineChange.modifiedStartLineNumber,\n                modifiedEndLineNumber: lineChange.modifiedEndLineNumber,\n                originalModel: this._originalModel,\n                viewLineCounts: null,\n            }\n        };\n        for (let lineNumber = lineChange.originalStartLineNumber; lineNumber <= lineChange.originalEndLineNumber; lineNumber++) {\n            this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(lineNumber), null, null);\n        }\n        this._pendingLineChange.push(lineChange);\n        this._pendingViewZones.push(viewZone);\n        return viewZone;\n    }\n    _finalize(result) {\n        const modifiedEditorOptions = this._modifiedEditor.getOptions();\n        const tabSize = this._modifiedEditor.getModel().getOptions().tabSize;\n        const fontInfo = modifiedEditorOptions.get(49 /* EditorOption.fontInfo */);\n        const disableMonospaceOptimizations = modifiedEditorOptions.get(32 /* EditorOption.disableMonospaceOptimizations */);\n        const typicalHalfwidthCharacterWidth = fontInfo.typicalHalfwidthCharacterWidth;\n        const scrollBeyondLastColumn = modifiedEditorOptions.get(102 /* EditorOption.scrollBeyondLastColumn */);\n        const mightContainNonBasicASCII = this._originalModel.mightContainNonBasicASCII();\n        const mightContainRTL = this._originalModel.mightContainRTL();\n        const lineHeight = modifiedEditorOptions.get(65 /* EditorOption.lineHeight */);\n        const layoutInfo = modifiedEditorOptions.get(142 /* EditorOption.layoutInfo */);\n        const lineDecorationsWidth = layoutInfo.decorationsWidth;\n        const stopRenderingLineAfter = modifiedEditorOptions.get(115 /* EditorOption.stopRenderingLineAfter */);\n        const renderWhitespace = modifiedEditorOptions.get(97 /* EditorOption.renderWhitespace */);\n        const renderControlCharacters = modifiedEditorOptions.get(92 /* EditorOption.renderControlCharacters */);\n        const fontLigatures = modifiedEditorOptions.get(50 /* EditorOption.fontLigatures */);\n        const lineBreaks = this._lineBreaksComputer.finalize();\n        let lineBreakIndex = 0;\n        for (let i = 0; i < this._pendingLineChange.length; i++) {\n            const lineChange = this._pendingLineChange[i];\n            const viewZone = this._pendingViewZones[i];\n            const domNode = viewZone.domNode;\n            applyFontInfo(domNode, fontInfo);\n            const marginDomNode = viewZone.marginDomNode;\n            applyFontInfo(marginDomNode, fontInfo);\n            const decorations = [];\n            if (lineChange.charChanges) {\n                for (const charChange of lineChange.charChanges) {\n                    if (isCharChangeOrDelete(charChange)) {\n                        decorations.push(new InlineDecoration(new Range(charChange.originalStartLineNumber, charChange.originalStartColumn, charChange.originalEndLineNumber, charChange.originalEndColumn), 'char-delete', 0 /* InlineDecorationType.Regular */));\n                    }\n                }\n            }\n            const hasCharChanges = (decorations.length > 0);\n            const sb = new StringBuilder(10000);\n            let maxCharsPerLine = 0;\n            let renderedLineCount = 0;\n            let viewLineCounts = null;\n            for (let lineNumber = lineChange.originalStartLineNumber; lineNumber <= lineChange.originalEndLineNumber; lineNumber++) {\n                const lineIndex = lineNumber - lineChange.originalStartLineNumber;\n                const lineTokens = this._originalModel.tokenization.getLineTokens(lineNumber);\n                const lineContent = lineTokens.getLineContent();\n                const lineBreakData = lineBreaks[lineBreakIndex++];\n                const actualDecorations = LineDecoration.filter(decorations, lineNumber, 1, lineContent.length + 1);\n                if (lineBreakData) {\n                    let lastBreakOffset = 0;\n                    for (const breakOffset of lineBreakData.breakOffsets) {\n                        const viewLineTokens = lineTokens.sliceAndInflate(lastBreakOffset, breakOffset, 0);\n                        const viewLineContent = lineContent.substring(lastBreakOffset, breakOffset);\n                        maxCharsPerLine = Math.max(maxCharsPerLine, this._renderOriginalLine(renderedLineCount++, viewLineContent, viewLineTokens, LineDecoration.extractWrapped(actualDecorations, lastBreakOffset, breakOffset), hasCharChanges, mightContainNonBasicASCII, mightContainRTL, fontInfo, disableMonospaceOptimizations, lineHeight, lineDecorationsWidth, stopRenderingLineAfter, renderWhitespace, renderControlCharacters, fontLigatures, tabSize, sb, marginDomNode));\n                        lastBreakOffset = breakOffset;\n                    }\n                    if (!viewLineCounts) {\n                        viewLineCounts = [];\n                    }\n                    // make sure all lines before this one have an entry in `viewLineCounts`\n                    while (viewLineCounts.length < lineIndex) {\n                        viewLineCounts[viewLineCounts.length] = 1;\n                    }\n                    viewLineCounts[lineIndex] = lineBreakData.breakOffsets.length;\n                    viewZone.heightInLines += (lineBreakData.breakOffsets.length - 1);\n                    const marginDomNode2 = document.createElement('div');\n                    marginDomNode2.className = 'gutter-delete';\n                    result.original.push({\n                        afterLineNumber: lineNumber,\n                        afterColumn: 0,\n                        heightInLines: lineBreakData.breakOffsets.length - 1,\n                        domNode: createFakeLinesDiv(),\n                        marginDomNode: marginDomNode2\n                    });\n                }\n                else {\n                    maxCharsPerLine = Math.max(maxCharsPerLine, this._renderOriginalLine(renderedLineCount++, lineContent, lineTokens, actualDecorations, hasCharChanges, mightContainNonBasicASCII, mightContainRTL, fontInfo, disableMonospaceOptimizations, lineHeight, lineDecorationsWidth, stopRenderingLineAfter, renderWhitespace, renderControlCharacters, fontLigatures, tabSize, sb, marginDomNode));\n                }\n            }\n            maxCharsPerLine += scrollBeyondLastColumn;\n            const html = sb.build();\n            const trustedhtml = diffEditorWidgetTtPolicy ? diffEditorWidgetTtPolicy.createHTML(html) : html;\n            domNode.innerHTML = trustedhtml;\n            viewZone.minWidthInPx = (maxCharsPerLine * typicalHalfwidthCharacterWidth);\n            if (viewLineCounts) {\n                // make sure all lines have an entry in `viewLineCounts`\n                const cnt = lineChange.originalEndLineNumber - lineChange.originalStartLineNumber;\n                while (viewLineCounts.length <= cnt) {\n                    viewLineCounts[viewLineCounts.length] = 1;\n                }\n            }\n            viewZone.diff.viewLineCounts = viewLineCounts;\n        }\n        result.original.sort((a, b) => {\n            return a.afterLineNumber - b.afterLineNumber;\n        });\n    }\n    _renderOriginalLine(renderedLineCount, lineContent, lineTokens, decorations, hasCharChanges, mightContainNonBasicASCII, mightContainRTL, fontInfo, disableMonospaceOptimizations, lineHeight, lineDecorationsWidth, stopRenderingLineAfter, renderWhitespace, renderControlCharacters, fontLigatures, tabSize, sb, marginDomNode) {\n        sb.appendString('<div class=\"view-line');\n        if (!hasCharChanges) {\n            // No char changes\n            sb.appendString(' char-delete');\n        }\n        sb.appendString('\" style=\"top:');\n        sb.appendString(String(renderedLineCount * lineHeight));\n        sb.appendString('px;width:1000000px;\">');\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, mightContainNonBasicASCII);\n        const containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, mightContainRTL);\n        const output = renderViewLine(new RenderLineInput((fontInfo.isMonospace && !disableMonospaceOptimizations), fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, decorations, tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, stopRenderingLineAfter, renderWhitespace, renderControlCharacters, fontLigatures !== EditorFontLigatures.OFF, null // Send no selections, original line cannot be selected\n        ), sb);\n        sb.appendString('</div>');\n        if (this._renderIndicators) {\n            const marginElement = document.createElement('div');\n            marginElement.className = `delete-sign ${ThemeIcon.asClassName(diffRemoveIcon)}`;\n            marginElement.setAttribute('style', `position:absolute;top:${renderedLineCount * lineHeight}px;width:${lineDecorationsWidth}px;height:${lineHeight}px;right:0;`);\n            marginDomNode.appendChild(marginElement);\n        }\n        return output.characterMapping.getHorizontalOffset(output.characterMapping.length);\n    }\n}\nfunction validateDiffWordWrap(value, defaultValue) {\n    return validateStringSetOption(value, defaultValue, ['off', 'on', 'inherit']);\n}\nfunction isChangeOrInsert(lineChange) {\n    return lineChange.modifiedEndLineNumber > 0;\n}\nfunction isChangeOrDelete(lineChange) {\n    return lineChange.originalEndLineNumber > 0;\n}\nfunction isCharChangeOrInsert(charChange) {\n    if (charChange.modifiedStartLineNumber === charChange.modifiedEndLineNumber) {\n        return charChange.modifiedEndColumn - charChange.modifiedStartColumn > 0;\n    }\n    return charChange.modifiedEndLineNumber - charChange.modifiedStartLineNumber > 0;\n}\nfunction isCharChangeOrDelete(charChange) {\n    if (charChange.originalStartLineNumber === charChange.originalEndLineNumber) {\n        return charChange.originalEndColumn - charChange.originalStartColumn > 0;\n    }\n    return charChange.originalEndLineNumber - charChange.originalStartLineNumber > 0;\n}\nfunction createFakeLinesDiv() {\n    const r = document.createElement('div');\n    r.className = 'diagonal-fill';\n    return r;\n}\nfunction createViewZoneMarginArrow() {\n    const arrow = document.createElement('div');\n    arrow.className = 'arrow-revert-change ' + ThemeIcon.asClassName(Codicon.arrowRight);\n    return dom.$('div', {}, arrow);\n}\nfunction getViewRange(model, viewModel, startLineNumber, endLineNumber) {\n    const lineCount = model.getLineCount();\n    startLineNumber = Math.min(lineCount, Math.max(1, startLineNumber));\n    endLineNumber = Math.min(lineCount, Math.max(1, endLineNumber));\n    return viewModel.coordinatesConverter.convertModelRangeToViewRange(new Range(startLineNumber, model.getLineMinColumn(startLineNumber), endLineNumber, model.getLineMaxColumn(endLineNumber)));\n}\nfunction validateDiffEditorOptions(options, defaults) {\n    return {\n        enableSplitViewResizing: validateBooleanOption(options.enableSplitViewResizing, defaults.enableSplitViewResizing),\n        splitViewDefaultRatio: clampedFloat(options.splitViewDefaultRatio, 0.5, 0.1, 0.9),\n        renderSideBySide: validateBooleanOption(options.renderSideBySide, defaults.renderSideBySide),\n        renderMarginRevertIcon: validateBooleanOption(options.renderMarginRevertIcon, defaults.renderMarginRevertIcon),\n        maxComputationTime: clampedInt(options.maxComputationTime, defaults.maxComputationTime, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n        maxFileSize: clampedInt(options.maxFileSize, defaults.maxFileSize, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n        ignoreTrimWhitespace: validateBooleanOption(options.ignoreTrimWhitespace, defaults.ignoreTrimWhitespace),\n        renderIndicators: validateBooleanOption(options.renderIndicators, defaults.renderIndicators),\n        originalEditable: validateBooleanOption(options.originalEditable, defaults.originalEditable),\n        diffCodeLens: validateBooleanOption(options.diffCodeLens, defaults.diffCodeLens),\n        renderOverviewRuler: validateBooleanOption(options.renderOverviewRuler, defaults.renderOverviewRuler),\n        diffWordWrap: validateDiffWordWrap(options.diffWordWrap, defaults.diffWordWrap),\n        diffAlgorithm: validateStringSetOption(options.diffAlgorithm, defaults.diffAlgorithm, ['legacy', 'advanced'], { 'smart': 'legacy', 'experimental': 'advanced' }),\n        accessibilityVerbose: validateBooleanOption(options.accessibilityVerbose, defaults.accessibilityVerbose),\n        experimental: {\n            collapseUnchangedRegions: false,\n        },\n        isInEmbeddedEditor: validateBooleanOption(options.isInEmbeddedEditor, defaults.isInEmbeddedEditor),\n        onlyShowAccessibleDiffViewer: false,\n    };\n}\nfunction changedDiffEditorOptions(a, b) {\n    return {\n        enableSplitViewResizing: (a.enableSplitViewResizing !== b.enableSplitViewResizing),\n        renderSideBySide: (a.renderSideBySide !== b.renderSideBySide),\n        renderMarginRevertIcon: (a.renderMarginRevertIcon !== b.renderMarginRevertIcon),\n        maxComputationTime: (a.maxComputationTime !== b.maxComputationTime),\n        maxFileSize: (a.maxFileSize !== b.maxFileSize),\n        ignoreTrimWhitespace: (a.ignoreTrimWhitespace !== b.ignoreTrimWhitespace),\n        renderIndicators: (a.renderIndicators !== b.renderIndicators),\n        originalEditable: (a.originalEditable !== b.originalEditable),\n        diffCodeLens: (a.diffCodeLens !== b.diffCodeLens),\n        renderOverviewRuler: (a.renderOverviewRuler !== b.renderOverviewRuler),\n        diffWordWrap: (a.diffWordWrap !== b.diffWordWrap),\n        diffAlgorithm: (a.diffAlgorithm !== b.diffAlgorithm),\n        accessibilityVerbose: (a.accessibilityVerbose !== b.accessibilityVerbose),\n    };\n}\nregisterThemingParticipant((theme, collector) => {\n    const diffDiagonalFillColor = theme.getColor(diffDiagonalFill);\n    collector.addRule(`\n\t.monaco-editor .diagonal-fill {\n\t\tbackground-image: linear-gradient(\n\t\t\t-45deg,\n\t\t\t${diffDiagonalFillColor} 12.5%,\n\t\t\t#0000 12.5%, #0000 50%,\n\t\t\t${diffDiagonalFillColor} 50%, ${diffDiagonalFillColor} 62.5%,\n\t\t\t#0000 62.5%, #0000 100%\n\t\t);\n\t\tbackground-size: 8px 8px;\n\t}\n\t`);\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { localize } from '../../../../nls.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nexport const diffInsertIcon = registerIcon('diff-insert', Codicon.add, localize('diffInsertIcon', 'Line decoration for inserts in the diff editor.'));\nexport const diffRemoveIcon = registerIcon('diff-remove', Codicon.remove, localize('diffRemoveIcon', 'Line decoration for removals in the diff editor.'));\nexport const diffLineAddDecorationBackgroundWithIndicator = ModelDecorationOptions.register({\n    className: 'line-insert',\n    description: 'line-insert',\n    isWholeLine: true,\n    linesDecorationsClassName: 'insert-sign ' + ThemeIcon.asClassName(diffInsertIcon),\n    marginClassName: 'gutter-insert',\n});\nexport const diffLineDeleteDecorationBackgroundWithIndicator = ModelDecorationOptions.register({\n    className: 'line-delete',\n    description: 'line-delete',\n    isWholeLine: true,\n    linesDecorationsClassName: 'delete-sign ' + ThemeIcon.asClassName(diffRemoveIcon),\n    marginClassName: 'gutter-delete',\n});\nexport const diffLineAddDecorationBackground = ModelDecorationOptions.register({\n    className: 'line-insert',\n    description: 'line-insert',\n    isWholeLine: true,\n    marginClassName: 'gutter-insert',\n});\nexport const diffLineDeleteDecorationBackground = ModelDecorationOptions.register({\n    className: 'line-delete',\n    description: 'line-delete',\n    isWholeLine: true,\n    marginClassName: 'gutter-delete',\n});\nexport const diffAddDecoration = ModelDecorationOptions.register({\n    className: 'char-insert',\n    description: 'char-insert',\n    shouldFillLineOnLineBreak: true,\n});\nexport const diffWholeLineAddDecoration = ModelDecorationOptions.register({\n    className: 'char-insert',\n    description: 'char-insert',\n    isWholeLine: true,\n});\nexport const diffAddDecorationEmpty = ModelDecorationOptions.register({\n    className: 'char-insert diff-range-empty',\n    description: 'char-insert diff-range-empty',\n});\nexport const diffDeleteDecoration = ModelDecorationOptions.register({\n    className: 'char-delete',\n    description: 'char-delete',\n    shouldFillLineOnLineBreak: true,\n});\nexport const diffWholeLineDeleteDecoration = ModelDecorationOptions.register({\n    className: 'char-delete',\n    description: 'char-delete',\n    isWholeLine: true,\n});\nexport const diffDeleteDecorationEmpty = ModelDecorationOptions.register({\n    className: 'char-delete diff-range-empty',\n    description: 'char-delete diff-range-empty',\n});\nexport const arrowRevertChange = ModelDecorationOptions.register({\n    description: 'diff-editor-arrow-revert-change',\n    glyphMarginHoverMessage: new MarkdownString(undefined, { isTrusted: true, supportThemeIcons: true })\n        .appendMarkdown(localize('revertChangeHoverMessage', 'Click to revert change')),\n    glyphMarginClassName: 'arrow-revert-change ' + ThemeIcon.asClassName(Codicon.arrowRight),\n    zIndex: 10001,\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, observableFromEvent, observableSignalFromEvent } from '../../../../base/common/observable.js';\nexport class MovedBlocksLinesPart extends Disposable {\n    constructor(_rootElement, _diffModel, _originalEditorLayoutInfo, _modifiedEditorLayoutInfo, _editors) {\n        super();\n        this._rootElement = _rootElement;\n        this._diffModel = _diffModel;\n        this._originalEditorLayoutInfo = _originalEditorLayoutInfo;\n        this._modifiedEditorLayoutInfo = _modifiedEditorLayoutInfo;\n        this._editors = _editors;\n        const element = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        element.setAttribute('class', 'moved-blocks-lines');\n        this._rootElement.appendChild(element);\n        this._register(autorun('update', (reader) => {\n            const info = this._originalEditorLayoutInfo.read(reader);\n            const info2 = this._modifiedEditorLayoutInfo.read(reader);\n            if (!info || !info2) {\n                return;\n            }\n            element.style.left = `${info.width - info.verticalScrollbarWidth}px`;\n            element.style.height = `${info.height}px`;\n            element.style.width = `${info.verticalScrollbarWidth + info.contentLeft - MovedBlocksLinesPart.movedCodeBlockPadding}px`;\n        }));\n        const originalScrollTop = observableFromEvent(this._editors.original.onDidScrollChange, () => this._editors.original.getScrollTop());\n        const modifiedScrollTop = observableFromEvent(this._editors.modified.onDidScrollChange, () => this._editors.modified.getScrollTop());\n        const viewZonesChanged = observableSignalFromEvent('onDidChangeViewZones', this._editors.modified.onDidChangeViewZones);\n        this._register(autorun('update', (reader) => {\n            var _a, _b;\n            element.replaceChildren();\n            viewZonesChanged.read(reader);\n            const info = this._originalEditorLayoutInfo.read(reader);\n            const info2 = this._modifiedEditorLayoutInfo.read(reader);\n            if (!info || !info2) {\n                return;\n            }\n            const width = info.verticalScrollbarWidth + info.contentLeft - MovedBlocksLinesPart.movedCodeBlockPadding;\n            const moves = (_b = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.diff.read(reader)) === null || _b === void 0 ? void 0 : _b.movedTexts;\n            if (!moves) {\n                return;\n            }\n            let idx = 0;\n            for (const m of moves) {\n                function computeLineStart(range, editor) {\n                    const t1 = editor.getTopForLineNumber(range.startLineNumber);\n                    const t2 = editor.getTopForLineNumber(range.endLineNumberExclusive);\n                    return (t1 + t2) / 2;\n                }\n                const start = computeLineStart(m.lineRangeMapping.original, this._editors.original);\n                const startOffset = originalScrollTop.read(reader);\n                const end = computeLineStart(m.lineRangeMapping.modified, this._editors.modified);\n                const endOffset = modifiedScrollTop.read(reader);\n                const top = start - startOffset;\n                const bottom = end - endOffset;\n                const center = (width / 2) - moves.length * 5 + idx * 10;\n                idx++;\n                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n                path.setAttribute('d', `M ${0} ${top} L ${center} ${top} L ${center} ${bottom} L ${width} ${bottom}`);\n                path.setAttribute('fill', 'none');\n                element.appendChild(path);\n            }\n        }));\n    }\n}\nMovedBlocksLinesPart.movedCodeBlockPadding = 4;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunHandleChanges, observableSignalFromEvent, observableValue, transaction } from '../../../../base/common/observable.js';\nimport { ElementSizeObserver } from '../../config/elementSizeObserver.js';\nexport function joinCombine(arr1, arr2, keySelector, combine) {\n    if (arr1.length === 0) {\n        return arr2;\n    }\n    if (arr2.length === 0) {\n        return arr1;\n    }\n    const result = [];\n    let i = 0;\n    let j = 0;\n    while (i < arr1.length && j < arr2.length) {\n        const val1 = arr1[i];\n        const val2 = arr2[j];\n        const key1 = keySelector(val1);\n        const key2 = keySelector(val2);\n        if (key1 < key2) {\n            result.push(val1);\n            i++;\n        }\n        else if (key1 > key2) {\n            result.push(val2);\n            j++;\n        }\n        else {\n            result.push(combine(val1, val2));\n            i++;\n            j++;\n        }\n    }\n    while (i < arr1.length) {\n        result.push(arr1[i]);\n        i++;\n    }\n    while (j < arr2.length) {\n        result.push(arr2[j]);\n        j++;\n    }\n    return result;\n}\n// TODO make utility\nexport function applyObservableDecorations(editor, decorations) {\n    const d = new DisposableStore();\n    const decorationsCollection = editor.createDecorationsCollection();\n    d.add(autorun(`Apply decorations from ${decorations.debugName}`, reader => {\n        const d = decorations.read(reader);\n        decorationsCollection.set(d);\n    }));\n    d.add({\n        dispose: () => {\n            decorationsCollection.clear();\n        }\n    });\n    return d;\n}\nexport function appendRemoveOnDispose(parent, child) {\n    parent.appendChild(child);\n    return toDisposable(() => {\n        parent.removeChild(child);\n    });\n}\nexport class ObservableElementSizeObserver extends Disposable {\n    get width() { return this._width; }\n    get height() { return this._height; }\n    constructor(element, dimension) {\n        super();\n        this.elementSizeObserver = this._register(new ElementSizeObserver(element, dimension));\n        this._width = observableValue('width', this.elementSizeObserver.getWidth());\n        this._height = observableValue('height', this.elementSizeObserver.getHeight());\n        this._register(this.elementSizeObserver.onDidChange(e => transaction(tx => {\n            this._width.set(this.elementSizeObserver.getWidth(), tx);\n            this._height.set(this.elementSizeObserver.getHeight(), tx);\n        })));\n    }\n    observe(dimension) {\n        this.elementSizeObserver.observe(dimension);\n    }\n    setAutomaticLayout(automaticLayout) {\n        if (automaticLayout) {\n            this.elementSizeObserver.startObserving();\n        }\n        else {\n            this.elementSizeObserver.stopObserving();\n        }\n    }\n}\nexport function animatedObservable(base, store) {\n    let targetVal = base.get();\n    let startVal = targetVal;\n    let curVal = targetVal;\n    const result = observableValue('animatedValue', targetVal);\n    let animationStartMs = -1;\n    const durationMs = 300;\n    let animationFrame = undefined;\n    store.add(autorunHandleChanges('update value', {\n        createEmptyChangeSummary: () => ({ animate: false }),\n        handleChange: (ctx, s) => {\n            if (ctx.didChange(base)) {\n                s.animate = s.animate || ctx.change;\n            }\n            return true;\n        }\n    }, (reader, s) => {\n        if (animationFrame !== undefined) {\n            cancelAnimationFrame(animationFrame);\n            animationFrame = undefined;\n        }\n        startVal = curVal;\n        targetVal = base.read(reader);\n        animationStartMs = Date.now() - (s.animate ? 0 : durationMs);\n        update();\n    }));\n    function update() {\n        const passedMs = Date.now() - animationStartMs;\n        curVal = Math.floor(easeOutExpo(passedMs, startVal, targetVal - startVal, durationMs));\n        if (passedMs < durationMs) {\n            animationFrame = requestAnimationFrame(update);\n        }\n        else {\n            curVal = targetVal;\n        }\n        result.set(curVal, undefined);\n    }\n    return result;\n}\nfunction easeOutExpo(t, b, c, d) {\n    return t === d ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;\n}\nexport class ViewZoneOverlayWidget extends Disposable {\n    constructor(editor, viewZone, htmlElement) {\n        super();\n        this._register(new ManagedOverlayWidget(editor, htmlElement));\n        this._register(applyStyle(htmlElement, {\n            height: viewZone.actualHeight,\n            top: viewZone.actualTop,\n        }));\n    }\n}\nexport class PlaceholderViewZone {\n    get afterLineNumber() { return this._afterLineNumber.get(); }\n    constructor(_afterLineNumber, heightInPx) {\n        this._afterLineNumber = _afterLineNumber;\n        this.heightInPx = heightInPx;\n        this.domNode = document.createElement('div');\n        this._actualTop = observableValue('actualTop', undefined);\n        this._actualHeight = observableValue('actualHeight', undefined);\n        this.actualTop = this._actualTop;\n        this.actualHeight = this._actualHeight;\n        this.showInHiddenAreas = true;\n        this.onChange = this._afterLineNumber;\n        this.onDomNodeTop = (top) => {\n            this._actualTop.set(top, undefined);\n        };\n        this.onComputedHeight = (height) => {\n            this._actualHeight.set(height, undefined);\n        };\n    }\n}\nexport class ManagedOverlayWidget {\n    constructor(_editor, _domElement) {\n        this._editor = _editor;\n        this._domElement = _domElement;\n        this._overlayWidgetId = `managedOverlayWidget-${ManagedOverlayWidget._counter++}`;\n        this._overlayWidget = {\n            getId: () => this._overlayWidgetId,\n            getDomNode: () => this._domElement,\n            getPosition: () => null\n        };\n        this._editor.addOverlayWidget(this._overlayWidget);\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this._overlayWidget);\n    }\n}\nManagedOverlayWidget._counter = 0;\nexport function applyStyle(domNode, style) {\n    return autorun('applyStyle', (reader) => {\n        for (let [key, val] of Object.entries(style)) {\n            if (val && typeof val === 'object' && 'read' in val) {\n                val = val.read(reader);\n            }\n            if (typeof val === 'number') {\n                val = `${val}px`;\n            }\n            domNode.style[key] = val;\n        }\n    });\n}\nexport function readHotReloadableExport(value, reader) {\n    observeHotReloadableExports([value], reader);\n    return value;\n}\nexport function observeHotReloadableExports(values, reader) {\n    const hotReload_deprecateExports = globalThis.$hotReload_deprecateExports;\n    if (!hotReload_deprecateExports) {\n        return;\n    }\n    const o = observableSignalFromEvent('reload', e => {\n        function handleExports(oldExports, _newExports) {\n            if ([...Object.values(oldExports)].some(v => values.includes(v))) {\n                e(undefined);\n                return true;\n            }\n            return false;\n        }\n        hotReload_deprecateExports.add(handleExports);\n        return {\n            dispose() { hotReload_deprecateExports.delete(handleExports); }\n        };\n    });\n    o.read(reader);\n}\nexport function applyViewZones(editor, viewZones, setIsUpdating) {\n    const store = new DisposableStore();\n    const lastViewZoneIds = [];\n    store.add(autorun('applyViewZones', (reader) => {\n        const curViewZones = viewZones.read(reader);\n        const viewZonIdsPerViewZone = new Map();\n        const viewZoneIdPerOnChangeObservable = new Map();\n        if (setIsUpdating) {\n            setIsUpdating(true);\n        }\n        editor.changeViewZones(a => {\n            for (const id of lastViewZoneIds) {\n                a.removeZone(id);\n            }\n            lastViewZoneIds.length = 0;\n            for (const z of curViewZones) {\n                const id = a.addZone(z);\n                lastViewZoneIds.push(id);\n                viewZonIdsPerViewZone.set(z, id);\n            }\n        });\n        if (setIsUpdating) {\n            setIsUpdating(false);\n        }\n        store.add(autorunHandleChanges('layoutZone on change', {\n            createEmptyChangeSummary() {\n                return [];\n            },\n            handleChange(context, changeSummary) {\n                const id = viewZoneIdPerOnChangeObservable.get(context.changedObservable);\n                if (id !== undefined) {\n                    changeSummary.push(id);\n                }\n                return true;\n            },\n        }, (reader, changeSummary) => {\n            for (const vz of curViewZones) {\n                if (vz.onChange) {\n                    viewZoneIdPerOnChangeObservable.set(vz.onChange, viewZonIdsPerViewZone.get(vz));\n                    vz.onChange.read(reader);\n                }\n            }\n            if (setIsUpdating) {\n                setIsUpdating(true);\n            }\n            editor.changeViewZones(a => { for (const id of changeSummary) {\n                a.layoutZone(id);\n            } });\n            if (setIsUpdating) {\n                setIsUpdating(false);\n            }\n        }));\n    }));\n    store.add({\n        dispose() {\n            if (setIsUpdating) {\n                setIsUpdating(true);\n            }\n            editor.changeViewZones(a => { for (const id of lastViewZoneIds) {\n                a.removeZone(id);\n            } });\n            if (setIsUpdating) {\n                setIsUpdating(false);\n            }\n        }\n    });\n    return store;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { derived } from '../../../../base/common/observable.js';\nimport { isDefined } from '../../../../base/common/types.js';\nimport { arrowRevertChange, diffAddDecoration, diffAddDecorationEmpty, diffDeleteDecoration, diffDeleteDecorationEmpty, diffLineAddDecorationBackground, diffLineAddDecorationBackgroundWithIndicator, diffLineDeleteDecorationBackground, diffLineDeleteDecorationBackgroundWithIndicator, diffWholeLineAddDecoration, diffWholeLineDeleteDecoration } from './decorations.js';\nimport { MovedBlocksLinesPart } from './movedBlocksLines.js';\nimport { applyObservableDecorations } from './utils.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nexport class DiffEditorDecorations extends Disposable {\n    constructor(_editors, _diffModel, _options) {\n        super();\n        this._editors = _editors;\n        this._diffModel = _diffModel;\n        this._options = _options;\n        this._decorations = derived('decorations', (reader) => {\n            var _a;\n            const diff = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.diff.read(reader);\n            if (!diff) {\n                return null;\n            }\n            const currentMove = this._diffModel.read(reader).syncedMovedTexts.read(reader);\n            const renderIndicators = this._options.renderIndicators.read(reader);\n            const showEmptyDecorations = this._options.showEmptyDecorations.read(reader);\n            const originalDecorations = [];\n            const modifiedDecorations = [];\n            for (const m of diff.mappings) {\n                const fullRangeOriginal = LineRange.subtract(m.lineRangeMapping.originalRange, currentMove === null || currentMove === void 0 ? void 0 : currentMove.lineRangeMapping.original)\n                    .map(i => i.toInclusiveRange()).filter(isDefined);\n                for (const range of fullRangeOriginal) {\n                    originalDecorations.push({ range, options: renderIndicators ? diffLineDeleteDecorationBackgroundWithIndicator : diffLineDeleteDecorationBackground });\n                }\n                const fullRangeModified = LineRange.subtract(m.lineRangeMapping.modifiedRange, currentMove === null || currentMove === void 0 ? void 0 : currentMove.lineRangeMapping.modified)\n                    .map(i => i.toInclusiveRange()).filter(isDefined);\n                for (const range of fullRangeModified) {\n                    modifiedDecorations.push({ range, options: renderIndicators ? diffLineAddDecorationBackgroundWithIndicator : diffLineAddDecorationBackground });\n                }\n                if (m.lineRangeMapping.modifiedRange.isEmpty || m.lineRangeMapping.originalRange.isEmpty) {\n                    for (const range of fullRangeOriginal) {\n                        originalDecorations.push({ range, options: diffWholeLineDeleteDecoration });\n                    }\n                    for (const range of fullRangeModified) {\n                        modifiedDecorations.push({ range, options: diffWholeLineAddDecoration });\n                    }\n                }\n                else {\n                    for (const i of m.lineRangeMapping.innerChanges || []) {\n                        if (currentMove\n                            && (currentMove.lineRangeMapping.original.intersect(new LineRange(i.originalRange.startLineNumber, i.originalRange.endLineNumber))\n                                || currentMove.lineRangeMapping.modified.intersect(new LineRange(i.modifiedRange.startLineNumber, i.modifiedRange.endLineNumber)))) {\n                            continue;\n                        }\n                        // Don't show empty markers outside the line range\n                        if (m.lineRangeMapping.originalRange.contains(i.originalRange.startLineNumber)) {\n                            originalDecorations.push({ range: i.originalRange, options: (i.originalRange.isEmpty() && showEmptyDecorations) ? diffDeleteDecorationEmpty : diffDeleteDecoration });\n                        }\n                        if (m.lineRangeMapping.modifiedRange.contains(i.modifiedRange.startLineNumber)) {\n                            modifiedDecorations.push({ range: i.modifiedRange, options: (i.modifiedRange.isEmpty() && showEmptyDecorations) ? diffAddDecorationEmpty : diffAddDecoration });\n                        }\n                    }\n                }\n                if (!m.lineRangeMapping.modifiedRange.isEmpty && this._options.shouldRenderRevertArrows.read(reader) && !currentMove) {\n                    modifiedDecorations.push({ range: Range.fromPositions(new Position(m.lineRangeMapping.modifiedRange.startLineNumber, 1)), options: arrowRevertChange });\n                }\n            }\n            if (currentMove) {\n                for (const m of currentMove.changes) {\n                    const fullRangeOriginal = m.originalRange.toInclusiveRange();\n                    if (fullRangeOriginal) {\n                        originalDecorations.push({ range: fullRangeOriginal, options: renderIndicators ? diffLineDeleteDecorationBackgroundWithIndicator : diffLineDeleteDecorationBackground });\n                    }\n                    const fullRangeModified = m.modifiedRange.toInclusiveRange();\n                    if (fullRangeModified) {\n                        modifiedDecorations.push({ range: fullRangeModified, options: renderIndicators ? diffLineAddDecorationBackgroundWithIndicator : diffLineAddDecorationBackground });\n                    }\n                    for (const i of m.innerChanges || []) {\n                        originalDecorations.push({ range: i.originalRange, options: diffDeleteDecoration });\n                        modifiedDecorations.push({ range: i.modifiedRange, options: diffAddDecoration });\n                    }\n                }\n            }\n            for (const m of diff.movedTexts) {\n                originalDecorations.push({\n                    range: m.lineRangeMapping.original.toInclusiveRange(), options: {\n                        description: 'moved',\n                        blockClassName: 'movedOriginal',\n                        blockPadding: [MovedBlocksLinesPart.movedCodeBlockPadding, 0, MovedBlocksLinesPart.movedCodeBlockPadding, MovedBlocksLinesPart.movedCodeBlockPadding],\n                    }\n                });\n                modifiedDecorations.push({\n                    range: m.lineRangeMapping.modified.toInclusiveRange(), options: {\n                        description: 'moved',\n                        blockClassName: 'movedModified',\n                        blockPadding: [4, 0, 4, 4],\n                    }\n                });\n            }\n            return { originalDecorations, modifiedDecorations };\n        });\n        this._register(applyObservableDecorations(this._editors.original, this._decorations.map(d => (d === null || d === void 0 ? void 0 : d.originalDecorations) || [])));\n        this._register(applyObservableDecorations(this._editors.modified, this._decorations.map(d => (d === null || d === void 0 ? void 0 : d.modifiedDecorations) || [])));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, observableValue } from '../../../../base/common/observable.js';\nexport class DiffEditorSash extends Disposable {\n    constructor(_options, _domNode, _dimensions) {\n        super();\n        this._options = _options;\n        this._domNode = _domNode;\n        this._dimensions = _dimensions;\n        this._sashRatio = observableValue('sashRatio', undefined);\n        this.sashLeft = derived('sashLeft', reader => {\n            var _a;\n            const ratio = (_a = this._sashRatio.read(reader)) !== null && _a !== void 0 ? _a : this._options.splitViewDefaultRatio.read(reader);\n            return this._computeSashLeft(ratio, reader);\n        });\n        this._sash = this._register(new Sash(this._domNode, {\n            getVerticalSashTop: (_sash) => 0,\n            getVerticalSashLeft: (_sash) => this.sashLeft.get(),\n            getVerticalSashHeight: (_sash) => this._dimensions.height.get(),\n        }, { orientation: 0 /* Orientation.VERTICAL */ }));\n        this._startSashPosition = undefined;\n        this._register(this._sash.onDidStart(() => {\n            this._startSashPosition = this.sashLeft.get();\n        }));\n        this._register(this._sash.onDidChange((e) => {\n            const contentWidth = this._dimensions.width.get();\n            const sashPosition = this._computeSashLeft((this._startSashPosition + (e.currentX - e.startX)) / contentWidth, undefined);\n            this._sashRatio.set(sashPosition / contentWidth, undefined);\n        }));\n        this._register(this._sash.onDidEnd(() => this._sash.layout()));\n        this._register(this._sash.onDidReset(() => this._sashRatio.set(undefined, undefined)));\n        this._register(autorun('update sash layout', (reader) => {\n            const enabled = this._options.enableSplitViewResizing.read(reader);\n            this._sash.state = enabled ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n            this.sashLeft.read(reader);\n            this._sash.layout();\n        }));\n    }\n    setBoundarySashes(sashes) {\n        this._sash.orthogonalEndSash = sashes.bottom;\n    }\n    _computeSashLeft(desiredRatio, reader) {\n        const contentWidth = this._dimensions.width.read(reader);\n        const midPoint = Math.floor(this._options.splitViewDefaultRatio.read(reader) * contentWidth);\n        const sashLeft = this._options.enableSplitViewResizing.read(reader) ? Math.floor(desiredRatio * contentWidth) : midPoint;\n        const MINIMUM_EDITOR_WIDTH = 100;\n        if (contentWidth <= MINIMUM_EDITOR_WIDTH * 2) {\n            return midPoint;\n        }\n        if (sashLeft < MINIMUM_EDITOR_WIDTH) {\n            return MINIMUM_EDITOR_WIDTH;\n        }\n        if (sashLeft > contentWidth - MINIMUM_EDITOR_WIDTH) {\n            return contentWidth - MINIMUM_EDITOR_WIDTH;\n        }\n        return sashLeft;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { derived, observableSignal, observableSignalFromEvent, observableValue, transaction, waitForState } from '../../../../base/common/observable.js';\nimport { autorunWithStore2 } from '../../../../base/common/observableImpl/autorun.js';\nimport { isDefined } from '../../../../base/common/types.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { Range } from '../../../common/core/range.js';\nimport { LineRangeMapping, MovedText, RangeMapping, SimpleLineRangeMapping } from '../../../common/diff/linesDiffComputer.js';\nimport { lineRangeMappingFromRangeMappings } from '../../../common/diff/standardLinesDiffComputer.js';\nimport { TextEditInfo } from '../../../common/model/bracketPairsTextModelPart/bracketPairsTree/beforeEditPositionMapper.js';\nimport { combineTextEditInfos } from '../../../common/model/bracketPairsTextModelPart/bracketPairsTree/combineTextEditInfos.js';\nimport { lengthAdd, lengthDiffNonNegative, lengthGetLineCount, lengthOfRange, lengthToPosition, lengthZero, positionToLength } from '../../../common/model/bracketPairsTextModelPart/bracketPairsTree/length.js';\nexport class DiffEditorViewModel extends Disposable {\n    constructor(model, _options, documentDiffProvider) {\n        super();\n        this.model = model;\n        this._options = _options;\n        this._isDiffUpToDate = observableValue('isDiffUpToDate', false);\n        this.isDiffUpToDate = this._isDiffUpToDate;\n        this._diff = observableValue('diff', undefined);\n        this.diff = this._diff;\n        this._unchangedRegions = observableValue('unchangedRegion', { regions: [], originalDecorationIds: [], modifiedDecorationIds: [] });\n        this.unchangedRegions = derived('unchangedRegions', r => {\n            if (this._options.collapseUnchangedRegions.read(r)) {\n                return this._unchangedRegions.read(r).regions;\n            }\n            else {\n                // Reset state\n                transaction(tx => {\n                    for (const r of this._unchangedRegions.get().regions) {\n                        r.setState(0, 0, tx);\n                    }\n                });\n                return [];\n            }\n        });\n        this.syncedMovedTexts = observableValue('syncedMovedText', undefined);\n        const contentChangedSignal = observableSignal('contentChangedSignal');\n        const debouncer = this._register(new RunOnceScheduler(() => contentChangedSignal.trigger(undefined), 200));\n        const updateUnchangedRegions = (result, tx) => {\n            const newUnchangedRegions = UnchangedRegion.fromDiffs(result.changes, model.original.getLineCount(), model.modified.getLineCount());\n            // Transfer state from cur state\n            const lastUnchangedRegions = this._unchangedRegions.get();\n            const lastUnchangedRegionsOrigRanges = lastUnchangedRegions.originalDecorationIds\n                .map(id => model.original.getDecorationRange(id))\n                .filter(r => !!r)\n                .map(r => LineRange.fromRange(r));\n            const lastUnchangedRegionsModRanges = lastUnchangedRegions.modifiedDecorationIds\n                .map(id => model.modified.getDecorationRange(id))\n                .filter(r => !!r)\n                .map(r => LineRange.fromRange(r));\n            const originalDecorationIds = model.original.deltaDecorations(lastUnchangedRegions.originalDecorationIds, newUnchangedRegions.map(r => ({ range: r.originalRange.toInclusiveRange(), options: { description: 'unchanged' } })));\n            const modifiedDecorationIds = model.modified.deltaDecorations(lastUnchangedRegions.modifiedDecorationIds, newUnchangedRegions.map(r => ({ range: r.modifiedRange.toInclusiveRange(), options: { description: 'unchanged' } })));\n            for (const r of newUnchangedRegions) {\n                for (let i = 0; i < lastUnchangedRegions.regions.length; i++) {\n                    if (r.originalRange.intersectsStrict(lastUnchangedRegionsOrigRanges[i])\n                        && r.modifiedRange.intersectsStrict(lastUnchangedRegionsModRanges[i])) {\n                        r.setHiddenModifiedRange(lastUnchangedRegions.regions[i].getHiddenModifiedRange(undefined), tx);\n                        break;\n                    }\n                }\n            }\n            this._unchangedRegions.set({\n                regions: newUnchangedRegions,\n                originalDecorationIds,\n                modifiedDecorationIds\n            }, tx);\n        };\n        this._register(model.modified.onDidChangeContent((e) => {\n            const diff = this._diff.get();\n            if (!diff) {\n                return;\n            }\n            const textEdits = TextEditInfo.fromModelContentChanges(e.changes);\n            const result = applyModifiedEdits(this._lastDiff, textEdits, model.original, model.modified);\n            if (result) {\n                this._lastDiff = result;\n                transaction(tx => {\n                    this._diff.set(DiffState.fromDiffResult(this._lastDiff), tx);\n                    updateUnchangedRegions(result, tx);\n                    const currentSyncedMovedText = this.syncedMovedTexts.get();\n                    this.syncedMovedTexts.set(currentSyncedMovedText ? this._lastDiff.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\n                });\n            }\n            debouncer.schedule();\n        }));\n        this._register(model.original.onDidChangeContent((e) => {\n            const diff = this._diff.get();\n            if (!diff) {\n                return;\n            }\n            const textEdits = TextEditInfo.fromModelContentChanges(e.changes);\n            const result = applyOriginalEdits(this._lastDiff, textEdits, model.original, model.modified);\n            if (result) {\n                this._lastDiff = result;\n                transaction(tx => {\n                    this._diff.set(DiffState.fromDiffResult(this._lastDiff), tx);\n                    updateUnchangedRegions(result, tx);\n                    const currentSyncedMovedText = this.syncedMovedTexts.get();\n                    this.syncedMovedTexts.set(currentSyncedMovedText ? this._lastDiff.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\n                });\n            }\n            debouncer.schedule();\n        }));\n        const documentDiffProviderOptionChanged = observableSignalFromEvent('documentDiffProviderOptionChanged', documentDiffProvider.onDidChange);\n        this._register(autorunWithStore2('compute diff', (reader, store) => __awaiter(this, void 0, void 0, function* () {\n            var _a, _b;\n            debouncer.cancel();\n            contentChangedSignal.read(reader);\n            documentDiffProviderOptionChanged.read(reader);\n            this._isDiffUpToDate.set(false, undefined);\n            let originalTextEditInfos = [];\n            store.add(model.original.onDidChangeContent((e) => {\n                const edits = TextEditInfo.fromModelContentChanges(e.changes);\n                originalTextEditInfos = combineTextEditInfos(originalTextEditInfos, edits);\n            }));\n            let modifiedTextEditInfos = [];\n            store.add(model.modified.onDidChangeContent((e) => {\n                const edits = TextEditInfo.fromModelContentChanges(e.changes);\n                modifiedTextEditInfos = combineTextEditInfos(modifiedTextEditInfos, edits);\n            }));\n            let result = yield documentDiffProvider.computeDiff(model.original, model.modified, {\n                ignoreTrimWhitespace: this._options.ignoreTrimWhitespace.read(reader),\n                maxComputationTimeMs: this._options.maxComputationTimeMs.read(reader),\n                computeMoves: this._options.showMoves.read(reader),\n            });\n            result = (_a = applyOriginalEdits(result, originalTextEditInfos, model.original, model.modified)) !== null && _a !== void 0 ? _a : result;\n            result = (_b = applyModifiedEdits(result, modifiedTextEditInfos, model.original, model.modified)) !== null && _b !== void 0 ? _b : result;\n            transaction(tx => {\n                updateUnchangedRegions(result, tx);\n                this._lastDiff = result;\n                const state = DiffState.fromDiffResult(result);\n                this._diff.set(state, tx);\n                this._isDiffUpToDate.set(true, tx);\n                const currentSyncedMovedText = this.syncedMovedTexts.get();\n                this.syncedMovedTexts.set(currentSyncedMovedText ? this._lastDiff.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\n            });\n        })));\n    }\n    ensureModifiedLineIsVisible(lineNumber, tx) {\n        var _a;\n        if (((_a = this.diff.get()) === null || _a === void 0 ? void 0 : _a.mappings.length) === 0) {\n            return;\n        }\n        const unchangedRegions = this._unchangedRegions.get().regions;\n        for (const r of unchangedRegions) {\n            if (r.getHiddenModifiedRange(undefined).contains(lineNumber)) {\n                r.showAll(tx); // TODO only unhide what is needed\n                return;\n            }\n        }\n    }\n    ensureOriginalLineIsVisible(lineNumber, tx) {\n        var _a;\n        if (((_a = this.diff.get()) === null || _a === void 0 ? void 0 : _a.mappings.length) === 0) {\n            return;\n        }\n        const unchangedRegions = this._unchangedRegions.get().regions;\n        for (const r of unchangedRegions) {\n            if (r.getHiddenOriginalRange(undefined).contains(lineNumber)) {\n                r.showAll(tx); // TODO only unhide what is needed\n                return;\n            }\n        }\n    }\n    waitForDiff() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield waitForState(this.isDiffUpToDate, s => s);\n        });\n    }\n    serializeState() {\n        const regions = this._unchangedRegions.get();\n        return {\n            collapsedRegions: regions.regions.map(r => ({ range: r.getHiddenModifiedRange(undefined).serialize() }))\n        };\n    }\n    restoreSerializedState(state) {\n        const ranges = state.collapsedRegions.map(r => LineRange.deserialize(r.range));\n        const regions = this._unchangedRegions.get();\n        transaction(tx => {\n            for (const r of regions.regions) {\n                for (const range of ranges) {\n                    if (r.modifiedRange.intersect(range)) {\n                        r.setHiddenModifiedRange(range, tx);\n                        break;\n                    }\n                }\n            }\n        });\n    }\n}\nexport class DiffState {\n    static fromDiffResult(result) {\n        return new DiffState(result.changes.map(c => new DiffMapping(c)), result.moves || [], result.identical, result.quitEarly);\n    }\n    constructor(mappings, movedTexts, identical, quitEarly) {\n        this.mappings = mappings;\n        this.movedTexts = movedTexts;\n        this.identical = identical;\n        this.quitEarly = quitEarly;\n    }\n}\nexport class DiffMapping {\n    constructor(lineRangeMapping) {\n        this.lineRangeMapping = lineRangeMapping;\n        /*\n        readonly movedTo: MovedText | undefined,\n        readonly movedFrom: MovedText | undefined,\n\n        if (movedTo) {\n            assertFn(() =>\n                movedTo.lineRangeMapping.modifiedRange.equals(lineRangeMapping.modifiedRange)\n                && lineRangeMapping.originalRange.isEmpty\n                && !movedFrom\n            );\n        } else if (movedFrom) {\n            assertFn(() =>\n                movedFrom.lineRangeMapping.originalRange.equals(lineRangeMapping.originalRange)\n                && lineRangeMapping.modifiedRange.isEmpty\n                && !movedTo\n            );\n        }\n        */\n    }\n}\nexport class UnchangedRegion {\n    static fromDiffs(changes, originalLineCount, modifiedLineCount) {\n        const inversedMappings = LineRangeMapping.inverse(changes, originalLineCount, modifiedLineCount);\n        const result = [];\n        const minHiddenLineCount = 3;\n        const minContext = 3;\n        for (const mapping of inversedMappings) {\n            let origStart = mapping.originalRange.startLineNumber;\n            let modStart = mapping.modifiedRange.startLineNumber;\n            let length = mapping.originalRange.length;\n            const atStart = origStart === 1 && modStart === 1;\n            const atEnd = origStart + length === originalLineCount + 1 && modStart + length === modifiedLineCount + 1;\n            if ((atStart || atEnd) && length > minContext + minHiddenLineCount) {\n                if (atStart && !atEnd) {\n                    length -= minContext;\n                }\n                if (atEnd && !atStart) {\n                    origStart += minContext;\n                    modStart += minContext;\n                    length -= minContext;\n                }\n                result.push(new UnchangedRegion(origStart, modStart, length, 0, 0));\n            }\n            else if (length > minContext * 2 + minHiddenLineCount) {\n                origStart += minContext;\n                modStart += minContext;\n                length -= minContext * 2;\n                result.push(new UnchangedRegion(origStart, modStart, length, 0, 0));\n            }\n        }\n        return result;\n    }\n    get originalRange() {\n        return LineRange.ofLength(this.originalLineNumber, this.lineCount);\n    }\n    get modifiedRange() {\n        return LineRange.ofLength(this.modifiedLineNumber, this.lineCount);\n    }\n    constructor(originalLineNumber, modifiedLineNumber, lineCount, visibleLineCountTop, visibleLineCountBottom) {\n        this.originalLineNumber = originalLineNumber;\n        this.modifiedLineNumber = modifiedLineNumber;\n        this.lineCount = lineCount;\n        this._visibleLineCountTop = observableValue('visibleLineCountTop', 0);\n        this.visibleLineCountTop = this._visibleLineCountTop;\n        this._visibleLineCountBottom = observableValue('visibleLineCountBottom', 0);\n        this.visibleLineCountBottom = this._visibleLineCountBottom;\n        this._shouldHideControls = derived('isVisible', reader => this.visibleLineCountTop.read(reader) + this.visibleLineCountBottom.read(reader) === this.lineCount && !this.isDragged.read(reader));\n        this.isDragged = observableValue('isDragged', false);\n        this._visibleLineCountTop.set(visibleLineCountTop, undefined);\n        this._visibleLineCountBottom.set(visibleLineCountBottom, undefined);\n    }\n    shouldHideControls(reader) {\n        return this._shouldHideControls.read(reader);\n    }\n    getHiddenOriginalRange(reader) {\n        return LineRange.ofLength(this.originalLineNumber + this._visibleLineCountTop.read(reader), this.lineCount - this._visibleLineCountTop.read(reader) - this._visibleLineCountBottom.read(reader));\n    }\n    getHiddenModifiedRange(reader) {\n        return LineRange.ofLength(this.modifiedLineNumber + this._visibleLineCountTop.read(reader), this.lineCount - this._visibleLineCountTop.read(reader) - this._visibleLineCountBottom.read(reader));\n    }\n    setHiddenModifiedRange(range, tx) {\n        const visibleLineCountTop = range.startLineNumber - this.modifiedLineNumber;\n        const visibleLineCountBottom = (this.modifiedLineNumber + this.lineCount) - range.endLineNumberExclusive;\n        this.setState(visibleLineCountTop, visibleLineCountBottom, tx);\n    }\n    getMaxVisibleLineCountTop() {\n        return this.lineCount - this._visibleLineCountBottom.get();\n    }\n    getMaxVisibleLineCountBottom() {\n        return this.lineCount - this._visibleLineCountTop.get();\n    }\n    showMoreAbove(count = 10, tx) {\n        const maxVisibleLineCountTop = this.getMaxVisibleLineCountTop();\n        this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get() + count, maxVisibleLineCountTop), tx);\n    }\n    showMoreBelow(count = 10, tx) {\n        const maxVisibleLineCountBottom = this.lineCount - this._visibleLineCountTop.get();\n        this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get() + count, maxVisibleLineCountBottom), tx);\n    }\n    showAll(tx) {\n        this._visibleLineCountBottom.set(this.lineCount - this._visibleLineCountTop.get(), tx);\n    }\n    setState(visibleLineCountTop, visibleLineCountBottom, tx) {\n        visibleLineCountTop = Math.max(Math.min(visibleLineCountTop, this.lineCount), 0);\n        visibleLineCountBottom = Math.max(Math.min(visibleLineCountBottom, this.lineCount - visibleLineCountTop), 0);\n        this._visibleLineCountTop.set(visibleLineCountTop, tx);\n        this._visibleLineCountBottom.set(visibleLineCountBottom, tx);\n    }\n}\nfunction applyOriginalEdits(diff, textEdits, originalTextModel, modifiedTextModel) {\n    if (textEdits.length === 0) {\n        return diff;\n    }\n    const diff2 = flip(diff);\n    const diff3 = applyModifiedEdits(diff2, textEdits, modifiedTextModel, originalTextModel);\n    if (!diff3) {\n        return undefined;\n    }\n    return flip(diff3);\n}\nfunction flip(diff) {\n    return {\n        changes: diff.changes.map(c => c.flip()),\n        moves: diff.moves.map(m => m.flip()),\n        identical: diff.identical,\n        quitEarly: diff.quitEarly,\n    };\n}\nfunction applyModifiedEdits(diff, textEdits, originalTextModel, modifiedTextModel) {\n    if (textEdits.length === 0) {\n        return diff;\n    }\n    if (diff.changes.some(c => !c.innerChanges) || diff.moves.length > 0) {\n        // TODO support these cases\n        return undefined;\n    }\n    const changes = applyModifiedEditsToLineRangeMappings(diff.changes, textEdits, originalTextModel, modifiedTextModel);\n    const moves = diff.moves.map(m => {\n        const newModifiedRange = applyEditToLineRange(m.lineRangeMapping.modified, textEdits);\n        return newModifiedRange ? new MovedText(new SimpleLineRangeMapping(m.lineRangeMapping.original, newModifiedRange), applyModifiedEditsToLineRangeMappings(m.changes, textEdits, originalTextModel, modifiedTextModel)) : undefined;\n    }).filter(isDefined);\n    return {\n        identical: false,\n        quitEarly: false,\n        changes,\n        moves,\n    };\n}\nfunction applyEditToLineRange(range, textEdits) {\n    let rangeStartLineNumber = range.startLineNumber;\n    let rangeEndLineNumberEx = range.endLineNumberExclusive;\n    for (let i = textEdits.length - 1; i >= 0; i--) {\n        const textEdit = textEdits[i];\n        const textEditStartLineNumber = lengthGetLineCount(textEdit.startOffset) + 1;\n        const textEditEndLineNumber = lengthGetLineCount(textEdit.endOffset) + 1;\n        const newLengthLineCount = lengthGetLineCount(textEdit.newLength);\n        const delta = newLengthLineCount - (textEditEndLineNumber - textEditStartLineNumber);\n        if (textEditEndLineNumber < rangeStartLineNumber) {\n            // the text edit is before us\n            rangeStartLineNumber += delta;\n            rangeEndLineNumberEx += delta;\n        }\n        else if (textEditStartLineNumber > rangeEndLineNumberEx) {\n            // the text edit is after us\n            // NOOP\n        }\n        else if (textEditStartLineNumber < rangeStartLineNumber && rangeEndLineNumberEx < textEditEndLineNumber) {\n            // the range is fully contained in the text edit\n            return undefined;\n        }\n        else if (textEditStartLineNumber < rangeStartLineNumber && textEditEndLineNumber <= rangeEndLineNumberEx) {\n            // the text edit ends inside our range\n            rangeStartLineNumber = textEditEndLineNumber + 1;\n            rangeStartLineNumber += delta;\n            rangeEndLineNumberEx += delta;\n        }\n        else if (rangeStartLineNumber <= textEditStartLineNumber && textEditEndLineNumber < rangeStartLineNumber) {\n            // the text edit starts inside our range\n            rangeEndLineNumberEx = textEditStartLineNumber;\n        }\n        else {\n            rangeEndLineNumberEx += delta;\n        }\n    }\n    return new LineRange(rangeStartLineNumber, rangeEndLineNumberEx);\n}\nfunction applyModifiedEditsToLineRangeMappings(changes, textEdits, originalTextModel, modifiedTextModel) {\n    const diffTextEdits = changes.flatMap(c => c.innerChanges.map(c => new TextEditInfo(positionToLength(c.originalRange.getStartPosition()), positionToLength(c.originalRange.getEndPosition()), lengthOfRange(c.modifiedRange).toLength())));\n    const combined = combineTextEditInfos(diffTextEdits, textEdits);\n    let lastOriginalEndOffset = lengthZero;\n    let lastModifiedEndOffset = lengthZero;\n    const rangeMappings = combined.map(c => {\n        const modifiedStartOffset = lengthAdd(lastModifiedEndOffset, lengthDiffNonNegative(lastOriginalEndOffset, c.startOffset));\n        lastOriginalEndOffset = c.endOffset;\n        lastModifiedEndOffset = lengthAdd(modifiedStartOffset, c.newLength);\n        return new RangeMapping(Range.fromPositions(lengthToPosition(c.startOffset), lengthToPosition(c.endOffset)), Range.fromPositions(lengthToPosition(modifiedStartOffset), lengthToPosition(lastModifiedEndOffset)));\n    });\n    const newChanges = lineRangeMappingFromRangeMappings(rangeMappings, originalTextModel.getLinesContent(), modifiedTextModel.getLinesContent());\n    return newChanges;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { addStandardDisposableListener, getDomNodePagePosition } from '../../../../base/browser/dom.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { localize } from '../../../../nls.js';\nexport class InlineDiffDeletedCodeMargin extends Disposable {\n    get visibility() {\n        return this._visibility;\n    }\n    set visibility(_visibility) {\n        if (this._visibility !== _visibility) {\n            this._visibility = _visibility;\n            this._diffActions.style.visibility = _visibility ? 'visible' : 'hidden';\n        }\n    }\n    constructor(_getViewZoneId, _marginDomNode, _modifiedEditor, _diff, _editor, _viewLineCounts, _originalTextModel, _contextMenuService, _clipboardService) {\n        super();\n        this._getViewZoneId = _getViewZoneId;\n        this._marginDomNode = _marginDomNode;\n        this._modifiedEditor = _modifiedEditor;\n        this._diff = _diff;\n        this._editor = _editor;\n        this._viewLineCounts = _viewLineCounts;\n        this._originalTextModel = _originalTextModel;\n        this._contextMenuService = _contextMenuService;\n        this._clipboardService = _clipboardService;\n        this._visibility = false;\n        // make sure the diff margin shows above overlay.\n        this._marginDomNode.style.zIndex = '10';\n        this._diffActions = document.createElement('div');\n        this._diffActions.className = ThemeIcon.asClassName(Codicon.lightBulb) + ' lightbulb-glyph';\n        this._diffActions.style.position = 'absolute';\n        const lineHeight = this._modifiedEditor.getOption(65 /* EditorOption.lineHeight */);\n        this._diffActions.style.right = '0px';\n        this._diffActions.style.visibility = 'hidden';\n        this._diffActions.style.height = `${lineHeight}px`;\n        this._diffActions.style.lineHeight = `${lineHeight}px`;\n        this._marginDomNode.appendChild(this._diffActions);\n        let currentLineNumberOffset = 0;\n        const useShadowDOM = _modifiedEditor.getOption(125 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        const showContextMenu = (x, y) => {\n            var _a;\n            this._contextMenuService.showContextMenu({\n                domForShadowRoot: useShadowDOM ? (_a = _modifiedEditor.getDomNode()) !== null && _a !== void 0 ? _a : undefined : undefined,\n                getAnchor: () => ({ x, y }),\n                getActions: () => {\n                    const actions = [];\n                    const isDeletion = _diff.modifiedRange.isEmpty;\n                    // default action\n                    actions.push(new Action('diff.clipboard.copyDeletedContent', isDeletion\n                        ? (_diff.originalRange.length > 1\n                            ? localize('diff.clipboard.copyDeletedLinesContent.label', \"Copy deleted lines\")\n                            : localize('diff.clipboard.copyDeletedLinesContent.single.label', \"Copy deleted line\"))\n                        : (_diff.originalRange.length > 1\n                            ? localize('diff.clipboard.copyChangedLinesContent.label', \"Copy changed lines\")\n                            : localize('diff.clipboard.copyChangedLinesContent.single.label', \"Copy changed line\")), undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                        const originalText = this._originalTextModel.getValueInRange(_diff.originalRange.toExclusiveRange());\n                        yield this._clipboardService.writeText(originalText);\n                    })));\n                    if (_diff.originalRange.length > 1) {\n                        actions.push(new Action('diff.clipboard.copyDeletedLineContent', isDeletion\n                            ? localize('diff.clipboard.copyDeletedLineContent.label', \"Copy deleted line ({0})\", _diff.originalRange.startLineNumber + currentLineNumberOffset)\n                            : localize('diff.clipboard.copyChangedLineContent.label', \"Copy changed line ({0})\", _diff.originalRange.startLineNumber + currentLineNumberOffset), undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                            let lineContent = this._originalTextModel.getLineContent(_diff.originalRange.startLineNumber + currentLineNumberOffset);\n                            if (lineContent === '') {\n                                // empty line -> new line\n                                const eof = this._originalTextModel.getEndOfLineSequence();\n                                lineContent = eof === 0 /* EndOfLineSequence.LF */ ? '\\n' : '\\r\\n';\n                            }\n                            yield this._clipboardService.writeText(lineContent);\n                        })));\n                    }\n                    const readOnly = _modifiedEditor.getOption(89 /* EditorOption.readOnly */);\n                    if (!readOnly) {\n                        actions.push(new Action('diff.inline.revertChange', localize('diff.inline.revertChange.label', \"Revert this change\"), undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                            this._editor.revert(this._diff);\n                        })));\n                    }\n                    return actions;\n                },\n                autoSelectFirstItem: true\n            });\n        };\n        this._register(addStandardDisposableListener(this._diffActions, 'mousedown', e => {\n            const { top, height } = getDomNodePagePosition(this._diffActions);\n            const pad = Math.floor(lineHeight / 3);\n            e.preventDefault();\n            showContextMenu(e.posx, top + height + pad);\n        }));\n        this._register(_modifiedEditor.onMouseMove((e) => {\n            if ((e.target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ || e.target.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */) && e.target.detail.viewZoneId === this._getViewZoneId()) {\n                currentLineNumberOffset = this._updateLightBulbPosition(this._marginDomNode, e.event.browserEvent.y, lineHeight);\n                this.visibility = true;\n            }\n            else {\n                this.visibility = false;\n            }\n        }));\n        this._register(_modifiedEditor.onMouseDown((e) => {\n            if (!e.event.rightButton) {\n                return;\n            }\n            if (e.target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ || e.target.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */) {\n                const viewZoneId = e.target.detail.viewZoneId;\n                if (viewZoneId === this._getViewZoneId()) {\n                    e.event.preventDefault();\n                    currentLineNumberOffset = this._updateLightBulbPosition(this._marginDomNode, e.event.browserEvent.y, lineHeight);\n                    showContextMenu(e.event.posx, e.event.posy + lineHeight);\n                }\n            }\n        }));\n    }\n    _updateLightBulbPosition(marginDomNode, y, lineHeight) {\n        const { top } = getDomNodePagePosition(marginDomNode);\n        const offset = y - top;\n        const lineNumberOffset = Math.floor(offset / lineHeight);\n        const newTop = lineNumberOffset * lineHeight;\n        this._diffActions.style.top = `${newTop}px`;\n        if (this._viewLineCounts) {\n            let acc = 0;\n            for (let i = 0; i < this._viewLineCounts.length; i++) {\n                acc += this._viewLineCounts[i];\n                if (lineNumberOffset < acc) {\n                    return i;\n                }\n            }\n        }\n        return lineNumberOffset;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { applyFontInfo } from '../../config/domFontInfo.js';\nimport { diffEditorWidgetTtPolicy } from '../diffEditorWidget.js';\nimport { EditorFontLigatures } from '../../../common/config/editorOptions.js';\nimport { StringBuilder } from '../../../common/core/stringBuilder.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../../common/viewModel.js';\nconst ttPolicy = diffEditorWidgetTtPolicy;\nexport function renderLines(source, options, decorations, domNode) {\n    applyFontInfo(domNode, options.fontInfo);\n    const hasCharChanges = (decorations.length > 0);\n    const sb = new StringBuilder(10000);\n    let maxCharsPerLine = 0;\n    let renderedLineCount = 0;\n    const viewLineCounts = [];\n    for (let lineIndex = 0; lineIndex < source.lineTokens.length; lineIndex++) {\n        const lineNumber = lineIndex + 1;\n        const lineTokens = source.lineTokens[lineIndex];\n        const lineBreakData = source.lineBreakData[lineIndex];\n        const actualDecorations = LineDecoration.filter(decorations, lineNumber, 1, Number.MAX_SAFE_INTEGER);\n        if (lineBreakData) {\n            let lastBreakOffset = 0;\n            for (const breakOffset of lineBreakData.breakOffsets) {\n                const viewLineTokens = lineTokens.sliceAndInflate(lastBreakOffset, breakOffset, 0);\n                maxCharsPerLine = Math.max(maxCharsPerLine, renderOriginalLine(renderedLineCount, viewLineTokens, LineDecoration.extractWrapped(actualDecorations, lastBreakOffset, breakOffset), hasCharChanges, source.mightContainNonBasicASCII, source.mightContainRTL, options, sb));\n                renderedLineCount++;\n                lastBreakOffset = breakOffset;\n            }\n            viewLineCounts.push(lineBreakData.breakOffsets.length);\n        }\n        else {\n            viewLineCounts.push(1);\n            maxCharsPerLine = Math.max(maxCharsPerLine, renderOriginalLine(renderedLineCount, lineTokens, actualDecorations, hasCharChanges, source.mightContainNonBasicASCII, source.mightContainRTL, options, sb));\n            renderedLineCount++;\n        }\n    }\n    maxCharsPerLine += options.scrollBeyondLastColumn;\n    const html = sb.build();\n    const trustedhtml = ttPolicy ? ttPolicy.createHTML(html) : html;\n    domNode.innerHTML = trustedhtml;\n    const minWidthInPx = (maxCharsPerLine * options.typicalHalfwidthCharacterWidth);\n    return {\n        heightInLines: renderedLineCount,\n        minWidthInPx,\n        viewLineCounts,\n    };\n}\nexport class LineSource {\n    constructor(lineTokens, lineBreakData, mightContainNonBasicASCII, mightContainRTL) {\n        this.lineTokens = lineTokens;\n        this.lineBreakData = lineBreakData;\n        this.mightContainNonBasicASCII = mightContainNonBasicASCII;\n        this.mightContainRTL = mightContainRTL;\n    }\n}\nexport class RenderOptions {\n    static fromEditor(editor) {\n        var _a;\n        const modifiedEditorOptions = editor.getOptions();\n        const fontInfo = modifiedEditorOptions.get(49 /* EditorOption.fontInfo */);\n        const layoutInfo = modifiedEditorOptions.get(142 /* EditorOption.layoutInfo */);\n        return new RenderOptions(((_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.getOptions().tabSize) || 0, fontInfo, modifiedEditorOptions.get(32 /* EditorOption.disableMonospaceOptimizations */), fontInfo.typicalHalfwidthCharacterWidth, modifiedEditorOptions.get(102 /* EditorOption.scrollBeyondLastColumn */), modifiedEditorOptions.get(65 /* EditorOption.lineHeight */), layoutInfo.decorationsWidth, modifiedEditorOptions.get(115 /* EditorOption.stopRenderingLineAfter */), modifiedEditorOptions.get(97 /* EditorOption.renderWhitespace */), modifiedEditorOptions.get(92 /* EditorOption.renderControlCharacters */), modifiedEditorOptions.get(50 /* EditorOption.fontLigatures */));\n    }\n    constructor(tabSize, fontInfo, disableMonospaceOptimizations, typicalHalfwidthCharacterWidth, scrollBeyondLastColumn, lineHeight, lineDecorationsWidth, stopRenderingLineAfter, renderWhitespace, renderControlCharacters, fontLigatures) {\n        this.tabSize = tabSize;\n        this.fontInfo = fontInfo;\n        this.disableMonospaceOptimizations = disableMonospaceOptimizations;\n        this.typicalHalfwidthCharacterWidth = typicalHalfwidthCharacterWidth;\n        this.scrollBeyondLastColumn = scrollBeyondLastColumn;\n        this.lineHeight = lineHeight;\n        this.lineDecorationsWidth = lineDecorationsWidth;\n        this.stopRenderingLineAfter = stopRenderingLineAfter;\n        this.renderWhitespace = renderWhitespace;\n        this.renderControlCharacters = renderControlCharacters;\n        this.fontLigatures = fontLigatures;\n    }\n}\nfunction renderOriginalLine(viewLineIdx, lineTokens, decorations, hasCharChanges, mightContainNonBasicASCII, mightContainRTL, options, sb) {\n    sb.appendString('<div class=\"view-line');\n    if (!hasCharChanges) {\n        // No char changes\n        sb.appendString(' char-delete');\n    }\n    sb.appendString('\" style=\"top:');\n    sb.appendString(String(viewLineIdx * options.lineHeight));\n    sb.appendString('px;width:1000000px;\">');\n    const lineContent = lineTokens.getLineContent();\n    const isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, mightContainNonBasicASCII);\n    const containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, mightContainRTL);\n    const output = renderViewLine(new RenderLineInput((options.fontInfo.isMonospace && !options.disableMonospaceOptimizations), options.fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, decorations, options.tabSize, 0, options.fontInfo.spaceWidth, options.fontInfo.middotWidth, options.fontInfo.wsmiddotWidth, options.stopRenderingLineAfter, options.renderWhitespace, options.renderControlCharacters, options.fontLigatures !== EditorFontLigatures.OFF, null // Send no selections, original line cannot be selected\n    ), sb);\n    sb.appendString('</div>');\n    return output.characterMapping.getHorizontalOffset(output.characterMapping.length);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { $ } from '../../../../base/browser/dom.js';\nimport { ArrayQueue } from '../../../../base/common/arrays.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { derived, observableFromEvent, observableValue } from '../../../../base/common/observable.js';\nimport { autorun, autorunWithStore2 } from '../../../../base/common/observableImpl/autorun.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { assertIsDefined } from '../../../../base/common/types.js';\nimport { applyFontInfo } from '../../config/domFontInfo.js';\nimport { StableEditorScrollState } from '../../stableEditorScroll.js';\nimport { diffDeleteDecoration, diffRemoveIcon } from './decorations.js';\nimport { DiffMapping } from './diffEditorViewModel.js';\nimport { InlineDiffDeletedCodeMargin } from './inlineDiffDeletedCodeMargin.js';\nimport { LineSource, RenderOptions, renderLines } from './renderLines.js';\nimport { animatedObservable, joinCombine } from './utils.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { Position } from '../../../common/core/position.js';\nimport { InlineDecoration } from '../../../common/viewModel.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\n/**\n * Ensures both editors have the same height by aligning unchanged lines.\n * In inline view mode, inserts viewzones to show deleted code from the original text model in the modified code editor.\n * Synchronizes scrolling.\n */\nlet ViewZoneManager = class ViewZoneManager extends Disposable {\n    constructor(_editors, _diffModel, _options, _diffEditorWidget, _canIgnoreViewZoneUpdateEvent, _clipboardService, _contextMenuService) {\n        super();\n        this._editors = _editors;\n        this._diffModel = _diffModel;\n        this._options = _options;\n        this._diffEditorWidget = _diffEditorWidget;\n        this._canIgnoreViewZoneUpdateEvent = _canIgnoreViewZoneUpdateEvent;\n        this._clipboardService = _clipboardService;\n        this._contextMenuService = _contextMenuService;\n        this._originalTopPadding = observableValue('originalTopPadding', 0);\n        this._originalScrollOffset = observableValue('originalScrollOffset', 0);\n        this._originalScrollOffsetAnimated = animatedObservable(this._originalScrollOffset, this._store);\n        this._modifiedTopPadding = observableValue('modifiedTopPadding', 0);\n        this._modifiedScrollOffset = observableValue('modifiedScrollOffset', 0);\n        this._modifiedScrollOffsetAnimated = animatedObservable(this._modifiedScrollOffset, this._store);\n        let isChangingViewZones = false;\n        const state = observableValue('state', 0);\n        const updateImmediately = this._register(new RunOnceScheduler(() => {\n            state.set(state.get() + 1, undefined);\n        }, 0));\n        this._register(this._editors.original.onDidChangeViewZones((_args) => { if (!isChangingViewZones && !this._canIgnoreViewZoneUpdateEvent()) {\n            updateImmediately.schedule();\n        } }));\n        this._register(this._editors.modified.onDidChangeViewZones((_args) => { if (!isChangingViewZones && !this._canIgnoreViewZoneUpdateEvent()) {\n            updateImmediately.schedule();\n        } }));\n        this._register(this._editors.original.onDidChangeConfiguration((args) => { if (args.hasChanged(143 /* EditorOption.wrappingInfo */)) {\n            updateImmediately.schedule();\n        } }));\n        this._register(this._editors.modified.onDidChangeConfiguration((args) => { if (args.hasChanged(143 /* EditorOption.wrappingInfo */)) {\n            updateImmediately.schedule();\n        } }));\n        const originalModelTokenizationCompleted = this._diffModel.map(m => m ? observableFromEvent(m.model.original.onDidChangeTokens, () => m.model.original.tokenization.backgroundTokenizationState === 2 /* BackgroundTokenizationState.Completed */) : undefined).map((m, reader) => m === null || m === void 0 ? void 0 : m.read(reader));\n        const alignmentViewZoneIdsOrig = new Set();\n        const alignmentViewZoneIdsMod = new Set();\n        const alignments = derived('alignments', (reader) => {\n            const diffModel = this._diffModel.read(reader);\n            const diff = diffModel === null || diffModel === void 0 ? void 0 : diffModel.diff.read(reader);\n            if (!diffModel || !diff) {\n                return null;\n            }\n            state.read(reader);\n            const renderSideBySide = this._options.renderSideBySide.read(reader);\n            const innerHunkAlignment = renderSideBySide;\n            return computeRangeAlignment(this._editors.original, this._editors.modified, diff.mappings, alignmentViewZoneIdsOrig, alignmentViewZoneIdsMod, innerHunkAlignment);\n        });\n        const alignmentsSyncedMovedText = derived('alignments', (reader) => {\n            var _a;\n            const syncedMovedText = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.syncedMovedTexts.read(reader);\n            if (!syncedMovedText) {\n                return null;\n            }\n            state.read(reader);\n            const mappings = syncedMovedText.changes.map(c => new DiffMapping(c));\n            // TODO dont include alignments outside syncedMovedText\n            return computeRangeAlignment(this._editors.original, this._editors.modified, mappings, alignmentViewZoneIdsOrig, alignmentViewZoneIdsMod, true);\n        });\n        function createFakeLinesDiv() {\n            const r = document.createElement('div');\n            r.className = 'diagonal-fill';\n            return r;\n        }\n        const alignmentViewZonesDisposables = this._register(new DisposableStore());\n        const alignmentViewZones = derived('alignment viewzones', (reader) => {\n            var _a, _b, _c, _d, _e, _f, _g, _h;\n            alignmentViewZonesDisposables.clear();\n            const alignmentsVal = alignments.read(reader) || [];\n            const origViewZones = [];\n            const modViewZones = [];\n            const modifiedTopPaddingVal = this._modifiedTopPadding.read(reader);\n            if (modifiedTopPaddingVal > 0) {\n                modViewZones.push({\n                    afterLineNumber: 0,\n                    domNode: document.createElement('div'),\n                    heightInPx: modifiedTopPaddingVal,\n                    showInHiddenAreas: true,\n                });\n            }\n            const originalTopPaddingVal = this._originalTopPadding.read(reader);\n            if (originalTopPaddingVal > 0) {\n                origViewZones.push({\n                    afterLineNumber: 0,\n                    domNode: document.createElement('div'),\n                    heightInPx: originalTopPaddingVal,\n                    showInHiddenAreas: true,\n                });\n            }\n            const renderSideBySide = this._options.renderSideBySide.read(reader);\n            const deletedCodeLineBreaksComputer = !renderSideBySide ? (_a = this._editors.modified._getViewModel()) === null || _a === void 0 ? void 0 : _a.createLineBreaksComputer() : undefined;\n            if (deletedCodeLineBreaksComputer) {\n                for (const a of alignmentsVal) {\n                    if (a.diff) {\n                        for (let i = a.originalRange.startLineNumber; i < a.originalRange.endLineNumberExclusive; i++) {\n                            deletedCodeLineBreaksComputer === null || deletedCodeLineBreaksComputer === void 0 ? void 0 : deletedCodeLineBreaksComputer.addRequest(this._editors.original.getModel().getLineContent(i), null, null);\n                        }\n                    }\n                }\n            }\n            const lineBreakData = (_b = deletedCodeLineBreaksComputer === null || deletedCodeLineBreaksComputer === void 0 ? void 0 : deletedCodeLineBreaksComputer.finalize()) !== null && _b !== void 0 ? _b : [];\n            let lineBreakDataIdx = 0;\n            const modLineHeight = this._editors.modified.getOption(65 /* EditorOption.lineHeight */);\n            const syncedMovedText = (_c = this._diffModel.read(reader)) === null || _c === void 0 ? void 0 : _c.syncedMovedTexts.read(reader);\n            const mightContainNonBasicASCII = (_e = (_d = this._editors.original.getModel()) === null || _d === void 0 ? void 0 : _d.mightContainNonBasicASCII()) !== null && _e !== void 0 ? _e : false;\n            const mightContainRTL = (_g = (_f = this._editors.original.getModel()) === null || _f === void 0 ? void 0 : _f.mightContainRTL()) !== null && _g !== void 0 ? _g : false;\n            const renderOptions = RenderOptions.fromEditor(this._editors.modified);\n            for (const a of alignmentsVal) {\n                if (a.diff && !renderSideBySide) {\n                    if (!a.originalRange.isEmpty) {\n                        originalModelTokenizationCompleted.read(reader); // Update view-zones once tokenization completes\n                        const deletedCodeDomNode = document.createElement('div');\n                        deletedCodeDomNode.classList.add('view-lines', 'line-delete', 'monaco-mouse-cursor-text');\n                        const source = new LineSource(a.originalRange.mapToLineArray(l => this._editors.original.getModel().tokenization.getLineTokens(l)), a.originalRange.mapToLineArray(_ => lineBreakData[lineBreakDataIdx++]), mightContainNonBasicASCII, mightContainRTL);\n                        const decorations = [];\n                        for (const i of a.diff.innerChanges || []) {\n                            decorations.push(new InlineDecoration(i.originalRange.delta(-(a.diff.originalRange.startLineNumber - 1)), diffDeleteDecoration.className, 0 /* InlineDecorationType.Regular */));\n                        }\n                        const result = renderLines(source, renderOptions, decorations, deletedCodeDomNode);\n                        const marginDomNode = document.createElement('div');\n                        marginDomNode.className = 'inline-deleted-margin-view-zone';\n                        applyFontInfo(marginDomNode, renderOptions.fontInfo);\n                        if (this._options.renderIndicators.read(reader)) {\n                            for (let i = 0; i < result.heightInLines; i++) {\n                                const marginElement = document.createElement('div');\n                                marginElement.className = `delete-sign ${ThemeIcon.asClassName(diffRemoveIcon)}`;\n                                marginElement.setAttribute('style', `position:absolute;top:${i * modLineHeight}px;width:${renderOptions.lineDecorationsWidth}px;height:${modLineHeight}px;right:0;`);\n                                marginDomNode.appendChild(marginElement);\n                            }\n                        }\n                        let zoneId = undefined;\n                        alignmentViewZonesDisposables.add(new InlineDiffDeletedCodeMargin(() => assertIsDefined(zoneId), marginDomNode, this._editors.modified, a.diff, this._diffEditorWidget, result.viewLineCounts, this._editors.original.getModel(), this._contextMenuService, this._clipboardService));\n                        for (let i = 0; i < result.viewLineCounts.length; i++) {\n                            const count = result.viewLineCounts[i];\n                            // Account for wrapped lines in the (collapsed) original editor (which doesn't wrap lines).\n                            if (count > 1) {\n                                origViewZones.push({\n                                    afterLineNumber: a.originalRange.startLineNumber + i,\n                                    domNode: createFakeLinesDiv(),\n                                    heightInPx: (count - 1) * modLineHeight,\n                                    showInHiddenAreas: true,\n                                });\n                            }\n                        }\n                        modViewZones.push({\n                            afterLineNumber: a.modifiedRange.startLineNumber - 1,\n                            domNode: deletedCodeDomNode,\n                            heightInPx: result.heightInLines * modLineHeight,\n                            minWidthInPx: result.minWidthInPx,\n                            marginDomNode,\n                            setZoneId(id) { zoneId = id; },\n                            showInHiddenAreas: true,\n                        });\n                    }\n                    const marginDomNode = document.createElement('div');\n                    marginDomNode.className = 'gutter-delete';\n                    origViewZones.push({\n                        afterLineNumber: a.originalRange.endLineNumberExclusive - 1,\n                        domNode: createFakeLinesDiv(),\n                        heightInPx: a.modifiedHeightInPx,\n                        marginDomNode,\n                        showInHiddenAreas: true,\n                    });\n                }\n                else {\n                    const delta = a.modifiedHeightInPx - a.originalHeightInPx;\n                    if (delta > 0) {\n                        if (syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.original.contains(a.originalRange.endLineNumberExclusive - 1)) {\n                            continue;\n                        }\n                        origViewZones.push({\n                            afterLineNumber: a.originalRange.endLineNumberExclusive - 1,\n                            domNode: createFakeLinesDiv(),\n                            heightInPx: delta,\n                            showInHiddenAreas: true,\n                        });\n                    }\n                    else {\n                        if (syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.modified.contains(a.modifiedRange.endLineNumberExclusive - 1)) {\n                            continue;\n                        }\n                        function createViewZoneMarginArrow() {\n                            const arrow = document.createElement('div');\n                            arrow.className = 'arrow-revert-change ' + ThemeIcon.asClassName(Codicon.arrowRight);\n                            return $('div', {}, arrow);\n                        }\n                        let marginDomNode = undefined;\n                        if (a.diff && a.diff.modifiedRange.isEmpty && this._options.shouldRenderRevertArrows.read(reader)) {\n                            marginDomNode = createViewZoneMarginArrow();\n                        }\n                        modViewZones.push({\n                            afterLineNumber: a.modifiedRange.endLineNumberExclusive - 1,\n                            domNode: createFakeLinesDiv(),\n                            heightInPx: -delta,\n                            marginDomNode,\n                            showInHiddenAreas: true,\n                        });\n                    }\n                }\n            }\n            for (const a of (_h = alignmentsSyncedMovedText.read(reader)) !== null && _h !== void 0 ? _h : []) {\n                if (!(syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.original.intersect(a.originalRange))\n                    && !(syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.modified.intersect(a.modifiedRange))) {\n                    // ignore unrelated alignments outside the synced moved text\n                    continue;\n                }\n                const delta = a.modifiedHeightInPx - a.originalHeightInPx;\n                if (delta > 0) {\n                    origViewZones.push({\n                        afterLineNumber: a.originalRange.endLineNumberExclusive - 1,\n                        domNode: createFakeLinesDiv(),\n                        heightInPx: delta,\n                        showInHiddenAreas: true,\n                    });\n                }\n                else {\n                    modViewZones.push({\n                        afterLineNumber: a.modifiedRange.endLineNumberExclusive - 1,\n                        domNode: createFakeLinesDiv(),\n                        heightInPx: -delta,\n                        showInHiddenAreas: true,\n                    });\n                }\n            }\n            return { orig: origViewZones, mod: modViewZones };\n        });\n        this._register(autorunWithStore2('alignment viewzones', (reader) => {\n            const scrollState = StableEditorScrollState.capture(this._editors.modified);\n            const alignmentViewZones_ = alignmentViewZones.read(reader);\n            isChangingViewZones = true;\n            this._editors.original.changeViewZones((aOrig) => {\n                for (const id of alignmentViewZoneIdsOrig) {\n                    aOrig.removeZone(id);\n                }\n                alignmentViewZoneIdsOrig.clear();\n                for (const z of alignmentViewZones_.orig) {\n                    const id = aOrig.addZone(z);\n                    if (z.setZoneId) {\n                        z.setZoneId(id);\n                    }\n                    alignmentViewZoneIdsOrig.add(id);\n                }\n            });\n            this._editors.modified.changeViewZones(aMod => {\n                for (const id of alignmentViewZoneIdsMod) {\n                    aMod.removeZone(id);\n                }\n                alignmentViewZoneIdsMod.clear();\n                for (const z of alignmentViewZones_.mod) {\n                    const id = aMod.addZone(z);\n                    if (z.setZoneId) {\n                        z.setZoneId(id);\n                    }\n                    alignmentViewZoneIdsMod.add(id);\n                }\n            });\n            isChangingViewZones = false;\n            scrollState.restore(this._editors.modified);\n        }));\n        this._register(toDisposable(() => {\n            this._editors.original.changeViewZones((a) => {\n                for (const id of alignmentViewZoneIdsOrig) {\n                    a.removeZone(id);\n                }\n                alignmentViewZoneIdsOrig.clear();\n            });\n            this._editors.modified.changeViewZones((a) => {\n                for (const id of alignmentViewZoneIdsMod) {\n                    a.removeZone(id);\n                }\n                alignmentViewZoneIdsMod.clear();\n            });\n        }));\n        let ignoreChange = false;\n        this._register(this._editors.original.onDidScrollChange(e => {\n            if (e.scrollLeftChanged && !ignoreChange) {\n                ignoreChange = true;\n                this._editors.modified.setScrollLeft(e.scrollLeft);\n                ignoreChange = false;\n            }\n        }));\n        this._register(this._editors.modified.onDidScrollChange(e => {\n            if (e.scrollLeftChanged && !ignoreChange) {\n                ignoreChange = true;\n                this._editors.original.setScrollLeft(e.scrollLeft);\n                ignoreChange = false;\n            }\n        }));\n        this._originalScrollTop = observableFromEvent(this._editors.original.onDidScrollChange, () => this._editors.original.getScrollTop());\n        this._modifiedScrollTop = observableFromEvent(this._editors.modified.onDidScrollChange, () => this._editors.modified.getScrollTop());\n        // origExtraHeight + origOffset - origScrollTop = modExtraHeight + modOffset - modScrollTop\n        // origScrollTop = origExtraHeight + origOffset - modExtraHeight - modOffset + modScrollTop\n        // modScrollTop = modExtraHeight + modOffset - origExtraHeight - origOffset + origScrollTop\n        // origOffset - modOffset = heightOfLines(1..Y) - heightOfLines(1..X)\n        // origScrollTop >= 0, modScrollTop >= 0\n        this._register(autorun('update scroll modified', (reader) => {\n            const newScrollTopModified = this._originalScrollTop.read(reader)\n                - (this._originalScrollOffsetAnimated.get() - this._modifiedScrollOffsetAnimated.read(reader))\n                - (this._originalTopPadding.get() - this._modifiedTopPadding.read(reader));\n            if (newScrollTopModified !== this._editors.modified.getScrollTop()) {\n                this._editors.modified.setScrollTop(newScrollTopModified, 1 /* ScrollType.Immediate */);\n            }\n        }));\n        this._register(autorun('update scroll original', (reader) => {\n            const newScrollTopOriginal = this._modifiedScrollTop.read(reader)\n                - (this._modifiedScrollOffsetAnimated.get() - this._originalScrollOffsetAnimated.read(reader))\n                - (this._modifiedTopPadding.get() - this._originalTopPadding.read(reader));\n            if (newScrollTopOriginal !== this._editors.original.getScrollTop()) {\n                this._editors.original.setScrollTop(newScrollTopOriginal, 1 /* ScrollType.Immediate */);\n            }\n        }));\n        this._register(autorun('update', reader => {\n            var _a;\n            const m = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.syncedMovedTexts.read(reader);\n            let deltaOrigToMod = 0;\n            if (m) {\n                const trueTopOriginal = this._editors.original.getTopForLineNumber(m.lineRangeMapping.original.startLineNumber, true) - this._originalTopPadding.get();\n                const trueTopModified = this._editors.modified.getTopForLineNumber(m.lineRangeMapping.modified.startLineNumber, true) - this._modifiedTopPadding.get();\n                deltaOrigToMod = trueTopModified - trueTopOriginal;\n            }\n            if (deltaOrigToMod > 0) {\n                this._modifiedTopPadding.set(0, undefined);\n                this._originalTopPadding.set(deltaOrigToMod, undefined);\n            }\n            else if (deltaOrigToMod < 0) {\n                this._modifiedTopPadding.set(-deltaOrigToMod, undefined);\n                this._originalTopPadding.set(0, undefined);\n            }\n            else {\n                setTimeout(() => {\n                    this._modifiedTopPadding.set(0, undefined);\n                    this._originalTopPadding.set(0, undefined);\n                }, 400);\n            }\n            if (this._editors.modified.hasTextFocus()) {\n                this._originalScrollOffset.set(this._modifiedScrollOffset.get() - deltaOrigToMod, undefined, true);\n            }\n            else {\n                this._modifiedScrollOffset.set(this._originalScrollOffset.get() + deltaOrigToMod, undefined, true);\n            }\n        }));\n    }\n};\nViewZoneManager = __decorate([\n    __param(5, IClipboardService),\n    __param(6, IContextMenuService)\n], ViewZoneManager);\nexport { ViewZoneManager };\nfunction computeRangeAlignment(originalEditor, modifiedEditor, diffs, originalEditorAlignmentViewZones, modifiedEditorAlignmentViewZones, innerHunkAlignment) {\n    const originalLineHeightOverrides = new ArrayQueue(getAdditionalLineHeights(originalEditor, originalEditorAlignmentViewZones));\n    const modifiedLineHeightOverrides = new ArrayQueue(getAdditionalLineHeights(modifiedEditor, modifiedEditorAlignmentViewZones));\n    const origLineHeight = originalEditor.getOption(65 /* EditorOption.lineHeight */);\n    const modLineHeight = modifiedEditor.getOption(65 /* EditorOption.lineHeight */);\n    const result = [];\n    let lastOriginalLineNumber = 0;\n    let lastModifiedLineNumber = 0;\n    function handleAlignmentsOutsideOfDiffs(untilOriginalLineNumberExclusive, untilModifiedLineNumberExclusive) {\n        while (true) {\n            let origNext = originalLineHeightOverrides.peek();\n            let modNext = modifiedLineHeightOverrides.peek();\n            if (origNext && origNext.lineNumber >= untilOriginalLineNumberExclusive) {\n                origNext = undefined;\n            }\n            if (modNext && modNext.lineNumber >= untilModifiedLineNumberExclusive) {\n                modNext = undefined;\n            }\n            if (!origNext && !modNext) {\n                break;\n            }\n            const distOrig = origNext ? origNext.lineNumber - lastOriginalLineNumber : Number.MAX_VALUE;\n            const distNext = modNext ? modNext.lineNumber - lastModifiedLineNumber : Number.MAX_VALUE;\n            if (distOrig < distNext) {\n                originalLineHeightOverrides.dequeue();\n                modNext = {\n                    lineNumber: origNext.lineNumber - lastOriginalLineNumber + lastModifiedLineNumber,\n                    heightInPx: 0,\n                };\n            }\n            else if (distOrig > distNext) {\n                modifiedLineHeightOverrides.dequeue();\n                origNext = {\n                    lineNumber: modNext.lineNumber - lastModifiedLineNumber + lastOriginalLineNumber,\n                    heightInPx: 0,\n                };\n            }\n            else {\n                originalLineHeightOverrides.dequeue();\n                modifiedLineHeightOverrides.dequeue();\n            }\n            result.push({\n                originalRange: LineRange.ofLength(origNext.lineNumber, 1),\n                modifiedRange: LineRange.ofLength(modNext.lineNumber, 1),\n                originalHeightInPx: origLineHeight + origNext.heightInPx,\n                modifiedHeightInPx: modLineHeight + modNext.heightInPx,\n                diff: undefined,\n            });\n        }\n    }\n    for (const m of diffs) {\n        const c = m.lineRangeMapping;\n        handleAlignmentsOutsideOfDiffs(c.originalRange.startLineNumber, c.modifiedRange.startLineNumber);\n        let first = true;\n        let lastModLineNumber = c.modifiedRange.startLineNumber;\n        let lastOrigLineNumber = c.originalRange.startLineNumber;\n        function emitAlignment(origLineNumberExclusive, modLineNumberExclusive) {\n            var _a, _b, _c, _d;\n            if (origLineNumberExclusive < lastOrigLineNumber || modLineNumberExclusive < lastModLineNumber) {\n                return;\n            }\n            if (first) {\n                first = false;\n            }\n            else if (origLineNumberExclusive === lastOrigLineNumber || modLineNumberExclusive === lastModLineNumber) {\n                return;\n            }\n            const originalRange = new LineRange(lastOrigLineNumber, origLineNumberExclusive);\n            const modifiedRange = new LineRange(lastModLineNumber, modLineNumberExclusive);\n            if (originalRange.isEmpty && modifiedRange.isEmpty) {\n                return;\n            }\n            const originalAdditionalHeight = (_b = (_a = originalLineHeightOverrides\n                .takeWhile(v => v.lineNumber < origLineNumberExclusive)) === null || _a === void 0 ? void 0 : _a.reduce((p, c) => p + c.heightInPx, 0)) !== null && _b !== void 0 ? _b : 0;\n            const modifiedAdditionalHeight = (_d = (_c = modifiedLineHeightOverrides\n                .takeWhile(v => v.lineNumber < modLineNumberExclusive)) === null || _c === void 0 ? void 0 : _c.reduce((p, c) => p + c.heightInPx, 0)) !== null && _d !== void 0 ? _d : 0;\n            result.push({\n                originalRange,\n                modifiedRange,\n                originalHeightInPx: originalRange.length * origLineHeight + originalAdditionalHeight,\n                modifiedHeightInPx: modifiedRange.length * modLineHeight + modifiedAdditionalHeight,\n                diff: m.lineRangeMapping,\n            });\n            lastOrigLineNumber = origLineNumberExclusive;\n            lastModLineNumber = modLineNumberExclusive;\n        }\n        if (innerHunkAlignment) {\n            for (const i of c.innerChanges || []) {\n                if (i.originalRange.startColumn > 1 && i.modifiedRange.startColumn > 1) {\n                    // There is some unmodified text on this line before the diff\n                    emitAlignment(i.originalRange.startLineNumber, i.modifiedRange.startLineNumber);\n                }\n                if (i.originalRange.endColumn < originalEditor.getModel().getLineMaxColumn(i.originalRange.endLineNumber)) {\n                    // // There is some unmodified text on this line after the diff\n                    emitAlignment(i.originalRange.endLineNumber, i.modifiedRange.endLineNumber);\n                }\n            }\n        }\n        emitAlignment(c.originalRange.endLineNumberExclusive, c.modifiedRange.endLineNumberExclusive);\n        lastOriginalLineNumber = c.originalRange.endLineNumberExclusive;\n        lastModifiedLineNumber = c.modifiedRange.endLineNumberExclusive;\n    }\n    handleAlignmentsOutsideOfDiffs(Number.MAX_VALUE, Number.MAX_VALUE);\n    return result;\n}\nfunction getAdditionalLineHeights(editor, viewZonesToIgnore) {\n    const viewZoneHeights = [];\n    const wrappingZoneHeights = [];\n    const hasWrapping = editor.getOption(143 /* EditorOption.wrappingInfo */).wrappingColumn !== -1;\n    const coordinatesConverter = editor._getViewModel().coordinatesConverter;\n    const editorLineHeight = editor.getOption(65 /* EditorOption.lineHeight */);\n    if (hasWrapping) {\n        for (let i = 1; i <= editor.getModel().getLineCount(); i++) {\n            const lineCount = coordinatesConverter.getModelLineViewLineCount(i);\n            if (lineCount > 1) {\n                wrappingZoneHeights.push({ lineNumber: i, heightInPx: editorLineHeight * (lineCount - 1) });\n            }\n        }\n    }\n    for (const w of editor.getWhitespaces()) {\n        if (viewZonesToIgnore.has(w.id)) {\n            continue;\n        }\n        const modelLineNumber = w.afterLineNumber === 0 ? 0 : coordinatesConverter.convertViewPositionToModelPosition(new Position(w.afterLineNumber, 1)).lineNumber;\n        viewZoneHeights.push({ lineNumber: modelLineNumber, heightInPx: w.height });\n    }\n    const result = joinCombine(viewZoneHeights, wrappingZoneHeights, v => v.lineNumber, (v1, v2) => ({ lineNumber: v1.lineNumber, heightInPx: v1.heightInPx + v2.heightInPx }));\n    return result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { EventType, addDisposableListener, addStandardDisposableListener, h } from '../../../../base/browser/dom.js';\nimport { createFastDomNode } from '../../../../base/browser/fastDomNode.js';\nimport { ScrollbarState } from '../../../../base/browser/ui/scrollbar/scrollbarState.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, observableFromEvent, observableSignalFromEvent } from '../../../../base/common/observable.js';\nimport { autorunWithStore2 } from '../../../../base/common/observableImpl/autorun.js';\nimport { appendRemoveOnDispose } from './utils.js';\nimport { Position } from '../../../common/core/position.js';\nimport { OverviewRulerZone } from '../../../common/viewModel/overviewZoneManager.js';\nimport { defaultInsertColor, defaultRemoveColor, diffInserted, diffOverviewRulerInserted, diffOverviewRulerRemoved, diffRemoved } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nlet OverviewRulerPart = class OverviewRulerPart extends Disposable {\n    constructor(_editors, _rootElement, _diffModel, _rootWidth, _rootHeight, _modifiedEditorLayoutInfo, _options, _themeService) {\n        super();\n        this._editors = _editors;\n        this._rootElement = _rootElement;\n        this._diffModel = _diffModel;\n        this._rootWidth = _rootWidth;\n        this._rootHeight = _rootHeight;\n        this._modifiedEditorLayoutInfo = _modifiedEditorLayoutInfo;\n        this._options = _options;\n        this._themeService = _themeService;\n        const currentColorTheme = observableFromEvent(this._themeService.onDidColorThemeChange, () => this._themeService.getColorTheme());\n        const currentColors = derived('colors', reader => {\n            const theme = currentColorTheme.read(reader);\n            const insertColor = theme.getColor(diffOverviewRulerInserted) || (theme.getColor(diffInserted) || defaultInsertColor).transparent(2);\n            const removeColor = theme.getColor(diffOverviewRulerRemoved) || (theme.getColor(diffRemoved) || defaultRemoveColor).transparent(2);\n            return { insertColor, removeColor };\n        });\n        const scrollTopObservable = observableFromEvent(this._editors.modified.onDidScrollChange, () => this._editors.modified.getScrollTop());\n        const scrollHeightObservable = observableFromEvent(this._editors.modified.onDidScrollChange, () => this._editors.modified.getScrollHeight());\n        this._register(autorunWithStore2('create diff editor overview ruler if enabled', (reader, store) => {\n            if (!this._options.renderOverviewRuler.read(reader)) {\n                return;\n            }\n            const viewportDomElement = createFastDomNode(document.createElement('div'));\n            viewportDomElement.setClassName('diffViewport');\n            viewportDomElement.setPosition('absolute');\n            const diffOverviewRoot = h('div.diffOverview', {\n                style: { position: 'absolute', top: '0px', width: OverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH + 'px' }\n            }).root;\n            store.add(appendRemoveOnDispose(diffOverviewRoot, viewportDomElement.domNode));\n            store.add(addStandardDisposableListener(diffOverviewRoot, EventType.POINTER_DOWN, (e) => {\n                this._editors.modified.delegateVerticalScrollbarPointerDown(e);\n            }));\n            store.add(addDisposableListener(diffOverviewRoot, EventType.MOUSE_WHEEL, (e) => {\n                this._editors.modified.delegateScrollFromMouseWheelEvent(e);\n            }, { passive: false }));\n            store.add(appendRemoveOnDispose(this._rootElement, diffOverviewRoot));\n            store.add(autorunWithStore2('recreate overview rules when model changes', (reader, store) => {\n                const m = this._diffModel.read(reader);\n                const originalOverviewRuler = this._editors.original.createOverviewRuler('original diffOverviewRuler');\n                if (originalOverviewRuler) {\n                    store.add(originalOverviewRuler);\n                    store.add(appendRemoveOnDispose(diffOverviewRoot, originalOverviewRuler.getDomNode()));\n                }\n                const modifiedOverviewRuler = this._editors.modified.createOverviewRuler('modified diffOverviewRuler');\n                if (modifiedOverviewRuler) {\n                    store.add(modifiedOverviewRuler);\n                    store.add(appendRemoveOnDispose(diffOverviewRoot, modifiedOverviewRuler.getDomNode()));\n                }\n                if (!originalOverviewRuler || !modifiedOverviewRuler) {\n                    // probably no model\n                    return;\n                }\n                const origViewZonesChanged = observableSignalFromEvent('viewZoneChanged', this._editors.original.onDidChangeViewZones);\n                const modViewZonesChanged = observableSignalFromEvent('viewZoneChanged', this._editors.modified.onDidChangeViewZones);\n                const origHiddenRangesChanged = observableSignalFromEvent('hiddenRangesChanged', this._editors.original.onDidChangeHiddenAreas);\n                const modHiddenRangesChanged = observableSignalFromEvent('hiddenRangesChanged', this._editors.modified.onDidChangeHiddenAreas);\n                store.add(autorun('set overview ruler zones', (reader) => {\n                    var _a;\n                    origViewZonesChanged.read(reader);\n                    modViewZonesChanged.read(reader);\n                    origHiddenRangesChanged.read(reader);\n                    modHiddenRangesChanged.read(reader);\n                    const colors = currentColors.read(reader);\n                    const diff = (_a = m === null || m === void 0 ? void 0 : m.diff.read(reader)) === null || _a === void 0 ? void 0 : _a.mappings;\n                    function createZones(ranges, color, editor) {\n                        const vm = editor._getViewModel();\n                        if (!vm) {\n                            return [];\n                        }\n                        return ranges\n                            .filter(d => d.length > 0)\n                            .map(r => {\n                            const start = vm.coordinatesConverter.convertModelPositionToViewPosition(new Position(r.startLineNumber, 1));\n                            const end = vm.coordinatesConverter.convertModelPositionToViewPosition(new Position(r.endLineNumberExclusive, 1));\n                            return new OverviewRulerZone(start.lineNumber, end.lineNumber, 0, color.toString());\n                        });\n                    }\n                    originalOverviewRuler === null || originalOverviewRuler === void 0 ? void 0 : originalOverviewRuler.setZones(createZones((diff || []).map(d => d.lineRangeMapping.originalRange), colors.removeColor, this._editors.original));\n                    modifiedOverviewRuler === null || modifiedOverviewRuler === void 0 ? void 0 : modifiedOverviewRuler.setZones(createZones((diff || []).map(d => d.lineRangeMapping.modifiedRange), colors.insertColor, this._editors.modified));\n                }));\n                store.add(autorun('layout overview ruler', (reader) => {\n                    const height = this._rootHeight.read(reader);\n                    const width = this._rootWidth.read(reader);\n                    const layoutInfo = this._modifiedEditorLayoutInfo.read(reader);\n                    if (layoutInfo) {\n                        const freeSpace = OverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH - 2 * OverviewRulerPart.ONE_OVERVIEW_WIDTH;\n                        originalOverviewRuler.setLayout({\n                            top: 0,\n                            height: height,\n                            right: freeSpace + OverviewRulerPart.ONE_OVERVIEW_WIDTH,\n                            width: OverviewRulerPart.ONE_OVERVIEW_WIDTH,\n                        });\n                        modifiedOverviewRuler.setLayout({\n                            top: 0,\n                            height: height,\n                            right: 0,\n                            width: OverviewRulerPart.ONE_OVERVIEW_WIDTH,\n                        });\n                        const scrollTop = scrollTopObservable.read(reader);\n                        const scrollHeight = scrollHeightObservable.read(reader);\n                        const scrollBarOptions = this._editors.modified.getOption(101 /* EditorOption.scrollbar */);\n                        const state = new ScrollbarState(scrollBarOptions.verticalHasArrows ? scrollBarOptions.arrowSize : 0, scrollBarOptions.verticalScrollbarSize, 0, layoutInfo.height, scrollHeight, scrollTop);\n                        viewportDomElement.setTop(state.getSliderPosition());\n                        viewportDomElement.setHeight(state.getSliderSize());\n                    }\n                    else {\n                        viewportDomElement.setTop(0);\n                        viewportDomElement.setHeight(0);\n                    }\n                    diffOverviewRoot.style.height = height + 'px';\n                    diffOverviewRoot.style.left = (width - OverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH) + 'px';\n                    viewportDomElement.setWidth(OverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH);\n                }));\n            }));\n        }));\n    }\n};\nOverviewRulerPart.ONE_OVERVIEW_WIDTH = 15;\nOverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH = OverviewRulerPart.ONE_OVERVIEW_WIDTH * 2;\nOverviewRulerPart = __decorate([\n    __param(7, IThemeService)\n], OverviewRulerPart);\nexport { OverviewRulerPart };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, h, reset } from '../../../../base/browser/dom.js';\nimport { renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { observableFromEvent, transaction } from '../../../../base/common/observable.js';\nimport { autorun, autorunWithStore2 } from '../../../../base/common/observableImpl/autorun.js';\nimport { derived, derivedWithStore } from '../../../../base/common/observableImpl/derived.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { isDefined } from '../../../../base/common/types.js';\nimport { PlaceholderViewZone, ViewZoneOverlayWidget, applyObservableDecorations, applyStyle, applyViewZones } from './utils.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nexport class UnchangedRangesFeature extends Disposable {\n    get isUpdatingViewZones() { return this._isUpdatingViewZones; }\n    constructor(_editors, _diffModel, _options) {\n        super();\n        this._editors = _editors;\n        this._diffModel = _diffModel;\n        this._options = _options;\n        this._isUpdatingViewZones = false;\n        this._register(this._editors.original.onDidChangeCursorPosition(e => {\n            if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n                const m = this._diffModel.get();\n                transaction(tx => {\n                    for (const s of this._editors.original.getSelections() || []) {\n                        m === null || m === void 0 ? void 0 : m.ensureOriginalLineIsVisible(s.getStartPosition().lineNumber, tx);\n                        m === null || m === void 0 ? void 0 : m.ensureOriginalLineIsVisible(s.getEndPosition().lineNumber, tx);\n                    }\n                });\n            }\n        }));\n        this._register(this._editors.modified.onDidChangeCursorPosition(e => {\n            if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n                const m = this._diffModel.get();\n                transaction(tx => {\n                    for (const s of this._editors.modified.getSelections() || []) {\n                        m === null || m === void 0 ? void 0 : m.ensureModifiedLineIsVisible(s.getStartPosition().lineNumber, tx);\n                        m === null || m === void 0 ? void 0 : m.ensureModifiedLineIsVisible(s.getEndPosition().lineNumber, tx);\n                    }\n                });\n            }\n        }));\n        const unchangedRegions = this._diffModel.map((m, reader) => { var _a, _b; return ((_a = m === null || m === void 0 ? void 0 : m.diff.read(reader)) === null || _a === void 0 ? void 0 : _a.mappings.length) === 0 ? [] : (_b = m === null || m === void 0 ? void 0 : m.unchangedRegions.read(reader)) !== null && _b !== void 0 ? _b : []; });\n        const viewZones = derivedWithStore('view zones', (reader, store) => {\n            const origViewZones = [];\n            const modViewZones = [];\n            const sideBySide = this._options.renderSideBySide.read(reader);\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            for (const r of curUnchangedRegions) {\n                if (r.shouldHideControls(reader)) {\n                    continue;\n                }\n                {\n                    const d = derived('hiddenOriginalRangeStart', reader => r.getHiddenOriginalRange(reader).startLineNumber - 1);\n                    const origVz = new PlaceholderViewZone(d, 24);\n                    origViewZones.push(origVz);\n                    store.add(new CollapsedCodeOverlayWidget(this._editors.original, origVz, r, !sideBySide));\n                }\n                {\n                    const d = derived('hiddenModifiedRangeStart', reader => r.getHiddenModifiedRange(reader).startLineNumber - 1);\n                    const modViewZone = new PlaceholderViewZone(d, 24);\n                    modViewZones.push(modViewZone);\n                    store.add(new CollapsedCodeOverlayWidget(this._editors.modified, modViewZone, r, false));\n                }\n            }\n            return { origViewZones, modViewZones, };\n        });\n        const unchangedLinesDecoration = {\n            description: 'unchanged lines',\n            className: 'diff-unchanged-lines',\n            isWholeLine: true,\n        };\n        const unchangedLinesDecorationShow = {\n            description: 'Fold Unchanged',\n            glyphMarginHoverMessage: new MarkdownString(undefined, { isTrusted: true, supportThemeIcons: true }).appendMarkdown(localize('foldUnchanged', 'Fold Unchanged Region')),\n            glyphMarginClassName: 'fold-unchanged ' + ThemeIcon.asClassName(Codicon.fold),\n            zIndex: 10001,\n        };\n        this._register(applyObservableDecorations(this._editors.original, derived('decorations', (reader) => {\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            const result = curUnchangedRegions.map(r => ({\n                range: r.originalRange.toInclusiveRange(),\n                options: unchangedLinesDecoration,\n            }));\n            for (const r of curUnchangedRegions) {\n                if (r.shouldHideControls(reader)) {\n                    result.push({\n                        range: Range.fromPositions(new Position(r.originalLineNumber, 1)),\n                        options: unchangedLinesDecorationShow\n                    });\n                }\n            }\n            return result;\n        })));\n        this._register(applyObservableDecorations(this._editors.modified, derived('decorations', (reader) => {\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            const result = curUnchangedRegions.map(r => ({\n                range: r.modifiedRange.toInclusiveRange(),\n                options: unchangedLinesDecoration,\n            }));\n            for (const r of curUnchangedRegions) {\n                if (r.shouldHideControls(reader)) {\n                    result.push({\n                        range: LineRange.ofLength(r.modifiedLineNumber, 1).toInclusiveRange(),\n                        options: unchangedLinesDecorationShow\n                    });\n                }\n            }\n            return result;\n        })));\n        this._register(applyViewZones(this._editors.original, viewZones.map(v => v.origViewZones), v => this._isUpdatingViewZones = v));\n        this._register(applyViewZones(this._editors.modified, viewZones.map(v => v.modViewZones), v => this._isUpdatingViewZones = v));\n        this._register(autorunWithStore2('update folded unchanged regions', (reader, store) => {\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            this._editors.original.setHiddenAreas(curUnchangedRegions.map(r => r.getHiddenOriginalRange(reader).toInclusiveRange()).filter(isDefined));\n            this._editors.modified.setHiddenAreas(curUnchangedRegions.map(r => r.getHiddenModifiedRange(reader).toInclusiveRange()).filter(isDefined));\n        }));\n        this._register(this._editors.modified.onMouseUp(event => {\n            var _a;\n            if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? void 0 : _a.className.includes('fold-unchanged'))) {\n                const lineNumber = event.target.position.lineNumber;\n                const model = this._diffModel.get();\n                if (!model) {\n                    return;\n                }\n                const region = model.unchangedRegions.get().find(r => r.modifiedRange.includes(lineNumber));\n                if (!region) {\n                    return;\n                }\n                region.setState(0, 0, undefined);\n                event.event.stopPropagation();\n                event.event.preventDefault();\n            }\n        }));\n        this._register(this._editors.original.onMouseUp(event => {\n            var _a;\n            if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? void 0 : _a.className.includes('fold-unchanged'))) {\n                const lineNumber = event.target.position.lineNumber;\n                const model = this._diffModel.get();\n                if (!model) {\n                    return;\n                }\n                const region = model.unchangedRegions.get().find(r => r.originalRange.includes(lineNumber));\n                if (!region) {\n                    return;\n                }\n                region.setState(0, 0, undefined);\n                event.event.stopPropagation();\n                event.event.preventDefault();\n            }\n        }));\n    }\n}\nclass CollapsedCodeOverlayWidget extends ViewZoneOverlayWidget {\n    constructor(_editor, _viewZone, _unchangedRegion, hide) {\n        const root = h('div.diff-hidden-lines-widget');\n        super(_editor, _viewZone, root.root);\n        this._editor = _editor;\n        this._unchangedRegion = _unchangedRegion;\n        this.hide = hide;\n        this._nodes = h('div.diff-hidden-lines', [\n            h('div.top@top', { title: 'Click or drag to show more above' }),\n            h('div.center@content', { style: { display: 'flex' } }, [\n                h('div@first', { style: { display: 'flex', justifyContent: 'center', alignItems: 'center' } }, [$('a', { title: 'Show all', role: 'button', onclick: () => { this._unchangedRegion.showAll(undefined); } }, ...renderLabelWithIcons('$(unfold)'))]),\n                h('div@others', { style: { display: 'flex', justifyContent: 'center', alignItems: 'center' } }),\n            ]),\n            h('div.bottom@bottom', { title: 'Click or drag to show more below', role: 'button' }),\n        ]);\n        root.root.appendChild(this._nodes.root);\n        const layoutInfo = observableFromEvent(this._editor.onDidLayoutChange, () => this._editor.getLayoutInfo());\n        if (!this.hide) {\n            this._register(applyStyle(this._nodes.first, { width: layoutInfo.map((l) => l.contentLeft) }));\n        }\n        else {\n            reset(this._nodes.first);\n        }\n        const editor = this._editor;\n        this._register(addDisposableListener(this._nodes.top, 'mousedown', e => {\n            if (e.button !== 0) {\n                return;\n            }\n            this._nodes.top.classList.toggle('dragging', true);\n            this._nodes.root.classList.toggle('dragging', true);\n            e.preventDefault();\n            const startTop = e.clientY;\n            let didMove = false;\n            const cur = this._unchangedRegion.visibleLineCountTop.get();\n            this._unchangedRegion.isDragged.set(true, undefined);\n            const mouseMoveListener = addDisposableListener(window, 'mousemove', e => {\n                const currentTop = e.clientY;\n                const delta = currentTop - startTop;\n                didMove = didMove || Math.abs(delta) > 2;\n                const lineDelta = Math.round(delta / editor.getOption(65 /* EditorOption.lineHeight */));\n                const newVal = Math.max(0, Math.min(cur + lineDelta, this._unchangedRegion.getMaxVisibleLineCountTop()));\n                this._unchangedRegion.visibleLineCountTop.set(newVal, undefined);\n            });\n            const mouseUpListener = addDisposableListener(window, 'mouseup', e => {\n                if (!didMove) {\n                    this._unchangedRegion.showMoreAbove(20, undefined);\n                }\n                this._nodes.top.classList.toggle('dragging', false);\n                this._nodes.root.classList.toggle('dragging', false);\n                this._unchangedRegion.isDragged.set(false, undefined);\n                mouseMoveListener.dispose();\n                mouseUpListener.dispose();\n            });\n        }));\n        this._register(addDisposableListener(this._nodes.bottom, 'mousedown', e => {\n            if (e.button !== 0) {\n                return;\n            }\n            this._nodes.bottom.classList.toggle('dragging', true);\n            this._nodes.root.classList.toggle('dragging', true);\n            e.preventDefault();\n            const startTop = e.clientY;\n            let didMove = false;\n            const cur = this._unchangedRegion.visibleLineCountBottom.get();\n            this._unchangedRegion.isDragged.set(true, undefined);\n            const mouseMoveListener = addDisposableListener(window, 'mousemove', e => {\n                const currentTop = e.clientY;\n                const delta = currentTop - startTop;\n                didMove = didMove || Math.abs(delta) > 2;\n                const lineDelta = Math.round(delta / editor.getOption(65 /* EditorOption.lineHeight */));\n                const newVal = Math.max(0, Math.min(cur - lineDelta, this._unchangedRegion.getMaxVisibleLineCountBottom()));\n                const top = editor.getTopForLineNumber(this._unchangedRegion.originalRange.endLineNumberExclusive);\n                this._unchangedRegion.visibleLineCountBottom.set(newVal, undefined);\n                const top2 = editor.getTopForLineNumber(this._unchangedRegion.originalRange.endLineNumberExclusive);\n                editor.setScrollTop(editor.getScrollTop() + (top2 - top));\n            });\n            const mouseUpListener = addDisposableListener(window, 'mouseup', e => {\n                this._unchangedRegion.isDragged.set(false, undefined);\n                if (!didMove) {\n                    const top = editor.getTopForLineNumber(this._unchangedRegion.originalRange.endLineNumberExclusive);\n                    this._unchangedRegion.showMoreBelow(20, undefined);\n                    const top2 = editor.getTopForLineNumber(this._unchangedRegion.originalRange.endLineNumberExclusive);\n                    editor.setScrollTop(editor.getScrollTop() + (top2 - top));\n                }\n                this._nodes.bottom.classList.toggle('dragging', false);\n                this._nodes.root.classList.toggle('dragging', false);\n                mouseMoveListener.dispose();\n                mouseUpListener.dispose();\n            });\n        }));\n        this._register(autorun('update labels', (reader) => {\n            const children = [];\n            if (!this.hide && true) {\n                const lineCount = _unchangedRegion.getHiddenModifiedRange(reader).length;\n                const linesHiddenText = `${lineCount} Hidden Lines`;\n                children.push($('span', { title: linesHiddenText }, linesHiddenText));\n            }\n            // TODO@hediet implement breadcrumbs for collapsed regions\n            /*\n            if (_unchangedRegion.originalLineNumber === 48) {\n                children.push($('span', undefined, '\\u00a0|\\u00a0'));\n                children.push($('span', { title: 'test' }, ...renderLabelWithIcons('$(symbol-class) DiffEditorWidget2')));\n            } else if (_unchangedRegion.originalLineNumber === 88) {\n                children.push($('span', undefined, '\\u00a0|\\u00a0'));\n                children.push($('span', { title: 'test' }, ...renderLabelWithIcons('$(symbol-constructor) constructor')));\n            }\n            */\n            reset(this._nodes.others, ...children);\n        }));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nexport class DelegatingEditor extends Disposable {\n    constructor() {\n        super(...arguments);\n        this._id = ++DelegatingEditor.idCounter;\n        this._onDidDispose = this._register(new Emitter());\n        this.onDidDispose = this._onDidDispose.event;\n        // #endregion\n    }\n    getId() { return this.getEditorType() + ':v2:' + this._id; }\n    // #region editorBrowser.IDiffEditor: Delegating to modified Editor\n    getVisibleColumnFromPosition(position) {\n        return this._targetEditor.getVisibleColumnFromPosition(position);\n    }\n    getPosition() {\n        return this._targetEditor.getPosition();\n    }\n    setPosition(position, source = 'api') {\n        this._targetEditor.setPosition(position, source);\n    }\n    revealLine(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLine(lineNumber, scrollType);\n    }\n    revealLineInCenter(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLineInCenter(lineNumber, scrollType);\n    }\n    revealLineInCenterIfOutsideViewport(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLineInCenterIfOutsideViewport(lineNumber, scrollType);\n    }\n    revealLineNearTop(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLineNearTop(lineNumber, scrollType);\n    }\n    revealPosition(position, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealPosition(position, scrollType);\n    }\n    revealPositionInCenter(position, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealPositionInCenter(position, scrollType);\n    }\n    revealPositionInCenterIfOutsideViewport(position, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealPositionInCenterIfOutsideViewport(position, scrollType);\n    }\n    revealPositionNearTop(position, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealPositionNearTop(position, scrollType);\n    }\n    getSelection() {\n        return this._targetEditor.getSelection();\n    }\n    getSelections() {\n        return this._targetEditor.getSelections();\n    }\n    setSelection(something, source = 'api') {\n        this._targetEditor.setSelection(something, source);\n    }\n    setSelections(ranges, source = 'api') {\n        this._targetEditor.setSelections(ranges, source);\n    }\n    revealLines(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLines(startLineNumber, endLineNumber, scrollType);\n    }\n    revealLinesInCenter(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLinesInCenter(startLineNumber, endLineNumber, scrollType);\n    }\n    revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType);\n    }\n    revealLinesNearTop(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLinesNearTop(startLineNumber, endLineNumber, scrollType);\n    }\n    revealRange(range, scrollType = 0 /* ScrollType.Smooth */, revealVerticalInCenter = false, revealHorizontal = true) {\n        this._targetEditor.revealRange(range, scrollType, revealVerticalInCenter, revealHorizontal);\n    }\n    revealRangeInCenter(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeInCenter(range, scrollType);\n    }\n    revealRangeInCenterIfOutsideViewport(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeInCenterIfOutsideViewport(range, scrollType);\n    }\n    revealRangeNearTop(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeNearTop(range, scrollType);\n    }\n    revealRangeNearTopIfOutsideViewport(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeNearTopIfOutsideViewport(range, scrollType);\n    }\n    revealRangeAtTop(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeAtTop(range, scrollType);\n    }\n    getSupportedActions() {\n        return this._targetEditor.getSupportedActions();\n    }\n    focus() {\n        this._targetEditor.focus();\n    }\n    trigger(source, handlerId, payload) {\n        this._targetEditor.trigger(source, handlerId, payload);\n    }\n    createDecorationsCollection(decorations) {\n        return this._targetEditor.createDecorationsCollection(decorations);\n    }\n    changeDecorations(callback) {\n        return this._targetEditor.changeDecorations(callback);\n    }\n}\nDelegatingEditor.idCounter = 0;\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorunHandleChanges } from '../../../../base/common/observableImpl/autorun.js';\nimport { OverviewRulerPart } from './overviewRulerPart.js';\nimport { EditorOptions } from '../../../common/config/editorOptions.js';\nimport { localize } from '../../../../nls.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nlet DiffEditorEditors = class DiffEditorEditors extends Disposable {\n    constructor(originalEditorElement, modifiedEditorElement, _options, codeEditorWidgetOptions, _createInnerEditor, _instantiationService, _keybindingService) {\n        super();\n        this.originalEditorElement = originalEditorElement;\n        this.modifiedEditorElement = modifiedEditorElement;\n        this._options = _options;\n        this._createInnerEditor = _createInnerEditor;\n        this._instantiationService = _instantiationService;\n        this._keybindingService = _keybindingService;\n        this._onDidContentSizeChange = this._register(new Emitter());\n        this.original = this._createLeftHandSideEditor(_options.editorOptions.get(), codeEditorWidgetOptions.originalEditor || {});\n        this.modified = this._createRightHandSideEditor(_options.editorOptions.get(), codeEditorWidgetOptions.modifiedEditor || {});\n        this._register(autorunHandleChanges('update editor options', {\n            createEmptyChangeSummary: () => ({}),\n            handleChange: (ctx, changeSummary) => {\n                if (ctx.didChange(_options.editorOptions)) {\n                    Object.assign(changeSummary, ctx.change.changedOptions);\n                }\n                return true;\n            }\n        }, (reader, changeSummary) => {\n            _options.editorOptions.read(reader);\n            this.modified.updateOptions(this._adjustOptionsForRightHandSide(reader, changeSummary));\n            this.original.updateOptions(this._adjustOptionsForLeftHandSide(reader, changeSummary));\n        }));\n    }\n    _createLeftHandSideEditor(options, codeEditorWidgetOptions) {\n        const leftHandSideOptions = this._adjustOptionsForLeftHandSide(undefined, options);\n        const editor = this._constructInnerEditor(this._instantiationService, this.originalEditorElement, leftHandSideOptions, codeEditorWidgetOptions);\n        editor.setContextValue('isInDiffLeftEditor', true);\n        return editor;\n    }\n    _createRightHandSideEditor(options, codeEditorWidgetOptions) {\n        const rightHandSideOptions = this._adjustOptionsForRightHandSide(undefined, options);\n        const editor = this._constructInnerEditor(this._instantiationService, this.modifiedEditorElement, rightHandSideOptions, codeEditorWidgetOptions);\n        editor.setContextValue('isInDiffRightEditor', true);\n        return editor;\n    }\n    _constructInnerEditor(instantiationService, container, options, editorWidgetOptions) {\n        const editor = this._createInnerEditor(instantiationService, container, options, editorWidgetOptions);\n        this._register(editor.onDidContentSizeChange(e => {\n            const width = this.original.getContentWidth() + this.modified.getContentWidth() + OverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH;\n            const height = Math.max(this.modified.getContentHeight(), this.original.getContentHeight());\n            this._onDidContentSizeChange.fire({\n                contentHeight: height,\n                contentWidth: width,\n                contentHeightChanged: e.contentHeightChanged,\n                contentWidthChanged: e.contentWidthChanged\n            });\n        }));\n        return editor;\n    }\n    _adjustOptionsForLeftHandSide(_reader, changedOptions) {\n        const result = this._adjustOptionsForSubEditor(changedOptions);\n        if (!this._options.renderSideBySide.get()) {\n            // never wrap hidden editor\n            result.wordWrapOverride1 = 'off';\n            result.wordWrapOverride2 = 'off';\n            result.stickyScroll = { enabled: false };\n        }\n        else {\n            result.wordWrapOverride1 = this._options.diffWordWrap.get();\n        }\n        if (changedOptions.originalAriaLabel) {\n            result.ariaLabel = changedOptions.originalAriaLabel;\n        }\n        result.ariaLabel = this._updateAriaLabel(result.ariaLabel);\n        result.readOnly = !this._options.originalEditable.get();\n        result.dropIntoEditor = { enabled: !result.readOnly };\n        result.extraEditorClassName = 'original-in-monaco-diff-editor';\n        return result;\n    }\n    _adjustOptionsForRightHandSide(reader, changedOptions) {\n        const result = this._adjustOptionsForSubEditor(changedOptions);\n        if (changedOptions.modifiedAriaLabel) {\n            result.ariaLabel = changedOptions.modifiedAriaLabel;\n        }\n        result.ariaLabel = this._updateAriaLabel(result.ariaLabel);\n        result.wordWrapOverride1 = this._options.diffWordWrap.get();\n        result.revealHorizontalRightPadding = EditorOptions.revealHorizontalRightPadding.defaultValue + OverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH;\n        result.scrollbar.verticalHasArrows = false;\n        result.extraEditorClassName = 'modified-in-monaco-diff-editor';\n        return result;\n    }\n    _adjustOptionsForSubEditor(options) {\n        const clonedOptions = Object.assign(Object.assign({}, options), { dimension: {\n                height: 0,\n                width: 0\n            } });\n        clonedOptions.inDiffEditor = true;\n        clonedOptions.automaticLayout = false;\n        // Clone scrollbar options before changing them\n        clonedOptions.scrollbar = Object.assign({}, (clonedOptions.scrollbar || {}));\n        clonedOptions.scrollbar.vertical = 'visible';\n        clonedOptions.folding = false;\n        clonedOptions.codeLens = this._options.diffCodeLens.get();\n        clonedOptions.fixedOverflowWidgets = true;\n        // Clone minimap options before changing them\n        clonedOptions.minimap = Object.assign({}, (clonedOptions.minimap || {}));\n        clonedOptions.minimap.enabled = false;\n        if (this._options.collapseUnchangedRegions.get()) {\n            clonedOptions.stickyScroll = { enabled: false };\n        }\n        else {\n            clonedOptions.stickyScroll = this._options.editorOptions.get().stickyScroll;\n        }\n        return clonedOptions;\n    }\n    _updateAriaLabel(ariaLabel) {\n        var _a;\n        if (!ariaLabel) {\n            ariaLabel = '';\n        }\n        const ariaNavigationTip = localize('diff-aria-navigation-tip', ' use {0} to open the accessibility help.', (_a = this._keybindingService.lookupKeybinding('editor.action.accessibilityHelp')) === null || _a === void 0 ? void 0 : _a.getAriaLabel());\n        if (this._options.accessibilityVerbose.get()) {\n            return ariaLabel + ariaNavigationTip;\n        }\n        else if (ariaLabel) {\n            return ariaLabel.replaceAll(ariaNavigationTip, '');\n        }\n        return '';\n    }\n};\nDiffEditorEditors = __decorate([\n    __param(5, IInstantiationService),\n    __param(6, IKeybindingService)\n], DiffEditorEditors);\nexport { DiffEditorEditors };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { derived, observableValue } from '../../../../base/common/observable.js';\nimport { clampedFloat, clampedInt, boolean as validateBooleanOption, stringSet as validateStringSetOption } from '../../../common/config/editorOptions.js';\nexport class DiffEditorOptions {\n    get editorOptions() { return this._options; }\n    constructor(options) {\n        this.renderOverviewRuler = derived('renderOverviewRuler', reader => this._options.read(reader).renderOverviewRuler);\n        this.renderSideBySide = derived('renderSideBySide', reader => this._options.read(reader).renderSideBySide);\n        this.readOnly = derived('readOnly', reader => this._options.read(reader).readOnly);\n        this.shouldRenderRevertArrows = derived('shouldRenderRevertArrows', (reader) => {\n            if (!this._options.read(reader).renderMarginRevertIcon) {\n                return false;\n            }\n            if (!this.renderSideBySide.read(reader)) {\n                return false;\n            }\n            if (this.readOnly.read(reader)) {\n                return false;\n            }\n            return true;\n        });\n        this.renderIndicators = derived('renderIndicators', reader => this._options.read(reader).renderIndicators);\n        this.enableSplitViewResizing = derived('enableSplitViewResizing', reader => this._options.read(reader).enableSplitViewResizing);\n        this.collapseUnchangedRegions = derived('hideUnchangedRegions', reader => this._options.read(reader).experimental.collapseUnchangedRegions);\n        this.splitViewDefaultRatio = derived('splitViewDefaultRatio', reader => this._options.read(reader).splitViewDefaultRatio);\n        this.ignoreTrimWhitespace = derived('ignoreTrimWhitespace', reader => this._options.read(reader).ignoreTrimWhitespace);\n        this.maxComputationTimeMs = derived('maxComputationTime', reader => this._options.read(reader).maxComputationTime);\n        this.showMoves = derived('showMoves', reader => {\n            const o = this._options.read(reader);\n            return o.experimental.showMoves && o.renderSideBySide;\n        });\n        this.isInEmbeddedEditor = derived('isInEmbeddedEditor', reader => this._options.read(reader).isInEmbeddedEditor);\n        this.diffWordWrap = derived('diffWordWrap', reader => this._options.read(reader).diffWordWrap);\n        this.originalEditable = derived('originalEditable', reader => this._options.read(reader).originalEditable);\n        this.diffCodeLens = derived('diffCodeLens', reader => this._options.read(reader).diffCodeLens);\n        this.accessibilityVerbose = derived('accessibilityVerbose', reader => this._options.read(reader).accessibilityVerbose);\n        this.diffAlgorithm = derived('diffAlgorithm', reader => this._options.read(reader).diffAlgorithm);\n        this.showEmptyDecorations = derived('showEmptyDecorations', reader => this._options.read(reader).experimental.showEmptyDecorations);\n        this.onlyShowAccessibleDiffViewer = derived('onlyShowAccessibleDiffViewer', reader => this._options.read(reader).onlyShowAccessibleDiffViewer);\n        const optionsCopy = Object.assign(Object.assign({}, options), validateDiffEditorOptions(options, diffEditorDefaultOptions));\n        this._options = observableValue('options', optionsCopy);\n    }\n    updateOptions(changedOptions) {\n        const newDiffEditorOptions = validateDiffEditorOptions(changedOptions, this._options.get());\n        const newOptions = Object.assign(Object.assign(Object.assign({}, this._options.get()), changedOptions), newDiffEditorOptions);\n        this._options.set(newOptions, undefined, { changedOptions: changedOptions });\n    }\n}\nconst diffEditorDefaultOptions = {\n    enableSplitViewResizing: true,\n    splitViewDefaultRatio: 0.5,\n    renderSideBySide: true,\n    renderMarginRevertIcon: true,\n    maxComputationTime: 5000,\n    maxFileSize: 50,\n    ignoreTrimWhitespace: true,\n    renderIndicators: true,\n    originalEditable: false,\n    diffCodeLens: false,\n    renderOverviewRuler: true,\n    diffWordWrap: 'inherit',\n    diffAlgorithm: 'advanced',\n    accessibilityVerbose: false,\n    experimental: {\n        collapseUnchangedRegions: false,\n        showMoves: false,\n        showEmptyDecorations: true,\n    },\n    isInEmbeddedEditor: false,\n    onlyShowAccessibleDiffViewer: false,\n};\nfunction validateDiffEditorOptions(options, defaults) {\n    var _a, _b, _c;\n    return {\n        enableSplitViewResizing: validateBooleanOption(options.enableSplitViewResizing, defaults.enableSplitViewResizing),\n        splitViewDefaultRatio: clampedFloat(options.splitViewDefaultRatio, 0.5, 0.1, 0.9),\n        renderSideBySide: validateBooleanOption(options.renderSideBySide, defaults.renderSideBySide),\n        renderMarginRevertIcon: validateBooleanOption(options.renderMarginRevertIcon, defaults.renderMarginRevertIcon),\n        maxComputationTime: clampedInt(options.maxComputationTime, defaults.maxComputationTime, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n        maxFileSize: clampedInt(options.maxFileSize, defaults.maxFileSize, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n        ignoreTrimWhitespace: validateBooleanOption(options.ignoreTrimWhitespace, defaults.ignoreTrimWhitespace),\n        renderIndicators: validateBooleanOption(options.renderIndicators, defaults.renderIndicators),\n        originalEditable: validateBooleanOption(options.originalEditable, defaults.originalEditable),\n        diffCodeLens: validateBooleanOption(options.diffCodeLens, defaults.diffCodeLens),\n        renderOverviewRuler: validateBooleanOption(options.renderOverviewRuler, defaults.renderOverviewRuler),\n        diffWordWrap: validateStringSetOption(options.diffWordWrap, defaults.diffWordWrap, ['off', 'on', 'inherit']),\n        diffAlgorithm: validateStringSetOption(options.diffAlgorithm, defaults.diffAlgorithm, ['legacy', 'advanced'], { 'smart': 'legacy', 'experimental': 'advanced' }),\n        accessibilityVerbose: validateBooleanOption(options.accessibilityVerbose, defaults.accessibilityVerbose),\n        experimental: {\n            collapseUnchangedRegions: validateBooleanOption((_a = options.experimental) === null || _a === void 0 ? void 0 : _a.collapseUnchangedRegions, defaults.experimental.collapseUnchangedRegions),\n            showMoves: validateBooleanOption((_b = options.experimental) === null || _b === void 0 ? void 0 : _b.showMoves, defaults.experimental.showMoves),\n            showEmptyDecorations: validateBooleanOption((_c = options.experimental) === null || _c === void 0 ? void 0 : _c.showEmptyDecorations, defaults.experimental.showEmptyDecorations),\n        },\n        isInEmbeddedEditor: validateBooleanOption(options.isInEmbeddedEditor, defaults.isInEmbeddedEditor),\n        onlyShowAccessibleDiffViewer: validateBooleanOption(options.onlyShowAccessibleDiffViewer, defaults.onlyShowAccessibleDiffViewer),\n    };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { addDisposableListener, addStandardDisposableListener, reset } from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, keepAlive, observableValue, transaction } from '../../../../base/common/observable.js';\nimport { autorunWithStore2 } from '../../../../base/common/observableImpl/autorun.js';\nimport { subtransaction } from '../../../../base/common/observableImpl/base.js';\nimport { derivedWithStore } from '../../../../base/common/observableImpl/derived.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { applyFontInfo } from '../../config/domFontInfo.js';\nimport { applyStyle } from './utils.js';\nimport { DiffReview } from '../diffReview.js';\nimport { EditorFontLigatures } from '../../../common/config/editorOptions.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { SimpleLineRangeMapping } from '../../../common/diff/linesDiffComputer.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { LineTokens } from '../../../common/tokens/lineTokens.js';\nimport { RenderLineInput, renderViewLine2 } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../../common/viewModel.js';\nimport { localize } from '../../../../nls.js';\nimport { AudioCue, IAudioCueService } from '../../../../platform/audioCues/browser/audioCueService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nconst accessibleDiffViewerInsertIcon = registerIcon('diff-review-insert', Codicon.add, localize('accessibleDiffViewerInsertIcon', 'Icon for \\'Insert\\' in accessible diff viewer.'));\nconst accessibleDiffViewerRemoveIcon = registerIcon('diff-review-remove', Codicon.remove, localize('accessibleDiffViewerRemoveIcon', 'Icon for \\'Remove\\' in accessible diff viewer.'));\nconst accessibleDiffViewerCloseIcon = registerIcon('diff-review-close', Codicon.close, localize('accessibleDiffViewerCloseIcon', 'Icon for \\'Close\\' in accessible diff viewer.'));\nlet AccessibleDiffViewer = class AccessibleDiffViewer extends Disposable {\n    constructor(_parentNode, _visible, _setVisible, _canClose, _width, _height, _diffs, _editors, _instantiationService) {\n        super();\n        this._parentNode = _parentNode;\n        this._visible = _visible;\n        this._setVisible = _setVisible;\n        this._canClose = _canClose;\n        this._width = _width;\n        this._height = _height;\n        this._diffs = _diffs;\n        this._editors = _editors;\n        this._instantiationService = _instantiationService;\n        this.model = derivedWithStore('model', (reader, store) => {\n            const visible = this._visible.read(reader);\n            this._parentNode.style.visibility = visible ? 'visible' : 'hidden';\n            if (!visible) {\n                return null;\n            }\n            const model = store.add(this._instantiationService.createInstance(ViewModel, this._diffs, this._editors, this._setVisible, this._canClose));\n            const view = store.add(this._instantiationService.createInstance(View, this._parentNode, model, this._width, this._height, this._editors));\n            return {\n                model,\n                view\n            };\n        });\n        this._register(keepAlive(this.model, true));\n    }\n    next() {\n        transaction(tx => {\n            const isVisible = this._visible.get();\n            this._setVisible(true, tx);\n            if (isVisible) {\n                this.model.get().model.nextGroup(tx);\n            }\n        });\n    }\n    prev() {\n        transaction(tx => {\n            this._setVisible(true, tx);\n            this.model.get().model.previousGroup(tx);\n        });\n    }\n    close() {\n        transaction(tx => {\n            this._setVisible(false, tx);\n        });\n    }\n};\nAccessibleDiffViewer = __decorate([\n    __param(8, IInstantiationService)\n], AccessibleDiffViewer);\nexport { AccessibleDiffViewer };\nlet ViewModel = class ViewModel extends Disposable {\n    constructor(_diffs, _editors, _setVisible, canClose, _audioCueService) {\n        super();\n        this._diffs = _diffs;\n        this._editors = _editors;\n        this._setVisible = _setVisible;\n        this.canClose = canClose;\n        this._audioCueService = _audioCueService;\n        this._groups = observableValue('groups', []);\n        this._currentGroupIdx = observableValue('currentGroupIdx', 0);\n        this._currentElementIdx = observableValue('currentElementIdx', 0);\n        this.groups = this._groups;\n        this.currentGroup = this._currentGroupIdx.map((idx, r) => this._groups.read(r)[idx]);\n        this.currentGroupIndex = this._currentGroupIdx;\n        this.currentElement = this._currentElementIdx.map((idx, r) => { var _a; return (_a = this.currentGroup.read(r)) === null || _a === void 0 ? void 0 : _a.lines[idx]; });\n        this._register(autorun('update groups', reader => {\n            const diffs = this._diffs.read(reader);\n            if (!diffs) {\n                this._groups.set([], undefined);\n                return;\n            }\n            const groups = computeViewElementGroups(diffs, this._editors.original.getModel().getLineCount(), this._editors.modified.getModel().getLineCount());\n            transaction(tx => {\n                const p = this._editors.modified.getPosition();\n                if (p) {\n                    const nextGroup = groups.findIndex(g => (p === null || p === void 0 ? void 0 : p.lineNumber) < g.range.modified.endLineNumberExclusive);\n                    if (nextGroup !== -1) {\n                        this._currentGroupIdx.set(nextGroup, tx);\n                    }\n                }\n                this._groups.set(groups, tx);\n            });\n        }));\n        this._register(autorun('play audio-cue for diff', reader => {\n            const currentViewItem = this.currentElement.read(reader);\n            if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Deleted) {\n                this._audioCueService.playAudioCue(AudioCue.diffLineDeleted);\n            }\n            else if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Added) {\n                this._audioCueService.playAudioCue(AudioCue.diffLineInserted);\n            }\n        }));\n        this._register(autorun('select lines in editor', reader => {\n            var _a;\n            // This ensures editor commands (like revert/stage) work\n            const currentViewItem = this.currentElement.read(reader);\n            if (currentViewItem && currentViewItem.type !== LineType.Header) {\n                const lineNumber = (_a = currentViewItem.modifiedLineNumber) !== null && _a !== void 0 ? _a : currentViewItem.diff.modifiedRange.startLineNumber;\n                this._editors.modified.setSelection(Range.fromPositions(new Position(lineNumber, 1)));\n            }\n        }));\n    }\n    _goToGroupDelta(delta, tx) {\n        const groups = this.groups.get();\n        if (!groups || groups.length <= 1) {\n            return;\n        }\n        subtransaction(tx, tx => {\n            this._currentGroupIdx.set((this._currentGroupIdx.get() + groups.length + delta) % groups.length, tx);\n            this._currentElementIdx.set(0, tx);\n        });\n    }\n    nextGroup(tx) { this._goToGroupDelta(1, tx); }\n    previousGroup(tx) { this._goToGroupDelta(-1, tx); }\n    _goToLineDelta(delta) {\n        const group = this.currentGroup.get();\n        if (!group || group.lines.length <= 1) {\n            return;\n        }\n        transaction(tx => {\n            this._currentElementIdx.set((this._currentElementIdx.get() + group.lines.length + delta) % group.lines.length, tx);\n        });\n    }\n    goToNextLine() { this._goToLineDelta(1); }\n    goToPreviousLine() { this._goToLineDelta(-1); }\n    goToLine(line) {\n        const group = this.currentGroup.get();\n        if (!group) {\n            return;\n        }\n        const idx = group.lines.indexOf(line);\n        if (idx === -1) {\n            return;\n        }\n        transaction(tx => {\n            this._currentElementIdx.set(idx, tx);\n        });\n    }\n    revealCurrentElementInEditor() {\n        this._setVisible(false, undefined);\n        const curElem = this.currentElement.get();\n        if (curElem) {\n            if (curElem.type === LineType.Deleted) {\n                this._editors.original.setSelection(Range.fromPositions(new Position(curElem.originalLineNumber, 1)));\n                this._editors.original.revealLine(curElem.originalLineNumber);\n                this._editors.original.focus();\n            }\n            else {\n                if (curElem.type !== LineType.Header) {\n                    this._editors.modified.setSelection(Range.fromPositions(new Position(curElem.modifiedLineNumber, 1)));\n                    this._editors.modified.revealLine(curElem.modifiedLineNumber);\n                }\n                this._editors.modified.focus();\n            }\n        }\n    }\n    close() {\n        this._setVisible(false, undefined);\n        this._editors.modified.focus();\n    }\n};\nViewModel = __decorate([\n    __param(4, IAudioCueService)\n], ViewModel);\nconst viewElementGroupLineMargin = 3;\nfunction computeViewElementGroups(diffs, originalLineCount, modifiedLineCount) {\n    const result = [];\n    for (const g of group(diffs, (a, b) => (b.modifiedRange.startLineNumber - a.modifiedRange.endLineNumberExclusive < 2 * viewElementGroupLineMargin))) {\n        const viewElements = [];\n        viewElements.push(new HeaderViewElement());\n        const origFullRange = new LineRange(Math.max(1, g[0].originalRange.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].originalRange.endLineNumberExclusive + viewElementGroupLineMargin, originalLineCount + 1));\n        const modifiedFullRange = new LineRange(Math.max(1, g[0].modifiedRange.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].modifiedRange.endLineNumberExclusive + viewElementGroupLineMargin, modifiedLineCount + 1));\n        forEachAdjacentItems(g, (a, b) => {\n            const origRange = new LineRange(a ? a.originalRange.endLineNumberExclusive : origFullRange.startLineNumber, b ? b.originalRange.startLineNumber : origFullRange.endLineNumberExclusive);\n            const modifiedRange = new LineRange(a ? a.modifiedRange.endLineNumberExclusive : modifiedFullRange.startLineNumber, b ? b.modifiedRange.startLineNumber : modifiedFullRange.endLineNumberExclusive);\n            origRange.forEach(origLineNumber => {\n                viewElements.push(new UnchangedLineViewElement(origLineNumber, modifiedRange.startLineNumber + (origLineNumber - origRange.startLineNumber)));\n            });\n            if (b) {\n                b.originalRange.forEach(origLineNumber => {\n                    viewElements.push(new DeletedLineViewElement(b, origLineNumber));\n                });\n                b.modifiedRange.forEach(modifiedLineNumber => {\n                    viewElements.push(new AddedLineViewElement(b, modifiedLineNumber));\n                });\n            }\n        });\n        const modifiedRange = g[0].modifiedRange.join(g[g.length - 1].modifiedRange);\n        const originalRange = g[0].originalRange.join(g[g.length - 1].originalRange);\n        result.push(new ViewElementGroup(new SimpleLineRangeMapping(modifiedRange, originalRange), viewElements));\n    }\n    return result;\n}\nvar LineType;\n(function (LineType) {\n    LineType[LineType[\"Header\"] = 0] = \"Header\";\n    LineType[LineType[\"Unchanged\"] = 1] = \"Unchanged\";\n    LineType[LineType[\"Deleted\"] = 2] = \"Deleted\";\n    LineType[LineType[\"Added\"] = 3] = \"Added\";\n})(LineType || (LineType = {}));\nclass ViewElementGroup {\n    constructor(range, lines) {\n        this.range = range;\n        this.lines = lines;\n    }\n}\nclass HeaderViewElement {\n    constructor() {\n        this.type = LineType.Header;\n    }\n}\nclass DeletedLineViewElement {\n    constructor(diff, originalLineNumber) {\n        this.diff = diff;\n        this.originalLineNumber = originalLineNumber;\n        this.type = LineType.Deleted;\n        this.modifiedLineNumber = undefined;\n    }\n}\nclass AddedLineViewElement {\n    constructor(diff, modifiedLineNumber) {\n        this.diff = diff;\n        this.modifiedLineNumber = modifiedLineNumber;\n        this.type = LineType.Added;\n        this.originalLineNumber = undefined;\n    }\n}\nclass UnchangedLineViewElement {\n    constructor(originalLineNumber, modifiedLineNumber) {\n        this.originalLineNumber = originalLineNumber;\n        this.modifiedLineNumber = modifiedLineNumber;\n        this.type = LineType.Unchanged;\n    }\n}\nlet View = class View extends Disposable {\n    constructor(_element, _model, _width, _height, _editors, _languageService) {\n        super();\n        this._element = _element;\n        this._model = _model;\n        this._width = _width;\n        this._height = _height;\n        this._editors = _editors;\n        this._languageService = _languageService;\n        this.domNode = this._element;\n        this.domNode.className = 'diff-review monaco-editor-background';\n        const actionBarContainer = document.createElement('div');\n        actionBarContainer.className = 'diff-review-actions';\n        this._actionBar = this._register(new ActionBar(actionBarContainer));\n        this._register(autorun('update actions', reader => {\n            this._actionBar.clear();\n            if (this._model.canClose.read(reader)) {\n                this._actionBar.push(new Action('diffreview.close', localize('label.close', \"Close\"), 'close-diff-review ' + ThemeIcon.asClassName(accessibleDiffViewerCloseIcon), true, () => __awaiter(this, void 0, void 0, function* () { return _model.close(); })), { label: false, icon: true });\n            }\n        }));\n        this._content = document.createElement('div');\n        this._content.className = 'diff-review-content';\n        this._content.setAttribute('role', 'code');\n        this._scrollbar = this._register(new DomScrollableElement(this._content, {}));\n        reset(this.domNode, this._scrollbar.getDomNode(), actionBarContainer);\n        this._register(toDisposable(() => { reset(this.domNode); }));\n        this._register(applyStyle(this.domNode, { width: this._width, height: this._height }));\n        this._register(applyStyle(this._content, { width: this._width, height: this._height }));\n        this._register(autorunWithStore2('render', (reader, store) => {\n            this._model.currentGroup.read(reader);\n            this._render(store);\n        }));\n        // TODO@hediet use commands\n        this._register(addStandardDisposableListener(this.domNode, 'keydown', (e) => {\n            if (e.equals(18 /* KeyCode.DownArrow */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)\n                || e.equals(512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */)) {\n                e.preventDefault();\n                this._model.goToNextLine();\n            }\n            if (e.equals(16 /* KeyCode.UpArrow */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */)\n                || e.equals(512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */)) {\n                e.preventDefault();\n                this._model.goToPreviousLine();\n            }\n            if (e.equals(9 /* KeyCode.Escape */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 9 /* KeyCode.Escape */)\n                || e.equals(512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */)\n                || e.equals(1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */)) {\n                e.preventDefault();\n                this._model.close();\n            }\n            if (e.equals(10 /* KeyCode.Space */)\n                || e.equals(3 /* KeyCode.Enter */)) {\n                e.preventDefault();\n                this._model.revealCurrentElementInEditor();\n            }\n        }));\n    }\n    _render(store) {\n        const originalOptions = this._editors.original.getOptions();\n        const modifiedOptions = this._editors.modified.getOptions();\n        const container = document.createElement('div');\n        container.className = 'diff-review-table';\n        container.setAttribute('role', 'list');\n        container.setAttribute('aria-label', localize('ariaLabel', 'Accessible Diff Viewer. Use arrow up and down to navigate.'));\n        applyFontInfo(container, modifiedOptions.get(49 /* EditorOption.fontInfo */));\n        reset(this._content, container);\n        const originalModel = this._editors.original.getModel();\n        const modifiedModel = this._editors.modified.getModel();\n        if (!originalModel || !modifiedModel) {\n            return;\n        }\n        const originalModelOpts = originalModel.getOptions();\n        const modifiedModelOpts = modifiedModel.getOptions();\n        const lineHeight = modifiedOptions.get(65 /* EditorOption.lineHeight */);\n        const group = this._model.currentGroup.get();\n        for (const viewItem of (group === null || group === void 0 ? void 0 : group.lines) || []) {\n            if (!group) {\n                break;\n            }\n            let row;\n            if (viewItem.type === LineType.Header) {\n                const header = document.createElement('div');\n                header.className = 'diff-review-row';\n                header.setAttribute('role', 'listitem');\n                const r = group.range;\n                const diffIndex = this._model.currentGroupIndex.get();\n                const diffsLength = this._model.groups.get().length;\n                const getAriaLines = (lines) => lines === 0 ? localize('no_lines_changed', \"no lines changed\")\n                    : lines === 1 ? localize('one_line_changed', \"1 line changed\")\n                        : localize('more_lines_changed', \"{0} lines changed\", lines);\n                const originalChangedLinesCntAria = getAriaLines(r.original.length);\n                const modifiedChangedLinesCntAria = getAriaLines(r.modified.length);\n                header.setAttribute('aria-label', localize({\n                    key: 'header',\n                    comment: [\n                        'This is the ARIA label for a git diff header.',\n                        'A git diff header looks like this: @@ -154,12 +159,39 @@.',\n                        'That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.',\n                        'Variables 0 and 1 refer to the diff index out of total number of diffs.',\n                        'Variables 2 and 4 will be numbers (a line number).',\n                        'Variables 3 and 5 will be \"no lines changed\", \"1 line changed\" or \"X lines changed\", localized separately.'\n                    ]\n                }, \"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}\", (diffIndex + 1), diffsLength, r.original.startLineNumber, originalChangedLinesCntAria, r.modified.startLineNumber, modifiedChangedLinesCntAria));\n                const cell = document.createElement('div');\n                cell.className = 'diff-review-cell diff-review-summary';\n                // e.g.: `1/10: @@ -504,7 +517,7 @@`\n                cell.appendChild(document.createTextNode(`${diffIndex + 1}/${diffsLength}: @@ -${r.original.startLineNumber},${r.original.length} +${r.modified.startLineNumber},${r.modified.length} @@`));\n                header.appendChild(cell);\n                row = header;\n            }\n            else {\n                row = this._createRow(viewItem, lineHeight, this._width.get(), originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts);\n            }\n            container.appendChild(row);\n            const isSelectedObs = derived('isSelected', reader => this._model.currentElement.read(reader) === viewItem);\n            store.add(autorun('update tab index', reader => {\n                const isSelected = isSelectedObs.read(reader);\n                row.tabIndex = isSelected ? 0 : -1;\n                if (isSelected) {\n                    row.focus();\n                }\n            }));\n            store.add(addDisposableListener(row, 'focus', () => {\n                this._model.goToLine(viewItem);\n            }));\n        }\n        this._scrollbar.scanDomNode();\n    }\n    _createRow(item, lineHeight, width, originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts) {\n        const originalLayoutInfo = originalOptions.get(142 /* EditorOption.layoutInfo */);\n        const originalLineNumbersWidth = originalLayoutInfo.glyphMarginWidth + originalLayoutInfo.lineNumbersWidth;\n        const modifiedLayoutInfo = modifiedOptions.get(142 /* EditorOption.layoutInfo */);\n        const modifiedLineNumbersWidth = 10 + modifiedLayoutInfo.glyphMarginWidth + modifiedLayoutInfo.lineNumbersWidth;\n        let rowClassName = 'diff-review-row';\n        let lineNumbersExtraClassName = '';\n        const spacerClassName = 'diff-review-spacer';\n        let spacerIcon = null;\n        switch (item.type) {\n            case LineType.Added:\n                rowClassName = 'diff-review-row line-insert';\n                lineNumbersExtraClassName = ' char-insert';\n                spacerIcon = accessibleDiffViewerInsertIcon;\n                break;\n            case LineType.Deleted:\n                rowClassName = 'diff-review-row line-delete';\n                lineNumbersExtraClassName = ' char-delete';\n                spacerIcon = accessibleDiffViewerRemoveIcon;\n                break;\n        }\n        const row = document.createElement('div');\n        row.style.minWidth = width + 'px';\n        row.className = rowClassName;\n        row.setAttribute('role', 'listitem');\n        row.ariaLevel = '';\n        const cell = document.createElement('div');\n        cell.className = 'diff-review-cell';\n        cell.style.height = `${lineHeight}px`;\n        row.appendChild(cell);\n        const originalLineNumber = document.createElement('span');\n        originalLineNumber.style.width = (originalLineNumbersWidth + 'px');\n        originalLineNumber.style.minWidth = (originalLineNumbersWidth + 'px');\n        originalLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n        if (item.originalLineNumber !== undefined) {\n            originalLineNumber.appendChild(document.createTextNode(String(item.originalLineNumber)));\n        }\n        else {\n            originalLineNumber.innerText = '\\u00a0';\n        }\n        cell.appendChild(originalLineNumber);\n        const modifiedLineNumber = document.createElement('span');\n        modifiedLineNumber.style.width = (modifiedLineNumbersWidth + 'px');\n        modifiedLineNumber.style.minWidth = (modifiedLineNumbersWidth + 'px');\n        modifiedLineNumber.style.paddingRight = '10px';\n        modifiedLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n        if (item.modifiedLineNumber !== undefined) {\n            modifiedLineNumber.appendChild(document.createTextNode(String(item.modifiedLineNumber)));\n        }\n        else {\n            modifiedLineNumber.innerText = '\\u00a0';\n        }\n        cell.appendChild(modifiedLineNumber);\n        const spacer = document.createElement('span');\n        spacer.className = spacerClassName;\n        if (spacerIcon) {\n            const spacerCodicon = document.createElement('span');\n            spacerCodicon.className = ThemeIcon.asClassName(spacerIcon);\n            spacerCodicon.innerText = '\\u00a0\\u00a0';\n            spacer.appendChild(spacerCodicon);\n        }\n        else {\n            spacer.innerText = '\\u00a0\\u00a0';\n        }\n        cell.appendChild(spacer);\n        let lineContent;\n        if (item.modifiedLineNumber !== undefined) {\n            let html = this._getLineHtml(modifiedModel, modifiedOptions, modifiedModelOpts.tabSize, item.modifiedLineNumber, this._languageService.languageIdCodec);\n            if (DiffReview._ttPolicy) {\n                html = DiffReview._ttPolicy.createHTML(html);\n            }\n            cell.insertAdjacentHTML('beforeend', html);\n            lineContent = modifiedModel.getLineContent(item.modifiedLineNumber);\n        }\n        else {\n            let html = this._getLineHtml(originalModel, originalOptions, originalModelOpts.tabSize, item.originalLineNumber, this._languageService.languageIdCodec);\n            if (DiffReview._ttPolicy) {\n                html = DiffReview._ttPolicy.createHTML(html);\n            }\n            cell.insertAdjacentHTML('beforeend', html);\n            lineContent = originalModel.getLineContent(item.originalLineNumber);\n        }\n        if (lineContent.length === 0) {\n            lineContent = localize('blankLine', \"blank\");\n        }\n        let ariaLabel = '';\n        switch (item.type) {\n            case LineType.Unchanged:\n                if (item.originalLineNumber === item.modifiedLineNumber) {\n                    ariaLabel = localize({ key: 'unchangedLine', comment: ['The placeholders are contents of the line and should not be translated.'] }, \"{0} unchanged line {1}\", lineContent, item.originalLineNumber);\n                }\n                else {\n                    ariaLabel = localize('equalLine', \"{0} original line {1} modified line {2}\", lineContent, item.originalLineNumber, item.modifiedLineNumber);\n                }\n                break;\n            case LineType.Added:\n                ariaLabel = localize('insertLine', \"+ {0} modified line {1}\", lineContent, item.modifiedLineNumber);\n                break;\n            case LineType.Deleted:\n                ariaLabel = localize('deleteLine', \"- {0} original line {1}\", lineContent, item.originalLineNumber);\n                break;\n        }\n        row.setAttribute('aria-label', ariaLabel);\n        return row;\n    }\n    _getLineHtml(model, options, tabSize, lineNumber, languageIdCodec) {\n        const lineContent = model.getLineContent(lineNumber);\n        const fontInfo = options.get(49 /* EditorOption.fontInfo */);\n        const lineTokens = LineTokens.createEmpty(lineContent, languageIdCodec);\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, model.mightContainNonBasicASCII());\n        const containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, model.mightContainRTL());\n        const r = renderViewLine2(new RenderLineInput((fontInfo.isMonospace && !options.get(32 /* EditorOption.disableMonospaceOptimizations */)), fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, options.get(115 /* EditorOption.stopRenderingLineAfter */), options.get(97 /* EditorOption.renderWhitespace */), options.get(92 /* EditorOption.renderControlCharacters */), options.get(50 /* EditorOption.fontLigatures */) !== EditorFontLigatures.OFF, null));\n        return r.html;\n    }\n};\nView = __decorate([\n    __param(5, ILanguageService)\n], View);\nfunction forEachAdjacentItems(items, callback) {\n    let last;\n    for (const item of items) {\n        callback(last, item);\n        last = item;\n    }\n    callback(last, undefined);\n}\nfunction* group(items, shouldBeGrouped) {\n    let currentGroup;\n    let last;\n    for (const item of items) {\n        if (last !== undefined && shouldBeGrouped(last, item)) {\n            currentGroup.push(item);\n        }\n        else {\n            if (currentGroup) {\n                yield currentGroup;\n            }\n            currentGroup = [item];\n        }\n        last = item;\n    }\n    if (currentGroup) {\n        yield currentGroup;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { localize } from '../../../../nls.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nexport const diffMoveBorder = registerColor('diffEditor.move.border', { dark: '#8b8b8b9c', light: '#8b8b8b9c', hcDark: '#8b8b8b9c', hcLight: '#8b8b8b9c', }, localize('diffEditor.move.border', 'The border color for text that got moved in the diff editor.'));\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, h } from '../../../../base/browser/dom.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { autorun, derived, keepAlive, observableValue } from '../../../../base/common/observable.js';\nimport { autorunWithStore2 } from '../../../../base/common/observableImpl/autorun.js';\nimport { disposableObservableValue, transaction } from '../../../../base/common/observableImpl/base.js';\nimport { derivedWithStore } from '../../../../base/common/observableImpl/derived.js';\nimport './style.css';\nimport { EditorExtensionsRegistry } from '../../editorExtensions.js';\nimport { ICodeEditorService } from '../../services/codeEditorService.js';\nimport { CodeEditorWidget } from '../codeEditorWidget.js';\nimport { DiffEditorDecorations } from './diffEditorDecorations.js';\nimport { DiffEditorSash } from './diffEditorSash.js';\nimport { ViewZoneManager } from './lineAlignment.js';\nimport { MovedBlocksLinesPart } from './movedBlocksLines.js';\nimport { OverviewRulerPart } from './overviewRulerPart.js';\nimport { UnchangedRangesFeature } from './unchangedRanges.js';\nimport { ObservableElementSizeObserver, applyStyle, readHotReloadableExport } from './utils.js';\nimport { WorkerBasedDocumentDiffProvider } from '../workerBasedDocumentDiffProvider.js';\nimport { EditorType } from '../../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { DelegatingEditor } from './delegatingEditorImpl.js';\nimport { DiffEditorEditors } from './diffEditorEditors.js';\nimport { DiffEditorOptions } from './diffEditorOptions.js';\nimport { DiffEditorViewModel } from './diffEditorViewModel.js';\nimport { AccessibleDiffViewer } from './accessibleDiffViewer.js';\nimport { AudioCue, IAudioCueService } from '../../../../platform/audioCues/browser/audioCueService.js';\nimport './colors.js';\nlet DiffEditorWidget2 = class DiffEditorWidget2 extends DelegatingEditor {\n    constructor(_domElement, options, codeEditorWidgetOptions, _parentContextKeyService, _parentInstantiationService, codeEditorService, _audioCueService) {\n        var _a;\n        super();\n        this._domElement = _domElement;\n        this._parentContextKeyService = _parentContextKeyService;\n        this._parentInstantiationService = _parentInstantiationService;\n        this._audioCueService = _audioCueService;\n        this.elements = h('div.monaco-diff-editor.side-by-side', { style: { position: 'relative', height: '100%' } }, [\n            h('div.noModificationsOverlay@overlay', { style: { position: 'absolute', height: '100%', visibility: 'hidden', } }, [$('span', {}, 'No Changes')]),\n            h('div.editor.original@original', { style: { position: 'absolute', height: '100%' } }),\n            h('div.editor.modified@modified', { style: { position: 'absolute', height: '100%' } }),\n            h('div.accessibleDiffViewer@accessibleDiffViewer', { style: { position: 'absolute', height: '100%' } }),\n        ]);\n        this._diffModel = this._register(disposableObservableValue('diffModel', undefined));\n        this.onDidChangeModel = Event.fromObservableLight(this._diffModel);\n        this._contextKeyService = this._register(this._parentContextKeyService.createScoped(this._domElement));\n        this._instantiationService = this._parentInstantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\n        this._boundarySashes = observableValue('boundarySashes', undefined);\n        this._accessibleDiffViewerShouldBeVisible = observableValue('accessibleDiffViewerShouldBeVisible', false);\n        this._accessibleDiffViewerVisible = derived('accessibleDiffViewerVisible', reader => this._options.onlyShowAccessibleDiffViewer.read(reader)\n            ? true\n            : this._accessibleDiffViewerShouldBeVisible.read(reader));\n        this._layoutInfo = derived('modifiedEditorLayoutInfo', (reader) => {\n            var _a;\n            const width = this._rootSizeObserver.width.read(reader);\n            const height = this._rootSizeObserver.height.read(reader);\n            const sashLeft = (_a = this._sash.read(reader)) === null || _a === void 0 ? void 0 : _a.sashLeft.read(reader);\n            const originalWidth = sashLeft !== null && sashLeft !== void 0 ? sashLeft : Math.max(5, this._editors.original.getLayoutInfo().decorationsLeft);\n            const modifiedWidth = width - originalWidth - (this._options.renderOverviewRuler.read(reader) ? OverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH : 0);\n            this.elements.original.style.width = originalWidth + 'px';\n            this.elements.original.style.left = '0px';\n            this.elements.modified.style.width = modifiedWidth + 'px';\n            this.elements.modified.style.left = originalWidth + 'px';\n            this._editors.original.layout({ width: originalWidth, height });\n            this._editors.modified.layout({ width: modifiedWidth, height });\n            return {\n                modifiedEditor: this._editors.modified.getLayoutInfo(),\n                originalEditor: this._editors.original.getLayoutInfo(),\n            };\n        });\n        this._diffValue = this._diffModel.map((m, r) => m === null || m === void 0 ? void 0 : m.diff.read(r));\n        this.onDidUpdateDiff = Event.fromObservableLight(this._diffValue);\n        codeEditorService.willCreateDiffEditor();\n        this._contextKeyService.createKey('isInDiffEditor', true);\n        this._contextKeyService.createKey('diffEditorVersion', 2);\n        this._options = new DiffEditorOptions(options);\n        this._contextKeyService.createKey(EditorContextKeys.isEmbeddedDiffEditor.key, false);\n        const isEmbeddedDiffEditorKey = EditorContextKeys.isEmbeddedDiffEditor.bindTo(this._contextKeyService);\n        this._register(autorun('update isEmbeddedDiffEditorKey', reader => {\n            isEmbeddedDiffEditorKey.set(this._options.isInEmbeddedEditor.read(reader));\n        }));\n        const accessibleDiffViewerVisibleContextKeyValue = EditorContextKeys.accessibleDiffViewerVisible.bindTo(this._contextKeyService);\n        this._register(autorun('update accessibleDiffViewerVisible context key', reader => {\n            accessibleDiffViewerVisibleContextKeyValue.set(this._accessibleDiffViewerVisible.read(reader));\n        }));\n        this._domElement.appendChild(this.elements.root);\n        this._rootSizeObserver = this._register(new ObservableElementSizeObserver(this.elements.root, options.dimension));\n        this._rootSizeObserver.setAutomaticLayout((_a = options.automaticLayout) !== null && _a !== void 0 ? _a : false);\n        this._editors = this._register(this._instantiationService.createInstance(DiffEditorEditors, this.elements.original, this.elements.modified, this._options, codeEditorWidgetOptions, (i, c, o, o2) => this._createInnerEditor(i, c, o, o2)));\n        this._sash = derivedWithStore('sash', (reader, store) => {\n            const showSash = this._options.renderSideBySide.read(reader);\n            this.elements.root.classList.toggle('side-by-side', showSash);\n            if (!showSash) {\n                return undefined;\n            }\n            const result = store.add(new DiffEditorSash(this._options, this.elements.root, {\n                height: this._rootSizeObserver.height,\n                width: this._rootSizeObserver.width.map((w, reader) => w - (this._options.renderOverviewRuler.read(reader) ? OverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH : 0)),\n            }));\n            store.add(autorun('setBoundarySashes', reader => {\n                const boundarySashes = this._boundarySashes.read(reader);\n                if (boundarySashes) {\n                    result.setBoundarySashes(boundarySashes);\n                }\n            }));\n            return result;\n        });\n        this._register(keepAlive(this._sash, true));\n        this._register(autorunWithStore2('UnchangedRangesFeature', (reader, store) => {\n            this.unchangedRangesFeature = store.add(new (readHotReloadableExport(UnchangedRangesFeature, reader))(this._editors, this._diffModel, this._options));\n        }));\n        this._register(autorunWithStore2('DiffEditorDecorations', (reader, store) => {\n            store.add(new (readHotReloadableExport(DiffEditorDecorations, reader))(this._editors, this._diffModel, this._options));\n        }));\n        this._register(autorunWithStore2('ViewZoneManager', (reader, store) => {\n            store.add(this._instantiationService.createInstance(readHotReloadableExport(ViewZoneManager, reader), this._editors, this._diffModel, this._options, this, () => this.unchangedRangesFeature.isUpdatingViewZones));\n        }));\n        this._register(autorunWithStore2('OverviewRulerPart', (reader, store) => {\n            store.add(this._instantiationService.createInstance(readHotReloadableExport(OverviewRulerPart, reader), this._editors, this.elements.root, this._diffModel, this._rootSizeObserver.width, this._rootSizeObserver.height, this._layoutInfo.map(i => i.modifiedEditor), this._options));\n        }));\n        this._register(autorunWithStore2('_accessibleDiffViewer', (reader, store) => {\n            this._accessibleDiffViewer = store.add(this._register(this._instantiationService.createInstance(readHotReloadableExport(AccessibleDiffViewer, reader), this.elements.accessibleDiffViewer, this._accessibleDiffViewerVisible, (visible, tx) => this._accessibleDiffViewerShouldBeVisible.set(visible, tx), this._options.onlyShowAccessibleDiffViewer.map(v => !v), this._rootSizeObserver.width, this._rootSizeObserver.height, this._diffModel.map((m, r) => { var _a; return (_a = m === null || m === void 0 ? void 0 : m.diff.read(r)) === null || _a === void 0 ? void 0 : _a.mappings.map(m => m.lineRangeMapping); }), this._editors)));\n        }));\n        const visibility = this._accessibleDiffViewerVisible.map(v => v ? 'hidden' : 'visible');\n        this._register(applyStyle(this.elements.modified, { visibility }));\n        this._register(applyStyle(this.elements.original, { visibility }));\n        this._createDiffEditorContributions();\n        codeEditorService.addDiffEditor(this);\n        this._register(keepAlive(this._layoutInfo, true));\n        this._register(new MovedBlocksLinesPart(this.elements.root, this._diffModel, this._layoutInfo.map(i => i.originalEditor), this._layoutInfo.map(i => i.modifiedEditor), this._editors));\n        this._register(applyStyle(this.elements.overlay, {\n            width: this._layoutInfo.map((i, r) => i.originalEditor.width + (this._options.renderSideBySide.read(r) ? 0 : i.modifiedEditor.width)),\n            visibility: derived('visibility', reader => {\n                var _a, _b;\n                return (this._options.collapseUnchangedRegions.read(reader) && ((_b = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.diff.read(reader)) === null || _b === void 0 ? void 0 : _b.mappings.length) === 0)\n                    ? 'visible' : 'hidden';\n            }),\n        }));\n        this._register(this._editors.original.onDidChangeCursorPosition(e => {\n            const m = this._diffModel.get();\n            if (!m) {\n                return;\n            }\n            const movedText = m.diff.get().movedTexts.find(m => m.lineRangeMapping.original.contains(e.position.lineNumber));\n            m.syncedMovedTexts.set(movedText, undefined);\n        }));\n        this._register(this._editors.modified.onDidChangeCursorPosition(e => {\n            const m = this._diffModel.get();\n            if (!m) {\n                return;\n            }\n            const movedText = m.diff.get().movedTexts.find(m => m.lineRangeMapping.modified.contains(e.position.lineNumber));\n            m.syncedMovedTexts.set(movedText, undefined);\n        }));\n        // Revert change when an arrow is clicked.\n        this._register(this._editors.modified.onMouseDown(event => {\n            var _a, _b;\n            if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? void 0 : _a.className.includes('arrow-revert-change'))) {\n                const lineNumber = event.target.position.lineNumber;\n                const viewZone = event.target;\n                const model = this._diffModel.get();\n                if (!model) {\n                    return;\n                }\n                const diffs = (_b = model.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings;\n                if (!diffs) {\n                    return;\n                }\n                const diff = diffs.find(d => (viewZone === null || viewZone === void 0 ? void 0 : viewZone.detail.afterLineNumber) === d.lineRangeMapping.modifiedRange.startLineNumber - 1 ||\n                    d.lineRangeMapping.modifiedRange.startLineNumber === lineNumber);\n                if (!diff) {\n                    return;\n                }\n                this.revert(diff.lineRangeMapping);\n                event.event.stopPropagation();\n            }\n        }));\n        this._register(Event.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition, (e) => {\n            var _a, _b;\n            if ((e === null || e === void 0 ? void 0 : e.reason) === 3 /* CursorChangeReason.Explicit */) {\n                const diff = (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings.find(m => m.lineRangeMapping.modifiedRange.contains(e.position.lineNumber));\n                if (diff === null || diff === void 0 ? void 0 : diff.lineRangeMapping.modifiedRange.isEmpty) {\n                    this._audioCueService.playAudioCue(AudioCue.diffLineDeleted);\n                }\n                else if (diff === null || diff === void 0 ? void 0 : diff.lineRangeMapping.originalRange.isEmpty) {\n                    this._audioCueService.playAudioCue(AudioCue.diffLineInserted);\n                }\n                else if (diff) {\n                    this._audioCueService.playAudioCue(AudioCue.diffLineModified);\n                }\n            }\n        }));\n    }\n    _createInnerEditor(instantiationService, container, options, editorWidgetOptions) {\n        const editor = instantiationService.createInstance(CodeEditorWidget, container, options, editorWidgetOptions);\n        return editor;\n    }\n    _createDiffEditorContributions() {\n        const contributions = EditorExtensionsRegistry.getDiffEditorContributions();\n        for (const desc of contributions) {\n            try {\n                this._register(this._instantiationService.createInstance(desc.ctor, this));\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n        }\n    }\n    get _targetEditor() { return this._editors.modified; }\n    getEditorType() { return EditorType.IDiffEditor; }\n    layout(dimension) { this._rootSizeObserver.observe(dimension); }\n    hasTextFocus() { return this._editors.original.hasTextFocus() || this._editors.modified.hasTextFocus(); }\n    saveViewState() {\n        var _a;\n        const originalViewState = this._editors.original.saveViewState();\n        const modifiedViewState = this._editors.modified.saveViewState();\n        return {\n            original: originalViewState,\n            modified: modifiedViewState,\n            modelState: (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.serializeState(),\n        };\n    }\n    restoreViewState(s) {\n        var _a;\n        if (s && s.original && s.modified) {\n            const diffEditorState = s;\n            this._editors.original.restoreViewState(diffEditorState.original);\n            this._editors.modified.restoreViewState(diffEditorState.modified);\n            if (diffEditorState.modelState) {\n                (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.restoreSerializedState(diffEditorState.modelState);\n            }\n        }\n    }\n    createViewModel(model) {\n        return new DiffEditorViewModel(model, this._options, \n        // TODO@hediet make diffAlgorithm observable\n        this._instantiationService.createInstance(WorkerBasedDocumentDiffProvider, { diffAlgorithm: this._options.diffAlgorithm.get() }));\n    }\n    getModel() { var _a, _b; return (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.model) !== null && _b !== void 0 ? _b : null; }\n    setModel(model) {\n        if (!model && this._diffModel.get()) {\n            // Transitioning from a model to no-model\n            this._accessibleDiffViewer.close();\n        }\n        const vm = model ? ('model' in model) ? model : this.createViewModel(model) : undefined;\n        this._editors.original.setModel(vm ? vm.model.original : null);\n        this._editors.modified.setModel(vm ? vm.model.modified : null);\n        transaction(tx => {\n            this._diffModel.set(vm, tx);\n        });\n    }\n    /**\n     * @param changedOptions Only has values for top-level options that have actually changed.\n     */\n    updateOptions(changedOptions) {\n        this._options.updateOptions(changedOptions);\n    }\n    getContainerDomNode() { return this._domElement; }\n    getOriginalEditor() { return this._editors.original; }\n    getModifiedEditor() { return this._editors.modified; }\n    /**\n     * @deprecated Use `this.getDiffComputationResult().changes2` instead.\n     */\n    getLineChanges() {\n        var _a;\n        const diffState = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get();\n        if (!diffState) {\n            return null;\n        }\n        return toLineChanges(diffState);\n    }\n    revert(diff) {\n        var _a;\n        const model = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.model;\n        if (!model) {\n            return;\n        }\n        const changes = diff.innerChanges\n            ? diff.innerChanges.map(c => ({\n                range: c.modifiedRange,\n                text: model.original.getValueInRange(c.originalRange)\n            }))\n            : [\n                {\n                    range: diff.modifiedRange.toExclusiveRange(),\n                    text: model.original.getValueInRange(diff.originalRange.toExclusiveRange())\n                }\n            ];\n        this._editors.modified.executeEdits('diffEditor', changes);\n    }\n    accessibleDiffViewerNext() { this._accessibleDiffViewer.next(); }\n    accessibleDiffViewerPrev() { this._accessibleDiffViewer.prev(); }\n};\nDiffEditorWidget2 = __decorate([\n    __param(3, IContextKeyService),\n    __param(4, IInstantiationService),\n    __param(5, ICodeEditorService),\n    __param(6, IAudioCueService)\n], DiffEditorWidget2);\nexport { DiffEditorWidget2 };\nfunction toLineChanges(state) {\n    return state.mappings.map(x => {\n        const m = x.lineRangeMapping;\n        let originalStartLineNumber;\n        let originalEndLineNumber;\n        let modifiedStartLineNumber;\n        let modifiedEndLineNumber;\n        let innerChanges = m.innerChanges;\n        if (m.originalRange.isEmpty) {\n            // Insertion\n            originalStartLineNumber = m.originalRange.startLineNumber - 1;\n            originalEndLineNumber = 0;\n            innerChanges = undefined;\n        }\n        else {\n            originalStartLineNumber = m.originalRange.startLineNumber;\n            originalEndLineNumber = m.originalRange.endLineNumberExclusive - 1;\n        }\n        if (m.modifiedRange.isEmpty) {\n            // Deletion\n            modifiedStartLineNumber = m.modifiedRange.startLineNumber - 1;\n            modifiedEndLineNumber = 0;\n            innerChanges = undefined;\n        }\n        else {\n            modifiedStartLineNumber = m.modifiedRange.startLineNumber;\n            modifiedEndLineNumber = m.modifiedRange.endLineNumberExclusive - 1;\n        }\n        return {\n            originalStartLineNumber,\n            originalEndLineNumber,\n            modifiedStartLineNumber,\n            modifiedEndLineNumber,\n            charChanges: innerChanges === null || innerChanges === void 0 ? void 0 : innerChanges.map(m => ({\n                originalStartLineNumber: m.originalRange.startLineNumber,\n                originalStartColumn: m.originalRange.startColumn,\n                originalEndLineNumber: m.originalRange.endLineNumber,\n                originalEndColumn: m.originalRange.endColumn,\n                modifiedStartLineNumber: m.modifiedRange.startLineNumber,\n                modifiedStartColumn: m.modifiedRange.startColumn,\n                modifiedEndLineNumber: m.modifiedRange.endLineNumber,\n                modifiedEndColumn: m.modifiedRange.endColumn,\n            }))\n        };\n    });\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as assert from '../../../base/common/assert.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport * as objects from '../../../base/common/objects.js';\nimport { Range } from '../../common/core/range.js';\nimport { AudioCue, IAudioCueService } from '../../../platform/audioCues/browser/audioCueService.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nconst defaultOptions = {\n    followsCaret: true,\n    ignoreCharChanges: true,\n    alwaysRevealFirst: true,\n    findResultLoop: true\n};\n/**\n * Create a new diff navigator for the provided diff editor.\n */\nlet DiffNavigator = class DiffNavigator extends Disposable {\n    constructor(editor, options = {}, _audioCueService, _codeEditorService, _accessibilityService) {\n        super();\n        this._audioCueService = _audioCueService;\n        this._codeEditorService = _codeEditorService;\n        this._accessibilityService = _accessibilityService;\n        this._onDidUpdate = this._register(new Emitter());\n        this._editor = editor;\n        this._options = objects.mixin(options, defaultOptions, false);\n        this.disposed = false;\n        this.nextIdx = -1;\n        this.ranges = [];\n        this.ignoreSelectionChange = false;\n        this.revealFirst = Boolean(this._options.alwaysRevealFirst);\n        this._register(this._editor.onDidUpdateDiff(() => this._onDiffUpdated()));\n        if (this._options.followsCaret) {\n            this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition((e) => {\n                if (this.ignoreSelectionChange) {\n                    return;\n                }\n                this._updateAccessibilityState(e.position.lineNumber);\n                this.nextIdx = -1;\n            }));\n        }\n        // init things\n        this._init();\n    }\n    _init() {\n        const changes = this._editor.getLineChanges();\n        if (!changes) {\n            return;\n        }\n    }\n    _onDiffUpdated() {\n        this._init();\n        this._compute(this._editor.getLineChanges());\n        if (this.revealFirst) {\n            // Only reveal first on first non-null changes\n            if (this._editor.getLineChanges() !== null) {\n                this.revealFirst = false;\n                this.nextIdx = -1;\n                this.next(1 /* ScrollType.Immediate */);\n            }\n        }\n    }\n    _compute(lineChanges) {\n        // new ranges\n        this.ranges = [];\n        if (lineChanges) {\n            // create ranges from changes\n            lineChanges.forEach((lineChange) => {\n                if (!this._options.ignoreCharChanges && lineChange.charChanges) {\n                    lineChange.charChanges.forEach((charChange) => {\n                        this.ranges.push({\n                            rhs: true,\n                            range: new Range(charChange.modifiedStartLineNumber, charChange.modifiedStartColumn, charChange.modifiedEndLineNumber, charChange.modifiedEndColumn)\n                        });\n                    });\n                }\n                else {\n                    if (lineChange.modifiedEndLineNumber === 0) {\n                        // a deletion\n                        this.ranges.push({\n                            rhs: true,\n                            range: new Range(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedStartLineNumber + 1, 1)\n                        });\n                    }\n                    else {\n                        // an insertion or modification\n                        this.ranges.push({\n                            rhs: true,\n                            range: new Range(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber + 1, 1)\n                        });\n                    }\n                }\n            });\n        }\n        // sort\n        this.ranges.sort((left, right) => Range.compareRangesUsingStarts(left.range, right.range));\n        this._onDidUpdate.fire(this);\n    }\n    _initIdx(fwd) {\n        let found = false;\n        const position = this._editor.getPosition();\n        if (!position) {\n            this.nextIdx = 0;\n            return;\n        }\n        for (let i = 0, len = this.ranges.length; i < len && !found; i++) {\n            const range = this.ranges[i].range;\n            if (position.isBeforeOrEqual(range.getStartPosition())) {\n                this.nextIdx = i + (fwd ? 0 : -1);\n                found = true;\n            }\n        }\n        if (!found) {\n            // after the last change\n            this.nextIdx = fwd ? 0 : this.ranges.length - 1;\n        }\n        if (this.nextIdx < 0) {\n            this.nextIdx = this.ranges.length - 1;\n        }\n    }\n    _move(fwd, scrollType) {\n        assert.ok(!this.disposed, 'Illegal State - diff navigator has been disposed');\n        if (!this.canNavigate()) {\n            return;\n        }\n        if (this.nextIdx === -1) {\n            this._initIdx(fwd);\n        }\n        else if (fwd) {\n            this.nextIdx += 1;\n            if (this.nextIdx >= this.ranges.length) {\n                this.nextIdx = 0;\n            }\n        }\n        else {\n            this.nextIdx -= 1;\n            if (this.nextIdx < 0) {\n                this.nextIdx = this.ranges.length - 1;\n            }\n        }\n        const info = this.ranges[this.nextIdx];\n        this.ignoreSelectionChange = true;\n        try {\n            const pos = info.range.getStartPosition();\n            this._editor.setPosition(pos);\n            this._editor.revealRangeInCenter(info.range, scrollType);\n            this._updateAccessibilityState(pos.lineNumber, true);\n        }\n        finally {\n            this.ignoreSelectionChange = false;\n        }\n    }\n    _updateAccessibilityState(lineNumber, jumpToChange) {\n        var _a;\n        const modifiedEditor = (_a = this._editor.getModel()) === null || _a === void 0 ? void 0 : _a.modified;\n        if (!modifiedEditor) {\n            return;\n        }\n        const insertedOrModified = modifiedEditor.getLineDecorations(lineNumber).find(l => l.options.className === 'line-insert');\n        if (insertedOrModified) {\n            this._audioCueService.playAudioCue(AudioCue.diffLineModified, true);\n        }\n        else if (jumpToChange) {\n            // The modified editor does not include deleted lines, but when\n            // we are moved to the area where lines were deleted, play this cue\n            this._audioCueService.playAudioCue(AudioCue.diffLineDeleted, true);\n        }\n        else {\n            return;\n        }\n        const codeEditor = this._codeEditorService.getActiveCodeEditor();\n        if (jumpToChange && codeEditor && insertedOrModified && this._accessibilityService.isScreenReaderOptimized()) {\n            codeEditor.setSelection({ startLineNumber: lineNumber, startColumn: 0, endLineNumber: lineNumber, endColumn: Number.MAX_VALUE });\n            codeEditor.writeScreenReaderContent('diff-navigation');\n        }\n    }\n    canNavigate() {\n        return this.ranges && this.ranges.length > 0;\n    }\n    next(scrollType = 0 /* ScrollType.Smooth */) {\n        if (!this.canNavigateNext()) {\n            return;\n        }\n        this._move(true, scrollType);\n    }\n    previous(scrollType = 0 /* ScrollType.Smooth */) {\n        if (!this.canNavigatePrevious()) {\n            return;\n        }\n        this._move(false, scrollType);\n    }\n    canNavigateNext() {\n        return this.canNavigateLoop() || this.nextIdx < this.ranges.length - 1;\n    }\n    canNavigatePrevious() {\n        return this.canNavigateLoop() || this.nextIdx !== 0;\n    }\n    canNavigateLoop() {\n        return Boolean(this._options.findResultLoop);\n    }\n    dispose() {\n        super.dispose();\n        this.ranges = [];\n        this.disposed = true;\n    }\n};\nDiffNavigator = __decorate([\n    __param(2, IAudioCueService),\n    __param(3, ICodeEditorService),\n    __param(4, IAccessibilityService)\n], DiffNavigator);\nexport { DiffNavigator };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../base/browser/dom.js';\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\nimport { createTrustedTypesPolicy } from '../../../base/browser/trustedTypes.js';\nimport { ActionBar } from '../../../base/browser/ui/actionbar/actionbar.js';\nimport { DomScrollableElement } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Action } from '../../../base/common/actions.js';\nimport { Codicon } from '../../../base/common/codicons.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { ThemeIcon } from '../../../base/common/themables.js';\nimport './media/diffReview.css';\nimport { applyFontInfo } from '../config/domFontInfo.js';\nimport { EditorFontLigatures } from '../../common/config/editorOptions.js';\nimport { Position } from '../../common/core/position.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport { LineTokens } from '../../common/tokens/lineTokens.js';\nimport { RenderLineInput, renderViewLine2 as renderViewLine } from '../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../common/viewModel.js';\nimport * as nls from '../../../nls.js';\nimport { AudioCue, IAudioCueService } from '../../../platform/audioCues/browser/audioCueService.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { registerIcon } from '../../../platform/theme/common/iconRegistry.js';\nconst DIFF_LINES_PADDING = 3;\nclass DiffEntry {\n    constructor(originalLineStart, originalLineEnd, modifiedLineStart, modifiedLineEnd) {\n        this.originalLineStart = originalLineStart;\n        this.originalLineEnd = originalLineEnd;\n        this.modifiedLineStart = modifiedLineStart;\n        this.modifiedLineEnd = modifiedLineEnd;\n    }\n    getType() {\n        if (this.originalLineStart === 0) {\n            return 1 /* DiffEntryType.Insert */;\n        }\n        if (this.modifiedLineStart === 0) {\n            return 2 /* DiffEntryType.Delete */;\n        }\n        return 0 /* DiffEntryType.Equal */;\n    }\n}\nclass Diff {\n    constructor(entries) {\n        this.entries = entries;\n    }\n}\nconst diffReviewInsertIcon = registerIcon('diff-review-insert', Codicon.add, nls.localize('diffReviewInsertIcon', 'Icon for \\'Insert\\' in diff review.'));\nconst diffReviewRemoveIcon = registerIcon('diff-review-remove', Codicon.remove, nls.localize('diffReviewRemoveIcon', 'Icon for \\'Remove\\' in diff review.'));\nconst diffReviewCloseIcon = registerIcon('diff-review-close', Codicon.close, nls.localize('diffReviewCloseIcon', 'Icon for \\'Close\\' in diff review.'));\nlet DiffReview = class DiffReview extends Disposable {\n    constructor(diffEditor, _languageService, _audioCueService, _configurationService) {\n        super();\n        this._languageService = _languageService;\n        this._audioCueService = _audioCueService;\n        this._configurationService = _configurationService;\n        this._width = 0;\n        this._diffEditor = diffEditor;\n        this._isVisible = false;\n        this.shadow = createFastDomNode(document.createElement('div'));\n        this.shadow.setClassName('diff-review-shadow');\n        this.actionBarContainer = createFastDomNode(document.createElement('div'));\n        this.actionBarContainer.setClassName('diff-review-actions');\n        this._actionBar = this._register(new ActionBar(this.actionBarContainer.domNode));\n        this._actionBar.push(new Action('diffreview.close', nls.localize('label.close', \"Close\"), 'close-diff-review ' + ThemeIcon.asClassName(diffReviewCloseIcon), true, () => __awaiter(this, void 0, void 0, function* () { return this.hide(); })), { label: false, icon: true });\n        this.domNode = createFastDomNode(document.createElement('div'));\n        this.domNode.setClassName('diff-review monaco-editor-background');\n        this._content = createFastDomNode(document.createElement('div'));\n        this._content.setClassName('diff-review-content');\n        this._content.setAttribute('role', 'code');\n        this.scrollbar = this._register(new DomScrollableElement(this._content.domNode, {}));\n        this.domNode.domNode.appendChild(this.scrollbar.getDomNode());\n        this._register(diffEditor.onDidUpdateDiff(() => {\n            if (!this._isVisible) {\n                return;\n            }\n            this._diffs = this._compute();\n            this._render();\n        }));\n        this._register(diffEditor.getModifiedEditor().onDidChangeCursorPosition(() => {\n            if (!this._isVisible) {\n                return;\n            }\n            this._render();\n        }));\n        this._register(dom.addStandardDisposableListener(this.domNode.domNode, 'click', (e) => {\n            e.preventDefault();\n            const row = dom.findParentWithClass(e.target, 'diff-review-row');\n            if (row) {\n                this._goToRow(row);\n            }\n        }));\n        this._register(dom.addStandardDisposableListener(this.domNode.domNode, 'keydown', (e) => {\n            if (e.equals(18 /* KeyCode.DownArrow */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)\n                || e.equals(512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */)) {\n                e.preventDefault();\n                this._goToRow(this._getNextRow(), 'next');\n            }\n            if (e.equals(16 /* KeyCode.UpArrow */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */)\n                || e.equals(512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */)) {\n                e.preventDefault();\n                this._goToRow(this._getPrevRow(), 'previous');\n            }\n            if (e.equals(9 /* KeyCode.Escape */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 9 /* KeyCode.Escape */)\n                || e.equals(512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */)\n                || e.equals(1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */)\n                || e.equals(10 /* KeyCode.Space */)\n                || e.equals(3 /* KeyCode.Enter */)) {\n                e.preventDefault();\n                this.accept();\n            }\n        }));\n        this._register(this._configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration('accessibility.verbosity.diffEditor')) {\n                this._diffEditor.updateOptions({ accessibilityVerbose: this._configurationService.getValue('accessibility.verbosity.diffEditor') });\n            }\n        }));\n        this._diffs = [];\n        this._currentDiff = null;\n    }\n    prev() {\n        let index = 0;\n        if (!this._isVisible) {\n            this._diffs = this._compute();\n        }\n        if (this._isVisible) {\n            let currentIndex = -1;\n            for (let i = 0, len = this._diffs.length; i < len; i++) {\n                if (this._diffs[i] === this._currentDiff) {\n                    currentIndex = i;\n                    break;\n                }\n            }\n            index = (this._diffs.length + currentIndex - 1);\n        }\n        else {\n            index = this._findDiffIndex(this._diffEditor.getPosition());\n        }\n        if (this._diffs.length === 0) {\n            // Nothing to do\n            return;\n        }\n        index = index % this._diffs.length;\n        const entries = this._diffs[index].entries;\n        this._diffEditor.setPosition(new Position(entries[0].modifiedLineStart, 1));\n        this._diffEditor.setSelection({ startColumn: 1, startLineNumber: entries[0].modifiedLineStart, endColumn: 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */, endLineNumber: entries[entries.length - 1].modifiedLineEnd });\n        this._isVisible = true;\n        this._diffEditor.doLayout();\n        this._render();\n        this._goToRow(this._getPrevRow(), 'previous');\n    }\n    next() {\n        let index = 0;\n        if (!this._isVisible) {\n            this._diffs = this._compute();\n        }\n        if (this._isVisible) {\n            let currentIndex = -1;\n            for (let i = 0, len = this._diffs.length; i < len; i++) {\n                if (this._diffs[i] === this._currentDiff) {\n                    currentIndex = i;\n                    break;\n                }\n            }\n            index = (currentIndex + 1);\n        }\n        else {\n            index = this._findDiffIndex(this._diffEditor.getPosition());\n        }\n        if (this._diffs.length === 0) {\n            // Nothing to do\n            return;\n        }\n        index = index % this._diffs.length;\n        const entries = this._diffs[index].entries;\n        this._diffEditor.setPosition(new Position(entries[0].modifiedLineStart, 1));\n        this._diffEditor.setSelection({ startColumn: 1, startLineNumber: entries[0].modifiedLineStart, endColumn: 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */, endLineNumber: entries[entries.length - 1].modifiedLineEnd });\n        this._isVisible = true;\n        this._diffEditor.doLayout();\n        this._render();\n        this._goToRow(this._getNextRow(), 'next');\n    }\n    accept() {\n        let jumpToLineNumber = -1;\n        const current = this._getCurrentFocusedRow();\n        if (current) {\n            const lineNumber = parseInt(current.getAttribute('data-line'), 10);\n            if (!isNaN(lineNumber)) {\n                jumpToLineNumber = lineNumber;\n            }\n        }\n        this.hide();\n        if (jumpToLineNumber !== -1) {\n            this._diffEditor.setPosition(new Position(jumpToLineNumber, 1));\n            this._diffEditor.revealPosition(new Position(jumpToLineNumber, 1), 1 /* ScrollType.Immediate */);\n        }\n    }\n    hide() {\n        this._isVisible = false;\n        this._diffEditor.updateOptions({ readOnly: false });\n        this._diffEditor.focus();\n        this._diffEditor.doLayout();\n        this._render();\n    }\n    _getPrevRow() {\n        const current = this._getCurrentFocusedRow();\n        if (!current) {\n            return this._getFirstRow();\n        }\n        if (current.previousElementSibling) {\n            return current.previousElementSibling;\n        }\n        return current;\n    }\n    _getNextRow() {\n        const current = this._getCurrentFocusedRow();\n        if (!current) {\n            return this._getFirstRow();\n        }\n        if (current.nextElementSibling) {\n            return current.nextElementSibling;\n        }\n        return current;\n    }\n    _getFirstRow() {\n        return this.domNode.domNode.querySelector('.diff-review-row');\n    }\n    _getCurrentFocusedRow() {\n        const result = document.activeElement;\n        if (result && /diff-review-row/.test(result.className)) {\n            return result;\n        }\n        return null;\n    }\n    _goToRow(row, type) {\n        const current = this._getCurrentFocusedRow();\n        row.tabIndex = 0;\n        row.focus();\n        if (current && current !== row) {\n            current.tabIndex = -1;\n        }\n        const element = !type ? current : type === 'next' ? current === null || current === void 0 ? void 0 : current.nextElementSibling : current === null || current === void 0 ? void 0 : current.previousElementSibling;\n        if (element === null || element === void 0 ? void 0 : element.classList.contains(\"line-insert\" /* DiffEditorLineClasses.Insert */)) {\n            this._audioCueService.playAudioCue(AudioCue.diffLineInserted, true);\n        }\n        else if (element === null || element === void 0 ? void 0 : element.classList.contains(\"line-delete\" /* DiffEditorLineClasses.Delete */)) {\n            this._audioCueService.playAudioCue(AudioCue.diffLineDeleted, true);\n        }\n        this.scrollbar.scanDomNode();\n    }\n    isVisible() {\n        return this._isVisible;\n    }\n    layout(top, width, height) {\n        this._width = width;\n        this.shadow.setTop(top - 6);\n        this.shadow.setWidth(width);\n        this.shadow.setHeight(this._isVisible ? 6 : 0);\n        this.domNode.setTop(top);\n        this.domNode.setWidth(width);\n        this.domNode.setHeight(height);\n        this._content.setHeight(height);\n        this._content.setWidth(width);\n        if (this._isVisible) {\n            this.actionBarContainer.setAttribute('aria-hidden', 'false');\n            this.actionBarContainer.setDisplay('block');\n        }\n        else {\n            this.actionBarContainer.setAttribute('aria-hidden', 'true');\n            this.actionBarContainer.setDisplay('none');\n        }\n    }\n    _compute() {\n        const lineChanges = this._diffEditor.getLineChanges();\n        if (!lineChanges || lineChanges.length === 0) {\n            return [];\n        }\n        const originalModel = this._diffEditor.getOriginalEditor().getModel();\n        const modifiedModel = this._diffEditor.getModifiedEditor().getModel();\n        if (!originalModel || !modifiedModel) {\n            return [];\n        }\n        return DiffReview._mergeAdjacent(lineChanges, originalModel.getLineCount(), modifiedModel.getLineCount());\n    }\n    static _mergeAdjacent(lineChanges, originalLineCount, modifiedLineCount) {\n        if (!lineChanges || lineChanges.length === 0) {\n            return [];\n        }\n        const diffs = [];\n        let diffsLength = 0;\n        for (let i = 0, len = lineChanges.length; i < len; i++) {\n            const lineChange = lineChanges[i];\n            const originalStart = lineChange.originalStartLineNumber;\n            const originalEnd = lineChange.originalEndLineNumber;\n            const modifiedStart = lineChange.modifiedStartLineNumber;\n            const modifiedEnd = lineChange.modifiedEndLineNumber;\n            const r = [];\n            let rLength = 0;\n            // Emit before anchors\n            {\n                const originalEqualAbove = (originalEnd === 0 ? originalStart : originalStart - 1);\n                const modifiedEqualAbove = (modifiedEnd === 0 ? modifiedStart : modifiedStart - 1);\n                // Make sure we don't step into the previous diff\n                let minOriginal = 1;\n                let minModified = 1;\n                if (i > 0) {\n                    const prevLineChange = lineChanges[i - 1];\n                    if (prevLineChange.originalEndLineNumber === 0) {\n                        minOriginal = prevLineChange.originalStartLineNumber + 1;\n                    }\n                    else {\n                        minOriginal = prevLineChange.originalEndLineNumber + 1;\n                    }\n                    if (prevLineChange.modifiedEndLineNumber === 0) {\n                        minModified = prevLineChange.modifiedStartLineNumber + 1;\n                    }\n                    else {\n                        minModified = prevLineChange.modifiedEndLineNumber + 1;\n                    }\n                }\n                let fromOriginal = originalEqualAbove - DIFF_LINES_PADDING + 1;\n                let fromModified = modifiedEqualAbove - DIFF_LINES_PADDING + 1;\n                if (fromOriginal < minOriginal) {\n                    const delta = minOriginal - fromOriginal;\n                    fromOriginal = fromOriginal + delta;\n                    fromModified = fromModified + delta;\n                }\n                if (fromModified < minModified) {\n                    const delta = minModified - fromModified;\n                    fromOriginal = fromOriginal + delta;\n                    fromModified = fromModified + delta;\n                }\n                r[rLength++] = new DiffEntry(fromOriginal, originalEqualAbove, fromModified, modifiedEqualAbove);\n            }\n            // Emit deleted lines\n            {\n                if (originalEnd !== 0) {\n                    r[rLength++] = new DiffEntry(originalStart, originalEnd, 0, 0);\n                }\n            }\n            // Emit inserted lines\n            {\n                if (modifiedEnd !== 0) {\n                    r[rLength++] = new DiffEntry(0, 0, modifiedStart, modifiedEnd);\n                }\n            }\n            // Emit after anchors\n            {\n                const originalEqualBelow = (originalEnd === 0 ? originalStart + 1 : originalEnd + 1);\n                const modifiedEqualBelow = (modifiedEnd === 0 ? modifiedStart + 1 : modifiedEnd + 1);\n                // Make sure we don't step into the next diff\n                let maxOriginal = originalLineCount;\n                let maxModified = modifiedLineCount;\n                if (i + 1 < len) {\n                    const nextLineChange = lineChanges[i + 1];\n                    if (nextLineChange.originalEndLineNumber === 0) {\n                        maxOriginal = nextLineChange.originalStartLineNumber;\n                    }\n                    else {\n                        maxOriginal = nextLineChange.originalStartLineNumber - 1;\n                    }\n                    if (nextLineChange.modifiedEndLineNumber === 0) {\n                        maxModified = nextLineChange.modifiedStartLineNumber;\n                    }\n                    else {\n                        maxModified = nextLineChange.modifiedStartLineNumber - 1;\n                    }\n                }\n                let toOriginal = originalEqualBelow + DIFF_LINES_PADDING - 1;\n                let toModified = modifiedEqualBelow + DIFF_LINES_PADDING - 1;\n                if (toOriginal > maxOriginal) {\n                    const delta = maxOriginal - toOriginal;\n                    toOriginal = toOriginal + delta;\n                    toModified = toModified + delta;\n                }\n                if (toModified > maxModified) {\n                    const delta = maxModified - toModified;\n                    toOriginal = toOriginal + delta;\n                    toModified = toModified + delta;\n                }\n                r[rLength++] = new DiffEntry(originalEqualBelow, toOriginal, modifiedEqualBelow, toModified);\n            }\n            diffs[diffsLength++] = new Diff(r);\n        }\n        // Merge adjacent diffs\n        let curr = diffs[0].entries;\n        const r = [];\n        let rLength = 0;\n        for (let i = 1, len = diffs.length; i < len; i++) {\n            const thisDiff = diffs[i].entries;\n            const currLast = curr[curr.length - 1];\n            const thisFirst = thisDiff[0];\n            if (currLast.getType() === 0 /* DiffEntryType.Equal */\n                && thisFirst.getType() === 0 /* DiffEntryType.Equal */\n                && thisFirst.originalLineStart <= currLast.originalLineEnd) {\n                // We are dealing with equal lines that overlap\n                curr[curr.length - 1] = new DiffEntry(currLast.originalLineStart, thisFirst.originalLineEnd, currLast.modifiedLineStart, thisFirst.modifiedLineEnd);\n                curr = curr.concat(thisDiff.slice(1));\n                continue;\n            }\n            r[rLength++] = new Diff(curr);\n            curr = thisDiff;\n        }\n        r[rLength++] = new Diff(curr);\n        return r;\n    }\n    _findDiffIndex(pos) {\n        const lineNumber = pos.lineNumber;\n        for (let i = 0, len = this._diffs.length; i < len; i++) {\n            const diff = this._diffs[i].entries;\n            const lastModifiedLine = diff[diff.length - 1].modifiedLineEnd;\n            if (lineNumber <= lastModifiedLine) {\n                return i;\n            }\n        }\n        return 0;\n    }\n    _render() {\n        const originalOptions = this._diffEditor.getOriginalEditor().getOptions();\n        const modifiedOptions = this._diffEditor.getModifiedEditor().getOptions();\n        const originalModel = this._diffEditor.getOriginalEditor().getModel();\n        const modifiedModel = this._diffEditor.getModifiedEditor().getModel();\n        const originalModelOpts = originalModel.getOptions();\n        const modifiedModelOpts = modifiedModel.getOptions();\n        if (!this._isVisible || !originalModel || !modifiedModel) {\n            dom.clearNode(this._content.domNode);\n            this._currentDiff = null;\n            this.scrollbar.scanDomNode();\n            return;\n        }\n        this._diffEditor.updateOptions({ readOnly: true });\n        const diffIndex = this._findDiffIndex(this._diffEditor.getPosition());\n        if (this._diffs[diffIndex] === this._currentDiff) {\n            return;\n        }\n        this._currentDiff = this._diffs[diffIndex];\n        const diffs = this._diffs[diffIndex].entries;\n        const container = document.createElement('div');\n        container.className = 'diff-review-table';\n        container.setAttribute('role', 'list');\n        container.setAttribute('aria-label', 'Difference review. Use \"Stage | Unstage | Revert Selected Ranges\" commands');\n        applyFontInfo(container, modifiedOptions.get(49 /* EditorOption.fontInfo */));\n        let minOriginalLine = 0;\n        let maxOriginalLine = 0;\n        let minModifiedLine = 0;\n        let maxModifiedLine = 0;\n        for (let i = 0, len = diffs.length; i < len; i++) {\n            const diffEntry = diffs[i];\n            const originalLineStart = diffEntry.originalLineStart;\n            const originalLineEnd = diffEntry.originalLineEnd;\n            const modifiedLineStart = diffEntry.modifiedLineStart;\n            const modifiedLineEnd = diffEntry.modifiedLineEnd;\n            if (originalLineStart !== 0 && ((minOriginalLine === 0 || originalLineStart < minOriginalLine))) {\n                minOriginalLine = originalLineStart;\n            }\n            if (originalLineEnd !== 0 && ((maxOriginalLine === 0 || originalLineEnd > maxOriginalLine))) {\n                maxOriginalLine = originalLineEnd;\n            }\n            if (modifiedLineStart !== 0 && ((minModifiedLine === 0 || modifiedLineStart < minModifiedLine))) {\n                minModifiedLine = modifiedLineStart;\n            }\n            if (modifiedLineEnd !== 0 && ((maxModifiedLine === 0 || modifiedLineEnd > maxModifiedLine))) {\n                maxModifiedLine = modifiedLineEnd;\n            }\n        }\n        const header = document.createElement('div');\n        header.className = 'diff-review-row';\n        const cell = document.createElement('div');\n        cell.className = 'diff-review-cell diff-review-summary';\n        const originalChangedLinesCnt = maxOriginalLine - minOriginalLine + 1;\n        const modifiedChangedLinesCnt = maxModifiedLine - minModifiedLine + 1;\n        cell.appendChild(document.createTextNode(`${diffIndex + 1}/${this._diffs.length}: @@ -${minOriginalLine},${originalChangedLinesCnt} +${minModifiedLine},${modifiedChangedLinesCnt} @@`));\n        header.setAttribute('data-line', String(minModifiedLine));\n        const getAriaLines = (lines) => {\n            if (lines === 0) {\n                return nls.localize('no_lines_changed', \"no lines changed\");\n            }\n            else if (lines === 1) {\n                return nls.localize('one_line_changed', \"1 line changed\");\n            }\n            else {\n                return nls.localize('more_lines_changed', \"{0} lines changed\", lines);\n            }\n        };\n        const originalChangedLinesCntAria = getAriaLines(originalChangedLinesCnt);\n        const modifiedChangedLinesCntAria = getAriaLines(modifiedChangedLinesCnt);\n        header.setAttribute('aria-label', nls.localize({\n            key: 'header',\n            comment: [\n                'This is the ARIA label for a git diff header.',\n                'A git diff header looks like this: @@ -154,12 +159,39 @@.',\n                'That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.',\n                'Variables 0 and 1 refer to the diff index out of total number of diffs.',\n                'Variables 2 and 4 will be numbers (a line number).',\n                'Variables 3 and 5 will be \"no lines changed\", \"1 line changed\" or \"X lines changed\", localized separately.'\n            ]\n        }, \"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}\", (diffIndex + 1), this._diffs.length, minOriginalLine, originalChangedLinesCntAria, minModifiedLine, modifiedChangedLinesCntAria));\n        header.appendChild(cell);\n        // @@ -504,7 +517,7 @@\n        header.setAttribute('role', 'listitem');\n        container.appendChild(header);\n        const lineHeight = modifiedOptions.get(65 /* EditorOption.lineHeight */);\n        let modLine = minModifiedLine;\n        for (let i = 0, len = diffs.length; i < len; i++) {\n            const diffEntry = diffs[i];\n            DiffReview._renderSection(container, diffEntry, modLine, lineHeight, this._width, originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts, this._languageService.languageIdCodec);\n            if (diffEntry.modifiedLineStart !== 0) {\n                modLine = diffEntry.modifiedLineEnd;\n            }\n        }\n        dom.clearNode(this._content.domNode);\n        this._content.domNode.appendChild(container);\n        this.scrollbar.scanDomNode();\n    }\n    static _renderSection(dest, diffEntry, modLine, lineHeight, width, originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts, languageIdCodec) {\n        const type = diffEntry.getType();\n        let rowClassName = 'diff-review-row';\n        let lineNumbersExtraClassName = '';\n        const spacerClassName = 'diff-review-spacer';\n        let spacerIcon = null;\n        switch (type) {\n            case 1 /* DiffEntryType.Insert */:\n                rowClassName = 'diff-review-row line-insert';\n                lineNumbersExtraClassName = ' char-insert';\n                spacerIcon = diffReviewInsertIcon;\n                break;\n            case 2 /* DiffEntryType.Delete */:\n                rowClassName = 'diff-review-row line-delete';\n                lineNumbersExtraClassName = ' char-delete';\n                spacerIcon = diffReviewRemoveIcon;\n                break;\n        }\n        const originalLineStart = diffEntry.originalLineStart;\n        const originalLineEnd = diffEntry.originalLineEnd;\n        const modifiedLineStart = diffEntry.modifiedLineStart;\n        const modifiedLineEnd = diffEntry.modifiedLineEnd;\n        const cnt = Math.max(modifiedLineEnd - modifiedLineStart, originalLineEnd - originalLineStart);\n        const originalLayoutInfo = originalOptions.get(142 /* EditorOption.layoutInfo */);\n        const originalLineNumbersWidth = originalLayoutInfo.glyphMarginWidth + originalLayoutInfo.lineNumbersWidth;\n        const modifiedLayoutInfo = modifiedOptions.get(142 /* EditorOption.layoutInfo */);\n        const modifiedLineNumbersWidth = 10 + modifiedLayoutInfo.glyphMarginWidth + modifiedLayoutInfo.lineNumbersWidth;\n        for (let i = 0; i <= cnt; i++) {\n            const originalLine = (originalLineStart === 0 ? 0 : originalLineStart + i);\n            const modifiedLine = (modifiedLineStart === 0 ? 0 : modifiedLineStart + i);\n            const row = document.createElement('div');\n            row.style.minWidth = width + 'px';\n            row.className = rowClassName;\n            row.setAttribute('role', 'listitem');\n            if (modifiedLine !== 0) {\n                modLine = modifiedLine;\n            }\n            row.setAttribute('data-line', String(modLine));\n            const cell = document.createElement('div');\n            cell.className = 'diff-review-cell';\n            cell.style.height = `${lineHeight}px`;\n            row.appendChild(cell);\n            const originalLineNumber = document.createElement('span');\n            originalLineNumber.style.width = (originalLineNumbersWidth + 'px');\n            originalLineNumber.style.minWidth = (originalLineNumbersWidth + 'px');\n            originalLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n            if (originalLine !== 0) {\n                originalLineNumber.appendChild(document.createTextNode(String(originalLine)));\n            }\n            else {\n                originalLineNumber.innerText = '\\u00a0';\n            }\n            cell.appendChild(originalLineNumber);\n            const modifiedLineNumber = document.createElement('span');\n            modifiedLineNumber.style.width = (modifiedLineNumbersWidth + 'px');\n            modifiedLineNumber.style.minWidth = (modifiedLineNumbersWidth + 'px');\n            modifiedLineNumber.style.paddingRight = '10px';\n            modifiedLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n            if (modifiedLine !== 0) {\n                modifiedLineNumber.appendChild(document.createTextNode(String(modifiedLine)));\n            }\n            else {\n                modifiedLineNumber.innerText = '\\u00a0';\n            }\n            cell.appendChild(modifiedLineNumber);\n            const spacer = document.createElement('span');\n            spacer.className = spacerClassName;\n            if (spacerIcon) {\n                const spacerCodicon = document.createElement('span');\n                spacerCodicon.className = ThemeIcon.asClassName(spacerIcon);\n                spacerCodicon.innerText = '\\u00a0\\u00a0';\n                spacer.appendChild(spacerCodicon);\n            }\n            else {\n                spacer.innerText = '\\u00a0\\u00a0';\n            }\n            cell.appendChild(spacer);\n            let lineContent;\n            if (modifiedLine !== 0) {\n                let html = this._renderLine(modifiedModel, modifiedOptions, modifiedModelOpts.tabSize, modifiedLine, languageIdCodec);\n                if (DiffReview._ttPolicy) {\n                    html = DiffReview._ttPolicy.createHTML(html);\n                }\n                cell.insertAdjacentHTML('beforeend', html);\n                lineContent = modifiedModel.getLineContent(modifiedLine);\n            }\n            else {\n                let html = this._renderLine(originalModel, originalOptions, originalModelOpts.tabSize, originalLine, languageIdCodec);\n                if (DiffReview._ttPolicy) {\n                    html = DiffReview._ttPolicy.createHTML(html);\n                }\n                cell.insertAdjacentHTML('beforeend', html);\n                lineContent = originalModel.getLineContent(originalLine);\n            }\n            if (lineContent.length === 0) {\n                lineContent = nls.localize('blankLine', \"blank\");\n            }\n            let ariaLabel = '';\n            switch (type) {\n                case 0 /* DiffEntryType.Equal */:\n                    if (originalLine === modifiedLine) {\n                        ariaLabel = nls.localize({ key: 'unchangedLine', comment: ['The placeholders are contents of the line and should not be translated.'] }, \"{0} unchanged line {1}\", lineContent, originalLine);\n                    }\n                    else {\n                        ariaLabel = nls.localize('equalLine', \"{0} original line {1} modified line {2}\", lineContent, originalLine, modifiedLine);\n                    }\n                    break;\n                case 1 /* DiffEntryType.Insert */:\n                    ariaLabel = nls.localize('insertLine', \"+ {0} modified line {1}\", lineContent, modifiedLine);\n                    break;\n                case 2 /* DiffEntryType.Delete */:\n                    ariaLabel = nls.localize('deleteLine', \"- {0} original line {1}\", lineContent, originalLine);\n                    break;\n            }\n            row.setAttribute('aria-label', ariaLabel);\n            dest.appendChild(row);\n        }\n    }\n    static _renderLine(model, options, tabSize, lineNumber, languageIdCodec) {\n        const lineContent = model.getLineContent(lineNumber);\n        const fontInfo = options.get(49 /* EditorOption.fontInfo */);\n        const lineTokens = LineTokens.createEmpty(lineContent, languageIdCodec);\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, model.mightContainNonBasicASCII());\n        const containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, model.mightContainRTL());\n        const r = renderViewLine(new RenderLineInput((fontInfo.isMonospace && !options.get(32 /* EditorOption.disableMonospaceOptimizations */)), fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, options.get(115 /* EditorOption.stopRenderingLineAfter */), options.get(97 /* EditorOption.renderWhitespace */), options.get(92 /* EditorOption.renderControlCharacters */), options.get(50 /* EditorOption.fontLigatures */) !== EditorFontLigatures.OFF, null));\n        return r.html;\n    }\n};\nDiffReview._ttPolicy = createTrustedTypesPolicy('diffReview', { createHTML: value => value });\nDiffReview = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IAudioCueService),\n    __param(3, IConfigurationService)\n], DiffReview);\nexport { DiffReview };\n// theming\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as objects from '../../../base/common/objects.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { CodeEditorWidget } from './codeEditorWidget.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nlet EmbeddedCodeEditorWidget = class EmbeddedCodeEditorWidget extends CodeEditorWidget {\n    constructor(domElement, options, codeEditorWidgetOptions, parentEditor, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService) {\n        super(domElement, Object.assign(Object.assign({}, parentEditor.getRawOptions()), { overflowWidgetsDomNode: parentEditor.getOverflowWidgetsDomNode() }), codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\n        this._parentEditor = parentEditor;\n        this._overwriteOptions = options;\n        // Overwrite parent's options\n        super.updateOptions(this._overwriteOptions);\n        this._register(parentEditor.onDidChangeConfiguration((e) => this._onParentConfigurationChanged(e)));\n    }\n    getParentEditor() {\n        return this._parentEditor;\n    }\n    _onParentConfigurationChanged(e) {\n        super.updateOptions(this._parentEditor.getRawOptions());\n        super.updateOptions(this._overwriteOptions);\n    }\n    updateOptions(newOptions) {\n        objects.mixin(this._overwriteOptions, newOptions, true);\n        super.updateOptions(this._overwriteOptions);\n    }\n};\nEmbeddedCodeEditorWidget = __decorate([\n    __param(4, IInstantiationService),\n    __param(5, ICodeEditorService),\n    __param(6, ICommandService),\n    __param(7, IContextKeyService),\n    __param(8, IThemeService),\n    __param(9, INotificationService),\n    __param(10, IAccessibilityService),\n    __param(11, ILanguageConfigurationService),\n    __param(12, ILanguageFeaturesService)\n], EmbeddedCodeEditorWidget);\nexport { EmbeddedCodeEditorWidget };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Emitter } from '../../../base/common/event.js';\nimport { StopWatch } from '../../../base/common/stopwatch.js';\nimport { LineRange } from '../../common/core/lineRange.js';\nimport { LineRangeMapping, RangeMapping } from '../../common/diff/linesDiffComputer.js';\nimport { IEditorWorkerService } from '../../common/services/editorWorker.js';\nimport { ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\nlet WorkerBasedDocumentDiffProvider = class WorkerBasedDocumentDiffProvider {\n    constructor(options, editorWorkerService, telemetryService) {\n        this.editorWorkerService = editorWorkerService;\n        this.telemetryService = telemetryService;\n        this.onDidChangeEventEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEventEmitter.event;\n        this.diffAlgorithm = 'advanced';\n        this.diffAlgorithmOnDidChangeSubscription = undefined;\n        this.setOptions(options);\n    }\n    dispose() {\n        var _a;\n        (_a = this.diffAlgorithmOnDidChangeSubscription) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    computeDiff(original, modified, options) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof this.diffAlgorithm !== 'string') {\n                return this.diffAlgorithm.computeDiff(original, modified, options);\n            }\n            // This significantly speeds up the case when the original file is empty\n            if (original.getLineCount() === 1 && original.getLineMaxColumn(1) === 1) {\n                return {\n                    changes: [\n                        new LineRangeMapping(new LineRange(1, 2), new LineRange(1, modified.getLineCount() + 1), [\n                            new RangeMapping(original.getFullModelRange(), modified.getFullModelRange())\n                        ])\n                    ],\n                    identical: false,\n                    quitEarly: false,\n                    moves: [],\n                };\n            }\n            const uriKey = JSON.stringify([original.uri.toString(), modified.uri.toString()]);\n            const context = JSON.stringify([original.id, modified.id, original.getAlternativeVersionId(), modified.getAlternativeVersionId(), JSON.stringify(options)]);\n            const c = WorkerBasedDocumentDiffProvider.diffCache.get(uriKey);\n            if (c && c.context === context) {\n                return c.result;\n            }\n            const sw = StopWatch.create();\n            const result = yield this.editorWorkerService.computeDiff(original.uri, modified.uri, options, this.diffAlgorithm);\n            const timeMs = sw.elapsed();\n            this.telemetryService.publicLog2('diffEditor.computeDiff', {\n                timeMs,\n                timedOut: (_a = result === null || result === void 0 ? void 0 : result.quitEarly) !== null && _a !== void 0 ? _a : true,\n            });\n            if (!result) {\n                throw new Error('no diff result available');\n            }\n            // max 10 items in cache\n            if (WorkerBasedDocumentDiffProvider.diffCache.size > 10) {\n                WorkerBasedDocumentDiffProvider.diffCache.delete(WorkerBasedDocumentDiffProvider.diffCache.keys().next().value);\n            }\n            WorkerBasedDocumentDiffProvider.diffCache.set(uriKey, { result, context });\n            return result;\n        });\n    }\n    setOptions(newOptions) {\n        var _a;\n        let didChange = false;\n        if (newOptions.diffAlgorithm) {\n            if (this.diffAlgorithm !== newOptions.diffAlgorithm) {\n                (_a = this.diffAlgorithmOnDidChangeSubscription) === null || _a === void 0 ? void 0 : _a.dispose();\n                this.diffAlgorithmOnDidChangeSubscription = undefined;\n                this.diffAlgorithm = newOptions.diffAlgorithm;\n                if (typeof newOptions.diffAlgorithm !== 'string') {\n                    this.diffAlgorithmOnDidChangeSubscription = newOptions.diffAlgorithm.onDidChange(() => this.onDidChangeEventEmitter.fire());\n                }\n                didChange = true;\n            }\n        }\n        if (didChange) {\n            this.onDidChangeEventEmitter.fire();\n        }\n    }\n};\nWorkerBasedDocumentDiffProvider.diffCache = new Map();\nWorkerBasedDocumentDiffProvider = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, ITelemetryService)\n], WorkerBasedDocumentDiffProvider);\nexport { WorkerBasedDocumentDiffProvider };\n"],"names":["accessibleDiffViewerCategory","value","localize","original","AccessibleDiffViewerNext","_Action","_inherits","_super","_createSuper","_classCallCheck","call","id","title","category","precondition","ContextKeyExpr","has","keybinding","primary","weight","f1","_createClass","key","accessor","diffEditor","findFocusedDiffEditor","accessibleDiffViewerNext","Action2","MenuRegistry","appendMenuItem","MenuId","EditorTitle","command","order","group","when","and","EditorContextKeys","accessibleDiffViewerVisible","negate","AccessibleDiffViewerPrev","_Action2","_super2","accessibleDiffViewerPrev","_a","codeEditorService","get","ICodeEditorService","diffEditors","listDiffEditors","activeCodeEditor","getFocusedCodeEditor","getActiveCodeEditor","i","len","length","getModifiedEditor","getId","getOriginalEditor","document","activeElement","_step","_iterator","_createForOfIteratorHelper","s","n","done","d","isElementOrParentOf","getContainerDomNode","err","e","f","elementOrParent","element","parentElement","CommandsRegistry","registerCommandAlias","registerAction2","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","then","apply","InlineDiffMargin","_Disposable","_viewZoneId","_marginDomNode","editor","diff","_contextMenuService","_clipboardService","_this","_visibility","style","zIndex","_diffActions","createElement","className","ThemeIcon","asClassName","Codicon","lightBulb","position","lineHeight","getOption","lineFeed","getModel","getEOL","right","visibility","height","concat","appendChild","actions","isDeletion","modifiedEndLineNumber","push","Action","originalEndLineNumber","modifiedStartLineNumber","nls","undefined","_assertThisInitialized","_regeneratorRuntime","mark","_callee","range","deletedText","wrap","_context","prev","Range","originalStartLineNumber","originalModel","getValueInRange","this","writeText","stop","currentLineNumberOffset","copyLineAction","_callee2","lineContent","eof","_context2","getLineContent","getEndOfLineSequence","_callee3","column","_column","_context3","getLineMaxColumn","executeEdits","text","useShadowDOM","isIOS","showContextMenu","x","y","domForShadowRoot","getDomNode","getAnchor","getActions","label","autoSelectFirstItem","_register","dom","addStandardDisposableListener","_dom$getDomNodePagePo","getDomNodePagePosition","top","pad","Math","floor","preventDefault","posx","onMouseMove","target","type","detail","viewZoneId","_updateLightBulbPosition","event","browserEvent","onMouseDown","rightButton","posy","set","marginDomNode","offset","lineNumberOffset","newTop","viewLineCounts","acc","Disposable","__decorate","decorators","desc","c","arguments","r","Object","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","VisualEditorState","_zones","_inlineDiffMargins","_zonesMap","_decorations","allViewZones","filter","z","String","_this2","changeViewZones","viewChangeAccessor","zoneId","removeZone","changeDecorations","changeAccessor","deltaDecorations","overviewRuler","newDecorations","restoreScrollState","_this3","scrollState","StableEditorScrollState","capture","_step2","_iterator2","_step3","_iterator3","dispose","zones","viewZone","suppressMouseDown","showInHiddenAreas","addZone","getValueLength","restore","decorations","setZones","overviewZones","DIFF_EDITOR_ID","diffInsertIcon","registerIcon","add","diffRemoveIcon","remove","diffEditorWidgetTtPolicy","createTrustedTypesPolicy","createHTML","ariaNavigationTip","DiffEditorWidget","domElement","options","codeEditorWidgetOptions","clipboardService","contextKeyService","instantiationService","themeService","notificationService","contextMenuService","_editorProgressService","_this4","_onDidDispose","Emitter","onDidDispose","_onDidChangeModel","onDidChangeModel","_onDidUpdateDiff","onDidUpdateDiff","_onDidContentSizeChange","_lastOriginalWarning","_lastModifiedWarning","willCreateDiffEditor","_documentDiffProvider","createInstance","WorkerBasedDocumentDiffProvider","onDidChange","_beginUpdateDecorationsSoon","_codeEditorService","_contextKeyService","createScoped","_instantiationService","createChild","ServiceCollection","IContextKeyService","createKey","_themeService","_notificationService","_id","_state","_updatingDiffProgress","_domElement","_options","validateDiffEditorOptions","enableSplitViewResizing","splitViewDefaultRatio","renderSideBySide","renderMarginRevertIcon","maxComputationTime","maxFileSize","ignoreTrimWhitespace","renderIndicators","originalEditable","diffCodeLens","renderOverviewRuler","diffWordWrap","diffAlgorithm","accessibilityVerbose","experimental","collapseUnchangedRegions","isInEmbeddedEditor","onlyShowAccessibleDiffViewer","isEmbeddedDiffEditorKey","isEmbeddedDiffEditor","bindTo","_updateDecorationsRunner","RunOnceScheduler","_updateDecorations","_containerDomElement","_getClassName","getColorTheme","_overviewViewportDomElement","createFastDomNode","setClassName","setPosition","_overviewDomElement","domNode","EventType","POINTER_DOWN","_modifiedEditor","delegateVerticalScrollbarPointerDown","addDisposableListener","MOUSE_WHEEL","delegateScrollFromMouseWheelEvent","passive","_originalDomNode","_modifiedDomNode","_beginUpdateDecorationsTimeout","_currentlyChangingViewZones","_diffComputationToken","_originalEditorState","_modifiedEditorState","_isVisible","_isHandlingScrollEvent","_elementSizeObserver","ElementSizeObserver","dimension","_onDidContainerSizeChanged","automaticLayout","startObserving","_diffComputationResult","_originalEditor","_createLeftHandSideEditor","originalEditor","_createRightHandSideEditor","modifiedEditor","_originalOverviewRuler","_modifiedOverviewRuler","_reviewPane","DiffReview","shadow","actionBarContainer","_setStrategy","DiffEditorWidgetSideBySide","_createDataSource","DiffEditorWidgetInline","onDidColorThemeChange","t","_strategy","applyColors","schedule","_step4","contributions","EditorExtensionsRegistry","getDiffEditorContributions","_iterator4","ctor","onUnexpectedError","addDiffEditor","newState","show","removeChild","assert","ok","hasModel","createOverviewRuler","_layoutOverviewRulers","_this5","_createInnerEditor","_adjustOptionsForLeftHandSide","onDidScrollChange","scrollTopChanged","scrollLeftChanged","scrollHeightChanged","setScrollPosition","scrollLeft","scrollTop","_layoutOverviewViewport","onDidChangeViewZones","_onViewZonesChanged","onDidChangeConfiguration","hasChanged","cancel","onDidChangeHiddenAreas","onDidChangeModelContent","isInDiffLeftEditorKey","hasWidgetFocus","onDidFocusEditorWidget","onDidBlurEditorWidget","onDidContentSizeChange","width","getContentWidth","ONE_OVERVIEW_WIDTH","max","getContentHeight","fire","contentHeight","contentWidth","contentHeightChanged","contentWidthChanged","_this6","_adjustOptionsForRightHandSide","onDidChangeModelOptions","tabSize","isInDiffRightEditorKey","_b","includes","lineNumber","change","changes","find","afterLineNumber","revertChange","stopPropagation","modified","originalRange","originalContent","newRange","eol","setStartPosition","getLineCount","setEndPosition","insertAt","Position","fromPositions","container","editorWidgetOptions","CodeEditorWidget","removeDiffEditor","window","clearTimeout","_cleanViewZonesAndDecorations","_get","_getPrototypeOf","prototype","getEditorType","editorCommon","IDiffEditor","_newOptions","a","b","newOptions","changed","beginUpdateDecorations","beginUpdateDecorationsSoon","setOptions","_beginUpdateDecorations","updateOptions","setEnableSplitViewResizing","model","waitForDiff","Error","_disposeOverviewRulers","setModel","setScrollTop","_setState","_createOverviewRulers","_diffNavigator","DiffNavigator","alwaysRevealFirst","findResultLoop","loop","getVisibleColumnFromPosition","getPosition","source","scrollType","revealLine","revealLineInCenter","revealLineInCenterIfOutsideViewport","revealLineNearTop","revealPosition","revealPositionInCenter","revealPositionInCenterIfOutsideViewport","revealPositionNearTop","getSelection","getSelections","something","setSelection","ranges","setSelections","startLineNumber","endLineNumber","revealLines","revealLinesInCenter","revealLinesInCenterIfOutsideViewport","revealLinesNearTop","revealVerticalInCenter","revealHorizontal","revealRange","revealRangeInCenter","revealRangeInCenterIfOutsideViewport","revealRangeNearTop","revealRangeNearTopIfOutsideViewport","revealRangeAtTop","getSupportedActions","focus","handlerId","payload","trigger","createDecorationsCollection","callback","saveViewState","diffEditorState","restoreViewState","observe","hasTextFocus","_doLayout","isVisible","getHeight","reviewHeight","_getReviewHeight","freeSpace","ENTIRE_DIFF_OVERVIEW_WIDTH","getLayoutInfo","setLayout","_this7","setTimeout","UPDATE_DIFF_DECORATIONS_DELAY","_this8","currentOriginalModel","currentModifiedModel","currentToken","diffLimit","canSyncModelForDiff","bufferTextLength","computeDiff","maxComputationTimeMs","computeMoves","identical","quitEarly","changes2","map","m","innerChanges","isEmpty","endLineNumberExclusive","modifiedRange","charChanges","originalStartColumn","startColumn","originalEndColumn","endColumn","modifiedStartColumn","modifiedEndColumn","error","_equals","uri","warn","clean","lineChanges","foreignOriginal","getForeignViewZones","getWhitespaces","foreignModified","diffDecorations","getEditorsDiffDecorations","clonedOptions","assign","inDiffEditor","scrollbar","vertical","folding","codeLens","fixedOverflowWidgets","minimap","enabled","_adjustOptionsForSubEditor","wordWrapOverride1","wordWrapOverride2","stickyScroll","originalAriaLabel","ariaLabel","_updateAriaLabel","readOnly","dropIntoEditor","extraEditorClassName","replaceAll","modifiedAriaLabel","revealHorizontalRightPadding","EditorOptions","defaultValue","verticalHasArrows","getWidth","splitPoint","layout","left","setWidth","setHeight","_computeOverviewViewport","setTop","layoutInfo","getScrollTop","scrollHeight","getScrollHeight","computedAvailableSize","computedRepresentableSize","computedRatio","_this9","getOptions","relayoutEditors","newStrategy","_boundarySashes","setBoundarySashes","theme","getThemeTypeSelector","toString","IClipboardService","IInstantiationService","IThemeService","INotificationService","IContextMenuService","IEditorProgressService","DiffEditorWidgetStyle","_Disposable2","dataSource","_this10","_dataSource","_insertColor","_removeColor","newInsertColor","getColor","diffOverviewRulerInserted","diffInserted","defaultInsertColor","transparent","newRemoveColor","diffOverviewRulerRemoved","diffRemoved","defaultRemoveColor","hasChanges","equals","originalWhitespaces","modifiedWhitespaces","sort","_getViewZones","originalDecorations","_getOriginalEditorDecorations","modifiedDecorations","_getModifiedEditorDecorations","_sashes","ForeignViewZonesIterator","_source","_index","current","advance","ViewZonesComputer","_lineChanges","_originalForeignVZ","_modifiedForeignVZ","originalLineHeight","modifiedLineHeight","originalHasWrapping","wrappingColumn","modifiedHasWrapping","hasWrapping","originalCoordinatesConverter","_getViewModel","coordinatesConverter","modifiedCoordinatesConverter","lineChangeModifiedLength","lineChangeOriginalLength","originalEquivalentLineNumber","modifiedEquivalentLineNumber","originalEndEquivalentLineNumber","modifiedEndEquivalentLineNumber","sortMyViewZones","addAndCombineIfPossible","destination","item","lastItem","heightInLines","modifiedForeignVZ","originalForeignVZ","lastOriginalLineNumber","lastModifiedLineNumber","lineChange","_getViewLineCount","stepOriginal","stepModified","count","originalLineNumber","modifiedLineNumber","originalViewLineCount","getModelLineViewLineCount","modifiedViewLineCount","viewZoneLineNumber","_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion","isChangeOrInsert","_produceOriginalFromDiff","isChangeOrDelete","_produceModifiedFromDiff","stepOriginalIndex","stepModifiedIndex","originalDelta","modifiedDelta","shouldNotShrink","_ensureDomNodes","viewModel","viewRange","getViewRange","createFakeLinesDiv","createDecoration","DECORATIONS","arrowRevertChange","ModelDecorationOptions","register","description","glyphMarginHoverMessage","MarkdownString","isTrusted","supportThemeIcons","appendMarkdown","glyphMarginClassName","arrowRight","charDelete","charDeleteWholeLine","isWholeLine","charInsert","charInsertWholeLine","lineInsert","marginClassName","lineInsertWithSign","linesDecorationsClassName","lineDelete","lineDeleteWithSign","lineDeleteMargin","_DiffEditorWidgetStyl","_super3","defaultSashRatio","_this11","_disableSash","_defaultRatio","_sashRatio","_sashPosition","_startSashPosition","_sash","Sash","orientation","state","onDidStart","_onSashDragStart","_onSashDrag","onDidEnd","_onSashDragEnd","onDidReset","_onSashReset","defaultRatio","newDisableSash","sashRatio","sashPosition","midPoint","MINIMUM_EDITOR_WIDTH","currentX","startX","sash","sashes","orthogonalEndSash","bottom","SideBySideViewZonesComputer","getViewZones","_step5","overviewZoneColor","originalViewModel","_iterator5","OverviewRulerZone","_step6","_iterator6","charChange","isCharChangeOrDelete","getLineFirstNonWhitespaceColumn","getLineLastNonWhitespaceColumn","_step7","modifiedModel","modifiedViewModel","_iterator7","_loop","arrow","$","createViewZoneMarginArrow","_step8","_iterator8","isCharChangeOrInsert","_ViewZonesComputer","_super4","_DiffEditorWidgetStyl2","_super5","_this12","_decorationsLeft","decorationsLeft","onDidLayoutChange","InlineViewZonesComputer","_step9","zoneIndex","_iterator9","zone","zoneHeightInLines","_step10","_iterator10","_step11","_iterator11","_ViewZonesComputer2","_super6","_this13","_originalModel","_renderIndicators","_pendingLineChange","_pendingViewZones","_lineBreaksComputer","createLineBreaksComputer","_finalize","MOUSE_CURSOR_TEXT_CSS_CLASS_NAME","minWidthInPx","addRequest","modifiedEditorOptions","fontInfo","disableMonospaceOptimizations","typicalHalfwidthCharacterWidth","scrollBeyondLastColumn","mightContainNonBasicASCII","mightContainRTL","lineDecorationsWidth","decorationsWidth","stopRenderingLineAfter","renderWhitespace","renderControlCharacters","fontLigatures","lineBreaks","finalize","lineBreakIndex","applyFontInfo","_step12","_iterator12","InlineDecoration","hasCharChanges","sb","StringBuilder","maxCharsPerLine","renderedLineCount","lineIndex","lineTokens","tokenization","getLineTokens","lineBreakData","actualDecorations","LineDecoration","_step13","lastBreakOffset","_iterator13","breakOffsets","breakOffset","viewLineTokens","sliceAndInflate","viewLineContent","substring","_renderOriginalLine","extractWrapped","marginDomNode2","afterColumn","html","build","trustedhtml","innerHTML","cnt","appendString","isBasicASCII","ViewLineRenderingData","containsRTL","output","renderViewLine","RenderLineInput","isMonospace","canUseHalfwidthRightwardsArrow","spaceWidth","middotWidth","wsmiddotWidth","EditorFontLigatures","OFF","marginElement","setAttribute","characterMapping","getHorizontalOffset","lineCount","min","convertModelRangeToViewRange","getLineMinColumn","defaults","validateBooleanOption","clampedFloat","clampedInt","validateStringSetOption","registerThemingParticipant","collector","diffDiagonalFillColor","diffDiagonalFill","addRule","diffLineAddDecorationBackgroundWithIndicator","diffLineDeleteDecorationBackgroundWithIndicator","diffLineAddDecorationBackground","diffLineDeleteDecorationBackground","diffAddDecoration","shouldFillLineOnLineBreak","diffWholeLineAddDecoration","diffAddDecorationEmpty","diffDeleteDecoration","diffWholeLineDeleteDecoration","diffDeleteDecorationEmpty","MovedBlocksLinesPart","_rootElement","_diffModel","_originalEditorLayoutInfo","_modifiedEditorLayoutInfo","_editors","createElementNS","autorun","reader","info","read","info2","verticalScrollbarWidth","contentLeft","movedCodeBlockPadding","originalScrollTop","observableFromEvent","modifiedScrollTop","viewZonesChanged","observableSignalFromEvent","replaceChildren","moves","movedTexts","idx","computeLineStart","getTopForLineNumber","lineRangeMapping","center","path","applyObservableDecorations","DisposableStore","decorationsCollection","debugName","clear","appendRemoveOnDispose","parent","child","toDisposable","ObservableElementSizeObserver","elementSizeObserver","_width","observableValue","_height","transaction","tx","stopObserving","animatedObservable","base","store","targetVal","startVal","curVal","animationStartMs","animationFrame","update","passedMs","Date","now","pow","requestAnimationFrame","autorunHandleChanges","createEmptyChangeSummary","animate","handleChange","ctx","didChange","cancelAnimationFrame","ViewZoneOverlayWidget","htmlElement","ManagedOverlayWidget","applyStyle","actualHeight","actualTop","PlaceholderViewZone","_afterLineNumber","heightInPx","_actualTop","_actualHeight","onChange","onDomNodeTop","onComputedHeight","_editor","_overlayWidgetId","_counter","_overlayWidget","addOverlayWidget","removeOverlayWidget","_i","_Object$entries","entries","_Object$entries$_i","_slicedToArray","val","readHotReloadableExport","values","hotReload_deprecateExports","globalThis","$hotReload_deprecateExports","handleExports","oldExports","_newExports","_toConsumableArray","some","v","delete","observeHotReloadableExports","applyViewZones","viewZones","setIsUpdating","lastViewZoneIds","curViewZones","viewZonIdsPerViewZone","Map","viewZoneIdPerOnChangeObservable","_i2","_lastViewZoneIds","context","changeSummary","changedObservable","vz","layoutZone","_i3","_lastViewZoneIds2","DiffEditorDecorations","derived","currentMove","syncedMovedTexts","showEmptyDecorations","mappings","fullRangeOriginal","LineRange","subtract","toInclusiveRange","isDefined","fullRangeModified","intersect","contains","shouldRenderRevertArrows","blockClassName","blockPadding","DiffEditorSash","_domNode","_dimensions","sashLeft","ratio","_computeSashLeft","getVerticalSashTop","getVerticalSashLeft","getVerticalSashHeight","desiredRatio","DiffEditorViewModel","documentDiffProvider","_isDiffUpToDate","isDiffUpToDate","_diff","_unchangedRegions","regions","originalDecorationIds","modifiedDecorationIds","unchangedRegions","setState","contentChangedSignal","observableSignal","debouncer","updateUnchangedRegions","newUnchangedRegions","UnchangedRegion","fromDiffs","lastUnchangedRegions","lastUnchangedRegionsOrigRanges","getDecorationRange","fromRange","lastUnchangedRegionsModRanges","intersectsStrict","setHiddenModifiedRange","getHiddenModifiedRange","onDidChangeContent","textEdits","TextEditInfo","fromModelContentChanges","applyModifiedEdits","_lastDiff","DiffState","fromDiffResult","currentSyncedMovedText","applyOriginalEdits","documentDiffProviderOptionChanged","autorunWithStore2","originalTextEditInfos","modifiedTextEditInfos","edits","combineTextEditInfos","showMoves","sent","showAll","getHiddenOriginalRange","waitForState","collapsedRegions","serialize","deserialize","DiffMapping","visibleLineCountTop","visibleLineCountBottom","_visibleLineCountTop","_visibleLineCountBottom","_shouldHideControls","isDragged","ofLength","maxVisibleLineCountTop","getMaxVisibleLineCountTop","maxVisibleLineCountBottom","originalLineCount","modifiedLineCount","inversedMappings","LineRangeMapping","inverse","mapping","origStart","modStart","atStart","atEnd","minContext","originalTextModel","modifiedTextModel","diff3","flip","applyModifiedEditsToLineRangeMappings","newModifiedRange","rangeStartLineNumber","rangeEndLineNumberEx","textEdit","textEditStartLineNumber","lengthGetLineCount","startOffset","textEditEndLineNumber","endOffset","delta","newLength","applyEditToLineRange","MovedText","SimpleLineRangeMapping","diffTextEdits","flatMap","positionToLength","getStartPosition","getEndPosition","lengthOfRange","toLength","combined","lastOriginalEndOffset","lengthZero","lastModifiedEndOffset","rangeMappings","modifiedStartOffset","lengthAdd","lengthDiffNonNegative","RangeMapping","lengthToPosition","lineRangeMappingFromRangeMappings","getLinesContent","InlineDiffDeletedCodeMargin","_getViewZoneId","_viewLineCounts","_originalTextModel","originalText","toExclusiveRange","revert","_getDomNodePagePositi","ttPolicy","LineSource","RenderOptions","renderOriginalLine","viewLineIdx","ViewZoneManager","_diffEditorWidget","_canIgnoreViewZoneUpdateEvent","_originalTopPadding","_originalScrollOffset","_originalScrollOffsetAnimated","_store","_modifiedTopPadding","_modifiedScrollOffset","_modifiedScrollOffsetAnimated","isChangingViewZones","updateImmediately","_args","args","originalModelTokenizationCompleted","onDidChangeTokens","backgroundTokenizationState","alignmentViewZoneIdsOrig","Set","alignmentViewZoneIdsMod","alignments","diffModel","innerHunkAlignment","computeRangeAlignment","alignmentsSyncedMovedText","syncedMovedText","alignmentViewZonesDisposables","alignmentViewZones","_c","_d","_e","_f","_g","_h","alignmentsVal","origViewZones","modViewZones","modifiedTopPaddingVal","originalTopPaddingVal","deletedCodeLineBreaksComputer","lineBreakDataIdx","modLineHeight","renderOptions","fromEditor","deletedCodeDomNode","classList","mapToLineArray","l","_","Number","MAX_SAFE_INTEGER","renderLines","assertIsDefined","setZoneId","modifiedHeightInPx","originalHeightInPx","orig","mod","alignmentViewZones_","aOrig","aMod","ignoreChange","setScrollLeft","_originalScrollTop","_modifiedScrollTop","newScrollTopModified","newScrollTopOriginal","deltaOrigToMod","trueTopOriginal","diffs","originalEditorAlignmentViewZones","modifiedEditorAlignmentViewZones","originalLineHeightOverrides","ArrayQueue","getAdditionalLineHeights","modifiedLineHeightOverrides","origLineHeight","handleAlignmentsOutsideOfDiffs","untilOriginalLineNumberExclusive","untilModifiedLineNumberExclusive","origNext","peek","modNext","distOrig","MAX_VALUE","distNext","dequeue","_loop2","first","lastModLineNumber","lastOrigLineNumber","emitAlignment","origLineNumberExclusive","modLineNumberExclusive","originalAdditionalHeight","takeWhile","reduce","p","modifiedAdditionalHeight","viewZonesToIgnore","viewZoneHeights","wrappingZoneHeights","editorLineHeight","w","modelLineNumber","convertViewPositionToModelPosition","arr1","arr2","keySelector","combine","j","val1","val2","key1","key2","joinCombine","v1","v2","OverviewRulerPart","_rootWidth","_rootHeight","currentColorTheme","currentColors","insertColor","removeColor","scrollTopObservable","scrollHeightObservable","viewportDomElement","diffOverviewRoot","h","root","originalOverviewRuler","modifiedOverviewRuler","origViewZonesChanged","modViewZonesChanged","origHiddenRangesChanged","modHiddenRangesChanged","colors","createZones","color","vm","start","convertModelPositionToViewPosition","end","scrollBarOptions","ScrollbarState","arrowSize","verticalScrollbarSize","getSliderPosition","getSliderSize","UnchangedRangesFeature","_isUpdatingViewZones","onDidChangeCursorPosition","reason","ensureOriginalLineIsVisible","ensureModifiedLineIsVisible","derivedWithStore","sideBySide","curUnchangedRegions","shouldHideControls","origVz","CollapsedCodeOverlayWidget","modViewZone","unchangedLinesDecoration","unchangedLinesDecorationShow","fold","setHiddenAreas","onMouseUp","region","_ViewZoneOverlayWidge","_viewZone","_unchangedRegion","hide","_nodes","display","justifyContent","alignItems","role","onclick","renderLabelWithIcons","reset","button","toggle","startTop","clientY","didMove","cur","mouseMoveListener","abs","lineDelta","round","newVal","mouseUpListener","showMoreAbove","getMaxVisibleLineCountBottom","top2","showMoreBelow","children","linesHiddenText","others","DelegatingEditor","idCounter","_targetEditor","DiffEditorEditors","originalEditorElement","modifiedEditorElement","_keybindingService","editorOptions","changedOptions","leftHandSideOptions","_constructInnerEditor","setContextValue","rightHandSideOptions","_reader","lookupKeybinding","getAriaLabel","IKeybindingService","DiffEditorOptions","o","optionsCopy","diffEditorDefaultOptions","newDiffEditorOptions","accessibleDiffViewerInsertIcon","accessibleDiffViewerRemoveIcon","accessibleDiffViewerCloseIcon","close","AccessibleDiffViewer","_parentNode","_visible","_setVisible","_canClose","_diffs","visible","ViewModel","view","View","keepAlive","nextGroup","previousGroup","canClose","_audioCueService","_groups","_currentGroupIdx","_currentElementIdx","groups","currentGroup","currentGroupIndex","currentElement","lines","viewElementGroupLineMargin","g","viewElements","HeaderViewElement","origFullRange","modifiedFullRange","items","last","forEachAdjacentItems","origRange","forEach","origLineNumber","UnchangedLineViewElement","DeletedLineViewElement","AddedLineViewElement","join","ViewElementGroup","computeViewElementGroups","findIndex","currentViewItem","LineType","Deleted","playAudioCue","AudioCue","diffLineDeleted","Added","diffLineInserted","Header","subtransaction","_goToGroupDelta","_goToLineDelta","line","indexOf","curElem","IAudioCueService","Unchanged","_Disposable3","_element","_model","_languageService","_actionBar","ActionBar","abrupt","icon","_content","_scrollbar","DomScrollableElement","_render","goToNextLine","goToPreviousLine","revealCurrentElementInEditor","originalOptions","modifiedOptions","originalModelOpts","modifiedModelOpts","row","viewItem","header","diffIndex","diffsLength","getAriaLines","originalChangedLinesCntAria","modifiedChangedLinesCntAria","comment","cell","createTextNode","_createRow","isSelectedObs","isSelected","tabIndex","goToLine","scanDomNode","originalLayoutInfo","originalLineNumbersWidth","glyphMarginWidth","lineNumbersWidth","modifiedLayoutInfo","modifiedLineNumbersWidth","rowClassName","lineNumbersExtraClassName","spacerIcon","minWidth","ariaLevel","innerText","paddingRight","spacer","spacerCodicon","_getLineHtml","languageIdCodec","_ttPolicy","insertAdjacentHTML","LineTokens","createEmpty","renderViewLine2","shouldBeGrouped","t0","finish","_marked","ILanguageService","registerColor","dark","light","hcDark","hcLight","DiffEditorWidget2","_DelegatingEditor","_parentContextKeyService","_parentInstantiationService","elements","disposableObservableValue","Event","fromObservableLight","_accessibleDiffViewerShouldBeVisible","_accessibleDiffViewerVisible","_layoutInfo","_rootSizeObserver","originalWidth","modifiedWidth","_diffValue","accessibleDiffViewerVisibleContextKeyValue","setAutomaticLayout","o2","showSash","boundarySashes","unchangedRangesFeature","isUpdatingViewZones","_accessibleDiffViewer","accessibleDiffViewer","_createDiffEditorContributions","overlay","movedText","runAndSubscribe","diffLineModified","EditorType","modelState","serializeState","restoreSerializedState","createViewModel","diffState","defaultOptions","followsCaret","ignoreCharChanges","_accessibilityService","_onDidUpdate","objects","disposed","nextIdx","ignoreSelectionChange","revealFirst","Boolean","_onDiffUpdated","_updateAccessibilityState","_init","getLineChanges","_compute","rhs","compareRangesUsingStarts","fwd","found","isBeforeOrEqual","canNavigate","_initIdx","pos","jumpToChange","insertedOrModified","getLineDecorations","codeEditor","isScreenReaderOptimized","writeScreenReaderContent","canNavigateNext","_move","canNavigatePrevious","canNavigateLoop","IAccessibilityService","DiffEntry","originalLineStart","originalLineEnd","modifiedLineStart","modifiedLineEnd","Diff","diffReviewInsertIcon","diffReviewRemoveIcon","diffReviewCloseIcon","_configurationService","_diffEditor","findParentWithClass","_goToRow","_getNextRow","_getPrevRow","accept","affectsConfiguration","getValue","_currentDiff","index","currentIndex","_findDiffIndex","doLayout","jumpToLineNumber","_getCurrentFocusedRow","parseInt","getAttribute","isNaN","previousElementSibling","_getFirstRow","nextElementSibling","querySelector","test","setDisplay","_mergeAdjacent","clearNode","minOriginalLine","maxOriginalLine","minModifiedLine","maxModifiedLine","diffEntry","originalChangedLinesCnt","modifiedChangedLinesCnt","modLine","_renderSection","originalStart","originalEnd","modifiedStart","modifiedEnd","rLength","originalEqualAbove","modifiedEqualAbove","minOriginal","minModified","prevLineChange","fromOriginal","fromModified","originalEqualBelow","modifiedEqualBelow","maxOriginal","maxModified","nextLineChange","toOriginal","toModified","curr","thisDiff","currLast","thisFirst","getType","slice","dest","originalLine","modifiedLine","_renderLine","IConfigurationService","EmbeddedCodeEditorWidget","_CodeEditorWidget","parentEditor","commandService","accessibilityService","languageConfigurationService","languageFeaturesService","_thisSuper","getRawOptions","overflowWidgetsDomNode","getOverflowWidgetsDomNode","_parentEditor","_overwriteOptions","_onParentConfigurationChanged","ICommandService","ILanguageConfigurationService","ILanguageFeaturesService","editorWorkerService","telemetryService","onDidChangeEventEmitter","diffAlgorithmOnDidChangeSubscription","uriKey","sw","timeMs","getFullModelRange","JSON","stringify","getAlternativeVersionId","diffCache","StopWatch","create","elapsed","publicLog2","timedOut","size","keys","IEditorWorkerService","ITelemetryService"],"sourceRoot":""}