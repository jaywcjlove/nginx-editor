"use strict";(self.webpackChunkmonaco_editor_nginx=self.webpackChunkmonaco_editor_nginx||[]).push([[2609],{29478:(e,t,i)=>{i.r(t);var n=i(60704),s=i(444);class o extends n.jG{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown((e=>{const t=this._editor.getOption(117);t>=0&&6===e.target.type&&e.target.position.column>=t&&this._editor.updateOptions({stopRenderingLineAfter:-1})})))}}o.ID="editor.contrib.longLinesHelper",(0,s.HW)(o.ID,o,2)},74459:(e,t,i)=>{i.d(t,{k:()=>f});var n,s=i(56253),o=i(94198),r=i(4640),a=i(82602),d=i(60704),l=i(444),c=i(38499),h=i(19486),u=i(17483),g=i(26376),p=i(29321),m=i(29563),_=function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},v=function(e,t){return function(i,n){t(i,n,e)}};let f=n=class{static get(e){return e.getContribution(n.ID)}constructor(e,t,i){this._openerService=i,this._messageWidget=new d.HE,this._messageListeners=new d.Cm,this._mouseOverMessage=!1,this._editor=e,this._visible=n.MESSAGE_VISIBLE.bindTo(t)}dispose(){var e;null===(e=this._message)||void 0===e||e.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){let i;(0,o.xE)((0,a.VS)(e)?e.value:e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._message=(0,a.VS)(e)?(0,s.Gc)(e,{actionHandler:{callback:t=>{this.closeMessage(),(0,h.i)(this._openerService,t,(0,a.VS)(e)?e.isTrusted:void 0)},disposables:this._messageListeners}}):void 0,this._messageWidget.value=new C(this._editor,t,"string"===typeof e?e:this._message.element),this._messageListeners.add(r.Jh.debounce(this._editor.onDidBlurEditorText,((e,t)=>t),0)((()=>{this._mouseOverMessage||this._messageWidget.value&&m.QX(m.bq(),this._messageWidget.value.getDomNode())||this.closeMessage()}))),this._messageListeners.add(this._editor.onDidChangeCursorPosition((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidDispose((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidChangeModel((()=>this.closeMessage()))),this._messageListeners.add(m.ko(this._messageWidget.value.getDomNode(),m.Bx.MOUSE_ENTER,(()=>this._mouseOverMessage=!0),!0)),this._messageListeners.add(m.ko(this._messageWidget.value.getDomNode(),m.Bx.MOUSE_LEAVE,(()=>this._mouseOverMessage=!1),!0)),this._messageListeners.add(this._editor.onMouseMove((e=>{e.target.position&&(i?i.containsPosition(e.target.position)||this.closeMessage():i=new c.Q(t.lineNumber-3,1,e.target.position.lineNumber+3,1))})))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(C.fadeOut(this._messageWidget.value))}};f.ID="editor.contrib.messageController",f.MESSAGE_VISIBLE=new g.N1("messageVisible",!1,u.kg("messageVisible","Whether the editor is currently showing an inline message")),f=n=_([v(1,g.fN),v(2,p.C)],f);const b=l.DX.bindToContribution(f.get);(0,l.E_)(new b({id:"leaveEditorMessage",precondition:f.MESSAGE_VISIBLE,handler:e=>e.closeMessage(),kbOpts:{weight:130,primary:9}}));class C{static fadeOut(e){const t=()=>{e.dispose(),clearTimeout(i),e.getDomNode().removeEventListener("animationend",t)},i=setTimeout(t,110);return e.getDomNode().addEventListener("animationend",t),e.getDomNode().classList.add("fadeOut"),{dispose:t}}constructor(e,t,i){let{lineNumber:n,column:s}=t;this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(n,n,0),this._position={lineNumber:n,column:s},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";const o=document.createElement("div");o.classList.add("anchor","top"),this._domNode.appendChild(o);const r=document.createElement("div");"string"===typeof i?(r.classList.add("message"),r.textContent=i):(i.classList.add("message"),r.appendChild(i)),this._domNode.appendChild(r);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle("below",2===e)}}(0,l.HW)(f.ID,f,4)},92310:(e,t,i)=>{i.r(t),i.d(t,{AddSelectionToNextFindMatchAction:()=>F,AddSelectionToPreviousFindMatchAction:()=>P,CompatChangeAll:()=>T,FocusNextCursor:()=>j,FocusPreviousCursor:()=>Q,InsertCursorAbove:()=>k,InsertCursorBelow:()=>w,MoveSelectionToNextFindMatchAction:()=>D,MoveSelectionToPreviousFindMatchAction:()=>W,MultiCursorSelectionController:()=>E,MultiCursorSelectionControllerAction:()=>L,MultiCursorSession:()=>I,MultiCursorSessionResult:()=>M,SelectHighlightsAction:()=>A,SelectionHighlighter:()=>H});var n,s=i(94198),o=i(78112),r=i(78605),a=i(60704),d=i(444),l=i(19802),c=i(38499),h=i(60928),u=i(20484),g=i(75603),p=i(17483),m=i(90585),_=i(26376),v=i(58012),f=i(60098),b=i(17837),C=function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},y=function(e,t){return function(i,n){t(i,n,e)}};function S(e,t){const i=t.filter((t=>!e.find((e=>e.equals(t)))));if(i.length>=1){const e=i.map((e=>"line ".concat(e.viewState.position.lineNumber," column ").concat(e.viewState.position.column))).join(", "),t=1===i.length?p.kg("cursorAdded","Cursor added: {0}",e):p.kg("cursorsAdded","Cursors added: {0}",e);(0,s.h5)(t)}}class k extends d.ks{constructor(){super({id:"editor.action.insertCursorAbove",label:p.kg("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:u.R.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:m.D8.MenubarSelectionMenu,group:"3_multi",title:p.kg({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,i){if(!t.hasModel())return;let n=!0;i&&!1===i.logicalLine&&(n=!1);const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const o=s.getCursorStates();s.setCursorStates(i.source,3,l.c.addCursorUp(s,o,n)),s.revealTopMostCursor(i.source),S(o,s.getCursorStates())}}class w extends d.ks{constructor(){super({id:"editor.action.insertCursorBelow",label:p.kg("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:u.R.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:m.D8.MenubarSelectionMenu,group:"3_multi",title:p.kg({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,i){if(!t.hasModel())return;let n=!0;i&&!1===i.logicalLine&&(n=!1);const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const o=s.getCursorStates();s.setCursorStates(i.source,3,l.c.addCursorDown(s,o,n)),s.revealBottomMostCursor(i.source),S(o,s.getCursorStates())}}class N extends d.ks{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:p.kg("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:u.R.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:m.D8.MenubarSelectionMenu,group:"3_multi",title:p.kg({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,i){if(!e.isEmpty()){for(let n=e.startLineNumber;n<e.endLineNumber;n++){const e=t.getLineMaxColumn(n);i.push(new h.L(n,e,n,e))}e.endColumn>1&&i.push(new h.L(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const i=t.getModel(),n=t.getSelections(),s=t._getViewModel(),o=s.getCursorStates(),r=[];n.forEach((e=>this.getCursorsForSelection(e,i,r))),r.length>0&&t.setSelections(r),S(o,s.getCursorStates())}}class x extends d.ks{constructor(){super({id:"editor.action.addCursorsToBottom",label:p.kg("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),n=t.getModel().getLineCount(),s=[];for(let a=i[0].startLineNumber;a<=n;a++)s.push(new h.L(a,i[0].startColumn,a,i[0].endColumn));const o=t._getViewModel(),r=o.getCursorStates();s.length>0&&t.setSelections(s),S(r,o.getCursorStates())}}class R extends d.ks{constructor(){super({id:"editor.action.addCursorsToTop",label:p.kg("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),n=[];for(let r=i[0].startLineNumber;r>=1;r--)n.push(new h.L(r,i[0].startColumn,r,i[0].endColumn));const s=t._getViewModel(),o=s.getCursorStates();n.length>0&&t.setSelections(n),S(o,s.getCursorStates())}}class M{constructor(e,t,i){this.selections=e,this.revealRange=t,this.revealScrollType=i}}class I{static create(e,t){if(!e.hasModel())return null;const i=t.getState();if(!e.hasTextFocus()&&i.isRevealed&&i.searchString.length>0)return new I(e,t,!1,i.searchString,i.wholeWord,i.matchCase,null);let n,s,o=!1;const r=e.getSelections();1===r.length&&r[0].isEmpty()?(o=!0,n=!0,s=!0):(n=i.wholeWord,s=i.matchCase);const a=e.getSelection();let d,l=null;if(a.isEmpty()){const t=e.getConfiguredWordAtPosition(a.getStartPosition());if(!t)return null;d=t.word,l=new h.L(a.startLineNumber,t.startColumn,a.startLineNumber,t.endColumn)}else d=e.getModel().getValueInRange(a).replace(/\r\n/g,"\n");return new I(e,t,o,d,n,s,l)}constructor(e,t,i,n,s,o,r){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=i,this.searchText=n,this.wholeWord=s,this.matchCase=o,this.currentMatch=r}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new M(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new M(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1);return i?new h.L(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new M(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new M(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1);return i?new h.L(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();const t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1,1073741824)}}class E extends a.jG{static get(e){return e.getContribution(E.ID)}constructor(e){super(),this._sessionDispose=this._register(new a.Cm),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=I.create(this._editor,e);if(!t)return;this._session=t;const i={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(i.wholeWordOverride=1,i.matchCaseOverride=1,i.isRegexOverride=2),e.getState().change(i,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection((e=>{this._ignoreSelectionChange||this._endSession()}))),this._sessionDispose.add(this._editor.onDidBlurEditorText((()=>{this._endSession()}))),this._sessionDispose.add(e.getState().onFindReplaceStateChange((e=>{(e.matchCase||e.wholeWord)&&this._endSession()})))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const i=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return i?new h.L(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const i=e.getState().matchCase;if(!B(this._editor.getModel(),t,i)){const e=this._editor.getModel(),i=[];for(let n=0,s=t.length;n<s;n++)i[n]=this._expandEmptyToWord(e,t[n]);return void this._editor.setSelections(i)}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const i=e.getState();if(i.isRevealed&&i.searchString.length>0&&i.isRegex){const e=this._editor.getModel();t=i.searchScope?e.findMatches(i.searchString,i.searchScope,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(131):null,!1,1073741824):e.findMatches(i.searchString,!0,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(131):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(i.searchScope)}if(t.length>0){const e=this._editor.getSelection();for(let i=0,n=t.length;i<n;i++){const n=t[i];if(n.range.intersectRanges(e)){t[i]=t[0],t[0]=n;break}}this._setSelections(t.map((e=>new h.L(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn))))}}}E.ID="editor.contrib.multiCursorController";class L extends d.ks{run(e,t){const i=E.get(t);if(!i)return;const n=t._getViewModel();if(n){const s=n.getCursorStates(),o=g.CommonFindController.get(t);if(o)this._run(i,o);else{const n=e.get(b._Y).createInstance(g.CommonFindController,t);this._run(i,n),n.dispose()}S(s,n.getCursorStates())}}}class F extends L{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:p.kg("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:u.R.focus,primary:2082,weight:100},menuOpts:{menuId:m.D8.MenubarSelectionMenu,group:"3_multi",title:p.kg({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class P extends L{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:p.kg("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:m.D8.MenubarSelectionMenu,group:"3_multi",title:p.kg({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class D extends L{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:p.kg("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:u.R.focus,primary:(0,r.m5)(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class W extends L{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:p.kg("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class A extends L{constructor(){super({id:"editor.action.selectHighlights",label:p.kg("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:u.R.focus,primary:3114,weight:100},menuOpts:{menuId:m.D8.MenubarSelectionMenu,group:"3_multi",title:p.kg({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class T extends L{constructor(){super({id:"editor.action.changeAll",label:p.kg("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:_.M$.and(u.R.writable,u.R.editorTextFocus),kbOpts:{kbExpr:u.R.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class O{constructor(e,t,i,n,s){this._model=e,this._searchText=t,this._matchCase=i,this._wordSeparators=n,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,s&&this._model===s._model&&this._searchText===s._searchText&&this._matchCase===s._matchCase&&this._wordSeparators===s._wordSeparators&&this._modelVersionId===s._modelVersionId&&(this._cachedFindMatches=s._cachedFindMatches)}findMatches(){return null===this._cachedFindMatches&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map((e=>e.range)),this._cachedFindMatches.sort(c.Q.compareRangesUsingStarts)),this._cachedFindMatches}}let H=n=class extends a.jG{constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(108),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new o.uC((()=>this._update()),300)),this.state=null,this._register(e.onDidChangeConfiguration((t=>{this._isEnabled=e.getOption(108)}))),this._register(e.onDidChangeCursorSelection((e=>{this._isEnabled&&(e.selection.isEmpty()?3===e.reason?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())}))),this._register(e.onDidChangeModel((e=>{this._setState(null)}))),this._register(e.onDidChangeModelContent((e=>{this._isEnabled&&this.updateSoon.schedule()})));const i=g.CommonFindController.get(e);i&&this._register(i.getState().onFindReplaceStateChange((e=>{this._update()}))),this.updateSoon.schedule()}_update(){this._setState(n._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,i){if(!t)return null;if(!i.hasModel())return null;const n=i.getSelection();if(n.startLineNumber!==n.endLineNumber)return null;const s=E.get(i);if(!s)return null;const o=g.CommonFindController.get(i);if(!o)return null;let r=s.getSession(o);if(!r){const e=i.getSelections();if(e.length>1){const t=o.getState().matchCase;if(!B(i.getModel(),e,t))return null}r=I.create(i,o)}if(!r)return null;if(r.currentMatch)return null;if(/^[ \t]+$/.test(r.searchText))return null;if(r.searchText.length>200)return null;const a=o.getState(),d=a.matchCase;if(a.isRevealed){let e=a.searchString;d||(e=e.toLowerCase());let t=r.searchText;if(d||(t=t.toLowerCase()),e===t&&r.matchCase===a.matchCase&&r.wholeWord===a.wholeWord&&!a.isRegex)return null}return new O(i.getModel(),r.searchText,r.matchCase,r.wholeWord?i.getOption(131):null,e)}_setState(e){if(this.state=e,!this.state)return void this._decorations.clear();if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const i=this.state.findMatches(),n=this.editor.getSelections();n.sort(c.Q.compareRangesUsingStarts);const s=[];for(let d=0,l=0,h=i.length,u=n.length;d<h;){const e=i[d];if(l>=u)s.push(e),d++;else{const t=c.Q.compareRangesUsingStarts(e,n[l]);t<0?(!n[l].isEmpty()&&c.Q.areIntersecting(e,n[l])||s.push(e),d++):(t>0||d++,l++)}}const o="off"!==this.editor.getOption(81),r=this._languageFeaturesService.documentHighlightProvider.has(t)&&o,a=s.map((e=>({range:e,options:(0,f.v)(r)})));this._decorations.set(a)}dispose(){this._setState(null),super.dispose()}};function B(e,t,i){const n=V(e,t[0],!i);for(let s=1,o=t.length;s<o;s++){const o=t[s];if(o.isEmpty())return!1;if(n!==V(e,o,!i))return!1}return!0}function V(e,t,i){const n=e.getValueInRange(t);return i?n.toLowerCase():n}H.ID="editor.contrib.selectionHighlighter",H=n=C([y(1,v.u)],H);class j extends d.ks{constructor(){super({id:"editor.action.focusNextCursor",label:p.kg("mutlicursor.focusNextCursor","Focus Next Cursor"),metadata:{description:p.kg("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const n=t._getViewModel();if(n.cursorConfig.readOnly)return;n.model.pushStackElement();const s=Array.from(n.getCursorStates()),o=s.shift();o&&(s.push(o),n.setCursorStates(i.source,3,s),n.revealPrimaryCursor(i.source,!0),S(s,n.getCursorStates()))}}class Q extends d.ks{constructor(){super({id:"editor.action.focusPreviousCursor",label:p.kg("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),metadata:{description:p.kg("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const n=t._getViewModel();if(n.cursorConfig.readOnly)return;n.model.pushStackElement();const s=Array.from(n.getCursorStates()),o=s.pop();o&&(s.unshift(o),n.setCursorStates(i.source,3,s),n.revealPrimaryCursor(i.source,!0),S(s,n.getCursorStates()))}}(0,d.HW)(E.ID,E,4),(0,d.HW)(H.ID,H,1),(0,d.Fl)(k),(0,d.Fl)(w),(0,d.Fl)(N),(0,d.Fl)(F),(0,d.Fl)(P),(0,d.Fl)(D),(0,d.Fl)(W),(0,d.Fl)(A),(0,d.Fl)(T),(0,d.Fl)(x),(0,d.Fl)(R),(0,d.Fl)(j),(0,d.Fl)(Q)},63175:(e,t,i)=>{i.r(t),i.d(t,{ParameterHintsController:()=>$,TriggerParameterHintsAction:()=>z});var n=i(52800),s=i(60704),o=i(444),r=i(20484),a=i(83011),d=i(58012),l=i(78112),c=i(74821),h=i(4640),u=i(60548),g=i(53069),p=i(14945),m=i(56002),_=i(20603),v=i(6976),f=i(22137),b=i(26376);const C={Visible:new b.N1("parameterHintsVisible",!1),MultipleSignatures:new b.N1("parameterHintsMultipleSignatures",!1)};async function y(e,t,i,n,s){const o=e.ordered(t);for(const a of o)try{const e=await a.provideSignatureHelp(t,i,s,n);if(e)return e}catch(r){(0,c.M_)(r)}}var S;f.w.registerCommand("_executeSignatureHelpProvider",(async function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];const[s,o,r]=i;(0,p.j)(m.r.isUri(s)),(0,p.j)(_.y.isIPosition(o)),(0,p.j)("string"===typeof r||!r);const l=e.get(d.u),c=await e.get(v.b).createModelReference(s);try{const e=await y(l.signatureHelpProvider,c.object.textEditorModel,_.y.lift(o),{triggerKind:a.WA.Invoke,isRetrigger:!1,triggerCharacter:r},g.XO.None);if(!e)return;return setTimeout((()=>e.dispose()),0),e.value}finally{c.dispose()}})),function(e){e.Default={type:0};e.Pending=class{constructor(e,t){this.request=e,this.previouslyActiveHints=t,this.type=2}};e.Active=class{constructor(e){this.hints=e,this.type=1}}}(S||(S={}));class k extends s.jG{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k.DEFAULT_DELAY;super(),this._onChangedHints=this._register(new h.vl),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=S.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new s.HE),this.triggerChars=new u.y,this.retriggerChars=new u.y,this.triggerId=0,this.editor=e,this.providers=t,this.throttledDelayer=new l.ve(i),this._register(this.editor.onDidBlurEditorWidget((()=>this.cancel()))),this._register(this.editor.onDidChangeConfiguration((()=>this.onEditorConfigurationChange()))),this._register(this.editor.onDidChangeModel((e=>this.onModelChanged()))),this._register(this.editor.onDidChangeModelLanguage((e=>this.onModelChanged()))),this._register(this.editor.onDidChangeCursorSelection((e=>this.onCursorChange(e)))),this._register(this.editor.onDidChangeModelContent((e=>this.onModelContentChange()))),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType((e=>this.onDidType(e)))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){2===this._state.type&&this._state.request.cancel(),this._state=e}cancel(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state=S.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const i=this.editor.getModel();if(!i||!this.providers.has(i))return;const n=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger((()=>this.doTrigger(n)),t).catch(c.dz)}next(){if(1!==this.state.type)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=t%e===e-1,n=this.editor.getOption(86).cycle;!(e<2||i)||n?this.updateActiveSignature(i&&n?0:t+1):this.cancel()}previous(){if(1!==this.state.type)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=0===t,n=this.editor.getOption(86).cycle;!(e<2||i)||n?this.updateActiveSignature(i&&n?e-1:t-1):this.cancel()}updateActiveSignature(e){1===this.state.type&&(this.state=new S.Active({...this.state.hints,activeSignature:e}),this._onChangedHints.fire(this.state.hints))}async doTrigger(e){const t=1===this.state.type||2===this.state.type,i=this.getLastActiveHints();if(this.cancel(!0),0===this._pendingTriggers.length)return!1;const n=this._pendingTriggers.reduce(w);this._pendingTriggers=[];const s={triggerKind:n.triggerKind,triggerCharacter:n.triggerCharacter,isRetrigger:t,activeSignatureHelp:i};if(!this.editor.hasModel())return!1;const o=this.editor.getModel(),r=this.editor.getPosition();this.state=new S.Pending((0,l.SS)((e=>y(this.providers,o,r,s,e))),i);try{const t=await this.state.request;return e!==this.triggerId?(null===t||void 0===t||t.dispose(),!1):t&&t.value.signatures&&0!==t.value.signatures.length?(this.state=new S.Active(t.value),this._lastSignatureHelpResult.value=t,this._onChangedHints.fire(this.state.hints),!0):(null===t||void 0===t||t.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1)}catch(a){return e===this.triggerId&&(this.state=S.Default),(0,c.dz)(a),!1}}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return 1===this.state.type||2===this.state.type||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars.clear(),this.retriggerChars.clear();const e=this.editor.getModel();if(e)for(const t of this.providers.ordered(e)){for(const e of t.signatureHelpTriggerCharacters||[])if(e.length){const t=e.charCodeAt(0);this.triggerChars.add(t),this.retriggerChars.add(t)}for(const e of t.signatureHelpRetriggerCharacters||[])e.length&&this.retriggerChars.add(e.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,i=e.charCodeAt(t);(this.triggerChars.has(i)||this.isTriggered&&this.retriggerChars.has(i))&&this.trigger({triggerKind:a.WA.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){"mouse"===e.source?this.cancel():this.isTriggered&&this.trigger({triggerKind:a.WA.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:a.WA.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(86).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}function w(e,t){switch(t.triggerKind){case a.WA.Invoke:return t;case a.WA.ContentChange:return e;case a.WA.TriggerCharacter:default:return t}}k.DEFAULT_DELAY=120;var N,x=i(17483),R=i(17837),M=i(29563),I=i(94198),E=i(90049),L=i(33944),F=i(24606),P=i(48188),D=i(19486),W=i(29321),A=i(81203),T=i(39024),O=i(48367),H=function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},B=function(e,t){return function(i,n){t(i,n,e)}};const V=M.$,j=(0,T.pU)("parameter-hints-next",L.W.chevronDown,x.kg("parameterHintsNextIcon","Icon for show next parameter hint.")),Q=(0,T.pU)("parameter-hints-previous",L.W.chevronUp,x.kg("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let G=N=class extends s.jG{constructor(e,t,i,n,o){super(),this.editor=e,this.model=t,this.renderDisposeables=this._register(new s.Cm),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new D.T({editor:e},o,n)),this.keyVisible=C.Visible.bindTo(i),this.keyMultipleSignatures=C.MultipleSignatures.bindTo(i)}createParameterHintDOMNodes(){const e=V(".editor-widget.parameter-hints-widget"),t=M.BC(e,V(".phwrapper"));t.tabIndex=-1;const i=M.BC(t,V(".controls")),n=M.BC(i,V(".button"+O.L.asCSSSelector(Q))),s=M.BC(i,V(".overloads")),o=M.BC(i,V(".button"+O.L.asCSSSelector(j)));this._register(M.ko(n,"click",(e=>{M.fs.stop(e),this.previous()}))),this._register(M.ko(o,"click",(e=>{M.fs.stop(e),this.next()})));const r=V(".body"),a=new E.MU(r,{alwaysConsumeMouseWheel:!0});this._register(a),t.appendChild(a.getDomNode());const d=M.BC(r,V(".signature")),l=M.BC(r,V(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:d,overloads:s,docs:l,scrollbar:a},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection((e=>{this.visible&&this.editor.layoutContentWidget(this)})));const c=()=>{if(!this.domNodes)return;const e=this.editor.getOption(50);this.domNodes.element.style.fontSize="".concat(e.fontSize,"px"),this.domNodes.element.style.lineHeight="".concat(e.lineHeight/e.fontSize)};c(),this._register(h.Jh.chain(this.editor.onDidChangeConfiguration.bind(this.editor),(e=>e.filter((e=>e.hasChanged(50)))))(c)),this._register(this.editor.onDidLayoutChange((e=>this.updateMaxHeight()))),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout((()=>{var e;null===(e=this.domNodes)||void 0===e||e.element.classList.add("visible")}),100),this.editor.layoutContentWidget(this))}hide(){var e;this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,null===(e=this.domNodes)||void 0===e||e.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){var t;if(this.renderDisposeables.clear(),!this.domNodes)return;const i=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",i),this.keyMultipleSignatures.set(i),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const n=e.signatures[e.activeSignature];if(!n)return;const s=M.BC(this.domNodes.signature,V(".code")),o=this.editor.getOption(50);s.style.fontSize="".concat(o.fontSize,"px"),s.style.fontFamily=o.fontFamily;const r=n.parameters.length>0,a=null!==(t=n.activeParameter)&&void 0!==t?t:e.activeParameter;if(r)this.renderParameters(s,n,a);else{M.BC(s,V("span")).textContent=n.label}const d=n.parameters[a];if(null===d||void 0===d?void 0:d.documentation){const e=V("span.documentation");if("string"===typeof d.documentation)e.textContent=d.documentation;else{const t=this.renderMarkdownDocs(d.documentation);e.appendChild(t.element)}M.BC(this.domNodes.docs,V("p",{},e))}if(void 0===n.documentation);else if("string"===typeof n.documentation)M.BC(this.domNodes.docs,V("p",{},n.documentation));else{const e=this.renderMarkdownDocs(n.documentation);M.BC(this.domNodes.docs,e.element)}const l=this.hasDocs(n,d);if(this.domNodes.signature.classList.toggle("has-docs",l),this.domNodes.docs.classList.toggle("empty",!l),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,d){let e="";const t=n.parameters[a];e=Array.isArray(t.label)?n.label.substring(t.label[0],t.label[1]):t.label,t.documentation&&(e+="string"===typeof t.documentation?", ".concat(t.documentation):", ".concat(t.documentation.value)),n.documentation&&(e+="string"===typeof n.documentation?", ".concat(n.documentation):", ".concat(n.documentation.value)),this.announcedLabel!==e&&(I.xE(x.kg("hint","{0}, hint",e)),this.announcedLabel=e)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var e;null===(e=this.domNodes)||void 0===e||e.scrollbar.scanDomNode()}}));return t.element.classList.add("markdown-docs"),t}hasDocs(e,t){return!!(t&&"string"===typeof t.documentation&&(0,p.eU)(t.documentation).length>0)||(!!(t&&"object"===typeof t.documentation&&(0,p.eU)(t.documentation).value.length>0)||(!!(e.documentation&&"string"===typeof e.documentation&&(0,p.eU)(e.documentation).length>0)||!!(e.documentation&&"object"===typeof e.documentation&&(0,p.eU)(e.documentation.value).length>0)))}renderParameters(e,t,i){const[n,s]=this.getParameterLabelOffsets(t,i),o=document.createElement("span");o.textContent=t.label.substring(0,n);const r=document.createElement("span");r.textContent=t.label.substring(n,s),r.className="parameter active";const a=document.createElement("span");a.textContent=t.label.substring(s),M.BC(e,o,r,a)}getParameterLabelOffsets(e,t){const i=e.parameters[t];if(i){if(Array.isArray(i.label))return i.label;if(i.label.length){const t=new RegExp("(\\W|^)".concat((0,F.bm)(i.label),"(?=\\W|$)"),"g");t.test(e.label);const n=t.lastIndex-i.label.length;return n>=0?[n,t.lastIndex]:[0,0]}return[0,0]}return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return N.ID}updateMaxHeight(){if(!this.domNodes)return;const e=Math.max(this.editor.getLayoutInfo().height/4,250),t="".concat(e,"px");this.domNodes.element.style.maxHeight=t;const i=this.domNodes.element.getElementsByClassName("phwrapper");i.length&&(i[0].style.maxHeight=t)}};G.ID="editor.widget.parameterHintsWidget",G=N=H([B(2,b.fN),B(3,W.C),B(4,P.L)],G),(0,A.x1A)("editorHoverWidget.highlightForeground",{dark:A.QI5,light:A.QI5,hcDark:A.QI5,hcLight:A.QI5},x.kg("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));var q,K=function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},U=function(e,t){return function(i,n){t(i,n,e)}};let $=q=class extends s.jG{static get(e){return e.getContribution(q.ID)}constructor(e,t,i){super(),this.editor=e,this.model=this._register(new k(e,i.signatureHelpProvider)),this._register(this.model.onChangedHints((e=>{var t;e?(this.widget.value.show(),this.widget.value.render(e)):null===(t=this.widget.rawValue)||void 0===t||t.hide()}))),this.widget=new n.d((()=>this._register(t.createInstance(G,this.editor,this.model))))}cancel(){this.model.cancel()}previous(){var e;null===(e=this.widget.rawValue)||void 0===e||e.previous()}next(){var e;null===(e=this.widget.rawValue)||void 0===e||e.next()}trigger(e){this.model.trigger(e,0)}};$.ID="editor.controller.parameterHints",$=q=K([U(1,R._Y),U(2,d.u)],$);class z extends o.ks{constructor(){super({id:"editor.action.triggerParameterHints",label:x.kg("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:r.R.hasSignatureHelpProvider,kbOpts:{kbExpr:r.R.editorTextFocus,primary:3082,weight:100}})}run(e,t){const i=$.get(t);null===i||void 0===i||i.trigger({triggerKind:a.WA.Invoke})}}(0,o.HW)($.ID,$,2),(0,o.Fl)(z);const X=o.DX.bindToContribution($.get);(0,o.E_)(new X({id:"closeParameterHints",precondition:C.Visible,handler:e=>e.cancel(),kbOpts:{weight:175,kbExpr:r.R.focus,primary:9,secondary:[1033]}})),(0,o.E_)(new X({id:"showPrevParameterHint",precondition:b.M$.and(C.Visible,C.MultipleSignatures),handler:e=>e.previous(),kbOpts:{weight:175,kbExpr:r.R.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}})),(0,o.E_)(new X({id:"showNextParameterHint",precondition:b.M$.and(C.Visible,C.MultipleSignatures),handler:e=>e.next(),kbOpts:{weight:175,kbExpr:r.R.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}))},45249:(e,t,i)=>{i.d(t,{zn:()=>k,x2:()=>w,j6:()=>M,RL:()=>x,zl:()=>F,n6:()=>P,z0:()=>I,_X:()=>E,e3:()=>L});var n=i(29563),s=i(48837),o=i(49071),r=i(33944),a=i(48367),d=i(5803),l=i(4640),c=i(19604),h=i(444),u=i(24107),g=i(78667),p=i(32400),m=i(17483),_=i(12487),v=i(26376),f=i(26528),b=i(17837),C=i(81203),y=function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},S=function(e,t){return function(i,n){t(i,n,e)}};const k=(0,b.u1)("IPeekViewService");var w;(0,f.v)(k,class{constructor(){this._widgets=new Map}addExclusiveWidget(e,t){const i=this._widgets.get(e);i&&(i.listener.dispose(),i.widget.dispose());this._widgets.set(e,{widget:t,listener:t.onDidClose((()=>{const i=this._widgets.get(e);i&&i.widget===t&&(i.listener.dispose(),this._widgets.delete(e))}))})}},1),function(e){e.inPeekEditor=new v.N1("inReferenceSearchEditor",!0,m.kg("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),e.notInPeekEditor=e.inPeekEditor.toNegated()}(w||(w={}));let N=class{constructor(e,t){e instanceof g.t&&w.inPeekEditor.bindTo(t)}dispose(){}};function x(e){const t=e.get(u.T).getFocusedCodeEditor();return t instanceof g.t?t.getParentEditor():t}N.ID="editor.contrib.referenceController",N=y([S(1,v.fN)],N),(0,h.HW)(N.ID,N,0);const R={headerBackgroundColor:d.Q1.white,primaryHeadingColor:d.Q1.fromHex("#333333"),secondaryHeadingColor:d.Q1.fromHex("#6c6c6cb3")};let M=class extends p.P{constructor(e,t,i){super(e,t),this.instantiationService=i,this._onDidClose=new l.vl,this.onDidClose=this._onDidClose.event,c.co(this.options,R,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){const t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();const e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=n.$(".head"),this._bodyElement=n.$(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){this._titleElement=n.$(".peekview-title"),this.options.supportOnTitleClick&&(this._titleElement.classList.add("clickable"),n.b2(this._titleElement,"click",(e=>this._onTitleClick(e)))),n.BC(this._headElement,this._titleElement),this._fillTitleIcon(this._titleElement),this._primaryHeading=n.$("span.filename"),this._secondaryHeading=n.$("span.dirname"),this._metaHeading=n.$("span.meta"),n.BC(this._titleElement,this._primaryHeading,this._secondaryHeading,this._metaHeading);const i=n.$(".peekview-actions");n.BC(this._headElement,i);const d=this._getActionBarOptions();this._actionbarWidget=new s.E(i,d),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new o.rc("peekview.close",m.kg("label.close","Close"),a.L.asClassName(r.W.close),!0,(()=>(this.dispose(),Promise.resolve()))),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:_.rN.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:n.w_(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,n.WU(this._metaHeading)):n.jD(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0)return void this.dispose();const i=Math.ceil(1.2*this.editor.getOption(67)),n=Math.round(e-(i+2));this._doLayoutHead(i,t),this._doLayoutBody(n,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height="".concat(e,"px"),this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height="".concat(e,"px"))}};M=y([S(2,b._Y)],M);const I=(0,C.x1A)("peekViewTitle.background",{dark:"#252526",light:"#F3F3F3",hcDark:d.Q1.black,hcLight:d.Q1.white},m.kg("peekViewTitleBackground","Background color of the peek view title area.")),E=(0,C.x1A)("peekViewTitleLabel.foreground",{dark:d.Q1.white,light:d.Q1.black,hcDark:d.Q1.white,hcLight:C.By2},m.kg("peekViewTitleForeground","Color of the peek view title.")),L=(0,C.x1A)("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},m.kg("peekViewTitleInfoForeground","Color of the peek view title info.")),F=(0,C.x1A)("peekView.border",{dark:C.pOz,light:C.pOz,hcDark:C.b1q,hcLight:C.b1q},m.kg("peekViewBorder","Color of the peek view borders and arrow.")),P=(0,C.x1A)("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:d.Q1.black,hcLight:d.Q1.white},m.kg("peekViewResultsBackground","Background color of the peek view result list.")),D=((0,C.x1A)("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:d.Q1.white,hcLight:C.By2},m.kg("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list.")),(0,C.x1A)("peekViewResult.fileForeground",{dark:d.Q1.white,light:"#1E1E1E",hcDark:d.Q1.white,hcLight:C.By2},m.kg("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list.")),(0,C.x1A)("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},m.kg("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list.")),(0,C.x1A)("peekViewResult.selectionForeground",{dark:d.Q1.white,light:"#6C6C6C",hcDark:d.Q1.white,hcLight:C.By2},m.kg("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list.")),(0,C.x1A)("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:d.Q1.black,hcLight:d.Q1.white},m.kg("peekViewEditorBackground","Background color of the peek view editor.")));(0,C.x1A)("peekViewEditorGutter.background",{dark:D,light:D,hcDark:D,hcLight:D},m.kg("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor.")),(0,C.x1A)("peekViewEditorStickyScroll.background",{dark:D,light:D,hcDark:D,hcLight:D},m.kg("peekViewEditorStickScrollBackground","Background color of sticky scroll in the peek view editor.")),(0,C.x1A)("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},m.kg("peekViewResultsMatchHighlight","Match highlight color in the peek view result list.")),(0,C.x1A)("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},m.kg("peekViewEditorMatchHighlight","Match highlight color in the peek view editor.")),(0,C.x1A)("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:C.buw,hcLight:C.buw},m.kg("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."))},84632:(e,t,i)=>{i.d(t,{C:()=>r});var n=i(3192),s=i(42613),o=i(92767);class r extends o.l{constructor(e,t,i,n,s,o){super(e,t,i,n,s,o)}getCodeEditorCommandPicks(){var e;const t=this.activeTextEditorControl;if(!t)return[];const i=[];for(const o of t.getSupportedActions()){let t;(null===(e=o.metadata)||void 0===e?void 0:e.description)&&(t=(0,s.f)(o.metadata.description)?o.metadata.description:{original:o.metadata.description,value:o.metadata.description}),i.push({commandId:o.id,commandAlias:o.alias,commandDescription:t,label:(0,n.pS)(o.label)||o.id})}return i}}},54191:(e,t,i)=>{i.d(t,{o:()=>c});var n=i(97655),s=i(60704),o=i(73800),r=i(17913),a=i(98681),d=i(84974),l=i(94198);class c{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t){var i;const n=new s.Cm;e.canAcceptInBackground=!!(null===(i=this.options)||void 0===i?void 0:i.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const o=n.add(new s.HE);return o.value=this.doProvide(e,t),n.add(this.onDidActiveTextEditorControlChange((()=>{o.value=void 0,o.value=this.doProvide(e,t)}))),n}doProvide(e,t){var i;const r=new s.Cm,a=this.activeTextEditorControl;if(a&&this.canProvideWithTextEditor(a)){const d={editor:a},l=(0,o.jA)(a);if(l){let e=null!==(i=a.saveViewState())&&void 0!==i?i:void 0;r.add(l.onDidChangeCursorPosition((()=>{var t;e=null!==(t=a.saveViewState())&&void 0!==t?t:void 0}))),d.restoreViewState=()=>{e&&a===this.activeTextEditorControl&&a.restoreViewState(e)},r.add((0,n.P)(t.onCancellationRequested)((()=>{var e;return null===(e=d.restoreViewState)||void 0===e?void 0:e.call(d)})))}r.add((0,s.s)((()=>this.clearDecorations(a)))),r.add(this.provideWithTextEditor(d,e,t))}else r.add(this.provideWithoutTextEditor(e,t));return r}canProvideWithTextEditor(e){return!0}gotoLocation(e,t){let{editor:i}=e;i.setSelection(t.range,"code.jump"),i.revealRangeInCenter(t.range,0),t.preserveFocus||i.focus();const n=i.getModel();n&&"getLineContent"in n&&(0,l.h5)("".concat(n.getLineContent(t.range.startLineNumber)))}getModel(e){var t;return(0,o.Np)(e)?null===(t=e.getModel())||void 0===t?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations((e=>{const i=[];this.rangeHighlightDecorationId&&(i.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),i.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const n=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:(0,d.Yf)(a.vp),position:r.A5.Full}}}],[s,o]=e.deltaDecorations(i,n);this.rangeHighlightDecorationId={rangeHighlightId:s,overviewRulerDecorationId:o}}))}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations((e=>{e.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])})),this.rangeHighlightDecorationId=void 0)}}},37409:(e,t,i)=>{i.d(t,{o:()=>a});var n=i(60704),s=i(73800),o=i(54191),r=i(17483);class a extends o.o{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=(0,r.kg)("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,n.jG.None}provideWithTextEditor(e,t,i){const o=e.editor,r=new n.Cm;r.add(t.onDidAccept((i=>{const[n]=t.selectedItems;if(n){if(!this.isValidLineNumber(o,n.lineNumber))return;this.gotoLocation(e,{range:this.toRange(n.lineNumber,n.column),keyMods:t.keyMods,preserveFocus:i.inBackground}),i.inBackground||t.hide()}})));const d=()=>{const e=this.parsePosition(o,t.value.trim().substr(a.PREFIX.length)),i=this.getPickLabel(o,e.lineNumber,e.column);if(t.items=[{lineNumber:e.lineNumber,column:e.column,label:i}],t.ariaLabel=i,!this.isValidLineNumber(o,e.lineNumber))return void this.clearDecorations(o);const n=this.toRange(e.lineNumber,e.column);o.revealRangeInCenter(n,0),this.addDecorations(o,n)};d(),r.add(t.onDidChangeValue((()=>d())));const l=(0,s.jA)(o);if(l){2===l.getOptions().get(68).renderType&&(l.updateOptions({lineNumbers:"on"}),r.add((0,n.s)((()=>l.updateOptions({lineNumbers:"relative"})))))}return r}toRange(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const i=t.split(/,|:|#/).map((e=>parseInt(e,10))).filter((e=>!isNaN(e))),n=this.lineCount(e)+1;return{lineNumber:i[0]>0?i[0]:n+i[0],column:i[1]}}getPickLabel(e,t,i){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,i)?(0,r.kg)("gotoLineColumnLabel","Go to line {0} and character {1}.",t,i):(0,r.kg)("gotoLineLabel","Go to line {0}.",t);const n=e.getPosition()||{lineNumber:1,column:1},s=this.lineCount(e);return s>1?(0,r.kg)("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",n.lineNumber,n.column,s):(0,r.kg)("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",n.lineNumber,n.column)}isValidLineNumber(e,t){return!(!t||"number"!==typeof t)&&(t>0&&t<=this.lineCount(e))}isValidColumn(e,t,i){if(!i||"number"!==typeof i)return!1;const n=this.getModel(e);if(!n)return!1;const s={lineNumber:t,column:i};return n.validatePosition(s).equals(s)}lineCount(e){var t,i;return null!==(i=null===(t=this.getModel(e))||void 0===t?void 0:t.getLineCount())&&void 0!==i?i:0}}a.PREFIX=":"},19627:(e,t,i)=>{i.d(t,{O:()=>C});var n,s=i(78112),o=i(53069),r=i(33944),a=i(48367),d=i(56112),l=i(60704),c=i(24606),h=i(38499),u=i(83011),g=i(50193),p=i(54191),m=i(17483),_=i(58012),v=i(44783),f=function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},b=function(e,t){return function(i,n){t(i,n,e)}};let C=n=class extends p.o{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.create(null);super(i),this._languageFeaturesService=e,this._outlineModelService=t,this.options=i,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,(0,m.kg)("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),l.jG.None}provideWithTextEditor(e,t,i){const n=e.editor,s=this.getModel(n);return s?this._languageFeaturesService.documentSymbolProvider.has(s)?this.doProvideWithEditorSymbols(e,s,t,i):this.doProvideWithoutEditorSymbols(e,s,t,i):l.jG.None}doProvideWithoutEditorSymbols(e,t,i,n){const s=new l.Cm;return this.provideLabelPick(i,(0,m.kg)("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),(async()=>{await this.waitForLanguageSymbolRegistry(t,s)&&!n.isCancellationRequested&&s.add(this.doProvideWithEditorSymbols(e,t,i,n))})(),s}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}async waitForLanguageSymbolRegistry(e,t){if(this._languageFeaturesService.documentSymbolProvider.has(e))return!0;const i=new s.Zv,n=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange((()=>{this._languageFeaturesService.documentSymbolProvider.has(e)&&(n.dispose(),i.complete(!0))})));return t.add((0,l.s)((()=>i.complete(!1)))),i.p}doProvideWithEditorSymbols(e,t,i,s){var r;const a=e.editor,c=new l.Cm;c.add(i.onDidAccept((t=>{const[n]=i.selectedItems;n&&n.range&&(this.gotoLocation(e,{range:n.range.selection,keyMods:i.keyMods,preserveFocus:t.inBackground}),t.inBackground||i.hide())}))),c.add(i.onDidTriggerItemButton((t=>{let{item:n}=t;n&&n.range&&(this.gotoLocation(e,{range:n.range.selection,keyMods:i.keyMods,forceSideBySide:!0}),i.hide())})));const u=this.getDocumentSymbols(t,s);let g;const p=async e=>{null===g||void 0===g||g.dispose(!0),i.busy=!1,g=new o.Qi(s),i.busy=!0;try{const t=(0,d.Ib)(i.value.substr(n.PREFIX.length).trim()),o=await this.doGetSymbolPicks(u,t,void 0,g.token);if(s.isCancellationRequested)return;if(o.length>0){if(i.items=o,e&&0===t.original.length){const t=(0,v.Uk)(o,(t=>Boolean("separator"!==t.type&&t.range&&h.Q.containsPosition(t.range.decoration,e))));t&&(i.activeItems=[t])}}else t.original.length>0?this.provideLabelPick(i,(0,m.kg)("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(i,(0,m.kg)("noSymbolResults","No editor symbols"))}finally{s.isCancellationRequested||(i.busy=!1)}};return c.add(i.onDidChangeValue((()=>p(void 0)))),p(null===(r=a.getSelection())||void 0===r?void 0:r.getPosition()),c.add(i.onDidChangeActive((()=>{const[e]=i.activeItems;e&&e.range&&(a.revealRangeInCenter(e.range.selection,0),this.addDecorations(a,e.range.decoration))}))),c}async doGetSymbolPicks(e,t,i,s){var o,l;const g=await e;if(s.isCancellationRequested)return[];const p=0===t.original.indexOf(n.SCOPE_PREFIX),_=p?1:0;let v,f,b;t.values&&t.values.length>1?(v=(0,d.AH)(t.values[0]),f=(0,d.AH)(t.values.slice(1))):v=t;const C=null===(l=null===(o=this.options)||void 0===o?void 0:o.openSideBySideDirection)||void 0===l?void 0:l.call(o);C&&(b=[{iconClass:"right"===C?a.L.asClassName(r.W.splitHorizontal):a.L.asClassName(r.W.splitVertical),tooltip:"right"===C?(0,m.kg)("openToSide","Open to the Side"):(0,m.kg)("openToBottom","Open to the Bottom")}]);const k=[];for(let x=0;x<g.length;x++){const R=g[x],M=(0,c.Bq)(R.name),I="$(".concat(u.gP.toIcon(R.kind).id,") ").concat(M),E=I.length-M.length;let L,F,P,D,W=R.containerName;if((null===i||void 0===i?void 0:i.extraContainerLabel)&&(W=W?"".concat(i.extraContainerLabel," \u2022 ").concat(W):i.extraContainerLabel),t.original.length>_){let T=!1;if(v!==t&&([L,F]=(0,d.nw)(I,{...t,values:void 0},_,E),"number"===typeof L&&(T=!0)),"number"!==typeof L&&([L,F]=(0,d.nw)(I,v,_,E),"number"!==typeof L))continue;if(!T&&f){if(W&&f.original.length>0&&([P,D]=(0,d.nw)(W,f)),"number"!==typeof P)continue;"number"===typeof L&&(L+=P)}}const A=R.tags&&R.tags.indexOf(1)>=0;k.push({index:x,kind:R.kind,score:L,label:I,ariaLabel:(0,u.PK)(R.name,R.kind),description:W,highlights:A?void 0:{label:F,description:D},range:{selection:h.Q.collapseToStart(R.selectionRange),decoration:R.range},strikethrough:A,buttons:b})}const w=k.sort(((e,t)=>p?this.compareByKindAndScore(e,t):this.compareByScore(e,t)));let N=[];if(p){let O,H,B=0;function V(){H&&"number"===typeof O&&B>0&&(H.label=(0,c.GP)(S[O]||y,B))}for(const j of w)O!==j.kind?(V(),O=j.kind,B=1,H={type:"separator"},N.push(H)):B++,N.push(j);V()}else w.length>0&&(N=[{label:(0,m.kg)("symbols","symbols ({0})",k.length),type:"separator"},...w]);return N}compareByScore(e,t){if("number"!==typeof e.score&&"number"===typeof t.score)return 1;if("number"===typeof e.score&&"number"!==typeof t.score)return-1;if("number"===typeof e.score&&"number"===typeof t.score){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const i=S[e.kind]||y,n=S[t.kind]||y,s=i.localeCompare(n);return 0===s?this.compareByScore(e,t):s}async getDocumentSymbols(e,t){const i=await this._outlineModelService.getOrCreate(e,t);return t.isCancellationRequested?[]:i.asListOfDocumentSymbols()}};C.PREFIX="@",C.SCOPE_PREFIX=":",C.PREFIX_BY_CATEGORY="".concat(n.PREFIX).concat(n.SCOPE_PREFIX),C=n=f([b(0,_.u),b(1,g.gW)],C);const y=(0,m.kg)("property","properties ({0})"),S={5:(0,m.kg)("method","methods ({0})"),11:(0,m.kg)("function","functions ({0})"),8:(0,m.kg)("_constructor","constructors ({0})"),12:(0,m.kg)("variable","variables ({0})"),4:(0,m.kg)("class","classes ({0})"),22:(0,m.kg)("struct","structs ({0})"),23:(0,m.kg)("event","events ({0})"),24:(0,m.kg)("operator","operators ({0})"),10:(0,m.kg)("interface","interfaces ({0})"),2:(0,m.kg)("namespace","namespaces ({0})"),3:(0,m.kg)("package","packages ({0})"),25:(0,m.kg)("typeParameter","type parameters ({0})"),1:(0,m.kg)("modules","modules ({0})"),6:(0,m.kg)("property","properties ({0})"),9:(0,m.kg)("enum","enumerations ({0})"),21:(0,m.kg)("enumMember","enumeration members ({0})"),14:(0,m.kg)("string","strings ({0})"),0:(0,m.kg)("file","files ({0})"),17:(0,m.kg)("array","arrays ({0})"),15:(0,m.kg)("number","numbers ({0})"),16:(0,m.kg)("boolean","booleans ({0})"),18:(0,m.kg)("object","objects ({0})"),19:(0,m.kg)("key","keys ({0})"),7:(0,m.kg)("field","fields ({0})"),13:(0,m.kg)("constant","constants ({0})")}},86257:(e,t,i)=>{i.r(t),i.d(t,{ReadOnlyMessageController:()=>d});var n=i(82602),s=i(60704),o=i(444),r=i(74459),a=i(17483);class d extends s.jG{constructor(e){super(),this.editor=e,this._register(this.editor.onDidAttemptReadOnlyEdit((()=>this._onDidAttemptReadOnlyEdit())))}_onDidAttemptReadOnlyEdit(){const e=r.k.get(this.editor);if(e&&this.editor.hasModel()){let t=this.editor.getOptions().get(92);t||(t=this.editor.isSimpleWidget?new n.Bc(a.kg("editor.simple.readonly","Cannot edit in read-only input")):new n.Bc(a.kg("editor.readonly","Cannot edit in read-only editor"))),e.showMessage(t,this.editor.getPosition())}}}d.ID="editor.contrib.readOnlyMessageController",(0,o.HW)(d.ID,d,2)},12814:(e,t,i)=>{i.r(t),i.d(t,{RenameAction:()=>re,rename:()=>se});var n=i(94198),s=i(78112),o=i(53069),r=i(74821),a=i(82602),d=i(60704),l=i(14945),c=i(56002),h=i(444),u=i(30399),g=i(24107),p=i(20603),m=i(38499),_=i(20484),v=i(83011),f=i(58012),b=i(22246),C=i(53334),y=i(74459),S=i(17483),k=i(90585),w=i(35396),N=i(26376),x=i(17837),R=i(4687),M=i(42861),I=i(8173),E=i(4137),L=i(457),F=i(29563),P=i(87780),D=i(67630),W=i(83838),A=i(76816),T=i(15953),O=i(55648),H=i(33944),B=i(4640),V=i(40331),j=i(58431),Q=i(37589),G=i(18580),q=i(81203),K=i(84974),U=function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},$=function(e,t){return function(i,n){t(i,n,e)}};const z=new N.N1("renameInputVisible",!1,(0,S.kg)("renameInputVisible","Whether the rename input widget is visible"));new N.N1("renameInputFocused",!1,(0,S.kg)("renameInputFocused","Whether the rename input widget is focused"));let X=class{constructor(e,t,i,n,s,o){this._editor=e,this._acceptKeybindings=t,this._themeService=i,this._keybindingService=n,this._logService=o,this.allowEditorOverflow=!0,this._disposables=new d.Cm,this._visibleContextKey=z.bindTo(s),this._isEditingRenameCandidate=!1,this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,this._candidates=new Set,this._beforeFirstInputFieldEditSW=new V.W,this._inputWithButton=new J,this._disposables.add(this._inputWithButton),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(50)&&this._updateFont()}))),this._disposables.add(i.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._domNode.appendChild(this._inputWithButton.domNode),this._renameCandidateListView=this._disposables.add(new Y(this._domNode,{fontInfo:this._editor.getOption(50),onFocusChange:e=>{this._inputWithButton.input.value=e,this._isEditingRenameCandidate=!1},onSelectionChange:()=>{this._isEditingRenameCandidate=!1,this.acceptInput(!1)}})),this._disposables.add(this._inputWithButton.onDidInputChange((()=>{var e,t,i,n;void 0!==(null===(e=this._renameCandidateListView)||void 0===e?void 0:e.focusedCandidate)&&(this._isEditingRenameCandidate=!0),null!==(t=this._timeBeforeFirstInputFieldEdit)&&void 0!==t||(this._timeBeforeFirstInputFieldEdit=this._beforeFirstInputFieldEditSW.elapsed()),!1===(null===(i=this._renameCandidateProvidersCts)||void 0===i?void 0:i.token.isCancellationRequested)&&this._renameCandidateProvidersCts.cancel(),null===(n=this._renameCandidateListView)||void 0===n||n.clearFocus()}))),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())),this._domNode}_updateStyles(e){var t,i,n,s,o;if(!this._domNode)return;const r=e.getColor(q.f9l),a=e.getColor(q.DSL);this._domNode.style.backgroundColor=String(null!==(t=e.getColor(q.CgL))&&void 0!==t?t:""),this._domNode.style.boxShadow=r?" 0 0 8px 2px ".concat(r):"",this._domNode.style.border=a?"1px solid ".concat(a):"",this._domNode.style.color=String(null!==(i=e.getColor(q.cws))&&void 0!==i?i:"");const d=e.getColor(q.Zgs);this._inputWithButton.domNode.style.backgroundColor=String(null!==(n=e.getColor(q.L4c))&&void 0!==n?n:""),this._inputWithButton.input.style.backgroundColor=String(null!==(s=e.getColor(q.L4c))&&void 0!==s?s:""),this._inputWithButton.domNode.style.borderWidth=d?"1px":"0px",this._inputWithButton.domNode.style.borderStyle=d?"solid":"none",this._inputWithButton.domNode.style.borderColor=null!==(o=null===d||void 0===d?void 0:d.toString())&&void 0!==o?o:"none"}_updateFont(){if(void 0===this._domNode)return;(0,l.j)(void 0!==this._label,"RenameWidget#_updateFont: _label must not be undefined given _domNode is defined"),this._editor.applyFontInfo(this._inputWithButton.input);const e=this._editor.getOption(50);this._label.style.fontSize="".concat(this._computeLabelFontSize(e.fontSize),"px")}_computeLabelFontSize(e){return.8*e}getPosition(){if(!this._visible)return null;if(!this._editor.hasModel()||!this._editor.getDomNode())return null;const e=F.tG(this.getDomNode().ownerDocument.body),t=F.BK(this._editor.getDomNode()),i=this._getTopForPosition();this._nPxAvailableAbove=i+t.top,this._nPxAvailableBelow=e.height-this._nPxAvailableAbove;const n=this._editor.getOption(67),{totalHeight:s}=Z.getLayoutInfo({lineHeight:n}),o=this._nPxAvailableBelow>6*s?[2,1]:[1,2];return{position:this._position,preference:o}}beforeRender(){var e,t;const[i,n]=this._acceptKeybindings;return this._label.innerText=(0,S.kg)({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",null===(e=this._keybindingService.lookupKeybinding(i))||void 0===e?void 0:e.getLabel(),null===(t=this._keybindingService.lookupKeybinding(n))||void 0===t?void 0:t.getLabel()),this._domNode.style.minWidth="200px",null}afterRender(e){if(this._trace("invoking afterRender, position: ",e?"not null":"null"),null===e)return void this.cancelInput(!0,"afterRender (because position is null)");if(!this._editor.hasModel()||!this._editor.getDomNode())return;(0,l.j)(this._renameCandidateListView),(0,l.j)(void 0!==this._nPxAvailableAbove),(0,l.j)(void 0!==this._nPxAvailableBelow);const t=F.OK(this._inputWithButton.domNode),i=F.OK(this._label);let n;n=2===e?this._nPxAvailableBelow:this._nPxAvailableAbove,this._renameCandidateListView.layout({height:n-i-t,width:F.Tr(this._inputWithButton.domNode)})}acceptInput(e){var t;this._trace("invoking acceptInput"),null===(t=this._currentAcceptInput)||void 0===t||t.call(this,e)}cancelInput(e,t){var i;this._trace("invoking cancelInput, caller: ".concat(t,", _currentCancelInput: ").concat(this._currentAcceptInput?"not undefined":"undefined")),null===(i=this._currentCancelInput)||void 0===i||i.call(this,e)}focusNextRenameSuggestion(){var e;(null===(e=this._renameCandidateListView)||void 0===e?void 0:e.focusNext())||(this._inputWithButton.input.value=this._currentName)}focusPreviousRenameSuggestion(){var e;(null===(e=this._renameCandidateListView)||void 0===e?void 0:e.focusPrevious())||(this._inputWithButton.input.value=this._currentName)}getInput(e,t,i,n,o){const{start:r,end:a}=this._getSelection(e,t);this._renameCts=o;const c=new d.Cm;this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,void 0===n?this._inputWithButton.button.style.display="none":(this._inputWithButton.button.style.display="flex",this._requestRenameCandidatesOnce=n,this._requestRenameCandidates(t,!1),c.add(F.ko(this._inputWithButton.button,"click",(()=>this._requestRenameCandidates(t,!0)))),c.add(F.ko(this._inputWithButton.button,F.Bx.KEY_DOWN,(e=>{const i=new P.Z(e);(i.equals(3)||i.equals(10))&&(i.stopPropagation(),i.preventDefault(),this._requestRenameCandidates(t,!0))})))),this._isEditingRenameCandidate=!1,this._domNode.classList.toggle("preview",i),this._position=new p.y(e.startLineNumber,e.startColumn),this._currentName=t,this._inputWithButton.input.value=t,this._inputWithButton.input.setAttribute("selectionStart",r.toString()),this._inputWithButton.input.setAttribute("selectionEnd",a.toString()),this._inputWithButton.input.size=Math.max(1.1*(e.endColumn-e.startColumn),20),this._beforeFirstInputFieldEditSW.reset(),c.add((0,d.s)((()=>{this._renameCts=void 0,o.dispose(!0)}))),c.add((0,d.s)((()=>{void 0!==this._renameCandidateProvidersCts&&(this._renameCandidateProvidersCts.dispose(!0),this._renameCandidateProvidersCts=void 0)}))),c.add((0,d.s)((()=>this._candidates.clear())));const h=new s.Zv;return h.p.finally((()=>{c.dispose(),this._hide()})),this._currentCancelInput=e=>{var t;return this._trace("invoking _currentCancelInput"),this._currentAcceptInput=void 0,this._currentCancelInput=void 0,null===(t=this._renameCandidateListView)||void 0===t||t.clearCandidates(),h.complete(e),!0},this._currentAcceptInput=e=>{this._trace("invoking _currentAcceptInput"),(0,l.j)(void 0!==this._renameCandidateListView);const n=this._renameCandidateListView.nCandidates;let s,o;const r=this._renameCandidateListView.focusedCandidate;void 0!==r?(this._trace("using new name from renameSuggestion"),s=r,o={k:"renameSuggestion"}):(this._trace("using new name from inputField"),s=this._inputWithButton.input.value,o=this._isEditingRenameCandidate?{k:"userEditedRenameSuggestion"}:{k:"inputField"}),s!==t&&0!==s.trim().length?(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,this._renameCandidateListView.clearCandidates(),h.complete({newName:s,wantsPreview:i&&e,stats:{source:o,nRenameSuggestions:n,timeBeforeFirstInputFieldEdit:this._timeBeforeFirstInputFieldEdit,nRenameSuggestionsInvocations:this._nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:this._hadAutomaticRenameSuggestionsInvocation}})):this.cancelInput(!0,"_currentAcceptInput (because newName === value || newName.trim().length === 0)")},c.add(o.token.onCancellationRequested((()=>this.cancelInput(!0,"cts.token.onCancellationRequested")))),c.add(this._editor.onDidBlurEditorWidget((()=>{var e;return this.cancelInput(!(null===(e=this._domNode)||void 0===e?void 0:e.ownerDocument.hasFocus()),"editor.onDidBlurEditorWidget")}))),this._show(),h.p}_requestRenameCandidates(e,t){if(void 0!==this._requestRenameCandidatesOnce&&(void 0!==this._renameCandidateProvidersCts&&this._renameCandidateProvidersCts.dispose(!0),(0,l.j)(this._renameCts),"stop"!==this._inputWithButton.buttonState)){this._renameCandidateProvidersCts=new o.Qi;const i=t?v.YT.Invoke:v.YT.Automatic,n=this._requestRenameCandidatesOnce(i,this._renameCandidateProvidersCts.token);if(0===n.length)return void this._inputWithButton.setSparkleButton();t||(this._hadAutomaticRenameSuggestionsInvocation=!0),this._nRenameSuggestionsInvocations+=1,this._inputWithButton.setStopButton(),this._updateRenameCandidates(n,e,this._renameCts.token)}}_getSelection(e,t){(0,l.j)(this._editor.hasModel());const i=this._editor.getSelection();let n=0,s=t.length;return m.Q.isEmpty(i)||m.Q.spansMultipleLines(i)||!m.Q.containsRange(e,i)||(n=Math.max(0,i.startColumn-e.startColumn),s=Math.min(e.endColumn,i.endColumn)-e.startColumn),{start:n,end:s}}_show(){this._trace("invoking _show"),this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout((()=>{this._inputWithButton.input.focus(),this._inputWithButton.input.setSelectionRange(parseInt(this._inputWithButton.input.getAttribute("selectionStart")),parseInt(this._inputWithButton.input.getAttribute("selectionEnd")))}),100)}async _updateRenameCandidates(e,t,i){var n=this;const o=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n._trace("_updateRenameCandidates",...t)};o("start");const r=await(0,s.PK)(Promise.allSettled(e),i);if(this._inputWithButton.setSparkleButton(),void 0===r)return void o("returning early - received updateRenameCandidates results - undefined");const a=r.flatMap((e=>"fulfilled"===e.status&&(0,l.O9)(e.value)?e.value:[]));o("received updateRenameCandidates results - total (unfiltered) ".concat(a.length," candidates."));const d=O.dM(a,(e=>e.newSymbolName));o("distinct candidates - ".concat(d.length," candidates."));const c=d.filter((e=>{let{newSymbolName:i}=e;return i.trim().length>0&&i!==this._inputWithButton.input.value&&i!==t&&!this._candidates.has(i)}));o("valid distinct candidates - ".concat(a.length," candidates.")),c.forEach((e=>this._candidates.add(e.newSymbolName))),c.length<1?o("returning early - no valid distinct candidates"):(o("setting candidates"),this._renameCandidateListView.setCandidates(c),o("asking editor to re-layout"),this._editor.layoutContentWidget(this))}_hide(){this._trace("invoked _hide"),this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}_getTopForPosition(){const e=this._editor.getVisibleRanges();let t;return e.length>0?t=e[0].startLineNumber:(this._logService.warn("RenameWidget#_getTopForPosition: this should not happen - visibleRanges is empty"),t=Math.max(1,this._position.lineNumber-5)),this._editor.getTopForLineNumber(this._position.lineNumber)-this._editor.getTopForLineNumber(t)}_trace(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._logService.trace("RenameWidget",...t)}};X=U([$(2,K.Gy),$(3,Q.b),$(4,N.fN),$(5,R.rr)],X);class Y{constructor(e,t){this._disposables=new d.Cm,this._availableHeight=0,this._minimumWidth=0,this._lineHeight=t.fontInfo.lineHeight,this._typicalHalfwidthCharacterWidth=t.fontInfo.typicalHalfwidthCharacterWidth,this._listContainer=document.createElement("div"),this._listContainer.className="rename-box rename-candidate-list-container",e.appendChild(this._listContainer),this._listWidget=Y._createListWidget(this._listContainer,this._candidateViewHeight,t.fontInfo),this._listWidget.onDidChangeFocus((e=>{1===e.elements.length&&t.onFocusChange(e.elements[0].newSymbolName)}),this._disposables),this._listWidget.onDidChangeSelection((e=>{1===e.elements.length&&t.onSelectionChange()}),this._disposables),this._disposables.add(this._listWidget.onDidBlur((e=>{this._listWidget.setFocus([])}))),this._listWidget.style((0,G.t8)({listInactiveFocusForeground:q.nH,listInactiveFocusBackground:q.AlL}))}dispose(){this._listWidget.dispose(),this._disposables.dispose()}layout(e){let{height:t,width:i}=e;this._availableHeight=t,this._minimumWidth=i}setCandidates(e){this._listWidget.splice(0,0,e);const t=this._pickListHeight(this._listWidget.length),i=this._pickListWidth(e);this._listWidget.layout(t,i),this._listContainer.style.height="".concat(t,"px"),this._listContainer.style.width="".concat(i,"px"),n.h5((0,S.kg)("renameSuggestionsReceivedAria","Received {0} rename suggestions",e.length))}clearCandidates(){this._listContainer.style.height="0px",this._listContainer.style.width="0px",this._listWidget.splice(0,this._listWidget.length,[])}get nCandidates(){return this._listWidget.length}get focusedCandidate(){if(0===this._listWidget.length)return;const e=this._listWidget.getSelectedElements()[0];if(void 0!==e)return e.newSymbolName;const t=this._listWidget.getFocusedElements()[0];return void 0!==t?t.newSymbolName:void 0}focusNext(){if(0===this._listWidget.length)return!1;const e=this._listWidget.getFocus();if(0===e.length)return this._listWidget.focusFirst(),this._listWidget.reveal(0),!0;if(e[0]===this._listWidget.length-1)return this._listWidget.setFocus([]),this._listWidget.reveal(0),!1;{this._listWidget.focusNext();const e=this._listWidget.getFocus()[0];return this._listWidget.reveal(e),!0}}focusPrevious(){if(0===this._listWidget.length)return!1;const e=this._listWidget.getFocus();if(0===e.length){this._listWidget.focusLast();const e=this._listWidget.getFocus()[0];return this._listWidget.reveal(e),!0}if(0===e[0])return this._listWidget.setFocus([]),!1;{this._listWidget.focusPrevious();const e=this._listWidget.getFocus()[0];return this._listWidget.reveal(e),!0}}clearFocus(){this._listWidget.setFocus([])}get _candidateViewHeight(){const{totalHeight:e}=Z.getLayoutInfo({lineHeight:this._lineHeight});return e}_pickListHeight(e){const t=this._candidateViewHeight*e;return Math.min(t,this._availableHeight,7*this._candidateViewHeight)}_pickListWidth(e){const t=Math.ceil(Math.max(...e.map((e=>e.newSymbolName.length)))*this._typicalHalfwidthCharacterWidth);return Math.max(this._minimumWidth,25+t+10)}static _createListWidget(e,t,i){const n=new class{getTemplateId(e){return"candidate"}getHeight(e){return t}},s=new class{constructor(){this.templateId="candidate"}renderTemplate(e){return new Z(e,i)}renderElement(e,t,i){i.populate(e)}disposeTemplate(e){e.dispose()}};return new T.B8("NewSymbolNameCandidates",e,n,[s],{keyboardSupport:!1,mouseSupport:!0,multipleSelectionSupport:!1})}}class J{constructor(){this._onDidInputChange=new B.vl,this.onDidInputChange=this._onDidInputChange.event,this._disposables=new d.Cm}get domNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="rename-input-with-button",this._domNode.style.display="flex",this._domNode.style.flexDirection="row",this._domNode.style.alignItems="center",this._inputNode=document.createElement("input"),this._inputNode.className="rename-input",this._inputNode.type="text",this._inputNode.style.border="none",this._inputNode.setAttribute("aria-label",(0,S.kg)("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._inputNode),this._buttonNode=document.createElement("div"),this._buttonNode.className="rename-suggestions-button",this._buttonNode.setAttribute("tabindex","0"),this._buttonGenHoverText=S.kg("generateRenameSuggestionsButton","Generate new name suggestions"),this._buttonCancelHoverText=S.kg("cancelRenameSuggestionsButton","Cancel"),this._buttonHover=(0,D.i)().setupUpdatableHover((0,W.nZ)("element"),this._buttonNode,this._buttonGenHoverText),this._disposables.add(this._buttonHover),this._domNode.appendChild(this._buttonNode),this._disposables.add(F.ko(this.input,F.Bx.INPUT,(()=>this._onDidInputChange.fire()))),this._disposables.add(F.ko(this.input,F.Bx.KEY_DOWN,(e=>{const t=new P.Z(e);15!==t.keyCode&&17!==t.keyCode||this._onDidInputChange.fire()}))),this._disposables.add(F.ko(this.input,F.Bx.CLICK,(()=>this._onDidInputChange.fire()))),this._disposables.add(F.ko(this.input,F.Bx.FOCUS,(()=>{this.domNode.style.outlineWidth="1px",this.domNode.style.outlineStyle="solid",this.domNode.style.outlineOffset="-1px",this.domNode.style.outlineColor="var(--vscode-focusBorder)"}))),this._disposables.add(F.ko(this.input,F.Bx.BLUR,(()=>{this.domNode.style.outline="none"})))),this._domNode}get input(){return(0,l.j)(this._inputNode),this._inputNode}get button(){return(0,l.j)(this._buttonNode),this._buttonNode}get buttonState(){return this._buttonState}setSparkleButton(){var e,t;this._buttonState="sparkle",null!==(e=this._sparkleIcon)&&void 0!==e||(this._sparkleIcon=(0,A.s)(H.W.sparkle)),F.w_(this.button),this.button.appendChild(this._sparkleIcon),this.button.setAttribute("aria-label","Generating new name suggestions"),null===(t=this._buttonHover)||void 0===t||t.update(this._buttonGenHoverText),this.input.focus()}setStopButton(){var e,t;this._buttonState="stop",null!==(e=this._stopIcon)&&void 0!==e||(this._stopIcon=(0,A.s)(H.W.primitiveSquare)),F.w_(this.button),this.button.appendChild(this._stopIcon),this.button.setAttribute("aria-label","Cancel generating new name suggestions"),null===(t=this._buttonHover)||void 0===t||t.update(this._buttonCancelHoverText),this.input.focus()}dispose(){this._disposables.dispose()}}class Z{constructor(e,t){this._domNode=document.createElement("div"),this._domNode.className="rename-box rename-candidate",this._domNode.style.display="flex",this._domNode.style.columnGap="5px",this._domNode.style.alignItems="center",this._domNode.style.height="".concat(t.lineHeight,"px"),this._domNode.style.padding="".concat(Z._PADDING,"px");const i=document.createElement("div");i.style.display="flex",i.style.alignItems="center",i.style.width=i.style.height="".concat(.8*t.lineHeight,"px"),this._domNode.appendChild(i),this._icon=(0,A.s)(H.W.sparkle),this._icon.style.display="none",i.appendChild(this._icon),this._label=document.createElement("div"),j.M(this._label,t),this._domNode.appendChild(this._label),e.appendChild(this._domNode)}populate(e){this._updateIcon(e),this._updateLabel(e)}_updateIcon(e){var t;const i=!!(null===(t=e.tags)||void 0===t?void 0:t.includes(v.OV.AIGenerated));this._icon.style.display=i?"inherit":"none"}_updateLabel(e){this._label.innerText=e.newSymbolName}static getLayoutInfo(e){let{lineHeight:t}=e;return{totalHeight:t+2*Z._PADDING}}dispose(){}}Z._PADDING=2;var ee,te=function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},ie=function(e,t){return function(i,n){t(i,n,e)}};class ne{constructor(e,t,i){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=i.ordered(e)}hasProvider(){return this._providers.length>0}async resolveRenameLocation(e){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const i=this._providers[this._providerRenameIdx];if(!i.resolveRenameLocation)break;const n=await i.resolveRenameLocation(this.model,this.position,e);if(n){if(!n.rejectReason)return n;t.push(n.rejectReason)}}this._providerRenameIdx=0;const i=this.model.getWordAtPosition(this.position);return i?{range:new m.Q(this.position.lineNumber,i.startColumn,this.position.lineNumber,i.endColumn),text:i.word,rejectReason:t.length>0?t.join("\n"):void 0}:{range:m.Q.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join("\n"):void 0}}async provideRenameEdits(e,t){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)}async _provideRenameEdits(e,t,i,n){const s=this._providers[t];if(!s)return{edits:[],rejectReason:i.join("\n")};const o=await s.provideRenameEdits(this.model,this.position,e,n);return o?o.rejectReason?this._provideRenameEdits(e,t+1,i.concat(o.rejectReason),n):o:this._provideRenameEdits(e,t+1,i.concat(S.kg("no result","No result.")),n)}}async function se(e,t,i,n){const s=new ne(t,i,e),r=await s.resolveRenameLocation(o.XO.None);return(null===r||void 0===r?void 0:r.rejectReason)?{edits:[],rejectReason:r.rejectReason}:s.provideRenameEdits(n,o.XO.None)}let oe=ee=class{static get(e){return e.getContribution(ee.ID)}constructor(e,t,i,n,s,r,a,l,c){this.editor=e,this._instaService=t,this._notificationService=i,this._bulkEditService=n,this._progressService=s,this._logService=r,this._configService=a,this._languageFeaturesService=l,this._telemetryService=c,this._disposableStore=new d.Cm,this._cts=new o.Qi,this._renameWidget=this._disposableStore.add(this._instaService.createInstance(X,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}async run(){var e,t;const i=this._logService.trace.bind(this._logService,"[rename]");if(this._cts.dispose(!0),this._cts=new o.Qi,!this.editor.hasModel())return void i("editor has no model");const d=this.editor.getPosition(),l=new ne(this.editor.getModel(),d,this._languageFeaturesService.renameProvider);if(!l.hasProvider())return void i("skeleton has no provider");const c=new C.gI(this.editor,5,void 0,this._cts.token);let h;try{i("resolving rename location");const e=l.resolveRenameLocation(c.token);this._progressService.showWhile(e,250),h=await e,i("resolved rename location")}catch(w){return void(w instanceof r.AL?i("resolve rename location cancelled",JSON.stringify(w,null,"\t")):(i("resolve rename location failed",w instanceof Error?w:JSON.stringify(w,null,"\t")),("string"===typeof w||(0,a.VS)(w))&&(null===(e=y.k.get(this.editor))||void 0===e||e.showMessage(w||S.kg("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),d))))}finally{c.dispose()}if(!h)return void i("returning early - no loc");if(h.rejectReason)return i("returning early - rejected with reason: ".concat(h.rejectReason),h.rejectReason),void(null===(t=y.k.get(this.editor))||void 0===t||t.showMessage(h.rejectReason,d));if(c.token.isCancellationRequested)return void i("returning early - cts1 cancelled");const u=new C.gI(this.editor,5,h.range,this._cts.token),g=this.editor.getModel(),p=this._languageFeaturesService.newSymbolNamesProvider.all(g),_=await Promise.all(p.map((async e=>{var t;return[e,null!==(t=await e.supportsAutomaticNewSymbolNamesTriggerKind)&&void 0!==t&&t]})));i("creating rename input field and awaiting its result");const f=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),b=await this._renameWidget.getInput(h.range,h.text,f,p.length>0?(e,t)=>{let i=_.slice();return e===v.YT.Automatic&&(i=i.filter((e=>{let[t,i]=e;return i}))),i.map((i=>{let[n]=i;return n.provideNewSymbolNames(g,h.range,e,t)}))}:void 0,u);if(i("received response from rename input field"),p.length>0&&this._reportTelemetry(p.length,g.getLanguageId(),b),"boolean"===typeof b)return i("returning early - rename input field response - ".concat(b)),b&&this.editor.focus(),void u.dispose();this.editor.focus(),i("requesting rename edits");const k=(0,s.PK)(l.provideRenameEdits(b.newName,u.token),u.token).then((async e=>{if(e)if(this.editor.hasModel()){if(e.rejectReason)return i("returning early - rejected with reason: ".concat(e.rejectReason)),void this._notificationService.info(e.rejectReason);this.editor.setSelection(m.Q.fromPositions(this.editor.getSelection().getPosition())),i("applying edits"),this._bulkEditService.apply(e,{editor:this.editor,showPreview:b.wantsPreview,label:S.kg("label","Renaming '{0}' to '{1}'",null===h||void 0===h?void 0:h.text,b.newName),code:"undoredo.rename",quotableLabel:S.kg("quotableLabel","Renaming {0} to {1}",null===h||void 0===h?void 0:h.text,b.newName),respectAutoSaveConfig:!0}).then((e=>{i("edits applied"),e.ariaSummary&&(0,n.xE)(S.kg("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",h.text,b.newName,e.ariaSummary))})).catch((e=>{i("error when applying edits ".concat(JSON.stringify(e,null,"\t"))),this._notificationService.error(S.kg("rename.failedApply","Rename failed to apply edits")),this._logService.error(e)}))}else i("returning early - no model after rename edits are provided");else i("returning early - no rename edits result")}),(e=>{i("error when providing rename edits",JSON.stringify(e,null,"\t")),this._notificationService.error(S.kg("rename.failed","Rename failed to compute edits")),this._logService.error(e)})).finally((()=>{u.dispose()}));return i("returning rename operation"),this._progressService.showWhile(k,250),k}acceptRenameInput(e){this._renameWidget.acceptInput(e)}cancelRenameInput(){this._renameWidget.cancelInput(!0,"cancelRenameInput command")}focusNextRenameSuggestion(){this._renameWidget.focusNextRenameSuggestion()}focusPreviousRenameSuggestion(){this._renameWidget.focusPreviousRenameSuggestion()}_reportTelemetry(e,t,i){const n="boolean"===typeof i?{kind:"cancelled",languageId:t,nRenameSuggestionProviders:e}:{kind:"accepted",languageId:t,nRenameSuggestionProviders:e,source:i.stats.source.k,nRenameSuggestions:i.stats.nRenameSuggestions,timeBeforeFirstInputFieldEdit:i.stats.timeBeforeFirstInputFieldEdit,wantsPreview:i.wantsPreview,nRenameSuggestionsInvocations:i.stats.nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:i.stats.hadAutomaticRenameSuggestionsInvocation};this._telemetryService.publicLog2("renameInvokedEvent",n)}};oe.ID="editor.contrib.renameController",oe=ee=te([ie(1,x._Y),ie(2,M.Ot),ie(3,u.nu),ie(4,I.N8),ie(5,R.rr),ie(6,b.U),ie(7,f.u),ie(8,L.k)],oe);class re extends h.ks{constructor(){super({id:"editor.action.rename",label:S.kg("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:N.M$.and(_.R.writable,_.R.hasRenameProvider),kbOpts:{kbExpr:_.R.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const i=e.get(g.T),[n,s]=Array.isArray(t)&&t||[void 0,void 0];return c.r.isUri(n)&&p.y.isIPosition(s)?i.openCodeEditor({resource:n},i.getActiveCodeEditor()).then((e=>{e&&(e.setPosition(s),e.invokeWithinContext((t=>(this.reportTelemetry(t,e),this.run(t,e)))))}),r.dz):super.runCommand(e,t)}run(e,t){const i=e.get(R.rr),n=oe.get(t);return n?(i.trace("[RenameAction] got controller, running..."),n.run()):(i.trace("[RenameAction] returning early - controller missing"),Promise.resolve())}}(0,h.HW)(oe.ID,oe,4),(0,h.Fl)(re);const ae=h.DX.bindToContribution(oe.get);(0,h.E_)(new ae({id:"acceptRenameInput",precondition:z,handler:e=>e.acceptRenameInput(!1),kbOpts:{weight:199,kbExpr:N.M$.and(_.R.focus,N.M$.not("isComposing")),primary:3}})),(0,h.E_)(new ae({id:"acceptRenameInputWithPreview",precondition:N.M$.and(z,N.M$.has("config.editor.rename.enablePreview")),handler:e=>e.acceptRenameInput(!0),kbOpts:{weight:199,kbExpr:N.M$.and(_.R.focus,N.M$.not("isComposing")),primary:2051}})),(0,h.E_)(new ae({id:"cancelRenameInput",precondition:z,handler:e=>e.cancelRenameInput(),kbOpts:{weight:199,kbExpr:_.R.focus,primary:9,secondary:[1033]}})),(0,k.ug)(class extends k.L{constructor(){super({id:"focusNextRenameSuggestion",title:{...S.aS("focusNextRenameSuggestion","Focus Next Rename Suggestion")},precondition:z,keybinding:[{primary:18,weight:199}]})}run(e){const t=e.get(g.T).getFocusedCodeEditor();if(!t)return;const i=oe.get(t);i&&i.focusNextRenameSuggestion()}}),(0,k.ug)(class extends k.L{constructor(){super({id:"focusPreviousRenameSuggestion",title:{...S.aS("focusPreviousRenameSuggestion","Focus Previous Rename Suggestion")},precondition:z,keybinding:[{primary:16,weight:199}]})}run(e){const t=e.get(g.T).getFocusedCodeEditor();if(!t)return;const i=oe.get(t);i&&i.focusPreviousRenameSuggestion()}}),(0,h.ke)("_executeDocumentRenameProvider",(function(e,t,i){for(var n=arguments.length,s=new Array(n>3?n-3:0),o=3;o<n;o++)s[o-3]=arguments[o];const[r]=s;(0,l.j)("string"===typeof r);const{renameProvider:a}=e.get(f.u);return se(a,t,i,r)})),(0,h.ke)("_executePrepareRename",(async function(e,t,i){const{renameProvider:n}=e.get(f.u),s=new ne(t,i,n),r=await s.resolveRenameLocation(o.XO.None);if(null===r||void 0===r?void 0:r.rejectReason)throw new Error(r.rejectReason);return r})),E.O.as(w.Fd.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:S.kg("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}})}}]);
//# sourceMappingURL=monaco-editor-vendor.c7e29bf6.d54bd0b6.js.map