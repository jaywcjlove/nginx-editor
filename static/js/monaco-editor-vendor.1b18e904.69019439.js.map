{"version":3,"file":"static/js/monaco-editor-vendor.1b18e904.69019439.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/contrib/fontZoom/browser/fontZoom.js","../node_modules/monaco-editor/esm/vs/editor/contrib/format/browser/format.js","../node_modules/monaco-editor/esm/vs/editor/contrib/format/browser/formatActions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/format/browser/formattingEdit.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/markerNavigationService.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoErrorWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoError.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/symbolNavigation.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/goToCommands.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/goToSymbol.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/clickLinkGesture.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/goToDefinitionAtPosition.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesTree.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/referencesModel.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorZoom } from '../../../common/config/editorZoom.js';\nimport * as nls from '../../../../nls.js';\nclass EditorFontZoomIn extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomIn',\n            label: nls.localize('EditorFontZoomIn.label', \"Editor Font Zoom In\"),\n            alias: 'Editor Font Zoom In',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() + 1);\n    }\n}\nclass EditorFontZoomOut extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomOut',\n            label: nls.localize('EditorFontZoomOut.label', \"Editor Font Zoom Out\"),\n            alias: 'Editor Font Zoom Out',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() - 1);\n    }\n}\nclass EditorFontZoomReset extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomReset',\n            label: nls.localize('EditorFontZoomReset.label', \"Editor Font Zoom Reset\"),\n            alias: 'Editor Font Zoom Reset',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(0);\n    }\n}\nregisterEditorAction(EditorFontZoomIn);\nregisterEditorAction(EditorFontZoomOut);\nregisterEditorAction(EditorFontZoomReset);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { asArray, isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource, TextModelCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { isCodeEditor } from '../../../browser/editorBrowser.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { FormattingEdit } from './formattingEdit.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ExtensionIdentifierSet } from '../../../../platform/extensions/common/extensions.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nexport function alertFormattingEdits(edits) {\n    edits = edits.filter(edit => edit.range);\n    if (!edits.length) {\n        return;\n    }\n    let { range } = edits[0];\n    for (let i = 1; i < edits.length; i++) {\n        range = Range.plusRange(range, edits[i].range);\n    }\n    const { startLineNumber, endLineNumber } = range;\n    if (startLineNumber === endLineNumber) {\n        if (edits.length === 1) {\n            alert(nls.localize('hint11', \"Made 1 formatting edit on line {0}\", startLineNumber));\n        }\n        else {\n            alert(nls.localize('hintn1', \"Made {0} formatting edits on line {1}\", edits.length, startLineNumber));\n        }\n    }\n    else {\n        if (edits.length === 1) {\n            alert(nls.localize('hint1n', \"Made 1 formatting edit between lines {0} and {1}\", startLineNumber, endLineNumber));\n        }\n        else {\n            alert(nls.localize('hintnn', \"Made {0} formatting edits between lines {1} and {2}\", edits.length, startLineNumber, endLineNumber));\n        }\n    }\n}\nexport function getRealAndSyntheticDocumentFormattersOrdered(documentFormattingEditProvider, documentRangeFormattingEditProvider, model) {\n    const result = [];\n    const seen = new ExtensionIdentifierSet();\n    // (1) add all document formatter\n    const docFormatter = documentFormattingEditProvider.ordered(model);\n    for (const formatter of docFormatter) {\n        result.push(formatter);\n        if (formatter.extensionId) {\n            seen.add(formatter.extensionId);\n        }\n    }\n    // (2) add all range formatter as document formatter (unless the same extension already did that)\n    const rangeFormatter = documentRangeFormattingEditProvider.ordered(model);\n    for (const formatter of rangeFormatter) {\n        if (formatter.extensionId) {\n            if (seen.has(formatter.extensionId)) {\n                continue;\n            }\n            seen.add(formatter.extensionId);\n        }\n        result.push({\n            displayName: formatter.displayName,\n            extensionId: formatter.extensionId,\n            provideDocumentFormattingEdits(model, options, token) {\n                return formatter.provideDocumentRangeFormattingEdits(model, model.getFullModelRange(), options, token);\n            }\n        });\n    }\n    return result;\n}\nexport class FormattingConflicts {\n    static setFormatterSelector(selector) {\n        const remove = FormattingConflicts._selectors.unshift(selector);\n        return { dispose: remove };\n    }\n    static select(formatter, document, mode) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (formatter.length === 0) {\n                return undefined;\n            }\n            const selector = Iterable.first(FormattingConflicts._selectors);\n            if (selector) {\n                return yield selector(formatter, document, mode);\n            }\n            return undefined;\n        });\n    }\n}\nFormattingConflicts._selectors = new LinkedList();\nexport function formatDocumentRangesWithSelectedProvider(accessor, editorOrModel, rangeOrRanges, mode, progress, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const instaService = accessor.get(IInstantiationService);\n        const { documentRangeFormattingEditProvider: documentRangeFormattingEditProviderRegistry } = accessor.get(ILanguageFeaturesService);\n        const model = isCodeEditor(editorOrModel) ? editorOrModel.getModel() : editorOrModel;\n        const provider = documentRangeFormattingEditProviderRegistry.ordered(model);\n        const selected = yield FormattingConflicts.select(provider, model, mode);\n        if (selected) {\n            progress.report(selected);\n            yield instaService.invokeFunction(formatDocumentRangesWithProvider, selected, editorOrModel, rangeOrRanges, token);\n        }\n    });\n}\nexport function formatDocumentRangesWithProvider(accessor, provider, editorOrModel, rangeOrRanges, token) {\n    var _a, _b;\n    return __awaiter(this, void 0, void 0, function* () {\n        const workerService = accessor.get(IEditorWorkerService);\n        const logService = accessor.get(ILogService);\n        let model;\n        let cts;\n        if (isCodeEditor(editorOrModel)) {\n            model = editorOrModel.getModel();\n            cts = new EditorStateCancellationTokenSource(editorOrModel, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */, undefined, token);\n        }\n        else {\n            model = editorOrModel;\n            cts = new TextModelCancellationTokenSource(editorOrModel, token);\n        }\n        // make sure that ranges don't overlap nor touch each other\n        const ranges = [];\n        let len = 0;\n        for (const range of asArray(rangeOrRanges).sort(Range.compareRangesUsingStarts)) {\n            if (len > 0 && Range.areIntersectingOrTouching(ranges[len - 1], range)) {\n                ranges[len - 1] = Range.fromPositions(ranges[len - 1].getStartPosition(), range.getEndPosition());\n            }\n            else {\n                len = ranges.push(range);\n            }\n        }\n        const computeEdits = (range) => __awaiter(this, void 0, void 0, function* () {\n            var _c, _d;\n            logService.trace(`[format][provideDocumentRangeFormattingEdits] (request)`, (_c = provider.extensionId) === null || _c === void 0 ? void 0 : _c.value, range);\n            const result = (yield provider.provideDocumentRangeFormattingEdits(model, range, model.getFormattingOptions(), cts.token)) || [];\n            logService.trace(`[format][provideDocumentRangeFormattingEdits] (response)`, (_d = provider.extensionId) === null || _d === void 0 ? void 0 : _d.value, result);\n            return result;\n        });\n        const hasIntersectingEdit = (a, b) => {\n            if (!a.length || !b.length) {\n                return false;\n            }\n            // quick exit if the list of ranges are completely unrelated [O(n)]\n            const mergedA = a.reduce((acc, val) => { return Range.plusRange(acc, val.range); }, a[0].range);\n            if (!b.some(x => { return Range.intersectRanges(mergedA, x.range); })) {\n                return false;\n            }\n            // fallback to a complete check [O(n^2)]\n            for (const edit of a) {\n                for (const otherEdit of b) {\n                    if (Range.intersectRanges(edit.range, otherEdit.range)) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        };\n        const allEdits = [];\n        const rawEditsList = [];\n        try {\n            if (typeof provider.provideDocumentRangesFormattingEdits === 'function') {\n                logService.trace(`[format][provideDocumentRangeFormattingEdits] (request)`, (_a = provider.extensionId) === null || _a === void 0 ? void 0 : _a.value, ranges);\n                const result = (yield provider.provideDocumentRangesFormattingEdits(model, ranges, model.getFormattingOptions(), cts.token)) || [];\n                logService.trace(`[format][provideDocumentRangeFormattingEdits] (response)`, (_b = provider.extensionId) === null || _b === void 0 ? void 0 : _b.value, result);\n                rawEditsList.push(result);\n            }\n            else {\n                for (const range of ranges) {\n                    if (cts.token.isCancellationRequested) {\n                        return true;\n                    }\n                    rawEditsList.push(yield computeEdits(range));\n                }\n                for (let i = 0; i < ranges.length; ++i) {\n                    for (let j = i + 1; j < ranges.length; ++j) {\n                        if (cts.token.isCancellationRequested) {\n                            return true;\n                        }\n                        if (hasIntersectingEdit(rawEditsList[i], rawEditsList[j])) {\n                            // Merge ranges i and j into a single range, recompute the associated edits\n                            const mergedRange = Range.plusRange(ranges[i], ranges[j]);\n                            const edits = yield computeEdits(mergedRange);\n                            ranges.splice(j, 1);\n                            ranges.splice(i, 1);\n                            ranges.push(mergedRange);\n                            rawEditsList.splice(j, 1);\n                            rawEditsList.splice(i, 1);\n                            rawEditsList.push(edits);\n                            // Restart scanning\n                            i = 0;\n                            j = 0;\n                        }\n                    }\n                }\n            }\n            for (const rawEdits of rawEditsList) {\n                if (cts.token.isCancellationRequested) {\n                    return true;\n                }\n                const minimalEdits = yield workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n                if (minimalEdits) {\n                    allEdits.push(...minimalEdits);\n                }\n            }\n        }\n        finally {\n            cts.dispose();\n        }\n        if (allEdits.length === 0) {\n            return false;\n        }\n        if (isCodeEditor(editorOrModel)) {\n            // use editor to apply edits\n            FormattingEdit.execute(editorOrModel, allEdits, true);\n            alertFormattingEdits(allEdits);\n            editorOrModel.revealPositionInCenterIfOutsideViewport(editorOrModel.getPosition(), 1 /* ScrollType.Immediate */);\n        }\n        else {\n            // use model to apply edits\n            const [{ range }] = allEdits;\n            const initialSelection = new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\n            model.pushEditOperations([initialSelection], allEdits.map(edit => {\n                return {\n                    text: edit.text,\n                    range: Range.lift(edit.range),\n                    forceMoveMarkers: true\n                };\n            }), undoEdits => {\n                for (const { range } of undoEdits) {\n                    if (Range.areIntersectingOrTouching(range, initialSelection)) {\n                        return [new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn)];\n                    }\n                }\n                return null;\n            });\n        }\n        return true;\n    });\n}\nexport function formatDocumentWithSelectedProvider(accessor, editorOrModel, mode, progress, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const instaService = accessor.get(IInstantiationService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const model = isCodeEditor(editorOrModel) ? editorOrModel.getModel() : editorOrModel;\n        const provider = getRealAndSyntheticDocumentFormattersOrdered(languageFeaturesService.documentFormattingEditProvider, languageFeaturesService.documentRangeFormattingEditProvider, model);\n        const selected = yield FormattingConflicts.select(provider, model, mode);\n        if (selected) {\n            progress.report(selected);\n            yield instaService.invokeFunction(formatDocumentWithProvider, selected, editorOrModel, mode, token);\n        }\n    });\n}\nexport function formatDocumentWithProvider(accessor, provider, editorOrModel, mode, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const workerService = accessor.get(IEditorWorkerService);\n        let model;\n        let cts;\n        if (isCodeEditor(editorOrModel)) {\n            model = editorOrModel.getModel();\n            cts = new EditorStateCancellationTokenSource(editorOrModel, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */, undefined, token);\n        }\n        else {\n            model = editorOrModel;\n            cts = new TextModelCancellationTokenSource(editorOrModel, token);\n        }\n        let edits;\n        try {\n            const rawEdits = yield provider.provideDocumentFormattingEdits(model, model.getFormattingOptions(), cts.token);\n            edits = yield workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n            if (cts.token.isCancellationRequested) {\n                return true;\n            }\n        }\n        finally {\n            cts.dispose();\n        }\n        if (!edits || edits.length === 0) {\n            return false;\n        }\n        if (isCodeEditor(editorOrModel)) {\n            // use editor to apply edits\n            FormattingEdit.execute(editorOrModel, edits, mode !== 2 /* FormattingMode.Silent */);\n            if (mode !== 2 /* FormattingMode.Silent */) {\n                alertFormattingEdits(edits);\n                editorOrModel.revealPositionInCenterIfOutsideViewport(editorOrModel.getPosition(), 1 /* ScrollType.Immediate */);\n            }\n        }\n        else {\n            // use model to apply edits\n            const [{ range }] = edits;\n            const initialSelection = new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\n            model.pushEditOperations([initialSelection], edits.map(edit => {\n                return {\n                    text: edit.text,\n                    range: Range.lift(edit.range),\n                    forceMoveMarkers: true\n                };\n            }), undoEdits => {\n                for (const { range } of undoEdits) {\n                    if (Range.areIntersectingOrTouching(range, initialSelection)) {\n                        return [new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn)];\n                    }\n                }\n                return null;\n            });\n        }\n        return true;\n    });\n}\nexport function getDocumentRangeFormattingEditsUntilResult(workerService, languageFeaturesService, model, range, options, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = languageFeaturesService.documentRangeFormattingEditProvider.ordered(model);\n        for (const provider of providers) {\n            const rawEdits = yield Promise.resolve(provider.provideDocumentRangeFormattingEdits(model, range, options, token)).catch(onUnexpectedExternalError);\n            if (isNonEmptyArray(rawEdits)) {\n                return yield workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n            }\n        }\n        return undefined;\n    });\n}\nexport function getDocumentFormattingEditsUntilResult(workerService, languageFeaturesService, model, options, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = getRealAndSyntheticDocumentFormattersOrdered(languageFeaturesService.documentFormattingEditProvider, languageFeaturesService.documentRangeFormattingEditProvider, model);\n        for (const provider of providers) {\n            const rawEdits = yield Promise.resolve(provider.provideDocumentFormattingEdits(model, options, token)).catch(onUnexpectedExternalError);\n            if (isNonEmptyArray(rawEdits)) {\n                return yield workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n            }\n        }\n        return undefined;\n    });\n}\nexport function getOnTypeFormattingEdits(workerService, languageFeaturesService, model, position, ch, options, token) {\n    const providers = languageFeaturesService.onTypeFormattingEditProvider.ordered(model);\n    if (providers.length === 0) {\n        return Promise.resolve(undefined);\n    }\n    if (providers[0].autoFormatTriggerCharacters.indexOf(ch) < 0) {\n        return Promise.resolve(undefined);\n    }\n    return Promise.resolve(providers[0].provideOnTypeFormattingEdits(model, position, ch, options, token)).catch(onUnexpectedExternalError).then(edits => {\n        return workerService.computeMoreMinimalEdits(model.uri, edits);\n    });\n}\nCommandsRegistry.registerCommand('_executeFormatRangeProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, range, options] = args;\n        assertType(URI.isUri(resource));\n        assertType(Range.isIRange(range));\n        const resolverService = accessor.get(ITextModelService);\n        const workerService = accessor.get(IEditorWorkerService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const reference = yield resolverService.createModelReference(resource);\n        try {\n            return getDocumentRangeFormattingEditsUntilResult(workerService, languageFeaturesService, reference.object.textEditorModel, Range.lift(range), options, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\nCommandsRegistry.registerCommand('_executeFormatDocumentProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, options] = args;\n        assertType(URI.isUri(resource));\n        const resolverService = accessor.get(ITextModelService);\n        const workerService = accessor.get(IEditorWorkerService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const reference = yield resolverService.createModelReference(resource);\n        try {\n            return getDocumentFormattingEditsUntilResult(workerService, languageFeaturesService, reference.object.textEditorModel, options, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\nCommandsRegistry.registerCommand('_executeFormatOnTypeProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, position, ch, options] = args;\n        assertType(URI.isUri(resource));\n        assertType(Position.isIPosition(position));\n        assertType(typeof ch === 'string');\n        const resolverService = accessor.get(ITextModelService);\n        const workerService = accessor.get(IEditorWorkerService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const reference = yield resolverService.createModelReference(resource);\n        try {\n            return getOnTypeFormattingEdits(workerService, languageFeaturesService, reference.object.textEditorModel, Position.lift(position), ch, options, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { alertFormattingEdits, formatDocumentRangesWithSelectedProvider, formatDocumentWithSelectedProvider, getOnTypeFormattingEdits } from './format.js';\nimport { FormattingEdit } from './formattingEdit.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IEditorProgressService, Progress } from '../../../../platform/progress/common/progress.js';\nlet FormatOnType = class FormatOnType {\n    constructor(_editor, _languageFeaturesService, _workerService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._workerService = _workerService;\n        this._disposables = new DisposableStore();\n        this._sessionDisposables = new DisposableStore();\n        this._disposables.add(_languageFeaturesService.onTypeFormattingEditProvider.onDidChange(this._update, this));\n        this._disposables.add(_editor.onDidChangeModel(() => this._update()));\n        this._disposables.add(_editor.onDidChangeModelLanguage(() => this._update()));\n        this._disposables.add(_editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(56 /* EditorOption.formatOnType */)) {\n                this._update();\n            }\n        }));\n        this._update();\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._sessionDisposables.dispose();\n    }\n    _update() {\n        // clean up\n        this._sessionDisposables.clear();\n        // we are disabled\n        if (!this._editor.getOption(56 /* EditorOption.formatOnType */)) {\n            return;\n        }\n        // no model\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        // no support\n        const [support] = this._languageFeaturesService.onTypeFormattingEditProvider.ordered(model);\n        if (!support || !support.autoFormatTriggerCharacters) {\n            return;\n        }\n        // register typing listeners that will trigger the format\n        const triggerChars = new CharacterSet();\n        for (const ch of support.autoFormatTriggerCharacters) {\n            triggerChars.add(ch.charCodeAt(0));\n        }\n        this._sessionDisposables.add(this._editor.onDidType((text) => {\n            const lastCharCode = text.charCodeAt(text.length - 1);\n            if (triggerChars.has(lastCharCode)) {\n                this._trigger(String.fromCharCode(lastCharCode));\n            }\n        }));\n    }\n    _trigger(ch) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (this._editor.getSelections().length > 1 || !this._editor.getSelection().isEmpty()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const position = this._editor.getPosition();\n        const cts = new CancellationTokenSource();\n        // install a listener that checks if edits happens before the\n        // position on which we format right now. If so, we won't\n        // apply the format edits\n        const unbind = this._editor.onDidChangeModelContent((e) => {\n            if (e.isFlush) {\n                // a model.setValue() was called\n                // cancel only once\n                cts.cancel();\n                unbind.dispose();\n                return;\n            }\n            for (let i = 0, len = e.changes.length; i < len; i++) {\n                const change = e.changes[i];\n                if (change.range.endLineNumber <= position.lineNumber) {\n                    // cancel only once\n                    cts.cancel();\n                    unbind.dispose();\n                    return;\n                }\n            }\n        });\n        getOnTypeFormattingEdits(this._workerService, this._languageFeaturesService, model, position, ch, model.getFormattingOptions(), cts.token).then(edits => {\n            if (cts.token.isCancellationRequested) {\n                return;\n            }\n            if (isNonEmptyArray(edits)) {\n                FormattingEdit.execute(this._editor, edits, true);\n                alertFormattingEdits(edits);\n            }\n        }).finally(() => {\n            unbind.dispose();\n        });\n    }\n};\nFormatOnType.ID = 'editor.contrib.autoFormat';\nFormatOnType = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IEditorWorkerService)\n], FormatOnType);\nexport { FormatOnType };\nlet FormatOnPaste = class FormatOnPaste {\n    constructor(editor, _languageFeaturesService, _instantiationService) {\n        this.editor = editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._instantiationService = _instantiationService;\n        this._callOnDispose = new DisposableStore();\n        this._callOnModel = new DisposableStore();\n        this._callOnDispose.add(editor.onDidChangeConfiguration(() => this._update()));\n        this._callOnDispose.add(editor.onDidChangeModel(() => this._update()));\n        this._callOnDispose.add(editor.onDidChangeModelLanguage(() => this._update()));\n        this._callOnDispose.add(_languageFeaturesService.documentRangeFormattingEditProvider.onDidChange(this._update, this));\n    }\n    dispose() {\n        this._callOnDispose.dispose();\n        this._callOnModel.dispose();\n    }\n    _update() {\n        // clean up\n        this._callOnModel.clear();\n        // we are disabled\n        if (!this.editor.getOption(55 /* EditorOption.formatOnPaste */)) {\n            return;\n        }\n        // no model\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        // no formatter\n        if (!this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())) {\n            return;\n        }\n        this._callOnModel.add(this.editor.onDidPaste(({ range }) => this._trigger(range)));\n    }\n    _trigger(range) {\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        if (this.editor.getSelections().length > 1) {\n            return;\n        }\n        this._instantiationService.invokeFunction(formatDocumentRangesWithSelectedProvider, this.editor, range, 2 /* FormattingMode.Silent */, Progress.None, CancellationToken.None).catch(onUnexpectedError);\n    }\n};\nFormatOnPaste.ID = 'editor.contrib.formatOnPaste';\nFormatOnPaste = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IInstantiationService)\n], FormatOnPaste);\nclass FormatDocumentAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.formatDocument',\n            label: nls.localize('formatDocument.label', \"Format Document\"),\n            alias: 'Format Document',\n            precondition: ContextKeyExpr.and(EditorContextKeys.notInCompositeEditor, EditorContextKeys.writable, EditorContextKeys.hasDocumentFormattingProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 36 /* KeyCode.KeyF */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 39 /* KeyCode.KeyI */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.3\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (editor.hasModel()) {\n                const instaService = accessor.get(IInstantiationService);\n                const progressService = accessor.get(IEditorProgressService);\n                yield progressService.showWhile(instaService.invokeFunction(formatDocumentWithSelectedProvider, editor, 1 /* FormattingMode.Explicit */, Progress.None, CancellationToken.None), 250);\n            }\n        });\n    }\n}\nclass FormatSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.formatSelection',\n            label: nls.localize('formatSelection.label', \"Format Selection\"),\n            alias: 'Format Selection',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasDocumentSelectionFormattingProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 36 /* KeyCode.KeyF */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                when: EditorContextKeys.hasNonEmptySelection,\n                group: '1_modification',\n                order: 1.31\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.hasModel()) {\n                return;\n            }\n            const instaService = accessor.get(IInstantiationService);\n            const model = editor.getModel();\n            const ranges = editor.getSelections().map(range => {\n                return range.isEmpty()\n                    ? new Range(range.startLineNumber, 1, range.startLineNumber, model.getLineMaxColumn(range.startLineNumber))\n                    : range;\n            });\n            const progressService = accessor.get(IEditorProgressService);\n            yield progressService.showWhile(instaService.invokeFunction(formatDocumentRangesWithSelectedProvider, editor, ranges, 1 /* FormattingMode.Explicit */, Progress.None, CancellationToken.None), 250);\n        });\n    }\n}\nregisterEditorContribution(FormatOnType.ID, FormatOnType, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorContribution(FormatOnPaste.ID, FormatOnPaste, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(FormatDocumentAction);\nregisterEditorAction(FormatSelectionAction);\n// this is the old format action that does both (format document OR format selection)\n// and we keep it here such that existing keybinding configurations etc will still work\nCommandsRegistry.registerCommand('editor.action.format', (accessor) => __awaiter(void 0, void 0, void 0, function* () {\n    const editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n    if (!editor || !editor.hasModel()) {\n        return;\n    }\n    const commandService = accessor.get(ICommandService);\n    if (editor.getSelection().isEmpty()) {\n        yield commandService.executeCommand('editor.action.formatDocument');\n    }\n    else {\n        yield commandService.executeCommand('editor.action.formatSelection');\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nexport class FormattingEdit {\n    static _handleEolEdits(editor, edits) {\n        let newEol = undefined;\n        const singleEdits = [];\n        for (const edit of edits) {\n            if (typeof edit.eol === 'number') {\n                newEol = edit.eol;\n            }\n            if (edit.range && typeof edit.text === 'string') {\n                singleEdits.push(edit);\n            }\n        }\n        if (typeof newEol === 'number') {\n            if (editor.hasModel()) {\n                editor.getModel().pushEOL(newEol);\n            }\n        }\n        return singleEdits;\n    }\n    static _isFullModelReplaceEdit(editor, edit) {\n        if (!editor.hasModel()) {\n            return false;\n        }\n        const model = editor.getModel();\n        const editRange = model.validateRange(edit.range);\n        const fullModelRange = model.getFullModelRange();\n        return fullModelRange.equalsRange(editRange);\n    }\n    static execute(editor, _edits, addUndoStops) {\n        if (addUndoStops) {\n            editor.pushUndoStop();\n        }\n        const scrollState = StableEditorScrollState.capture(editor);\n        const edits = FormattingEdit._handleEolEdits(editor, _edits);\n        if (edits.length === 1 && FormattingEdit._isFullModelReplaceEdit(editor, edits[0])) {\n            // We use replace semantics and hope that markers stay put...\n            editor.executeEdits('formatEditsCommand', edits.map(edit => EditOperation.replace(Range.lift(edit.range), edit.text)));\n        }\n        else {\n            editor.executeEdits('formatEditsCommand', edits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n        }\n        if (addUndoStops) {\n            editor.pushUndoStop();\n        }\n        scrollState.restoreRelativeVerticalPositionOfCursor(editor);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { binarySearch } from '../../../../base/common/arrays.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { compare } from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport class MarkerCoordinate {\n    constructor(marker, index, total) {\n        this.marker = marker;\n        this.index = index;\n        this.total = total;\n    }\n}\nlet MarkerList = class MarkerList {\n    constructor(resourceFilter, _markerService, _configService) {\n        this._markerService = _markerService;\n        this._configService = _configService;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._dispoables = new DisposableStore();\n        this._markers = [];\n        this._nextIdx = -1;\n        if (URI.isUri(resourceFilter)) {\n            this._resourceFilter = uri => uri.toString() === resourceFilter.toString();\n        }\n        else if (resourceFilter) {\n            this._resourceFilter = resourceFilter;\n        }\n        const compareOrder = this._configService.getValue('problems.sortOrder');\n        const compareMarker = (a, b) => {\n            let res = compare(a.resource.toString(), b.resource.toString());\n            if (res === 0) {\n                if (compareOrder === 'position') {\n                    res = Range.compareRangesUsingStarts(a, b) || MarkerSeverity.compare(a.severity, b.severity);\n                }\n                else {\n                    res = MarkerSeverity.compare(a.severity, b.severity) || Range.compareRangesUsingStarts(a, b);\n                }\n            }\n            return res;\n        };\n        const updateMarker = () => {\n            this._markers = this._markerService.read({\n                resource: URI.isUri(resourceFilter) ? resourceFilter : undefined,\n                severities: MarkerSeverity.Error | MarkerSeverity.Warning | MarkerSeverity.Info\n            });\n            if (typeof resourceFilter === 'function') {\n                this._markers = this._markers.filter(m => this._resourceFilter(m.resource));\n            }\n            this._markers.sort(compareMarker);\n        };\n        updateMarker();\n        this._dispoables.add(_markerService.onMarkerChanged(uris => {\n            if (!this._resourceFilter || uris.some(uri => this._resourceFilter(uri))) {\n                updateMarker();\n                this._nextIdx = -1;\n                this._onDidChange.fire();\n            }\n        }));\n    }\n    dispose() {\n        this._dispoables.dispose();\n        this._onDidChange.dispose();\n    }\n    matches(uri) {\n        if (!this._resourceFilter && !uri) {\n            return true;\n        }\n        if (!this._resourceFilter || !uri) {\n            return false;\n        }\n        return this._resourceFilter(uri);\n    }\n    get selected() {\n        const marker = this._markers[this._nextIdx];\n        return marker && new MarkerCoordinate(marker, this._nextIdx + 1, this._markers.length);\n    }\n    _initIdx(model, position, fwd) {\n        let found = false;\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === model.uri.toString());\n        if (idx < 0) {\n            idx = binarySearch(this._markers, { resource: model.uri }, (a, b) => compare(a.resource.toString(), b.resource.toString()));\n            if (idx < 0) {\n                idx = ~idx;\n            }\n        }\n        for (let i = idx; i < this._markers.length; i++) {\n            let range = Range.lift(this._markers[i]);\n            if (range.isEmpty()) {\n                const word = model.getWordAtPosition(range.getStartPosition());\n                if (word) {\n                    range = new Range(range.startLineNumber, word.startColumn, range.startLineNumber, word.endColumn);\n                }\n            }\n            if (position && (range.containsPosition(position) || position.isBeforeOrEqual(range.getStartPosition()))) {\n                this._nextIdx = i;\n                found = true;\n                break;\n            }\n            if (this._markers[i].resource.toString() !== model.uri.toString()) {\n                break;\n            }\n        }\n        if (!found) {\n            // after the last change\n            this._nextIdx = fwd ? 0 : this._markers.length - 1;\n        }\n        if (this._nextIdx < 0) {\n            this._nextIdx = this._markers.length - 1;\n        }\n    }\n    resetIndex() {\n        this._nextIdx = -1;\n    }\n    move(fwd, model, position) {\n        if (this._markers.length === 0) {\n            return false;\n        }\n        const oldIdx = this._nextIdx;\n        if (this._nextIdx === -1) {\n            this._initIdx(model, position, fwd);\n        }\n        else if (fwd) {\n            this._nextIdx = (this._nextIdx + 1) % this._markers.length;\n        }\n        else if (!fwd) {\n            this._nextIdx = (this._nextIdx - 1 + this._markers.length) % this._markers.length;\n        }\n        if (oldIdx !== this._nextIdx) {\n            return true;\n        }\n        return false;\n    }\n    find(uri, position) {\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === uri.toString());\n        if (idx < 0) {\n            return undefined;\n        }\n        for (; idx < this._markers.length; idx++) {\n            if (Range.containsPosition(this._markers[idx], position)) {\n                return new MarkerCoordinate(this._markers[idx], idx + 1, this._markers.length);\n            }\n        }\n        return undefined;\n    }\n};\nMarkerList = __decorate([\n    __param(1, IMarkerService),\n    __param(2, IConfigurationService)\n], MarkerList);\nexport { MarkerList };\nexport const IMarkerNavigationService = createDecorator('IMarkerNavigationService');\nlet MarkerNavigationService = class MarkerNavigationService {\n    constructor(_markerService, _configService) {\n        this._markerService = _markerService;\n        this._configService = _configService;\n        this._provider = new LinkedList();\n    }\n    getMarkerList(resource) {\n        for (const provider of this._provider) {\n            const result = provider.getMarkerList(resource);\n            if (result) {\n                return result;\n            }\n        }\n        // default\n        return new MarkerList(resource, this._markerService, this._configService);\n    }\n};\nMarkerNavigationService = __decorate([\n    __param(0, IMarkerService),\n    __param(1, IConfigurationService)\n], MarkerNavigationService);\nregisterSingleton(IMarkerNavigationService, MarkerNavigationService, 1 /* InstantiationType.Delayed */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar MarkerNavigationWidget_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { splitLines } from '../../../../base/common/strings.js';\nimport './media/gotoErrorWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { peekViewTitleForeground, peekViewTitleInfoForeground, PeekViewWidget } from '../../peekView/browser/peekView.js';\nimport * as nls from '../../../../nls.js';\nimport { createAndFillInActionBarActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { SeverityIcon } from '../../../../platform/severityIcon/browser/severityIcon.js';\nimport { contrastBorder, editorBackground, editorErrorBorder, editorErrorForeground, editorInfoBorder, editorInfoForeground, editorWarningBorder, editorWarningForeground, oneOf, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nclass MessageWidget {\n    constructor(parent, editor, onRelatedInformation, _openerService, _labelService) {\n        this._openerService = _openerService;\n        this._labelService = _labelService;\n        this._lines = 0;\n        this._longestLineLength = 0;\n        this._relatedDiagnostics = new WeakMap();\n        this._disposables = new DisposableStore();\n        this._editor = editor;\n        const domNode = document.createElement('div');\n        domNode.className = 'descriptioncontainer';\n        this._messageBlock = document.createElement('div');\n        this._messageBlock.classList.add('message');\n        this._messageBlock.setAttribute('aria-live', 'assertive');\n        this._messageBlock.setAttribute('role', 'alert');\n        domNode.appendChild(this._messageBlock);\n        this._relatedBlock = document.createElement('div');\n        domNode.appendChild(this._relatedBlock);\n        this._disposables.add(dom.addStandardDisposableListener(this._relatedBlock, 'click', event => {\n            event.preventDefault();\n            const related = this._relatedDiagnostics.get(event.target);\n            if (related) {\n                onRelatedInformation(related);\n            }\n        }));\n        this._scrollable = new ScrollableElement(domNode, {\n            horizontal: 1 /* ScrollbarVisibility.Auto */,\n            vertical: 1 /* ScrollbarVisibility.Auto */,\n            useShadows: false,\n            horizontalScrollbarSize: 6,\n            verticalScrollbarSize: 6\n        });\n        parent.appendChild(this._scrollable.getDomNode());\n        this._disposables.add(this._scrollable.onScroll(e => {\n            domNode.style.left = `-${e.scrollLeft}px`;\n            domNode.style.top = `-${e.scrollTop}px`;\n        }));\n        this._disposables.add(this._scrollable);\n    }\n    dispose() {\n        dispose(this._disposables);\n    }\n    update(marker) {\n        const { source, message, relatedInformation, code } = marker;\n        let sourceAndCodeLength = ((source === null || source === void 0 ? void 0 : source.length) || 0) + '()'.length;\n        if (code) {\n            if (typeof code === 'string') {\n                sourceAndCodeLength += code.length;\n            }\n            else {\n                sourceAndCodeLength += code.value.length;\n            }\n        }\n        const lines = splitLines(message);\n        this._lines = lines.length;\n        this._longestLineLength = 0;\n        for (const line of lines) {\n            this._longestLineLength = Math.max(line.length + sourceAndCodeLength, this._longestLineLength);\n        }\n        dom.clearNode(this._messageBlock);\n        this._messageBlock.setAttribute('aria-label', this.getAriaLabel(marker));\n        this._editor.applyFontInfo(this._messageBlock);\n        let lastLineElement = this._messageBlock;\n        for (const line of lines) {\n            lastLineElement = document.createElement('div');\n            lastLineElement.innerText = line;\n            if (line === '') {\n                lastLineElement.style.height = this._messageBlock.style.lineHeight;\n            }\n            this._messageBlock.appendChild(lastLineElement);\n        }\n        if (source || code) {\n            const detailsElement = document.createElement('span');\n            detailsElement.classList.add('details');\n            lastLineElement.appendChild(detailsElement);\n            if (source) {\n                const sourceElement = document.createElement('span');\n                sourceElement.innerText = source;\n                sourceElement.classList.add('source');\n                detailsElement.appendChild(sourceElement);\n            }\n            if (code) {\n                if (typeof code === 'string') {\n                    const codeElement = document.createElement('span');\n                    codeElement.innerText = `(${code})`;\n                    codeElement.classList.add('code');\n                    detailsElement.appendChild(codeElement);\n                }\n                else {\n                    this._codeLink = dom.$('a.code-link');\n                    this._codeLink.setAttribute('href', `${code.target.toString()}`);\n                    this._codeLink.onclick = (e) => {\n                        this._openerService.open(code.target, { allowCommands: true });\n                        e.preventDefault();\n                        e.stopPropagation();\n                    };\n                    const codeElement = dom.append(this._codeLink, dom.$('span'));\n                    codeElement.innerText = code.value;\n                    detailsElement.appendChild(this._codeLink);\n                }\n            }\n        }\n        dom.clearNode(this._relatedBlock);\n        this._editor.applyFontInfo(this._relatedBlock);\n        if (isNonEmptyArray(relatedInformation)) {\n            const relatedInformationNode = this._relatedBlock.appendChild(document.createElement('div'));\n            relatedInformationNode.style.paddingTop = `${Math.floor(this._editor.getOption(66 /* EditorOption.lineHeight */) * 0.66)}px`;\n            this._lines += 1;\n            for (const related of relatedInformation) {\n                const container = document.createElement('div');\n                const relatedResource = document.createElement('a');\n                relatedResource.classList.add('filename');\n                relatedResource.innerText = `${this._labelService.getUriBasenameLabel(related.resource)}(${related.startLineNumber}, ${related.startColumn}): `;\n                relatedResource.title = this._labelService.getUriLabel(related.resource);\n                this._relatedDiagnostics.set(relatedResource, related);\n                const relatedMessage = document.createElement('span');\n                relatedMessage.innerText = related.message;\n                container.appendChild(relatedResource);\n                container.appendChild(relatedMessage);\n                this._lines += 1;\n                relatedInformationNode.appendChild(container);\n            }\n        }\n        const fontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\n        const scrollWidth = Math.ceil(fontInfo.typicalFullwidthCharacterWidth * this._longestLineLength * 0.75);\n        const scrollHeight = fontInfo.lineHeight * this._lines;\n        this._scrollable.setScrollDimensions({ scrollWidth, scrollHeight });\n    }\n    layout(height, width) {\n        this._scrollable.getDomNode().style.height = `${height}px`;\n        this._scrollable.getDomNode().style.width = `${width}px`;\n        this._scrollable.setScrollDimensions({ width, height });\n    }\n    getHeightInLines() {\n        return Math.min(17, this._lines);\n    }\n    getAriaLabel(marker) {\n        let severityLabel = '';\n        switch (marker.severity) {\n            case MarkerSeverity.Error:\n                severityLabel = nls.localize('Error', \"Error\");\n                break;\n            case MarkerSeverity.Warning:\n                severityLabel = nls.localize('Warning', \"Warning\");\n                break;\n            case MarkerSeverity.Info:\n                severityLabel = nls.localize('Info', \"Info\");\n                break;\n            case MarkerSeverity.Hint:\n                severityLabel = nls.localize('Hint', \"Hint\");\n                break;\n        }\n        let ariaLabel = nls.localize('marker aria', \"{0} at {1}. \", severityLabel, marker.startLineNumber + ':' + marker.startColumn);\n        const model = this._editor.getModel();\n        if (model && (marker.startLineNumber <= model.getLineCount()) && (marker.startLineNumber >= 1)) {\n            const lineContent = model.getLineContent(marker.startLineNumber);\n            ariaLabel = `${lineContent}, ${ariaLabel}`;\n        }\n        return ariaLabel;\n    }\n}\nlet MarkerNavigationWidget = MarkerNavigationWidget_1 = class MarkerNavigationWidget extends PeekViewWidget {\n    constructor(editor, _themeService, _openerService, _menuService, instantiationService, _contextKeyService, _labelService) {\n        super(editor, { showArrow: true, showFrame: true, isAccessible: true, frameWidth: 1 }, instantiationService);\n        this._themeService = _themeService;\n        this._openerService = _openerService;\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._labelService = _labelService;\n        this._callOnDispose = new DisposableStore();\n        this._onDidSelectRelatedInformation = new Emitter();\n        this.onDidSelectRelatedInformation = this._onDidSelectRelatedInformation.event;\n        this._severity = MarkerSeverity.Warning;\n        this._backgroundColor = Color.white;\n        this._applyTheme(_themeService.getColorTheme());\n        this._callOnDispose.add(_themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this.create();\n    }\n    _applyTheme(theme) {\n        this._backgroundColor = theme.getColor(editorMarkerNavigationBackground);\n        let colorId = editorMarkerNavigationError;\n        let headerBackground = editorMarkerNavigationErrorHeader;\n        if (this._severity === MarkerSeverity.Warning) {\n            colorId = editorMarkerNavigationWarning;\n            headerBackground = editorMarkerNavigationWarningHeader;\n        }\n        else if (this._severity === MarkerSeverity.Info) {\n            colorId = editorMarkerNavigationInfo;\n            headerBackground = editorMarkerNavigationInfoHeader;\n        }\n        const frameColor = theme.getColor(colorId);\n        const headerBg = theme.getColor(headerBackground);\n        this.style({\n            arrowColor: frameColor,\n            frameColor: frameColor,\n            headerBackgroundColor: headerBg,\n            primaryHeadingColor: theme.getColor(peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(peekViewTitleInfoForeground)\n        }); // style() will trigger _applyStyles\n    }\n    _applyStyles() {\n        if (this._parentContainer) {\n            this._parentContainer.style.backgroundColor = this._backgroundColor ? this._backgroundColor.toString() : '';\n        }\n        super._applyStyles();\n    }\n    dispose() {\n        this._callOnDispose.dispose();\n        super.dispose();\n    }\n    _fillHead(container) {\n        super._fillHead(container);\n        this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(e => this.editor.focus()));\n        const actions = [];\n        const menu = this._menuService.createMenu(MarkerNavigationWidget_1.TitleMenu, this._contextKeyService);\n        createAndFillInActionBarActions(menu, undefined, actions);\n        this._actionbarWidget.push(actions, { label: false, icon: true, index: 0 });\n        menu.dispose();\n    }\n    _fillTitleIcon(container) {\n        this._icon = dom.append(container, dom.$(''));\n    }\n    _fillBody(container) {\n        this._parentContainer = container;\n        container.classList.add('marker-widget');\n        this._parentContainer.tabIndex = 0;\n        this._parentContainer.setAttribute('role', 'tooltip');\n        this._container = document.createElement('div');\n        container.appendChild(this._container);\n        this._message = new MessageWidget(this._container, this.editor, related => this._onDidSelectRelatedInformation.fire(related), this._openerService, this._labelService);\n        this._disposables.add(this._message);\n    }\n    show() {\n        throw new Error('call showAtMarker');\n    }\n    showAtMarker(marker, markerIdx, markerCount) {\n        // update:\n        // * title\n        // * message\n        this._container.classList.remove('stale');\n        this._message.update(marker);\n        // update frame color (only applied on 'show')\n        this._severity = marker.severity;\n        this._applyTheme(this._themeService.getColorTheme());\n        // show\n        const range = Range.lift(marker);\n        const editorPosition = this.editor.getPosition();\n        const position = editorPosition && range.containsPosition(editorPosition) ? editorPosition : range.getStartPosition();\n        super.show(position, this.computeRequiredHeight());\n        const model = this.editor.getModel();\n        if (model) {\n            const detail = markerCount > 1\n                ? nls.localize('problems', \"{0} of {1} problems\", markerIdx, markerCount)\n                : nls.localize('change', \"{0} of {1} problem\", markerIdx, markerCount);\n            this.setTitle(basename(model.uri), detail);\n        }\n        this._icon.className = `codicon ${SeverityIcon.className(MarkerSeverity.toSeverity(this._severity))}`;\n        this.editor.revealPositionNearTop(position, 0 /* ScrollType.Smooth */);\n        this.editor.focus();\n    }\n    updateMarker(marker) {\n        this._container.classList.remove('stale');\n        this._message.update(marker);\n    }\n    showStale() {\n        this._container.classList.add('stale');\n        this._relayout();\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        super._doLayoutBody(heightInPixel, widthInPixel);\n        this._heightInPixel = heightInPixel;\n        this._message.layout(heightInPixel, widthInPixel);\n        this._container.style.height = `${heightInPixel}px`;\n    }\n    _onWidth(widthInPixel) {\n        this._message.layout(this._heightInPixel, widthInPixel);\n    }\n    _relayout() {\n        super._relayout(this.computeRequiredHeight());\n    }\n    computeRequiredHeight() {\n        return 3 + this._message.getHeightInLines();\n    }\n};\nMarkerNavigationWidget.TitleMenu = new MenuId('gotoErrorTitleMenu');\nMarkerNavigationWidget = MarkerNavigationWidget_1 = __decorate([\n    __param(1, IThemeService),\n    __param(2, IOpenerService),\n    __param(3, IMenuService),\n    __param(4, IInstantiationService),\n    __param(5, IContextKeyService),\n    __param(6, ILabelService)\n], MarkerNavigationWidget);\nexport { MarkerNavigationWidget };\n// theming\nconst errorDefault = oneOf(editorErrorForeground, editorErrorBorder);\nconst warningDefault = oneOf(editorWarningForeground, editorWarningBorder);\nconst infoDefault = oneOf(editorInfoForeground, editorInfoBorder);\nconst editorMarkerNavigationError = registerColor('editorMarkerNavigationError.background', { dark: errorDefault, light: errorDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationError', 'Editor marker navigation widget error color.'));\nconst editorMarkerNavigationErrorHeader = registerColor('editorMarkerNavigationError.headerBackground', { dark: transparent(editorMarkerNavigationError, .1), light: transparent(editorMarkerNavigationError, .1), hcDark: null, hcLight: null }, nls.localize('editorMarkerNavigationErrorHeaderBackground', 'Editor marker navigation widget error heading background.'));\nconst editorMarkerNavigationWarning = registerColor('editorMarkerNavigationWarning.background', { dark: warningDefault, light: warningDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationWarning', 'Editor marker navigation widget warning color.'));\nconst editorMarkerNavigationWarningHeader = registerColor('editorMarkerNavigationWarning.headerBackground', { dark: transparent(editorMarkerNavigationWarning, .1), light: transparent(editorMarkerNavigationWarning, .1), hcDark: '#0C141F', hcLight: transparent(editorMarkerNavigationWarning, .2) }, nls.localize('editorMarkerNavigationWarningBackground', 'Editor marker navigation widget warning heading background.'));\nconst editorMarkerNavigationInfo = registerColor('editorMarkerNavigationInfo.background', { dark: infoDefault, light: infoDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationInfo', 'Editor marker navigation widget info color.'));\nconst editorMarkerNavigationInfoHeader = registerColor('editorMarkerNavigationInfo.headerBackground', { dark: transparent(editorMarkerNavigationInfo, .1), light: transparent(editorMarkerNavigationInfo, .1), hcDark: null, hcLight: null }, nls.localize('editorMarkerNavigationInfoHeaderBackground', 'Editor marker navigation widget info heading background.'));\nconst editorMarkerNavigationBackground = registerColor('editorMarkerNavigation.background', { dark: editorBackground, light: editorBackground, hcDark: editorBackground, hcLight: editorBackground }, nls.localize('editorMarkerNavigationBackground', 'Editor marker navigation widget background.'));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar MarkerController_1;\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IMarkerNavigationService } from './markerNavigationService.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { MarkerNavigationWidget } from './gotoErrorWidget.js';\nlet MarkerController = MarkerController_1 = class MarkerController {\n    static get(editor) {\n        return editor.getContribution(MarkerController_1.ID);\n    }\n    constructor(editor, _markerNavigationService, _contextKeyService, _editorService, _instantiationService) {\n        this._markerNavigationService = _markerNavigationService;\n        this._contextKeyService = _contextKeyService;\n        this._editorService = _editorService;\n        this._instantiationService = _instantiationService;\n        this._sessionDispoables = new DisposableStore();\n        this._editor = editor;\n        this._widgetVisible = CONTEXT_MARKERS_NAVIGATION_VISIBLE.bindTo(this._contextKeyService);\n    }\n    dispose() {\n        this._cleanUp();\n        this._sessionDispoables.dispose();\n    }\n    _cleanUp() {\n        this._widgetVisible.reset();\n        this._sessionDispoables.clear();\n        this._widget = undefined;\n        this._model = undefined;\n    }\n    _getOrCreateModel(uri) {\n        if (this._model && this._model.matches(uri)) {\n            return this._model;\n        }\n        let reusePosition = false;\n        if (this._model) {\n            reusePosition = true;\n            this._cleanUp();\n        }\n        this._model = this._markerNavigationService.getMarkerList(uri);\n        if (reusePosition) {\n            this._model.move(true, this._editor.getModel(), this._editor.getPosition());\n        }\n        this._widget = this._instantiationService.createInstance(MarkerNavigationWidget, this._editor);\n        this._widget.onDidClose(() => this.close(), this, this._sessionDispoables);\n        this._widgetVisible.set(true);\n        this._sessionDispoables.add(this._model);\n        this._sessionDispoables.add(this._widget);\n        // follow cursor\n        this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(e => {\n            var _a, _b, _c;\n            if (!((_a = this._model) === null || _a === void 0 ? void 0 : _a.selected) || !Range.containsPosition((_b = this._model) === null || _b === void 0 ? void 0 : _b.selected.marker, e.position)) {\n                (_c = this._model) === null || _c === void 0 ? void 0 : _c.resetIndex();\n            }\n        }));\n        // update markers\n        this._sessionDispoables.add(this._model.onDidChange(() => {\n            if (!this._widget || !this._widget.position || !this._model) {\n                return;\n            }\n            const info = this._model.find(this._editor.getModel().uri, this._widget.position);\n            if (info) {\n                this._widget.updateMarker(info.marker);\n            }\n            else {\n                this._widget.showStale();\n            }\n        }));\n        // open related\n        this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(related => {\n            this._editorService.openCodeEditor({\n                resource: related.resource,\n                options: { pinned: true, revealIfOpened: true, selection: Range.lift(related).collapseToStart() }\n            }, this._editor);\n            this.close(false);\n        }));\n        this._sessionDispoables.add(this._editor.onDidChangeModel(() => this._cleanUp()));\n        return this._model;\n    }\n    close(focusEditor = true) {\n        this._cleanUp();\n        if (focusEditor) {\n            this._editor.focus();\n        }\n    }\n    showAtMarker(marker) {\n        if (this._editor.hasModel()) {\n            const model = this._getOrCreateModel(this._editor.getModel().uri);\n            model.resetIndex();\n            model.move(true, this._editor.getModel(), new Position(marker.startLineNumber, marker.startColumn));\n            if (model.selected) {\n                this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n            }\n        }\n    }\n    nagivate(next, multiFile) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._editor.hasModel()) {\n                const model = this._getOrCreateModel(multiFile ? undefined : this._editor.getModel().uri);\n                model.move(next, this._editor.getModel(), this._editor.getPosition());\n                if (!model.selected) {\n                    return;\n                }\n                if (model.selected.marker.resource.toString() !== this._editor.getModel().uri.toString()) {\n                    // show in different editor\n                    this._cleanUp();\n                    const otherEditor = yield this._editorService.openCodeEditor({\n                        resource: model.selected.marker.resource,\n                        options: { pinned: false, revealIfOpened: true, selectionRevealType: 2 /* TextEditorSelectionRevealType.NearTop */, selection: model.selected.marker }\n                    }, this._editor);\n                    if (otherEditor) {\n                        (_a = MarkerController_1.get(otherEditor)) === null || _a === void 0 ? void 0 : _a.close();\n                        (_b = MarkerController_1.get(otherEditor)) === null || _b === void 0 ? void 0 : _b.nagivate(next, multiFile);\n                    }\n                }\n                else {\n                    // show in this editor\n                    this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n                }\n            }\n        });\n    }\n};\nMarkerController.ID = 'editor.contrib.markerController';\nMarkerController = MarkerController_1 = __decorate([\n    __param(1, IMarkerNavigationService),\n    __param(2, IContextKeyService),\n    __param(3, ICodeEditorService),\n    __param(4, IInstantiationService)\n], MarkerController);\nexport { MarkerController };\nclass MarkerNavigationAction extends EditorAction {\n    constructor(_next, _multiFile, opts) {\n        super(opts);\n        this._next = _next;\n        this._multiFile = _multiFile;\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (editor.hasModel()) {\n                (_a = MarkerController.get(editor)) === null || _a === void 0 ? void 0 : _a.nagivate(this._next, this._multiFile);\n            }\n        });\n    }\n}\nexport class NextMarkerAction extends MarkerNavigationAction {\n    constructor() {\n        super(true, false, {\n            id: NextMarkerAction.ID,\n            label: NextMarkerAction.LABEL,\n            alias: 'Go to Next Problem (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 512 /* KeyMod.Alt */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MarkerNavigationWidget.TitleMenu,\n                title: NextMarkerAction.LABEL,\n                icon: registerIcon('marker-navigation-next', Codicon.arrowDown, nls.localize('nextMarkerIcon', 'Icon for goto next marker.')),\n                group: 'navigation',\n                order: 1\n            }\n        });\n    }\n}\nNextMarkerAction.ID = 'editor.action.marker.next';\nNextMarkerAction.LABEL = nls.localize('markerAction.next.label', \"Go to Next Problem (Error, Warning, Info)\");\nclass PrevMarkerAction extends MarkerNavigationAction {\n    constructor() {\n        super(false, false, {\n            id: PrevMarkerAction.ID,\n            label: PrevMarkerAction.LABEL,\n            alias: 'Go to Previous Problem (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MarkerNavigationWidget.TitleMenu,\n                title: PrevMarkerAction.LABEL,\n                icon: registerIcon('marker-navigation-previous', Codicon.arrowUp, nls.localize('previousMarkerIcon', 'Icon for goto previous marker.')),\n                group: 'navigation',\n                order: 2\n            }\n        });\n    }\n}\nPrevMarkerAction.ID = 'editor.action.marker.prev';\nPrevMarkerAction.LABEL = nls.localize('markerAction.previous.label', \"Go to Previous Problem (Error, Warning, Info)\");\nclass NextMarkerInFilesAction extends MarkerNavigationAction {\n    constructor() {\n        super(true, true, {\n            id: 'editor.action.marker.nextInFiles',\n            label: nls.localize('markerAction.nextInFiles.label', \"Go to Next Problem in Files (Error, Warning, Info)\"),\n            alias: 'Go to Next Problem in Files (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarGoMenu,\n                title: nls.localize({ key: 'miGotoNextProblem', comment: ['&& denotes a mnemonic'] }, \"Next &&Problem\"),\n                group: '6_problem_nav',\n                order: 1\n            }\n        });\n    }\n}\nclass PrevMarkerInFilesAction extends MarkerNavigationAction {\n    constructor() {\n        super(false, true, {\n            id: 'editor.action.marker.prevInFiles',\n            label: nls.localize('markerAction.previousInFiles.label', \"Go to Previous Problem in Files (Error, Warning, Info)\"),\n            alias: 'Go to Previous Problem in Files (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 1024 /* KeyMod.Shift */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarGoMenu,\n                title: nls.localize({ key: 'miGotoPreviousProblem', comment: ['&& denotes a mnemonic'] }, \"Previous &&Problem\"),\n                group: '6_problem_nav',\n                order: 2\n            }\n        });\n    }\n}\nregisterEditorContribution(MarkerController.ID, MarkerController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(NextMarkerAction);\nregisterEditorAction(PrevMarkerAction);\nregisterEditorAction(NextMarkerInFilesAction);\nregisterEditorAction(PrevMarkerInFilesAction);\nconst CONTEXT_MARKERS_NAVIGATION_VISIBLE = new RawContextKey('markersNavigationVisible', false);\nconst MarkerCommand = EditorCommand.bindToContribution(MarkerController.get);\nregisterEditorCommand(new MarkerCommand({\n    id: 'closeMarkersNavigation',\n    precondition: CONTEXT_MARKERS_NAVIGATION_VISIBLE,\n    handler: x => x.close(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 50,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Emitter } from '../../../../base/common/event.js';\nimport { combinedDisposable, DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { EditorCommand, registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { KeybindingsRegistry } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nexport const ctxHasSymbols = new RawContextKey('hasSymbols', false, localize('hasSymbols', \"Whether there are symbol locations that can be navigated via keyboard-only.\"));\nexport const ISymbolNavigationService = createDecorator('ISymbolNavigationService');\nlet SymbolNavigationService = class SymbolNavigationService {\n    constructor(contextKeyService, _editorService, _notificationService, _keybindingService) {\n        this._editorService = _editorService;\n        this._notificationService = _notificationService;\n        this._keybindingService = _keybindingService;\n        this._currentModel = undefined;\n        this._currentIdx = -1;\n        this._ignoreEditorChange = false;\n        this._ctxHasSymbols = ctxHasSymbols.bindTo(contextKeyService);\n    }\n    reset() {\n        var _a, _b;\n        this._ctxHasSymbols.reset();\n        (_a = this._currentState) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._currentMessage) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._currentModel = undefined;\n        this._currentIdx = -1;\n    }\n    put(anchor) {\n        const refModel = anchor.parent.parent;\n        if (refModel.references.length <= 1) {\n            this.reset();\n            return;\n        }\n        this._currentModel = refModel;\n        this._currentIdx = refModel.references.indexOf(anchor);\n        this._ctxHasSymbols.set(true);\n        this._showMessage();\n        const editorState = new EditorState(this._editorService);\n        const listener = editorState.onDidChange(_ => {\n            if (this._ignoreEditorChange) {\n                return;\n            }\n            const editor = this._editorService.getActiveCodeEditor();\n            if (!editor) {\n                return;\n            }\n            const model = editor.getModel();\n            const position = editor.getPosition();\n            if (!model || !position) {\n                return;\n            }\n            let seenUri = false;\n            let seenPosition = false;\n            for (const reference of refModel.references) {\n                if (isEqual(reference.uri, model.uri)) {\n                    seenUri = true;\n                    seenPosition = seenPosition || Range.containsPosition(reference.range, position);\n                }\n                else if (seenUri) {\n                    break;\n                }\n            }\n            if (!seenUri || !seenPosition) {\n                this.reset();\n            }\n        });\n        this._currentState = combinedDisposable(editorState, listener);\n    }\n    revealNext(source) {\n        if (!this._currentModel) {\n            return Promise.resolve();\n        }\n        // get next result and advance\n        this._currentIdx += 1;\n        this._currentIdx %= this._currentModel.references.length;\n        const reference = this._currentModel.references[this._currentIdx];\n        // status\n        this._showMessage();\n        // open editor, ignore events while that happens\n        this._ignoreEditorChange = true;\n        return this._editorService.openCodeEditor({\n            resource: reference.uri,\n            options: {\n                selection: Range.collapseToStart(reference.range),\n                selectionRevealType: 3 /* TextEditorSelectionRevealType.NearTopIfOutsideViewport */\n            }\n        }, source).finally(() => {\n            this._ignoreEditorChange = false;\n        });\n    }\n    _showMessage() {\n        var _a;\n        (_a = this._currentMessage) === null || _a === void 0 ? void 0 : _a.dispose();\n        const kb = this._keybindingService.lookupKeybinding('editor.gotoNextSymbolFromResult');\n        const message = kb\n            ? localize('location.kb', \"Symbol {0} of {1}, {2} for next\", this._currentIdx + 1, this._currentModel.references.length, kb.getLabel())\n            : localize('location', \"Symbol {0} of {1}\", this._currentIdx + 1, this._currentModel.references.length);\n        this._currentMessage = this._notificationService.status(message);\n    }\n};\nSymbolNavigationService = __decorate([\n    __param(0, IContextKeyService),\n    __param(1, ICodeEditorService),\n    __param(2, INotificationService),\n    __param(3, IKeybindingService)\n], SymbolNavigationService);\nregisterSingleton(ISymbolNavigationService, SymbolNavigationService, 1 /* InstantiationType.Delayed */);\nregisterEditorCommand(new class extends EditorCommand {\n    constructor() {\n        super({\n            id: 'editor.gotoNextSymbolFromResult',\n            precondition: ctxHasSymbols,\n            kbOpts: {\n                weight: 100 /* KeybindingWeight.EditorContrib */,\n                primary: 70 /* KeyCode.F12 */\n            }\n        });\n    }\n    runEditorCommand(accessor, editor) {\n        return accessor.get(ISymbolNavigationService).revealNext(editor);\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'editor.gotoNextSymbolFromResult.cancel',\n    weight: 100 /* KeybindingWeight.EditorContrib */,\n    when: ctxHasSymbols,\n    primary: 9 /* KeyCode.Escape */,\n    handler(accessor) {\n        accessor.get(ISymbolNavigationService).reset();\n    }\n});\n//\nlet EditorState = class EditorState {\n    constructor(editorService) {\n        this._listener = new Map();\n        this._disposables = new DisposableStore();\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._disposables.add(editorService.onCodeEditorRemove(this._onDidRemoveEditor, this));\n        this._disposables.add(editorService.onCodeEditorAdd(this._onDidAddEditor, this));\n        editorService.listCodeEditors().forEach(this._onDidAddEditor, this);\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._onDidChange.dispose();\n        dispose(this._listener.values());\n    }\n    _onDidAddEditor(editor) {\n        this._listener.set(editor, combinedDisposable(editor.onDidChangeCursorPosition(_ => this._onDidChange.fire({ editor })), editor.onDidChangeModelContent(_ => this._onDidChange.fire({ editor }))));\n    }\n    _onDidRemoveEditor(editor) {\n        var _a;\n        (_a = this._listener.get(editor)) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._listener.delete(editor);\n    }\n};\nEditorState = __decorate([\n    __param(0, ICodeEditorService)\n], EditorState);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar _a, _b, _c, _d, _e, _f, _g, _h;\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { createCancelablePromise, raceCancellation } from '../../../../base/common/async.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { isCodeEditor } from '../../../browser/editorBrowser.js';\nimport { EditorAction2 } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport * as corePosition from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { isLocationLink } from '../../../common/languages.js';\nimport { ReferencesController } from './peek/referencesController.js';\nimport { ReferencesModel } from './referencesModel.js';\nimport { ISymbolNavigationService } from './symbolNavigation.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport { PeekContext } from '../../peekView/browser/peekView.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { getDeclarationsAtPosition, getDefinitionsAtPosition, getImplementationsAtPosition, getReferencesAtPosition, getTypeDefinitionsAtPosition } from './goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { IsWebContext } from '../../../../platform/contextkey/common/contextkeys.js';\nMenuRegistry.appendMenuItem(MenuId.EditorContext, {\n    submenu: MenuId.EditorContextPeek,\n    title: nls.localize('peek.submenu', \"Peek\"),\n    group: 'navigation',\n    order: 100\n});\nexport class SymbolNavigationAnchor {\n    static is(thing) {\n        if (!thing || typeof thing !== 'object') {\n            return false;\n        }\n        if (thing instanceof SymbolNavigationAnchor) {\n            return true;\n        }\n        if (corePosition.Position.isIPosition(thing.position) && thing.model) {\n            return true;\n        }\n        return false;\n    }\n    constructor(model, position) {\n        this.model = model;\n        this.position = position;\n    }\n}\nexport class SymbolNavigationAction extends EditorAction2 {\n    static all() {\n        return SymbolNavigationAction._allSymbolNavigationCommands.values();\n    }\n    static _patchConfig(opts) {\n        const result = Object.assign(Object.assign({}, opts), { f1: true });\n        // patch context menu when clause\n        if (result.menu) {\n            for (const item of Iterable.wrap(result.menu)) {\n                if (item.id === MenuId.EditorContext || item.id === MenuId.EditorContextPeek) {\n                    item.when = ContextKeyExpr.and(opts.precondition, item.when);\n                }\n            }\n        }\n        return result;\n    }\n    constructor(configuration, opts) {\n        super(SymbolNavigationAction._patchConfig(opts));\n        this.configuration = configuration;\n        SymbolNavigationAction._allSymbolNavigationCommands.set(opts.id, this);\n    }\n    runEditorCommand(accessor, editor, arg, range) {\n        if (!editor.hasModel()) {\n            return Promise.resolve(undefined);\n        }\n        const notificationService = accessor.get(INotificationService);\n        const editorService = accessor.get(ICodeEditorService);\n        const progressService = accessor.get(IEditorProgressService);\n        const symbolNavService = accessor.get(ISymbolNavigationService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const instaService = accessor.get(IInstantiationService);\n        const model = editor.getModel();\n        const position = editor.getPosition();\n        const anchor = SymbolNavigationAnchor.is(arg) ? arg : new SymbolNavigationAnchor(model, position);\n        const cts = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */);\n        const promise = raceCancellation(this._getLocationModel(languageFeaturesService, anchor.model, anchor.position, cts.token), cts.token).then((references) => __awaiter(this, void 0, void 0, function* () {\n            var _j;\n            if (!references || cts.token.isCancellationRequested) {\n                return;\n            }\n            alert(references.ariaMessage);\n            let altAction;\n            if (references.referenceAt(model.uri, position)) {\n                const altActionId = this._getAlternativeCommand(editor);\n                if (!SymbolNavigationAction._activeAlternativeCommands.has(altActionId) && SymbolNavigationAction._allSymbolNavigationCommands.has(altActionId)) {\n                    altAction = SymbolNavigationAction._allSymbolNavigationCommands.get(altActionId);\n                }\n            }\n            const referenceCount = references.references.length;\n            if (referenceCount === 0) {\n                // no result -> show message\n                if (!this.configuration.muteMessage) {\n                    const info = model.getWordAtPosition(position);\n                    (_j = MessageController.get(editor)) === null || _j === void 0 ? void 0 : _j.showMessage(this._getNoResultFoundMessage(info), position);\n                }\n            }\n            else if (referenceCount === 1 && altAction) {\n                // already at the only result, run alternative\n                SymbolNavigationAction._activeAlternativeCommands.add(this.desc.id);\n                instaService.invokeFunction((accessor) => altAction.runEditorCommand(accessor, editor, arg, range).finally(() => {\n                    SymbolNavigationAction._activeAlternativeCommands.delete(this.desc.id);\n                }));\n            }\n            else {\n                // normal results handling\n                return this._onResult(editorService, symbolNavService, editor, references, range);\n            }\n        }), (err) => {\n            // report an error\n            notificationService.error(err);\n        }).finally(() => {\n            cts.dispose();\n        });\n        progressService.showWhile(promise, 250);\n        return promise;\n    }\n    _onResult(editorService, symbolNavService, editor, model, range) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const gotoLocation = this._getGoToPreference(editor);\n            if (!(editor instanceof EmbeddedCodeEditorWidget) && (this.configuration.openInPeek || (gotoLocation === 'peek' && model.references.length > 1))) {\n                this._openInPeek(editor, model, range);\n            }\n            else {\n                const next = model.firstReference();\n                const peek = model.references.length > 1 && gotoLocation === 'gotoAndPeek';\n                const targetEditor = yield this._openReference(editor, editorService, next, this.configuration.openToSide, !peek);\n                if (peek && targetEditor) {\n                    this._openInPeek(targetEditor, model, range);\n                }\n                else {\n                    model.dispose();\n                }\n                // keep remaining locations around when using\n                // 'goto'-mode\n                if (gotoLocation === 'goto') {\n                    symbolNavService.put(next);\n                }\n            }\n        });\n    }\n    _openReference(editor, editorService, reference, sideBySide, highlight) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // range is the target-selection-range when we have one\n            // and the fallback is the 'full' range\n            let range = undefined;\n            if (isLocationLink(reference)) {\n                range = reference.targetSelectionRange;\n            }\n            if (!range) {\n                range = reference.range;\n            }\n            if (!range) {\n                return undefined;\n            }\n            const targetEditor = yield editorService.openCodeEditor({\n                resource: reference.uri,\n                options: {\n                    selection: Range.collapseToStart(range),\n                    selectionRevealType: 3 /* TextEditorSelectionRevealType.NearTopIfOutsideViewport */,\n                    selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */\n                }\n            }, editor, sideBySide);\n            if (!targetEditor) {\n                return undefined;\n            }\n            if (highlight) {\n                const modelNow = targetEditor.getModel();\n                const decorations = targetEditor.createDecorationsCollection([{ range, options: { description: 'symbol-navigate-action-highlight', className: 'symbolHighlight' } }]);\n                setTimeout(() => {\n                    if (targetEditor.getModel() === modelNow) {\n                        decorations.clear();\n                    }\n                }, 350);\n            }\n            return targetEditor;\n        });\n    }\n    _openInPeek(target, model, range) {\n        const controller = ReferencesController.get(target);\n        if (controller && target.hasModel()) {\n            controller.toggleWidget(range !== null && range !== void 0 ? range : target.getSelection(), createCancelablePromise(_ => Promise.resolve(model)), this.configuration.openInPeek);\n        }\n        else {\n            model.dispose();\n        }\n    }\n}\nSymbolNavigationAction._allSymbolNavigationCommands = new Map();\nSymbolNavigationAction._activeAlternativeCommands = new Set();\n//#region --- DEFINITION\nexport class DefinitionAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, token), nls.localize('def.title', 'Definitions'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('noResultWord', \"No definition found for '{0}'\", info.word)\n            : nls.localize('generic.noResults', \"No definition found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeDefinitionCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(58 /* EditorOption.gotoLocation */).multipleDefinitions;\n    }\n}\nregisterAction2((_a = class GoToDefinitionAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: _a.id,\n                title: {\n                    value: nls.localize('actions.goToDecl.label', \"Go to Definition\"),\n                    original: 'Go to Definition',\n                    mnemonicTitle: nls.localize({ key: 'miGotoDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Definition\")\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: [{\n                        when: EditorContextKeys.editorTextFocus,\n                        primary: 70 /* KeyCode.F12 */,\n                        weight: 100 /* KeybindingWeight.EditorContrib */\n                    }, {\n                        when: ContextKeyExpr.and(EditorContextKeys.editorTextFocus, IsWebContext),\n                        primary: 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */,\n                        weight: 100 /* KeybindingWeight.EditorContrib */\n                    }],\n                menu: [{\n                        id: MenuId.EditorContext,\n                        group: 'navigation',\n                        order: 1.1\n                    }, {\n                        id: MenuId.MenubarGoMenu,\n                        precondition: null,\n                        group: '4_symbol_nav',\n                        order: 2,\n                    }]\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.goToDeclaration', _a.id);\n        }\n    },\n    _a.id = 'editor.action.revealDefinition',\n    _a));\nregisterAction2((_b = class OpenDefinitionToSideAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: true,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: _b.id,\n                title: {\n                    value: nls.localize('actions.goToDeclToSide.label', \"Open Definition to the Side\"),\n                    original: 'Open Definition to the Side'\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: [{\n                        when: EditorContextKeys.editorTextFocus,\n                        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 70 /* KeyCode.F12 */),\n                        weight: 100 /* KeybindingWeight.EditorContrib */\n                    }, {\n                        when: ContextKeyExpr.and(EditorContextKeys.editorTextFocus, IsWebContext),\n                        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */),\n                        weight: 100 /* KeybindingWeight.EditorContrib */\n                    }]\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.openDeclarationToTheSide', _b.id);\n        }\n    },\n    _b.id = 'editor.action.revealDefinitionAside',\n    _b));\nregisterAction2((_c = class PeekDefinitionAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: _c.id,\n                title: {\n                    value: nls.localize('actions.previewDecl.label', \"Peek Definition\"),\n                    original: 'Peek Definition'\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: {\n                    when: EditorContextKeys.editorTextFocus,\n                    primary: 512 /* KeyMod.Alt */ | 70 /* KeyCode.F12 */,\n                    linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */ },\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                menu: {\n                    id: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 2\n                }\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.previewDeclaration', _c.id);\n        }\n    },\n    _c.id = 'editor.action.peekDefinition',\n    _c));\n//#endregion\n//#region --- DECLARATION\nclass DeclarationAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, token), nls.localize('decl.title', 'Declarations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\n            : nls.localize('decl.generic.noResults', \"No declaration found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeDeclarationCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(58 /* EditorOption.gotoLocation */).multipleDeclarations;\n    }\n}\nregisterAction2((_d = class GoToDeclarationAction extends DeclarationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: _d.id,\n                title: {\n                    value: nls.localize('actions.goToDeclaration.label', \"Go to Declaration\"),\n                    original: 'Go to Declaration',\n                    mnemonicTitle: nls.localize({ key: 'miGotoDeclaration', comment: ['&& denotes a mnemonic'] }, \"Go to &&Declaration\")\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                menu: [{\n                        id: MenuId.EditorContext,\n                        group: 'navigation',\n                        order: 1.3\n                    }, {\n                        id: MenuId.MenubarGoMenu,\n                        precondition: null,\n                        group: '4_symbol_nav',\n                        order: 3,\n                    }],\n            });\n        }\n        _getNoResultFoundMessage(info) {\n            return info && info.word\n                ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\n                : nls.localize('decl.generic.noResults', \"No declaration found\");\n        }\n    },\n    _d.id = 'editor.action.revealDeclaration',\n    _d));\nregisterAction2(class PeekDeclarationAction extends DeclarationAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: true,\n            muteMessage: false\n        }, {\n            id: 'editor.action.peekDeclaration',\n            title: {\n                value: nls.localize('actions.peekDecl.label', \"Peek Declaration\"),\n                original: 'Peek Declaration'\n            },\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            menu: {\n                id: MenuId.EditorContextPeek,\n                group: 'peek',\n                order: 3\n            }\n        });\n    }\n});\n//#endregion\n//#region --- TYPE DEFINITION\nclass TypeDefinitionAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, token), nls.localize('typedef.title', 'Type Definitions'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('goToTypeDefinition.noResultWord', \"No type definition found for '{0}'\", info.word)\n            : nls.localize('goToTypeDefinition.generic.noResults', \"No type definition found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeTypeDefinitionCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(58 /* EditorOption.gotoLocation */).multipleTypeDefinitions;\n    }\n}\nregisterAction2((_e = class GoToTypeDefinitionAction extends TypeDefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: _e.ID,\n                title: {\n                    value: nls.localize('actions.goToTypeDefinition.label', \"Go to Type Definition\"),\n                    original: 'Go to Type Definition',\n                    mnemonicTitle: nls.localize({ key: 'miGotoTypeDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Type Definition\")\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: {\n                    when: EditorContextKeys.editorTextFocus,\n                    primary: 0,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                menu: [{\n                        id: MenuId.EditorContext,\n                        group: 'navigation',\n                        order: 1.4\n                    }, {\n                        id: MenuId.MenubarGoMenu,\n                        precondition: null,\n                        group: '4_symbol_nav',\n                        order: 3,\n                    }]\n            });\n        }\n    },\n    _e.ID = 'editor.action.goToTypeDefinition',\n    _e));\nregisterAction2((_f = class PeekTypeDefinitionAction extends TypeDefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: _f.ID,\n                title: {\n                    value: nls.localize('actions.peekTypeDefinition.label', \"Peek Type Definition\"),\n                    original: 'Peek Type Definition'\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                menu: {\n                    id: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 4\n                }\n            });\n        }\n    },\n    _f.ID = 'editor.action.peekTypeDefinition',\n    _f));\n//#endregion\n//#region --- IMPLEMENTATION\nclass ImplementationAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, token), nls.localize('impl.title', 'Implementations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('goToImplementation.noResultWord', \"No implementation found for '{0}'\", info.word)\n            : nls.localize('goToImplementation.generic.noResults', \"No implementation found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeImplementationCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(58 /* EditorOption.gotoLocation */).multipleImplementations;\n    }\n}\nregisterAction2((_g = class GoToImplementationAction extends ImplementationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: _g.ID,\n                title: {\n                    value: nls.localize('actions.goToImplementation.label', \"Go to Implementations\"),\n                    original: 'Go to Implementations',\n                    mnemonicTitle: nls.localize({ key: 'miGotoImplementation', comment: ['&& denotes a mnemonic'] }, \"Go to &&Implementations\")\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: {\n                    when: EditorContextKeys.editorTextFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                menu: [{\n                        id: MenuId.EditorContext,\n                        group: 'navigation',\n                        order: 1.45\n                    }, {\n                        id: MenuId.MenubarGoMenu,\n                        precondition: null,\n                        group: '4_symbol_nav',\n                        order: 4,\n                    }]\n            });\n        }\n    },\n    _g.ID = 'editor.action.goToImplementation',\n    _g));\nregisterAction2((_h = class PeekImplementationAction extends ImplementationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: _h.ID,\n                title: {\n                    value: nls.localize('actions.peekImplementation.label', \"Peek Implementations\"),\n                    original: 'Peek Implementations'\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: {\n                    when: EditorContextKeys.editorTextFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                menu: {\n                    id: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 5\n                }\n            });\n        }\n    },\n    _h.ID = 'editor.action.peekImplementation',\n    _h));\n//#endregion\n//#region --- REFERENCES\nclass ReferencesAction extends SymbolNavigationAction {\n    _getNoResultFoundMessage(info) {\n        return info\n            ? nls.localize('references.no', \"No references found for '{0}'\", info.word)\n            : nls.localize('references.noGeneric', \"No references found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeReferenceCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(58 /* EditorOption.gotoLocation */).multipleReferences;\n    }\n}\nregisterAction2(class GoToReferencesAction extends ReferencesAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: false,\n            muteMessage: false\n        }, {\n            id: 'editor.action.goToReferences',\n            title: {\n                value: nls.localize('goToReferences.label', \"Go to References\"),\n                original: 'Go to References',\n                mnemonicTitle: nls.localize({ key: 'miGotoReference', comment: ['&& denotes a mnemonic'] }, \"Go to &&References\")\n            },\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            keybinding: {\n                when: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menu: [{\n                    id: MenuId.EditorContext,\n                    group: 'navigation',\n                    order: 1.45\n                }, {\n                    id: MenuId.MenubarGoMenu,\n                    precondition: null,\n                    group: '4_symbol_nav',\n                    order: 5,\n                }]\n        });\n    }\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, true, token), nls.localize('ref.title', 'References'));\n        });\n    }\n});\nregisterAction2(class PeekReferencesAction extends ReferencesAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: true,\n            muteMessage: false\n        }, {\n            id: 'editor.action.referenceSearch.trigger',\n            title: {\n                value: nls.localize('references.action.label', \"Peek References\"),\n                original: 'Peek References'\n            },\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            menu: {\n                id: MenuId.EditorContextPeek,\n                group: 'peek',\n                order: 6\n            }\n        });\n    }\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, token), nls.localize('ref.title', 'References'));\n        });\n    }\n});\n//#endregion\n//#region --- GENERIC goto symbols command\nclass GenericGoToLocationAction extends SymbolNavigationAction {\n    constructor(config, _references, _gotoMultipleBehaviour) {\n        super(config, {\n            id: 'editor.action.goToLocation',\n            title: {\n                value: nls.localize('label.generic', \"Go to Any Symbol\"),\n                original: 'Go to Any Symbol'\n            },\n            precondition: ContextKeyExpr.and(PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n        });\n        this._references = _references;\n        this._gotoMultipleBehaviour = _gotoMultipleBehaviour;\n    }\n    _getLocationModel(languageFeaturesService, _model, _position, _token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(this._references, nls.localize('generic.title', 'Locations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && nls.localize('generic.noResult', \"No results for '{0}'\", info.word) || '';\n    }\n    _getGoToPreference(editor) {\n        var _j;\n        return (_j = this._gotoMultipleBehaviour) !== null && _j !== void 0 ? _j : editor.getOption(58 /* EditorOption.gotoLocation */).multipleReferences;\n    }\n    _getAlternativeCommand() { return ''; }\n}\nCommandsRegistry.registerCommand({\n    id: 'editor.action.goToLocations',\n    description: {\n        description: 'Go to locations from a position in a file',\n        args: [\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\n            { name: 'noResultsMessage', description: 'Human readable message that shows when locations is empty.' },\n        ]\n    },\n    handler: (accessor, resource, position, references, multiple, noResultsMessage, openInPeek) => __awaiter(void 0, void 0, void 0, function* () {\n        assertType(URI.isUri(resource));\n        assertType(corePosition.Position.isIPosition(position));\n        assertType(Array.isArray(references));\n        assertType(typeof multiple === 'undefined' || typeof multiple === 'string');\n        assertType(typeof openInPeek === 'undefined' || typeof openInPeek === 'boolean');\n        const editorService = accessor.get(ICodeEditorService);\n        const editor = yield editorService.openCodeEditor({ resource }, editorService.getFocusedCodeEditor());\n        if (isCodeEditor(editor)) {\n            editor.setPosition(position);\n            editor.revealPositionInCenterIfOutsideViewport(position, 0 /* ScrollType.Smooth */);\n            return editor.invokeWithinContext(accessor => {\n                const command = new class extends GenericGoToLocationAction {\n                    _getNoResultFoundMessage(info) {\n                        return noResultsMessage || super._getNoResultFoundMessage(info);\n                    }\n                }({\n                    muteMessage: !Boolean(noResultsMessage),\n                    openInPeek: Boolean(openInPeek),\n                    openToSide: false\n                }, references, multiple);\n                accessor.get(IInstantiationService).invokeFunction(command.run.bind(command), editor);\n            });\n        }\n    })\n});\nCommandsRegistry.registerCommand({\n    id: 'editor.action.peekLocations',\n    description: {\n        description: 'Peek locations from a position in a file',\n        args: [\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\n        ]\n    },\n    handler: (accessor, resource, position, references, multiple) => __awaiter(void 0, void 0, void 0, function* () {\n        accessor.get(ICommandService).executeCommand('editor.action.goToLocations', resource, position, references, multiple, undefined, true);\n    })\n});\n//#endregion\n//#region --- REFERENCE search special commands\nCommandsRegistry.registerCommand({\n    id: 'editor.action.findReferences',\n    handler: (accessor, resource, position) => {\n        assertType(URI.isUri(resource));\n        assertType(corePosition.Position.isIPosition(position));\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const codeEditorService = accessor.get(ICodeEditorService);\n        return codeEditorService.openCodeEditor({ resource }, codeEditorService.getFocusedCodeEditor()).then(control => {\n            if (!isCodeEditor(control) || !control.hasModel()) {\n                return undefined;\n            }\n            const controller = ReferencesController.get(control);\n            if (!controller) {\n                return undefined;\n            }\n            const references = createCancelablePromise(token => getReferencesAtPosition(languageFeaturesService.referenceProvider, control.getModel(), corePosition.Position.lift(position), false, token).then(references => new ReferencesModel(references, nls.localize('ref.title', 'References'))));\n            const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n            return Promise.resolve(controller.toggleWidget(range, references, false));\n        });\n    }\n});\n// use NEW command\nCommandsRegistry.registerCommandAlias('editor.action.showReferences', 'editor.action.peekLocations');\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ReferencesModel } from './referencesModel.js';\nfunction getLocationLinks(model, position, registry, provide) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const provider = registry.ordered(model);\n        // get results\n        const promises = provider.map((provider) => {\n            return Promise.resolve(provide(provider, model, position)).then(undefined, err => {\n                onUnexpectedExternalError(err);\n                return undefined;\n            });\n        });\n        const values = yield Promise.all(promises);\n        return coalesce(values.flat());\n    });\n}\nexport function getDefinitionsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideDefinition(model, position, token);\n    });\n}\nexport function getDeclarationsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideDeclaration(model, position, token);\n    });\n}\nexport function getImplementationsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideImplementation(model, position, token);\n    });\n}\nexport function getTypeDefinitionsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideTypeDefinition(model, position, token);\n    });\n}\nexport function getReferencesAtPosition(registry, model, position, compact, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => __awaiter(this, void 0, void 0, function* () {\n        const result = yield provider.provideReferences(model, position, { includeDeclaration: true }, token);\n        if (!compact || !result || result.length !== 2) {\n            return result;\n        }\n        const resultWithoutDeclaration = yield provider.provideReferences(model, position, { includeDeclaration: false }, token);\n        if (resultWithoutDeclaration && resultWithoutDeclaration.length === 1) {\n            return resultWithoutDeclaration;\n        }\n        return result;\n    }));\n}\n// -- API commands ----\nfunction _sortedAndDeduped(callback) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const rawLinks = yield callback();\n        const model = new ReferencesModel(rawLinks, '');\n        const modelLinks = model.references.map(ref => ref.link);\n        model.dispose();\n        return modelLinks;\n    });\n}\nregisterModelAndPositionCommand('_executeDefinitionProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeTypeDefinitionProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeDeclarationProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeReferenceProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeImplementationProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../../base/common/platform.js';\nfunction hasModifier(e, modifier) {\n    return !!e[modifier];\n}\n/**\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\n */\nexport class ClickLinkMouseEvent {\n    constructor(source, opts) {\n        this.target = source.target;\n        this.isLeftClick = source.event.leftButton;\n        this.isMiddleClick = source.event.middleButton;\n        this.isRightClick = source.event.rightButton;\n        this.hasTriggerModifier = hasModifier(source.event, opts.triggerModifier);\n        this.hasSideBySideModifier = hasModifier(source.event, opts.triggerSideBySideModifier);\n        this.isNoneOrSingleMouseDown = (source.event.detail <= 1);\n    }\n}\n/**\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\n */\nexport class ClickLinkKeyboardEvent {\n    constructor(source, opts) {\n        this.keyCodeIsTriggerKey = (source.keyCode === opts.triggerKey);\n        this.keyCodeIsSideBySideKey = (source.keyCode === opts.triggerSideBySideKey);\n        this.hasTriggerModifier = hasModifier(source, opts.triggerModifier);\n    }\n}\nexport class ClickLinkOptions {\n    constructor(triggerKey, triggerModifier, triggerSideBySideKey, triggerSideBySideModifier) {\n        this.triggerKey = triggerKey;\n        this.triggerModifier = triggerModifier;\n        this.triggerSideBySideKey = triggerSideBySideKey;\n        this.triggerSideBySideModifier = triggerSideBySideModifier;\n    }\n    equals(other) {\n        return (this.triggerKey === other.triggerKey\n            && this.triggerModifier === other.triggerModifier\n            && this.triggerSideBySideKey === other.triggerSideBySideKey\n            && this.triggerSideBySideModifier === other.triggerSideBySideModifier);\n    }\n}\nfunction createOptions(multiCursorModifier) {\n    if (multiCursorModifier === 'altKey') {\n        if (platform.isMacintosh) {\n            return new ClickLinkOptions(57 /* KeyCode.Meta */, 'metaKey', 6 /* KeyCode.Alt */, 'altKey');\n        }\n        return new ClickLinkOptions(5 /* KeyCode.Ctrl */, 'ctrlKey', 6 /* KeyCode.Alt */, 'altKey');\n    }\n    if (platform.isMacintosh) {\n        return new ClickLinkOptions(6 /* KeyCode.Alt */, 'altKey', 57 /* KeyCode.Meta */, 'metaKey');\n    }\n    return new ClickLinkOptions(6 /* KeyCode.Alt */, 'altKey', 5 /* KeyCode.Ctrl */, 'ctrlKey');\n}\nexport class ClickLinkGesture extends Disposable {\n    constructor(editor, opts) {\n        var _a;\n        super();\n        this._onMouseMoveOrRelevantKeyDown = this._register(new Emitter());\n        this.onMouseMoveOrRelevantKeyDown = this._onMouseMoveOrRelevantKeyDown.event;\n        this._onExecute = this._register(new Emitter());\n        this.onExecute = this._onExecute.event;\n        this._onCancel = this._register(new Emitter());\n        this.onCancel = this._onCancel.event;\n        this._editor = editor;\n        this._extractLineNumberFromMouseEvent = (_a = opts === null || opts === void 0 ? void 0 : opts.extractLineNumberFromMouseEvent) !== null && _a !== void 0 ? _a : ((e) => e.target.position ? e.target.position.lineNumber : 0);\n        this._opts = createOptions(this._editor.getOption(77 /* EditorOption.multiCursorModifier */));\n        this._lastMouseMoveEvent = null;\n        this._hasTriggerKeyOnMouseDown = false;\n        this._lineNumberOnMouseDown = 0;\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(77 /* EditorOption.multiCursorModifier */)) {\n                const newOpts = createOptions(this._editor.getOption(77 /* EditorOption.multiCursorModifier */));\n                if (this._opts.equals(newOpts)) {\n                    return;\n                }\n                this._opts = newOpts;\n                this._lastMouseMoveEvent = null;\n                this._hasTriggerKeyOnMouseDown = false;\n                this._lineNumberOnMouseDown = 0;\n                this._onCancel.fire();\n            }\n        }));\n        this._register(this._editor.onMouseMove((e) => this._onEditorMouseMove(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onMouseDown((e) => this._onEditorMouseDown(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onMouseUp((e) => this._onEditorMouseUp(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onKeyDown((e) => this._onEditorKeyDown(new ClickLinkKeyboardEvent(e, this._opts))));\n        this._register(this._editor.onKeyUp((e) => this._onEditorKeyUp(new ClickLinkKeyboardEvent(e, this._opts))));\n        this._register(this._editor.onMouseDrag(() => this._resetHandler()));\n        this._register(this._editor.onDidChangeCursorSelection((e) => this._onDidChangeCursorSelection(e)));\n        this._register(this._editor.onDidChangeModel((e) => this._resetHandler()));\n        this._register(this._editor.onDidChangeModelContent(() => this._resetHandler()));\n        this._register(this._editor.onDidScrollChange((e) => {\n            if (e.scrollTopChanged || e.scrollLeftChanged) {\n                this._resetHandler();\n            }\n        }));\n    }\n    _onDidChangeCursorSelection(e) {\n        if (e.selection && e.selection.startColumn !== e.selection.endColumn) {\n            this._resetHandler(); // immediately stop this feature if the user starts to select (https://github.com/microsoft/vscode/issues/7827)\n        }\n    }\n    _onEditorMouseMove(mouseEvent) {\n        this._lastMouseMoveEvent = mouseEvent;\n        this._onMouseMoveOrRelevantKeyDown.fire([mouseEvent, null]);\n    }\n    _onEditorMouseDown(mouseEvent) {\n        // We need to record if we had the trigger key on mouse down because someone might select something in the editor\n        // holding the mouse down and then while mouse is down start to press Ctrl/Cmd to start a copy operation and then\n        // release the mouse button without wanting to do the navigation.\n        // With this flag we prevent goto definition if the mouse was down before the trigger key was pressed.\n        this._hasTriggerKeyOnMouseDown = mouseEvent.hasTriggerModifier;\n        this._lineNumberOnMouseDown = this._extractLineNumberFromMouseEvent(mouseEvent);\n    }\n    _onEditorMouseUp(mouseEvent) {\n        const currentLineNumber = this._extractLineNumberFromMouseEvent(mouseEvent);\n        if (this._hasTriggerKeyOnMouseDown && this._lineNumberOnMouseDown && this._lineNumberOnMouseDown === currentLineNumber) {\n            this._onExecute.fire(mouseEvent);\n        }\n    }\n    _onEditorKeyDown(e) {\n        if (this._lastMouseMoveEvent\n            && (e.keyCodeIsTriggerKey // User just pressed Ctrl/Cmd (normal goto definition)\n                || (e.keyCodeIsSideBySideKey && e.hasTriggerModifier) // User pressed Ctrl/Cmd+Alt (goto definition to the side)\n            )) {\n            this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent, e]);\n        }\n        else if (e.hasTriggerModifier) {\n            this._onCancel.fire(); // remove decorations if user holds another key with ctrl/cmd to prevent accident goto declaration\n        }\n    }\n    _onEditorKeyUp(e) {\n        if (e.keyCodeIsTriggerKey) {\n            this._onCancel.fire();\n        }\n    }\n    _resetHandler() {\n        this._lastMouseMoveEvent = null;\n        this._hasTriggerKeyOnMouseDown = false;\n        this._onCancel.fire();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar GotoDefinitionAtPositionEditorContribution_1;\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport './goToDefinitionAtPosition.css';\nimport { EditorState } from '../../../editorState/browser/editorState.js';\nimport { registerEditorContribution } from '../../../../browser/editorExtensions.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { ClickLinkGesture } from './clickLinkGesture.js';\nimport { PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { DefinitionAction } from '../goToCommands.js';\nimport { getDefinitionsAtPosition } from '../goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../../common/services/languageFeatures.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../../common/model/textModel.js';\nlet GotoDefinitionAtPositionEditorContribution = GotoDefinitionAtPositionEditorContribution_1 = class GotoDefinitionAtPositionEditorContribution {\n    constructor(editor, textModelResolverService, languageService, languageFeaturesService) {\n        this.textModelResolverService = textModelResolverService;\n        this.languageService = languageService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.toUnhook = new DisposableStore();\n        this.toUnhookForKeyboard = new DisposableStore();\n        this.currentWordAtPosition = null;\n        this.previousPromise = null;\n        this.editor = editor;\n        this.linkDecorations = this.editor.createDecorationsCollection();\n        const linkGesture = new ClickLinkGesture(editor);\n        this.toUnhook.add(linkGesture);\n        this.toUnhook.add(linkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n            this.startFindDefinitionFromMouse(mouseEvent, keyboardEvent !== null && keyboardEvent !== void 0 ? keyboardEvent : undefined);\n        }));\n        this.toUnhook.add(linkGesture.onExecute((mouseEvent) => {\n            if (this.isEnabled(mouseEvent)) {\n                this.gotoDefinition(mouseEvent.target.position, mouseEvent.hasSideBySideModifier)\n                    .catch((error) => {\n                    onUnexpectedError(error);\n                })\n                    .finally(() => {\n                    this.removeLinkDecorations();\n                });\n            }\n        }));\n        this.toUnhook.add(linkGesture.onCancel(() => {\n            this.removeLinkDecorations();\n            this.currentWordAtPosition = null;\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(GotoDefinitionAtPositionEditorContribution_1.ID);\n    }\n    startFindDefinitionFromCursor(position) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // For issue: https://github.com/microsoft/vscode/issues/46257\n            // equivalent to mouse move with meta/ctrl key\n            // First find the definition and add decorations\n            // to the editor to be shown with the content hover widget\n            yield this.startFindDefinition(position);\n            // Add listeners for editor cursor move and key down events\n            // Dismiss the \"extended\" editor decorations when the user hides\n            // the hover widget. There is no event for the widget itself so these\n            // serve as a best effort. After removing the link decorations, the hover\n            // widget is clean and will only show declarations per next request.\n            this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(() => {\n                this.currentWordAtPosition = null;\n                this.removeLinkDecorations();\n                this.toUnhookForKeyboard.clear();\n            }));\n            this.toUnhookForKeyboard.add(this.editor.onKeyDown((e) => {\n                if (e) {\n                    this.currentWordAtPosition = null;\n                    this.removeLinkDecorations();\n                    this.toUnhookForKeyboard.clear();\n                }\n            }));\n        });\n    }\n    startFindDefinitionFromMouse(mouseEvent, withKey) {\n        // check if we are active and on a content widget\n        if (mouseEvent.target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && this.linkDecorations.length > 0) {\n            return;\n        }\n        if (!this.editor.hasModel() || !this.isEnabled(mouseEvent, withKey)) {\n            this.currentWordAtPosition = null;\n            this.removeLinkDecorations();\n            return;\n        }\n        const position = mouseEvent.target.position;\n        this.startFindDefinition(position);\n    }\n    startFindDefinition(position) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            // Dispose listeners for updating decorations when using keyboard to show definition hover\n            this.toUnhookForKeyboard.clear();\n            // Find word at mouse position\n            const word = position ? (_a = this.editor.getModel()) === null || _a === void 0 ? void 0 : _a.getWordAtPosition(position) : null;\n            if (!word) {\n                this.currentWordAtPosition = null;\n                this.removeLinkDecorations();\n                return;\n            }\n            // Return early if word at position is still the same\n            if (this.currentWordAtPosition && this.currentWordAtPosition.startColumn === word.startColumn && this.currentWordAtPosition.endColumn === word.endColumn && this.currentWordAtPosition.word === word.word) {\n                return;\n            }\n            this.currentWordAtPosition = word;\n            // Find definition and decorate word if found\n            const state = new EditorState(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */ | 8 /* CodeEditorStateFlag.Scroll */);\n            if (this.previousPromise) {\n                this.previousPromise.cancel();\n                this.previousPromise = null;\n            }\n            this.previousPromise = createCancelablePromise(token => this.findDefinition(position, token));\n            let results;\n            try {\n                results = yield this.previousPromise;\n            }\n            catch (error) {\n                onUnexpectedError(error);\n                return;\n            }\n            if (!results || !results.length || !state.validate(this.editor)) {\n                this.removeLinkDecorations();\n                return;\n            }\n            const linkRange = results[0].originSelectionRange\n                ? Range.lift(results[0].originSelectionRange)\n                : new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n            // Multiple results\n            if (results.length > 1) {\n                let combinedRange = linkRange;\n                for (const { originSelectionRange } of results) {\n                    if (originSelectionRange) {\n                        combinedRange = Range.plusRange(combinedRange, originSelectionRange);\n                    }\n                }\n                this.addDecoration(combinedRange, new MarkdownString().appendText(nls.localize('multipleResults', \"Click to show {0} definitions.\", results.length)));\n            }\n            else {\n                // Single result\n                const result = results[0];\n                if (!result.uri) {\n                    return;\n                }\n                this.textModelResolverService.createModelReference(result.uri).then(ref => {\n                    if (!ref.object || !ref.object.textEditorModel) {\n                        ref.dispose();\n                        return;\n                    }\n                    const { object: { textEditorModel } } = ref;\n                    const { startLineNumber } = result.range;\n                    if (startLineNumber < 1 || startLineNumber > textEditorModel.getLineCount()) {\n                        // invalid range\n                        ref.dispose();\n                        return;\n                    }\n                    const previewValue = this.getPreviewValue(textEditorModel, startLineNumber, result);\n                    const languageId = this.languageService.guessLanguageIdByFilepathOrFirstLine(textEditorModel.uri);\n                    this.addDecoration(linkRange, previewValue ? new MarkdownString().appendCodeblock(languageId ? languageId : '', previewValue) : undefined);\n                    ref.dispose();\n                });\n            }\n        });\n    }\n    getPreviewValue(textEditorModel, startLineNumber, result) {\n        let rangeToUse = result.range;\n        const numberOfLinesInRange = rangeToUse.endLineNumber - rangeToUse.startLineNumber;\n        if (numberOfLinesInRange >= GotoDefinitionAtPositionEditorContribution_1.MAX_SOURCE_PREVIEW_LINES) {\n            rangeToUse = this.getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber);\n        }\n        const previewValue = this.stripIndentationFromPreviewRange(textEditorModel, startLineNumber, rangeToUse);\n        return previewValue;\n    }\n    stripIndentationFromPreviewRange(textEditorModel, startLineNumber, previewRange) {\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n        let minIndent = startIndent;\n        for (let endLineNumber = startLineNumber + 1; endLineNumber < previewRange.endLineNumber; endLineNumber++) {\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n            minIndent = Math.min(minIndent, endIndent);\n        }\n        const previewValue = textEditorModel.getValueInRange(previewRange).replace(new RegExp(`^\\\\s{${minIndent - 1}}`, 'gm'), '').trim();\n        return previewValue;\n    }\n    getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber) {\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n        const maxLineNumber = Math.min(textEditorModel.getLineCount(), startLineNumber + GotoDefinitionAtPositionEditorContribution_1.MAX_SOURCE_PREVIEW_LINES);\n        let endLineNumber = startLineNumber + 1;\n        for (; endLineNumber < maxLineNumber; endLineNumber++) {\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n            if (startIndent === endIndent) {\n                break;\n            }\n        }\n        return new Range(startLineNumber, 1, endLineNumber + 1, 1);\n    }\n    addDecoration(range, hoverMessage) {\n        const newDecorations = {\n            range: range,\n            options: {\n                description: 'goto-definition-link',\n                inlineClassName: 'goto-definition-link',\n                hoverMessage\n            }\n        };\n        this.linkDecorations.set([newDecorations]);\n    }\n    removeLinkDecorations() {\n        this.linkDecorations.clear();\n    }\n    isEnabled(mouseEvent, withKey) {\n        var _a;\n        return this.editor.hasModel()\n            && mouseEvent.isLeftClick\n            && mouseEvent.isNoneOrSingleMouseDown\n            && mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */\n            && !(((_a = mouseEvent.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options) instanceof ModelDecorationInjectedTextOptions)\n            && (mouseEvent.hasTriggerModifier || (withKey ? withKey.keyCodeIsTriggerKey : false))\n            && this.languageFeaturesService.definitionProvider.has(this.editor.getModel());\n    }\n    findDefinition(position, token) {\n        const model = this.editor.getModel();\n        if (!model) {\n            return Promise.resolve(null);\n        }\n        return getDefinitionsAtPosition(this.languageFeaturesService.definitionProvider, model, position, token);\n    }\n    gotoDefinition(position, openToSide) {\n        this.editor.setPosition(position);\n        return this.editor.invokeWithinContext((accessor) => {\n            const canPeek = !openToSide && this.editor.getOption(87 /* EditorOption.definitionLinkOpensInPeek */) && !this.isInPeekEditor(accessor);\n            const action = new DefinitionAction({ openToSide, openInPeek: canPeek, muteMessage: true }, { title: { value: '', original: '' }, id: '', precondition: undefined });\n            return action.run(accessor);\n        });\n    }\n    isInPeekEditor(accessor) {\n        const contextKeyService = accessor.get(IContextKeyService);\n        return PeekContext.inPeekEditor.getValue(contextKeyService);\n    }\n    dispose() {\n        this.toUnhook.dispose();\n        this.toUnhookForKeyboard.dispose();\n    }\n};\nGotoDefinitionAtPositionEditorContribution.ID = 'editor.contrib.gotodefinitionatposition';\nGotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES = 8;\nGotoDefinitionAtPositionEditorContribution = GotoDefinitionAtPositionEditorContribution_1 = __decorate([\n    __param(1, ITextModelService),\n    __param(2, ILanguageService),\n    __param(3, ILanguageFeaturesService)\n], GotoDefinitionAtPositionEditorContribution);\nexport { GotoDefinitionAtPositionEditorContribution };\nregisterEditorContribution(GotoDefinitionAtPositionEditorContribution.ID, GotoDefinitionAtPositionEditorContribution, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar FileReferencesRenderer_1;\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { CountBadge } from '../../../../../base/browser/ui/countBadge/countBadge.js';\nimport { HighlightedLabel } from '../../../../../base/browser/ui/highlightedlabel/highlightedLabel.js';\nimport { IconLabel } from '../../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { createMatches, FuzzyScore } from '../../../../../base/common/filters.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { basename, dirname } from '../../../../../base/common/resources.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { localize } from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { defaultCountBadgeStyles } from '../../../../../platform/theme/browser/defaultStyles.js';\nimport { FileReferences, OneReference, ReferencesModel } from '../referencesModel.js';\nlet DataSource = class DataSource {\n    constructor(_resolverService) {\n        this._resolverService = _resolverService;\n    }\n    hasChildren(element) {\n        if (element instanceof ReferencesModel) {\n            return true;\n        }\n        if (element instanceof FileReferences) {\n            return true;\n        }\n        return false;\n    }\n    getChildren(element) {\n        if (element instanceof ReferencesModel) {\n            return element.groups;\n        }\n        if (element instanceof FileReferences) {\n            return element.resolve(this._resolverService).then(val => {\n                // if (element.failure) {\n                // \t// refresh the element on failure so that\n                // \t// we can update its rendering\n                // \treturn tree.refresh(element).then(() => val.children);\n                // }\n                return val.children;\n            });\n        }\n        throw new Error('bad tree');\n    }\n};\nDataSource = __decorate([\n    __param(0, ITextModelService)\n], DataSource);\nexport { DataSource };\n//#endregion\nexport class Delegate {\n    getHeight() {\n        return 23;\n    }\n    getTemplateId(element) {\n        if (element instanceof FileReferences) {\n            return FileReferencesRenderer.id;\n        }\n        else {\n            return OneReferenceRenderer.id;\n        }\n    }\n}\nlet StringRepresentationProvider = class StringRepresentationProvider {\n    constructor(_keybindingService) {\n        this._keybindingService = _keybindingService;\n    }\n    getKeyboardNavigationLabel(element) {\n        var _a;\n        if (element instanceof OneReference) {\n            const parts = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\n            if (parts) {\n                return parts.value;\n            }\n        }\n        // FileReferences or unresolved OneReference\n        return basename(element.uri);\n    }\n};\nStringRepresentationProvider = __decorate([\n    __param(0, IKeybindingService)\n], StringRepresentationProvider);\nexport { StringRepresentationProvider };\nexport class IdentityProvider {\n    getId(element) {\n        return element instanceof OneReference ? element.id : element.uri;\n    }\n}\n//#region render: File\nlet FileReferencesTemplate = class FileReferencesTemplate extends Disposable {\n    constructor(container, _labelService) {\n        super();\n        this._labelService = _labelService;\n        const parent = document.createElement('div');\n        parent.classList.add('reference-file');\n        this.file = this._register(new IconLabel(parent, { supportHighlights: true }));\n        this.badge = new CountBadge(dom.append(parent, dom.$('.count')), {}, defaultCountBadgeStyles);\n        container.appendChild(parent);\n    }\n    set(element, matches) {\n        const parent = dirname(element.uri);\n        this.file.setLabel(this._labelService.getUriBasenameLabel(element.uri), this._labelService.getUriLabel(parent, { relative: true }), { title: this._labelService.getUriLabel(element.uri), matches });\n        const len = element.children.length;\n        this.badge.setCount(len);\n        if (len > 1) {\n            this.badge.setTitleFormat(localize('referencesCount', \"{0} references\", len));\n        }\n        else {\n            this.badge.setTitleFormat(localize('referenceCount', \"{0} reference\", len));\n        }\n    }\n};\nFileReferencesTemplate = __decorate([\n    __param(1, ILabelService)\n], FileReferencesTemplate);\nlet FileReferencesRenderer = FileReferencesRenderer_1 = class FileReferencesRenderer {\n    constructor(_instantiationService) {\n        this._instantiationService = _instantiationService;\n        this.templateId = FileReferencesRenderer_1.id;\n    }\n    renderTemplate(container) {\n        return this._instantiationService.createInstance(FileReferencesTemplate, container);\n    }\n    renderElement(node, index, template) {\n        template.set(node.element, createMatches(node.filterData));\n    }\n    disposeTemplate(templateData) {\n        templateData.dispose();\n    }\n};\nFileReferencesRenderer.id = 'FileReferencesRenderer';\nFileReferencesRenderer = FileReferencesRenderer_1 = __decorate([\n    __param(0, IInstantiationService)\n], FileReferencesRenderer);\nexport { FileReferencesRenderer };\n//#endregion\n//#region render: Reference\nclass OneReferenceTemplate {\n    constructor(container) {\n        this.label = new HighlightedLabel(container);\n    }\n    set(element, score) {\n        var _a;\n        const preview = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\n        if (!preview || !preview.value) {\n            // this means we FAILED to resolve the document or the value is the empty string\n            this.label.set(`${basename(element.uri)}:${element.range.startLineNumber + 1}:${element.range.startColumn + 1}`);\n        }\n        else {\n            // render search match as highlight unless\n            // we have score, then render the score\n            const { value, highlight } = preview;\n            if (score && !FuzzyScore.isDefault(score)) {\n                this.label.element.classList.toggle('referenceMatch', false);\n                this.label.set(value, createMatches(score));\n            }\n            else {\n                this.label.element.classList.toggle('referenceMatch', true);\n                this.label.set(value, [highlight]);\n            }\n        }\n    }\n}\nexport class OneReferenceRenderer {\n    constructor() {\n        this.templateId = OneReferenceRenderer.id;\n    }\n    renderTemplate(container) {\n        return new OneReferenceTemplate(container);\n    }\n    renderElement(node, index, templateData) {\n        templateData.set(node.element, node.filterData);\n    }\n    disposeTemplate() {\n    }\n}\nOneReferenceRenderer.id = 'OneReferenceRenderer';\n//#endregion\nexport class AccessibilityProvider {\n    getWidgetAriaLabel() {\n        return localize('treeAriaLabel', \"References\");\n    }\n    getAriaLabel(element) {\n        return element.ariaMessage;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { Sizing, SplitView } from '../../../../../base/browser/ui/splitview/splitview.js';\nimport { Color } from '../../../../../base/common/color.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { basenameOrAuthority, dirname } from '../../../../../base/common/resources.js';\nimport './referencesWidget.css';\nimport { EmbeddedCodeEditorWidget } from '../../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ModelDecorationOptions, TextModel } from '../../../../common/model/textModel.js';\nimport { ILanguageConfigurationService } from '../../../../common/languages/languageConfigurationRegistry.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../common/languages/modesRegistry.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { AccessibilityProvider, DataSource, Delegate, FileReferencesRenderer, IdentityProvider, OneReferenceRenderer, StringRepresentationProvider } from './referencesTree.js';\nimport * as peekView from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { WorkbenchAsyncDataTree } from '../../../../../platform/list/browser/listService.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { IUndoRedoService } from '../../../../../platform/undoRedo/common/undoRedo.js';\nimport { FileReferences, OneReference } from '../referencesModel.js';\nclass DecorationsManager {\n    constructor(_editor, _model) {\n        this._editor = _editor;\n        this._model = _model;\n        this._decorations = new Map();\n        this._decorationIgnoreSet = new Set();\n        this._callOnDispose = new DisposableStore();\n        this._callOnModelChange = new DisposableStore();\n        this._callOnDispose.add(this._editor.onDidChangeModel(() => this._onModelChanged()));\n        this._onModelChanged();\n    }\n    dispose() {\n        this._callOnModelChange.dispose();\n        this._callOnDispose.dispose();\n        this.removeDecorations();\n    }\n    _onModelChanged() {\n        this._callOnModelChange.clear();\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const ref of this._model.references) {\n            if (ref.uri.toString() === model.uri.toString()) {\n                this._addDecorations(ref.parent);\n                return;\n            }\n        }\n    }\n    _addDecorations(reference) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(() => this._onDecorationChanged()));\n        const newDecorations = [];\n        const newDecorationsActualIndex = [];\n        for (let i = 0, len = reference.children.length; i < len; i++) {\n            const oneReference = reference.children[i];\n            if (this._decorationIgnoreSet.has(oneReference.id)) {\n                continue;\n            }\n            if (oneReference.uri.toString() !== this._editor.getModel().uri.toString()) {\n                continue;\n            }\n            newDecorations.push({\n                range: oneReference.range,\n                options: DecorationsManager.DecorationOptions\n            });\n            newDecorationsActualIndex.push(i);\n        }\n        this._editor.changeDecorations((changeAccessor) => {\n            const decorations = changeAccessor.deltaDecorations([], newDecorations);\n            for (let i = 0; i < decorations.length; i++) {\n                this._decorations.set(decorations[i], reference.children[newDecorationsActualIndex[i]]);\n            }\n        });\n    }\n    _onDecorationChanged() {\n        const toRemove = [];\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const [decorationId, reference] of this._decorations) {\n            const newRange = model.getDecorationRange(decorationId);\n            if (!newRange) {\n                continue;\n            }\n            let ignore = false;\n            if (Range.equalsRange(newRange, reference.range)) {\n                continue;\n            }\n            if (Range.spansMultipleLines(newRange)) {\n                ignore = true;\n            }\n            else {\n                const lineLength = reference.range.endColumn - reference.range.startColumn;\n                const newLineLength = newRange.endColumn - newRange.startColumn;\n                if (lineLength !== newLineLength) {\n                    ignore = true;\n                }\n            }\n            if (ignore) {\n                this._decorationIgnoreSet.add(reference.id);\n                toRemove.push(decorationId);\n            }\n            else {\n                reference.range = newRange;\n            }\n        }\n        for (let i = 0, len = toRemove.length; i < len; i++) {\n            this._decorations.delete(toRemove[i]);\n        }\n        this._editor.removeDecorations(toRemove);\n    }\n    removeDecorations() {\n        this._editor.removeDecorations([...this._decorations.keys()]);\n        this._decorations.clear();\n    }\n}\nDecorationsManager.DecorationOptions = ModelDecorationOptions.register({\n    description: 'reference-decoration',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'reference-decoration'\n});\nexport class LayoutData {\n    constructor() {\n        this.ratio = 0.7;\n        this.heightInLines = 18;\n    }\n    static fromJSON(raw) {\n        let ratio;\n        let heightInLines;\n        try {\n            const data = JSON.parse(raw);\n            ratio = data.ratio;\n            heightInLines = data.heightInLines;\n        }\n        catch (_a) {\n            //\n        }\n        return {\n            ratio: ratio || 0.7,\n            heightInLines: heightInLines || 18\n        };\n    }\n}\nclass ReferencesTree extends WorkbenchAsyncDataTree {\n}\n/**\n * ZoneWidget that is shown inside the editor\n */\nlet ReferenceWidget = class ReferenceWidget extends peekView.PeekViewWidget {\n    constructor(editor, _defaultTreeKeyboardSupport, layoutData, themeService, _textModelResolverService, _instantiationService, _peekViewService, _uriLabel, _undoRedoService, _keybindingService, _languageService, _languageConfigurationService) {\n        super(editor, { showFrame: false, showArrow: true, isResizeable: true, isAccessible: true, supportOnTitleClick: true }, _instantiationService);\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n        this.layoutData = layoutData;\n        this._textModelResolverService = _textModelResolverService;\n        this._instantiationService = _instantiationService;\n        this._peekViewService = _peekViewService;\n        this._uriLabel = _uriLabel;\n        this._undoRedoService = _undoRedoService;\n        this._keybindingService = _keybindingService;\n        this._languageService = _languageService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._disposeOnNewModel = new DisposableStore();\n        this._callOnDispose = new DisposableStore();\n        this._onDidSelectReference = new Emitter();\n        this.onDidSelectReference = this._onDidSelectReference.event;\n        this._dim = new dom.Dimension(0, 0);\n        this._applyTheme(themeService.getColorTheme());\n        this._callOnDispose.add(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this._peekViewService.addExclusiveWidget(editor, this);\n        this.create();\n    }\n    dispose() {\n        this.setModel(undefined);\n        this._callOnDispose.dispose();\n        this._disposeOnNewModel.dispose();\n        dispose(this._preview);\n        dispose(this._previewNotAvailableMessage);\n        dispose(this._tree);\n        dispose(this._previewModelReference);\n        this._splitView.dispose();\n        super.dispose();\n    }\n    _applyTheme(theme) {\n        const borderColor = theme.getColor(peekView.peekViewBorder) || Color.transparent;\n        this.style({\n            arrowColor: borderColor,\n            frameColor: borderColor,\n            headerBackgroundColor: theme.getColor(peekView.peekViewTitleBackground) || Color.transparent,\n            primaryHeadingColor: theme.getColor(peekView.peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(peekView.peekViewTitleInfoForeground)\n        });\n    }\n    show(where) {\n        super.show(where, this.layoutData.heightInLines || 18);\n    }\n    focusOnReferenceTree() {\n        this._tree.domFocus();\n    }\n    focusOnPreviewEditor() {\n        this._preview.focus();\n    }\n    isPreviewEditorFocused() {\n        return this._preview.hasTextFocus();\n    }\n    _onTitleClick(e) {\n        if (this._preview && this._preview.getModel()) {\n            this._onDidSelectReference.fire({\n                element: this._getFocusedReference(),\n                kind: e.ctrlKey || e.metaKey || e.altKey ? 'side' : 'open',\n                source: 'title'\n            });\n        }\n    }\n    _fillBody(containerElement) {\n        this.setCssClass('reference-zone-widget');\n        // message pane\n        this._messageContainer = dom.append(containerElement, dom.$('div.messages'));\n        dom.hide(this._messageContainer);\n        this._splitView = new SplitView(containerElement, { orientation: 1 /* Orientation.HORIZONTAL */ });\n        // editor\n        this._previewContainer = dom.append(containerElement, dom.$('div.preview.inline'));\n        const options = {\n            scrollBeyondLastLine: false,\n            scrollbar: {\n                verticalScrollbarSize: 14,\n                horizontal: 'auto',\n                useShadows: true,\n                verticalHasArrows: false,\n                horizontalHasArrows: false,\n                alwaysConsumeMouseWheel: true\n            },\n            overviewRulerLanes: 2,\n            fixedOverflowWidgets: true,\n            minimap: {\n                enabled: false\n            }\n        };\n        this._preview = this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._previewContainer, options, {}, this.editor);\n        dom.hide(this._previewContainer);\n        this._previewNotAvailableMessage = new TextModel(nls.localize('missingPreviewMessage', \"no preview available\"), PLAINTEXT_LANGUAGE_ID, TextModel.DEFAULT_CREATION_OPTIONS, null, this._undoRedoService, this._languageService, this._languageConfigurationService);\n        // tree\n        this._treeContainer = dom.append(containerElement, dom.$('div.ref-tree.inline'));\n        const treeOptions = {\n            keyboardSupport: this._defaultTreeKeyboardSupport,\n            accessibilityProvider: new AccessibilityProvider(),\n            keyboardNavigationLabelProvider: this._instantiationService.createInstance(StringRepresentationProvider),\n            identityProvider: new IdentityProvider(),\n            openOnSingleClick: true,\n            selectionNavigation: true,\n            overrideStyles: {\n                listBackground: peekView.peekViewResultsBackground\n            }\n        };\n        if (this._defaultTreeKeyboardSupport) {\n            // the tree will consume `Escape` and prevent the widget from closing\n            this._callOnDispose.add(dom.addStandardDisposableListener(this._treeContainer, 'keydown', (e) => {\n                if (e.equals(9 /* KeyCode.Escape */)) {\n                    this._keybindingService.dispatchEvent(e, e.target);\n                    e.stopPropagation();\n                }\n            }, true));\n        }\n        this._tree = this._instantiationService.createInstance(ReferencesTree, 'ReferencesWidget', this._treeContainer, new Delegate(), [\n            this._instantiationService.createInstance(FileReferencesRenderer),\n            this._instantiationService.createInstance(OneReferenceRenderer),\n        ], this._instantiationService.createInstance(DataSource), treeOptions);\n        // split stuff\n        this._splitView.addView({\n            onDidChange: Event.None,\n            element: this._previewContainer,\n            minimumSize: 200,\n            maximumSize: Number.MAX_VALUE,\n            layout: (width) => {\n                this._preview.layout({ height: this._dim.height, width });\n            }\n        }, Sizing.Distribute);\n        this._splitView.addView({\n            onDidChange: Event.None,\n            element: this._treeContainer,\n            minimumSize: 100,\n            maximumSize: Number.MAX_VALUE,\n            layout: (width) => {\n                this._treeContainer.style.height = `${this._dim.height}px`;\n                this._treeContainer.style.width = `${width}px`;\n                this._tree.layout(this._dim.height, width);\n            }\n        }, Sizing.Distribute);\n        this._disposables.add(this._splitView.onDidSashChange(() => {\n            if (this._dim.width) {\n                this.layoutData.ratio = this._splitView.getViewSize(0) / this._dim.width;\n            }\n        }, undefined));\n        // listen on selection and focus\n        const onEvent = (element, kind) => {\n            if (element instanceof OneReference) {\n                if (kind === 'show') {\n                    this._revealReference(element, false);\n                }\n                this._onDidSelectReference.fire({ element, kind, source: 'tree' });\n            }\n        };\n        this._tree.onDidOpen(e => {\n            if (e.sideBySide) {\n                onEvent(e.element, 'side');\n            }\n            else if (e.editorOptions.pinned) {\n                onEvent(e.element, 'goto');\n            }\n            else {\n                onEvent(e.element, 'show');\n            }\n        });\n        dom.hide(this._treeContainer);\n    }\n    _onWidth(width) {\n        if (this._dim) {\n            this._doLayoutBody(this._dim.height, width);\n        }\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        super._doLayoutBody(heightInPixel, widthInPixel);\n        this._dim = new dom.Dimension(widthInPixel, heightInPixel);\n        this.layoutData.heightInLines = this._viewZone ? this._viewZone.heightInLines : this.layoutData.heightInLines;\n        this._splitView.layout(widthInPixel);\n        this._splitView.resizeView(0, widthInPixel * this.layoutData.ratio);\n    }\n    setSelection(selection) {\n        return this._revealReference(selection, true).then(() => {\n            if (!this._model) {\n                // disposed\n                return;\n            }\n            // show in tree\n            this._tree.setSelection([selection]);\n            this._tree.setFocus([selection]);\n        });\n    }\n    setModel(newModel) {\n        // clean up\n        this._disposeOnNewModel.clear();\n        this._model = newModel;\n        if (this._model) {\n            return this._onNewModel();\n        }\n        return Promise.resolve();\n    }\n    _onNewModel() {\n        if (!this._model) {\n            return Promise.resolve(undefined);\n        }\n        if (this._model.isEmpty) {\n            this.setTitle('');\n            this._messageContainer.innerText = nls.localize('noResults', \"No results\");\n            dom.show(this._messageContainer);\n            return Promise.resolve(undefined);\n        }\n        dom.hide(this._messageContainer);\n        this._decorationsManager = new DecorationsManager(this._preview, this._model);\n        this._disposeOnNewModel.add(this._decorationsManager);\n        // listen on model changes\n        this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(reference => this._tree.rerender(reference)));\n        // listen on editor\n        this._disposeOnNewModel.add(this._preview.onMouseDown(e => {\n            const { event, target } = e;\n            if (event.detail !== 2) {\n                return;\n            }\n            const element = this._getFocusedReference();\n            if (!element) {\n                return;\n            }\n            this._onDidSelectReference.fire({\n                element: { uri: element.uri, range: target.range },\n                kind: (event.ctrlKey || event.metaKey || event.altKey) ? 'side' : 'open',\n                source: 'editor'\n            });\n        }));\n        // make sure things are rendered\n        this.container.classList.add('results-loaded');\n        dom.show(this._treeContainer);\n        dom.show(this._previewContainer);\n        this._splitView.layout(this._dim.width);\n        this.focusOnReferenceTree();\n        // pick input and a reference to begin with\n        return this._tree.setInput(this._model.groups.length === 1 ? this._model.groups[0] : this._model);\n    }\n    _getFocusedReference() {\n        const [element] = this._tree.getFocus();\n        if (element instanceof OneReference) {\n            return element;\n        }\n        else if (element instanceof FileReferences) {\n            if (element.children.length > 0) {\n                return element.children[0];\n            }\n        }\n        return undefined;\n    }\n    revealReference(reference) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._revealReference(reference, false);\n            this._onDidSelectReference.fire({ element: reference, kind: 'goto', source: 'tree' });\n        });\n    }\n    _revealReference(reference, revealParent) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // check if there is anything to do...\n            if (this._revealedReference === reference) {\n                return;\n            }\n            this._revealedReference = reference;\n            // Update widget header\n            if (reference.uri.scheme !== Schemas.inMemory) {\n                this.setTitle(basenameOrAuthority(reference.uri), this._uriLabel.getUriLabel(dirname(reference.uri)));\n            }\n            else {\n                this.setTitle(nls.localize('peekView.alternateTitle', \"References\"));\n            }\n            const promise = this._textModelResolverService.createModelReference(reference.uri);\n            if (this._tree.getInput() === reference.parent) {\n                this._tree.reveal(reference);\n            }\n            else {\n                if (revealParent) {\n                    this._tree.reveal(reference.parent);\n                }\n                yield this._tree.expand(reference.parent);\n                this._tree.reveal(reference);\n            }\n            const ref = yield promise;\n            if (!this._model) {\n                // disposed\n                ref.dispose();\n                return;\n            }\n            dispose(this._previewModelReference);\n            // show in editor\n            const model = ref.object;\n            if (model) {\n                const scrollType = this._preview.getModel() === model.textEditorModel ? 0 /* ScrollType.Smooth */ : 1 /* ScrollType.Immediate */;\n                const sel = Range.lift(reference.range).collapseToStart();\n                this._previewModelReference = ref;\n                this._preview.setModel(model.textEditorModel);\n                this._preview.setSelection(sel);\n                this._preview.revealRangeInCenter(sel, scrollType);\n            }\n            else {\n                this._preview.setModel(this._previewNotAvailableMessage);\n                ref.dispose();\n            }\n        });\n    }\n};\nReferenceWidget = __decorate([\n    __param(3, IThemeService),\n    __param(4, ITextModelService),\n    __param(5, IInstantiationService),\n    __param(6, peekView.IPeekViewService),\n    __param(7, ILabelService),\n    __param(8, IUndoRedoService),\n    __param(9, IKeybindingService),\n    __param(10, ILanguageService),\n    __param(11, ILanguageConfigurationService)\n], ReferenceWidget);\nexport { ReferenceWidget };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar ReferencesController_1;\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { ICodeEditorService } from '../../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { getOuterEditor, PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { CommandsRegistry } from '../../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { IListService, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse, WorkbenchTreeElementCanExpand } from '../../../../../platform/list/browser/listService.js';\nimport { INotificationService } from '../../../../../platform/notification/common/notification.js';\nimport { IStorageService } from '../../../../../platform/storage/common/storage.js';\nimport { OneReference } from '../referencesModel.js';\nimport { LayoutData, ReferenceWidget } from './referencesWidget.js';\nexport const ctxReferenceSearchVisible = new RawContextKey('referenceSearchVisible', false, nls.localize('referenceSearchVisible', \"Whether reference peek is visible, like 'Peek References' or 'Peek Definition'\"));\nlet ReferencesController = ReferencesController_1 = class ReferencesController {\n    static get(editor) {\n        return editor.getContribution(ReferencesController_1.ID);\n    }\n    constructor(_defaultTreeKeyboardSupport, _editor, contextKeyService, _editorService, _notificationService, _instantiationService, _storageService, _configurationService) {\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n        this._editor = _editor;\n        this._editorService = _editorService;\n        this._notificationService = _notificationService;\n        this._instantiationService = _instantiationService;\n        this._storageService = _storageService;\n        this._configurationService = _configurationService;\n        this._disposables = new DisposableStore();\n        this._requestIdPool = 0;\n        this._ignoreModelChangeEvent = false;\n        this._referenceSearchVisible = ctxReferenceSearchVisible.bindTo(contextKeyService);\n    }\n    dispose() {\n        var _a, _b;\n        this._referenceSearchVisible.reset();\n        this._disposables.dispose();\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._model) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._widget = undefined;\n        this._model = undefined;\n    }\n    toggleWidget(range, modelPromise, peekMode) {\n        // close current widget and return early is position didn't change\n        let widgetPosition;\n        if (this._widget) {\n            widgetPosition = this._widget.position;\n        }\n        this.closeWidget();\n        if (!!widgetPosition && range.containsPosition(widgetPosition)) {\n            return;\n        }\n        this._peekMode = peekMode;\n        this._referenceSearchVisible.set(true);\n        // close the widget on model/mode changes\n        this._disposables.add(this._editor.onDidChangeModelLanguage(() => { this.closeWidget(); }));\n        this._disposables.add(this._editor.onDidChangeModel(() => {\n            if (!this._ignoreModelChangeEvent) {\n                this.closeWidget();\n            }\n        }));\n        const storageKey = 'peekViewLayout';\n        const data = LayoutData.fromJSON(this._storageService.get(storageKey, 0 /* StorageScope.PROFILE */, '{}'));\n        this._widget = this._instantiationService.createInstance(ReferenceWidget, this._editor, this._defaultTreeKeyboardSupport, data);\n        this._widget.setTitle(nls.localize('labelLoading', \"Loading...\"));\n        this._widget.show(range);\n        this._disposables.add(this._widget.onDidClose(() => {\n            modelPromise.cancel();\n            if (this._widget) {\n                this._storageService.store(storageKey, JSON.stringify(this._widget.layoutData), 0 /* StorageScope.PROFILE */, 1 /* StorageTarget.MACHINE */);\n                this._widget = undefined;\n            }\n            this.closeWidget();\n        }));\n        this._disposables.add(this._widget.onDidSelectReference(event => {\n            const { element, kind } = event;\n            if (!element) {\n                return;\n            }\n            switch (kind) {\n                case 'open':\n                    if (event.source !== 'editor' || !this._configurationService.getValue('editor.stablePeek')) {\n                        // when stable peek is configured we don't close\n                        // the peek window on selecting the editor\n                        this.openReference(element, false, false);\n                    }\n                    break;\n                case 'side':\n                    this.openReference(element, true, false);\n                    break;\n                case 'goto':\n                    if (peekMode) {\n                        this._gotoReference(element, true);\n                    }\n                    else {\n                        this.openReference(element, false, true);\n                    }\n                    break;\n            }\n        }));\n        const requestId = ++this._requestIdPool;\n        modelPromise.then(model => {\n            var _a;\n            // still current request? widget still open?\n            if (requestId !== this._requestIdPool || !this._widget) {\n                model.dispose();\n                return undefined;\n            }\n            (_a = this._model) === null || _a === void 0 ? void 0 : _a.dispose();\n            this._model = model;\n            // show widget\n            return this._widget.setModel(this._model).then(() => {\n                if (this._widget && this._model && this._editor.hasModel()) { // might have been closed\n                    // set title\n                    if (!this._model.isEmpty) {\n                        this._widget.setMetaTitle(nls.localize('metaTitle.N', \"{0} ({1})\", this._model.title, this._model.references.length));\n                    }\n                    else {\n                        this._widget.setMetaTitle('');\n                    }\n                    // set 'best' selection\n                    const uri = this._editor.getModel().uri;\n                    const pos = new Position(range.startLineNumber, range.startColumn);\n                    const selection = this._model.nearestReference(uri, pos);\n                    if (selection) {\n                        return this._widget.setSelection(selection).then(() => {\n                            if (this._widget && this._editor.getOption(86 /* EditorOption.peekWidgetDefaultFocus */) === 'editor') {\n                                this._widget.focusOnPreviewEditor();\n                            }\n                        });\n                    }\n                }\n                return undefined;\n            });\n        }, error => {\n            this._notificationService.error(error);\n        });\n    }\n    changeFocusBetweenPreviewAndReferences() {\n        if (!this._widget) {\n            // can be called while still resolving...\n            return;\n        }\n        if (this._widget.isPreviewEditorFocused()) {\n            this._widget.focusOnReferenceTree();\n        }\n        else {\n            this._widget.focusOnPreviewEditor();\n        }\n    }\n    goToNextOrPreviousReference(fwd) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel() || !this._model || !this._widget) {\n                // can be called while still resolving...\n                return;\n            }\n            const currentPosition = this._widget.position;\n            if (!currentPosition) {\n                return;\n            }\n            const source = this._model.nearestReference(this._editor.getModel().uri, currentPosition);\n            if (!source) {\n                return;\n            }\n            const target = this._model.nextOrPreviousReference(source, fwd);\n            const editorFocus = this._editor.hasTextFocus();\n            const previewEditorFocus = this._widget.isPreviewEditorFocused();\n            yield this._widget.setSelection(target);\n            yield this._gotoReference(target, false);\n            if (editorFocus) {\n                this._editor.focus();\n            }\n            else if (this._widget && previewEditorFocus) {\n                this._widget.focusOnPreviewEditor();\n            }\n        });\n    }\n    revealReference(reference) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel() || !this._model || !this._widget) {\n                // can be called while still resolving...\n                return;\n            }\n            yield this._widget.revealReference(reference);\n        });\n    }\n    closeWidget(focusEditor = true) {\n        var _a, _b;\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._model) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._referenceSearchVisible.reset();\n        this._disposables.clear();\n        this._widget = undefined;\n        this._model = undefined;\n        if (focusEditor) {\n            this._editor.focus();\n        }\n        this._requestIdPool += 1; // Cancel pending requests\n    }\n    _gotoReference(ref, pinned) {\n        var _a;\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.hide();\n        this._ignoreModelChangeEvent = true;\n        const range = Range.lift(ref.range).collapseToStart();\n        return this._editorService.openCodeEditor({\n            resource: ref.uri,\n            options: { selection: range, selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */, pinned }\n        }, this._editor).then(openedEditor => {\n            var _a;\n            this._ignoreModelChangeEvent = false;\n            if (!openedEditor || !this._widget) {\n                // something went wrong...\n                this.closeWidget();\n                return;\n            }\n            if (this._editor === openedEditor) {\n                //\n                this._widget.show(range);\n                this._widget.focusOnReferenceTree();\n            }\n            else {\n                // we opened a different editor instance which means a different controller instance.\n                // therefore we stop with this controller and continue with the other\n                const other = ReferencesController_1.get(openedEditor);\n                const model = this._model.clone();\n                this.closeWidget();\n                openedEditor.focus();\n                other === null || other === void 0 ? void 0 : other.toggleWidget(range, createCancelablePromise(_ => Promise.resolve(model)), (_a = this._peekMode) !== null && _a !== void 0 ? _a : false);\n            }\n        }, (err) => {\n            this._ignoreModelChangeEvent = false;\n            onUnexpectedError(err);\n        });\n    }\n    openReference(ref, sideBySide, pinned) {\n        // clear stage\n        if (!sideBySide) {\n            this.closeWidget();\n        }\n        const { uri, range } = ref;\n        this._editorService.openCodeEditor({\n            resource: uri,\n            options: { selection: range, selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */, pinned }\n        }, this._editor, sideBySide);\n    }\n};\nReferencesController.ID = 'editor.contrib.referencesController';\nReferencesController = ReferencesController_1 = __decorate([\n    __param(2, IContextKeyService),\n    __param(3, ICodeEditorService),\n    __param(4, INotificationService),\n    __param(5, IInstantiationService),\n    __param(6, IStorageService),\n    __param(7, IConfigurationService)\n], ReferencesController);\nexport { ReferencesController };\nfunction withController(accessor, fn) {\n    const outerEditor = getOuterEditor(accessor);\n    if (!outerEditor) {\n        return;\n    }\n    const controller = ReferencesController.get(outerEditor);\n    if (controller) {\n        fn(controller);\n    }\n}\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'togglePeekWidgetFocus',\n    weight: 100 /* KeybindingWeight.EditorContrib */,\n    primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 60 /* KeyCode.F2 */),\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.changeFocusBetweenPreviewAndReferences();\n        });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'goToNextReference',\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 10,\n    primary: 62 /* KeyCode.F4 */,\n    secondary: [70 /* KeyCode.F12 */],\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.goToNextOrPreviousReference(true);\n        });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'goToPreviousReference',\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 10,\n    primary: 1024 /* KeyMod.Shift */ | 62 /* KeyCode.F4 */,\n    secondary: [1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */],\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.goToNextOrPreviousReference(false);\n        });\n    }\n});\n// commands that aren't needed anymore because there is now ContextKeyExpr.OR\nCommandsRegistry.registerCommandAlias('goToNextReferenceFromEmbeddedEditor', 'goToNextReference');\nCommandsRegistry.registerCommandAlias('goToPreviousReferenceFromEmbeddedEditor', 'goToPreviousReference');\n// close\nCommandsRegistry.registerCommandAlias('closeReferenceSearchEditor', 'closeReferenceSearch');\nCommandsRegistry.registerCommand('closeReferenceSearch', accessor => withController(accessor, controller => controller.closeWidget()));\nKeybindingsRegistry.registerKeybindingRule({\n    id: 'closeReferenceSearch',\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 101,\n    primary: 9 /* KeyCode.Escape */,\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */],\n    when: ContextKeyExpr.and(PeekContext.inPeekEditor, ContextKeyExpr.not('config.editor.stablePeek'))\n});\nKeybindingsRegistry.registerKeybindingRule({\n    id: 'closeReferenceSearch',\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */ + 50,\n    primary: 9 /* KeyCode.Escape */,\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */],\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, ContextKeyExpr.not('config.editor.stablePeek'))\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'revealReference',\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */,\n    primary: 3 /* KeyCode.Enter */,\n    mac: {\n        primary: 3 /* KeyCode.Enter */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */]\n    },\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse.negate(), WorkbenchTreeElementCanExpand.negate()),\n    handler(accessor) {\n        var _a;\n        const listService = accessor.get(IListService);\n        const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n        if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n            withController(accessor, controller => controller.revealReference(focus[0]));\n        }\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'openReferenceToSide',\n    weight: 100 /* KeybindingWeight.EditorContrib */,\n    primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n    mac: {\n        primary: 256 /* KeyMod.WinCtrl */ | 3 /* KeyCode.Enter */\n    },\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse.negate(), WorkbenchTreeElementCanExpand.negate()),\n    handler(accessor) {\n        var _a;\n        const listService = accessor.get(IListService);\n        const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n        if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n            withController(accessor, controller => controller.openReference(focus[0], true, true));\n        }\n    }\n});\nCommandsRegistry.registerCommand('openReference', (accessor) => {\n    var _a;\n    const listService = accessor.get(IListService);\n    const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n    if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n        withController(accessor, controller => controller.openReference(focus[0], false, true));\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { defaultGenerator } from '../../../../base/common/idGenerator.js';\nimport { dispose } from '../../../../base/common/lifecycle.js';\nimport { ResourceMap } from '../../../../base/common/map.js';\nimport { basename, extUri } from '../../../../base/common/resources.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nexport class OneReference {\n    constructor(isProviderFirst, parent, link, _rangeCallback) {\n        this.isProviderFirst = isProviderFirst;\n        this.parent = parent;\n        this.link = link;\n        this._rangeCallback = _rangeCallback;\n        this.id = defaultGenerator.nextId();\n    }\n    get uri() {\n        return this.link.uri;\n    }\n    get range() {\n        var _a, _b;\n        return (_b = (_a = this._range) !== null && _a !== void 0 ? _a : this.link.targetSelectionRange) !== null && _b !== void 0 ? _b : this.link.range;\n    }\n    set range(value) {\n        this._range = value;\n        this._rangeCallback(this);\n    }\n    get ariaMessage() {\n        var _a;\n        const preview = (_a = this.parent.getPreview(this)) === null || _a === void 0 ? void 0 : _a.preview(this.range);\n        if (!preview) {\n            return localize('aria.oneReference', \"in {0} on line {1} at column {2}\", basename(this.uri), this.range.startLineNumber, this.range.startColumn);\n        }\n        else {\n            return localize({ key: 'aria.oneReference.preview', comment: ['Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code'] }, \"{0} in {1} on line {2} at column {3}\", preview.value, basename(this.uri), this.range.startLineNumber, this.range.startColumn);\n        }\n    }\n}\nexport class FilePreview {\n    constructor(_modelReference) {\n        this._modelReference = _modelReference;\n    }\n    dispose() {\n        this._modelReference.dispose();\n    }\n    preview(range, n = 8) {\n        const model = this._modelReference.object.textEditorModel;\n        if (!model) {\n            return undefined;\n        }\n        const { startLineNumber, startColumn, endLineNumber, endColumn } = range;\n        const word = model.getWordUntilPosition({ lineNumber: startLineNumber, column: startColumn - n });\n        const beforeRange = new Range(startLineNumber, word.startColumn, startLineNumber, startColumn);\n        const afterRange = new Range(endLineNumber, endColumn, endLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        const before = model.getValueInRange(beforeRange).replace(/^\\s+/, '');\n        const inside = model.getValueInRange(range);\n        const after = model.getValueInRange(afterRange).replace(/\\s+$/, '');\n        return {\n            value: before + inside + after,\n            highlight: { start: before.length, end: before.length + inside.length }\n        };\n    }\n}\nexport class FileReferences {\n    constructor(parent, uri) {\n        this.parent = parent;\n        this.uri = uri;\n        this.children = [];\n        this._previews = new ResourceMap();\n    }\n    dispose() {\n        dispose(this._previews.values());\n        this._previews.clear();\n    }\n    getPreview(child) {\n        return this._previews.get(child.uri);\n    }\n    get ariaMessage() {\n        const len = this.children.length;\n        if (len === 1) {\n            return localize('aria.fileReferences.1', \"1 symbol in {0}, full path {1}\", basename(this.uri), this.uri.fsPath);\n        }\n        else {\n            return localize('aria.fileReferences.N', \"{0} symbols in {1}, full path {2}\", len, basename(this.uri), this.uri.fsPath);\n        }\n    }\n    resolve(textModelResolverService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._previews.size !== 0) {\n                return this;\n            }\n            for (const child of this.children) {\n                if (this._previews.has(child.uri)) {\n                    continue;\n                }\n                try {\n                    const ref = yield textModelResolverService.createModelReference(child.uri);\n                    this._previews.set(child.uri, new FilePreview(ref));\n                }\n                catch (err) {\n                    onUnexpectedError(err);\n                }\n            }\n            return this;\n        });\n    }\n}\nexport class ReferencesModel {\n    constructor(links, title) {\n        this.groups = [];\n        this.references = [];\n        this._onDidChangeReferenceRange = new Emitter();\n        this.onDidChangeReferenceRange = this._onDidChangeReferenceRange.event;\n        this._links = links;\n        this._title = title;\n        // grouping and sorting\n        const [providersFirst] = links;\n        links.sort(ReferencesModel._compareReferences);\n        let current;\n        for (const link of links) {\n            if (!current || !extUri.isEqual(current.uri, link.uri, true)) {\n                // new group\n                current = new FileReferences(this, link.uri);\n                this.groups.push(current);\n            }\n            // append, check for equality first!\n            if (current.children.length === 0 || ReferencesModel._compareReferences(link, current.children[current.children.length - 1]) !== 0) {\n                const oneRef = new OneReference(providersFirst === link, current, link, ref => this._onDidChangeReferenceRange.fire(ref));\n                this.references.push(oneRef);\n                current.children.push(oneRef);\n            }\n        }\n    }\n    dispose() {\n        dispose(this.groups);\n        this._onDidChangeReferenceRange.dispose();\n        this.groups.length = 0;\n    }\n    clone() {\n        return new ReferencesModel(this._links, this._title);\n    }\n    get title() {\n        return this._title;\n    }\n    get isEmpty() {\n        return this.groups.length === 0;\n    }\n    get ariaMessage() {\n        if (this.isEmpty) {\n            return localize('aria.result.0', \"No results found\");\n        }\n        else if (this.references.length === 1) {\n            return localize('aria.result.1', \"Found 1 symbol in {0}\", this.references[0].uri.fsPath);\n        }\n        else if (this.groups.length === 1) {\n            return localize('aria.result.n1', \"Found {0} symbols in {1}\", this.references.length, this.groups[0].uri.fsPath);\n        }\n        else {\n            return localize('aria.result.nm', \"Found {0} symbols in {1} files\", this.references.length, this.groups.length);\n        }\n    }\n    nextOrPreviousReference(reference, next) {\n        const { parent } = reference;\n        let idx = parent.children.indexOf(reference);\n        const childCount = parent.children.length;\n        const groupCount = parent.parent.groups.length;\n        if (groupCount === 1 || next && idx + 1 < childCount || !next && idx > 0) {\n            // cycling within one file\n            if (next) {\n                idx = (idx + 1) % childCount;\n            }\n            else {\n                idx = (idx + childCount - 1) % childCount;\n            }\n            return parent.children[idx];\n        }\n        idx = parent.parent.groups.indexOf(parent);\n        if (next) {\n            idx = (idx + 1) % groupCount;\n            return parent.parent.groups[idx].children[0];\n        }\n        else {\n            idx = (idx + groupCount - 1) % groupCount;\n            return parent.parent.groups[idx].children[parent.parent.groups[idx].children.length - 1];\n        }\n    }\n    nearestReference(resource, position) {\n        const nearest = this.references.map((ref, idx) => {\n            return {\n                idx,\n                prefixLen: strings.commonPrefixLength(ref.uri.toString(), resource.toString()),\n                offsetDist: Math.abs(ref.range.startLineNumber - position.lineNumber) * 100 + Math.abs(ref.range.startColumn - position.column)\n            };\n        }).sort((a, b) => {\n            if (a.prefixLen > b.prefixLen) {\n                return -1;\n            }\n            else if (a.prefixLen < b.prefixLen) {\n                return 1;\n            }\n            else if (a.offsetDist < b.offsetDist) {\n                return -1;\n            }\n            else if (a.offsetDist > b.offsetDist) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        })[0];\n        if (nearest) {\n            return this.references[nearest.idx];\n        }\n        return undefined;\n    }\n    referenceAt(resource, position) {\n        for (const ref of this.references) {\n            if (ref.uri.toString() === resource.toString()) {\n                if (Range.containsPosition(ref.range, position)) {\n                    return ref;\n                }\n            }\n        }\n        return undefined;\n    }\n    firstReference() {\n        for (const ref of this.references) {\n            if (ref.isProviderFirst) {\n                return ref;\n            }\n        }\n        return this.references[0];\n    }\n    static _compareReferences(a, b) {\n        return extUri.compare(a.uri, b.uri) || Range.compareRangesUsingStarts(a.range, b.range);\n    }\n}\n"],"names":["EditorFontZoomIn","EditorAction","constructor","super","id","label","nls","alias","precondition","undefined","run","accessor","editor","EditorZoom","setZoomLevel","getZoomLevel","EditorFontZoomOut","EditorFontZoomReset","registerEditorAction","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","alertFormattingEdits","edits","filter","edit","range","length","i","Range","plusRange","startLineNumber","endLineNumber","alert","getRealAndSyntheticDocumentFormattersOrdered","documentFormattingEditProvider","documentRangeFormattingEditProvider","model","seen","ExtensionIdentifierSet","docFormatter","ordered","formatter","push","extensionId","add","rangeFormatter","has","displayName","provideDocumentFormattingEdits","options","token","provideDocumentRangeFormattingEdits","getFullModelRange","FormattingConflicts","setFormatterSelector","selector","dispose","_selectors","unshift","select","document","mode","this","Iterable","first","formatDocumentRangesWithSelectedProvider","editorOrModel","rangeOrRanges","progress","instaService","get","IInstantiationService","documentRangeFormattingEditProviderRegistry","ILanguageFeaturesService","isCodeEditor","getModel","provider","selected","report","invokeFunction","formatDocumentRangesWithProvider","_a","_b","workerService","IEditorWorkerService","logService","ILogService","cts","EditorStateCancellationTokenSource","TextModelCancellationTokenSource","ranges","len","asArray","sort","compareRangesUsingStarts","areIntersectingOrTouching","fromPositions","getStartPosition","getEndPosition","computeEdits","_c","_d","trace","getFormattingOptions","hasIntersectingEdit","a","b","mergedA","reduce","acc","val","some","x","intersectRanges","otherEdit","allEdits","rawEditsList","provideDocumentRangesFormattingEdits","isCancellationRequested","j","mergedRange","splice","rawEdits","minimalEdits","computeMoreMinimalEdits","uri","FormattingEdit","execute","revealPositionInCenterIfOutsideViewport","getPosition","initialSelection","Selection","startColumn","endColumn","pushEditOperations","map","text","lift","forceMoveMarkers","undoEdits","formatDocumentWithSelectedProvider","languageFeaturesService","formatDocumentWithProvider","getOnTypeFormattingEdits","position","ch","providers","onTypeFormattingEditProvider","autoFormatTriggerCharacters","indexOf","provideOnTypeFormattingEdits","catch","onUnexpectedExternalError","LinkedList","CommandsRegistry","registerCommand","_len","arguments","args","Array","_key","resource","assertType","URI","isUri","isIRange","resolverService","ITextModelService","reference","createModelReference","isNonEmptyArray","getDocumentRangeFormattingEditsUntilResult","object","textEditorModel","CancellationToken","None","_len2","_key2","getDocumentFormattingEditsUntilResult","_len3","_key3","Position","isIPosition","__decorate","decorators","target","key","desc","d","c","r","Object","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","FormatOnType","_editor","_languageFeaturesService","_workerService","_disposables","DisposableStore","_sessionDisposables","onDidChange","_update","onDidChangeModel","onDidChangeModelLanguage","onDidChangeConfiguration","hasChanged","clear","getOption","hasModel","support","triggerChars","CharacterSet","charCodeAt","onDidType","lastCharCode","_trigger","String","fromCharCode","getSelections","getSelection","isEmpty","CancellationTokenSource","unbind","onDidChangeModelContent","isFlush","cancel","changes","lineNumber","finally","ID","FormatOnPaste","_instantiationService","_callOnDispose","_callOnModel","onDidPaste","_ref","Progress","onUnexpectedError","FormatDocumentAction","ContextKeyExpr","and","EditorContextKeys","notInCompositeEditor","writable","hasDocumentFormattingProvider","kbOpts","kbExpr","editorTextFocus","primary","linux","weight","contextMenuOpts","group","order","progressService","IEditorProgressService","showWhile","FormatSelectionAction","hasDocumentSelectionFormattingProvider","KeyChord","when","hasNonEmptySelection","getLineMaxColumn","registerEditorContribution","ICodeEditorService","getFocusedCodeEditor","commandService","ICommandService","executeCommand","_handleEolEdits","newEol","singleEdits","eol","pushEOL","_isFullModelReplaceEdit","editRange","validateRange","equalsRange","_edits","addUndoStops","pushUndoStop","scrollState","StableEditorScrollState","capture","executeEdits","EditOperation","replace","replaceMove","restoreRelativeVerticalPositionOfCursor","MarkerCoordinate","marker","index","total","MarkerList","resourceFilter","_markerService","_configService","_onDidChange","Emitter","event","_dispoables","_markers","_nextIdx","_resourceFilter","toString","compareOrder","getValue","compareMarker","res","compare","MarkerSeverity","severity","updateMarker","read","severities","Error","Warning","Info","m","onMarkerChanged","uris","fire","matches","_initIdx","fwd","found","idx","findIndex","binarySearch","word","getWordAtPosition","containsPosition","isBeforeOrEqual","resetIndex","move","oldIdx","find","IMarkerService","IConfigurationService","IMarkerNavigationService","createDecorator","MarkerNavigationService","_provider","getMarkerList","registerSingleton","MarkerNavigationWidget_1","MessageWidget","parent","onRelatedInformation","_openerService","_labelService","_lines","_longestLineLength","_relatedDiagnostics","WeakMap","domNode","createElement","className","_messageBlock","classList","setAttribute","appendChild","_relatedBlock","dom","preventDefault","related","_scrollable","ScrollableElement","horizontal","vertical","useShadows","horizontalScrollbarSize","verticalScrollbarSize","getDomNode","onScroll","style","left","concat","scrollLeft","top","scrollTop","update","source","message","relatedInformation","code","sourceAndCodeLength","lines","splitLines","line","Math","max","getAriaLabel","applyFontInfo","lastLineElement","innerText","height","lineHeight","detailsElement","sourceElement","codeElement","_codeLink","$","onclick","open","allowCommands","stopPropagation","relatedInformationNode","paddingTop","floor","container","relatedResource","getUriBasenameLabel","title","getUriLabel","set","relatedMessage","fontInfo","scrollWidth","ceil","typicalFullwidthCharacterWidth","scrollHeight","setScrollDimensions","layout","width","getHeightInLines","min","severityLabel","Hint","ariaLabel","getLineCount","lineContent","getLineContent","MarkerNavigationWidget","PeekViewWidget","_themeService","_menuService","instantiationService","_contextKeyService","showArrow","showFrame","isAccessible","frameWidth","_onDidSelectRelatedInformation","onDidSelectRelatedInformation","_severity","_backgroundColor","Color","white","_applyTheme","getColorTheme","onDidColorThemeChange","bind","create","theme","getColor","editorMarkerNavigationBackground","colorId","editorMarkerNavigationError","headerBackground","editorMarkerNavigationErrorHeader","editorMarkerNavigationWarning","editorMarkerNavigationWarningHeader","editorMarkerNavigationInfo","editorMarkerNavigationInfoHeader","frameColor","headerBg","arrowColor","headerBackgroundColor","primaryHeadingColor","peekViewTitleForeground","secondaryHeadingColor","peekViewTitleInfoForeground","_applyStyles","_parentContainer","backgroundColor","_fillHead","_actionbarWidget","actionRunner","onWillRun","focus","actions","menu","createMenu","TitleMenu","createAndFillInActionBarActions","icon","_fillTitleIcon","_icon","_fillBody","tabIndex","_container","_message","show","showAtMarker","markerIdx","markerCount","remove","editorPosition","computeRequiredHeight","detail","setTitle","basename","SeverityIcon","toSeverity","revealPositionNearTop","showStale","_relayout","_doLayoutBody","heightInPixel","widthInPixel","_heightInPixel","_onWidth","MenuId","IThemeService","IOpenerService","IMenuService","IContextKeyService","ILabelService","errorDefault","oneOf","editorErrorForeground","editorErrorBorder","warningDefault","editorWarningForeground","editorWarningBorder","infoDefault","editorInfoForeground","editorInfoBorder","registerColor","dark","light","hcDark","contrastBorder","hcLight","transparent","editorBackground","MarkerController_1","MarkerController","getContribution","_markerNavigationService","_editorService","_sessionDispoables","_widgetVisible","CONTEXT_MARKERS_NAVIGATION_VISIBLE","bindTo","_cleanUp","reset","_widget","_model","_getOrCreateModel","reusePosition","createInstance","onDidClose","close","onDidChangeCursorPosition","info","openCodeEditor","pinned","revealIfOpened","selection","collapseToStart","focusEditor","nagivate","multiFile","otherEditor","selectionRevealType","MarkerNavigationAction","_next","_multiFile","opts","_accessor","NextMarkerAction","LABEL","menuOpts","menuId","registerIcon","Codicon","arrowDown","PrevMarkerAction","arrowUp","MenubarGoMenu","comment","RawContextKey","MarkerCommand","EditorCommand","bindToContribution","registerEditorCommand","handler","secondary","ctxHasSymbols","localize","ISymbolNavigationService","SymbolNavigationService","contextKeyService","_notificationService","_keybindingService","_currentModel","_currentIdx","_ignoreEditorChange","_ctxHasSymbols","_currentState","_currentMessage","put","anchor","refModel","references","_showMessage","editorState","EditorState","listener","_","getActiveCodeEditor","seenUri","seenPosition","isEqual","combinedDisposable","revealNext","kb","lookupKeybinding","getLabel","status","INotificationService","IKeybindingService","runEditorCommand","KeybindingsRegistry","registerCommandAndKeybindingRule","editorService","_listener","Map","onCodeEditorRemove","_onDidRemoveEditor","onCodeEditorAdd","_onDidAddEditor","listCodeEditors","forEach","values","delete","_e","_f","_g","_h","MenuRegistry","appendMenuItem","EditorContext","submenu","EditorContextPeek","SymbolNavigationAnchor","is","thing","corePosition","SymbolNavigationAction","EditorAction2","all","_allSymbolNavigationCommands","_patchConfig","assign","f1","item","wrap","configuration","arg","notificationService","symbolNavService","promise","raceCancellation","_getLocationModel","_j","altAction","ariaMessage","referenceAt","altActionId","_getAlternativeCommand","_activeAlternativeCommands","referenceCount","muteMessage","MessageController","showMessage","_getNoResultFoundMessage","_onResult","err","error","gotoLocation","_getGoToPreference","EmbeddedCodeEditorWidget","openInPeek","firstReference","peek","targetEditor","_openReference","openToSide","_openInPeek","sideBySide","highlight","isLocationLink","targetSelectionRange","selectionSource","modelNow","decorations","createDecorationsCollection","description","setTimeout","controller","ReferencesController","toggleWidget","createCancelablePromise","Set","DefinitionAction","ReferencesModel","getDefinitionsAtPosition","definitionProvider","alternativeDefinitionCommand","multipleDefinitions","registerAction2","original","mnemonicTitle","hasDefinitionProvider","isInWalkThroughSnippet","toNegated","keybinding","IsWebContext","registerCommandAlias","PeekContext","notInPeekEditor","DeclarationAction","getDeclarationsAtPosition","declarationProvider","alternativeDeclarationCommand","multipleDeclarations","hasDeclarationProvider","TypeDefinitionAction","getTypeDefinitionsAtPosition","typeDefinitionProvider","alternativeTypeDefinitionCommand","multipleTypeDefinitions","hasTypeDefinitionProvider","ImplementationAction","getImplementationsAtPosition","implementationProvider","alternativeImplementationCommand","multipleImplementations","hasImplementationProvider","ReferencesAction","alternativeReferenceCommand","multipleReferences","hasReferenceProvider","getReferencesAtPosition","referenceProvider","GenericGoToLocationAction","config","_references","_gotoMultipleBehaviour","_position","_token","name","constraint","multiple","noResultsMessage","isArray","setPosition","invokeWithinContext","command","Boolean","codeEditorService","control","column","getLocationLinks","registry","provide","promises","coalesce","flat","provideDefinition","provideDeclaration","provideImplementation","provideTypeDefinition","compact","provideReferences","includeDeclaration","resultWithoutDeclaration","_sortedAndDeduped","callback","rawLinks","modelLinks","ref","link","registerModelAndPositionCommand","hasModifier","modifier","ClickLinkMouseEvent","isLeftClick","leftButton","isMiddleClick","middleButton","isRightClick","rightButton","hasTriggerModifier","triggerModifier","hasSideBySideModifier","triggerSideBySideModifier","isNoneOrSingleMouseDown","ClickLinkKeyboardEvent","keyCodeIsTriggerKey","keyCode","triggerKey","keyCodeIsSideBySideKey","triggerSideBySideKey","ClickLinkOptions","equals","other","createOptions","multiCursorModifier","platform","ClickLinkGesture","Disposable","_onMouseMoveOrRelevantKeyDown","_register","onMouseMoveOrRelevantKeyDown","_onExecute","onExecute","_onCancel","onCancel","_extractLineNumberFromMouseEvent","extractLineNumberFromMouseEvent","_opts","_lastMouseMoveEvent","_hasTriggerKeyOnMouseDown","_lineNumberOnMouseDown","newOpts","onMouseMove","_onEditorMouseMove","onMouseDown","_onEditorMouseDown","onMouseUp","_onEditorMouseUp","onKeyDown","_onEditorKeyDown","onKeyUp","_onEditorKeyUp","onMouseDrag","_resetHandler","onDidChangeCursorSelection","_onDidChangeCursorSelection","onDidScrollChange","scrollTopChanged","scrollLeftChanged","mouseEvent","currentLineNumber","GotoDefinitionAtPositionEditorContribution_1","GotoDefinitionAtPositionEditorContribution","textModelResolverService","languageService","toUnhook","toUnhookForKeyboard","currentWordAtPosition","previousPromise","linkDecorations","linkGesture","keyboardEvent","startFindDefinitionFromMouse","isEnabled","gotoDefinition","removeLinkDecorations","startFindDefinitionFromCursor","startFindDefinition","withKey","type","state","results","findDefinition","validate","linkRange","originSelectionRange","combinedRange","addDecoration","MarkdownString","appendText","previewValue","getPreviewValue","languageId","guessLanguageIdByFilepathOrFirstLine","appendCodeblock","rangeToUse","MAX_SOURCE_PREVIEW_LINES","getPreviewRangeBasedOnIndentation","stripIndentationFromPreviewRange","previewRange","minIndent","getLineFirstNonWhitespaceColumn","endIndent","getValueInRange","RegExp","trim","startIndent","maxLineNumber","hoverMessage","newDecorations","inlineClassName","injectedText","ModelDecorationInjectedTextOptions","canPeek","isInPeekEditor","inPeekEditor","ILanguageService","FileReferencesRenderer_1","DataSource","_resolverService","hasChildren","element","FileReferences","getChildren","groups","children","Delegate","getHeight","getTemplateId","FileReferencesRenderer","OneReferenceRenderer","StringRepresentationProvider","getKeyboardNavigationLabel","OneReference","parts","getPreview","preview","IdentityProvider","getId","FileReferencesTemplate","file","IconLabel","supportHighlights","badge","CountBadge","defaultCountBadgeStyles","dirname","setLabel","relative","setCount","setTitleFormat","templateId","renderTemplate","renderElement","node","template","createMatches","filterData","disposeTemplate","templateData","OneReferenceTemplate","HighlightedLabel","score","FuzzyScore","isDefault","toggle","AccessibilityProvider","getWidgetAriaLabel","DecorationsManager","_decorations","_decorationIgnoreSet","_callOnModelChange","_onModelChanged","removeDecorations","_addDecorations","onDidChangeDecorations","_onDecorationChanged","newDecorationsActualIndex","oneReference","DecorationOptions","changeDecorations","changeAccessor","deltaDecorations","toRemove","decorationId","newRange","getDecorationRange","ignore","spansMultipleLines","keys","ModelDecorationOptions","register","stickiness","LayoutData","ratio","heightInLines","fromJSON","raw","data","JSON","parse","ReferencesTree","WorkbenchAsyncDataTree","ReferenceWidget","peekView","_defaultTreeKeyboardSupport","layoutData","themeService","_textModelResolverService","_peekViewService","_uriLabel","_undoRedoService","_languageService","_languageConfigurationService","isResizeable","supportOnTitleClick","_disposeOnNewModel","_onDidSelectReference","onDidSelectReference","_dim","addExclusiveWidget","setModel","_preview","_previewNotAvailableMessage","_tree","_previewModelReference","_splitView","borderColor","where","focusOnReferenceTree","domFocus","focusOnPreviewEditor","isPreviewEditorFocused","hasTextFocus","_onTitleClick","_getFocusedReference","kind","ctrlKey","metaKey","altKey","containerElement","setCssClass","_messageContainer","SplitView","orientation","_previewContainer","scrollBeyondLastLine","scrollbar","verticalHasArrows","horizontalHasArrows","alwaysConsumeMouseWheel","overviewRulerLanes","fixedOverflowWidgets","minimap","enabled","TextModel","PLAINTEXT_LANGUAGE_ID","DEFAULT_CREATION_OPTIONS","_treeContainer","treeOptions","keyboardSupport","accessibilityProvider","keyboardNavigationLabelProvider","identityProvider","openOnSingleClick","selectionNavigation","overrideStyles","listBackground","dispatchEvent","addView","Event","minimumSize","maximumSize","Number","MAX_VALUE","Sizing","Distribute","onDidSashChange","getViewSize","onEvent","_revealReference","onDidOpen","editorOptions","_viewZone","resizeView","setSelection","setFocus","newModel","_onNewModel","_decorationsManager","onDidChangeReferenceRange","rerender","setInput","getFocus","revealReference","revealParent","_revealedReference","scheme","Schemas","inMemory","basenameOrAuthority","getInput","reveal","expand","scrollType","sel","revealRangeInCenter","IUndoRedoService","ILanguageConfigurationService","ReferencesController_1","ctxReferenceSearchVisible","_storageService","_configurationService","_requestIdPool","_ignoreModelChangeEvent","_referenceSearchVisible","modelPromise","peekMode","widgetPosition","closeWidget","_peekMode","storageKey","store","stringify","openReference","_gotoReference","requestId","setMetaTitle","pos","nearestReference","changeFocusBetweenPreviewAndReferences","goToNextOrPreviousReference","currentPosition","nextOrPreviousReference","editorFocus","previewEditorFocus","hide","openedEditor","clone","withController","fn","outerEditor","getOuterEditor","IStorageService","or","registerKeybindingRule","not","mac","WorkbenchListFocusContextKey","WorkbenchTreeElementCanCollapse","negate","WorkbenchTreeElementCanExpand","IListService","lastFocusedList","isProviderFirst","_rangeCallback","defaultGenerator","nextId","_range","FilePreview","_modelReference","n","getWordUntilPosition","beforeRange","afterRange","before","inside","start","end","_previews","ResourceMap","child","fsPath","size","links","_onDidChangeReferenceRange","_links","_title","providersFirst","current","_compareReferences","extUri","oneRef","childCount","groupCount","nearest","prefixLen","strings","offsetDist","abs"],"sourceRoot":""}