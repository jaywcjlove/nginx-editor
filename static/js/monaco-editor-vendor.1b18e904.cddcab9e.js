"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[195],{5776:(e,t,i)=>{var o=i(30050),n=i(54699),s=i(51413);class r extends o.ks{constructor(){super({id:"editor.action.fontZoomIn",label:s.kg("EditorFontZoomIn.label","Increase Editor Font Size"),alias:"Increase Editor Font Size",precondition:void 0})}run(e,t){n.D.setZoomLevel(n.D.getZoomLevel()+1)}}class a extends o.ks{constructor(){super({id:"editor.action.fontZoomOut",label:s.kg("EditorFontZoomOut.label","Decrease Editor Font Size"),alias:"Decrease Editor Font Size",precondition:void 0})}run(e,t){n.D.setZoomLevel(n.D.getZoomLevel()-1)}}class d extends o.ks{constructor(){super({id:"editor.action.fontZoomReset",label:s.kg("EditorFontZoomReset.label","Reset Editor Font Size"),alias:"Reset Editor Font Size",precondition:void 0})}run(e,t){n.D.setZoomLevel(0)}}(0,o.Fl)(r),(0,o.Fl)(a),(0,o.Fl)(d)},78314:(e,t,i)=>{i.d(t,{Pj:()=>D,_V:()=>I,jX:()=>M,vg:()=>P});var o=i(61498),n=i(25143),s=i(29591),r=i(47522),a=i(30453),d=i(32031),c=i(97072),l=i(39212),h=i(98702),u=i(23525),g=i(99005),p=i(5190),_=i(35296),m=i(58066),v=i(68142),f=i(39587),b=i(62531),w=i(39263),y=i(63910),k=i(26505),C=i(85429);function S(e,t,i){const o=[],n=new b.Z,s=e.ordered(i);for(const a of s)o.push(a),a.extensionId&&n.add(a.extensionId);const r=t.ordered(i);for(const a of r){if(a.extensionId){if(n.has(a.extensionId))continue;n.add(a.extensionId)}o.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits:(e,t,i)=>a.provideDocumentRangeFormattingEdits(e,e.getFullModelRange(),t,i)})}return o}class D{static setFormatterSelector(e){return{dispose:D._selectors.unshift(e)}}static async select(e,t,i,o){if(0===e.length)return;const n=r.f.first(D._selectors);return n?await n(e,t,i,o):void 0}}async function M(e,t,i,o,n,s,r){const a=e.get(w._Y),{documentRangeFormattingEditProvider:d}=e.get(y.u),c=(0,h.z9)(t)?t.getModel():t,l=d.ordered(c),u=await D.select(l,c,o,2);u&&(n.report(u),await a.invokeFunction(R,u,t,i,s,r))}async function R(e,t,i,n,s,r){var a,d;const c=e.get(_.w),u=e.get(k.rr),m=e.get(C.Nt);let f,b;(0,h.z9)(i)?(f=i.getModel(),b=new l.gI(i,5,void 0,s)):(f=i,b=new l.ER(i,s));const w=[];let y=0;for(const l of(0,o._j)(n).sort(g.Q.compareRangesUsingStarts))y>0&&g.Q.areIntersectingOrTouching(w[y-1],l)?w[y-1]=g.Q.fromPositions(w[y-1].getStartPosition(),l.getEndPosition()):y=w.push(l);const S=async e=>{var i,o;u.trace("[format][provideDocumentRangeFormattingEdits] (request)",null===(i=t.extensionId)||void 0===i?void 0:i.value,e);const n=await t.provideDocumentRangeFormattingEdits(f,e,f.getFormattingOptions(),b.token)||[];return u.trace("[format][provideDocumentRangeFormattingEdits] (response)",null===(o=t.extensionId)||void 0===o?void 0:o.value,n),n},D=(e,t)=>{if(!e.length||!t.length)return!1;const i=e.reduce(((e,t)=>g.Q.plusRange(e,t.range)),e[0].range);if(!t.some((e=>g.Q.intersectRanges(i,e.range))))return!1;for(const o of e)for(const e of t)if(g.Q.intersectRanges(o.range,e.range))return!0;return!1},M=[],R=[];try{if("function"===typeof t.provideDocumentRangesFormattingEdits){u.trace("[format][provideDocumentRangeFormattingEdits] (request)",null===(a=t.extensionId)||void 0===a?void 0:a.value,w);const e=await t.provideDocumentRangesFormattingEdits(f,w,f.getFormattingOptions(),b.token)||[];u.trace("[format][provideDocumentRangeFormattingEdits] (response)",null===(d=t.extensionId)||void 0===d?void 0:d.value,e),R.push(e)}else{for(const e of w){if(b.token.isCancellationRequested)return!0;R.push(await S(e))}for(let e=0;e<w.length;++e)for(let t=e+1;t<w.length;++t){if(b.token.isCancellationRequested)return!0;if(D(R[e],R[t])){const i=g.Q.plusRange(w[e],w[t]),o=await S(i);w.splice(t,1),w.splice(e,1),w.push(i),R.splice(t,1),R.splice(e,1),R.push(o),e=0,t=0}}}for(const e of R){if(b.token.isCancellationRequested)return!0;const t=await c.computeMoreMinimalEdits(f.uri,e);t&&M.push(...t)}}finally{b.dispose()}if(0===M.length)return!1;if((0,h.z9)(i))v.c.execute(i,M,!0),i.revealPositionInCenterIfOutsideViewport(i.getPosition(),1);else{const[{range:e}]=M,t=new p.L(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);f.pushEditOperations([t],M.map((e=>({text:e.text,range:g.Q.lift(e.range),forceMoveMarkers:!0}))),(e=>{for(const{range:i}of e)if(g.Q.areIntersectingOrTouching(i,t))return[new p.L(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)];return null}))}return m.playSignal(C.Rh.format,{userGesture:r}),!0}async function P(e,t,i,o,n,s){const r=e.get(w._Y),a=e.get(y.u),d=(0,h.z9)(t)?t.getModel():t,c=S(a.documentFormattingEditProvider,a.documentRangeFormattingEditProvider,d),l=await D.select(c,d,i,1);l&&(o.report(l),await r.invokeFunction(x,l,t,i,n,s))}async function x(e,t,i,o,n,s){const r=e.get(_.w),a=e.get(C.Nt);let d,c,u;(0,h.z9)(i)?(d=i.getModel(),c=new l.gI(i,5,void 0,n)):(d=i,c=new l.ER(i,n));try{const e=await t.provideDocumentFormattingEdits(d,d.getFormattingOptions(),c.token);if(u=await r.computeMoreMinimalEdits(d.uri,e),c.token.isCancellationRequested)return!0}finally{c.dispose()}if(!u||0===u.length)return!1;if((0,h.z9)(i))v.c.execute(i,u,2!==o),2!==o&&i.revealPositionInCenterIfOutsideViewport(i.getPosition(),1);else{const[{range:e}]=u,t=new p.L(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);d.pushEditOperations([t],u.map((e=>({text:e.text,range:g.Q.lift(e.range),forceMoveMarkers:!0}))),(e=>{for(const{range:i}of e)if(g.Q.areIntersectingOrTouching(i,t))return[new p.L(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)];return null}))}return a.playSignal(C.Rh.format,{userGesture:s}),!0}function I(e,t,i,o,n,r,a){const d=t.onTypeFormattingEditProvider.ordered(i);return 0===d.length||d[0].autoFormatTriggerCharacters.indexOf(n)<0?Promise.resolve(void 0):Promise.resolve(d[0].provideOnTypeFormattingEdits(i,o,n,r,a)).catch(s.M_).then((t=>e.computeMoreMinimalEdits(i.uri,t)))}D._selectors=new a.w,f.w.registerCommand("_executeFormatRangeProvider",(async function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];const[a,l,h]=i;(0,d.j)(c.r.isUri(a)),(0,d.j)(g.Q.isIRange(l));const u=e.get(m.b),p=e.get(_.w),v=e.get(y.u),f=await u.createModelReference(a);try{return async function(e,t,i,n,r,a){const d=t.documentRangeFormattingEditProvider.ordered(i);for(const c of d){const t=await Promise.resolve(c.provideDocumentRangeFormattingEdits(i,n,r,a)).catch(s.M_);if((0,o.EI)(t))return await e.computeMoreMinimalEdits(i.uri,t)}}(p,v,f.object.textEditorModel,g.Q.lift(l),h,n.XO.None)}finally{f.dispose()}})),f.w.registerCommand("_executeFormatDocumentProvider",(async function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];const[a,l]=i;(0,d.j)(c.r.isUri(a));const h=e.get(m.b),u=e.get(_.w),g=e.get(y.u),p=await h.createModelReference(a);try{return async function(e,t,i,n,r){const a=S(t.documentFormattingEditProvider,t.documentRangeFormattingEditProvider,i);for(const d of a){const t=await Promise.resolve(d.provideDocumentFormattingEdits(i,n,r)).catch(s.M_);if((0,o.EI)(t))return await e.computeMoreMinimalEdits(i.uri,t)}}(u,g,p.object.textEditorModel,l,n.XO.None)}finally{p.dispose()}})),f.w.registerCommand("_executeFormatOnTypeProvider",(async function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];const[s,r,a,l]=i;(0,d.j)(c.r.isUri(s)),(0,d.j)(u.y.isIPosition(r)),(0,d.j)("string"===typeof a);const h=e.get(m.b),g=e.get(_.w),p=e.get(y.u),v=await h.createModelReference(s);try{return I(g,p,v.object.textEditorModel,u.y.lift(r),a,l,n.XO.None)}finally{v.dispose()}}))},52751:(e,t,i)=>{var o=i(61498),n=i(25143),s=i(29591),r=i(57443),a=i(87766),d=i(30050),c=i(32101),l=i(61950),h=i(99005),u=i(72330),g=i(35296),p=i(63910),_=i(78314),m=i(68142),v=i(51413),f=i(85429),b=i(39587),w=i(39686),y=i(39263),k=i(3607),C=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},S=function(e,t){return function(i,o){t(i,o,e)}};let D=class{constructor(e,t,i,o){this._editor=e,this._languageFeaturesService=t,this._workerService=i,this._accessibilitySignalService=o,this._disposables=new a.Cm,this._sessionDisposables=new a.Cm,this._disposables.add(t.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(e.onDidChangeModel((()=>this._update()))),this._disposables.add(e.onDidChangeModelLanguage((()=>this._update()))),this._disposables.add(e.onDidChangeConfiguration((e=>{e.hasChanged(56)&&this._update()}))),this._update()}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(56))return;if(!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;const i=new l.y;for(const o of t.autoFormatTriggerCharacters)i.add(o.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType((e=>{const t=e.charCodeAt(e.length-1);i.has(t)&&this._trigger(String.fromCharCode(t))})))}_trigger(e){if(!this._editor.hasModel())return;if(this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),i=this._editor.getPosition(),s=new n.Qi,r=this._editor.onDidChangeModelContent((e=>{if(e.isFlush)return s.cancel(),void r.dispose();for(let t=0,o=e.changes.length;t<o;t++){if(e.changes[t].range.endLineNumber<=i.lineNumber)return s.cancel(),void r.dispose()}}));(0,_._V)(this._workerService,this._languageFeaturesService,t,i,e,t.getFormattingOptions(),s.token).then((e=>{s.token.isCancellationRequested||(0,o.EI)(e)&&(this._accessibilitySignalService.playSignal(f.Rh.format,{userGesture:!1}),m.c.execute(this._editor,e,!0))})).finally((()=>{r.dispose()}))}};D.ID="editor.contrib.autoFormat",D=C([S(1,p.u),S(2,g.w),S(3,f.Nt)],D);let M=class{constructor(e,t,i){this.editor=e,this._languageFeaturesService=t,this._instantiationService=i,this._callOnDispose=new a.Cm,this._callOnModel=new a.Cm,this._callOnDispose.add(e.onDidChangeConfiguration((()=>this._update()))),this._callOnDispose.add(e.onDidChangeModel((()=>this._update()))),this._callOnDispose.add(e.onDidChangeModelLanguage((()=>this._update()))),this._callOnDispose.add(t.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(55)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste((e=>{let{range:t}=e;return this._trigger(t)})))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(_.jX,this.editor,e,2,k.ke.None,n.XO.None,!1).catch(s.dz))}};M.ID="editor.contrib.formatOnPaste",M=C([S(1,p.u),S(2,y._Y)],M);class R extends d.ks{constructor(){super({id:"editor.action.formatDocument",label:v.kg("formatDocument.label","Format Document"),alias:"Format Document",precondition:w.M$.and(u.R.notInCompositeEditor,u.R.writable,u.R.hasDocumentFormattingProvider),kbOpts:{kbExpr:u.R.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}async run(e,t){if(t.hasModel()){const i=e.get(y._Y),o=e.get(k.N8);await o.showWhile(i.invokeFunction(_.vg,t,1,k.ke.None,n.XO.None,!0),250)}}}class P extends d.ks{constructor(){super({id:"editor.action.formatSelection",label:v.kg("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:w.M$.and(u.R.writable,u.R.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:u.R.editorTextFocus,primary:(0,r.m5)(2089,2084),weight:100},contextMenuOpts:{when:u.R.hasNonEmptySelection,group:"1_modification",order:1.31}})}async run(e,t){if(!t.hasModel())return;const i=e.get(y._Y),o=t.getModel(),s=t.getSelections().map((e=>e.isEmpty()?new h.Q(e.startLineNumber,1,e.startLineNumber,o.getLineMaxColumn(e.startLineNumber)):e)),r=e.get(k.N8);await r.showWhile(i.invokeFunction(_.jX,t,s,1,k.ke.None,n.XO.None,!0),250)}}(0,d.HW)(D.ID,D,2),(0,d.HW)(M.ID,M,2),(0,d.Fl)(R),(0,d.Fl)(P),b.w.registerCommand("editor.action.format",(async e=>{const t=e.get(c.T).getFocusedCodeEditor();if(!t||!t.hasModel())return;const i=e.get(b.d);t.getSelection().isEmpty()?await i.executeCommand("editor.action.formatDocument"):await i.executeCommand("editor.action.formatSelection")}))},68142:(e,t,i)=>{i.d(t,{c:()=>r});var o=i(94597),n=i(99005),s=i(56718);class r{static _handleEolEdits(e,t){let i;const o=[];for(const n of t)"number"===typeof n.eol&&(i=n.eol),n.range&&"string"===typeof n.text&&o.push(n);return"number"===typeof i&&e.hasModel()&&e.getModel().pushEOL(i),o}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const i=e.getModel(),o=i.validateRange(t.range);return i.getFullModelRange().equalsRange(o)}static execute(e,t,i){i&&e.pushUndoStop();const a=s.D.capture(e),d=r._handleEolEdits(e,t);1===d.length&&r._isFullModelReplaceEdit(e,d[0])?e.executeEdits("formatEditsCommand",d.map((e=>o.k.replace(n.Q.lift(e.range),e.text)))):e.executeEdits("formatEditsCommand",d.map((e=>o.k.replaceMove(n.Q.lift(e.range),e.text)))),i&&e.pushUndoStop(),a.restoreRelativeVerticalPositionOfCursor(e)}}},19995:(e,t,i)=>{i.d(t,{j:()=>ne,i:()=>re});var o=i(21030),n=i(87766),s=i(30050),r=i(32101),a=i(23525),d=i(99005),c=i(72330),l=i(61498),h=i(48250),u=i(30453),g=i(12780),p=i(97072),_=i(42502),m=i(39263),v=i(39747),f=i(66457),b=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},w=function(e,t){return function(i,o){t(i,o,e)}};class y{constructor(e,t,i){this.marker=e,this.index=t,this.total=i}}let k=class{constructor(e,t,i){this._markerService=t,this._configService=i,this._onDidChange=new h.vl,this.onDidChange=this._onDidChange.event,this._dispoables=new n.Cm,this._markers=[],this._nextIdx=-1,p.r.isUri(e)?this._resourceFilter=t=>t.toString()===e.toString():e&&(this._resourceFilter=e);const o=this._configService.getValue("problems.sortOrder"),s=(e,t)=>{let i=(0,g.UD)(e.resource.toString(),t.resource.toString());return 0===i&&(i="position"===o?d.Q.compareRangesUsingStarts(e,t)||v.cj.compare(e.severity,t.severity):v.cj.compare(e.severity,t.severity)||d.Q.compareRangesUsingStarts(e,t)),i},r=()=>{this._markers=this._markerService.read({resource:p.r.isUri(e)?e:void 0,severities:v.cj.Error|v.cj.Warning|v.cj.Info}),"function"===typeof e&&(this._markers=this._markers.filter((e=>this._resourceFilter(e.resource)))),this._markers.sort(s)};r(),this._dispoables.add(t.onMarkerChanged((e=>{this._resourceFilter&&!e.some((e=>this._resourceFilter(e)))||(r(),this._nextIdx=-1,this._onDidChange.fire())})))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e||!(!this._resourceFilter||!e)&&this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new y(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,i){let o=!1,n=this._markers.findIndex((t=>t.resource.toString()===e.uri.toString()));n<0&&(n=(0,l.El)(this._markers,{resource:e.uri},((e,t)=>(0,g.UD)(e.resource.toString(),t.resource.toString()))),n<0&&(n=~n));for(let s=n;s<this._markers.length;s++){let i=d.Q.lift(this._markers[s]);if(i.isEmpty()){const t=e.getWordAtPosition(i.getStartPosition());t&&(i=new d.Q(i.startLineNumber,t.startColumn,i.startLineNumber,t.endColumn))}if(t&&(i.containsPosition(t)||t.isBeforeOrEqual(i.getStartPosition()))){this._nextIdx=s,o=!0;break}if(this._markers[s].resource.toString()!==e.uri.toString())break}o||(this._nextIdx=i?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,i){if(0===this._markers.length)return!1;const o=this._nextIdx;return-1===this._nextIdx?this._initIdx(t,i,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),o!==this._nextIdx}find(e,t){let i=this._markers.findIndex((t=>t.resource.toString()===e.toString()));if(!(i<0))for(;i<this._markers.length;i++)if(d.Q.containsPosition(this._markers[i],t))return new y(this._markers[i],i+1,this._markers.length)}};k=b([w(1,v.DR),w(2,f.pG)],k);const C=(0,m.u1)("IMarkerNavigationService");let S=class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new u.w}getMarkerList(e){for(const t of this._provider){const i=t.getMarkerList(e);if(i)return i}return new k(e,this._markerService,this._configService)}};S=b([w(0,v.DR),w(1,f.pG)],S),(0,_.v)(C,S,1);var D,M=i(51413),R=i(35155),P=i(39686),x=i(85514),I=i(32605),L=i(89067),N=i(57397),E=i(53059),O=i(78472),T=i(53073),F=i(7289),H=i(2531),A=i(59266),W=i(63573),V=i(19700),z=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},B=function(e,t){return function(i,o){t(i,o,e)}};class j{constructor(e,t,i,o,s){this._openerService=o,this._labelService=s,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new n.Cm,this._editor=t;const r=document.createElement("div");r.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),r.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),r.appendChild(this._relatedBlock),this._disposables.add(I.b2(this._relatedBlock,"click",(e=>{e.preventDefault();const t=this._relatedDiagnostics.get(e.target);t&&i(t)}))),this._scrollable=new L.Se(r,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll((e=>{r.style.left="-".concat(e.scrollLeft,"px"),r.style.top="-".concat(e.scrollTop,"px")}))),this._disposables.add(this._scrollable)}dispose(){(0,n.AS)(this._disposables)}update(e){const{source:t,message:i,relatedInformation:o,code:n}=e;let s=((null===t||void 0===t?void 0:t.length)||0)+2;n&&(s+="string"===typeof n?n.length:n.value.length);const r=(0,g.uz)(i);this._lines=r.length,this._longestLineLength=0;for(const l of r)this._longestLineLength=Math.max(l.length+s,this._longestLineLength);I.w_(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let a=this._messageBlock;for(const l of r)a=document.createElement("div"),a.innerText=l,""===l&&(a.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(a);if(t||n){const e=document.createElement("span");if(e.classList.add("details"),a.appendChild(e),t){const i=document.createElement("span");i.innerText=t,i.classList.add("source"),e.appendChild(i)}if(n)if("string"===typeof n){const t=document.createElement("span");t.innerText="(".concat(n,")"),t.classList.add("code"),e.appendChild(t)}else{this._codeLink=I.$("a.code-link"),this._codeLink.setAttribute("href","".concat(n.target.toString())),this._codeLink.onclick=e=>{this._openerService.open(n.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()};I.BC(this._codeLink,I.$("span")).innerText=n.value,e.appendChild(this._codeLink)}}if(I.w_(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),(0,l.EI)(o)){const e=this._relatedBlock.appendChild(document.createElement("div"));e.style.paddingTop="".concat(Math.floor(.66*this._editor.getOption(67)),"px"),this._lines+=1;for(const t of o){const i=document.createElement("div"),o=document.createElement("a");o.classList.add("filename"),o.innerText="".concat(this._labelService.getUriBasenameLabel(t.resource),"(").concat(t.startLineNumber,", ").concat(t.startColumn,"): "),o.title=this._labelService.getUriLabel(t.resource),this._relatedDiagnostics.set(o,t);const n=document.createElement("span");n.innerText=t.message,i.appendChild(o),i.appendChild(n),this._lines+=1,e.appendChild(i)}}const d=this._editor.getOption(50),c=Math.ceil(d.typicalFullwidthCharacterWidth*this._longestLineLength*.75),h=d.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:c,scrollHeight:h})}layout(e,t){this._scrollable.getDomNode().style.height="".concat(e,"px"),this._scrollable.getDomNode().style.width="".concat(t,"px"),this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case v.cj.Error:t=M.kg("Error","Error");break;case v.cj.Warning:t=M.kg("Warning","Warning");break;case v.cj.Info:t=M.kg("Info","Info");break;case v.cj.Hint:t=M.kg("Hint","Hint")}let i=M.kg("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const o=this._editor.getModel();if(o&&e.startLineNumber<=o.getLineCount()&&e.startLineNumber>=1){const t=o.getLineContent(e.startLineNumber);i="".concat(t,", ").concat(i)}return i}}let U=D=class extends O.j6{constructor(e,t,i,o,s,r,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},s),this._themeService=t,this._openerService=i,this._menuService=o,this._contextKeyService=r,this._labelService=a,this._callOnDispose=new n.Cm,this._onDidSelectRelatedInformation=new h.vl,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=v.cj.Warning,this._backgroundColor=N.Q1.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(ee);let t=q,i=$;this._severity===v.cj.Warning?(t=Y,i=X):this._severity===v.cj.Info&&(t=Z,i=J);const o=e.getColor(t),n=e.getColor(i);this.style({arrowColor:o,frameColor:o,headerBackgroundColor:n,primaryHeadingColor:e.getColor(O._X),secondaryHeadingColor:e.getColor(O.e3)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onWillRun((e=>this.editor.focus())));const t=[],i=this._menuService.createMenu(D.TitleMenu,this._contextKeyService);(0,T.Ot)(i,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),i.dispose()}_fillTitleIcon(e){this._icon=I.BC(e,I.$(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new j(this._container,this.editor,(e=>this._onDidSelectRelatedInformation.fire(e)),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());const o=d.Q.lift(e),n=this.editor.getPosition(),s=n&&o.containsPosition(n)?n:o.getStartPosition();super.show(s,this.computeRequiredHeight());const r=this.editor.getModel();if(r){const e=i>1?M.kg("problems","{0} of {1} problems",t,i):M.kg("change","{0} of {1} problem",t,i);this.setTitle((0,E.P8)(r.uri),e)}this._icon.className="codicon ".concat(A.z.className(v.cj.toSeverity(this._severity))),this.editor.revealPositionNearTop(s,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height="".concat(e,"px")}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};U.TitleMenu=new R.D8("gotoErrorTitleMenu"),U=D=z([B(1,V.Gy),B(2,H.C),B(3,R.ez),B(4,m._Y),B(5,P.fN),B(6,F.L)],U);const K=(0,W.yLr)(W.Rbi,W.AN$),G=(0,W.yLr)(W.Hng,W.Stt),Q=(0,W.yLr)(W.pOz,W.IIb),q=(0,W.x1A)("editorMarkerNavigationError.background",{dark:K,light:K,hcDark:W.b1q,hcLight:W.b1q},M.kg("editorMarkerNavigationError","Editor marker navigation widget error color.")),$=(0,W.x1A)("editorMarkerNavigationError.headerBackground",{dark:(0,W.JO0)(q,.1),light:(0,W.JO0)(q,.1),hcDark:null,hcLight:null},M.kg("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),Y=(0,W.x1A)("editorMarkerNavigationWarning.background",{dark:G,light:G,hcDark:W.b1q,hcLight:W.b1q},M.kg("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),X=(0,W.x1A)("editorMarkerNavigationWarning.headerBackground",{dark:(0,W.JO0)(Y,.1),light:(0,W.JO0)(Y,.1),hcDark:"#0C141F",hcLight:(0,W.JO0)(Y,.2)},M.kg("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),Z=(0,W.x1A)("editorMarkerNavigationInfo.background",{dark:Q,light:Q,hcDark:W.b1q,hcLight:W.b1q},M.kg("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),J=(0,W.x1A)("editorMarkerNavigationInfo.headerBackground",{dark:(0,W.JO0)(Z,.1),light:(0,W.JO0)(Z,.1),hcDark:null,hcLight:null},M.kg("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),ee=(0,W.x1A)("editorMarkerNavigation.background",{dark:W.YtV,light:W.YtV,hcDark:W.YtV,hcLight:W.YtV},M.kg("editorMarkerNavigationBackground","Editor marker navigation widget background."));var te,ie=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},oe=function(e,t){return function(i,o){t(i,o,e)}};let ne=te=class{static get(e){return e.getContribution(te.ID)}constructor(e,t,i,o,s){this._markerNavigationService=t,this._contextKeyService=i,this._editorService=o,this._instantiationService=s,this._sessionDispoables=new n.Cm,this._editor=e,this._widgetVisible=de.bindTo(this._contextKeyService)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(U,this._editor),this._widget.onDidClose((()=>this.close()),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition((e=>{var t,i,o;(null===(t=this._model)||void 0===t?void 0:t.selected)&&d.Q.containsPosition(null===(i=this._model)||void 0===i?void 0:i.selected.marker,e.position)||null===(o=this._model)||void 0===o||o.resetIndex()}))),this._sessionDispoables.add(this._model.onDidChange((()=>{if(!this._widget||!this._widget.position||!this._model)return;const e=this._model.find(this._editor.getModel().uri,this._widget.position);e?this._widget.updateMarker(e.marker):this._widget.showStale()}))),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation((e=>{this._editorService.openCodeEditor({resource:e.resource,options:{pinned:!0,revealIfOpened:!0,selection:d.Q.lift(e).collapseToStart()}},this._editor),this.close(!1)}))),this._sessionDispoables.add(this._editor.onDidChangeModel((()=>this._cleanUp()))),this._model}close(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new a.y(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}async nagivate(e,t){var i,o;if(this._editor.hasModel()){const n=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(n.move(e,this._editor.getModel(),this._editor.getPosition()),!n.selected)return;if(n.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const s=await this._editorService.openCodeEditor({resource:n.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:n.selected.marker}},this._editor);s&&(null===(i=te.get(s))||void 0===i||i.close(),null===(o=te.get(s))||void 0===o||o.nagivate(e,t))}else this._widget.showAtMarker(n.selected.marker,n.selected.index,n.selected.total)}}};ne.ID="editor.contrib.markerController",ne=te=ie([oe(1,C),oe(2,P.fN),oe(3,r.T),oe(4,m._Y)],ne);class se extends s.ks{constructor(e,t,i){super(i),this._next=e,this._multiFile=t}async run(e,t){var i;t.hasModel()&&(null===(i=ne.get(t))||void 0===i||i.nagivate(this._next,this._multiFile))}}class re extends se{constructor(){super(!0,!1,{id:re.ID,label:re.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:c.R.focus,primary:578,weight:100},menuOpts:{menuId:U.TitleMenu,title:re.LABEL,icon:(0,x.pU)("marker-navigation-next",o.W.arrowDown,M.kg("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}re.ID="editor.action.marker.next",re.LABEL=M.kg("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class ae extends se{constructor(){super(!1,!1,{id:ae.ID,label:ae.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:c.R.focus,primary:1602,weight:100},menuOpts:{menuId:U.TitleMenu,title:ae.LABEL,icon:(0,x.pU)("marker-navigation-previous",o.W.arrowUp,M.kg("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}ae.ID="editor.action.marker.prev",ae.LABEL=M.kg("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");(0,s.HW)(ne.ID,ne,4),(0,s.Fl)(re),(0,s.Fl)(ae),(0,s.Fl)(class extends se{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:M.kg("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:c.R.focus,primary:66,weight:100},menuOpts:{menuId:R.D8.MenubarGoMenu,title:M.kg({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}),(0,s.Fl)(class extends se{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:M.kg("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:c.R.focus,primary:1090,weight:100},menuOpts:{menuId:R.D8.MenubarGoMenu,title:M.kg({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}});const de=new P.N1("markersNavigationVisible",!1),ce=s.DX.bindToContribution(ne.get);(0,s.E_)(new ce({id:"closeMarkersNavigation",precondition:de,handler:e=>e.close(),kbOpts:{weight:150,kbExpr:c.R.focus,primary:9,secondary:[1033]}}))},29911:(e,t,i)=>{i.d(t,{mR:()=>ee,bn:()=>J,QS:()=>Z});var o=i(82224),n=i(73990),s=i(57443),r=i(32031),a=i(97072),d=i(39212),c=i(98702),l=i(30050),h=i(32101),u=i(60633),g=i(23525),p=i(99005),_=i(72330),m=i(91861),v=i(42991),f=i(39494),b=i(48250),w=i(87766),y=i(53059),k=i(51413),C=i(39686),S=i(42502),D=i(39263),M=i(16391),R=i(1957),P=i(39895),x=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},I=function(e,t){return function(i,o){t(i,o,e)}};const L=new C.N1("hasSymbols",!1,(0,k.kg)("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),N=(0,D.u1)("ISymbolNavigationService");let E=class{constructor(e,t,i,o){this._editorService=t,this._notificationService=i,this._keybindingService=o,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=L.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),null===(e=this._currentState)||void 0===e||e.dispose(),null===(t=this._currentMessage)||void 0===t||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1)return void this.reset();this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const i=new O(this._editorService),o=i.onDidChange((e=>{if(this._ignoreEditorChange)return;const i=this._editorService.getActiveCodeEditor();if(!i)return;const o=i.getModel(),n=i.getPosition();if(!o||!n)return;let s=!1,r=!1;for(const a of t.references)if((0,y.n4)(a.uri,o.uri))s=!0,r=r||p.Q.containsPosition(a.range,n);else if(s)break;s&&r||this.reset()}));this._currentState=(0,w.qE)(i,o)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:p.Q.collapseToStart(t.range),selectionRevealType:3}},e).finally((()=>{this._ignoreEditorChange=!1}))}_showMessage(){var e;null===(e=this._currentMessage)||void 0===e||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),i=t?(0,k.kg)("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):(0,k.kg)("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(i)}};E=x([I(0,C.fN),I(1,h.T),I(2,P.Ot),I(3,M.b)],E),(0,S.v)(N,E,1),(0,l.E_)(new class extends l.DX{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:L,kbOpts:{weight:100,primary:70}})}runEditorCommand(e,t){return e.get(N).revealNext(t)}}),R.f.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:L,primary:9,handler(e){e.get(N).reset()}});let O=class{constructor(e){this._listener=new Map,this._disposables=new w.Cm,this._onDidChange=new b.vl,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),(0,w.AS)(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,(0,w.qE)(e.onDidChangeCursorPosition((t=>this._onDidChange.fire({editor:e}))),e.onDidChangeModelContent((t=>this._onDidChange.fire({editor:e})))))}_onDidRemoveEditor(e){var t;null===(t=this._listener.get(e))||void 0===t||t.dispose(),this._listener.delete(e)}};O=x([I(0,h.T)],O);var T,F,H,A,W,V,z,B,j=i(85521),U=i(78472),K=i(35155),G=i(39587),Q=i(3607),q=i(49618),$=i(63910),Y=i(47522),X=i(73546);K.ZG.appendMenuItem(K.D8.EditorContext,{submenu:K.D8.EditorContextPeek,title:k.kg("peek.submenu","Peek"),group:"navigation",order:100});class Z{static is(e){return!(!e||"object"!==typeof e)&&(e instanceof Z||!(!g.y.isIPosition(e.position)||!e.model))}constructor(e,t){this.model=e,this.position=t}}class J extends l.qO{static all(){return J._allSymbolNavigationCommands.values()}static _patchConfig(e){const t={...e,f1:!0};if(t.menu)for(const i of Y.f.wrap(t.menu))i.id!==K.D8.EditorContext&&i.id!==K.D8.EditorContextPeek||(i.when=C.M$.and(e.precondition,i.when));return t}constructor(e,t){super(J._patchConfig(t)),this.configuration=e,J._allSymbolNavigationCommands.set(t.id,this)}runEditorCommand(e,t,i,s){if(!t.hasModel())return Promise.resolve(void 0);const r=e.get(P.Ot),a=e.get(h.T),c=e.get(Q.N8),l=e.get(N),u=e.get($.u),g=e.get(D._Y),p=t.getModel(),_=t.getPosition(),m=Z.is(i)?i:new Z(p,_),v=new d.gI(t,5),f=(0,n.PK)(this._getLocationModel(u,m.model,m.position,v.token),v.token).then((async e=>{var n;if(!e||v.token.isCancellationRequested)return;let r;if((0,o.xE)(e.ariaMessage),e.referenceAt(p.uri,_)){const e=this._getAlternativeCommand(t);!J._activeAlternativeCommands.has(e)&&J._allSymbolNavigationCommands.has(e)&&(r=J._allSymbolNavigationCommands.get(e))}const d=e.references.length;if(0===d){if(!this.configuration.muteMessage){const e=p.getWordAtPosition(_);null===(n=j.k.get(t))||void 0===n||n.showMessage(this._getNoResultFoundMessage(e),_)}}else{if(1!==d||!r)return this._onResult(a,l,t,e,s);J._activeAlternativeCommands.add(this.desc.id),g.invokeFunction((e=>r.runEditorCommand(e,t,i,s).finally((()=>{J._activeAlternativeCommands.delete(this.desc.id)}))))}}),(e=>{r.error(e)})).finally((()=>{v.dispose()}));return c.showWhile(f,250),f}async _onResult(e,t,i,o,n){const s=this._getGoToPreference(i);if(i instanceof u.t||!(this.configuration.openInPeek||"peek"===s&&o.references.length>1)){const r=o.firstReference(),a=o.references.length>1&&"gotoAndPeek"===s,d=await this._openReference(i,e,r,this.configuration.openToSide,!a);a&&d?this._openInPeek(d,o,n):o.dispose(),"goto"===s&&t.put(r)}else this._openInPeek(i,o,n)}async _openReference(e,t,i,o,n){let s;if((0,m.Iu)(i)&&(s=i.targetSelectionRange),s||(s=i.range),!s)return;const r=await t.openCodeEditor({resource:i.uri,options:{selection:p.Q.collapseToStart(s),selectionRevealType:3,selectionSource:"code.jump"}},e,o);if(r){if(n){const e=r.getModel(),t=r.createDecorationsCollection([{range:s,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout((()=>{r.getModel()===e&&t.clear()}),350)}return r}}_openInPeek(e,t,i){const o=v.X.get(e);o&&e.hasModel()?o.toggleWidget(null!==i&&void 0!==i?i:e.getSelection(),(0,n.SS)((e=>Promise.resolve(t))),this.configuration.openInPeek):t.dispose()}}J._allSymbolNavigationCommands=new Map,J._activeAlternativeCommands=new Set;class ee extends J{async _getLocationModel(e,t,i,o){return new f.y4(await(0,q.hE)(e.definitionProvider,t,i,o),k.kg("def.title","Definitions"))}_getNoResultFoundMessage(e){return e&&e.word?k.kg("noResultWord","No definition found for '{0}'",e.word):k.kg("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleDefinitions}}(0,K.ug)(((T=class extends ee{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:T.id,title:{...k.aS("actions.goToDecl.label","Go to Definition"),mnemonicTitle:k.kg({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},precondition:_.R.hasDefinitionProvider,keybinding:[{when:_.R.editorTextFocus,primary:70,weight:100},{when:C.M$.and(_.R.editorTextFocus,X.W0),primary:2118,weight:100}],menu:[{id:K.D8.EditorContext,group:"navigation",order:1.1},{id:K.D8.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:2}]}),G.w.registerCommandAlias("editor.action.goToDeclaration",T.id)}}).id="editor.action.revealDefinition",T)),(0,K.ug)(((F=class extends ee{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:F.id,title:k.aS("actions.goToDeclToSide.label","Open Definition to the Side"),precondition:C.M$.and(_.R.hasDefinitionProvider,_.R.isInEmbeddedEditor.toNegated()),keybinding:[{when:_.R.editorTextFocus,primary:(0,s.m5)(2089,70),weight:100},{when:C.M$.and(_.R.editorTextFocus,X.W0),primary:(0,s.m5)(2089,2118),weight:100}]}),G.w.registerCommandAlias("editor.action.openDeclarationToTheSide",F.id)}}).id="editor.action.revealDefinitionAside",F)),(0,K.ug)(((H=class extends ee{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:H.id,title:k.aS("actions.previewDecl.label","Peek Definition"),precondition:C.M$.and(_.R.hasDefinitionProvider,U.x2.notInPeekEditor,_.R.isInEmbeddedEditor.toNegated()),keybinding:{when:_.R.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menu:{id:K.D8.EditorContextPeek,group:"peek",order:2}}),G.w.registerCommandAlias("editor.action.previewDeclaration",H.id)}}).id="editor.action.peekDefinition",H));class te extends J{async _getLocationModel(e,t,i,o){return new f.y4(await(0,q.sv)(e.declarationProvider,t,i,o),k.kg("decl.title","Declarations"))}_getNoResultFoundMessage(e){return e&&e.word?k.kg("decl.noResultWord","No declaration found for '{0}'",e.word):k.kg("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(58).multipleDeclarations}}(0,K.ug)(((A=class extends te{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:A.id,title:{...k.aS("actions.goToDeclaration.label","Go to Declaration"),mnemonicTitle:k.kg({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},precondition:C.M$.and(_.R.hasDeclarationProvider,_.R.isInEmbeddedEditor.toNegated()),menu:[{id:K.D8.EditorContext,group:"navigation",order:1.3},{id:K.D8.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}_getNoResultFoundMessage(e){return e&&e.word?k.kg("decl.noResultWord","No declaration found for '{0}'",e.word):k.kg("decl.generic.noResults","No declaration found")}}).id="editor.action.revealDeclaration",A)),(0,K.ug)(class extends te{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",title:k.aS("actions.peekDecl.label","Peek Declaration"),precondition:C.M$.and(_.R.hasDeclarationProvider,U.x2.notInPeekEditor,_.R.isInEmbeddedEditor.toNegated()),menu:{id:K.D8.EditorContextPeek,group:"peek",order:3}})}});class ie extends J{async _getLocationModel(e,t,i,o){return new f.y4(await(0,q.f9)(e.typeDefinitionProvider,t,i,o),k.kg("typedef.title","Type Definitions"))}_getNoResultFoundMessage(e){return e&&e.word?k.kg("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):k.kg("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleTypeDefinitions}}(0,K.ug)(((W=class extends ie{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:W.ID,title:{...k.aS("actions.goToTypeDefinition.label","Go to Type Definition"),mnemonicTitle:k.kg({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},precondition:_.R.hasTypeDefinitionProvider,keybinding:{when:_.R.editorTextFocus,primary:0,weight:100},menu:[{id:K.D8.EditorContext,group:"navigation",order:1.4},{id:K.D8.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}}).ID="editor.action.goToTypeDefinition",W)),(0,K.ug)(((V=class extends ie{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:V.ID,title:k.aS("actions.peekTypeDefinition.label","Peek Type Definition"),precondition:C.M$.and(_.R.hasTypeDefinitionProvider,U.x2.notInPeekEditor,_.R.isInEmbeddedEditor.toNegated()),menu:{id:K.D8.EditorContextPeek,group:"peek",order:4}})}}).ID="editor.action.peekTypeDefinition",V));class oe extends J{async _getLocationModel(e,t,i,o){return new f.y4(await(0,q.eS)(e.implementationProvider,t,i,o),k.kg("impl.title","Implementations"))}_getNoResultFoundMessage(e){return e&&e.word?k.kg("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):k.kg("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(58).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(58).multipleImplementations}}(0,K.ug)(((z=class extends oe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:z.ID,title:{...k.aS("actions.goToImplementation.label","Go to Implementations"),mnemonicTitle:k.kg({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},precondition:_.R.hasImplementationProvider,keybinding:{when:_.R.editorTextFocus,primary:2118,weight:100},menu:[{id:K.D8.EditorContext,group:"navigation",order:1.45},{id:K.D8.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:4}]})}}).ID="editor.action.goToImplementation",z)),(0,K.ug)(((B=class extends oe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:B.ID,title:k.aS("actions.peekImplementation.label","Peek Implementations"),precondition:C.M$.and(_.R.hasImplementationProvider,U.x2.notInPeekEditor,_.R.isInEmbeddedEditor.toNegated()),keybinding:{when:_.R.editorTextFocus,primary:3142,weight:100},menu:{id:K.D8.EditorContextPeek,group:"peek",order:5}})}}).ID="editor.action.peekImplementation",B));class ne extends J{_getNoResultFoundMessage(e){return e?k.kg("references.no","No references found for '{0}'",e.word):k.kg("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(58).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(58).multipleReferences}}(0,K.ug)(class extends ne{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",title:{...k.aS("goToReferences.label","Go to References"),mnemonicTitle:k.kg({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},precondition:C.M$.and(_.R.hasReferenceProvider,U.x2.notInPeekEditor,_.R.isInEmbeddedEditor.toNegated()),keybinding:{when:_.R.editorTextFocus,primary:1094,weight:100},menu:[{id:K.D8.EditorContext,group:"navigation",order:1.45},{id:K.D8.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:5}]})}async _getLocationModel(e,t,i,o){return new f.y4(await(0,q.NN)(e.referenceProvider,t,i,!0,o),k.kg("ref.title","References"))}}),(0,K.ug)(class extends ne{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",title:k.aS("references.action.label","Peek References"),precondition:C.M$.and(_.R.hasReferenceProvider,U.x2.notInPeekEditor,_.R.isInEmbeddedEditor.toNegated()),menu:{id:K.D8.EditorContextPeek,group:"peek",order:6}})}async _getLocationModel(e,t,i,o){return new f.y4(await(0,q.NN)(e.referenceProvider,t,i,!1,o),k.kg("ref.title","References"))}});class se extends J{constructor(e,t,i){super(e,{id:"editor.action.goToLocation",title:k.aS("label.generic","Go to Any Symbol"),precondition:C.M$.and(U.x2.notInPeekEditor,_.R.isInEmbeddedEditor.toNegated())}),this._references=t,this._gotoMultipleBehaviour=i}async _getLocationModel(e,t,i,o){return new f.y4(this._references,k.kg("generic.title","Locations"))}_getNoResultFoundMessage(e){return e&&k.kg("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return null!==(t=this._gotoMultipleBehaviour)&&void 0!==t?t:e.getOption(58).multipleReferences}_getAlternativeCommand(){return""}}G.w.registerCommand({id:"editor.action.goToLocations",metadata:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:a.r},{name:"position",description:"The position at which to start",constraint:g.y.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:async(e,t,i,o,n,s,d)=>{(0,r.j)(a.r.isUri(t)),(0,r.j)(g.y.isIPosition(i)),(0,r.j)(Array.isArray(o)),(0,r.j)("undefined"===typeof n||"string"===typeof n),(0,r.j)("undefined"===typeof d||"boolean"===typeof d);const l=e.get(h.T),u=await l.openCodeEditor({resource:t},l.getFocusedCodeEditor());if((0,c.z9)(u))return u.setPosition(i),u.revealPositionInCenterIfOutsideViewport(i,0),u.invokeWithinContext((e=>{const t=new class extends se{_getNoResultFoundMessage(e){return s||super._getNoResultFoundMessage(e)}}({muteMessage:!Boolean(s),openInPeek:Boolean(d),openToSide:!1},o,n);e.get(D._Y).invokeFunction(t.run.bind(t),u)}))}}),G.w.registerCommand({id:"editor.action.peekLocations",metadata:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:a.r},{name:"position",description:"The position at which to start",constraint:g.y.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"}]},handler:async(e,t,i,o,n)=>{e.get(G.d).executeCommand("editor.action.goToLocations",t,i,o,n,void 0,!0)}}),G.w.registerCommand({id:"editor.action.findReferences",handler:(e,t,i)=>{(0,r.j)(a.r.isUri(t)),(0,r.j)(g.y.isIPosition(i));const o=e.get($.u),s=e.get(h.T);return s.openCodeEditor({resource:t},s.getFocusedCodeEditor()).then((e=>{if(!(0,c.z9)(e)||!e.hasModel())return;const t=v.X.get(e);if(!t)return;const s=(0,n.SS)((t=>(0,q.NN)(o.referenceProvider,e.getModel(),g.y.lift(i),!1,t).then((e=>new f.y4(e,k.kg("ref.title","References")))))),r=new p.Q(i.lineNumber,i.column,i.lineNumber,i.column);return Promise.resolve(t.toggleWidget(r,s,!1))}))}}),G.w.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations")},49618:(e,t,i)=>{i.d(t,{NN:()=>p,eS:()=>u,f9:()=>g,hE:()=>l,sv:()=>h});var o=i(61498),n=i(25143),s=i(29591),r=i(30050),a=i(63910),d=i(39494);async function c(e,t,i,n){const r=i.ordered(e).map((i=>Promise.resolve(n(i,e,t)).then(void 0,(e=>{(0,s.M_)(e)})))),a=await Promise.all(r);return(0,o.Yc)(a.flat())}function l(e,t,i,o){return c(t,i,e,((e,t,i)=>e.provideDefinition(t,i,o)))}function h(e,t,i,o){return c(t,i,e,((e,t,i)=>e.provideDeclaration(t,i,o)))}function u(e,t,i,o){return c(t,i,e,((e,t,i)=>e.provideImplementation(t,i,o)))}function g(e,t,i,o){return c(t,i,e,((e,t,i)=>e.provideTypeDefinition(t,i,o)))}function p(e,t,i,o,n){return c(t,i,e,(async(e,t,i)=>{const s=await e.provideReferences(t,i,{includeDeclaration:!0},n);if(!o||!s||2!==s.length)return s;const r=await e.provideReferences(t,i,{includeDeclaration:!1},n);return r&&1===r.length?r:s}))}async function _(e){const t=await e(),i=new d.y4(t,""),o=i.references.map((e=>e.link));return i.dispose(),o}(0,r.ke)("_executeDefinitionProvider",((e,t,i)=>{const o=l(e.get(a.u).definitionProvider,t,i,n.XO.None);return _((()=>o))})),(0,r.ke)("_executeTypeDefinitionProvider",((e,t,i)=>{const o=g(e.get(a.u).typeDefinitionProvider,t,i,n.XO.None);return _((()=>o))})),(0,r.ke)("_executeDeclarationProvider",((e,t,i)=>{const o=h(e.get(a.u).declarationProvider,t,i,n.XO.None);return _((()=>o))})),(0,r.ke)("_executeReferenceProvider",((e,t,i)=>{const o=p(e.get(a.u).referenceProvider,t,i,!1,n.XO.None);return _((()=>o))})),(0,r.ke)("_executeImplementationProvider",((e,t,i)=>{const o=u(e.get(a.u).implementationProvider,t,i,n.XO.None);return _((()=>o))}))},59183:(e,t,i)=>{i.d(t,{gi:()=>h});var o=i(48250),n=i(87766),s=i(66731);function r(e,t){return!!e[t]}class a{constructor(e,t){this.target=e.target,this.isLeftClick=e.event.leftButton,this.isMiddleClick=e.event.middleButton,this.isRightClick=e.event.rightButton,this.hasTriggerModifier=r(e.event,t.triggerModifier),this.hasSideBySideModifier=r(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class d{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=r(e,t.triggerModifier)}}class c{constructor(e,t,i,o){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=o}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function l(e){return"altKey"===e?s.zx?new c(57,"metaKey",6,"altKey"):new c(5,"ctrlKey",6,"altKey"):s.zx?new c(6,"altKey",57,"metaKey"):new c(6,"altKey",5,"ctrlKey")}class h extends n.jG{constructor(e,t){var i;super(),this._onMouseMoveOrRelevantKeyDown=this._register(new o.vl),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new o.vl),this.onExecute=this._onExecute.event,this._onCancel=this._register(new o.vl),this.onCancel=this._onCancel.event,this._editor=e,this._extractLineNumberFromMouseEvent=null!==(i=null===t||void 0===t?void 0:t.extractLineNumberFromMouseEvent)&&void 0!==i?i:e=>e.target.position?e.target.position.lineNumber:0,this._opts=l(this._editor.getOption(78)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration((e=>{if(e.hasChanged(78)){const e=l(this._editor.getOption(78));if(this._opts.equals(e))return;this._opts=e,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}}))),this._register(this._editor.onMouseMove((e=>this._onEditorMouseMove(new a(e,this._opts))))),this._register(this._editor.onMouseDown((e=>this._onEditorMouseDown(new a(e,this._opts))))),this._register(this._editor.onMouseUp((e=>this._onEditorMouseUp(new a(e,this._opts))))),this._register(this._editor.onKeyDown((e=>this._onEditorKeyDown(new d(e,this._opts))))),this._register(this._editor.onKeyUp((e=>this._onEditorKeyUp(new d(e,this._opts))))),this._register(this._editor.onMouseDrag((()=>this._resetHandler()))),this._register(this._editor.onDidChangeCursorSelection((e=>this._onDidChangeCursorSelection(e)))),this._register(this._editor.onDidChangeModel((e=>this._resetHandler()))),this._register(this._editor.onDidChangeModelContent((()=>this._resetHandler()))),this._register(this._editor.onDidScrollChange((e=>{(e.scrollTopChanged||e.scrollLeftChanged)&&this._resetHandler()})))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=this._extractLineNumberFromMouseEvent(e)}_onEditorMouseUp(e){const t=this._extractLineNumberFromMouseEvent(e);this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}},33541:(e,t,i)=>{i.d(t,{k:()=>C});var o,n=i(73990),s=i(29591),r=i(58348),a=i(87766),d=i(39212),c=i(30050),l=i(99005),h=i(63970),u=i(58066),g=i(59183),p=i(78472),_=i(51413),m=i(39686),v=i(29911),f=i(49618),b=i(63910),w=i(15739),y=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},k=function(e,t){return function(i,o){t(i,o,e)}};let C=o=class{constructor(e,t,i,o){this.textModelResolverService=t,this.languageService=i,this.languageFeaturesService=o,this.toUnhook=new a.Cm,this.toUnhookForKeyboard=new a.Cm,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e,this.linkDecorations=this.editor.createDecorationsCollection();const n=new g.gi(e);this.toUnhook.add(n),this.toUnhook.add(n.onMouseMoveOrRelevantKeyDown((e=>{let[t,i]=e;this.startFindDefinitionFromMouse(t,null!==i&&void 0!==i?i:void 0)}))),this.toUnhook.add(n.onExecute((e=>{this.isEnabled(e)&&this.gotoDefinition(e.target.position,e.hasSideBySideModifier).catch((e=>{(0,s.dz)(e)})).finally((()=>{this.removeLinkDecorations()}))}))),this.toUnhook.add(n.onCancel((()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null})))}static get(e){return e.getContribution(o.ID)}async startFindDefinitionFromCursor(e){await this.startFindDefinition(e),this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition((()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()}))),this.toUnhookForKeyboard.add(this.editor.onKeyDown((e=>{e&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())})))}startFindDefinitionFromMouse(e,t){if(9===e.target.type&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t))return this.currentWordAtPosition=null,void this.removeLinkDecorations();const i=e.target.position;this.startFindDefinition(i)}async startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();const i=e?null===(t=this.editor.getModel())||void 0===t?void 0:t.getWordAtPosition(e):null;if(!i)return this.currentWordAtPosition=null,void this.removeLinkDecorations();if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===i.startColumn&&this.currentWordAtPosition.endColumn===i.endColumn&&this.currentWordAtPosition.word===i.word)return;this.currentWordAtPosition=i;const o=new d.$t(this.editor,15);let a;this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=(0,n.SS)((t=>this.findDefinition(e,t)));try{a=await this.previousPromise}catch(h){return void(0,s.dz)(h)}if(!a||!a.length||!o.validate(this.editor))return void this.removeLinkDecorations();const c=a[0].originSelectionRange?l.Q.lift(a[0].originSelectionRange):new l.Q(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn);if(a.length>1){let e=c;for(const{originSelectionRange:t}of a)t&&(e=l.Q.plusRange(e,t));this.addDecoration(e,(new r.Bc).appendText(_.kg("multipleResults","Click to show {0} definitions.",a.length)))}else{const e=a[0];if(!e.uri)return;this.textModelResolverService.createModelReference(e.uri).then((t=>{if(!t.object||!t.object.textEditorModel)return void t.dispose();const{object:{textEditorModel:i}}=t,{startLineNumber:o}=e.range;if(o<1||o>i.getLineCount())return void t.dispose();const n=this.getPreviewValue(i,o,e),s=this.languageService.guessLanguageIdByFilepathOrFirstLine(i.uri);this.addDecoration(c,n?(new r.Bc).appendCodeblock(s||"",n):void 0),t.dispose()}))}}getPreviewValue(e,t,i){let n=i.range;n.endLineNumber-n.startLineNumber>=o.MAX_SOURCE_PREVIEW_LINES&&(n=this.getPreviewRangeBasedOnIndentation(e,t));return this.stripIndentationFromPreviewRange(e,t,n)}stripIndentationFromPreviewRange(e,t,i){let o=e.getLineFirstNonWhitespaceColumn(t);for(let n=t+1;n<i.endLineNumber;n++){const t=e.getLineFirstNonWhitespaceColumn(n);o=Math.min(o,t)}return e.getValueInRange(i).replace(new RegExp("^\\s{".concat(o-1,"}"),"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const i=e.getLineFirstNonWhitespaceColumn(t),n=Math.min(e.getLineCount(),t+o.MAX_SOURCE_PREVIEW_LINES);let s=t+1;for(;s<n;s++){if(i===e.getLineFirstNonWhitespaceColumn(s))break}return new l.Q(t,1,s+1,1)}addDecoration(e,t){const i={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations.set([i])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(e,t){var i;return this.editor.hasModel()&&e.isLeftClick&&e.isNoneOrSingleMouseDown&&6===e.target.type&&!((null===(i=e.target.detail.injectedText)||void 0===i?void 0:i.options)instanceof w.Ho)&&(e.hasTriggerModifier||!!t&&t.keyCodeIsTriggerKey)&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(e,t){const i=this.editor.getModel();return i?(0,f.hE)(this.languageFeaturesService.definitionProvider,i,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext((e=>{const i=!t&&this.editor.getOption(88)&&!this.isInPeekEditor(e);return new v.mR({openToSide:t,openInPeek:i,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(e)}))}isInPeekEditor(e){const t=e.get(m.fN);return p.x2.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose(),this.toUnhookForKeyboard.dispose()}};C.ID="editor.contrib.gotodefinitionatposition",C.MAX_SOURCE_PREVIEW_LINES=8,C=o=y([k(1,u.b),k(2,h.L),k(3,b.u)],C),(0,c.HW)(C.ID,C,2)},42991:(e,t,i)=>{i.d(t,{X:()=>ue});var o,n=i(73990),s=i(29591),r=i(57443),a=i(87766),d=i(32101),c=i(23525),l=i(99005),h=i(78472),u=i(51413),g=i(39587),p=i(66457),_=i(39686),m=i(39263),v=i(1957),f=i(9273),b=i(39895),w=i(87299),y=i(39494),k=i(32605),C=i(86793),S=i(57397),D=i(48250),M=i(83888),R=i(53059),P=i(60633),x=i(15739),I=i(80158),L=i(55949),N=i(63970),E=i(58066),O=i(10850),T=i(99631),F=i(80040),H=i(86373),A=i(16391),W=i(7289),V=i(77942),z=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},B=function(e,t){return function(i,o){t(i,o,e)}};let j=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof y.y4||e instanceof y.$L}getChildren(e){if(e instanceof y.y4)return e.groups;if(e instanceof y.$L)return e.resolve(this._resolverService).then((e=>e.children));throw new Error("bad tree")}};j=z([B(0,E.b)],j);class U{getHeight(){return 23}getTemplateId(e){return e instanceof y.$L?q.id:Y.id}}let K=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof y.yc){const i=null===(t=e.parent.getPreview(e))||void 0===t?void 0:t.preview(e.range);if(i)return i.value}return(0,R.P8)(e.uri)}};K=z([B(0,A.b)],K);class G{getId(e){return e instanceof y.yc?e.id:e.uri}}let Q=class extends a.jG{constructor(e,t){super(),this._labelService=t;const i=document.createElement("div");i.classList.add("reference-file"),this.file=this._register(new F.s(i,{supportHighlights:!0})),this.badge=new O.x(k.BC(i,k.$(".count")),{},V.m$),e.appendChild(i)}set(e,t){const i=(0,R.pD)(e.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(e.uri),this._labelService.getUriLabel(i,{relative:!0}),{title:this._labelService.getUriLabel(e.uri),matches:t});const o=e.children.length;this.badge.setCount(o),o>1?this.badge.setTitleFormat((0,u.kg)("referencesCount","{0} references",o)):this.badge.setTitleFormat((0,u.kg)("referenceCount","{0} reference",o))}};Q=z([B(1,W.L)],Q);let q=o=class{constructor(e){this._instantiationService=e,this.templateId=o.id}renderTemplate(e){return this._instantiationService.createInstance(Q,e)}renderElement(e,t,i){i.set(e.element,(0,H.WJ)(e.filterData))}disposeTemplate(e){e.dispose()}};q.id="FileReferencesRenderer",q=o=z([B(0,m._Y)],q);class $ extends a.jG{constructor(e){super(),this.label=this._register(new T._(e))}set(e,t){var i;const o=null===(i=e.parent.getPreview(e))||void 0===i?void 0:i.preview(e.range);if(o&&o.value){const{value:e,highlight:i}=o;t&&!H.ne.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(e,(0,H.WJ)(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(e,[i]))}else this.label.set("".concat((0,R.P8)(e.uri),":").concat(e.range.startLineNumber+1,":").concat(e.range.startColumn+1))}}class Y{constructor(){this.templateId=Y.id}renderTemplate(e){return new $(e)}renderElement(e,t,i){i.set(e.element,e.filterData)}disposeTemplate(e){e.dispose()}}Y.id="OneReferenceRenderer";class X{getWidgetAriaLabel(){return(0,u.kg)("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var Z=i(19700),J=i(62579),ee=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},te=function(e,t){return function(i,o){t(i,o,e)}};class ie{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new a.Cm,this._callOnModelChange=new a.Cm,this._callOnDispose.add(this._editor.onDidChangeModel((()=>this._onModelChanged()))),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e)for(const t of this._model.references)if(t.uri.toString()===e.uri.toString())return void this._addDecorations(t.parent)}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations((()=>this._onDecorationChanged())));const t=[],i=[];for(let o=0,n=e.children.length;o<n;o++){const n=e.children[o];this._decorationIgnoreSet.has(n.id)||n.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:n.range,options:ie.DecorationOptions}),i.push(o))}this._editor.changeDecorations((o=>{const n=o.deltaDecorations([],t);for(let t=0;t<n.length;t++)this._decorations.set(n[t],e.children[i[t]])}))}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(const[i,o]of this._decorations){const n=t.getDecorationRange(i);if(!n)continue;let s=!1;if(!l.Q.equalsRange(n,o.range)){if(l.Q.spansMultipleLines(n))s=!0;else{o.range.endColumn-o.range.startColumn!==n.endColumn-n.startColumn&&(s=!0)}s?(this._decorationIgnoreSet.add(o.id),e.push(i)):o.range=n}}for(let t=0,i=e.length;t<i;t++)this._decorations.delete(e[t]);this._editor.removeDecorations(e)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}}ie.DecorationOptions=x.kI.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class oe{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,i;try{const o=JSON.parse(e);t=o.ratio,i=o.heightInLines}catch(o){}return{ratio:t||.7,heightInLines:i||18}}}class ne extends f.er{}let se=class extends h.j6{constructor(e,t,i,o,n,s,r,d,c,l,h,u){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},s),this._defaultTreeKeyboardSupport=t,this.layoutData=i,this._textModelResolverService=n,this._instantiationService=s,this._peekViewService=r,this._uriLabel=d,this._undoRedoService=c,this._keybindingService=l,this._languageService=h,this._languageConfigurationService=u,this._disposeOnNewModel=new a.Cm,this._callOnDispose=new a.Cm,this._onDidSelectReference=new D.vl,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new k.fg(0,0),this._applyTheme(o.getColorTheme()),this._callOnDispose.add(o.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),(0,a.AS)(this._preview),(0,a.AS)(this._previewNotAvailableMessage),(0,a.AS)(this._tree),(0,a.AS)(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(h.zl)||S.Q1.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(h.z0)||S.Q1.transparent,primaryHeadingColor:e.getColor(h._X),secondaryHeadingColor:e.getColor(h.e3)})}show(e){super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=k.BC(e,k.$("div.messages")),k.jD(this._messageContainer),this._splitView=new C.U(e,{orientation:1}),this._previewContainer=k.BC(e,k.$("div.preview.inline"));this._preview=this._instantiationService.createInstance(P.t,this._previewContainer,{scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!0},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}},{},this.editor),k.jD(this._previewContainer),this._previewNotAvailableMessage=new x.Bz(u.kg("missingPreviewMessage","no preview available"),L.vH,x.Bz.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=k.BC(e,k.$("div.ref-tree.inline"));const t={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new X,keyboardNavigationLabelProvider:this._instantiationService.createInstance(K),identityProvider:new G,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:h.n6}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(k.b2(this._treeContainer,"keydown",(e=>{e.equals(9)&&(this._keybindingService.dispatchEvent(e,e.target),e.stopPropagation())}),!0)),this._tree=this._instantiationService.createInstance(ne,"ReferencesWidget",this._treeContainer,new U,[this._instantiationService.createInstance(q),this._instantiationService.createInstance(Y)],this._instantiationService.createInstance(j),t),this._splitView.addView({onDidChange:D.Jh.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:e=>{this._preview.layout({height:this._dim.height,width:e})}},C.X.Distribute),this._splitView.addView({onDidChange:D.Jh.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:e=>{this._treeContainer.style.height="".concat(this._dim.height,"px"),this._treeContainer.style.width="".concat(e,"px"),this._tree.layout(this._dim.height,e)}},C.X.Distribute),this._disposables.add(this._splitView.onDidSashChange((()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)}),void 0));const i=(e,t)=>{e instanceof y.yc&&("show"===t&&this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:t,source:"tree"}))};this._tree.onDidOpen((e=>{e.sideBySide?i(e.element,"side"):e.editorOptions.pinned?i(e.element,"goto"):i(e.element,"show")})),k.jD(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new k.fg(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then((()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))}))}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=u.kg("noResults","No results"),k.WU(this._messageContainer),Promise.resolve(void 0)):(k.jD(this._messageContainer),this._decorationsManager=new ie(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange((e=>this._tree.rerender(e)))),this._disposeOnNewModel.add(this._preview.onMouseDown((e=>{const{event:t,target:i}=e;if(2!==t.detail)return;const o=this._getFocusedReference();o&&this._onDidSelectReference.fire({element:{uri:o.uri,range:i.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})}))),this.container.classList.add("results-loaded"),k.WU(this._treeContainer),k.WU(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(1===this._model.groups.length?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();return e instanceof y.yc?e:e instanceof y.$L&&e.children.length>0?e.children[0]:void 0}async revealReference(e){await this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})}async _revealReference(e,t){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==M.ny.inMemory?this.setTitle((0,R.Pi)(e.uri),this._uriLabel.getUriLabel((0,R.pD)(e.uri))):this.setTitle(u.kg("peekView.alternateTitle","References"));const i=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent||(t&&this._tree.reveal(e.parent),await this._tree.expand(e.parent)),this._tree.reveal(e);const o=await i;if(!this._model)return void o.dispose();(0,a.AS)(this._previewModelReference);const n=o.object;if(n){const t=this._preview.getModel()===n.textEditorModel?0:1,i=l.Q.lift(e.range).collapseToStart();this._previewModelReference=o,this._preview.setModel(n.textEditorModel),this._preview.setSelection(i),this._preview.revealRangeInCenter(i,t)}else this._preview.setModel(this._previewNotAvailableMessage),o.dispose()}};se=ee([te(3,Z.Gy),te(4,E.b),te(5,m._Y),te(6,h.zn),te(7,W.L),te(8,J.$D),te(9,A.b),te(10,N.L),te(11,I.JZ)],se);var re,ae=i(72330),de=i(73546),ce=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},le=function(e,t){return function(i,o){t(i,o,e)}};const he=new _.N1("referenceSearchVisible",!1,u.kg("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let ue=re=class{static get(e){return e.getContribution(re.ID)}constructor(e,t,i,o,n,s,r,d){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=o,this._notificationService=n,this._instantiationService=s,this._storageService=r,this._configurationService=d,this._disposables=new a.Cm,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=he.bindTo(i)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),null===(e=this._widget)||void 0===e||e.dispose(),null===(t=this._model)||void 0===t||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,i){let o;if(this._widget&&(o=this._widget.position),this.closeWidget(),o&&e.containsPosition(o))return;this._peekMode=i,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage((()=>{this.closeWidget()}))),this._disposables.add(this._editor.onDidChangeModel((()=>{this._ignoreModelChangeEvent||this.closeWidget()})));const n="peekViewLayout",s=oe.fromJSON(this._storageService.get(n,0,"{}"));this._widget=this._instantiationService.createInstance(se,this._editor,this._defaultTreeKeyboardSupport,s),this._widget.setTitle(u.kg("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose((()=>{t.cancel(),this._widget&&(this._storageService.store(n,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()}))),this._disposables.add(this._widget.onDidSelectReference((e=>{const{element:t,kind:o}=e;if(t)switch(o){case"open":"editor"===e.source&&this._configurationService.getValue("editor.stablePeek")||this.openReference(t,!1,!1);break;case"side":this.openReference(t,!0,!1);break;case"goto":i?this._gotoReference(t,!0):this.openReference(t,!1,!0)}})));const r=++this._requestIdPool;t.then((t=>{var i;if(r===this._requestIdPool&&this._widget)return null===(i=this._model)||void 0===i||i.dispose(),this._model=t,this._widget.setModel(this._model).then((()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(u.kg("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));const t=this._editor.getModel().uri,i=new c.y(e.startLineNumber,e.startColumn),o=this._model.nearestReference(t,i);if(o)return this._widget.setSelection(o).then((()=>{this._widget&&"editor"===this._editor.getOption(87)&&this._widget.focusOnPreviewEditor()}))}}));t.dispose()}),(e=>{this._notificationService.error(e)}))}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}async goToNextOrPreviousReference(e){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const i=this._model.nearestReference(this._editor.getModel().uri,t);if(!i)return;const o=this._model.nextOrPreviousReference(i,e),n=this._editor.hasTextFocus(),s=this._widget.isPreviewEditorFocused();await this._widget.setSelection(o),await this._gotoReference(o,!1),n?this._editor.focus():this._widget&&s&&this._widget.focusOnPreviewEditor()}async revealReference(e){this._editor.hasModel()&&this._model&&this._widget&&await this._widget.revealReference(e)}closeWidget(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t,i;null===(t=this._widget)||void 0===t||t.dispose(),null===(i=this._model)||void 0===i||i.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e,t){var i;null===(i=this._widget)||void 0===i||i.hide(),this._ignoreModelChangeEvent=!0;const o=l.Q.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:o,selectionSource:"code.jump",pinned:t}},this._editor).then((e=>{var t;if(this._ignoreModelChangeEvent=!1,e&&this._widget)if(this._editor===e)this._widget.show(o),this._widget.focusOnReferenceTree();else{const i=re.get(e),s=this._model.clone();this.closeWidget(),e.focus(),null===i||void 0===i||i.toggleWidget(o,(0,n.SS)((e=>Promise.resolve(s))),null!==(t=this._peekMode)&&void 0!==t&&t)}else this.closeWidget()}),(e=>{this._ignoreModelChangeEvent=!1,(0,s.dz)(e)}))}openReference(e,t,i){t||this.closeWidget();const{uri:o,range:n}=e;this._editorService.openCodeEditor({resource:o,options:{selection:n,selectionSource:"code.jump",pinned:i}},this._editor,t)}};function ge(e,t){const i=(0,h.RL)(e);if(!i)return;const o=ue.get(i);o&&t(o)}ue.ID="editor.contrib.referencesController",ue=re=ce([le(2,_.fN),le(3,d.T),le(4,b.Ot),le(5,m._Y),le(6,w.CS),le(7,p.pG)],ue),v.f.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:(0,r.m5)(2089,60),when:_.M$.or(he,h.x2.inPeekEditor),handler(e){ge(e,(e=>{e.changeFocusBetweenPreviewAndReferences()}))}}),v.f.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:_.M$.or(he,h.x2.inPeekEditor),handler(e){ge(e,(e=>{e.goToNextOrPreviousReference(!0)}))}}),v.f.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:_.M$.or(he,h.x2.inPeekEditor),handler(e){ge(e,(e=>{e.goToNextOrPreviousReference(!1)}))}}),g.w.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),g.w.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),g.w.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),g.w.registerCommand("closeReferenceSearch",(e=>ge(e,(e=>e.closeWidget())))),v.f.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:_.M$.and(h.x2.inPeekEditor,_.M$.not("config.editor.stablePeek"))}),v.f.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:_.M$.and(he,_.M$.not("config.editor.stablePeek"),_.M$.or(ae.R.editorTextFocus,de.J7.negate()))}),v.f.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:_.M$.and(he,f.YD,f.Nf.negate(),f.cH.negate()),handler(e){var t;const i=null===(t=e.get(f.PE).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(i)&&i[0]instanceof y.yc&&ge(e,(e=>e.revealReference(i[0])))}}),v.f.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:_.M$.and(he,f.YD,f.Nf.negate(),f.cH.negate()),handler(e){var t;const i=null===(t=e.get(f.PE).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(i)&&i[0]instanceof y.yc&&ge(e,(e=>e.openReference(i[0],!0,!0)))}}),g.w.registerCommand("openReference",(e=>{var t;const i=null===(t=e.get(f.PE).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(i)&&i[0]instanceof y.yc&&ge(e,(e=>e.openReference(i[0],!1,!0)))}))},39494:(e,t,i)=>{i.d(t,{$L:()=>p,y4:()=>_,yc:()=>u});var o=i(29591),n=i(48250),s=i(66952),r=i(87766),a=i(67512),d=i(53059),c=i(12780),l=i(99005),h=i(51413);class u{constructor(e,t,i,o){this.isProviderFirst=e,this.parent=t,this.link=i,this._rangeCallback=o,this.id=s.r.nextId()}get uri(){return this.link.uri}get range(){var e,t;return null!==(t=null!==(e=this._range)&&void 0!==e?e:this.link.targetSelectionRange)&&void 0!==t?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=null===(e=this.parent.getPreview(this))||void 0===e?void 0:e.preview(this.range);return t?(0,h.kg)({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"{0} in {1} on line {2} at column {3}",t.value,(0,d.P8)(this.uri),this.range.startLineNumber,this.range.startColumn):(0,h.kg)("aria.oneReference","in {0} on line {1} at column {2}",(0,d.P8)(this.uri),this.range.startLineNumber,this.range.startColumn)}}class g{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const i=this._modelReference.object.textEditorModel;if(!i)return;const{startLineNumber:o,startColumn:n,endLineNumber:s,endColumn:r}=e,a=i.getWordUntilPosition({lineNumber:o,column:n-t}),d=new l.Q(o,a.startColumn,o,n),c=new l.Q(s,r,s,1073741824),h=i.getValueInRange(d).replace(/^\s+/,""),u=i.getValueInRange(e);return{value:h+u+i.getValueInRange(c).replace(/\s+$/,""),highlight:{start:h.length,end:h.length+u.length}}}}class p{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new a.fT}dispose(){(0,r.AS)(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return 1===e?(0,h.kg)("aria.fileReferences.1","1 symbol in {0}, full path {1}",(0,d.P8)(this.uri),this.uri.fsPath):(0,h.kg)("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,(0,d.P8)(this.uri),this.uri.fsPath)}async resolve(e){if(0!==this._previews.size)return this;for(const i of this.children)if(!this._previews.has(i.uri))try{const t=await e.createModelReference(i.uri);this._previews.set(i.uri,new g(t))}catch(t){(0,o.dz)(t)}return this}}class _{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new n.vl,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[i]=e;let o;e.sort(_._compareReferences);for(const n of e)if(o&&d.er.isEqual(o.uri,n.uri,!0)||(o=new p(this,n.uri),this.groups.push(o)),0===o.children.length||0!==_._compareReferences(n,o.children[o.children.length-1])){const e=new u(i===n,o,n,(e=>this._onDidChangeReferenceRange.fire(e)));this.references.push(e),o.children.push(e)}}dispose(){(0,r.AS)(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new _(this._links,this._title)}get title(){return this._title}get isEmpty(){return 0===this.groups.length}get ariaMessage(){return this.isEmpty?(0,h.kg)("aria.result.0","No results found"):1===this.references.length?(0,h.kg)("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):1===this.groups.length?(0,h.kg)("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):(0,h.kg)("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){const{parent:i}=e;let o=i.children.indexOf(e);const n=i.children.length,s=i.parent.groups.length;return 1===s||t&&o+1<n||!t&&o>0?(o=t?(o+1)%n:(o+n-1)%n,i.children[o]):(o=i.parent.groups.indexOf(i),t?(o=(o+1)%s,i.parent.groups[o].children[0]):(o=(o+s-1)%s,i.parent.groups[o].children[i.parent.groups[o].children.length-1]))}nearestReference(e,t){const i=this.references.map(((i,o)=>({idx:o,prefixLen:c.Qp(i.uri.toString(),e.toString()),offsetDist:100*Math.abs(i.range.startLineNumber-t.lineNumber)+Math.abs(i.range.startColumn-t.column)}))).sort(((e,t)=>e.prefixLen>t.prefixLen?-1:e.prefixLen<t.prefixLen?1:e.offsetDist<t.offsetDist?-1:e.offsetDist>t.offsetDist?1:0))[0];if(i)return this.references[i.idx]}referenceAt(e,t){for(const i of this.references)if(i.uri.toString()===e.toString()&&l.Q.containsPosition(i.range,t))return i}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return d.er.compare(e.uri,t.uri)||l.Q.compareRangesUsingStarts(e.range,t.range)}}},30142:(e,t,i)=>{i.d(t,{L:()=>l});var o=i(32605),n=i(29424),s=i(87766),r=i(16391),a=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},d=function(e,t){return function(i,o){t(i,o,e)}};const c=o.$;let l=class extends s.jG{get hasContent(){return this._hasContent}constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=c("div.hover-row.status-bar"),this.hoverElement.tabIndex=0,this.actionsElement=o.BC(this.hoverElement,c("div.actions"))}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),i=t?t.getLabel():null;return this._hasContent=!0,this._register(n.jQ.render(this.actionsElement,e,i))}append(e){const t=o.BC(this.actionsElement,e);return this._hasContent=!0,t}};l=a([d(0,r.b)],l)},53998:(e,t,i)=>{i.d(t,{U:()=>c});var o=i(73990),n=i(25143),s=i(29591),r=i(30050),a=i(63910);class d{constructor(e,t,i){this.provider=e,this.hover=t,this.ordinal=i}}function c(e,t,i,n){const r=e.ordered(t).map(((e,o)=>async function(e,t,i,o,n){const r=await Promise.resolve(e.provideHover(i,o,n)).catch(s.M_);if(r&&function(e){const t="undefined"!==typeof e.range,i="undefined"!==typeof e.contents&&e.contents&&e.contents.length>0;return t&&i}(r))return new d(e,r,t)}(e,o,t,i,n)));return o.AE.fromPromises(r).coalesce()}(0,r.ke)("_executeHoverProvider",((e,t,i)=>function(e,t,i,o){return c(e,t,i,o).map((e=>e.hover)).toPromise()}(e.get(a.u).hoverProvider,t,i,n.XO.None)))},7958:(e,t,i)=>{i.d(t,{Hm:()=>l,Hp:()=>r,K6:()=>s,MB:()=>a,Xp:()=>h,Zp:()=>p,dV:()=>n,ih:()=>c,jA:()=>o,jq:()=>g,vf:()=>d,vx:()=>u});const o="editor.action.showHover",n="editor.action.showDefinitionPreviewHover",s="editor.action.scrollUpHover",r="editor.action.scrollDownHover",a="editor.action.scrollLeftHover",d="editor.action.scrollRightHover",c="editor.action.pageUpHover",l="editor.action.pageDownHover",h="editor.action.goToTopHover",u="editor.action.goToBottomHover",g="editor.action.increaseHoverVerbosityLevel",p="editor.action.decreaseHoverVerbosityLevel"},75492:(e,t,i)=>{var o,n=i(7958),s=i(57443),r=i(30050),a=i(99005),d=i(72330),c=i(33541),l=i(24690),h=i(91861),u=i(51413);i(72526);!function(e){e.NoAutoFocus="noAutoFocus",e.FocusIfVisible="focusIfVisible",e.AutoFocusImmediately="autoFocusImmediately"}(o||(o={}));class g extends r.ks{constructor(){super({id:n.jA,label:u.kg({key:"showOrFocusHover",comment:["Label for action that will trigger the showing/focusing of a hover in the editor.","If the hover is not visible, it will show the hover.","This allows for users to show the hover without using the mouse."]},"Show or Focus Hover"),metadata:{description:u.aS("showOrFocusHoverDescription","Show or focus the editor hover which shows documentation, references, and other content for a symbol at the current cursor position."),args:[{name:"args",schema:{type:"object",properties:{focus:{description:"Controls if and when the hover should take focus upon being triggered by this action.",enum:[o.NoAutoFocus,o.FocusIfVisible,o.AutoFocusImmediately],enumDescriptions:[u.kg("showOrFocusHover.focus.noAutoFocus","The hover will not automatically take focus."),u.kg("showOrFocusHover.focus.focusIfVisible","The hover will take focus only if it is already visible."),u.kg("showOrFocusHover.focus.autoFocusImmediately","The hover will automatically take focus when it appears.")],default:o.FocusIfVisible}}}}]},alias:"Show or Focus Hover",precondition:void 0,kbOpts:{kbExpr:d.R.editorTextFocus,primary:(0,s.m5)(2089,2087),weight:100}})}run(e,t,i){if(!t.hasModel())return;const n=l.n.get(t);if(!n)return;const s=null===i||void 0===i?void 0:i.focus;let r=o.FocusIfVisible;Object.values(o).includes(s)?r=s:"boolean"===typeof s&&s&&(r=o.AutoFocusImmediately);const d=e=>{const i=t.getPosition(),o=new a.Q(i.lineNumber,i.column,i.lineNumber,i.column);n.showContentHover(o,1,1,e)},c=2===t.getOption(2);n.isHoverVisible?r!==o.NoAutoFocus?n.focus():d(c):d(c||r===o.AutoFocusImmediately)}}class p extends r.ks{constructor(){super({id:n.dV,label:u.kg({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0,metadata:{description:u.aS("showDefinitionPreviewHoverDescription","Show the definition preview hover in the editor.")}})}run(e,t){const i=l.n.get(t);if(!i)return;const o=t.getPosition();if(!o)return;const n=new a.Q(o.lineNumber,o.column,o.lineNumber,o.column),s=c.k.get(t);if(!s)return;s.startFindDefinitionFromCursor(o).then((()=>{i.showContentHover(n,1,1,!0)}))}}class _ extends r.ks{constructor(){super({id:n.K6,label:u.kg({key:"scrollUpHover",comment:["Action that allows to scroll up in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Up Hover"),alias:"Scroll Up Hover",precondition:d.R.hoverFocused,kbOpts:{kbExpr:d.R.hoverFocused,primary:16,weight:100},metadata:{description:u.aS("scrollUpHoverDescription","Scroll up the editor hover.")}})}run(e,t){const i=l.n.get(t);i&&i.scrollUp()}}class m extends r.ks{constructor(){super({id:n.Hp,label:u.kg({key:"scrollDownHover",comment:["Action that allows to scroll down in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Down Hover"),alias:"Scroll Down Hover",precondition:d.R.hoverFocused,kbOpts:{kbExpr:d.R.hoverFocused,primary:18,weight:100},metadata:{description:u.aS("scrollDownHoverDescription","Scroll down the editor hover.")}})}run(e,t){const i=l.n.get(t);i&&i.scrollDown()}}class v extends r.ks{constructor(){super({id:n.MB,label:u.kg({key:"scrollLeftHover",comment:["Action that allows to scroll left in the hover widget with the left arrow when the hover widget is focused."]},"Scroll Left Hover"),alias:"Scroll Left Hover",precondition:d.R.hoverFocused,kbOpts:{kbExpr:d.R.hoverFocused,primary:15,weight:100},metadata:{description:u.aS("scrollLeftHoverDescription","Scroll left the editor hover.")}})}run(e,t){const i=l.n.get(t);i&&i.scrollLeft()}}class f extends r.ks{constructor(){super({id:n.vf,label:u.kg({key:"scrollRightHover",comment:["Action that allows to scroll right in the hover widget with the right arrow when the hover widget is focused."]},"Scroll Right Hover"),alias:"Scroll Right Hover",precondition:d.R.hoverFocused,kbOpts:{kbExpr:d.R.hoverFocused,primary:17,weight:100},metadata:{description:u.aS("scrollRightHoverDescription","Scroll right the editor hover.")}})}run(e,t){const i=l.n.get(t);i&&i.scrollRight()}}class b extends r.ks{constructor(){super({id:n.ih,label:u.kg({key:"pageUpHover",comment:["Action that allows to page up in the hover widget with the page up command when the hover widget is focused."]},"Page Up Hover"),alias:"Page Up Hover",precondition:d.R.hoverFocused,kbOpts:{kbExpr:d.R.hoverFocused,primary:11,secondary:[528],weight:100},metadata:{description:u.aS("pageUpHoverDescription","Page up the editor hover.")}})}run(e,t){const i=l.n.get(t);i&&i.pageUp()}}class w extends r.ks{constructor(){super({id:n.Hm,label:u.kg({key:"pageDownHover",comment:["Action that allows to page down in the hover widget with the page down command when the hover widget is focused."]},"Page Down Hover"),alias:"Page Down Hover",precondition:d.R.hoverFocused,kbOpts:{kbExpr:d.R.hoverFocused,primary:12,secondary:[530],weight:100},metadata:{description:u.aS("pageDownHoverDescription","Page down the editor hover.")}})}run(e,t){const i=l.n.get(t);i&&i.pageDown()}}class y extends r.ks{constructor(){super({id:n.Xp,label:u.kg({key:"goToTopHover",comment:["Action that allows to go to the top of the hover widget with the home command when the hover widget is focused."]},"Go To Top Hover"),alias:"Go To Bottom Hover",precondition:d.R.hoverFocused,kbOpts:{kbExpr:d.R.hoverFocused,primary:14,secondary:[2064],weight:100},metadata:{description:u.aS("goToTopHoverDescription","Go to the top of the editor hover.")}})}run(e,t){const i=l.n.get(t);i&&i.goToTop()}}class k extends r.ks{constructor(){super({id:n.vx,label:u.kg({key:"goToBottomHover",comment:["Action that allows to go to the bottom in the hover widget with the end command when the hover widget is focused."]},"Go To Bottom Hover"),alias:"Go To Bottom Hover",precondition:d.R.hoverFocused,kbOpts:{kbExpr:d.R.hoverFocused,primary:13,secondary:[2066],weight:100},metadata:{description:u.aS("goToBottomHoverDescription","Go to the bottom of the editor hover.")}})}run(e,t){const i=l.n.get(t);i&&i.goToBottom()}}class C extends r.ks{constructor(){super({id:n.jq,label:u.kg({key:"increaseHoverVerbosityLevel",comment:["Label for action that will increase the hover verbosity level."]},"Increase Hover Verbosity Level"),alias:"Increase Hover Verbosity Level",precondition:d.R.hoverFocused})}run(e,t){var i;null===(i=l.n.get(t))||void 0===i||i.updateFocusedMarkdownHoverVerbosityLevel(h.M$.Increase)}}class S extends r.ks{constructor(){super({id:n.Zp,label:u.kg({key:"decreaseHoverVerbosityLevel",comment:["Label for action that will decrease the hover verbosity level."]},"Decrease Hover Verbosity Level"),alias:"Decrease Hover Verbosity Level",precondition:d.R.hoverFocused})}run(e,t,i){var o;null===(o=l.n.get(t))||void 0===o||o.updateFocusedMarkdownHoverVerbosityLevel(h.M$.Decrease)}}var D=i(63573),M=i(19700),R=i(85287),P=i(69406),x=i(32605),I=i(61498),L=i(73990),N=i(29591),E=i(87766),O=i(53059),T=i(63910),F=i(70006),H=i(1170),A=i(76301),W=i(59303),V=i(19995),z=i(39747),B=i(2531),j=i(3607),U=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},K=function(e,t){return function(i,o){t(i,o,e)}};const G=x.$;class Q{constructor(e,t,i){this.owner=e,this.range=t,this.marker=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const q={type:1,filter:{include:W.gB.QuickFix},triggerAction:W.fo.QuickFixHover};let $=class{constructor(e,t,i,o){this._editor=e,this._markerDecorationsService=t,this._openerService=i,this._languageFeaturesService=o,this.hoverOrdinal=1,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||1!==e.type&&!e.supportsMarkerHover)return[];const i=this._editor.getModel(),o=e.range.startLineNumber,n=i.getLineMaxColumn(o),s=[];for(const r of t){const t=r.range.startLineNumber===o?r.range.startColumn:1,d=r.range.endLineNumber===o?r.range.endColumn:n,c=this._markerDecorationsService.getMarker(i.uri,r);if(!c)continue;const l=new a.Q(e.range.startLineNumber,t,e.range.startLineNumber,d);s.push(new Q(this,l,c))}return s}renderHoverParts(e,t){if(!t.length)return E.jG.None;const i=new E.Cm;t.forEach((t=>e.fragment.appendChild(this.renderMarkerHover(t,i))));const o=1===t.length?t[0]:t.sort(((e,t)=>z.cj.compare(e.marker.severity,t.marker.severity)))[0];return this.renderMarkerStatusbar(e,o,i),i}renderMarkerHover(e,t){const i=G("div.hover-row");i.tabIndex=0;const o=x.BC(i,G("div.marker.hover-contents")),{source:n,message:s,code:r,relatedInformation:a}=e.marker;this._editor.applyFontInfo(o);const d=x.BC(o,G("span"));if(d.style.whiteSpace="pre-wrap",d.innerText=s,n||r)if(r&&"string"!==typeof r){const e=G("span");if(n){x.BC(e,G("span")).innerText=n}const i=x.BC(e,G("a.code-link"));i.setAttribute("href",r.target.toString()),t.add(x.ko(i,"click",(e=>{this._openerService.open(r.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()})));x.BC(i,G("span")).innerText=r.value;const s=x.BC(o,e);s.style.opacity="0.6",s.style.paddingLeft="6px"}else{const e=x.BC(o,G("span"));e.style.opacity="0.6",e.style.paddingLeft="6px",e.innerText=n&&r?"".concat(n,"(").concat(r,")"):n||"(".concat(r,")")}if((0,I.EI)(a))for(const{message:c,resource:l,startLineNumber:h,startColumn:u}of a){const e=x.BC(o,G("div"));e.style.marginTop="8px";const i=x.BC(e,G("a"));i.innerText="".concat((0,O.P8)(l),"(").concat(h,", ").concat(u,"): "),i.style.cursor="pointer",t.add(x.ko(i,"click",(e=>{e.stopPropagation(),e.preventDefault(),this._openerService&&this._openerService.open(l,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:h,startColumn:u}}}).catch(N.dz)})));const n=x.BC(e,G("span"));n.innerText=c,this._editor.applyFontInfo(n)}return i}renderMarkerStatusbar(e,t,i){if(t.marker.severity===z.cj.Error||t.marker.severity===z.cj.Warning||t.marker.severity===z.cj.Info){const i=V.j.get(this._editor);i&&e.statusBar.addAction({label:u.kg("view problem","View Problem"),commandId:V.i.ID,run:()=>{e.hide(),i.showAtMarker(t.marker),this._editor.focus()}})}if(!this._editor.getOption(91)){const o=e.statusBar.append(G("div"));this.recentMarkerCodeActionsInfo&&(z.oc.makeKey(this.recentMarkerCodeActionsInfo.marker)===z.oc.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(o.textContent=u.kg("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const n=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?E.jG.None:(0,L.EQ)((()=>o.textContent=u.kg("checkingForQuickFixes","Checking for quick fixes...")),200,i);o.textContent||(o.textContent=String.fromCharCode(160));const s=this.getCodeActions(t.marker);i.add((0,E.s)((()=>s.cancel()))),s.then((s=>{if(n.dispose(),this.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:s.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions)return s.dispose(),void(o.textContent=u.kg("noQuickFixes","No quick fixes available"));o.style.display="none";let r=!1;i.add((0,E.s)((()=>{r||s.dispose()}))),e.statusBar.addAction({label:u.kg("quick fixes","Quick Fix..."),commandId:H.pQ,run:t=>{r=!0;const i=A.C.get(this._editor),o=x.BK(t);e.hide(),null===i||void 0===i||i.showCodeActions(q,s,{x:o.left,y:o.top,width:o.width,height:o.height})}})}),N.dz)}}getCodeActions(e){return(0,L.SS)((t=>(0,H.dU)(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new a.Q(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),q,j.ke.None,t)))}};$=U([K(1,F.A),K(2,B.C),K(3,T.u)],$),(0,r.HW)(l.n.ID,l.n,2),(0,r.Fl)(g),(0,r.Fl)(p),(0,r.Fl)(_),(0,r.Fl)(m),(0,r.Fl)(v),(0,r.Fl)(f),(0,r.Fl)(b),(0,r.Fl)(w),(0,r.Fl)(y),(0,r.Fl)(k),(0,r.Fl)(C),(0,r.Fl)(S),R.B2.register(P.xJ),R.B2.register($),(0,M.zy)(((e,t)=>{const i=e.getColor(D.oZ8);i&&(t.addRule(".monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ".concat(i.transparent(.5),"; }")),t.addRule(".monaco-editor .monaco-hover hr { border-top: 1px solid ".concat(i.transparent(.5),"; }")),t.addRule(".monaco-editor .monaco-hover hr { border-bottom: 0px solid ".concat(i.transparent(.5),"; }")))}))},24690:(e,t,i)=>{i.d(t,{n:()=>Z});var o=i(7958),n=i(87766),s=i(39263),r=i(17907),a=i(16391),d=i(73990),c=i(32605),l=i(37647),h=i(23525);class u extends n.jG{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new c.fg(10,10);super(),this._editor=e,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._resizableNode=this._register(new l.v),this._contentPosition=null,this._isResizing=!1,this._resizableNode.domNode.style.position="absolute",this._resizableNode.minSize=c.fg.lift(t),this._resizableNode.layout(t.height,t.width),this._resizableNode.enableSashes(!0,!0,!0,!0),this._register(this._resizableNode.onDidResize((e=>{this._resize(new c.fg(e.dimension.width,e.dimension.height)),e.done&&(this._isResizing=!1)}))),this._register(this._resizableNode.onDidWillResize((()=>{this._isResizing=!0})))}get isResizing(){return this._isResizing}getDomNode(){return this._resizableNode.domNode}getPosition(){return this._contentPosition}get position(){var e;return(null===(e=this._contentPosition)||void 0===e?void 0:e.position)?h.y.lift(this._contentPosition.position):void 0}_availableVerticalSpaceAbove(e){const t=this._editor.getDomNode(),i=this._editor.getScrolledVisiblePosition(e);if(!t||!i)return;return c.BK(t).top+i.top-30}_availableVerticalSpaceBelow(e){const t=this._editor.getDomNode(),i=this._editor.getScrolledVisiblePosition(e);if(!t||!i)return;const o=c.BK(t),n=c.tG(t.ownerDocument.body),s=o.top+i.top+i.height;return n.height-s-24}_findPositionPreference(e,t){var i,o;const n=Math.min(null!==(i=this._availableVerticalSpaceBelow(t))&&void 0!==i?i:1/0,e),s=Math.min(null!==(o=this._availableVerticalSpaceAbove(t))&&void 0!==o?o:1/0,e),r=Math.min(Math.max(s,n),e),a=Math.min(e,r);let d;return d=this._editor.getOption(60).above?a<=s?1:2:a<=n?2:1,1===d?this._resizableNode.enableSashes(!0,!0,!1,!1):this._resizableNode.enableSashes(!1,!0,!0,!1),d}_resize(e){this._resizableNode.layout(e.height,e.width)}}var g,p=i(39686),_=i(66457),m=i(73429),v=i(72330),f=i(29424),b=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},w=function(e,t){return function(i,o){t(i,o,e)}};let y=g=class extends u{get isColorPickerVisible(){var e;return Boolean(null===(e=this._visibleData)||void 0===e?void 0:e.colorPicker)}get isVisibleFromKeyboard(){var e;return 1===(null===(e=this._visibleData)||void 0===e?void 0:e.source)}get isVisible(){var e;return null!==(e=this._hoverVisibleKey.get())&&void 0!==e&&e}get isFocused(){var e;return null!==(e=this._hoverFocusedKey.get())&&void 0!==e&&e}constructor(e,t,i,o,n){const s=e.getOption(67)+8,r=new c.fg(150,s);super(e,r),this._configurationService=i,this._accessibilityService=o,this._keybindingService=n,this._hover=this._register(new f.N4),this._minimumSize=r,this._hoverVisibleKey=v.R.hoverVisible.bindTo(t),this._hoverFocusedKey=v.R.hoverFocused.bindTo(t),c.BC(this._resizableNode.domNode,this._hover.containerDomNode),this._resizableNode.domNode.style.zIndex="50",this._register(this._editor.onDidLayoutChange((()=>{this.isVisible&&this._updateMaxDimensions()}))),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(50)&&this._updateFont()})));const a=this._register(c.w5(this._resizableNode.domNode));this._register(a.onDidFocus((()=>{this._hoverFocusedKey.set(!0)}))),this._register(a.onDidBlur((()=>{this._hoverFocusedKey.set(!1)}))),this._setHoverData(void 0),this._editor.addContentWidget(this)}dispose(){var e;super.dispose(),null===(e=this._visibleData)||void 0===e||e.disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return g.ID}static _applyDimensions(e,t,i){const o="number"===typeof t?"".concat(t,"px"):t,n="number"===typeof i?"".concat(i,"px"):i;e.style.width=o,e.style.height=n}_setContentsDomNodeDimensions(e,t){const i=this._hover.contentsDomNode;return g._applyDimensions(i,e,t)}_setContainerDomNodeDimensions(e,t){const i=this._hover.containerDomNode;return g._applyDimensions(i,e,t)}_setHoverWidgetDimensions(e,t){this._setContentsDomNodeDimensions(e,t),this._setContainerDomNodeDimensions(e,t),this._layoutContentWidget()}static _applyMaxDimensions(e,t,i){const o="number"===typeof t?"".concat(t,"px"):t,n="number"===typeof i?"".concat(i,"px"):i;e.style.maxWidth=o,e.style.maxHeight=n}_setHoverWidgetMaxDimensions(e,t){g._applyMaxDimensions(this._hover.contentsDomNode,e,t),g._applyMaxDimensions(this._hover.containerDomNode,e,t),this._hover.containerDomNode.style.setProperty("--vscode-hover-maxWidth","number"===typeof e?"".concat(e,"px"):e),this._layoutContentWidget()}_setAdjustedHoverWidgetDimensions(e){this._setHoverWidgetMaxDimensions("none","none");const t=e.width,i=e.height;this._setHoverWidgetDimensions(t,i)}_updateResizableNodeMaxDimensions(){var e,t;const i=null!==(e=this._findMaximumRenderingWidth())&&void 0!==e?e:1/0,o=null!==(t=this._findMaximumRenderingHeight())&&void 0!==t?t:1/0;this._resizableNode.maxSize=new c.fg(i,o),this._setHoverWidgetMaxDimensions(i,o)}_resize(e){var t,i;g._lastDimensions=new c.fg(e.width,e.height),this._setAdjustedHoverWidgetDimensions(e),this._resizableNode.layout(e.height,e.width),this._updateResizableNodeMaxDimensions(),this._hover.scrollbar.scanDomNode(),this._editor.layoutContentWidget(this),null===(i=null===(t=this._visibleData)||void 0===t?void 0:t.colorPicker)||void 0===i||i.layout()}_findAvailableSpaceVertically(){var e;const t=null===(e=this._visibleData)||void 0===e?void 0:e.showAtPosition;if(t)return 1===this._positionPreference?this._availableVerticalSpaceAbove(t):this._availableVerticalSpaceBelow(t)}_findMaximumRenderingHeight(){const e=this._findAvailableSpaceVertically();if(!e)return;let t=6;return Array.from(this._hover.contentsDomNode.children).forEach((e=>{t+=e.clientHeight})),Math.min(e,t)}_isHoverTextOverflowing(){this._hover.containerDomNode.style.setProperty("--vscode-hover-whiteSpace","nowrap"),this._hover.containerDomNode.style.setProperty("--vscode-hover-sourceWhiteSpace","nowrap");const e=Array.from(this._hover.contentsDomNode.children).some((e=>e.scrollWidth>e.clientWidth));return this._hover.containerDomNode.style.removeProperty("--vscode-hover-whiteSpace"),this._hover.containerDomNode.style.removeProperty("--vscode-hover-sourceWhiteSpace"),e}_findMaximumRenderingWidth(){if(!this._editor||!this._editor.hasModel())return;const e=this._isHoverTextOverflowing(),t="undefined"===typeof this._contentWidth?0:this._contentWidth-2;if(e||this._hover.containerDomNode.clientWidth<t){return c.tG(this._hover.containerDomNode.ownerDocument.body).width-14}return this._hover.containerDomNode.clientWidth+2}isMouseGettingCloser(e,t){if(!this._visibleData)return!1;if("undefined"===typeof this._visibleData.initialMousePosX||"undefined"===typeof this._visibleData.initialMousePosY)return this._visibleData.initialMousePosX=e,this._visibleData.initialMousePosY=t,!1;const i=c.BK(this.getDomNode());"undefined"===typeof this._visibleData.closestMouseDistance&&(this._visibleData.closestMouseDistance=k(this._visibleData.initialMousePosX,this._visibleData.initialMousePosY,i.left,i.top,i.width,i.height));const o=k(e,t,i.left,i.top,i.width,i.height);return!(o>this._visibleData.closestMouseDistance+4)&&(this._visibleData.closestMouseDistance=Math.min(this._visibleData.closestMouseDistance,o),!0)}_setHoverData(e){var t;null===(t=this._visibleData)||void 0===t||t.disposables.dispose(),this._visibleData=e,this._hoverVisibleKey.set(!!e),this._hover.containerDomNode.classList.toggle("hidden",!e)}_updateFont(){const{fontSize:e,lineHeight:t}=this._editor.getOption(50),i=this._hover.contentsDomNode;i.style.fontSize="".concat(e,"px"),i.style.lineHeight="".concat(t/e);Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach((e=>this._editor.applyFontInfo(e)))}_updateContent(e){const t=this._hover.contentsDomNode;t.style.paddingBottom="",t.textContent="",t.appendChild(e)}_layoutContentWidget(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}_updateMaxDimensions(){const e=Math.max(this._editor.getLayoutInfo().height/4,250,g._lastDimensions.height),t=Math.max(.66*this._editor.getLayoutInfo().width,500,g._lastDimensions.width);this._setHoverWidgetMaxDimensions(t,e)}_render(e,t){this._setHoverData(t),this._updateFont(),this._updateContent(e),this._updateMaxDimensions(),this.onContentsChanged(),this._editor.render()}getPosition(){var e;return this._visibleData?{position:this._visibleData.showAtPosition,secondaryPosition:this._visibleData.showAtSecondaryPosition,positionAffinity:this._visibleData.isBeforeContent?3:void 0,preference:[null!==(e=this._positionPreference)&&void 0!==e?e:1]}:null}showAt(e,t){var i,o,n,s;if(!this._editor||!this._editor.hasModel())return;this._render(e,t);const r=c.OK(this._hover.containerDomNode),a=t.showAtPosition;this._positionPreference=null!==(i=this._findPositionPreference(r,a))&&void 0!==i?i:1,this.onContentsChanged(),t.stoleFocus&&this._hover.containerDomNode.focus(),null===(o=t.colorPicker)||void 0===o||o.layout();const d=this._hover.containerDomNode.ownerDocument.activeElement===this._hover.containerDomNode&&(0,f.vr)(!0===this._configurationService.getValue("accessibility.verbosity.hover")&&this._accessibilityService.isScreenReaderOptimized(),null!==(s=null===(n=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))||void 0===n?void 0:n.getAriaLabel())&&void 0!==s?s:"");d&&(this._hover.contentsDomNode.ariaLabel=this._hover.contentsDomNode.textContent+", "+d)}hide(){if(!this._visibleData)return;const e=this._visibleData.stoleFocus||this._hoverFocusedKey.get();this._setHoverData(void 0),this._resizableNode.maxSize=new c.fg(1/0,1/0),this._resizableNode.clearSashHoverState(),this._hoverFocusedKey.set(!1),this._editor.layoutContentWidget(this),e&&this._editor.focus()}_removeConstraintsRenderNormally(){const e=this._editor.getLayoutInfo();this._resizableNode.layout(e.height,e.width),this._setHoverWidgetDimensions("auto","auto")}setMinimumDimensions(e){this._minimumSize=new c.fg(Math.max(this._minimumSize.width,e.width),Math.max(this._minimumSize.height,e.height)),this._updateMinimumWidth()}_updateMinimumWidth(){const e="undefined"===typeof this._contentWidth?this._minimumSize.width:Math.min(this._contentWidth,this._minimumSize.width);this._resizableNode.minSize=new c.fg(e,this._minimumSize.height)}onContentsChanged(){var e;this._removeConstraintsRenderNormally();const t=this._hover.containerDomNode;let i=c.OK(t),o=c.Tr(t);if(this._resizableNode.layout(i,o),this._setHoverWidgetDimensions(o,i),i=c.OK(t),o=c.Tr(t),this._contentWidth=o,this._updateMinimumWidth(),this._resizableNode.layout(i,o),null===(e=this._visibleData)||void 0===e?void 0:e.showAtPosition){const e=c.OK(this._hover.containerDomNode);this._positionPreference=this._findPositionPreference(e,this._visibleData.showAtPosition)}this._layoutContentWidget()}focus(){this._hover.containerDomNode.focus()}scrollUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e-t.lineHeight})}scrollDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e+t.lineHeight})}scrollLeft(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e-30})}scrollRight(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e+30})}pageUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e-t})}pageDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e+t})}goToTop(){this._hover.scrollbar.setScrollPosition({scrollTop:0})}goToBottom(){this._hover.scrollbar.setScrollPosition({scrollTop:this._hover.scrollbar.getScrollDimensions().scrollHeight})}};function k(e,t,i,o,n,s){const r=i+n/2,a=o+s/2,d=Math.max(Math.abs(e-r)-n/2,0),c=Math.max(Math.abs(t-a)-s/2,0);return Math.sqrt(d*d+c*c)}y.ID="editor.contrib.resizableContentHoverWidget",y._lastDimensions=new c.fg(0,0),y=g=b([w(1,p.fN),w(2,_.pG),w(3,m.j),w(4,a.b)],y);var C=i(99005),S=i(15739),D=i(91861),M=i(29591),R=i(48250);class P{constructor(e,t,i){this.value=e,this.isComplete=t,this.hasLoadingMessage=i}}class x extends n.jG{constructor(e,t){super(),this._editor=e,this._computer=t,this._onResult=this._register(new R.vl),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new d.uC((()=>this._triggerAsyncComputation()),0)),this._secondWaitScheduler=this._register(new d.uC((()=>this._triggerSyncComputation()),0)),this._loadingMessageScheduler=this._register(new d.uC((()=>this._triggerLoadingMessage()),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(60).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._state=e,t&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=(0,d.bI)((e=>this._computer.computeAsync(e))),(async()=>{try{for await(const e of this._asyncIterable)e&&(this._result.push(e),this._fireResult());this._asyncIterableDone=!0,3!==this._state&&4!==this._state||this._setState(0)}catch(e){(0,M.dz)(e)}})()):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){3===this._state&&this._setState(4)}_fireResult(){if(1===this._state||2===this._state)return;const e=0===this._state,t=4===this._state;this._onResult.fire(new P(this._result.slice(0),e,t))}start(e){if(0===e)0===this._state&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation()}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}var I=i(85287),L=i(69406),N=i(58434),E=i(61498);class O{get anchor(){return this._anchor}set anchor(e){this._anchor=e}get shouldFocus(){return this._shouldFocus}set shouldFocus(e){this._shouldFocus=e}get source(){return this._source}set source(e){this._source=e}get insistOnKeepingHoverVisible(){return this._insistOnKeepingHoverVisible}set insistOnKeepingHoverVisible(e){this._insistOnKeepingHoverVisible=e}constructor(e,t){this._editor=e,this._participants=t,this._anchor=null,this._shouldFocus=!1,this._source=0,this._insistOnKeepingHoverVisible=!1}static _getLineDecorations(e,t){if(1!==t.type&&!t.supportsMarkerHover)return[];const i=e.getModel(),o=t.range.startLineNumber;if(o>i.getLineCount())return[];const n=i.getLineMaxColumn(o);return e.getLineDecorations(o).filter((e=>{if(e.options.isWholeLine)return!0;const i=e.range.startLineNumber===o?e.range.startColumn:1,s=e.range.endLineNumber===o?e.range.endColumn:n;if(e.options.showIfCollapsed){if(i>t.range.startColumn+1||t.range.endColumn-1>s)return!1}else if(i>t.range.startColumn||t.range.endColumn>s)return!1;return!0}))}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return d.AE.EMPTY;const i=O._getLineDecorations(this._editor,t);return d.AE.merge(this._participants.map((o=>o.computeAsync?o.computeAsync(t,i,e):d.AE.EMPTY)))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=O._getLineDecorations(this._editor,this._anchor);let t=[];for(const i of this._participants)t=t.concat(i.computeSync(this._anchor,e));return(0,E.Yc)(t)}}class T{constructor(e,t,i){this.anchor=e,this.messages=t,this.isComplete=i}filter(e){const t=this.messages.filter((t=>t.isValidForHoverAnchor(e)));return t.length===this.messages.length?this:new F(this,this.anchor,t,this.isComplete)}}class F extends T{constructor(e,t,i,o){super(t,i,o),this.original=e}filter(e){return this.original.filter(e)}}class H{constructor(e,t,i,o,n,s,r,a,d,c){this.initialMousePosX=e,this.initialMousePosY=t,this.colorPicker=i,this.showAtPosition=o,this.showAtSecondaryPosition=n,this.preferAbove=s,this.stoleFocus=r,this.source=a,this.isBeforeContent=d,this.disposables=c,this.closestMouseDistance=void 0}}var A,W=i(30142),V=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},z=function(e,t){return function(i,o){t(i,o,e)}};let B=A=class extends n.jG{constructor(e,t,i){super(),this._editor=e,this._instantiationService=t,this._keybindingService=i,this._currentResult=null,this._widget=this._register(this._instantiationService.createInstance(y,this._editor)),this._participants=[];for(const o of I.B2.getAll()){const e=this._instantiationService.createInstance(o,this._editor);e instanceof L.xJ&&!(e instanceof N.u)&&(this._markdownHoverParticipant=e),this._participants.push(e)}this._participants.sort(((e,t)=>e.hoverOrdinal-t.hoverOrdinal)),this._computer=new O(this._editor,this._participants),this._hoverOperation=this._register(new x(this._editor,this._computer)),this._register(this._hoverOperation.onResult((e=>{if(!this._computer.anchor)return;const t=e.hasLoadingMessage?this._addLoadingMessage(e.value):e.value;this._withResult(new T(this._computer.anchor,t,e.isComplete))}))),this._register(c.b2(this._widget.getDomNode(),"keydown",(e=>{e.equals(9)&&this.hide()}))),this._register(D.dG.onDidChange((()=>{this._widget.position&&this._currentResult&&this._setCurrentResult(this._currentResult)})))}_startShowingOrUpdateHover(e,t,i,o,n){if(!this._widget.position||!this._currentResult)return!!e&&(this._startHoverOperationIfNecessary(e,t,i,o,!1),!0);return this._editor.getOption(60).sticky&&n&&this._widget.isMouseGettingCloser(n.event.posx,n.event.posy)?(e&&this._startHoverOperationIfNecessary(e,t,i,o,!0),!0):e?!(!e||!this._currentResult.anchor.equals(e))||(e.canAdoptVisibleHover(this._currentResult.anchor,this._widget.position)?(this._setCurrentResult(this._currentResult.filter(e)),this._startHoverOperationIfNecessary(e,t,i,o,!1),!0):(this._setCurrentResult(null),this._startHoverOperationIfNecessary(e,t,i,o,!1),!0)):(this._setCurrentResult(null),!1)}_startHoverOperationIfNecessary(e,t,i,o,n){this._computer.anchor&&this._computer.anchor.equals(e)||(this._hoverOperation.cancel(),this._computer.anchor=e,this._computer.shouldFocus=o,this._computer.source=i,this._computer.insistOnKeepingHoverVisible=n,this._hoverOperation.start(t))}_setCurrentResult(e){this._currentResult!==e&&(e&&0===e.messages.length&&(e=null),this._currentResult=e,this._currentResult?this._renderMessages(this._currentResult.anchor,this._currentResult.messages):this._widget.hide())}_addLoadingMessage(e){if(this._computer.anchor)for(const t of this._participants)if(t.createLoadingMessage){const i=t.createLoadingMessage(this._computer.anchor);if(i)return e.slice(0).concat([i])}return e}_withResult(e){if(this._widget.position&&this._currentResult&&this._currentResult.isComplete){if(!e.isComplete)return;if(this._computer.insistOnKeepingHoverVisible&&0===e.messages.length)return}this._setCurrentResult(e)}_renderMessages(e,t){const{showAtPosition:i,showAtSecondaryPosition:o,highlightRange:s}=A.computeHoverRanges(this._editor,e.range,t),r=new n.Cm,a=r.add(new W.L(this._keybindingService)),d=document.createDocumentFragment();let c=null;const l={fragment:d,statusBar:a,setColorPicker:e=>c=e,onContentsChanged:()=>this._widget.onContentsChanged(),setMinimumDimensions:e=>this._widget.setMinimumDimensions(e),hide:()=>this.hide()};for(const n of this._participants){const e=t.filter((e=>e.owner===n));e.length>0&&r.add(n.renderHoverParts(l,e))}const h=t.some((e=>e.isBeforeContent));if(a.hasContent&&d.appendChild(a.hoverElement),d.hasChildNodes()){if(s){const e=this._editor.createDecorationsCollection();e.set([{range:s,options:A._DECORATION_OPTIONS}]),r.add((0,n.s)((()=>{e.clear()})))}this._widget.showAt(d,new H(e.initialMousePosX,e.initialMousePosY,c,i,o,this._editor.getOption(60).above,this._computer.shouldFocus,this._computer.source,h,r))}else r.dispose()}static computeHoverRanges(e,t,i){let o=1;if(e.hasModel()){const i=e._getViewModel(),n=i.coordinatesConverter,s=n.convertModelRangeToViewRange(t),r=new h.y(s.startLineNumber,i.getLineMinColumn(s.startLineNumber));o=n.convertViewPositionToModelPosition(r).column}const n=t.startLineNumber;let s=t.startColumn,r=i[0].range,a=null;for(const d of i)r=C.Q.plusRange(r,d.range),d.range.startLineNumber===n&&d.range.endLineNumber===n&&(s=Math.max(Math.min(s,d.range.startColumn),o)),d.forceShowAtRange&&(a=d.range);return{showAtPosition:a?a.getStartPosition():new h.y(n,t.startColumn),showAtSecondaryPosition:a?a.getStartPosition():new h.y(n,s),highlightRange:r}}showsOrWillShow(e){if(this._widget.isResizing)return!0;const t=[];for(const o of this._participants)if(o.suggestHoverAnchor){const i=o.suggestHoverAnchor(e);i&&t.push(i)}const i=e.target;if(6===i.type&&t.push(new I.hx(0,i.range,e.event.posx,e.event.posy)),7===i.type){const o=this._editor.getOption(50).typicalHalfwidthCharacterWidth/2;!i.detail.isAfterLines&&"number"===typeof i.detail.horizontalDistanceToText&&i.detail.horizontalDistanceToText<o&&t.push(new I.hx(0,i.range,e.event.posx,e.event.posy))}return 0===t.length?this._startShowingOrUpdateHover(null,0,0,!1,e):(t.sort(((e,t)=>t.priority-e.priority)),this._startShowingOrUpdateHover(t[0],0,0,!1,e))}startShowingAtRange(e,t,i,o){this._startShowingOrUpdateHover(new I.hx(0,e,void 0,void 0),t,i,o,null)}async updateFocusedMarkdownHoverVerbosityLevel(e){var t;null===(t=this._markdownHoverParticipant)||void 0===t||t.updateFocusedMarkdownHoverPartVerbosityLevel(e)}containsNode(e){return!!e&&this._widget.getDomNode().contains(e)}focus(){this._widget.focus()}scrollUp(){this._widget.scrollUp()}scrollDown(){this._widget.scrollDown()}scrollLeft(){this._widget.scrollLeft()}scrollRight(){this._widget.scrollRight()}pageUp(){this._widget.pageUp()}pageDown(){this._widget.pageDown()}goToTop(){this._widget.goToTop()}goToBottom(){this._widget.goToBottom()}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._setCurrentResult(null)}get isColorPickerVisible(){return this._widget.isColorPickerVisible}get isVisibleFromKeyboard(){return this._widget.isVisibleFromKeyboard}get isVisible(){return this._widget.isVisible}get isFocused(){return this._widget.isFocused}get isResizing(){return this._widget.isResizing}get widget(){return this._widget}};B._DECORATION_OPTIONS=S.kI.register({description:"content-hover-highlight",className:"hoverHighlight"}),B=A=V([z(1,s._Y),z(2,a.b)],B);i(72526);var j=i(14564),U=i(58348),K=i(32743);class G{get lineNumber(){return this._lineNumber}set lineNumber(e){this._lineNumber=e}get lane(){return this._laneOrLine}set lane(e){this._laneOrLine=e}constructor(e){this._editor=e,this._lineNumber=-1,this._laneOrLine=K.ZS.Center}computeSync(){var e,t;const i=e=>({value:e}),o=this._editor.getLineDecorations(this._lineNumber),n=[],s="lineNo"===this._laneOrLine;if(!o)return n;for(const r of o){const o=null!==(t=null===(e=r.options.glyphMargin)||void 0===e?void 0:e.position)&&void 0!==t?t:K.ZS.Center;if(!s&&o!==this._laneOrLine)continue;const a=s?r.options.lineNumberHoverMessage:r.options.glyphMarginHoverMessage;a&&!(0,U.it)(a)&&n.push(...(0,E._j)(a).map(i))}return n}}const Q=c.$;class q extends n.jG{constructor(e,t,i){super(),this._renderDisposeables=this._register(new n.Cm),this._editor=e,this._isVisible=!1,this._messages=[],this._hover=this._register(new f.N4),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new j.T({editor:this._editor},t,i)),this._computer=new G(this._editor),this._hoverOperation=this._register(new x(this._editor,this._computer)),this._register(this._hoverOperation.onResult((e=>{this._withResult(e.value)}))),this._register(this._editor.onDidChangeModelDecorations((()=>this._onModelDecorationsChanged()))),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(50)&&this._updateFont()}))),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return q.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach((e=>this._editor.applyFontInfo(e)))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}showsOrWillShow(e){const t=e.target;return 2===t.type&&t.detail.glyphMarginLane?(this._startShowingAt(t.position.lineNumber,t.detail.glyphMarginLane),!0):3===t.type&&(this._startShowingAt(t.position.lineNumber,"lineNo"),!0)}_startShowingAt(e,t){this._computer.lineNumber===e&&this._computer.lane===t||(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._computer.lane=t,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const i=document.createDocumentFragment();for(const o of t){const e=Q("div.hover-row.markdown-hover"),t=c.BC(e,Q("div.hover-contents")),n=this._renderDisposeables.add(this._markdownRenderer.render(o.value));t.appendChild(n.element),i.appendChild(e)}this._updateContents(i),this._showAt(e)}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),i=this._editor.getTopForLineNumber(e),o=this._editor.getScrollTop(),n=this._editor.getOption(67),s=i-o-(this._hover.containerDomNode.clientHeight-n)/2,r=t.glyphMarginLeft+t.glyphMarginWidth+("lineNo"===this._computer.lane?t.lineNumbersWidth:0);this._hover.containerDomNode.style.left="".concat(r,"px"),this._hover.containerDomNode.style.top="".concat(Math.max(Math.round(s),0),"px")}}q.ID="editor.contrib.modesGlyphHoverWidget";var $,Y=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},X=function(e,t){return function(i,o){t(i,o,e)}};let Z=$=class extends n.jG{constructor(e,t,i){super(),this._editor=e,this._instantiationService=t,this._keybindingService=i,this._listenersStore=new n.Cm,this._hoverState={mouseDown:!1,activatedByDecoratorClick:!1},this._reactToEditorMouseMoveRunner=this._register(new d.uC((()=>this._reactToEditorMouseMove(this._mouseMoveEvent)),0)),this._hookListeners(),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(60)&&(this._unhookListeners(),this._hookListeners())})))}static get(e){return e.getContribution($.ID)}_hookListeners(){const e=this._editor.getOption(60);this._hoverSettings={enabled:e.enabled,sticky:e.sticky,hidingDelay:e.delay},e.enabled?(this._listenersStore.add(this._editor.onMouseDown((e=>this._onEditorMouseDown(e)))),this._listenersStore.add(this._editor.onMouseUp((()=>this._onEditorMouseUp()))),this._listenersStore.add(this._editor.onMouseMove((e=>this._onEditorMouseMove(e)))),this._listenersStore.add(this._editor.onKeyDown((e=>this._onKeyDown(e))))):(this._listenersStore.add(this._editor.onMouseMove((e=>this._onEditorMouseMove(e)))),this._listenersStore.add(this._editor.onKeyDown((e=>this._onKeyDown(e))))),this._listenersStore.add(this._editor.onMouseLeave((e=>this._onEditorMouseLeave(e)))),this._listenersStore.add(this._editor.onDidChangeModel((()=>{this._cancelScheduler(),this._hideWidgets()}))),this._listenersStore.add(this._editor.onDidChangeModelContent((()=>this._cancelScheduler()))),this._listenersStore.add(this._editor.onDidScrollChange((e=>this._onEditorScrollChanged(e))))}_unhookListeners(){this._listenersStore.clear()}_cancelScheduler(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._hoverState.mouseDown=!0;this._shouldNotHideCurrentHoverWidget(e)||this._hideWidgets()}_shouldNotHideCurrentHoverWidget(e){return!!(this._isMouseOnContentHoverWidget(e)||this._isMouseOnMarginHoverWidget(e)||this._isContentWidgetResizing())}_isMouseOnMarginHoverWidget(e){const t=e.target;return!!t&&(12===t.type&&t.detail===q.ID)}_isMouseOnContentHoverWidget(e){const t=e.target;return!!t&&(9===t.type&&t.detail===y.ID)}_onEditorMouseUp(){this._hoverState.mouseDown=!1}_onEditorMouseLeave(e){this._cancelScheduler();this._shouldNotHideCurrentHoverWidget(e)||this._hideWidgets()}_shouldNotRecomputeCurrentHoverWidget(e){const t=this._hoverSettings.sticky;return!!(((e,t)=>{const i=this._isMouseOnMarginHoverWidget(e);return t&&i})(e,t)||((e,t)=>{const i=this._isMouseOnContentHoverWidget(e);return t&&i})(e,t)||(e=>{var t;const i=this._isMouseOnContentHoverWidget(e),o=null===(t=this._contentWidget)||void 0===t?void 0:t.isColorPickerVisible;return i&&o})(e)||((e,t)=>{var i,o,n,s;return t&&(null===(i=this._contentWidget)||void 0===i?void 0:i.containsNode(null===(o=e.event.browserEvent.view)||void 0===o?void 0:o.document.activeElement))&&!(null===(s=null===(n=e.event.browserEvent.view)||void 0===n?void 0:n.getSelection())||void 0===s?void 0:s.isCollapsed)})(e,t))}_onEditorMouseMove(e){var t,i,o,n;if(this._mouseMoveEvent=e,(null===(t=this._contentWidget)||void 0===t?void 0:t.isFocused)||(null===(i=this._contentWidget)||void 0===i?void 0:i.isResizing))return;const s=this._hoverSettings.sticky;if(s&&(null===(o=this._contentWidget)||void 0===o?void 0:o.isVisibleFromKeyboard))return;if(this._shouldNotRecomputeCurrentHoverWidget(e))return void this._reactToEditorMouseMoveRunner.cancel();const r=this._hoverSettings.hidingDelay;(null===(n=this._contentWidget)||void 0===n?void 0:n.isVisible)&&s&&r>0?this._reactToEditorMouseMoveRunner.isScheduled()||this._reactToEditorMouseMoveRunner.schedule(r):this._reactToEditorMouseMove(e)}_reactToEditorMouseMove(e){var t;if(!e)return;const i=null===(t=e.target.element)||void 0===t?void 0:t.classList.contains("colorpicker-color-decoration"),o=this._editor.getOption(148),n=this._hoverSettings.enabled,s=this._hoverState.activatedByDecoratorClick;if(i&&("click"===o&&!s||"hover"===o&&!n||"clickAndHover"===o&&!n&&!s)||!i&&!n&&!s)return void this._hideWidgets();if(this._tryShowHoverWidget(e,0))return;this._tryShowHoverWidget(e,1)||this._hideWidgets()}_tryShowHoverWidget(e,t){const i=this._getOrCreateContentWidget(),o=this._getOrCreateGlyphWidget();let n,s;switch(t){case 0:n=i,s=o;break;case 1:n=o,s=i;break;default:throw new Error("HoverWidgetType ".concat(t," is unrecognized"))}const r=n.showsOrWillShow(e);return r&&s.hide(),r}_onKeyDown(e){var t;if(!this._editor.hasModel())return;const i=this._keybindingService.softDispatch(e,this._editor.getDomNode()),n=1===i.kind||2===i.kind&&(i.commandId===o.jA||i.commandId===o.jq||i.commandId===o.Zp)&&(null===(t=this._contentWidget)||void 0===t?void 0:t.isVisible);5===e.keyCode||6===e.keyCode||57===e.keyCode||4===e.keyCode||n||this._hideWidgets()}_hideWidgets(){var e,t,i;this._hoverState.mouseDown&&(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible)||r.bo.dropDownVisible||(this._hoverState.activatedByDecoratorClick=!1,null===(t=this._glyphWidget)||void 0===t||t.hide(),null===(i=this._contentWidget)||void 0===i||i.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(B,this._editor)),this._contentWidget}_getOrCreateGlyphWidget(){return this._glyphWidget||(this._glyphWidget=this._instantiationService.createInstance(q,this._editor)),this._glyphWidget}showContentHover(e,t,i,o){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this._hoverState.activatedByDecoratorClick=n,this._getOrCreateContentWidget().startShowingAtRange(e,t,i,o)}_isContentWidgetResizing(){var e;return(null===(e=this._contentWidget)||void 0===e?void 0:e.widget.isResizing)||!1}updateFocusedMarkdownHoverVerbosityLevel(e){this._getOrCreateContentWidget().updateFocusedMarkdownHoverVerbosityLevel(e)}focus(){var e;null===(e=this._contentWidget)||void 0===e||e.focus()}scrollUp(){var e;null===(e=this._contentWidget)||void 0===e||e.scrollUp()}scrollDown(){var e;null===(e=this._contentWidget)||void 0===e||e.scrollDown()}scrollLeft(){var e;null===(e=this._contentWidget)||void 0===e||e.scrollLeft()}scrollRight(){var e;null===(e=this._contentWidget)||void 0===e||e.scrollRight()}pageUp(){var e;null===(e=this._contentWidget)||void 0===e||e.pageUp()}pageDown(){var e;null===(e=this._contentWidget)||void 0===e||e.pageDown()}goToTop(){var e;null===(e=this._contentWidget)||void 0===e||e.goToTop()}goToBottom(){var e;null===(e=this._contentWidget)||void 0===e||e.goToBottom()}get isColorPickerVisible(){var e;return null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible}get isHoverVisible(){var e;return null===(e=this._contentWidget)||void 0===e?void 0:e.isVisible}dispose(){var e,t;super.dispose(),this._unhookListeners(),this._listenersStore.dispose(),null===(e=this._glyphWidget)||void 0===e||e.dispose(),null===(t=this._contentWidget)||void 0===t||t.dispose()}};Z.ID="editor.contrib.hover",Z=$=Y([X(1,s._Y),X(2,a.b)],Z)},85287:(e,t,i)=>{i.d(t,{B2:()=>s,hx:()=>o,mm:()=>n});class o{constructor(e,t,i,o){this.priority=e,this.range=t,this.initialMousePosX=i,this.initialMousePosY=o,this.type=1}equals(e){return 1===e.type&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return 1===e.type&&t.lineNumber===this.range.startLineNumber}}class n{constructor(e,t,i,o,n,s){this.priority=e,this.owner=t,this.range=i,this.initialMousePosX=o,this.initialMousePosY=n,this.supportsMarkerHover=s,this.type=2}equals(e){return 2===e.type&&this.owner===e.owner}canAdoptVisibleHover(e,t){return 2===e.type&&this.owner===e.owner}}const s=new class{constructor(){this._participants=[]}register(e){this._participants.push(e)}getAll(){return this._participants}}},69406:(e,t,i)=>{i.d(t,{eH:()=>L,fm:()=>T,xJ:()=>E});var o=i(32605),n=i(61498),s=i(25143),r=i(58348),a=i(87766),d=i(14564),c=i(7958),l=i(99005),h=i(63970),u=i(51413),g=i(66457),p=i(2531),_=i(63910),m=i(91861),v=i(85514),f=i(21030),b=i(70145),w=i(29591),y=i(16391),k=i(29424),C=i(91356),S=i(73990),D=i(53998),M=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},R=function(e,t){return function(i,o){t(i,o,e)}};const P=o.$,x=(0,v.pU)("hover-increase-verbosity",f.W.add,u.kg("increaseHoverVerbosity","Icon for increaseing hover verbosity.")),I=(0,v.pU)("hover-decrease-verbosity",f.W.remove,u.kg("decreaseHoverVerbosity","Icon for decreasing hover verbosity."));class L{constructor(e,t,i,o,n){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;this.owner=e,this.range=t,this.contents=i,this.isBeforeContent=o,this.ordinal=n,this.source=s}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}class N{constructor(e,t,i){this.hover=e,this.hoverProvider=t,this.hoverPosition=i}supportsVerbosityAction(e){var t,i;switch(e){case m.M$.Increase:return null!==(t=this.hover.canIncreaseVerbosity)&&void 0!==t&&t;case m.M$.Decrease:return null!==(i=this.hover.canDecreaseVerbosity)&&void 0!==i&&i}}}let E=class{constructor(e,t,i,o,n,s,r){this._editor=e,this._languageService=t,this._openerService=i,this._configurationService=o,this._languageFeaturesService=n,this._keybindingService=s,this._hoverService=r,this.hoverOrdinal=3}createLoadingMessage(e){return new L(this,e.range,[(new r.Bc).appendText(u.kg("modesContentHover.loading","Loading..."))],!1,2e3)}computeSync(e,t){if(!this._editor.hasModel()||1!==e.type)return[];const i=this._editor.getModel(),o=e.range.startLineNumber,s=i.getLineMaxColumn(o),a=[];let d=1e3;const c=i.getLineLength(o),h=i.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),g=this._editor.getOption(117),p=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:h});let _=!1;g>=0&&c>g&&e.range.startColumn>=g&&(_=!0,a.push(new L(this,e.range,[{value:u.kg("stopped rendering","Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.")}],!1,d++))),!_&&"number"===typeof p&&c>=p&&a.push(new L(this,e.range,[{value:u.kg("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],!1,d++));let m=!1;for(const u of t){const t=u.range.startLineNumber===o?u.range.startColumn:1,i=u.range.endLineNumber===o?u.range.endColumn:s,c=u.options.hoverMessage;if(!c||(0,r.it)(c))continue;u.options.beforeContentClassName&&(m=!0);const h=new l.Q(e.range.startLineNumber,t,e.range.startLineNumber,i);a.push(new L(this,h,(0,n._j)(c),m,d++))}return a}computeAsync(e,t,i){if(!this._editor.hasModel()||1!==e.type)return S.AE.EMPTY;const o=this._editor.getModel(),n=this._languageFeaturesService.hoverProvider;if(!n.has(o))return S.AE.EMPTY;return this._getMarkdownHovers(n,o,e,i)}_getMarkdownHovers(e,t,i,o){const n=i.range.getStartPosition();return(0,D.U)(e,t,n,o).filter((e=>!(0,r.it)(e.hover.contents))).map((e=>{const t=e.hover.range?l.Q.lift(e.hover.range):i.range,o=new N(e.hover,e.provider,n);return new L(this,t,e.hover.contents,!1,e.ordinal,o)}))}renderHoverParts(e,t){return this._renderedHoverParts=new O(t,e.fragment,this._editor,this._languageService,this._openerService,this._keybindingService,this._hoverService,this._configurationService,e.onContentsChanged),this._renderedHoverParts}updateFocusedMarkdownHoverPartVerbosityLevel(e){var t;null===(t=this._renderedHoverParts)||void 0===t||t.updateFocusedHoverPartVerbosityLevel(e)}};E=M([R(1,h.L),R(2,p.C),R(3,g.pG),R(4,_.u),R(5,y.b),R(6,C.TN)],E);class O extends a.jG{constructor(e,t,i,o,n,s,r,d,c){super(),this._editor=i,this._languageService=o,this._openerService=n,this._keybindingService=s,this._hoverService=r,this._configurationService=d,this._onFinishedRendering=c,this._hoverFocusInfo={hoverPartIndex:-1,focusRemains:!1},this._renderedHoverParts=this._renderHoverParts(e,t,this._onFinishedRendering),this._register((0,a.s)((()=>{this._renderedHoverParts.forEach((e=>{e.disposables.dispose()}))})))}_renderHoverParts(e,t,i){return e.sort((0,n.VE)((e=>e.ordinal),n.U9)),e.map(((e,o)=>{const n=this._renderHoverPart(o,e.contents,e.source,i);return t.appendChild(n.renderedMarkdown),n}))}_renderHoverPart(e,t,i,n){const{renderedMarkdown:s,disposables:r}=this._renderMarkdownContent(t,n);if(!i)return{renderedMarkdown:s,disposables:r};const a=i.supportsVerbosityAction(m.M$.Increase),d=i.supportsVerbosityAction(m.M$.Decrease);if(!a&&!d)return{renderedMarkdown:s,disposables:r,hoverSource:i};const c=P("div.verbosity-actions");s.prepend(c),r.add(this._renderHoverExpansionAction(c,m.M$.Increase,a)),r.add(this._renderHoverExpansionAction(c,m.M$.Decrease,d));const l=r.add(o.w5(s));return r.add(l.onDidFocus((()=>{this._hoverFocusInfo={hoverPartIndex:e,focusRemains:!0}}))),r.add(l.onDidBlur((()=>{var e;(null===(e=this._hoverFocusInfo)||void 0===e?void 0:e.focusRemains)&&(this._hoverFocusInfo.focusRemains=!1)}))),{renderedMarkdown:s,disposables:r,hoverSource:i}}_renderMarkdownContent(e,t){const i=P("div.hover-row");i.tabIndex=0;const o=P("div.hover-row-contents");i.appendChild(o);const n=new a.Cm;return n.add(F(this._editor,o,e,this._languageService,this._openerService,t)),{renderedMarkdown:i,disposables:n}}_renderHoverExpansionAction(e,t,i){const n=new a.Cm,s=t===m.M$.Increase,r=o.BC(e,P(b.L.asCSSSelector(s?x:I)));r.tabIndex=0;const d=new C.fO("mouse",!1,{target:e,position:{hoverPosition:0}},this._configurationService,this._hoverService);if(s){const e=this._keybindingService.lookupKeybinding(c.jq);n.add(this._hoverService.setupUpdatableHover(d,r,e?u.kg("increaseVerbosityWithKb","Increase Verbosity ({0})",e.getLabel()):u.kg("increaseVerbosity","Increase Verbosity")))}else{const e=this._keybindingService.lookupKeybinding(c.Zp);n.add(this._hoverService.setupUpdatableHover(d,r,e?u.kg("decreaseVerbosityWithKb","Decrease Verbosity ({0})",e.getLabel()):u.kg("decreaseVerbosity","Decrease Verbosity")))}if(!i)return r.classList.add("disabled"),n;r.classList.add("enabled");const l=()=>this.updateFocusedHoverPartVerbosityLevel(t);return n.add(new k.vV(r,l)),n.add(new k.M4(r,l,[3,10])),n}async updateFocusedHoverPartVerbosityLevel(e){var t;const i=this._editor.getModel();if(!i)return;const o=this._hoverFocusInfo.hoverPartIndex,n=this._getRenderedHoverPartAtIndex(o);if(!n||!(null===(t=n.hoverSource)||void 0===t?void 0:t.supportsVerbosityAction(e)))return;const r=n.hoverSource.hoverPosition,a=n.hoverSource.hoverProvider,d={verbosityRequest:{action:e,previousHover:n.hoverSource.hover}};let c;try{c=await Promise.resolve(a.provideHover(i,r,s.XO.None,d))}catch(u){(0,w.M_)(u)}if(!c)return;const l=new N(c,a,r),h=this._renderHoverPart(o,c.contents,l,this._onFinishedRendering);this._replaceRenderedHoverPartAtIndex(o,h),this._focusOnHoverPartWithIndex(o),this._onFinishedRendering()}_replaceRenderedHoverPartAtIndex(e,t){if(e>=this._renderHoverParts.length||e<0)return;const i=this._renderedHoverParts[e];i.renderedMarkdown.replaceWith(t.renderedMarkdown),i.disposables.dispose(),this._renderedHoverParts[e]=t}_focusOnHoverPartWithIndex(e){this._renderedHoverParts[e].renderedMarkdown.focus(),this._hoverFocusInfo.focusRemains=!0}_getRenderedHoverPartAtIndex(e){return this._renderedHoverParts[e]}}function T(e,t,i,o,s){t.sort((0,n.VE)((e=>e.ordinal),n.U9));const r=new a.Cm;for(const n of t)r.add(F(i,e.fragment,n.contents,o,s,e.onContentsChanged));return r}function F(e,t,i,n,s,c){const l=new a.Cm;for(const a of i){if((0,r.it)(a))continue;const i=P("div.markdown-hover"),h=o.BC(i,P("div.hover-contents")),u=l.add(new d.T({editor:e},n,s));l.add(u.onDidRenderAsync((()=>{h.className="hover-contents code-hover-contents",c()})));const g=l.add(u.render(a));h.appendChild(g.element),t.appendChild(i)}return l}},89762:(e,t,i)=>{var o=i(73990),n=i(29591),s=i(39212),r=i(30050),a=i(99005),d=i(5190),c=i(72330),l=i(15739),h=i(35296),u=i(51413);class g{constructor(e,t,i){this._editRange=e,this._originalSelection=t,this._text=i}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new d.L(i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn),i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn)):new d.L(i.endLineNumber,i.endColumn-this._text.length,i.endLineNumber,i.endColumn)}}var p,_=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},m=function(e,t){return function(i,o){t(i,o,e)}};let v=p=class{static get(e){return e.getContribution(p.ID)}constructor(e,t){this.editor=e,this.editorWorkerService=t,this.decorations=this.editor.createDecorationsCollection()}dispose(){}run(e,t){var i;null===(i=this.currentRequest)||void 0===i||i.cancel();const r=this.editor.getSelection(),c=this.editor.getModel();if(!c||!r)return;let l=r;if(l.startLineNumber!==l.endLineNumber)return;const h=new s.$t(this.editor,5),u=c.uri;return this.editorWorkerService.canNavigateValueSet(u)?(this.currentRequest=(0,o.SS)((e=>this.editorWorkerService.navigateValueSet(u,l,t))),this.currentRequest.then((t=>{var i;if(!t||!t.range||!t.value)return;if(!h.validate(this.editor))return;const s=a.Q.lift(t.range);let r=t.range;const c=t.value.length-(l.endColumn-l.startColumn);r={startLineNumber:r.startLineNumber,startColumn:r.startColumn,endLineNumber:r.endLineNumber,endColumn:r.startColumn+t.value.length},c>1&&(l=new d.L(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+c-1));const u=new g(s,l,t.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,u),this.editor.pushUndoStop(),this.decorations.set([{range:r,options:p.DECORATION}]),null===(i=this.decorationRemover)||void 0===i||i.cancel(),this.decorationRemover=(0,o.wR)(350),this.decorationRemover.then((()=>this.decorations.clear())).catch(n.dz)})).catch(n.dz)):Promise.resolve(void 0)}};v.ID="editor.contrib.inPlaceReplaceController",v.DECORATION=l.kI.register({description:"in-place-replace",className:"valueSetReplacement"}),v=p=_([m(1,h.w)],v);class f extends r.ks{constructor(){super({id:"editor.action.inPlaceReplace.up",label:u.kg("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:c.R.writable,kbOpts:{kbExpr:c.R.editorTextFocus,primary:3159,weight:100}})}run(e,t){const i=v.get(t);return i?i.run(this.id,!1):Promise.resolve(void 0)}}class b extends r.ks{constructor(){super({id:"editor.action.inPlaceReplace.down",label:u.kg("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:c.R.writable,kbOpts:{kbExpr:c.R.editorTextFocus,primary:3161,weight:100}})}run(e,t){const i=v.get(t);return i?i.run(this.id,!0):Promise.resolve(void 0)}}(0,r.HW)(v.ID,v,4),(0,r.Fl)(f),(0,r.Fl)(b)},58174:(e,t,i)=>{var o=i(87766),n=i(12780),s=i(30050),r=i(90984),a=i(99005),d=i(72330),c=i(80158),l=i(21950),h=i(70787),u=i(51413),g=i(50051),p=i(47893),_=i(94597),m=i(77327),v=i(5190);function f(e,t,i,o,s){if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return[];const a=t.getLanguageConfiguration(e.getLanguageId()).indentationRules;if(!a)return[];for(o=Math.min(o,e.getLineCount());i<=o&&a.unIndentedLinePattern;){const t=e.getLineContent(i);if(!a.unIndentedLinePattern.test(t))break;i++}if(i>o-1)return[];const{tabSize:d,indentSize:c,insertSpaces:l}=e.getOptions(),h=(e,t)=>(t=t||1,r.Y.shiftIndent(e,e.length+t,d,c,l)),u=(e,t)=>(t=t||1,r.Y.unshiftIndent(e,e.length+t,d,c,l)),g=[];let p;const f=e.getLineContent(i);let b=f;if(void 0!==s&&null!==s){p=s;const e=n.UU(f);b=p+f.substring(e.length),a.decreaseIndentPattern&&a.decreaseIndentPattern.test(b)&&(p=u(p),b=p+f.substring(e.length)),f!==b&&g.push(_.k.replaceMove(new v.L(i,1,i,e.length+1),(0,m.P)(p,c,l)))}else p=n.UU(f);let w=p;a.increaseIndentPattern&&a.increaseIndentPattern.test(b)?(w=h(w),p=h(p)):a.indentNextLinePattern&&a.indentNextLinePattern.test(b)&&(w=h(w));for(let r=++i;r<=o;r++){const t=e.getLineContent(r),i=n.UU(t),o=w+t.substring(i.length);a.decreaseIndentPattern&&a.decreaseIndentPattern.test(o)&&(w=u(w),p=u(p)),i!==w&&g.push(_.k.replaceMove(new v.L(r,1,r,i.length+1),(0,m.P)(w,c,l))),a.unIndentedLinePattern&&a.unIndentedLinePattern.test(t)||(a.increaseIndentPattern&&a.increaseIndentPattern.test(o)?(p=h(p),w=p):w=a.indentNextLinePattern&&a.indentNextLinePattern.test(o)?h(w):p)}return g}var b=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},w=function(e,t){return function(i,o){t(i,o,e)}};class y extends s.ks{constructor(){super({id:y.ID,label:u.kg("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:d.R.writable,metadata:{description:u.aS("indentationToSpacesDescription","Convert the tab indentation to spaces.")}})}run(e,t){const i=t.getModel();if(!i)return;const o=i.getOptions(),n=t.getSelection();if(!n)return;const s=new E(n,o.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop(),i.updateOptions({insertSpaces:!0})}}y.ID="editor.action.indentationToSpaces";class k extends s.ks{constructor(){super({id:k.ID,label:u.kg("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:d.R.writable,metadata:{description:u.aS("indentationToTabsDescription","Convert the spaces indentation to tabs.")}})}run(e,t){const i=t.getModel();if(!i)return;const o=i.getOptions(),n=t.getSelection();if(!n)return;const s=new O(n,o.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop(),i.updateOptions({insertSpaces:!1})}}k.ID="editor.action.indentationToTabs";class C extends s.ks{constructor(e,t,i){super(i),this.insertSpaces=e,this.displaySizeOnly=t}run(e,t){const i=e.get(g.GK),o=e.get(l.S),n=t.getModel();if(!n)return;const s=o.getCreationOptions(n.getLanguageId(),n.uri,n.isForSimpleWidget),r=n.getOptions(),a=[1,2,3,4,5,6,7,8].map((e=>({id:e.toString(),label:e.toString(),description:e===s.tabSize&&e===r.tabSize?u.kg("configuredTabSize","Configured Tab Size"):e===s.tabSize?u.kg("defaultTabSize","Default Tab Size"):e===r.tabSize?u.kg("currentTabSize","Current Tab Size"):void 0}))),d=Math.min(n.getOptions().tabSize-1,7);setTimeout((()=>{i.pick(a,{placeHolder:u.kg({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:a[d]}).then((e=>{if(e&&n&&!n.isDisposed()){const t=parseInt(e.label,10);this.displaySizeOnly?n.updateOptions({tabSize:t}):n.updateOptions({tabSize:t,indentSize:t,insertSpaces:this.insertSpaces})}}))}),50)}}class S extends C{constructor(){super(!1,!1,{id:S.ID,label:u.kg("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0,metadata:{description:u.aS("indentUsingTabsDescription","Use indentation with tabs.")}})}}S.ID="editor.action.indentUsingTabs";class D extends C{constructor(){super(!0,!1,{id:D.ID,label:u.kg("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0,metadata:{description:u.aS("indentUsingSpacesDescription","Use indentation with spaces.")}})}}D.ID="editor.action.indentUsingSpaces";class M extends C{constructor(){super(!0,!0,{id:M.ID,label:u.kg("changeTabDisplaySize","Change Tab Display Size"),alias:"Change Tab Display Size",precondition:void 0,metadata:{description:u.aS("changeTabDisplaySizeDescription","Change the space size equivalent of the tab.")}})}}M.ID="editor.action.changeTabDisplaySize";class R extends s.ks{constructor(){super({id:R.ID,label:u.kg("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0,metadata:{description:u.aS("detectIndentationDescription","Detect the indentation from content.")}})}run(e,t){const i=e.get(l.S),o=t.getModel();if(!o)return;const n=i.getCreationOptions(o.getLanguageId(),o.uri,o.isForSimpleWidget);o.detectIndentation(n.insertSpaces,n.tabSize)}}R.ID="editor.action.detectIndentation";class P extends s.ks{constructor(){super({id:"editor.action.reindentlines",label:u.kg("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:d.R.writable,metadata:{description:u.aS("editor.reindentlinesDescription","Reindent the lines of the editor.")}})}run(e,t){const i=e.get(c.JZ),o=t.getModel();if(!o)return;const n=f(o,i,1,o.getLineCount());n.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,n),t.pushUndoStop())}}class x extends s.ks{constructor(){super({id:"editor.action.reindentselectedlines",label:u.kg("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:d.R.writable,metadata:{description:u.aS("editor.reindentselectedlinesDescription","Reindent the selected lines of the editor.")}})}run(e,t){const i=e.get(c.JZ),o=t.getModel();if(!o)return;const n=t.getSelections();if(null===n)return;const s=[];for(const r of n){let e=r.startLineNumber,t=r.endLineNumber;if(e!==t&&1===r.endColumn&&t--,1===e){if(e===t)continue}else e--;const n=f(o,i,e,t);s.push(...n)}s.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop())}}class I{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(const i of e)i.range&&"string"===typeof i.text&&this._edits.push(i)}getEditOperations(e,t){for(const o of this._edits)t.addEditOperation(a.Q.lift(o.range),o.text);let i=!1;Array.isArray(this._edits)&&1===this._edits.length&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),i||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}let L=class{constructor(e,t){this.editor=e,this._languageConfigurationService=t,this.callOnDispose=new o.Cm,this.callOnModel=new o.Cm,this.callOnDispose.add(e.onDidChangeConfiguration((()=>this.update()))),this.callOnDispose.add(e.onDidChangeModel((()=>this.update()))),this.callOnDispose.add(e.onDidChangeModelLanguage((()=>this.update())))}update(){this.callOnModel.clear(),this.editor.getOption(12)<4||this.editor.getOption(55)||this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste((e=>{let{range:t}=e;this.trigger(t)})))}trigger(e){const t=this.editor.getSelections();if(null===t||t.length>1)return;const i=this.editor.getModel();if(!i)return;if(!i.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber))return;const o=this.editor.getOption(12),{tabSize:s,indentSize:d,insertSpaces:c}=i.getOptions(),l=[],u={shiftIndent:e=>r.Y.shiftIndent(e,e.length+1,s,d,c),unshiftIndent:e=>r.Y.unshiftIndent(e,e.length+1,s,d,c)};let g=e.startLineNumber;for(;g<=e.endLineNumber&&this.shouldIgnoreLine(i,g);)g++;if(g>e.endLineNumber)return;let _=i.getLineContent(g);if(!/\S/.test(_.substring(0,e.startColumn-1))){const e=(0,p.$f)(o,i,i.getLanguageId(),g,u,this._languageConfigurationService);if(null!==e){const t=n.UU(_),o=h.c(e,s);if(o!==h.c(t,s)){const e=h.k(o,s,c);l.push({range:new a.Q(g,1,g,t.length+1),text:e}),_=e+_.substr(t.length)}else{const e=(0,p.Yb)(i,g,this._languageConfigurationService);if(0===e||8===e)return}}}const m=g;for(;g<e.endLineNumber&&!/\S/.test(i.getLineContent(g+1));)g++;if(g!==e.endLineNumber){const t={tokenization:{getLineTokens:e=>i.tokenization.getLineTokens(e),getLanguageId:()=>i.getLanguageId(),getLanguageIdAtPosition:(e,t)=>i.getLanguageIdAtPosition(e,t)},getLineContent:e=>e===m?_:i.getLineContent(e)},r=(0,p.$f)(o,t,i.getLanguageId(),g+1,u,this._languageConfigurationService);if(null!==r){const t=h.c(r,s),o=h.c(n.UU(i.getLineContent(g+1)),s);if(t!==o){const r=t-o;for(let t=g+1;t<=e.endLineNumber;t++){const e=i.getLineContent(t),o=n.UU(e),d=h.c(o,s)+r,u=h.k(d,s,c);u!==o&&l.push({range:new a.Q(t,1,t,o.length+1),text:u})}}}}if(l.length>0){this.editor.pushUndoStop();const e=new I(l,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",e),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.tokenization.forceTokenization(t);const i=e.getLineFirstNonWhitespaceColumn(t);if(0===i)return!0;const o=e.tokenization.getLineTokens(t);if(o.getCount()>0){const e=o.findTokenIndexAtOffset(i);if(e>=0&&1===o.getStandardTokenType(e))return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}};function N(e,t,i,o){if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return;let n="";for(let r=0;r<i;r++)n+=" ";const s=new RegExp(n,"gi");for(let r=1,d=e.getLineCount();r<=d;r++){let i=e.getLineFirstNonWhitespaceColumn(r);if(0===i&&(i=e.getLineMaxColumn(r)),1===i)continue;const d=new a.Q(r,1,r,i),c=e.getValueInRange(d),l=o?c.replace(/\t/gi,n):c.replace(s,"\t");t.addEditOperation(d,l)}}L.ID="editor.contrib.autoIndentOnPaste",L=b([w(1,c.JZ)],L);class E{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),N(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}class O{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),N(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}(0,s.HW)(L.ID,L,2),(0,s.Fl)(y),(0,s.Fl)(k),(0,s.Fl)(S),(0,s.Fl)(D),(0,s.Fl)(M),(0,s.Fl)(R),(0,s.Fl)(P),(0,s.Fl)(x)},70787:(e,t,i)=>{function o(e,t){let i=0;for(let o=0;o<e.length;o++)"\t"===e.charAt(o)?i+=t:i++;return i}function n(e,t,i){e=e<0?0:e;let o="";if(!i){const i=Math.floor(e/t);e%=t;for(let e=0;e<i;e++)o+="\t"}for(let n=0;n<e;n++)o+=" ";return o}i.d(t,{c:()=>o,k:()=>n})},71242:(e,t,i)=>{i.d(t,{CN:()=>u,EP:()=>c,P8:()=>h});var o=i(29591),n=i(87766),s=i(23525),r=i(99005),a=i(83888),d=i(97072);class c{constructor(e,t){this.range=e,this.direction=t}}class l{constructor(e,t,i){this.hint=e,this.anchor=t,this.provider=i,this._isResolved=!1}with(e){const t=new l(this.hint,e.anchor,this.provider);return t._isResolved=this._isResolved,t._currentResolve=this._currentResolve,t}async resolve(e){if("function"===typeof this.provider.resolveInlayHint){if(this._currentResolve){if(await this._currentResolve,e.isCancellationRequested)return;return this.resolve(e)}this._isResolved||(this._currentResolve=this._doResolve(e).finally((()=>this._currentResolve=void 0))),await this._currentResolve}}async _doResolve(e){var t,i,n;try{const o=await Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=null!==(t=null===o||void 0===o?void 0:o.tooltip)&&void 0!==t?t:this.hint.tooltip,this.hint.label=null!==(i=null===o||void 0===o?void 0:o.label)&&void 0!==i?i:this.hint.label,this.hint.textEdits=null!==(n=null===o||void 0===o?void 0:o.textEdits)&&void 0!==n?n:this.hint.textEdits,this._isResolved=!0}catch(s){(0,o.M_)(s),this._isResolved=!1}}}class h{static async create(e,t,i,n){const s=[],r=e.ordered(t).reverse().map((e=>i.map((async i=>{try{const o=await e.provideInlayHints(t,i,n);((null===o||void 0===o?void 0:o.hints.length)||e.onDidChangeInlayHints)&&s.push([null!==o&&void 0!==o?o:h._emptyInlayHintList,e])}catch(r){(0,o.M_)(r)}}))));if(await Promise.all(r.flat()),n.isCancellationRequested||t.isDisposed())throw new o.AL;return new h(i,s,t)}constructor(e,t,i){this._disposables=new n.Cm,this.ranges=e,this.provider=new Set;const o=[];for(const[n,s]of t){this._disposables.add(n),this.provider.add(s);for(const e of n.hints){const t=i.validatePosition(e.position);let n="before";const a=h._getRangeAtPosition(i,t);let d;a.getStartPosition().isBefore(t)?(d=r.Q.fromPositions(a.getStartPosition(),t),n="after"):(d=r.Q.fromPositions(t,a.getEndPosition()),n="before"),o.push(new l(e,new c(d,n),s))}}this.items=o.sort(((e,t)=>s.y.compare(e.hint.position,t.hint.position)))}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,t){const i=t.lineNumber,o=e.getWordAtPosition(t);if(o)return new r.Q(i,o.startColumn,i,o.endColumn);e.tokenization.tokenizeIfCheap(i);const n=e.tokenization.getLineTokens(i),s=t.column-1,a=n.findTokenIndexAtOffset(s);let d=n.getStartOffset(a),c=n.getEndOffset(a);return c-d===1&&(d===s&&a>1?(d=n.getStartOffset(a-1),c=n.getEndOffset(a-1)):c===s&&a<n.getCount()-1&&(d=n.getStartOffset(a+1),c=n.getEndOffset(a+1))),new r.Q(i,d+1,i,c+1)}}function u(e){return d.r.from({scheme:a.ny.command,path:e.id,query:e.arguments&&encodeURIComponent(JSON.stringify(e.arguments))}).toString()}h._emptyInlayHintList=Object.freeze({dispose(){},hints:[]})},18864:(e,t,i)=>{var o=i(30050),n=i(85287),s=i(55342),r=i(58434);(0,o.HW)(s.M.ID,s.M,1),n.B2.register(r.u)},55342:(e,t,i)=>{i.d(t,{M:()=>W,z:()=>H});var o,n=i(32605),s=i(61498),r=i(73990),a=i(25143),d=i(29591),c=i(87766),l=i(67512),h=i(32031),u=i(97072),g=i(23726),p=i(56718),_=i(81196),m=i(94597),v=i(99005),f=i(91861),b=i(32743),w=i(15739),y=i(50044),k=i(63910),C=i(58066),S=i(59183),D=i(71242),M=i(77136),R=i(39587),P=i(42502),x=i(39263),I=i(39895),L=i(63573),N=i(19700),E=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},O=function(e,t){return function(i,o){t(i,o,e)}};class T{constructor(){this._entries=new l.qK(50)}get(e){const t=T._key(e);return this._entries.get(t)}set(e,t){const i=T._key(e);this._entries.set(i,t)}static _key(e){return"".concat(e.uri.toString(),"/").concat(e.getVersionId())}}const F=(0,x.u1)("IInlayHintsCache");(0,P.v)(F,T,1);class H{constructor(e,t){this.item=e,this.index=t}get part(){const e=this.item.hint.label;return"string"===typeof e?{label:e}:e[this.index]}}class A{constructor(e,t){this.part=e,this.hasTriggerModifier=t}}let W=o=class{static get(e){var t;return null!==(t=e.getContribution(o.ID))&&void 0!==t?t:void 0}constructor(e,t,i,o,n,s,r){this._editor=e,this._languageFeaturesService=t,this._inlayHintsCache=o,this._commandService=n,this._notificationService=s,this._instaService=r,this._disposables=new c.Cm,this._sessionDisposables=new c.Cm,this._decorationsMetadata=new Map,this._ruleFactory=new g.Qn(this._editor),this._activeRenderMode=0,this._debounceInfo=i.for(t.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(t.inlayHintsProvider.onDidChange((()=>this._update()))),this._disposables.add(e.onDidChangeModel((()=>this._update()))),this._disposables.add(e.onDidChangeModelLanguage((()=>this._update()))),this._disposables.add(e.onDidChangeConfiguration((e=>{e.hasChanged(141)&&this._update()}))),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();const e=this._editor.getOption(141);if("off"===e.enabled)return;const t=this._editor.getModel();if(!t||!this._languageFeaturesService.inlayHintsProvider.has(t))return;if("on"===e.enabled)this._activeRenderMode=0;else{let t,i;"onUnlessPressed"===e.enabled?(t=0,i=1):(t=1,i=0),this._activeRenderMode=t,this._sessionDisposables.add(n.Di.getInstance().event((e=>{if(!this._editor.hasModel())return;const o=e.altKey&&e.ctrlKey&&!e.shiftKey&&!e.metaKey?i:t;if(o!==this._activeRenderMode){this._activeRenderMode=o;const e=this._editor.getModel(),t=this._copyInlayHintsWithCurrentAnchor(e);this._updateHintsDecorators([e.getFullModelRange()],t),l.schedule(0)}})))}const i=this._inlayHintsCache.get(t);let o;i&&this._updateHintsDecorators([t.getFullModelRange()],i),this._sessionDisposables.add((0,c.s)((()=>{t.isDisposed()||this._cacheHintsForFastRestore(t)})));const s=new Set,l=new r.uC((async()=>{const e=Date.now();null===o||void 0===o||o.dispose(!0),o=new a.Qi;const i=t.onWillDispose((()=>null===o||void 0===o?void 0:o.cancel()));try{const i=o.token,n=await D.P8.create(this._languageFeaturesService.inlayHintsProvider,t,this._getHintsRanges(),i);if(l.delay=this._debounceInfo.update(t,Date.now()-e),i.isCancellationRequested)return void n.dispose();for(const e of n.provider)"function"!==typeof e.onDidChangeInlayHints||s.has(e)||(s.add(e),this._sessionDisposables.add(e.onDidChangeInlayHints((()=>{l.isScheduled()||l.schedule()}))));this._sessionDisposables.add(n),this._updateHintsDecorators(n.ranges,n.items),this._cacheHintsForFastRestore(t)}catch(n){(0,d.dz)(n)}finally{o.dispose(),i.dispose()}}),this._debounceInfo.get(t));this._sessionDisposables.add(l),this._sessionDisposables.add((0,c.s)((()=>null===o||void 0===o?void 0:o.dispose(!0)))),l.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange((e=>{!e.scrollTopChanged&&l.isScheduled()||l.schedule()}))),this._sessionDisposables.add(this._editor.onDidChangeModelContent((e=>{null===o||void 0===o||o.cancel();const t=Math.max(l.delay,1250);l.schedule(t)}))),this._sessionDisposables.add(this._installDblClickGesture((()=>l.schedule(0)))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){const e=new c.Cm,t=e.add(new S.gi(this._editor)),i=new c.Cm;return e.add(i),e.add(t.onMouseMoveOrRelevantKeyDown((e=>{const[t]=e,o=this._getInlayHintLabelPart(t),n=this._editor.getModel();if(!o||!n)return void i.clear();const s=new a.Qi;i.add((0,c.s)((()=>s.dispose(!0)))),o.item.resolve(s.token),this._activeInlayHintPart=o.part.command||o.part.location?new A(o,t.hasTriggerModifier):void 0;const r=n.validatePosition(o.item.hint.position).lineNumber,d=new v.Q(r,1,r,n.getLineMaxColumn(r)),l=this._getInlineHintsForRange(d);this._updateHintsDecorators([d],l),i.add((0,c.s)((()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([d],l)})))}))),e.add(t.onCancel((()=>i.clear()))),e.add(t.onExecute((async e=>{const t=this._getInlayHintLabelPart(e);if(t){const i=t.part;i.location?this._instaService.invokeFunction(M.U,e,this._editor,i.location):f.uB.is(i.command)&&await this._invokeCommand(i.command,t.item)}}))),e}_getInlineHintsForRange(e){const t=new Set;for(const i of this._decorationsMetadata.values())e.containsRange(i.item.anchor.range)&&t.add(i.item);return Array.from(t)}_installDblClickGesture(e){return this._editor.onMouseUp((async t=>{if(2!==t.event.detail)return;const i=this._getInlayHintLabelPart(t);if(i&&(t.event.preventDefault(),await i.item.resolve(a.XO.None),(0,s.EI)(i.item.hint.textEdits))){const t=i.item.hint.textEdits.map((e=>m.k.replace(v.Q.lift(e.range),e.text)));this._editor.executeEdits("inlayHint.default",t),e()}}))}_installContextMenu(){return this._editor.onContextMenu((async e=>{if(!(e.event.target instanceof HTMLElement))return;const t=this._getInlayHintLabelPart(e);t&&await this._instaService.invokeFunction(M.h,this._editor,e.event.target,t)}))}_getInlayHintLabelPart(e){var t;if(6!==e.target.type)return;const i=null===(t=e.target.detail.injectedText)||void 0===t?void 0:t.options;return i instanceof w.Ho&&(null===i||void 0===i?void 0:i.attachedData)instanceof H?i.attachedData:void 0}async _invokeCommand(e,t){var i;try{await this._commandService.executeCommand(e.id,...null!==(i=e.arguments)&&void 0!==i?i:[])}catch(o){this._notificationService.notify({severity:I.AI.Error,source:t.provider.displayName,message:o})}}_cacheHintsForFastRestore(e){const t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}_copyInlayHintsWithCurrentAnchor(e){const t=new Map;for(const[i,o]of this._decorationsMetadata){if(t.has(o.item))continue;const n=e.getDecorationRange(i);if(n){const e=new D.EP(n,o.item.anchor.direction),i=o.item.with({anchor:e});t.set(o.item,i)}}return Array.from(t.values())}_getHintsRanges(){const e=this._editor.getModel(),t=this._editor.getVisibleRangesPlusViewportAboveBelow(),i=[];for(const o of t.sort(v.Q.compareRangesUsingStarts)){const t=e.validateRange(new v.Q(o.startLineNumber-30,o.startColumn,o.endLineNumber+30,o.endColumn));0!==i.length&&v.Q.areIntersectingOrTouching(i[i.length-1],t)?i[i.length-1]=v.Q.plusRange(i[i.length-1],t):i.push(t)}return i}_updateHintsDecorators(e,t){var i,n;const r=[],a=(e,t,i,o,n)=>{const s={content:i,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:t.className,cursorStops:o,attachedData:n};r.push({item:e,classNameRef:t,decoration:{range:e.anchor.range,options:{description:"InlayHint",showIfCollapsed:e.anchor.range.isEmpty(),collapseOnReplaceEdit:!e.anchor.range.isEmpty(),stickiness:0,[e.anchor.direction]:0===this._activeRenderMode?s:void 0}}})},d=(e,t)=>{const i=this._ruleFactory.createClassNameRef({width:"".concat(c/3|0,"px"),display:"inline-block"});a(e,i,"\u200a",t?b.VW.Right:b.VW.None)},{fontSize:c,fontFamily:l,padding:h,isUniform:u}=this._getLayoutInfo(),g="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(g,l);let m={line:0,totalLen:0};for(const p of t){if(m.line!==p.anchor.range.startLineNumber&&(m={line:p.anchor.range.startLineNumber,totalLen:0}),m.totalLen>o._MAX_LABEL_LEN)continue;p.hint.paddingLeft&&d(p,!1);const e="string"===typeof p.hint.label?[{label:p.hint.label}]:p.hint.label;for(let t=0;t<e.length;t++){const n=e[t],r=0===t,d=t===e.length-1,l={fontSize:"".concat(c,"px"),fontFamily:"var(".concat(g,"), ").concat(_.jU.fontFamily),verticalAlign:u?"baseline":"middle",unicodeBidi:"isolate"};(0,s.EI)(p.hint.textEdits)&&(l.cursor="default"),this._fillInColors(l,p.hint),(n.command||n.location)&&(null===(i=this._activeInlayHintPart)||void 0===i?void 0:i.part.item)===p&&this._activeInlayHintPart.part.index===t&&(l.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(l.color=(0,N.Yf)(L.Ztu),l.cursor="pointer")),h&&(r&&d?(l.padding="1px ".concat(0|Math.max(1,c/4),"px"),l.borderRadius="".concat(c/4|0,"px")):r?(l.padding="1px 0 1px ".concat(0|Math.max(1,c/4),"px"),l.borderRadius="".concat(c/4|0,"px 0 0 ").concat(c/4|0,"px")):d?(l.padding="1px ".concat(0|Math.max(1,c/4),"px 1px 0"),l.borderRadius="0 ".concat(c/4|0,"px ").concat(c/4|0,"px 0")):l.padding="1px 0 1px 0");let v=n.label;m.totalLen+=v.length;let f=!1;const w=m.totalLen-o._MAX_LABEL_LEN;if(w>0&&(v=v.slice(0,-w)+"\u2026",f=!0),a(p,this._ruleFactory.createClassNameRef(l),V(v),d&&!p.hint.paddingRight?b.VW.Right:b.VW.None,new H(p,t)),f)break}if(p.hint.paddingRight&&d(p,!0),r.length>o._MAX_DECORATORS)break}const v=[];for(const[o,s]of this._decorationsMetadata){const t=null===(n=this._editor.getModel())||void 0===n?void 0:n.getDecorationRange(o);t&&e.some((e=>e.containsRange(t)))&&(v.push(o),s.classNameRef.dispose(),this._decorationsMetadata.delete(o))}const f=p.D.capture(this._editor);this._editor.changeDecorations((e=>{const t=e.deltaDecorations(v,r.map((e=>e.decoration)));for(let i=0;i<t.length;i++){const e=r[i];this._decorationsMetadata.set(t[i],e)}})),f.restore(this._editor)}_fillInColors(e,t){t.kind===f.r4.Parameter?(e.backgroundColor=(0,N.Yf)(L.B2L),e.color=(0,N.Yf)(L.sjA)):t.kind===f.r4.Type?(e.backgroundColor=(0,N.Yf)(L._pU),e.color=(0,N.Yf)(L.HwT)):(e.backgroundColor=(0,N.Yf)(L.WL6),e.color=(0,N.Yf)(L.P6i))}_getLayoutInfo(){const e=this._editor.getOption(141),t=e.padding,i=this._editor.getOption(52),o=this._editor.getOption(49);let n=e.fontSize;(!n||n<5||n>i)&&(n=i);const s=e.fontFamily||o;return{fontSize:n,fontFamily:s,padding:t,isUniform:!t&&s===o&&n===i}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(const e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}};function V(e){return e.replace(/[ \t]/g,"\xa0")}W.ID="editor.contrib.InlayHints",W._MAX_DECORATORS=1500,W._MAX_LABEL_LEN=43,W=o=E([O(1,k.u),O(2,y.U),O(3,F),O(4,R.d),O(5,I.Ot),O(6,x._Y)],W),R.w.registerCommand("_executeInlayHintProvider",(async function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];const[n,s]=i;(0,h.j)(u.r.isUri(n)),(0,h.j)(v.Q.isIRange(s));const{inlayHintsProvider:r}=e.get(k.u),d=await e.get(C.b).createModelReference(n);try{const e=await D.P8.create(r,d.object.textEditorModel,[v.Q.lift(s)],a.XO.None),t=e.items.map((e=>e.hint));return setTimeout((()=>e.dispose()),0),t}finally{d.dispose()}}))},58434:(e,t,i)=>{i.d(t,{u:()=>D});var o=i(73990),n=i(58348),s=i(23525),r=i(15739),a=i(85287),d=i(63970),c=i(58066),l=i(53998),h=i(69406),u=i(55342),g=i(66457),p=i(2531),_=i(63910),m=i(51413),v=i(66731),f=i(71242),b=i(61498),w=i(16391),y=i(91356),k=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},C=function(e,t){return function(i,o){t(i,o,e)}};class S extends a.mm{constructor(e,t,i,o){super(10,t,e.item.anchor.range,i,o,!0),this.part=e}}let D=class extends h.xJ{constructor(e,t,i,o,n,s,r,a){super(e,t,i,s,a,o,n),this._resolverService=r,this.hoverOrdinal=6}suggestHoverAnchor(e){var t;if(!u.M.get(this._editor))return null;if(6!==e.target.type)return null;const i=null===(t=e.target.detail.injectedText)||void 0===t?void 0:t.options;return i instanceof r.Ho&&i.attachedData instanceof u.z?new S(i.attachedData,this,e.event.posx,e.event.posy):null}computeSync(){return[]}computeAsync(e,t,i){return e instanceof S?new o.AE((async t=>{const{part:o}=e;if(await o.item.resolve(i),i.isCancellationRequested)return;let s,r;if("string"===typeof o.item.hint.tooltip?s=(new n.Bc).appendText(o.item.hint.tooltip):o.item.hint.tooltip&&(s=o.item.hint.tooltip),s&&t.emitOne(new h.eH(this,e.range,[s],!1,0)),(0,b.EI)(o.item.hint.textEdits)&&t.emitOne(new h.eH(this,e.range,[(new n.Bc).appendText((0,m.kg)("hint.dbl","Double-click to insert"))],!1,10001)),"string"===typeof o.part.tooltip?r=(new n.Bc).appendText(o.part.tooltip):o.part.tooltip&&(r=o.part.tooltip),r&&t.emitOne(new h.eH(this,e.range,[r],!1,1)),o.part.location||o.part.command){let i;const s="altKey"===this._editor.getOption(78)?v.zx?(0,m.kg)("links.navigate.kb.meta.mac","cmd + click"):(0,m.kg)("links.navigate.kb.meta","ctrl + click"):v.zx?(0,m.kg)("links.navigate.kb.alt.mac","option + click"):(0,m.kg)("links.navigate.kb.alt","alt + click");o.part.location&&o.part.command?i=(new n.Bc).appendText((0,m.kg)("hint.defAndCommand","Go to Definition ({0}), right click for more",s)):o.part.location?i=(new n.Bc).appendText((0,m.kg)("hint.def","Go to Definition ({0})",s)):o.part.command&&(i=new n.Bc("[".concat((0,m.kg)("hint.cmd","Execute Command"),"](").concat((0,f.CN)(o.part.command),' "').concat(o.part.command.title,'") (').concat(s,")"),{isTrusted:!0})),i&&t.emitOne(new h.eH(this,e.range,[i],!1,1e4))}const a=await this._resolveInlayHintLabelPartHover(o,i);for await(const e of a)t.emitOne(e)})):o.AE.EMPTY}async _resolveInlayHintLabelPartHover(e,t){if(!e.part.location)return o.AE.EMPTY;const{uri:i,range:r}=e.part.location,a=await this._resolverService.createModelReference(i);try{const i=a.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(i)?(0,l.U)(this._languageFeaturesService.hoverProvider,i,new s.y(r.startLineNumber,r.startColumn),t).filter((e=>!(0,n.it)(e.hover.contents))).map((t=>new h.eH(this,e.item.anchor.range,t.hover.contents,!1,2+t.ordinal))):o.AE.EMPTY}finally{a.dispose()}}};D=k([C(1,d.L),C(2,p.C),C(3,w.b),C(4,y.TN),C(5,g.pG),C(6,c.b),C(7,_.u)],D)},77136:(e,t,i)=>{i.d(t,{U:()=>f,h:()=>v});var o=i(32605),n=i(63169),s=i(25143),r=i(43783),a=i(99005),d=i(58066),c=i(29911),l=i(78472),h=i(35155),u=i(39587),g=i(39686),p=i(6748),_=i(39263),m=i(39895);async function v(e,t,i,l){var g;const v=e.get(d.b),f=e.get(p.Z),b=e.get(u.d),w=e.get(_._Y),y=e.get(m.Ot);if(await l.item.resolve(s.XO.None),!l.part.location)return;const k=l.part.location,C=[],S=new Set(h.ZG.getMenuItems(h.D8.EditorContext).map((e=>(0,h.is)(e)?e.command.id:(0,r.b)())));for(const o of c.bn.all())S.has(o.desc.id)&&C.push(new n.rc(o.desc.id,h.Xe.label(o.desc,{renderShortTitle:!0}),void 0,!0,(async()=>{const e=await v.createModelReference(k.uri);try{const i=new c.QS(e.object.textEditorModel,a.Q.getStartPosition(k.range)),n=l.item.anchor.range;await w.invokeFunction(o.runEditorCommand.bind(o),t,i,n)}finally{e.dispose()}})));if(l.part.command){const{command:e}=l.part;C.push(new n.wv),C.push(new n.rc(e.id,e.title,void 0,!0,(async()=>{var t;try{await b.executeCommand(e.id,...null!==(t=e.arguments)&&void 0!==t?t:[])}catch(i){y.notify({severity:m.AI.Error,source:l.item.provider.displayName,message:i})}})))}const D=t.getOption(127);f.showContextMenu({domForShadowRoot:D&&null!==(g=t.getDomNode())&&void 0!==g?g:void 0,getAnchor:()=>{const e=o.BK(i);return{x:e.left,y:e.top+e.height+8}},getActions:()=>C,onHide:()=>{t.focus()},autoSelectFirstItem:!0})}async function f(e,t,i,o){const n=e.get(d.b),s=await n.createModelReference(o.uri);await i.invokeWithinContext((async e=>{const n=t.hasSideBySideModifier,r=e.get(g.fN),d=l.x2.inPeekEditor.getValue(r),h=!n&&i.getOption(88)&&!d;return new c.mR({openToSide:n,openInPeek:h,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(e,new c.QS(s.object.textEditorModel,a.Q.getStartPosition(o.range)),a.Q.lift(o.range))})),s.dispose()}},72526:()=>{}}]);
//# sourceMappingURL=monaco-editor-vendor.1b18e904.cddcab9e.js.map