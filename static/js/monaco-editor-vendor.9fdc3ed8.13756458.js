"use strict";(self.webpackChunkmonaco_editor_nginx=self.webpackChunkmonaco_editor_nginx||[]).push([[3535],{3887:function(e,t,n){n.r(t),n.d(t,{SelectionAnchorSet:function(){return y}});var o,i=n(74165),r=n(60136),a=n(27277),s=n(15671),c=n(43144),u=n(46403),l=n(71047),d=n(89490),h=n(95253),f=n(96601),g=n(98926),p=n(18420),v=n(8022),m=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},_=function(e,t){return function(n,o){t(n,o,e)}},C=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(t){r(t)}}function s(e){try{c(o.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},y=new v.uy("selectionAnchorSet",!1),b=o=function(){function e(t,n){var o=this;(0,s.Z)(this,e),this.editor=t,this.selectionAnchorSetContextKey=y.bindTo(n),this.modelChangeListener=t.onDidChangeModel((function(){return o.selectionAnchorSetContextKey.reset()}))}return(0,c.Z)(e,[{key:"setSelectionAnchor",value:function(){var e=this;if(this.editor.hasModel()){var t=this.editor.getPosition();this.editor.changeDecorations((function(n){e.decorationId&&n.removeDecoration(e.decorationId),e.decorationId=n.addDecoration(f.Y.fromPositions(t,t),{description:"selection-anchor",stickiness:1,hoverMessage:(new l.W5).appendText((0,p.NC)("selectionAnchor","Selection Anchor")),className:"selection-anchor"})})),this.selectionAnchorSetContextKey.set(!!this.decorationId),(0,u.Z9)((0,p.NC)("anchorSet","Anchor set at {0}:{1}",t.lineNumber,t.column))}}},{key:"goToSelectionAnchor",value:function(){if(this.editor.hasModel()&&this.decorationId){var e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}},{key:"selectFromAnchorToCursor",value:function(){if(this.editor.hasModel()&&this.decorationId){var e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){var t=this.editor.getPosition();this.editor.setSelection(f.Y.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}},{key:"cancelSelectionAnchor",value:function(){var e=this;if(this.decorationId){var t=this.decorationId;this.editor.changeDecorations((function(n){n.removeDecoration(t),e.decorationId=void 0})),this.selectionAnchorSetContextKey.set(!1)}}},{key:"dispose",value:function(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}}],[{key:"get",value:function(e){return e.getContribution(o.ID)}}]),e}();b.ID="editor.contrib.selectionAnchorController",b=o=m([_(1,v.i6)],b);var k=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.call(this,{id:"editor.action.setSelectionAnchor",label:(0,p.NC)("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:g.u.editorTextFocus,primary:(0,d.gx)(2089,2080),weight:100}})}return(0,c.Z)(n,[{key:"run",value:function(e,t){var n;return C(this,void 0,void 0,(0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(n=b.get(t))||void 0===n||n.setSelectionAnchor();case 1:case"end":return e.stop()}}),e)})))}}]),n}(h.R6),w=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.call(this,{id:"editor.action.goToSelectionAnchor",label:(0,p.NC)("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:y})}return(0,c.Z)(n,[{key:"run",value:function(e,t){var n;return C(this,void 0,void 0,(0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(n=b.get(t))||void 0===n||n.goToSelectionAnchor();case 1:case"end":return e.stop()}}),e)})))}}]),n}(h.R6),x=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.call(this,{id:"editor.action.selectFromAnchorToCursor",label:(0,p.NC)("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:y,kbOpts:{kbExpr:g.u.editorTextFocus,primary:(0,d.gx)(2089,2089),weight:100}})}return(0,c.Z)(n,[{key:"run",value:function(e,t){var n;return C(this,void 0,void 0,(0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(n=b.get(t))||void 0===n||n.selectFromAnchorToCursor();case 1:case"end":return e.stop()}}),e)})))}}]),n}(h.R6),S=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.call(this,{id:"editor.action.cancelSelectionAnchor",label:(0,p.NC)("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:y,kbOpts:{kbExpr:g.u.editorTextFocus,primary:9,weight:100}})}return(0,c.Z)(n,[{key:"run",value:function(e,t){var n;return C(this,void 0,void 0,(0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(n=b.get(t))||void 0===n||n.cancelSelectionAnchor();case 1:case"end":return e.stop()}}),e)})))}}]),n}(h.R6);(0,h._K)(b.ID,b,4),(0,h.Qr)(k),(0,h.Qr)(w),(0,h.Qr)(x),(0,h.Qr)(S)},31796:function(e,t,n){n.r(t),n.d(t,{BracketMatchingController:function(){return Z}});var o=n(37762),i=n(29439),r=n(15671),a=n(43144),s=n(60136),c=n(27277),u=n(71049),l=n(65096),d=n(95253),h=n(65631),f=n(17429),g=n(96601),p=n(98926),v=n(20329),m=n(78519),_=n(18420),C=n(14443),y=n(43980),b=n(41335),k=(0,y.P6G)("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hcDark:"#A0A0A0",hcLight:"#A0A0A0"},_.NC("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets.")),w=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.jumpToBracket",label:_.NC("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:p.u.editorTextFocus,primary:3165,weight:100}})}return(0,a.Z)(n,[{key:"run",value:function(e,t){var n;null===(n=Z.get(t))||void 0===n||n.jumpToBracket()}}]),n}(d.R6),x=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.selectToBracket",label:_.NC("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}return(0,a.Z)(n,[{key:"run",value:function(e,t,n){var o,i=!0;n&&!1===n.selectBrackets&&(i=!1),null===(o=Z.get(t))||void 0===o||o.selectToBracket(i)}}]),n}(d.R6),S=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.removeBrackets",label:_.NC("smartSelect.removeBrackets","Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:p.u.editorTextFocus,primary:2561,weight:100}})}return(0,a.Z)(n,[{key:"run",value:function(e,t){var n;null===(n=Z.get(t))||void 0===n||n.removeBrackets(this.id)}}]),n}(d.R6),N=(0,a.Z)((function e(t,n,o){(0,r.Z)(this,e),this.position=t,this.brackets=n,this.options=o})),Z=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e){var o;return(0,r.Z)(this,n),(o=t.call(this))._editor=e,o._lastBracketsData=[],o._lastVersionId=0,o._decorations=o._editor.createDecorationsCollection(),o._updateBracketsSoon=o._register(new u.pY((function(){return o._updateBrackets()}),50)),o._matchBrackets=o._editor.getOption(71),o._updateBracketsSoon.schedule(),o._register(e.onDidChangeCursorPosition((function(e){"never"!==o._matchBrackets&&o._updateBracketsSoon.schedule()}))),o._register(e.onDidChangeModelContent((function(e){o._updateBracketsSoon.schedule()}))),o._register(e.onDidChangeModel((function(e){o._lastBracketsData=[],o._updateBracketsSoon.schedule()}))),o._register(e.onDidChangeModelLanguageConfiguration((function(e){o._lastBracketsData=[],o._updateBracketsSoon.schedule()}))),o._register(e.onDidChangeConfiguration((function(e){e.hasChanged(71)&&(o._matchBrackets=o._editor.getOption(71),o._decorations.clear(),o._lastBracketsData=[],o._lastVersionId=0,o._updateBracketsSoon.schedule())}))),o._register(e.onDidBlurEditorWidget((function(){o._updateBracketsSoon.schedule()}))),o._register(e.onDidFocusEditorWidget((function(){o._updateBracketsSoon.schedule()}))),o}return(0,a.Z)(n,[{key:"jumpToBracket",value:function(){if(this._editor.hasModel()){var e=this._editor.getModel(),t=this._editor.getSelections().map((function(t){var n=t.getStartPosition(),o=e.bracketPairs.matchBracket(n),i=null;if(o)o[0].containsPosition(n)&&!o[1].containsPosition(n)?i=o[1].getStartPosition():o[1].containsPosition(n)&&(i=o[0].getStartPosition());else{var r=e.bracketPairs.findEnclosingBrackets(n);if(r)i=r[1].getStartPosition();else{var a=e.bracketPairs.findNextBracket(n);a&&a.range&&(i=a.range.getStartPosition())}}return i?new g.Y(i.lineNumber,i.column,i.lineNumber,i.column):new g.Y(n.lineNumber,n.column,n.lineNumber,n.column)}));this._editor.setSelections(t),this._editor.revealRange(t[0])}}},{key:"selectToBracket",value:function(e){if(this._editor.hasModel()){var t=this._editor.getModel(),n=[];this._editor.getSelections().forEach((function(o){var r=o.getStartPosition(),a=t.bracketPairs.matchBracket(r);if(!a&&!(a=t.bracketPairs.findEnclosingBrackets(r))){var s=t.bracketPairs.findNextBracket(r);s&&s.range&&(a=t.bracketPairs.matchBracket(s.range.getStartPosition()))}var c=null,u=null;if(a){a.sort(f.e.compareRangesUsingStarts);var l=a,d=(0,i.Z)(l,2),h=d[0],p=d[1];if(c=e?h.getStartPosition():h.getEndPosition(),u=e?p.getEndPosition():p.getStartPosition(),p.containsPosition(r)){var v=c;c=u,u=v}}c&&u&&n.push(new g.Y(c.lineNumber,c.column,u.lineNumber,u.column))})),n.length>0&&(this._editor.setSelections(n),this._editor.revealRange(n[0]))}}},{key:"removeBrackets",value:function(e){var t=this;if(this._editor.hasModel()){var n=this._editor.getModel();this._editor.getSelections().forEach((function(o){var i=o.getPosition(),r=n.bracketPairs.matchBracket(i);r||(r=n.bracketPairs.findEnclosingBrackets(i)),r&&(t._editor.pushUndoStop(),t._editor.executeEdits(e,[{range:r[0],text:""},{range:r[1],text:""}]),t._editor.pushUndoStop())}))}}},{key:"_updateBrackets",value:function(){if("never"!==this._matchBrackets){this._recomputeBrackets();var e,t=[],n=0,i=(0,o.Z)(this._lastBracketsData);try{for(i.s();!(e=i.n()).done;){var r=e.value,a=r.brackets;a&&(t[n++]={range:a[0],options:r.options},t[n++]={range:a[1],options:r.options})}}catch(s){i.e(s)}finally{i.f()}this._decorations.set(t)}}},{key:"_recomputeBrackets",value:function(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus())return this._lastBracketsData=[],void(this._lastVersionId=0);var e=this._editor.getSelections();if(e.length>100)return this._lastBracketsData=[],void(this._lastVersionId=0);var t=this._editor.getModel(),o=t.getVersionId(),i=[];this._lastVersionId===o&&(i=this._lastBracketsData);for(var r=[],a=0,s=0,c=e.length;s<c;s++){var u=e[s];u.isEmpty()&&(r[a++]=u.getStartPosition())}r.length>1&&r.sort(h.L.compare);for(var l=[],d=0,f=0,g=i.length,p=0,v=r.length;p<v;p++){for(var m=r[p];f<g&&i[f].position.isBefore(m);)f++;if(f<g&&i[f].position.equals(m))l[d++]=i[f];else{var _=t.bracketPairs.matchBracket(m,20),C=n._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;_||"always"!==this._matchBrackets||(_=t.bracketPairs.findEnclosingBrackets(m,20),C=n._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),l[d++]=new N(m,_,C)}}this._lastBracketsData=l,this._lastVersionId=o}}],[{key:"get",value:function(e){return e.getContribution(n.ID)}}]),n}(l.JT);Z.ID="editor.contrib.bracketMatchingController",Z._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=m.qx.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:(0,b.EN)(k),position:v.sh.Center}}),Z._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=m.qx.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"}),(0,d._K)(Z.ID,Z,1),(0,d.Qr)(x),(0,d.Qr)(w),(0,d.Qr)(S),C.BH.appendMenuItem(C.eH.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:_.NC({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2})},83512:function(e,t,n){n.r(t);var o=n(37762),i=n(15671),r=n(43144),a=n(60136),s=n(27277),c=n(95253),u=n(98926),l=n(17429),d=n(96601),h=function(){function e(t,n){(0,i.Z)(this,e),this._selection=t,this._isMovingLeft=n}return(0,r.Z)(e,[{key:"getEditOperations",value:function(e,t){if(this._selection.startLineNumber===this._selection.endLineNumber&&!this._selection.isEmpty()){var n=this._selection.startLineNumber,o=this._selection.startColumn,i=this._selection.endColumn;if((!this._isMovingLeft||1!==o)&&(this._isMovingLeft||i!==e.getLineMaxColumn(n)))if(this._isMovingLeft){var r=new l.e(n,o-1,n,o),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new l.e(n,i,n,i),a)}else{var s=new l.e(n,i,n,i+1),c=e.getValueInRange(s);t.addEditOperation(s,null),t.addEditOperation(new l.e(n,o,n,o),c)}}}},{key:"computeCursorState",value:function(e,t){return this._isMovingLeft?new d.Y(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new d.Y(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}]),e}(),f=n(18420),g=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,o){var r;return(0,i.Z)(this,n),(r=t.call(this,o)).left=e,r}return(0,r.Z)(n,[{key:"run",value:function(e,t){if(t.hasModel()){var n,i=[],r=t.getSelections(),a=(0,o.Z)(r);try{for(a.s();!(n=a.n()).done;){var s=n.value;i.push(new h(s,this.left))}}catch(c){a.e(c)}finally{a.f()}t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}}]),n}(c.R6),p=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.call(this,!0,{id:"editor.action.moveCarretLeftAction",label:f.NC("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:u.u.writable})}return(0,r.Z)(n)}(g),v=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.call(this,!1,{id:"editor.action.moveCarretRightAction",label:f.NC("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:u.u.writable})}return(0,r.Z)(n)}(g);(0,c.Qr)(p),(0,c.Qr)(v)},28291:function(e,t,n){n.r(t);var o=n(37762),i=n(15671),r=n(43144),a=n(60136),s=n(27277),c=n(95253),u=n(18424),l=n(5866),d=n(17429),h=n(98926),f=n(18420),g=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.call(this,{id:"editor.action.transposeLetters",label:f.NC("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:h.u.writable,kbOpts:{kbExpr:h.u.textInputFocus,primary:0,mac:{primary:306},weight:100}})}return(0,r.Z)(n,[{key:"run",value:function(e,t){if(t.hasModel()){var n,i=t.getModel(),r=[],a=t.getSelections(),s=(0,o.Z)(a);try{for(s.s();!(n=s.n()).done;){var c=n.value;if(c.isEmpty()){var h=c.startLineNumber,f=c.startColumn,g=i.getLineMaxColumn(h);if(1!==h||1!==f&&(2!==f||2!==g)){var p=f===g?c.getPosition():l.o.rightPosition(i,c.getPosition().lineNumber,c.getPosition().column),v=l.o.leftPosition(i,p),m=l.o.leftPosition(i,v),_=i.getValueInRange(d.e.fromPositions(m,v)),C=i.getValueInRange(d.e.fromPositions(v,p)),y=d.e.fromPositions(m,p);r.push(new u.T4(y,C+_))}}}}catch(b){s.e(b)}finally{s.f()}r.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop())}}}]),n}(c.R6);(0,c.Qr)(g)},40382:function(e,t,n){n.r(t),n.d(t,{CopyAction:function(){return N},CutAction:function(){return S},PasteAction:function(){return Z}});var o=n(74165),i=n(15671),r=n(43144),a=n(60136),s=n(27277),c=n(30620),u=n(32959),l=n(90650),d=n(19956),h=n(95253),f=n(76257),g=n(98926),p=n(18420),v=n(14443),m=n(76344),_=n(8022),C=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(t){r(t)}}function s(e){try{c(o.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},y="9_cutcopypaste",b=l.tY||document.queryCommandSupported("cut"),k=l.tY||document.queryCommandSupported("copy"),w="undefined"!==typeof navigator.clipboard&&!c.vU||document.queryCommandSupported("paste");function x(e){return e.register(),e}var S=b?x(new h.AJ({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:l.tY?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:v.eH.MenubarEditMenu,group:"2_ccp",title:p.NC({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:v.eH.EditorContext,group:y,title:p.NC("actions.clipboard.cutLabel","Cut"),when:g.u.writable,order:1},{menuId:v.eH.CommandPalette,group:"",title:p.NC("actions.clipboard.cutLabel","Cut"),order:1},{menuId:v.eH.SimpleEditorContext,group:y,title:p.NC("actions.clipboard.cutLabel","Cut"),when:g.u.writable,order:1}]})):void 0,N=k?x(new h.AJ({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:l.tY?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:v.eH.MenubarEditMenu,group:"2_ccp",title:p.NC({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:v.eH.EditorContext,group:y,title:p.NC("actions.clipboard.copyLabel","Copy"),order:2},{menuId:v.eH.CommandPalette,group:"",title:p.NC("actions.clipboard.copyLabel","Copy"),order:1},{menuId:v.eH.SimpleEditorContext,group:y,title:p.NC("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;v.BH.appendMenuItem(v.eH.MenubarEditMenu,{submenu:v.eH.MenubarCopy,title:{value:p.NC("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3}),v.BH.appendMenuItem(v.eH.EditorContext,{submenu:v.eH.EditorContextCopy,title:{value:p.NC("copy as","Copy As"),original:"Copy As"},group:y,order:3}),v.BH.appendMenuItem(v.eH.EditorContext,{submenu:v.eH.EditorContextShare,title:{value:p.NC("share","Share"),original:"Share"},group:"11_share",order:-1,when:_.Ao.and(_.Ao.notEquals("resourceScheme","output"),g.u.editorTextFocus)}),v.BH.appendMenuItem(v.eH.EditorTitleContext,{submenu:v.eH.EditorTitleContextShare,title:{value:p.NC("share","Share"),original:"Share"},group:"11_share",order:-1}),v.BH.appendMenuItem(v.eH.ExplorerContext,{submenu:v.eH.ExplorerContextShare,title:{value:p.NC("share","Share"),original:"Share"},group:"11_share",order:-1});var Z=w?x(new h.AJ({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:l.tY?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:v.eH.MenubarEditMenu,group:"2_ccp",title:p.NC({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:v.eH.EditorContext,group:y,title:p.NC("actions.clipboard.pasteLabel","Paste"),when:g.u.writable,order:4},{menuId:v.eH.CommandPalette,group:"",title:p.NC("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:v.eH.SimpleEditorContext,group:y,title:p.NC("actions.clipboard.pasteLabel","Paste"),when:g.u.writable,order:4}]})):void 0,L=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.call(this,{id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:p.NC("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:g.u.textInputFocus,primary:0,weight:100}})}return(0,r.Z)(n,[{key:"run",value:function(e,t){t.hasModel()&&(!t.getOption(37)&&t.getSelection().isEmpty()||(d.RA.forceCopyWithSyntaxHighlighting=!0,t.focus(),t.getContainerDomNode().ownerDocument.execCommand("copy"),d.RA.forceCopyWithSyntaxHighlighting=!1))}}]),n}(h.R6);function P(e,t){e&&(e.addImplementation(1e4,"code-editor",(function(e,n){var o=e.get(f.$).getFocusedCodeEditor();if(o&&o.hasTextFocus()){var i=o.getOption(37),r=o.getSelection();return r&&r.isEmpty()&&!i||o.getContainerDomNode().ownerDocument.execCommand(t),!0}return!1})),e.addImplementation(0,"generic-dom",(function(e,n){return(0,u.getActiveDocument)().execCommand(t),!0})))}P(S,"cut"),P(N,"copy"),Z&&(Z.addImplementation(1e4,"code-editor",(function(e,t){var n=e.get(f.$),i=e.get(m.p),r=n.getFocusedCodeEditor();return!(!r||!r.hasTextFocus())&&(!(!r.getContainerDomNode().ownerDocument.execCommand("paste")&&l.$L)||C(void 0,void 0,void 0,(0,o.Z)().mark((function e(){var t,n,a,s,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.readText();case 2:""!==(t=e.sent)&&(n=d.Nl.INSTANCE.get(t),a=!1,s=null,c=null,n&&(a=r.getOption(37)&&!!n.isFromEmptySelection,s="undefined"!==typeof n.multicursorText?n.multicursorText:null,c=n.mode),r.trigger("keyboard","paste",{text:t,pasteOnNewLine:a,multicursorText:s,mode:c}));case 4:case"end":return e.stop()}}),e)}))))})),Z.addImplementation(0,"generic-dom",(function(e,t){return(0,u.getActiveDocument)().execCommand("paste"),!0}))),k&&(0,h.Qr)(L)},47150:function(e,t,n){n.d(t,{Bb:function(){return M},LR:function(){return Q},MN:function(){return E},RB:function(){return A},TM:function(){return T},UX:function(){return o},aI:function(){return B},cz:function(){return D},pZ:function(){return I},uH:function(){return O}});var o,i=n(37762),r=n(74165),a=n(93433),s=n(15671),c=n(43144),u=n(60136),l=n(27277),d=n(38102),h=n(7388),f=n(74146),g=n(65096),p=n(38821),v=n(48895),m=n(17429),_=n(96601),C=n(65441),y=n(26246),b=n(16836),k=n(18420),w=n(99740),x=n(49431),S=n(28322),N=n(45536),Z=n(53222),L=(0,r.Z)().mark(W),P=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(t){r(t)}}function s(e){try{c(o.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},A="editor.action.codeAction",D="editor.action.quickFix",I="editor.action.autoFix",M="editor.action.refactor",E="editor.action.sourceAction",O="editor.action.organizeImports",T="editor.action.fixAll",R=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e,o,i){var r;return(0,s.Z)(this,n),(r=t.call(this)).documentation=o,r._register(i),r.allActions=(0,a.Z)(e).sort(n.codeActionsComparator),r.validActions=r.allActions.filter((function(e){return!e.action.disabled})),r}return(0,c.Z)(n,[{key:"hasAutoFix",get:function(){return this.validActions.some((function(e){var t=e.action;return!!t.kind&&Z.yN.QuickFix.contains(new Z.yN(t.kind))&&!!t.isPreferred}))}}],[{key:"codeActionsPreferredComparator",value:function(e,t){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:0}},{key:"codeActionsComparator",value:function(e,t){var o=e.action,i=t.action;return(0,d.Of)(o.diagnostics)?(0,d.Of)(i.diagnostics)?n.codeActionsPreferredComparator(o,i):-1:(0,d.Of)(i.diagnostics)?1:n.codeActionsPreferredComparator(o,i)}}]),n}(g.JT),F={actions:[],documentation:void 0};function B(e,t,n,o,i,s){var c;return P(this,void 0,void 0,(0,r.Z)().mark((function u(){var l,h,p,v,m,_,C,y,k,w,x,S,N=this;return(0,r.Z)().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return l=o.filter||{},h=Object.assign(Object.assign({},l),{excludes:[].concat((0,a.Z)(l.excludes||[]),[Z.yN.Notebook])}),p={only:null===(c=l.include)||void 0===c?void 0:c.value,trigger:o.type},v=new b.YQ(t,s),m=2===o.type,_=H(e,t,m?h:l),C=new g.SL,y=_.map((function(e){return P(N,void 0,void 0,(0,r.Z)().mark((function o(){var a,s,c;return(0,r.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,i.report(e),o.next=4,e.provideCodeActions(t,n,p,v.token);case 4:if((a=o.sent)&&C.add(a),!v.token.isCancellationRequested){o.next=8;break}return o.abrupt("return",F);case 8:return s=((null===a||void 0===a?void 0:a.actions)||[]).filter((function(e){return e&&(0,Z.Yl)(l,e)})),c=V(e,s,l.include),o.abrupt("return",{actions:s.map((function(t){return new Z.bA(t,e)})),documentation:c});case 13:if(o.prev=13,o.t0=o.catch(0),!(0,f.n2)(o.t0)){o.next=17;break}throw o.t0;case 17:return(0,f.Cp)(o.t0),o.abrupt("return",F);case 19:case"end":return o.stop()}}),o,null,[[0,13]])})))})),k=e.onDidChange((function(){var n=e.all(t);(0,d.fS)(n,_)||v.cancel()})),u.prev=9,u.next=12,Promise.all(y);case 12:return w=u.sent,x=w.map((function(e){return e.actions})).flat(),S=[].concat((0,a.Z)((0,d.kX)(w.map((function(e){return e.documentation})))),(0,a.Z)(W(e,t,o,x))),u.abrupt("return",new R(x,S,C));case 16:return u.prev=16,k.dispose(),v.dispose(),u.finish(16);case 20:case"end":return u.stop()}}),u,null,[[9,,16,20]])})))}function H(e,t,n){return e.all(t).filter((function(e){return!e.providedCodeActionKinds||e.providedCodeActionKinds.some((function(e){return(0,Z.EU)(n,new Z.yN(e))}))}))}function W(e,t,n,o){var a,s,c,u,l,d;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t||!o.length){r.next=18;break}u=(0,i.Z)(e.all(t)),r.prev=2,u.s();case 4:if((l=u.n()).done){r.next=10;break}if(!(d=l.value)._getAdditionalMenuItems){r.next=8;break}return r.delegateYield(null===(a=d._getAdditionalMenuItems)||void 0===a?void 0:a.call(d,{trigger:n.type,only:null===(c=null===(s=n.filter)||void 0===s?void 0:s.include)||void 0===c?void 0:c.value},o.map((function(e){return e.action}))),"t0",8);case 8:r.next=4;break;case 10:r.next=15;break;case 12:r.prev=12,r.t1=r.catch(2),u.e(r.t1);case 15:return r.prev=15,u.f(),r.finish(15);case 18:case"end":return r.stop()}}),L,null,[[2,12,15,18]])}function V(e,t,n){if(e.documentation){var o=e.documentation.map((function(e){return{kind:new Z.yN(e.kind),command:e.command}}));if(n){var r,a,s=(0,i.Z)(o);try{for(s.s();!(a=s.n()).done;){var c=a.value;c.kind.contains(n)&&(r?r.kind.contains(c.kind)&&(r=c):r=c)}}catch(p){s.e(p)}finally{s.f()}if(r)return null===r||void 0===r?void 0:r.command}var u,l=(0,i.Z)(t);try{for(l.s();!(u=l.n()).done;){var d=u.value;if(d.kind){var h,f=(0,i.Z)(o);try{for(f.s();!(h=f.n()).done;){var g=h.value;if(g.kind.contains(new Z.yN(d.kind)))return g.command}}catch(p){f.e(p)}finally{f.f()}}}}catch(p){l.e(p)}finally{l.f()}}}function Q(e,t,n,i){var s,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h.T.None;return P(this,void 0,void 0,(0,r.Z)().mark((function u(){var l,d,h,f,g;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return l=e.get(v.vu),d=e.get(w.H),h=e.get(N.b),f=e.get(x.lT),h.publicLog2("codeAction.applyCodeAction",{codeActionTitle:t.action.title,codeActionKind:t.action.kind,codeActionIsPreferred:!!t.action.isPreferred,reason:n}),r.next=7,t.resolve(c);case 7:if(!c.isCancellationRequested){r.next=9;break}return r.abrupt("return");case 9:if(!(null===(s=t.action.edit)||void 0===s?void 0:s.edits.length)){r.next=15;break}return r.next=12,l.apply(t.action.edit,{editor:null===i||void 0===i?void 0:i.editor,label:t.action.title,quotableLabel:t.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:n!==o.OnSave,showPreview:null===i||void 0===i?void 0:i.preview});case 12:if(r.sent.isApplied){r.next=15;break}return r.abrupt("return");case 15:if(!t.action.command){r.next=25;break}return r.prev=16,r.next=19,d.executeCommand.apply(d,[t.action.command.id].concat((0,a.Z)(t.action.command.arguments||[])));case 19:r.next=25;break;case 21:r.prev=21,r.t0=r.catch(16),g=U(r.t0),f.error("string"===typeof g?g:k.NC("applyCodeActionFailed","An unknown error occurred while applying the code action"));case 25:case"end":return r.stop()}}),u,null,[[16,21]])})))}function U(e){return"string"===typeof e?e:e instanceof Error&&"string"===typeof e.message?e.message:void 0}!function(e){e.OnSave="onSave",e.FromProblemsView="fromProblemsView",e.FromCodeActions="fromCodeActions"}(o||(o={})),w.P.registerCommand("_executeCodeActionProvider",(function(e,t,n,o,i){return P(this,void 0,void 0,(0,r.Z)().mark((function a(){var s,c,u,l,d,g,v,b,k;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t instanceof p.o){r.next=2;break}throw(0,f.b1)();case 2:if(s=e.get(C.p),c=s.codeActionProvider,u=e.get(y.q).getModel(t)){r.next=6;break}throw(0,f.b1)();case 6:if(l=_.Y.isISelection(n)?_.Y.liftSelection(n):m.e.isIRange(n)?u.validateRange(n):void 0){r.next=9;break}throw(0,f.b1)();case 9:return d="string"===typeof o?new Z.yN(o):void 0,r.next=12,B(c,u,l,{type:1,triggerAction:Z.aQ.Default,filter:{includeSourceActions:!0,include:d}},S.Ex.None,h.T.None);case 12:for(g=r.sent,v=[],b=Math.min(g.validActions.length,"number"===typeof i?i:0),k=0;k<b;k++)v.push(g.validActions[k].resolve(h.T.None));return r.prev=16,r.next=19,Promise.all(v);case 19:return r.abrupt("return",g.validActions.map((function(e){return e.action})));case 20:return r.prev=20,setTimeout((function(){return g.dispose()}),100),r.finish(20);case 23:case"end":return r.stop()}}),a,null,[[16,,20,23]])})))}))},63446:function(e,t,n){n.r(t);var o=n(95253),i=n(89212),r=n(15671),a=n(43144),s=n(60136),c=n(27277),u=n(31906),l=n(98926),d=n(47150),h=n(18420),f=n(8022),g=n(53222),p=n(32714),v=n(89748);function m(e){return f.Ao.regex(v.fj.keys()[0],new RegExp("(\\s|^)"+(0,u.ec)(e.value)+"\\b"))}var _={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:h.NC("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:h.NC("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[h.NC("args.schema.apply.first","Always apply the first returned code action."),h.NC("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),h.NC("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:h.NC("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};function C(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:g.aQ.Default;if(e.hasModel()){var r=p.G.get(e);null===r||void 0===r||r.manualTriggerAtCurrentPosition(t,i,n,o)}}var y=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:d.cz,label:h.NC("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:f.Ao.and(l.u.writable,l.u.hasCodeActionsProvider),kbOpts:{kbExpr:l.u.textInputFocus,primary:2137,weight:100}})}return(0,a.Z)(n,[{key:"run",value:function(e,t){return C(t,h.NC("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,g.aQ.QuickFix)}}]),n}(o.R6),b=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:d.RB,precondition:f.Ao.and(l.u.writable,l.u.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:_}]}})}return(0,a.Z)(n,[{key:"runEditorCommand",value:function(e,t,n){var o=g.wZ.fromUser(n,{kind:g.yN.Empty,apply:"ifSingle"});return C(t,"string"===typeof(null===n||void 0===n?void 0:n.kind)?o.preferred?h.NC("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",n.kind):h.NC("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",n.kind):o.preferred?h.NC("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):h.NC("editor.action.codeAction.noneMessage","No code actions available"),{include:o.kind,includeSourceActions:!0,onlyIncludePreferredActions:o.preferred},o.apply)}}]),n}(o._l),k=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:d.Bb,label:h.NC("refactor.label","Refactor..."),alias:"Refactor...",precondition:f.Ao.and(l.u.writable,l.u.hasCodeActionsProvider),kbOpts:{kbExpr:l.u.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:f.Ao.and(l.u.writable,m(g.yN.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:_}]}})}return(0,a.Z)(n,[{key:"run",value:function(e,t,n){var o=g.wZ.fromUser(n,{kind:g.yN.Refactor,apply:"never"});return C(t,"string"===typeof(null===n||void 0===n?void 0:n.kind)?o.preferred?h.NC("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",n.kind):h.NC("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",n.kind):o.preferred?h.NC("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):h.NC("editor.action.refactor.noneMessage","No refactorings available"),{include:g.yN.Refactor.contains(o.kind)?o.kind:g.yN.None,onlyIncludePreferredActions:o.preferred},o.apply,g.aQ.Refactor)}}]),n}(o.R6),w=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:d.MN,label:h.NC("source.label","Source Action..."),alias:"Source Action...",precondition:f.Ao.and(l.u.writable,l.u.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:f.Ao.and(l.u.writable,m(g.yN.Source))},description:{description:"Source Action...",args:[{name:"args",schema:_}]}})}return(0,a.Z)(n,[{key:"run",value:function(e,t,n){var o=g.wZ.fromUser(n,{kind:g.yN.Source,apply:"never"});return C(t,"string"===typeof(null===n||void 0===n?void 0:n.kind)?o.preferred?h.NC("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",n.kind):h.NC("editor.action.source.noneMessage.kind","No source actions for '{0}' available",n.kind):o.preferred?h.NC("editor.action.source.noneMessage.preferred","No preferred source actions available"):h.NC("editor.action.source.noneMessage","No source actions available"),{include:g.yN.Source.contains(o.kind)?o.kind:g.yN.None,includeSourceActions:!0,onlyIncludePreferredActions:o.preferred},o.apply,g.aQ.SourceAction)}}]),n}(o.R6),x=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:d.uH,label:h.NC("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:f.Ao.and(l.u.writable,m(g.yN.SourceOrganizeImports)),kbOpts:{kbExpr:l.u.textInputFocus,primary:1581,weight:100}})}return(0,a.Z)(n,[{key:"run",value:function(e,t){return C(t,h.NC("editor.action.organize.noneMessage","No organize imports action available"),{include:g.yN.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",g.aQ.OrganizeImports)}}]),n}(o.R6),S=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:d.TM,label:h.NC("fixAll.label","Fix All"),alias:"Fix All",precondition:f.Ao.and(l.u.writable,m(g.yN.SourceFixAll))})}return(0,a.Z)(n,[{key:"run",value:function(e,t){return C(t,h.NC("fixAll.noneMessage","No fix all action available"),{include:g.yN.SourceFixAll,includeSourceActions:!0},"ifSingle",g.aQ.FixAll)}}]),n}(o.R6),N=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:d.pZ,label:h.NC("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:f.Ao.and(l.u.writable,m(g.yN.QuickFix)),kbOpts:{kbExpr:l.u.textInputFocus,primary:1625,mac:{primary:2649},weight:100}})}return(0,a.Z)(n,[{key:"run",value:function(e,t){return C(t,h.NC("editor.action.autoFix.noneMessage","No auto fixes available"),{include:g.yN.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",g.aQ.AutoFix)}}]),n}(o.R6),Z=n(86522),L=n(92328),P=n(43357);(0,o._K)(p.G.ID,p.G,3),(0,o._K)(Z.f.ID,Z.f,4),(0,o.Qr)(y),(0,o.Qr)(k),(0,o.Qr)(w),(0,o.Qr)(x),(0,o.Qr)(N),(0,o.Qr)(S),(0,o.fK)(new b),P.B.as(L.IP.Configuration).registerConfiguration(Object.assign(Object.assign({},i.wk),{properties:{"editor.codeActionWidget.showHeaders":{type:"boolean",scope:5,description:h.NC("showCodeActionHeaders","Enable/disable showing group headers in the Code Action menu."),default:!0}}})),P.B.as(L.IP.Configuration).registerConfiguration(Object.assign(Object.assign({},i.wk),{properties:{"editor.codeActionWidget.includeNearbyQuickfixes":{type:"boolean",scope:5,description:h.NC("includeNearbyQuickfixes","Enable/disable showing nearest quickfix within a line when not currently on a diagnostic."),default:!1}}}))},32714:function(e,t,n){n.d(t,{G:function(){return Y}});var o,i=n(93433),r=n(74165),a=n(15671),s=n(43144),c=n(11752),u=n(61120),l=n(60136),d=n(27277),h=n(32959),f=n(46403),g=n(74146),p=n(29158),v=n(65096),m=n(65631),_=n(78519),C=n(65441),y=n(47150),b=n(53222),k=n(75256),w=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},x=function(e,t){return function(n,o){t(n,o,e)}},S=o=function(){function e(t){(0,a.Z)(this,e),this.keybindingService=t}return(0,s.Z)(e,[{key:"getResolver",value:function(){var e=this,t=new p.o((function(){return e.keybindingService.getKeybindings().filter((function(e){return o.codeActionCommands.indexOf(e.command)>=0})).filter((function(e){return e.resolvedKeybinding})).map((function(e){var t=e.commandArgs;return e.command===y.uH?t={kind:b.yN.SourceOrganizeImports.value}:e.command===y.TM&&(t={kind:b.yN.SourceFixAll.value}),Object.assign({resolvedKeybinding:e.resolvedKeybinding},b.wZ.fromUser(t,{kind:b.yN.None,apply:"never"}))}))}));return function(n){if(n.kind){var o=e.bestKeybindingForCodeAction(n,t.value);return null===o||void 0===o?void 0:o.resolvedKeybinding}}}},{key:"bestKeybindingForCodeAction",value:function(e,t){if(e.kind){var n=new b.yN(e.kind);return t.filter((function(e){return e.kind.contains(n)})).filter((function(t){return!t.preferred||e.isPreferred})).reduceRight((function(e,t){return e?e.kind.contains(t.kind)?t:e:t}),void 0)}}}]),e}();S.codeActionCommands=[y.Bb,y.RB,y.MN,y.uH,y.TM],S=o=w([x(0,k.d)],S);var N=n(37762),Z=(n(46962),n(77409)),L=(n(24988),n(18420)),P=Object.freeze({kind:b.yN.Empty,title:(0,L.NC)("codeAction.widget.id.more","More Actions...")}),A=Object.freeze([{kind:b.yN.QuickFix,title:(0,L.NC)("codeAction.widget.id.quickfix","Quick Fix")},{kind:b.yN.RefactorExtract,title:(0,L.NC)("codeAction.widget.id.extract","Extract"),icon:Z.l.wrench},{kind:b.yN.RefactorInline,title:(0,L.NC)("codeAction.widget.id.inline","Inline"),icon:Z.l.wrench},{kind:b.yN.RefactorRewrite,title:(0,L.NC)("codeAction.widget.id.convert","Rewrite"),icon:Z.l.wrench},{kind:b.yN.RefactorMove,title:(0,L.NC)("codeAction.widget.id.move","Move"),icon:Z.l.wrench},{kind:b.yN.SurroundWith,title:(0,L.NC)("codeAction.widget.id.surround","Surround With"),icon:Z.l.symbolSnippet},{kind:b.yN.Source,title:(0,L.NC)("codeAction.widget.id.source","Source Action"),icon:Z.l.symbolFile},P]);function D(e,t,n){if(!t)return e.map((function(e){var t;return{kind:"action",item:e,group:P,disabled:!!e.action.disabled,label:e.action.disabled||e.action.title,canPreview:!!(null===(t=e.action.edit)||void 0===t?void 0:t.edits.length)}}));var o,i=A.map((function(e){return{group:e,actions:[]}})),r=(0,N.Z)(e);try{for(r.s();!(o=r.n()).done;){var a,s=o.value,c=s.action.kind?new b.yN(s.action.kind):b.yN.None,u=(0,N.Z)(i);try{for(u.s();!(a=u.n()).done;){var l=a.value;if(l.group.kind.contains(c)){l.actions.push(s);break}}}catch(_){u.e(_)}finally{u.f()}}}catch(_){r.e(_)}finally{r.f()}var d,h=[],f=(0,N.Z)(i);try{for(f.s();!(d=f.n()).done;){var g=d.value;if(g.actions.length){h.push({kind:"header",group:g.group});var p,v=(0,N.Z)(g.actions);try{for(v.s();!(p=v.n()).done;){var m=p.value;h.push({kind:"action",item:m,group:g.group,label:m.action.title,disabled:!!m.action.disabled,keybinding:n(m.action)})}}catch(_){v.e(_)}finally{v.f()}}}}catch(_){f.e(_)}finally{f.f()}return h}var I,M=n(86522),E=n(98594),O=n(26890),T=n(99740),R=n(77819),F=n(8022),B=n(64606),H=n(81266),W=n(28322),V=n(43980),Q=n(39707),U=n(41335),j=n(89748),z=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},q=function(e,t){return function(n,o){t(n,o,e)}},K=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(t){r(t)}}function s(e){try{c(o.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},Y=I=function(e){(0,l.Z)(n,e);var t=(0,d.Z)(n);function n(e,o,i,r,s,c,u,l,d,h){var f;return(0,a.Z)(this,n),(f=t.call(this))._commandService=u,f._configurationService=l,f._actionWidgetService=d,f._instantiationService=h,f._activeCodeActions=f._register(new v.XK),f._showDisabled=!1,f._disposed=!1,f._editor=e,f._model=f._register(new j.Jt(f._editor,s.codeActionProvider,o,i,c,l)),f._register(f._model.onDidChangeState((function(e){return f.update(e)}))),f._lightBulbWidget=new p.o((function(){var e=f._editor.getContribution(M.f.ID);return e&&f._register(e.onClick((function(e){return f.showCodeActionList(e.actions,e,{includeDisabledActions:!1,fromLightbulb:!0})}))),e})),f._resolver=r.createInstance(S),f._register(f._editor.onDidLayoutChange((function(){return f._actionWidgetService.hide()}))),f}return(0,s.Z)(n,[{key:"dispose",value:function(){this._disposed=!0,(0,c.Z)((0,u.Z)(n.prototype),"dispose",this).call(this)}},{key:"showCodeActions",value:function(e,t,n){return this.showCodeActionList(t,n,{includeDisabledActions:!1,fromLightbulb:!1})}},{key:"manualTriggerAtCurrentPosition",value:function(e,t,n,o){var i;if(this._editor.hasModel()){null===(i=E.O.get(this._editor))||void 0===i||i.closeMessage();var r=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:n,autoApply:o,context:{notAvailableMessage:e,position:r}})}}},{key:"_trigger",value:function(e){return this._model.trigger(e)}},{key:"_applyCodeAction",value:function(e,t,n){return K(this,void 0,void 0,(0,r.Z)().mark((function o(){return(0,r.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,this._instantiationService.invokeFunction(y.LR,e,y.UX.FromCodeActions,{preview:n,editor:this._editor});case 3:return o.prev=3,t&&this._trigger({type:2,triggerAction:b.aQ.QuickFix,filter:{}}),o.finish(3);case 6:case"end":return o.stop()}}),o,this,[[0,,3,6]])})))}},{key:"update",value:function(e){var t,n,o,i,a,s,c;return K(this,void 0,void 0,(0,r.Z)().mark((function u(){var l,d,h,f;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(1===e.type){r.next=3;break}return null===(t=this._lightBulbWidget.rawValue)||void 0===t||t.hide(),r.abrupt("return");case 3:return r.prev=3,r.next=6,e.actions;case 6:l=r.sent,r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(3),(0,g.dL)(r.t0),r.abrupt("return");case 13:if(!this._disposed){r.next=15;break}return r.abrupt("return");case 15:if(null===(n=this._lightBulbWidget.value)||void 0===n||n.update(l,e.trigger,e.position),1!==e.trigger.type){r.next=45;break}if(!(null===(o=e.trigger.filter)||void 0===o?void 0:o.include)){r.next=34;break}if(!(d=this.tryGetValidActionToApply(e.trigger,l))){r.next=28;break}return r.prev=20,null===(i=this._lightBulbWidget.value)||void 0===i||i.hide(),r.next=24,this._applyCodeAction(d,!1,!1);case 24:return r.prev=24,l.dispose(),r.finish(24);case 27:return r.abrupt("return");case 28:if(!e.trigger.context){r.next=34;break}if(!(h=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,l))||!h.action.disabled){r.next=34;break}return null===(a=E.O.get(this._editor))||void 0===a||a.showMessage(h.action.disabled,e.trigger.context.position),l.dispose(),r.abrupt("return");case 34:if(f=!!(null===(s=e.trigger.filter)||void 0===s?void 0:s.include),!e.trigger.context){r.next=41;break}if(l.allActions.length&&(f||l.validActions.length)){r.next=41;break}return null===(c=E.O.get(this._editor))||void 0===c||c.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=l,l.dispose(),r.abrupt("return");case 41:this._activeCodeActions.value=l,this.showCodeActionList(l,this.toCoords(e.position),{includeDisabledActions:f,fromLightbulb:!1}),r.next=46;break;case 45:this._actionWidgetService.isVisible?l.dispose():this._activeCodeActions.value=l;case 46:case"end":return r.stop()}}),u,this,[[3,9],[20,,24,27]])})))}},{key:"getInvalidActionThatWouldHaveBeenApplied",value:function(e,t){if(t.allActions.length)return"first"===e.autoApply&&0===t.validActions.length||"ifSingle"===e.autoApply&&1===t.allActions.length?t.allActions.find((function(e){return e.action.disabled})):void 0}},{key:"tryGetValidActionToApply",value:function(e,t){if(t.validActions.length)return"first"===e.autoApply&&t.validActions.length>0||"ifSingle"===e.autoApply&&1===t.validActions.length?t.validActions[0]:void 0}},{key:"showCodeActionList",value:function(e,t,n){return K(this,void 0,void 0,(0,r.Z)().mark((function o(){var i,a,s,c,u,l=this;return(0,r.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(i=this._editor.createDecorationsCollection(),a=this._editor.getDomNode()){o.next=4;break}return o.abrupt("return");case 4:if((s=n.includeDisabledActions&&(this._showDisabled||0===e.validActions.length)?e.allActions:e.validActions).length){o.next=7;break}return o.abrupt("return");case 7:c=m.L.isIPosition(t)?this.toCoords(t):t,u={onSelect:function(e,t){return K(l,void 0,void 0,(0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this._applyCodeAction(e,!0,!!t),this._actionWidgetService.hide(),i.clear();case 3:case"end":return n.stop()}}),n,this)})))},onHide:function(){var e;null===(e=l._editor)||void 0===e||e.focus(),i.clear()},onHover:function(e,t){return K(l,void 0,void 0,(0,r.Z)().mark((function n(){var o;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.resolve(t);case 2:if(!t.isCancellationRequested){n.next=4;break}return n.abrupt("return");case 4:return n.abrupt("return",{canPreview:!!(null===(o=e.action.edit)||void 0===o?void 0:o.edits.length)});case 5:case"end":return n.stop()}}),n)})))},onFocus:function(e){var t,n;if(e&&e.highlightRange&&e.action.diagnostics){var o=[{range:e.action.diagnostics[0],options:I.DECORATION}];i.set(o);var r=e.action.diagnostics[0],a=null===(n=null===(t=l._editor.getModel())||void 0===t?void 0:t.getWordAtPosition({lineNumber:r.startLineNumber,column:r.startColumn}))||void 0===n?void 0:n.word;f.i7((0,L.NC)("editingNewSelection","Context: {0} at line {1} and column {2}.",a,r.startLineNumber,r.startColumn))}else i.clear()}},this._actionWidgetService.show("codeActionWidget",!0,D(s,this._shouldShowHeaders(),this._resolver.getResolver()),u,c,a,this._getActionBarActions(e,t,n));case 10:case"end":return o.stop()}}),o,this)})))}},{key:"toCoords",value:function(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();var t=this._editor.getScrolledVisiblePosition(e),n=(0,h.getDomNodePagePosition)(this._editor.getDomNode());return{x:n.left+t.left,y:n.top+t.top+t.height}}},{key:"_shouldShowHeaders",value:function(){var e,t=null===(e=this._editor)||void 0===e?void 0:e.getModel();return this._configurationService.getValue("editor.codeActionWidget.showHeaders",{resource:null===t||void 0===t?void 0:t.uri})}},{key:"_getActionBarActions",value:function(e,t,n){var o=this;if(n.fromLightbulb)return[];var r=e.documentation.map((function(e){var t;return{id:e.id,label:e.title,tooltip:null!==(t=e.tooltip)&&void 0!==t?t:"",class:void 0,enabled:!0,run:function(){var t,n;return(t=o._commandService).executeCommand.apply(t,[e.id].concat((0,i.Z)(null!==(n=e.arguments)&&void 0!==n?n:[])))}}}));return n.includeDisabledActions&&e.validActions.length>0&&e.allActions.length!==e.validActions.length&&r.push(this._showDisabled?{id:"hideMoreActions",label:(0,L.NC)("hideMoreActions","Hide Disabled"),enabled:!0,tooltip:"",class:void 0,run:function(){return o._showDisabled=!1,o.showCodeActionList(e,t,n)}}:{id:"showMoreActions",label:(0,L.NC)("showMoreActions","Show Disabled"),enabled:!0,tooltip:"",class:void 0,run:function(){return o._showDisabled=!0,o.showCodeActionList(e,t,n)}}),r}}],[{key:"get",value:function(e){return e.getContribution(I.ID)}}]),n}(v.JT);Y.ID="editor.contrib.codeActionController",Y.DECORATION=_.qx.register({description:"quickfix-highlight",className:"quickfix-edit-highlight"}),Y=I=z([q(1,H.lT),q(2,F.i6),q(3,B.TG),q(4,C.p),q(5,W.ek),q(6,T.H),q(7,R.Ui),q(8,O.v),q(9,B.TG)],Y),(0,U.Ic)((function(e,t){var n,o;n=".quickfix-edit-highlight",(o=e.getColor(V.MUv))&&t.addRule(".monaco-editor ".concat(n," { background-color: ").concat(o,"; }"));var i=e.getColor(V.EiJ);i&&t.addRule(".monaco-editor .quickfix-edit-highlight { border: 1px ".concat((0,Q.c3)(e.type)?"dotted":"solid"," ").concat(i,"; box-sizing: border-box; }"))}))},89748:function(e,t,n){n.d(t,{Jt:function(){return L},fj:function(){return S}});var o,i=n(74165),r=n(93433),a=n(37762),s=n(11752),c=n(61120),u=n(15671),l=n(43144),d=n(60136),h=n(27277),f=n(71049),g=n(74146),p=n(13880),v=n(65096),m=n(44641),_=n(65631),C=n(96601),y=n(8022),b=n(28322),k=n(53222),w=n(47150),x=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(t){r(t)}}function s(e){try{c(o.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},S=new y.uy("supportedCodeAction",""),N=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,o,i){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:250;return(0,u.Z)(this,n),(r=t.call(this))._editor=e,r._markerService=o,r._signalChange=i,r._delay=a,r._autoTriggerTimer=r._register(new f._F),r._register(r._markerService.onMarkerChanged((function(e){return r._onMarkerChanges(e)}))),r._register(r._editor.onDidChangeCursorPosition((function(){return r._tryAutoTrigger()}))),r}return(0,l.Z)(n,[{key:"trigger",value:function(e){var t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);this._signalChange(t?{trigger:e,selection:t}:void 0)}},{key:"_onMarkerChanges",value:function(e){var t=this._editor.getModel();t&&e.some((function(e){return(0,m.Xy)(e,t.uri)}))&&this._tryAutoTrigger()}},{key:"_tryAutoTrigger",value:function(){var e=this;this._autoTriggerTimer.cancelAndSet((function(){e.trigger({type:2,triggerAction:k.aQ.Default})}),this._delay)}},{key:"_getRangeOfSelectionUnlessWhitespaceEnclosed",value:function(e){if(this._editor.hasModel()){var t=this._editor.getModel(),n=this._editor.getSelection();if(n.isEmpty()&&2===e.type){var o=n.getPosition(),i=o.lineNumber,r=o.column,a=t.getLineContent(i);if(0===a.length)return;if(1===r){if(/\s/.test(a[0]))return}else if(r===t.getLineMaxColumn(i)){if(/\s/.test(a[a.length-1]))return}else if(/\s/.test(a[r-2])&&/\s/.test(a[r-1]))return}return n}}}]),n}(v.JT);!function(e){e.Empty={type:0};var t=function(){function e(t,n,o){(0,u.Z)(this,e),this.trigger=t,this.position=n,this._cancellablePromise=o,this.type=1,this.actions=o.catch((function(e){if((0,g.n2)(e))return Z;throw e}))}return(0,l.Z)(e,[{key:"cancel",value:function(){this._cancellablePromise.cancel()}}]),e}();e.Triggered=t}(o||(o={}));var Z=Object.freeze({allActions:[],validActions:[],dispose:function(){},documentation:[],hasAutoFix:!1}),L=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,i,r,a,s,c){var l;return(0,u.Z)(this,n),(l=t.call(this))._editor=e,l._registry=i,l._markerService=r,l._progressService=s,l._configurationService=c,l._codeActionOracle=l._register(new v.XK),l._state=o.Empty,l._onDidChangeState=l._register(new p.Q5),l.onDidChangeState=l._onDidChangeState.event,l._disposed=!1,l._supportedCodeActions=S.bindTo(a),l._register(l._editor.onDidChangeModel((function(){return l._update()}))),l._register(l._editor.onDidChangeModelLanguage((function(){return l._update()}))),l._register(l._registry.onDidChange((function(){return l._update()}))),l._update(),l}return(0,l.Z)(n,[{key:"dispose",value:function(){this._disposed||(this._disposed=!0,(0,s.Z)((0,c.Z)(n.prototype),"dispose",this).call(this),this.setState(o.Empty,!0))}},{key:"_settingEnabledNearbyQuickfixes",value:function(){var e,t=null===(e=this._editor)||void 0===e?void 0:e.getModel();return!!this._configurationService&&this._configurationService.getValue("editor.codeActionWidget.includeNearbyQuickfixes",{resource:null===t||void 0===t?void 0:t.uri})}},{key:"_update",value:function(){var e=this;if(!this._disposed){this._codeActionOracle.value=void 0,this.setState(o.Empty);var t=this._editor.getModel();if(t&&this._registry.has(t)&&!this._editor.getOption(90)){var n=this._registry.all(t).flatMap((function(e){var t;return null!==(t=e.providedCodeActionKinds)&&void 0!==t?t:[]}));this._supportedCodeActions.set(n.join(" ")),this._codeActionOracle.value=new N(this._editor,this._markerService,(function(n){var s;if(n){var c=n.selection.getStartPosition(),u=(0,f.PG)((function(o){return x(e,void 0,void 0,(0,i.Z)().mark((function e(){var s,c,u,l,d,h,f,g,p,v,m,y,x,S,N,L,P,A,D,I,M,E;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._settingEnabledNearbyQuickfixes()||1!==n.trigger.type||n.trigger.triggerAction!==k.aQ.QuickFix&&!(null===(c=null===(s=n.trigger.filter)||void 0===s?void 0:s.include)||void 0===c?void 0:c.contains(k.yN.QuickFix))){e.next=25;break}return e.next=3,(0,w.aI)(this._registry,t,n.selection,n.trigger,b.Ex.None,o);case 3:if(f=e.sent,!o.isCancellationRequested){e.next=6;break}return e.abrupt("return",Z);case 6:if(null===(u=f.validActions)||void 0===u?void 0:u.some((function(e){return!!e.action.kind&&k.yN.QuickFix.contains(new k.yN(e.action.kind))}))){e.next=25;break}if(!((g=this._markerService.read({resource:t.uri})).length>0)){e.next=25;break}p=n.selection.getPosition(),v=p,m=Number.MAX_VALUE,y=!1,x=(0,a.Z)(g);try{for(x.s();!(S=x.n()).done;)N=S.value,L=N.endColumn,P=N.endLineNumber,A=N.startLineNumber,(P===p.lineNumber||A===p.lineNumber)&&Math.abs(p.column-L)<m&&(m=Math.abs(p.column-L),y=!0,v=new _.L(P,L))}catch(i){x.e(i)}finally{x.f()}if(!y){e.next=25;break}return D={type:n.trigger.type,triggerAction:n.trigger.triggerAction,filter:{include:(null===(l=n.trigger.filter)||void 0===l?void 0:l.include)?null===(d=n.trigger.filter)||void 0===d?void 0:d.include:k.yN.QuickFix},autoApply:n.trigger.autoApply,context:{notAvailableMessage:(null===(h=n.trigger.context)||void 0===h?void 0:h.notAvailableMessage)||"",position:v}},I=new C.Y(v.lineNumber,v.column,v.lineNumber,v.column),e.next=21,(0,w.aI)(this._registry,t,I,D,b.Ex.None,o);case 21:return M=e.sent,E=(0,r.Z)(f.validActions),0!==M.validActions.length&&(M.validActions.forEach((function(e){e.highlightRange=e.action.isPreferred})),E.push.apply(E,(0,r.Z)(M.validActions))),e.abrupt("return",{validActions:E,allActions:f.allActions,documentation:f.documentation,hasAutoFix:f.hasAutoFix,dispose:function(){f.dispose()}});case 25:return e.abrupt("return",(0,w.aI)(this._registry,t,n.selection,n.trigger,b.Ex.None,o));case 26:case"end":return e.stop()}}),e,this)})))}));1===n.trigger.type&&(null===(s=e._progressService)||void 0===s||s.showWhile(u,250)),e.setState(new o.Triggered(n.trigger,c,u))}else e.setState(o.Empty)}),void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:k.aQ.Default})}else this._supportedCodeActions.reset()}}},{key:"trigger",value:function(e){var t;null===(t=this._codeActionOracle.value)||void 0===t||t.trigger(e)}},{key:"setState",value:function(e,t){e!==this._state&&(1===this._state.type&&this._state.cancel(),this._state=e,t||this._disposed||this._onDidChangeState.fire(e))}}]),n}(v.JT)},86522:function(e,t,n){n.d(t,{f:function(){return S}});var o,i,r=n(93433),a=n(97326),s=n(11752),c=n(61120),u=n(60136),l=n(27277),d=n(43144),h=n(15671),f=n(32959),g=n(84100),p=n(77409),v=n(13880),m=n(65096),_=n(79730),C=n(23291),y=n(47150),b=n(18420),k=n(75256),w=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},x=function(e,t){return function(n,o){t(n,o,e)}};!function(e){e.Hidden={type:0};var t=(0,d.Z)((function e(t,n,o,i){(0,h.Z)(this,e),this.actions=t,this.trigger=n,this.editorPosition=o,this.widgetPosition=i,this.type=1}));e.Showing=t}(i||(i={}));var S=o=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e,o){var r;return(0,h.Z)(this,n),(r=t.call(this))._editor=e,r._onClick=r._register(new v.Q5),r.onClick=r._onClick.event,r._state=i.Hidden,r._domNode=f.$("div.lightBulbWidget"),r._register(g.o.ignoreTarget(r._domNode)),r._editor.addContentWidget((0,a.Z)(r)),r._register(r._editor.onDidChangeModelContent((function(e){var t=r._editor.getModel();(1!==r.state.type||!t||r.state.editorPosition.lineNumber>=t.getLineCount())&&r.hide()}))),r._register(f.addStandardDisposableGenericMouseDownListener(r._domNode,(function(e){if(1===r.state.type){r._editor.focus(),e.preventDefault();var t=f.getDomNodePagePosition(r._domNode),n=t.top,o=t.height,i=r._editor.getOption(66),a=Math.floor(i/3);null!==r.state.widgetPosition.position&&r.state.widgetPosition.position.lineNumber<r.state.editorPosition.lineNumber&&(a+=i),r._onClick.fire({x:e.posx,y:n+o+a,actions:r.state.actions,trigger:r.state.trigger})}}))),r._register(f.addDisposableListener(r._domNode,"mouseenter",(function(e){1===(1&e.buttons)&&r.hide()}))),r._register(r._editor.onDidChangeConfiguration((function(e){e.hasChanged(64)&&!r._editor.getOption(64).enabled&&r.hide()}))),r._register(v.ju.runAndSubscribe(o.onDidUpdateKeybindings,(function(){var e,t,n,i;r._preferredKbLabel=null!==(t=null===(e=o.lookupKeybinding(y.pZ))||void 0===e?void 0:e.getLabel())&&void 0!==t?t:void 0,r._quickFixKbLabel=null!==(i=null===(n=o.lookupKeybinding(y.cz))||void 0===n?void 0:n.getLabel())&&void 0!==i?i:void 0,r._updateLightBulbTitleAndIcon()}))),r}return(0,d.Z)(n,[{key:"dispose",value:function(){(0,s.Z)((0,c.Z)(n.prototype),"dispose",this).call(this),this._editor.removeContentWidget(this)}},{key:"getId",value:function(){return"LightBulbWidget"}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return 1===this._state.type?this._state.widgetPosition:null}},{key:"update",value:function(e,t,n){var r=this;if(e.validActions.length<=0)return this.hide();var a=this._editor.getOptions();if(!a.get(64).enabled)return this.hide();var s=this._editor.getModel();if(!s)return this.hide();var c=s.validatePosition(n),u=c.lineNumber,l=c.column,d=s.getOptions().tabSize,h=a.get(50),f=s.getLineContent(u),g=(0,C.q)(f,d),p=function(e){return e>2&&r._editor.getTopForLineNumber(e)===r._editor.getTopForLineNumber(e-1)},v=u;if(!(h.spaceWidth*g>22))if(u>1&&!p(u-1))v-=1;else if(p(u+1)){if(l*h.spaceWidth<22)return this.hide()}else v+=1;this.state=new i.Showing(e,t,n,{position:{lineNumber:v,column:1},preference:o._posPref}),this._editor.layoutContentWidget(this)}},{key:"hide",value:function(){this.state!==i.Hidden&&(this.state=i.Hidden,this._editor.layoutContentWidget(this))}},{key:"state",get:function(){return this._state},set:function(e){this._state=e,this._updateLightBulbTitleAndIcon()}},{key:"_updateLightBulbTitleAndIcon",value:function(){var e,t,n,o;if(1===this.state.type&&this.state.actions.hasAutoFix&&((n=this._domNode.classList).remove.apply(n,(0,r.Z)(_.k.asClassNameArray(p.l.lightBulb))),(o=this._domNode.classList).add.apply(o,(0,r.Z)(_.k.asClassNameArray(p.l.lightbulbAutofix))),this._preferredKbLabel))return void(this.title=b.NC("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",this._preferredKbLabel));(e=this._domNode.classList).remove.apply(e,(0,r.Z)(_.k.asClassNameArray(p.l.lightbulbAutofix))),(t=this._domNode.classList).add.apply(t,(0,r.Z)(_.k.asClassNameArray(p.l.lightBulb))),this._quickFixKbLabel?this.title=b.NC("codeActionWithKb","Show Code Actions ({0})",this._quickFixKbLabel):this.title=b.NC("codeAction","Show Code Actions")}},{key:"title",set:function(e){this._domNode.title=e}}]),n}(m.JT);S.ID="editor.contrib.lightbulbWidget",S._posPref=[0],S=o=w([x(1,k.d)],S)},53222:function(e,t,n){n.d(t,{EU:function(){return l},Yl:function(){return d},aQ:function(){return o},bA:function(){return g},wZ:function(){return f},yN:function(){return u}});var o,i=n(74165),r=n(15671),a=n(43144),s=n(74146),c=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(t){r(t)}}function s(e){try{c(o.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},u=function(){function e(t){(0,r.Z)(this,e),this.value=t}return(0,a.Z)(e,[{key:"equals",value:function(e){return this.value===e.value}},{key:"contains",value:function(t){return this.equals(t)||""===this.value||t.value.startsWith(this.value+e.sep)}},{key:"intersects",value:function(e){return this.contains(e)||e.contains(this)}},{key:"append",value:function(t){return new e(this.value+e.sep+t)}}]),e}();function l(e,t){return!(e.include&&!e.include.intersects(t))&&((!e.excludes||!e.excludes.some((function(n){return h(t,n,e.include)})))&&!(!e.includeSourceActions&&u.Source.contains(t)))}function d(e,t){var n=t.kind?new u(t.kind):void 0;return!!(!e.include||n&&e.include.contains(n))&&(!(e.excludes&&n&&e.excludes.some((function(t){return h(n,t,e.include)})))&&(!(!e.includeSourceActions&&n&&u.Source.contains(n))&&!(e.onlyIncludePreferredActions&&!t.isPreferred)))}function h(e,t,n){return!!t.contains(e)&&(!n||!t.contains(n))}u.sep=".",u.None=new u("@@none@@"),u.Empty=new u(""),u.QuickFix=new u("quickfix"),u.Refactor=new u("refactor"),u.RefactorExtract=u.Refactor.append("extract"),u.RefactorInline=u.Refactor.append("inline"),u.RefactorMove=u.Refactor.append("move"),u.RefactorRewrite=u.Refactor.append("rewrite"),u.Notebook=new u("notebook"),u.Source=new u("source"),u.SourceOrganizeImports=u.Source.append("organizeImports"),u.SourceFixAll=u.Source.append("fixAll"),u.SurroundWith=u.Refactor.append("surround"),function(e){e.Refactor="refactor",e.RefactorPreview="refactor preview",e.Lightbulb="lightbulb",e.Default="other (default)",e.SourceAction="source action",e.QuickFix="quick fix action",e.FixAll="fix all",e.OrganizeImports="organize imports",e.AutoFix="auto fix",e.QuickFixHover="quick fix hover window",e.OnSave="save participants",e.ProblemsView="problems view"}(o||(o={}));var f=function(){function e(t,n,o){(0,r.Z)(this,e),this.kind=t,this.apply=n,this.preferred=o}return(0,a.Z)(e,null,[{key:"fromUser",value:function(t,n){return t&&"object"===typeof t?new e(e.getKindFromUser(t,n.kind),e.getApplyFromUser(t,n.apply),e.getPreferredUser(t)):new e(n.kind,n.apply,!1)}},{key:"getApplyFromUser",value:function(e,t){switch("string"===typeof e.apply?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}},{key:"getKindFromUser",value:function(e,t){return"string"===typeof e.kind?new u(e.kind):t}},{key:"getPreferredUser",value:function(e){return"boolean"===typeof e.preferred&&e.preferred}}]),e}(),g=function(){function e(t,n,o){(0,r.Z)(this,e),this.action=t,this.provider=n,this.highlightRange=o}return(0,a.Z)(e,[{key:"resolve",value:function(e){var t;return c(this,void 0,void 0,(0,i.Z)().mark((function n(){var o;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null===(t=this.provider)||void 0===t?void 0:t.resolveCodeAction)||this.action.edit){n.next=11;break}return n.prev=1,n.next=4,this.provider.resolveCodeAction(this.action,e);case 4:o=n.sent,n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),(0,s.Cp)(n.t0);case 10:o&&(this.action.edit=o.edit);case 11:return n.abrupt("return",this);case 12:case"end":return n.stop()}}),n,this,[[1,7]])})))}}]),e}()},86779:function(e,t,n){n.r(t),n.d(t,{CodeLensContribution:function(){return $}});var o=n(60136),i=n(27277),r=n(74165),a=n(93433),s=n(37762),c=n(15671),u=n(43144),l=n(71049),d=n(74146),h=n(65096),f=n(49039),g=n(95253),p=n(17683),v=n(98926),m=n(7388),_=n(63021),C=n(38821),y=n(26246),b=n(99740),k=n(65441),w=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(t){r(t)}}function s(e){try{c(o.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},x=function(){function e(){(0,c.Z)(this,e),this.lenses=[],this._disposables=new h.SL}return(0,u.Z)(e,[{key:"dispose",value:function(){this._disposables.dispose()}},{key:"isDisposed",get:function(){return this._disposables.isDisposed}},{key:"add",value:function(e,t){this._disposables.add(e);var n,o=(0,s.Z)(e.lenses);try{for(o.s();!(n=o.n()).done;){var i=n.value;this.lenses.push({symbol:i,provider:t})}}catch(r){o.e(r)}finally{o.f()}}}]),e}();function S(e,t,n){return w(this,void 0,void 0,(0,r.Z)().mark((function o(){var i,a,s,c,u=this;return(0,r.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i=e.ordered(t),a=new Map,s=new x,c=i.map((function(e,o){return w(u,void 0,void 0,(0,r.Z)().mark((function i(){var c;return(0,r.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a.set(e,o),i.prev=1,i.next=4,Promise.resolve(e.provideCodeLenses(t,n));case 4:(c=i.sent)&&s.add(c,e),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),(0,d.Cp)(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))})),o.next=6,Promise.all(c);case 6:return s.lenses=s.lenses.sort((function(e,t){return e.symbol.range.startLineNumber<t.symbol.range.startLineNumber?-1:e.symbol.range.startLineNumber>t.symbol.range.startLineNumber?1:a.get(e.provider)<a.get(t.provider)?-1:a.get(e.provider)>a.get(t.provider)?1:e.symbol.range.startColumn<t.symbol.range.startColumn?-1:e.symbol.range.startColumn>t.symbol.range.startColumn?1:0})),o.abrupt("return",s);case 8:case"end":return o.stop()}}),o)})))}b.P.registerCommand("_executeCodeLensProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var i=n[0],r=n[1];(0,_.p_)(C.o.isUri(i)),(0,_.p_)("number"===typeof r||!r);var a=e.get(k.p).codeLensProvider,c=e.get(y.q).getModel(i);if(!c)throw(0,d.b1)();var u=[],l=new h.SL;return S(a,c,m.T.None).then((function(e){l.add(e);var t,n=[],o=(0,s.Z)(e.lenses);try{var i=function(){var e=t.value;void 0===r||null===r||Boolean(e.symbol.command)?u.push(e.symbol):r-- >0&&e.provider.resolveCodeLens&&n.push(Promise.resolve(e.provider.resolveCodeLens(c,e.symbol,m.T.None)).then((function(t){return u.push(t||e.symbol)})))};for(o.s();!(t=o.n()).done;)i()}catch(a){o.e(a)}finally{o.f()}return Promise.all(n)})).then((function(){return u})).finally((function(){setTimeout((function(){return l.dispose()}),100)}))}));var N=n(29439),Z=n(13880),L=n(29413),P=n(17429),A=n(57832),D=n(64606),I=n(88463),M=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},E=function(e,t){return function(n,o){t(n,o,e)}},O=(0,D.yh)("ICodeLensCache"),T=(0,u.Z)((function e(t,n){(0,c.Z)(this,e),this.lineCount=t,this.data=n})),R=function(){function e(t){var n=this;(0,c.Z)(this,e),this._fakeProvider=new(function(){function e(){(0,c.Z)(this,e)}return(0,u.Z)(e,[{key:"provideCodeLenses",value:function(){throw new Error("not supported")}}]),e}()),this._cache=new L.z6(20,.75);(0,l.To)((function(){return t.remove("codelens/cache",1)}));var o="codelens/cache2",i=t.get(o,1,"{}");this._deserialize(i),Z.ju.once(t.onWillSaveState)((function(e){e.reason===I.fk.SHUTDOWN&&t.store(o,n._serialize(),1,1)}))}return(0,u.Z)(e,[{key:"put",value:function(e,t){var n=t.lenses.map((function(e){var t;return{range:e.symbol.range,command:e.symbol.command&&{id:"",title:null===(t=e.symbol.command)||void 0===t?void 0:t.title}}})),o=new x;o.add({lenses:n,dispose:function(){}},this._fakeProvider);var i=new T(e.getLineCount(),o);this._cache.set(e.uri.toString(),i)}},{key:"get",value:function(e){var t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}},{key:"delete",value:function(e){this._cache.delete(e.uri.toString())}},{key:"_serialize",value:function(){var e,t=Object.create(null),n=(0,s.Z)(this._cache);try{for(n.s();!(e=n.n()).done;){var o,i=(0,N.Z)(e.value,2),r=i[0],c=i[1],u=new Set,l=(0,s.Z)(c.data.lenses);try{for(l.s();!(o=l.n()).done;){var d=o.value;u.add(d.symbol.range.startLineNumber)}}catch(h){l.e(h)}finally{l.f()}t[r]={lineCount:c.lineCount,lines:(0,a.Z)(u.values())}}}catch(h){n.e(h)}finally{n.f()}return JSON.stringify(t)}},{key:"_deserialize",value:function(e){try{var t=JSON.parse(e);for(var n in t){var o,i=t[n],r=[],a=(0,s.Z)(i.lines);try{for(a.s();!(o=a.n()).done;){var c=o.value;r.push({range:new P.e(c,1,c,11)})}}catch(l){a.e(l)}finally{a.f()}var u=new x;u.add({lenses:r,dispose:function(){}},this._fakeProvider),this._cache.set(n,new T(i.lineCount,u))}}catch(d){}}}]),e}();R=M([E(0,I.Uy)],R),(0,A.z)(O,R,1);var F=n(32959),B=n(26805),H=n(78519),W=function(){function e(t,n,o){(0,c.Z)(this,e),this.afterColumn=1073741824,this.afterLineNumber=t,this.heightInPx=n,this._onHeight=o,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}return(0,u.Z)(e,[{key:"onComputedHeight",value:function(e){void 0===this._lastHeight?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}},{key:"isVisible",value:function(){return 0!==this._lastHeight&&this.domNode.hasAttribute("monaco-visible-view-zone")}}]),e}(),V=function(){function e(t,n){(0,c.Z)(this,e),this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=t,this._id="codelens.widget-".concat(e._idPool++),this.updatePosition(n),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}return(0,u.Z)(e,[{key:"withCommands",value:function(e,t){this._commands.clear();for(var n=[],o=!1,i=0;i<e.length;i++){var r=e[i];if(r&&(o=!0,r.command)){var s=(0,B.T)(r.command.title.trim());r.command.id?(n.push(F.$.apply(F,["a",{id:String(i),title:r.command.tooltip,role:"button"}].concat((0,a.Z)(s)))),this._commands.set(String(i),r.command)):n.push(F.$.apply(F,["span",{title:r.command.tooltip}].concat((0,a.Z)(s)))),i+1<e.length&&n.push(F.$("span",void 0,"\xa0|\xa0"))}}o?(F.reset.apply(F,[this._domNode].concat(n)),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):F.reset(this._domNode,F.$("span",void 0,"no commands"))}},{key:"getCommand",value:function(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}},{key:"getId",value:function(){return this._id}},{key:"getDomNode",value:function(){return this._domNode}},{key:"updatePosition",value:function(e){var t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}},{key:"getPosition",value:function(){return this._widgetPosition||null}}]),e}();V._idPool=0;var Q=function(){function e(){(0,c.Z)(this,e),this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}return(0,u.Z)(e,[{key:"addDecoration",value:function(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}},{key:"removeDecoration",value:function(e){this._removeDecorations.push(e)}},{key:"commit",value:function(e){for(var t=e.deltaDecorations(this._removeDecorations,this._addDecorations),n=0,o=t.length;n<o;n++)this._addDecorationsCallbacks[n](t[n])}}]),e}(),U=H.qx.register({collapseOnReplaceEdit:!0,description:"codelens"}),j=function(){function e(t,n,o,i,r,a){var s,u=this;(0,c.Z)(this,e),this._isDisposed=!1,this._editor=n,this._data=t,this._decorationIds=[];var l=[];this._data.forEach((function(e,t){e.symbol.command&&l.push(e.symbol),o.addDecoration({range:e.symbol.range,options:U},(function(e){return u._decorationIds[t]=e})),s=s?P.e.plusRange(s,e.symbol.range):P.e.lift(e.symbol.range)})),this._viewZone=new W(s.startLineNumber-1,r,a),this._viewZoneId=i.addZone(this._viewZone),l.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(l,!1))}return(0,u.Z)(e,[{key:"_createContentWidgetIfNecessary",value:function(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new V(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}},{key:"dispose",value:function(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],null===t||void 0===t||t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}},{key:"isDisposed",value:function(){return this._isDisposed}},{key:"isValid",value:function(){var e=this;return this._decorationIds.some((function(t,n){var o=e._editor.getModel().getDecorationRange(t),i=e._data[n].symbol;return!(!o||P.e.isEmpty(i.range)!==o.isEmpty())}))}},{key:"updateCodeLensSymbols",value:function(e,t){var n=this;this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((function(e,o){t.addDecoration({range:e.symbol.range,options:U},(function(e){return n._decorationIds[o]=e}))}))}},{key:"updateHeight",value:function(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}},{key:"computeIfNecessary",value:function(e){if(!this._viewZone.isVisible())return null;for(var t=0;t<this._decorationIds.length;t++){var n=e.getDecorationRange(this._decorationIds[t]);n&&(this._data[t].symbol.range=n)}return this._data}},{key:"updateCommands",value:function(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(var t=0;t<this._data.length;t++){var n=e[t];if(n){var o=this._data[t].symbol;o.command=n.command||o.command}}}},{key:"getCommand",value:function(e){var t;return null===(t=this._contentWidget)||void 0===t?void 0:t.getCommand(e)}},{key:"getLineNumber",value:function(){var e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}},{key:"update",value:function(e){if(this.isValid()){var t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}]),e}(),z=n(18420),q=n(49431),K=n(67949),Y=n(68200),G=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},J=function(e,t){return function(n,o){t(n,o,e)}},X=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(t){r(t)}}function s(e){try{c(o.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},$=function(){function e(t,n,o,i,r,a){var s=this;(0,c.Z)(this,e),this._editor=t,this._languageFeaturesService=n,this._commandService=i,this._notificationService=r,this._codeLensCache=a,this._disposables=new h.SL,this._localToDispose=new h.SL,this._lenses=[],this._oldCodeLensModels=new h.SL,this._provideCodeLensDebounce=o.for(n.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=o.for(n.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new l.pY((function(){return s._resolveCodeLensesInViewport()}),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel((function(){return s._onModelChange()}))),this._disposables.add(this._editor.onDidChangeModelLanguage((function(){return s._onModelChange()}))),this._disposables.add(this._editor.onDidChangeConfiguration((function(e){(e.hasChanged(50)||e.hasChanged(19)||e.hasChanged(18))&&s._updateLensStyle(),e.hasChanged(17)&&s._onModelChange()}))),this._disposables.add(n.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}return(0,u.Z)(e,[{key:"dispose",value:function(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),null===(e=this._currentCodeLensModel)||void 0===e||e.dispose()}},{key:"_getLayoutInfo",value:function(){var e=Math.max(1.3,this._editor.getOption(66)/this._editor.getOption(52)),t=this._editor.getOption(19);return(!t||t<5)&&(t=.9*this._editor.getOption(52)|0),{fontSize:t,codeLensHeight:t*e|0}}},{key:"_updateLensStyle",value:function(){var e=this,t=this._getLayoutInfo(),n=t.codeLensHeight,o=t.fontSize,i=this._editor.getOption(18),r=this._editor.getOption(50),a=this._editor.getContainerDomNode().style;a.setProperty("--vscode-editorCodeLens-lineHeight","".concat(n,"px")),a.setProperty("--vscode-editorCodeLens-fontSize","".concat(o,"px")),a.setProperty("--vscode-editorCodeLens-fontFeatureSettings",r.fontFeatureSettings),i&&(a.setProperty("--vscode-editorCodeLens-fontFamily",i),a.setProperty("--vscode-editorCodeLens-fontFamilyDefault",p.hL.fontFamily)),this._editor.changeViewZones((function(t){var o,i=(0,s.Z)(e._lenses);try{for(i.s();!(o=i.n()).done;){o.value.updateHeight(n,t)}}catch(r){i.e(r)}finally{i.f()}}))}},{key:"_localDispose",value:function(){var e,t,n;null===(e=this._getCodeLensModelPromise)||void 0===e||e.cancel(),this._getCodeLensModelPromise=void 0,null===(t=this._resolveCodeLensesPromise)||void 0===t||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),null===(n=this._currentCodeLensModel)||void 0===n||n.dispose()}},{key:"_onModelChange",value:function(){var e=this;this._localDispose();var t=this._editor.getModel();if(t&&this._editor.getOption(17)&&!t.isTooLargeForTokenization()){var n=this._codeLensCache.get(t);if(n&&this._renderCodeLensSymbols(n),this._languageFeaturesService.codeLensProvider.has(t)){var o,i=(0,s.Z)(this._languageFeaturesService.codeLensProvider.all(t));try{for(i.s();!(o=i.n()).done;){var r=o.value;if("function"===typeof r.onDidChange){var c=r.onDidChange((function(){return u.schedule()}));this._localToDispose.add(c)}}}catch(g){i.e(g)}finally{i.f()}var u=new l.pY((function(){var n,o=Date.now();null===(n=e._getCodeLensModelPromise)||void 0===n||n.cancel(),e._getCodeLensModelPromise=(0,l.PG)((function(n){return S(e._languageFeaturesService.codeLensProvider,t,n)})),e._getCodeLensModelPromise.then((function(n){e._currentCodeLensModel&&e._oldCodeLensModels.add(e._currentCodeLensModel),e._currentCodeLensModel=n,e._codeLensCache.put(t,n);var i=e._provideCodeLensDebounce.update(t,Date.now()-o);u.delay=i,e._renderCodeLensSymbols(n),e._resolveCodeLensesInViewportSoon()}),d.dL)}),this._provideCodeLensDebounce.get(t));this._localToDispose.add(u),this._localToDispose.add((0,h.OF)((function(){return e._resolveCodeLensesScheduler.cancel()}))),this._localToDispose.add(this._editor.onDidChangeModelContent((function(){var t;e._editor.changeDecorations((function(t){e._editor.changeViewZones((function(n){var o=[],i=-1;e._lenses.forEach((function(e){e.isValid()&&i!==e.getLineNumber()?(e.update(n),i=e.getLineNumber()):o.push(e)}));var r=new Q;o.forEach((function(t){t.dispose(r,n),e._lenses.splice(e._lenses.indexOf(t),1)})),r.commit(t)}))})),u.schedule(),e._resolveCodeLensesScheduler.cancel(),null===(t=e._resolveCodeLensesPromise)||void 0===t||t.cancel(),e._resolveCodeLensesPromise=void 0}))),this._localToDispose.add(this._editor.onDidFocusEditorWidget((function(){u.schedule()}))),this._localToDispose.add(this._editor.onDidBlurEditorText((function(){u.cancel()}))),this._localToDispose.add(this._editor.onDidScrollChange((function(t){t.scrollTopChanged&&e._lenses.length>0&&e._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add(this._editor.onDidLayoutChange((function(){e._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add((0,h.OF)((function(){if(e._editor.getModel()){var t=f.Z.capture(e._editor);e._editor.changeDecorations((function(t){e._editor.changeViewZones((function(n){e._disposeAllLenses(t,n)}))})),t.restore(e._editor)}else e._disposeAllLenses(void 0,void 0)}))),this._localToDispose.add(this._editor.onMouseDown((function(t){if(9===t.target.type){var n=t.target.element;if("SPAN"===(null===n||void 0===n?void 0:n.tagName)&&(n=n.parentElement),"A"===(null===n||void 0===n?void 0:n.tagName)){var o,i=(0,s.Z)(e._lenses);try{for(i.s();!(o=i.n()).done;){var r=o.value.getCommand(n);if(r){var c;(c=e._commandService).executeCommand.apply(c,[r.id].concat((0,a.Z)(r.arguments||[]))).catch((function(t){return e._notificationService.error(t)}));break}}}catch(g){i.e(g)}finally{i.f()}}}}))),u.schedule()}else n&&this._localToDispose.add((0,l.Vg)((function(){var o=e._codeLensCache.get(t);n===o&&(e._codeLensCache.delete(t),e._onModelChange())}),3e4))}}},{key:"_disposeAllLenses",value:function(e,t){var n,o=new Q,i=(0,s.Z)(this._lenses);try{for(i.s();!(n=i.n()).done;){n.value.dispose(o,t)}}catch(r){i.e(r)}finally{i.f()}e&&o.commit(e),this._lenses.length=0}},{key:"_renderCodeLensSymbols",value:function(e){var t=this;if(this._editor.hasModel()){var n,o,i=this._editor.getModel().getLineCount(),r=[],a=(0,s.Z)(e.lenses);try{for(a.s();!(o=a.n()).done;){var c=o.value,u=c.symbol.range.startLineNumber;u<1||u>i||(n&&n[n.length-1].symbol.range.startLineNumber===u?n.push(c):(n=[c],r.push(n)))}}catch(h){a.e(h)}finally{a.f()}if(r.length||this._lenses.length){var l=f.Z.capture(this._editor),d=this._getLayoutInfo();this._editor.changeDecorations((function(e){t._editor.changeViewZones((function(n){for(var o=new Q,i=0,a=0;a<r.length&&i<t._lenses.length;){var s=r[a][0].symbol.range.startLineNumber,c=t._lenses[i].getLineNumber();c<s?(t._lenses[i].dispose(o,n),t._lenses.splice(i,1)):c===s?(t._lenses[i].updateCodeLensSymbols(r[a],o),a++,i++):(t._lenses.splice(i,0,new j(r[a],t._editor,o,n,d.codeLensHeight,(function(){return t._resolveCodeLensesInViewportSoon()}))),i++,a++)}for(;i<t._lenses.length;)t._lenses[i].dispose(o,n),t._lenses.splice(i,1);for(;a<r.length;)t._lenses.push(new j(r[a],t._editor,o,n,d.codeLensHeight,(function(){return t._resolveCodeLensesInViewportSoon()}))),a++;o.commit(e)}))})),l.restore(this._editor)}}}},{key:"_resolveCodeLensesInViewportSoon",value:function(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}},{key:"_resolveCodeLensesInViewport",value:function(){var e,t=this;null===(e=this._resolveCodeLensesPromise)||void 0===e||e.cancel(),this._resolveCodeLensesPromise=void 0;var n=this._editor.getModel();if(n){var o=[],i=[];if(this._lenses.forEach((function(e){var t=e.computeIfNecessary(n);t&&(o.push(t),i.push(e))})),0!==o.length){var r=Date.now(),a=(0,l.PG)((function(e){var t=o.map((function(t,o){var r=new Array(t.length),a=t.map((function(t,o){return t.symbol.command||"function"!==typeof t.provider.resolveCodeLens?(r[o]=t.symbol,Promise.resolve(void 0)):Promise.resolve(t.provider.resolveCodeLens(n,t.symbol,e)).then((function(e){r[o]=e}),d.Cp)}));return Promise.all(a).then((function(){e.isCancellationRequested||i[o].isDisposed()||i[o].updateCommands(r)}))}));return Promise.all(t)}));this._resolveCodeLensesPromise=a,this._resolveCodeLensesPromise.then((function(){var e=t._resolveCodeLensesDebounce.update(n,Date.now()-r);t._resolveCodeLensesScheduler.delay=e,t._currentCodeLensModel&&t._codeLensCache.put(n,t._currentCodeLensModel),t._oldCodeLensModels.clear(),a===t._resolveCodeLensesPromise&&(t._resolveCodeLensesPromise=void 0)}),(function(e){(0,d.dL)(e),a===t._resolveCodeLensesPromise&&(t._resolveCodeLensesPromise=void 0)}))}}}},{key:"getModel",value:function(){var e;return X(this,void 0,void 0,(0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getCodeLensModelPromise;case 2:return t.next=4,this._resolveCodeLensesPromise;case 4:return t.abrupt("return",(null===(e=this._currentCodeLensModel)||void 0===e?void 0:e.isDisposed)?void 0:this._currentCodeLensModel);case 5:case"end":return t.stop()}}),t,this)})))}}]),e}();$.ID="css.editor.codeLens",$=G([J(1,k.p),J(2,Y.A),J(3,b.H),J(4,q.lT),J(5,O)],$),(0,g._K)($.ID,$,1),(0,g.Qr)(function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(){return(0,c.Z)(this,n),t.call(this,{id:"codelens.showLensesInCurrentLine",precondition:v.u.hasCodeLensProvider,label:(0,z.NC)("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}return(0,u.Z)(n,[{key:"run",value:function(e,t){return X(this,void 0,void 0,(0,r.Z)().mark((function n(){var o,i,c,u,l,d,h,f,g,p,v,m,_,C;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.hasModel()){n.next=2;break}return n.abrupt("return");case 2:if(o=e.get(K.eJ),i=e.get(b.H),c=e.get(q.lT),u=t.getSelection().positionLineNumber,l=t.getContribution($.ID)){n.next=9;break}return n.abrupt("return");case 9:return n.next=11,l.getModel();case 11:if(d=n.sent){n.next=14;break}return n.abrupt("return");case 14:h=[],f=(0,s.Z)(d.lenses);try{for(f.s();!(g=f.n()).done;)(p=g.value).symbol.command&&p.symbol.range.startLineNumber===u&&h.push({label:p.symbol.command.title,command:p.symbol.command})}catch(r){f.e(r)}finally{f.f()}if(0!==h.length){n.next=19;break}return n.abrupt("return");case 19:return n.next=21,o.pick(h,{canPickMany:!1,placeHolder:(0,z.NC)("placeHolder","Select a command")});case 21:if(v=n.sent){n.next=24;break}return n.abrupt("return");case 24:if(m=v.command,!d.isDisposed){n.next=33;break}return n.next=28,l.getModel();case 28:if(_=n.sent,C=null===_||void 0===_?void 0:_.lenses.find((function(e){var t;return e.symbol.range.startLineNumber===u&&(null===(t=e.symbol.command)||void 0===t?void 0:t.title)===m.title})),C&&C.symbol.command){n.next=32;break}return n.abrupt("return");case 32:m=C.symbol.command;case 33:return n.prev=33,n.next=36,i.executeCommand.apply(i,[m.id].concat((0,a.Z)(m.arguments||[])));case 36:n.next=41;break;case 38:n.prev=38,n.t0=n.catch(33),c.error(n.t0);case 41:case"end":return n.stop()}}),n,null,[[33,38]])})))}}]),n}(g.R6))},53921:function(e,t,n){n.d(t,{E:function(){return C},R:function(){return y}});var o=n(29439),i=n(93433),r=n(37762),a=n(15671),s=n(43144),c=n(74165),u=n(7388),l=n(74146),d=n(38821),h=n(17429),f=n(26246),g=n(99740),p=n(65441),v=n(2587),m=n(77819),_=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(t){r(t)}}function s(e){try{c(o.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))};function C(e,t,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return _(this,void 0,void 0,(0,c.Z)().mark((function i(){return(0,c.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",x(new b,e,t,n,o));case 1:case"end":return i.stop()}}),i)})))}function y(e,t,n,o){return Promise.resolve(n.provideColorPresentations(e,t,o))}var b=function(){function e(){(0,a.Z)(this,e)}return(0,s.Z)(e,[{key:"compute",value:function(e,t,n,o){return _(this,void 0,void 0,(0,c.Z)().mark((function i(){var a,s,u,l;return(0,c.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.provideDocumentColors(t,n);case 2:if(a=i.sent,Array.isArray(a)){s=(0,r.Z)(a);try{for(s.s();!(u=s.n()).done;)l=u.value,o.push({colorInfo:l,provider:e})}catch(c){s.e(c)}finally{s.f()}}return i.abrupt("return",Array.isArray(a));case 5:case"end":return i.stop()}}),i)})))}}]),e}(),k=function(){function e(){(0,a.Z)(this,e)}return(0,s.Z)(e,[{key:"compute",value:function(e,t,n,o){return _(this,void 0,void 0,(0,c.Z)().mark((function i(){var a,s,u,l;return(0,c.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.provideDocumentColors(t,n);case 2:if(a=i.sent,Array.isArray(a)){s=(0,r.Z)(a);try{for(s.s();!(u=s.n()).done;)l=u.value,o.push({range:l.range,color:[l.color.red,l.color.green,l.color.blue,l.color.alpha]})}catch(c){s.e(c)}finally{s.f()}}return i.abrupt("return",Array.isArray(a));case 5:case"end":return i.stop()}}),i)})))}}]),e}(),w=function(){function e(t){(0,a.Z)(this,e),this.colorInfo=t}return(0,s.Z)(e,[{key:"compute",value:function(e,t,n,o){return _(this,void 0,void 0,(0,c.Z)().mark((function n(){var r;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.provideColorPresentations(t,this.colorInfo,u.T.None);case 2:return r=n.sent,Array.isArray(r)&&o.push.apply(o,(0,i.Z)(r)),n.abrupt("return",Array.isArray(r));case 5:case"end":return n.stop()}}),n,this)})))}}]),e}();function x(e,t,n,o,i){return _(this,void 0,void 0,(0,c.Z)().mark((function r(){var a,s,u,d,h,f;return(0,c.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=!1,u=[],d=t.ordered(n),h=d.length-1;case 4:if(!(h>=0)){r.next=23;break}if(!((f=d[h])instanceof v.G)){r.next=10;break}s=f,r.next=20;break;case 10:return r.prev=10,r.next=13,e.compute(f,n,o,u);case 13:if(!r.sent){r.next=15;break}a=!0;case 15:r.next=20;break;case 17:r.prev=17,r.t0=r.catch(10),(0,l.Cp)(r.t0);case 20:h--,r.next=4;break;case 23:if(!a){r.next=25;break}return r.abrupt("return",u);case 25:if(!s||!i){r.next=29;break}return r.next=28,e.compute(s,n,o,u);case 28:return r.abrupt("return",u);case 29:return r.abrupt("return",[]);case 30:case"end":return r.stop()}}),r,null,[[10,17]])})))}function S(e,t){var n=e.get(p.p).colorProvider,o=e.get(f.q).getModel(t);if(!o)throw(0,l.b1)();return{model:o,colorProviderRegistry:n,isDefaultColorDecoratorsEnabled:e.get(m.Ui).getValue("editor.defaultColorDecorators",{resource:t})}}g.P.registerCommand("_executeDocumentColorProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var i=n[0];if(!(i instanceof d.o))throw(0,l.b1)();var r=S(e,i),a=r.model,s=r.colorProviderRegistry,c=r.isDefaultColorDecoratorsEnabled;return x(new k,s,a,u.T.None,c)})),g.P.registerCommand("_executeColorPresentationProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=n[0],a=n[1],s=a.uri,c=a.range;if(!(s instanceof d.o)||!Array.isArray(r)||4!==r.length||!h.e.isIRange(c))throw(0,l.b1)();var f=S(e,s),g=f.model,p=f.colorProviderRegistry,v=f.isDefaultColorDecoratorsEnabled,m=(0,o.Z)(r,4),_=m[0],C=m[1],y=m[2],b=m[3];return x(new w({range:c,color:{red:_,green:C,blue:y,alpha:b}}),p,g,u.T.None,v)}))},22667:function(e,t,n){n.r(t),n.d(t,{ColorContribution:function(){return v}});var o=n(15671),i=n(43144),r=n(11752),a=n(61120),s=n(60136),c=n(27277),u=n(65096),l=n(95253),d=n(17429),h=n(732),f=n(4222),g=n(29596),p=n(24250),v=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this))._editor=e,i._register(e.onMouseDown((function(e){return i.onMouseDown(e)}))),i}return(0,i.Z)(n,[{key:"dispose",value:function(){(0,r.Z)((0,a.Z)(n.prototype),"dispose",this).call(this)}},{key:"onMouseDown",value:function(e){var t=this._editor.getOption(146);if("click"===t||"clickAndHover"===t){var n=e.target;if(6===n.type&&n.detail.injectedText&&n.detail.injectedText.options.attachedData===h.Ak&&n.range){var o=this._editor.getContribution(g.ModesHoverController.ID);if(o&&!o.isColorPickerVisible){var i=new d.e(n.range.startLineNumber,n.range.startColumn+1,n.range.endLineNumber,n.range.endColumn+1);o.showContentHover(i,1,0,!1,!0)}}}}}]),n}(u.JT);v.ID="editor.contrib.colorContribution",(0,l._K)(v.ID,v,2),p.Ae.register(f.nh)},732:function(e,t,n){n.d(t,{Ak:function(){return P},if:function(){return A}});var o,i=n(74165),r=n(15671),a=n(43144),s=n(11752),c=n(61120),u=n(60136),l=n(27277),d=n(71049),h=n(40476),f=n(74146),g=n(13880),p=n(65096),v=n(48497),m=n(31906),_=n(47583),C=n(95253),y=n(17429),b=n(78519),k=n(68200),w=n(65441),x=n(53921),S=n(77819),N=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Z=function(e,t){return function(n,o){t(n,o,e)}},L=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(t){r(t)}}function s(e){try{c(o.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},P=Object.create({}),A=o=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e,i,a,s){var c;return(0,r.Z)(this,n),(c=t.call(this))._editor=e,c._configurationService=i,c._languageFeaturesService=a,c._localToDispose=c._register(new p.SL),c._decorationsIds=[],c._colorDatas=new Map,c._colorDecoratorIds=c._editor.createDecorationsCollection(),c._ruleFactory=new _.t7(c._editor),c._decoratorLimitReporter=new D,c._colorDecorationClassRefs=c._register(new p.SL),c._debounceInformation=s.for(a.colorProvider,"Document Colors",{min:o.RECOMPUTE_TIME}),c._register(e.onDidChangeModel((function(){c._isColorDecoratorsEnabled=c.isEnabled(),c.updateColors()}))),c._register(e.onDidChangeModelLanguage((function(){return c.updateColors()}))),c._register(a.colorProvider.onDidChange((function(){return c.updateColors()}))),c._register(e.onDidChangeConfiguration((function(e){var t=c._isColorDecoratorsEnabled;c._isColorDecoratorsEnabled=c.isEnabled(),c._isDefaultColorDecoratorsEnabled=c._editor.getOption(145);var n=t!==c._isColorDecoratorsEnabled||e.hasChanged(21),o=e.hasChanged(145);(n||o)&&(c._isColorDecoratorsEnabled?c.updateColors():c.removeAllDecorations())}))),c._timeoutTimer=null,c._computePromise=null,c._isColorDecoratorsEnabled=c.isEnabled(),c._isDefaultColorDecoratorsEnabled=c._editor.getOption(145),c.updateColors(),c}return(0,a.Z)(n,[{key:"isEnabled",value:function(){var e=this._editor.getModel();if(!e)return!1;var t=e.getLanguageId(),n=this._configurationService.getValue(t);if(n&&"object"===typeof n){var o=n.colorDecorators;if(o&&void 0!==o.enable&&!o.enable)return o.enable}return this._editor.getOption(20)}},{key:"dispose",value:function(){this.stop(),this.removeAllDecorations(),(0,s.Z)((0,c.Z)(n.prototype),"dispose",this).call(this)}},{key:"updateColors",value:function(){var e=this;if(this.stop(),this._isColorDecoratorsEnabled){var t=this._editor.getModel();t&&this._languageFeaturesService.colorProvider.has(t)&&(this._localToDispose.add(this._editor.onDidChangeModelContent((function(){e._timeoutTimer||(e._timeoutTimer=new d._F,e._timeoutTimer.cancelAndSet((function(){e._timeoutTimer=null,e.beginCompute()}),e._debounceInformation.get(t)))}))),this.beginCompute())}}},{key:"beginCompute",value:function(){return L(this,void 0,void 0,(0,i.Z)().mark((function e(){var t,n=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._computePromise=(0,d.PG)((function(e){return L(n,void 0,void 0,(0,i.Z)().mark((function t(){var n,o,r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this._editor.getModel()){t.next=3;break}return t.abrupt("return",[]);case 3:return o=new v.G(!1),t.next=6,(0,x.E)(this._languageFeaturesService.colorProvider,n,e,this._isDefaultColorDecoratorsEnabled);case 6:return r=t.sent,this._debounceInformation.update(n,o.elapsed()),t.abrupt("return",r);case 9:case"end":return t.stop()}}),t,this)})))})),e.prev=1,e.next=4,this._computePromise;case 4:t=e.sent,this.updateDecorations(t),this.updateColorDecorators(t),this._computePromise=null,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),(0,f.dL)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,10]])})))}},{key:"stop",value:function(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}},{key:"updateDecorations",value:function(e){var t=this,n=e.map((function(e){return{range:{startLineNumber:e.colorInfo.range.startLineNumber,startColumn:e.colorInfo.range.startColumn,endLineNumber:e.colorInfo.range.endLineNumber,endColumn:e.colorInfo.range.endColumn},options:b.qx.EMPTY}}));this._editor.changeDecorations((function(o){t._decorationsIds=o.deltaDecorations(t._decorationsIds,n),t._colorDatas=new Map,t._decorationsIds.forEach((function(n,o){return t._colorDatas.set(n,e[o])}))}))}},{key:"updateColorDecorators",value:function(e){this._colorDecorationClassRefs.clear();for(var t=[],n=this._editor.getOption(21),o=0;o<e.length&&t.length<n;o++){var i=e[o].colorInfo.color,r=i.red,a=i.green,s=i.blue,c=i.alpha,u=new h.VS(Math.round(255*r),Math.round(255*a),Math.round(255*s),c),l="rgba(".concat(u.r,", ").concat(u.g,", ").concat(u.b,", ").concat(u.a,")"),d=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:l}));t.push({range:{startLineNumber:e[o].colorInfo.range.startLineNumber,startColumn:e[o].colorInfo.range.startColumn,endLineNumber:e[o].colorInfo.range.endLineNumber,endColumn:e[o].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:m.B4,inlineClassName:"".concat(d.className," colorpicker-color-decoration"),inlineClassNameAffectsLetterSpacing:!0,attachedData:P}}})}var f=n<e.length&&n;this._decoratorLimitReporter.update(e.length,f),this._colorDecoratorIds.set(t)}},{key:"removeAllDecorations",value:function(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}},{key:"getColorData",value:function(e){var t=this,n=this._editor.getModel();if(!n)return null;var o=n.getDecorationsInRange(y.e.fromPositions(e,e)).filter((function(e){return t._colorDatas.has(e.id)}));return 0===o.length?null:this._colorDatas.get(o[0].id)}},{key:"isColorDecoration",value:function(e){return this._colorDecoratorIds.has(e)}}],[{key:"get",value:function(e){return e.getContribution(this.ID)}}]),n}(p.JT);A.ID="editor.contrib.colorDetector",A.RECOMPUTE_TIME=1e3,A=o=N([Z(1,S.Ui),Z(2,w.p),Z(3,k.A)],A);var D=function(){function e(){(0,r.Z)(this,e),this._onDidChange=new g.Q5,this._computed=0,this._limited=!1}return(0,a.Z)(e,[{key:"update",value:function(e,t){e===this._computed&&t===this._limited||(this._computed=e,this._limited=t,this._onDidChange.fire())}}]),e}();(0,C._K)(A.ID,A,1)},4222:function(e,t,n){n.d(t,{nh:function(){return z},PQ:function(){return K}});var o=n(93433),i=n(74165),r=n(37762),a=n(15671),s=n(43144),c=n(71049),u=n(7388),l=n(40476),d=n(65096),h=n(17429),f=n(53921),g=n(732),p=n(13880),v=function(){function e(t,n,o){(0,a.Z)(this,e),this.presentationIndex=o,this._onColorFlushed=new p.Q5,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new p.Q5,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new p.Q5,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=t,this._color=t,this._colorPresentations=n}return(0,s.Z)(e,[{key:"color",get:function(){return this._color},set:function(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}},{key:"presentation",get:function(){return this.colorPresentations[this.presentationIndex]}},{key:"colorPresentations",get:function(){return this._colorPresentations},set:function(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}},{key:"selectNextColorPresentation",value:function(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}},{key:"guessColorPresentation",value:function(e,t){for(var n=-1,o=0;o<this.colorPresentations.length;o++)if(t.toLowerCase()===this.colorPresentations[o].label){n=o;break}if(-1===n)for(var i=t.split("(")[0].toLowerCase(),r=0;r<this.colorPresentations.length;r++)if(this.colorPresentations[r].label.toLowerCase().startsWith(i)){n=r;break}-1!==n&&n!==this.presentationIndex&&(this.presentationIndex=n,this._onDidChangePresentation.fire(this.presentation))}},{key:"flushColor",value:function(){this._onColorFlushed.fire(this._color)}}]),e}(),m=n(11752),_=n(61120),C=n(97326),y=n(60136),b=n(27277),k=n(30620),w=n(32959),x=n(40052),S=n(13752),N=n(77409),Z=n(79730),L=(n(1061),n(18420)),P=n(43980),A=n(87288),D=w.$,I=function(e){(0,y.Z)(n,e);var t=(0,b.Z)(n);function n(e,o,i){var r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,a.Z)(this,n),(r=t.call(this)).model=o,r.showingStandaloneColorPicker=s,r._closeButton=null,r._domNode=D(".colorpicker-header"),w.append(e,r._domNode),r._pickedColorNode=w.append(r._domNode,D(".picked-color")),w.append(r._pickedColorNode,D("span.codicon.codicon-color-mode")),r._pickedColorPresentation=w.append(r._pickedColorNode,document.createElement("span")),r._pickedColorPresentation.classList.add("picked-color-presentation");var c=(0,L.NC)("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");return r._pickedColorNode.setAttribute("title",c),r._originalColorNode=w.append(r._domNode,D(".original-color")),r._originalColorNode.style.backgroundColor=l.Il.Format.CSS.format(r.model.originalColor)||"",r.backgroundColor=i.getColorTheme().getColor(P.yJx)||l.Il.white,r._register(i.onDidColorThemeChange((function(e){r.backgroundColor=e.getColor(P.yJx)||l.Il.white}))),r._register(w.addDisposableListener(r._pickedColorNode,w.EventType.CLICK,(function(){return r.model.selectNextColorPresentation()}))),r._register(w.addDisposableListener(r._originalColorNode,w.EventType.CLICK,(function(){r.model.color=r.model.originalColor,r.model.flushColor()}))),r._register(o.onDidChangeColor(r.onDidChangeColor,(0,C.Z)(r))),r._register(o.onDidChangePresentation(r.onDidChangePresentation,(0,C.Z)(r))),r._pickedColorNode.style.backgroundColor=l.Il.Format.CSS.format(o.color)||"",r._pickedColorNode.classList.toggle("light",o.color.rgba.a<.5?r.backgroundColor.isLighter():o.color.isLighter()),r.onDidChangeColor(r.model.color),r.showingStandaloneColorPicker&&(r._domNode.classList.add("standalone-colorpicker"),r._closeButton=r._register(new M(r._domNode))),r}return(0,s.Z)(n,[{key:"closeButton",get:function(){return this._closeButton}},{key:"pickedColorNode",get:function(){return this._pickedColorNode}},{key:"originalColorNode",get:function(){return this._originalColorNode}},{key:"onDidChangeColor",value:function(e){this._pickedColorNode.style.backgroundColor=l.Il.Format.CSS.format(e)||"",this._pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}},{key:"onDidChangePresentation",value:function(){this._pickedColorPresentation.textContent=this.model.presentation?this.model.presentation.label:""}}]),n}(d.JT),M=function(e){(0,y.Z)(n,e);var t=(0,b.Z)(n);function n(e){var o;(0,a.Z)(this,n),(o=t.call(this))._onClicked=o._register(new p.Q5),o.onClicked=o._onClicked.event,o._button=document.createElement("div"),o._button.classList.add("close-button"),w.append(e,o._button);var i=document.createElement("div");return i.classList.add("close-button-inner-div"),w.append(o._button,i),w.append(i,D(".button"+Z.k.asCSSSelector((0,A.q5)("color-picker-close",N.l.close,(0,L.NC)("closeIcon","Icon to close the color picker"))))).classList.add("close-icon"),o._button.onclick=function(){o._onClicked.fire()},o}return(0,s.Z)(n)}(d.JT),E=function(e){(0,y.Z)(n,e);var t=(0,b.Z)(n);function n(e,o,i){var r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,a.Z)(this,n),(r=t.call(this)).model=o,r.pixelRatio=i,r._insertButton=null,r._domNode=D(".colorpicker-body"),w.append(e,r._domNode),r._saturationBox=new O(r._domNode,r.model,r.pixelRatio),r._register(r._saturationBox),r._register(r._saturationBox.onDidChange(r.onDidSaturationValueChange,(0,C.Z)(r))),r._register(r._saturationBox.onColorFlushed(r.flushColor,(0,C.Z)(r))),r._opacityStrip=new R(r._domNode,r.model,s),r._register(r._opacityStrip),r._register(r._opacityStrip.onDidChange(r.onDidOpacityChange,(0,C.Z)(r))),r._register(r._opacityStrip.onColorFlushed(r.flushColor,(0,C.Z)(r))),r._hueStrip=new F(r._domNode,r.model,s),r._register(r._hueStrip),r._register(r._hueStrip.onDidChange(r.onDidHueChange,(0,C.Z)(r))),r._register(r._hueStrip.onColorFlushed(r.flushColor,(0,C.Z)(r))),s&&(r._insertButton=r._register(new B(r._domNode)),r._domNode.classList.add("standalone-colorpicker")),r}return(0,s.Z)(n,[{key:"flushColor",value:function(){this.model.flushColor()}},{key:"onDidSaturationValueChange",value:function(e){var t=e.s,n=e.v,o=this.model.color.hsva;this.model.color=new l.Il(new l.tx(o.h,t,n,o.a))}},{key:"onDidOpacityChange",value:function(e){var t=this.model.color.hsva;this.model.color=new l.Il(new l.tx(t.h,t.s,t.v,e))}},{key:"onDidHueChange",value:function(e){var t=this.model.color.hsva,n=360*(1-e);this.model.color=new l.Il(new l.tx(360===n?0:n,t.s,t.v,t.a))}},{key:"domNode",get:function(){return this._domNode}},{key:"saturationBox",get:function(){return this._saturationBox}},{key:"enterButton",get:function(){return this._insertButton}},{key:"layout",value:function(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()}}]),n}(d.JT),O=function(e){(0,y.Z)(n,e);var t=(0,b.Z)(n);function n(e,o,i){var r;return(0,a.Z)(this,n),(r=t.call(this)).model=o,r.pixelRatio=i,r._onDidChange=new p.Q5,r.onDidChange=r._onDidChange.event,r._onColorFlushed=new p.Q5,r.onColorFlushed=r._onColorFlushed.event,r._domNode=D(".saturation-wrap"),w.append(e,r._domNode),r._canvas=document.createElement("canvas"),r._canvas.className="saturation-box",w.append(r._domNode,r._canvas),r.selection=D(".saturation-selection"),w.append(r._domNode,r.selection),r.layout(),r._register(w.addDisposableListener(r._domNode,w.EventType.POINTER_DOWN,(function(e){return r.onPointerDown(e)}))),r._register(r.model.onDidChangeColor(r.onDidChangeColor,(0,C.Z)(r))),r.monitor=null,r}return(0,s.Z)(n,[{key:"domNode",get:function(){return this._domNode}},{key:"onPointerDown",value:function(e){var t=this;if(e.target&&e.target instanceof Element){this.monitor=this._register(new x.C);var n=w.getDomNodePagePosition(this._domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,(function(e){return t.onDidChangePosition(e.pageX-n.left,e.pageY-n.top)}),(function(){return null}));var o=w.addDisposableListener(e.target.ownerDocument,w.EventType.POINTER_UP,(function(){t._onColorFlushed.fire(),o.dispose(),t.monitor&&(t.monitor.stopMonitoring(!0),t.monitor=null)}),!0)}}},{key:"onDidChangePosition",value:function(e,t){var n=Math.max(0,Math.min(1,e/this.width)),o=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(n,o),this._onDidChange.fire({s:n,v:o})}},{key:"layout",value:function(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();var e=this.model.color.hsva;this.paintSelection(e.s,e.v)}},{key:"paint",value:function(){var e=this.model.color.hsva,t=new l.Il(new l.tx(e.h,1,1,1)),n=this._canvas.getContext("2d"),o=n.createLinearGradient(0,0,this._canvas.width,0);o.addColorStop(0,"rgba(255, 255, 255, 1)"),o.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),o.addColorStop(1,"rgba(255, 255, 255, 0)");var i=n.createLinearGradient(0,0,0,this._canvas.height);i.addColorStop(0,"rgba(0, 0, 0, 0)"),i.addColorStop(1,"rgba(0, 0, 0, 1)"),n.rect(0,0,this._canvas.width,this._canvas.height),n.fillStyle=l.Il.Format.CSS.format(t),n.fill(),n.fillStyle=o,n.fill(),n.fillStyle=i,n.fill()}},{key:"paintSelection",value:function(e,t){this.selection.style.left="".concat(e*this.width,"px"),this.selection.style.top="".concat(this.height-t*this.height,"px")}},{key:"onDidChangeColor",value:function(e){if(!this.monitor||!this.monitor.isMonitoring()){this.paint();var t=e.hsva;this.paintSelection(t.s,t.v)}}}]),n}(d.JT),T=function(e){(0,y.Z)(n,e);var t=(0,b.Z)(n);function n(e,o){var i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,a.Z)(this,n),(i=t.call(this)).model=o,i._onDidChange=new p.Q5,i.onDidChange=i._onDidChange.event,i._onColorFlushed=new p.Q5,i.onColorFlushed=i._onColorFlushed.event,r?(i.domNode=w.append(e,D(".standalone-strip")),i.overlay=w.append(i.domNode,D(".standalone-overlay"))):(i.domNode=w.append(e,D(".strip")),i.overlay=w.append(i.domNode,D(".overlay"))),i.slider=w.append(i.domNode,D(".slider")),i.slider.style.top="0px",i._register(w.addDisposableListener(i.domNode,w.EventType.POINTER_DOWN,(function(e){return i.onPointerDown(e)}))),i._register(o.onDidChangeColor(i.onDidChangeColor,(0,C.Z)(i))),i.layout(),i}return(0,s.Z)(n,[{key:"layout",value:function(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;var e=this.getValue(this.model.color);this.updateSliderPosition(e)}},{key:"onDidChangeColor",value:function(e){var t=this.getValue(e);this.updateSliderPosition(t)}},{key:"onPointerDown",value:function(e){var t=this;if(e.target&&e.target instanceof Element){var n=this._register(new x.C),o=w.getDomNodePagePosition(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),n.startMonitoring(e.target,e.pointerId,e.buttons,(function(e){return t.onDidChangeTop(e.pageY-o.top)}),(function(){return null}));var i=w.addDisposableListener(e.target.ownerDocument,w.EventType.POINTER_UP,(function(){t._onColorFlushed.fire(),i.dispose(),n.stopMonitoring(!0),t.domNode.classList.remove("grabbing")}),!0)}}},{key:"onDidChangeTop",value:function(e){var t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}},{key:"updateSliderPosition",value:function(e){this.slider.style.top="".concat((1-e)*this.height,"px")}}]),n}(d.JT),R=function(e){(0,y.Z)(n,e);var t=(0,b.Z)(n);function n(e,o){var i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,a.Z)(this,n),(i=t.call(this,e,o,r)).domNode.classList.add("opacity-strip"),i.onDidChangeColor(i.model.color),i}return(0,s.Z)(n,[{key:"onDidChangeColor",value:function(e){(0,m.Z)((0,_.Z)(n.prototype),"onDidChangeColor",this).call(this,e);var t=e.rgba,o=t.r,i=t.g,r=t.b,a=new l.Il(new l.VS(o,i,r,1)),s=new l.Il(new l.VS(o,i,r,0));this.overlay.style.background="linear-gradient(to bottom, ".concat(a," 0%, ").concat(s," 100%)")}},{key:"getValue",value:function(e){return e.hsva.a}}]),n}(T),F=function(e){(0,y.Z)(n,e);var t=(0,b.Z)(n);function n(e,o){var i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,a.Z)(this,n),(i=t.call(this,e,o,r)).domNode.classList.add("hue-strip"),i}return(0,s.Z)(n,[{key:"getValue",value:function(e){return 1-e.hsva.h/360}}]),n}(T),B=function(e){(0,y.Z)(n,e);var t=(0,b.Z)(n);function n(e){var o;return(0,a.Z)(this,n),(o=t.call(this))._onClicked=o._register(new p.Q5),o.onClicked=o._onClicked.event,o._button=w.append(e,document.createElement("button")),o._button.classList.add("insert-button"),o._button.textContent="Insert",o._button.onclick=function(e){o._onClicked.fire()},o}return(0,s.Z)(n,[{key:"button",get:function(){return this._button}}]),n}(d.JT),H=function(e){(0,y.Z)(n,e);var t=(0,b.Z)(n);function n(e,o,i,r){var s,c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,a.Z)(this,n),(s=t.call(this)).model=o,s.pixelRatio=i,s._register(k.Tz.onDidChange((function(){return s.layout()})));var u=D(".colorpicker-widget");return e.appendChild(u),s.header=s._register(new I(u,s.model,r,c)),s.body=s._register(new E(u,s.model,s.pixelRatio,c)),s}return(0,s.Z)(n,[{key:"layout",value:function(){this.body.layout()}}]),n}(S.$),W=n(41335),V=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Q=function(e,t){return function(n,o){t(n,o,e)}},U=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(t){r(t)}}function s(e){try{c(o.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},j=function(){function e(t,n,o,i){(0,a.Z)(this,e),this.owner=t,this.range=n,this.model=o,this.provider=i,this.forceShowAtRange=!0}return(0,s.Z)(e,[{key:"isValidForHoverAnchor",value:function(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}]),e}(),z=function(){function e(t,n){(0,a.Z)(this,e),this._editor=t,this._themeService=n,this.hoverOrdinal=2}return(0,s.Z)(e,[{key:"computeSync",value:function(e,t){return[]}},{key:"computeAsync",value:function(e,t,n){return c.Aq.fromPromise(this._computeAsync(e,t,n))}},{key:"_computeAsync",value:function(e,t,n){return U(this,void 0,void 0,(0,i.Z)().mark((function e(){var n,o,a,s,c,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._editor.hasModel()){e.next=2;break}return e.abrupt("return",[]);case 2:if(n=g.if.get(this._editor)){e.next=5;break}return e.abrupt("return",[]);case 5:o=(0,r.Z)(t),e.prev=6,o.s();case 8:if((a=o.n()).done){e.next=20;break}if(s=a.value,n.isColorDecoration(s)){e.next=12;break}return e.abrupt("continue",18);case 12:if(!(c=n.getColorData(s.range.getStartPosition()))){e.next=18;break}return e.next=16,Y(this,this._editor.getModel(),c.colorInfo,c.provider);case 16:return u=e.sent,e.abrupt("return",[u]);case 18:e.next=8;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(6),o.e(e.t0);case 25:return e.prev=25,o.f(),e.finish(25);case 28:return e.abrupt("return",[]);case 29:case"end":return e.stop()}}),e,this,[[6,22,25,28]])})))}},{key:"renderHoverParts",value:function(e,t){return G(this,this._editor,this._themeService,t,e)}}]),e}();z=V([Q(1,W.XE)],z);var q=(0,s.Z)((function e(t,n,o,i){(0,a.Z)(this,e),this.owner=t,this.range=n,this.model=o,this.provider=i})),K=function(){function e(t,n){(0,a.Z)(this,e),this._editor=t,this._themeService=n,this._color=null}return(0,s.Z)(e,[{key:"createColorHover",value:function(e,t,n){return U(this,void 0,void 0,(0,i.Z)().mark((function o(){var a,s,c,l,d,p,v,m,_,C;return(0,i.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(this._editor.hasModel()){o.next=2;break}return o.abrupt("return",null);case 2:if(g.if.get(this._editor)){o.next=5;break}return o.abrupt("return",null);case 5:return o.next=7,(0,f.E)(n,this._editor.getModel(),u.T.None);case 7:a=o.sent,s=null,c=null,l=(0,r.Z)(a);try{for(l.s();!(d=l.n()).done;)p=d.value,v=p.colorInfo,h.e.containsRange(v.range,e.range)&&(s=v,c=p.provider)}catch(i){l.e(i)}finally{l.f()}return m=null!==s&&void 0!==s?s:e,_=null!==c&&void 0!==c?c:t,C=!!s,o.next=17,Y(this,this._editor.getModel(),m,_);case 17:return o.t0=o.sent,o.t1=C,o.abrupt("return",{colorHover:o.t0,foundInEditor:o.t1});case 20:case"end":return o.stop()}}),o,this)})))}},{key:"updateEditorModel",value:function(e){return U(this,void 0,void 0,(0,i.Z)().mark((function t(){var n,o;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._editor.hasModel()){t.next=2;break}return t.abrupt("return");case 2:if(n=e.model,o=new h.e(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn),!this._color){t.next=8;break}return t.next=7,X(this._editor.getModel(),n,this._color,o,e);case 7:o=J(this._editor,o,n);case 8:case"end":return t.stop()}}),t,this)})))}},{key:"renderHoverParts",value:function(e,t){return G(this,this._editor,this._themeService,t,e)}},{key:"color",get:function(){return this._color},set:function(e){this._color=e}}]),e}();function Y(e,t,n,o){return U(this,void 0,void 0,(0,i.Z)().mark((function r(){var a,s,c,d,g,p,m,_,C,y;return(0,i.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.getValueInRange(n.range),s=n.color,c=s.red,d=s.green,g=s.blue,p=s.alpha,m=new l.VS(Math.round(255*c),Math.round(255*d),Math.round(255*g),p),_=new l.Il(m),i.next=6,(0,f.R)(t,n,o,u.T.None);case 6:if(C=i.sent,(y=new v(_,[],0)).colorPresentations=C||[],y.guessColorPresentation(_,a),!(e instanceof z)){i.next=14;break}return i.abrupt("return",new j(e,h.e.lift(n.range),y,o));case 14:return i.abrupt("return",new q(e,h.e.lift(n.range),y,o));case 15:case"end":return i.stop()}}),r)})))}function G(e,t,n,o,r){var a=this;if(0===o.length||!t.hasModel())return d.JT.None;if(r.setMinimumDimensions){var s=t.getOption(66)+8;r.setMinimumDimensions(new w.Dimension(302,s))}var c=new d.SL,u=o[0],l=t.getModel(),f=u.model,g=c.add(new H(r.fragment,f,t.getOption(141),n,e instanceof K));r.setColorPicker(g);var p=!1,v=new h.e(u.range.startLineNumber,u.range.startColumn,u.range.endLineNumber,u.range.endColumn);if(e instanceof K){var m=o[0].model.color;e.color=m,X(l,f,m,v,u),c.add(f.onColorFlushed((function(t){e.color=t})))}else c.add(f.onColorFlushed((function(e){return U(a,void 0,void 0,(0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,X(l,f,e,v,u);case 2:p=!0,v=J(t,v,f,r);case 4:case"end":return n.stop()}}),n)})))})));return c.add(f.onDidChangeColor((function(e){X(l,f,e,v,u)}))),c.add(t.onDidChangeModelContent((function(e){p?p=!1:(r.hide(),t.focus())}))),c}function J(e,t,n,i){var r,a;if(n.presentation.textEdit){r=[n.presentation.textEdit],a=new h.e(n.presentation.textEdit.range.startLineNumber,n.presentation.textEdit.range.startColumn,n.presentation.textEdit.range.endLineNumber,n.presentation.textEdit.range.endColumn);var s=e.getModel()._setTrackedRange(null,a,3);e.pushUndoStop(),e.executeEdits("colorpicker",r),a=e.getModel()._getTrackedRange(s)||a}else r=[{range:t,text:n.presentation.label,forceMoveMarkers:!1}],a=t.setEndPosition(t.endLineNumber,t.startColumn+n.presentation.label.length),e.pushUndoStop(),e.executeEdits("colorpicker",r);return n.presentation.additionalTextEdits&&(r=(0,o.Z)(n.presentation.additionalTextEdits),e.executeEdits("colorpicker",r),i&&i.hide()),e.pushUndoStop(),a}function X(e,t,n,o,r){return U(this,void 0,void 0,(0,i.Z)().mark((function a(){var s;return(0,i.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,f.R)(e,{range:o,color:{red:n.rgba.r/255,green:n.rgba.g/255,blue:n.rgba.b/255,alpha:n.rgba.a}},r.provider,u.T.None);case 2:s=i.sent,t.colorPresentations=s||[];case 4:case"end":return i.stop()}}),a)})))}K=V([Q(1,W.XE)],K)},2587:function(e,t,n){n.d(t,{G:function(){return _}});var o=n(60136),i=n(27277),r=n(74165),a=n(15671),s=n(43144),c=n(40476),u=n(88074),l=n(26246),d=n(19536),h=n(65096),f=n(65441),g=n(62636),p=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},v=function(e,t){return function(n,o){t(n,o,e)}},m=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(t){r(t)}}function s(e){try{c(o.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},_=function(){function e(t,n){(0,a.Z)(this,e),this._editorWorkerClient=new u.Q8(t,!1,"editorWorkerService",n)}return(0,s.Z)(e,[{key:"provideDocumentColors",value:function(e,t){return m(this,void 0,void 0,(0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._editorWorkerClient.computeDefaultDocumentColors(e.uri));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"provideColorPresentations",value:function(e,t,n){var o=t.range,i=t.color,r=i.alpha,a=new c.Il(new c.VS(Math.round(255*i.red),Math.round(255*i.green),Math.round(255*i.blue),r)),s=r?c.Il.Format.CSS.formatRGB(a):c.Il.Format.CSS.formatRGBA(a),u=r?c.Il.Format.CSS.formatHSL(a):c.Il.Format.CSS.formatHSLA(a),l=r?c.Il.Format.CSS.formatHex(a):c.Il.Format.CSS.formatHexA(a),d=[];return d.push({label:s,textEdit:{range:o,text:s}}),d.push({label:u,textEdit:{range:o,text:u}}),d.push({label:l,textEdit:{range:o,text:l}}),d}}]),e}(),C=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(e,o,i){var r;return(0,a.Z)(this,n),(r=t.call(this))._register(i.colorProvider.register("*",new _(e,o))),r}return(0,s.Z)(n)}(h.JT);C=p([v(0,l.q),v(1,d.c_),v(2,f.p)],C),(0,g.y)(C)},86993:function(e,t,n){n.r(t),n.d(t,{ShowOrFocusStandaloneColorPicker:function(){return M}});var o,i,r=n(15671),a=n(43144),s=n(60136),c=n(27277),u=n(95253),l=n(18420),d=n(74165),h=n(97326),f=n(65096),g=n(4222),p=n(64606),v=n(21019),m=n(75256),_=n(13880),C=n(65441),y=n(98926),b=n(8022),k=n(26246),w=n(19536),x=n(2587),S=n(32959),N=(n(1061),function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a}),Z=function(e,t){return function(n,o){t(n,o,e)}},L=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(t){r(t)}}function s(e){try{c(o.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},P=o=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e,o,i,a,s,c,u){var l;return(0,r.Z)(this,n),(l=t.call(this))._editor=e,l._modelService=i,l._keybindingService=a,l._instantiationService=s,l._languageFeatureService=c,l._languageConfigurationService=u,l._standaloneColorPickerWidget=null,l._standaloneColorPickerVisible=y.u.standaloneColorPickerVisible.bindTo(o),l._standaloneColorPickerFocused=y.u.standaloneColorPickerFocused.bindTo(o),l}return(0,a.Z)(n,[{key:"showOrFocus",value:function(){var e;this._editor.hasModel()&&(this._standaloneColorPickerVisible.get()?this._standaloneColorPickerFocused.get()||null===(e=this._standaloneColorPickerWidget)||void 0===e||e.focus():this._standaloneColorPickerWidget=new A(this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused,this._instantiationService,this._modelService,this._keybindingService,this._languageFeatureService,this._languageConfigurationService))}},{key:"hide",value:function(){var e;this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),null===(e=this._standaloneColorPickerWidget)||void 0===e||e.hide(),this._editor.focus()}},{key:"insertColor",value:function(){var e;null===(e=this._standaloneColorPickerWidget)||void 0===e||e.updateEditor(),this.hide()}}],[{key:"get",value:function(e){return e.getContribution(o.ID)}}]),n}(f.JT);P.ID="editor.contrib.standaloneColorPickerController",P=o=N([Z(1,b.i6),Z(2,k.q),Z(3,m.d),Z(4,p.TG),Z(5,C.p),Z(6,w.c_)],P),(0,u._K)(P.ID,P,1);var A=i=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e,o,i,a,s,c,u,l){var d,f;(0,r.Z)(this,n),(d=t.call(this))._editor=e,d._standaloneColorPickerVisible=o,d._standaloneColorPickerFocused=i,d._modelService=s,d._keybindingService=c,d._languageFeaturesService=u,d._languageConfigurationService=l,d.allowEditorOverflow=!0,d._position=void 0,d._body=document.createElement("div"),d._colorHover=null,d._selectionSetInEditor=!1,d._onResult=d._register(new _.Q5),d.onResult=d._onResult.event,d._standaloneColorPickerVisible.set(!0),d._standaloneColorPickerParticipant=a.createInstance(g.PQ,d._editor),d._position=null===(f=d._editor._getViewModel())||void 0===f?void 0:f.getPrimaryCursorState().modelState.position;var p=d._editor.getSelection(),v=p?{startLineNumber:p.startLineNumber,startColumn:p.startColumn,endLineNumber:p.endLineNumber,endColumn:p.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},m=d._register(S.trackFocus(d._body));return d._register(m.onDidBlur((function(e){d.hide()}))),d._register(m.onDidFocus((function(e){d.focus()}))),d._register(d._editor.onDidChangeCursorPosition((function(){d._selectionSetInEditor?d._selectionSetInEditor=!1:d.hide()}))),d._register(d._editor.onMouseMove((function(e){var t,n=null===(t=e.target.element)||void 0===t?void 0:t.classList;n&&n.contains("colorpicker-color-decoration")&&d.hide()}))),d._register(d.onResult((function(e){d._render(e.value,e.foundInEditor)}))),d._start(v),d._body.style.zIndex="50",d._editor.addContentWidget((0,h.Z)(d)),d}return(0,a.Z)(n,[{key:"updateEditor",value:function(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)}},{key:"getId",value:function(){return i.ID}},{key:"getDomNode",value:function(){return this._body}},{key:"getPosition",value:function(){if(!this._position)return null;var e=this._editor.getOption(60).above;return{position:this._position,secondaryPosition:this._position,preference:e?[1,2]:[2,1],positionAffinity:2}}},{key:"hide",value:function(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()}},{key:"focus",value:function(){this._standaloneColorPickerFocused.set(!0),this._body.focus()}},{key:"_start",value:function(e){return L(this,void 0,void 0,(0,d.Z)().mark((function t(){var n;return(0,d.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._computeAsync(e);case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return");case 5:this._onResult.fire(new D(n.result,n.foundInEditor));case 6:case"end":return t.stop()}}),t,this)})))}},{key:"_computeAsync",value:function(e){return L(this,void 0,void 0,(0,d.Z)().mark((function t(){var n,o;return(0,d.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._editor.hasModel()){t.next=2;break}return t.abrupt("return",null);case 2:return n={range:e,color:{red:0,green:0,blue:0,alpha:1}},t.next=5,this._standaloneColorPickerParticipant.createColorHover(n,new x.G(this._modelService,this._languageConfigurationService),this._languageFeaturesService.colorProvider);case 5:if(o=t.sent){t.next=8;break}return t.abrupt("return",null);case 8:return t.abrupt("return",{result:o.colorHover,foundInEditor:o.foundInEditor});case 9:case"end":return t.stop()}}),t,this)})))}},{key:"_render",value:function(e,t){var n,o=this,i=document.createDocumentFragment(),r={fragment:i,statusBar:this._register(new v.mR(this._keybindingService)),setColorPicker:function(e){return n=e},onContentsChanged:function(){},hide:function(){return o.hide()}};if(this._colorHover=e,this._register(this._standaloneColorPickerParticipant.renderHoverParts(r,[e])),void 0!==n){this._body.classList.add("standalone-colorpicker-body"),this._body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+"px",this._body.style.maxWidth=Math.max(.66*this._editor.getLayoutInfo().width,500)+"px",this._body.tabIndex=0,this._body.appendChild(i),n.layout();var a=n.body,s=a.saturationBox.domNode.clientWidth,c=a.domNode.clientWidth-s-22-8,u=n.body.enterButton;null===u||void 0===u||u.onClicked((function(){o.updateEditor(),o.hide()}));var l=n.header;l.pickedColorNode.style.width=s+8+"px",l.originalColorNode.style.width=c+"px";var d=n.header.closeButton;null===d||void 0===d||d.onClicked((function(){o.hide()})),t&&(u&&(u.button.textContent="Replace"),this._selectionSetInEditor=!0,this._editor.setSelection(e.range)),this._editor.layoutContentWidget(this)}}}]),n}(f.JT);A.ID="editor.contrib.standaloneColorPickerWidget",A=i=N([Z(3,p.TG),Z(4,k.q),Z(5,m.d),Z(6,C.p),Z(7,w.c_)],A);var D=(0,a.Z)((function e(t,n){(0,r.Z)(this,e),this.value=t,this.foundInEditor=n})),I=n(14443),M=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.showOrFocusStandaloneColorPicker",title:{value:(0,l.NC)("showOrFocusStandaloneColorPicker","Show or Focus Standalone Color Picker"),mnemonicTitle:(0,l.NC)({key:"mishowOrFocusStandaloneColorPicker",comment:["&& denotes a mnemonic"]},"&&Show or Focus Standalone Color Picker"),original:"Show or Focus Standalone Color Picker"},precondition:void 0,menu:[{id:I.eH.CommandPalette}]})}return(0,a.Z)(n,[{key:"runEditorCommand",value:function(e,t){var n;null===(n=P.get(t))||void 0===n||n.showOrFocus()}}]),n}(u.x1),E=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.hideColorPicker",label:(0,l.NC)({key:"hideColorPicker",comment:["Action that hides the color picker"]},"Hide the Color Picker"),alias:"Hide the Color Picker",precondition:y.u.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100}})}return(0,a.Z)(n,[{key:"run",value:function(e,t){var n;null===(n=P.get(t))||void 0===n||n.hide()}}]),n}(u.R6),O=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.insertColorWithStandaloneColorPicker",label:(0,l.NC)({key:"insertColorWithStandaloneColorPicker",comment:["Action that inserts color with standalone color picker"]},"Insert Color with Standalone Color Picker"),alias:"Insert Color with Standalone Color Picker",precondition:y.u.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100}})}return(0,a.Z)(n,[{key:"run",value:function(e,t){var n;null===(n=P.get(t))||void 0===n||n.insertColor()}}]),n}(u.R6);(0,u.Qr)(E),(0,u.Qr)(O),(0,I.r1)(M)},68404:function(e,t,n){n.r(t);var o=n(37762),i=n(15671),r=n(43144),a=n(60136),s=n(27277),c=n(89490),u=n(95253),l=n(17429),d=n(98926),h=n(19536),f=n(62557),g=n(65631),p=n(96601),v=function(){function e(t,n,o){(0,i.Z)(this,e),this.languageConfigurationService=o,this._selection=t,this._insertSpace=n,this._usedEndToken=null}return(0,r.Z)(e,[{key:"_createOperationsForBlockComment",value:function(t,n,i,r,a,s){var c,u=t.startLineNumber,d=t.startColumn,h=t.endLineNumber,f=t.endColumn,g=a.getLineContent(u),p=a.getLineContent(h),v=g.lastIndexOf(n,d-1+n.length),m=p.indexOf(i,f-1-i.length);if(-1!==v&&-1!==m)if(u===h){g.substring(v+n.length,m).indexOf(i)>=0&&(v=-1,m=-1)}else{var _=g.substring(v+n.length),C=p.substring(0,m);(_.indexOf(i)>=0||C.indexOf(i)>=0)&&(v=-1,m=-1)}-1!==v&&-1!==m?(r&&v+n.length<g.length&&32===g.charCodeAt(v+n.length)&&(n+=" "),r&&m>0&&32===p.charCodeAt(m-1)&&(i=" "+i,m-=1),c=e._createRemoveBlockCommentOperations(new l.e(u,v+n.length+1,h,m+1),n,i)):(c=e._createAddBlockCommentOperations(t,n,i,this._insertSpace),this._usedEndToken=1===c.length?i:null);var y,b=(0,o.Z)(c);try{for(b.s();!(y=b.n()).done;){var k=y.value;s.addTrackedEditOperation(k.range,k.text)}}catch(w){b.e(w)}finally{b.f()}}},{key:"getEditOperations",value:function(e,t){var n=this._selection.startLineNumber,o=this._selection.startColumn;e.tokenization.tokenizeIfCheap(n);var i=e.getLanguageIdAtPosition(n,o),r=this.languageConfigurationService.getLanguageConfiguration(i).comments;r&&r.blockCommentStartToken&&r.blockCommentEndToken&&this._createOperationsForBlockComment(this._selection,r.blockCommentStartToken,r.blockCommentEndToken,this._insertSpace,e,t)}},{key:"computeCursorState",value:function(e,t){var n=t.getInverseEditOperations();if(2===n.length){var o=n[0],i=n[1];return new p.Y(o.range.endLineNumber,o.range.endColumn,i.range.startLineNumber,i.range.startColumn)}var r=n[0].range,a=this._usedEndToken?-this._usedEndToken.length-1:0;return new p.Y(r.endLineNumber,r.endColumn+a,r.endLineNumber,r.endColumn+a)}}],[{key:"_haystackHasNeedleAtOffset",value:function(e,t,n){if(n<0)return!1;var o=t.length;if(n+o>e.length)return!1;for(var i=0;i<o;i++){var r=e.charCodeAt(n+i),a=t.charCodeAt(i);if(r!==a&&(!(r>=65&&r<=90&&r+32===a)&&!(a>=65&&a<=90&&a+32===r)))return!1}return!0}},{key:"_createRemoveBlockCommentOperations",value:function(e,t,n){var o=[];return l.e.isEmpty(e)?o.push(f.h.delete(new l.e(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+n.length))):(o.push(f.h.delete(new l.e(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),o.push(f.h.delete(new l.e(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+n.length)))),o}},{key:"_createAddBlockCommentOperations",value:function(e,t,n,o){var i=[];return l.e.isEmpty(e)?i.push(f.h.replace(new l.e(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+n)):(i.push(f.h.insert(new g.L(e.startLineNumber,e.startColumn),t+(o?" ":""))),i.push(f.h.insert(new g.L(e.endLineNumber,e.endColumn),(o?" ":"")+n))),i}}]),e}(),m=n(31906),_=function(){function e(t,n,o,r,a,s,c){(0,i.Z)(this,e),this.languageConfigurationService=t,this._selection=n,this._tabSize=o,this._type=r,this._insertSpace=a,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=s,this._ignoreFirstLine=c||!1}return(0,r.Z)(e,[{key:"_executeLineComments",value:function(t,n,o,i){var r;o.shouldRemoveComments?r=e._createRemoveLineCommentsOperations(o.lines,i.startLineNumber):(e._normalizeInsertionPoint(t,o.lines,i.startLineNumber,this._tabSize),r=this._createAddLineCommentsOperations(o.lines,i.startLineNumber));for(var a=new g.L(i.positionLineNumber,i.positionColumn),s=0,c=r.length;s<c;s++){if(n.addEditOperation(r[s].range,r[s].text),l.e.isEmpty(r[s].range)&&l.e.getStartPosition(r[s].range).equals(a))t.getLineContent(a.lineNumber).length+1===a.column&&(this._deltaColumn=(r[s].text||"").length)}this._selectionId=n.trackSelection(i)}},{key:"_attemptRemoveBlockComment",value:function(e,t,n,o){var i=t.startLineNumber,r=t.endLineNumber,a=o.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn),s=e.getLineContent(i).lastIndexOf(n,a-1),c=e.getLineContent(r).indexOf(o,t.endColumn-1-n.length);return-1!==s&&-1===c&&(c=e.getLineContent(i).indexOf(o,s+n.length),r=i),-1===s&&-1!==c&&(s=e.getLineContent(r).lastIndexOf(n,c),i=r),!t.isEmpty()||-1!==s&&-1!==c||-1!==(s=e.getLineContent(i).indexOf(n))&&(c=e.getLineContent(i).indexOf(o,s+n.length)),-1!==s&&32===e.getLineContent(i).charCodeAt(s+n.length)&&(n+=" "),-1!==c&&32===e.getLineContent(r).charCodeAt(c-1)&&(o=" "+o,c-=1),-1!==s&&-1!==c?v._createRemoveBlockCommentOperations(new l.e(i,s+n.length+1,r,c+1),n,o):null}},{key:"_executeBlockComment",value:function(e,t,n){e.tokenization.tokenizeIfCheap(n.startLineNumber);var i=e.getLanguageIdAtPosition(n.startLineNumber,1),r=this.languageConfigurationService.getLanguageConfiguration(i).comments;if(r&&r.blockCommentStartToken&&r.blockCommentEndToken){var a=r.blockCommentStartToken,s=r.blockCommentEndToken,c=this._attemptRemoveBlockComment(e,n,a,s);if(!c){if(n.isEmpty()){var u=e.getLineContent(n.startLineNumber),d=m.LC(u);-1===d&&(d=u.length),c=v._createAddBlockCommentOperations(new l.e(n.startLineNumber,d+1,n.startLineNumber,u.length+1),a,s,this._insertSpace)}else c=v._createAddBlockCommentOperations(new l.e(n.startLineNumber,e.getLineFirstNonWhitespaceColumn(n.startLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),a,s,this._insertSpace);1===c.length&&(this._deltaColumn=a.length+1)}this._selectionId=t.trackSelection(n);var h,f=(0,o.Z)(c);try{for(f.s();!(h=f.n()).done;){var g=h.value;t.addEditOperation(g.range,g.text)}}catch(p){f.e(p)}finally{f.f()}}}},{key:"getEditOperations",value:function(t,n){var o=this._selection;if(this._moveEndPositionDown=!1,o.startLineNumber===o.endLineNumber&&this._ignoreFirstLine)return n.addEditOperation(new l.e(o.startLineNumber,t.getLineMaxColumn(o.startLineNumber),o.startLineNumber+1,1),o.startLineNumber===t.getLineCount()?"":"\n"),void(this._selectionId=n.trackSelection(o));o.startLineNumber<o.endLineNumber&&1===o.endColumn&&(this._moveEndPositionDown=!0,o=o.setEndPosition(o.endLineNumber-1,t.getLineMaxColumn(o.endLineNumber-1)));var i=e._gatherPreflightData(this._type,this._insertSpace,t,o.startLineNumber,o.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return i.supported?this._executeLineComments(t,n,i,o):this._executeBlockComment(t,n,o)}},{key:"computeCursorState",value:function(e,t){var n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),new p.Y(n.selectionStartLineNumber,n.selectionStartColumn+this._deltaColumn,n.positionLineNumber,n.positionColumn+this._deltaColumn)}},{key:"_createAddLineCommentsOperations",value:function(e,t){for(var n=[],o=this._insertSpace?" ":"",i=0,r=e.length;i<r;i++){var a=e[i];a.ignore||n.push(f.h.insert(new g.L(t+i,a.commentStrOffset+1),a.commentStr+o))}return n}}],[{key:"_gatherPreflightCommentStrings",value:function(e,t,n,o){e.tokenization.tokenizeIfCheap(t);var i=e.getLanguageIdAtPosition(t,1),r=o.getLanguageConfiguration(i).comments,a=r?r.lineCommentToken:null;if(!a)return null;for(var s=[],c=0,u=n-t+1;c<u;c++)s[c]={ignore:!1,commentStr:a,commentStrOffset:0,commentStrLength:a.length};return s}},{key:"_analyzeLines",value:function(e,t,n,o,i,r,a,s){var c,u=!0;c=0===e||1!==e;for(var l=0,d=o.length;l<d;l++){var h=o[l],f=i+l;if(f===i&&a)h.ignore=!0;else{var g=n.getLineContent(f),p=m.LC(g);if(-1!==p){if(u=!1,h.ignore=!1,h.commentStrOffset=p,c&&!v._haystackHasNeedleAtOffset(g,h.commentStr,p)&&(0===e?c=!1:1===e||(h.ignore=!0)),c&&t){var _=p+h.commentStrLength;_<g.length&&32===g.charCodeAt(_)&&(h.commentStrLength+=1)}}else h.ignore=r,h.commentStrOffset=g.length}}if(0===e&&u){c=!1;for(var C=0,y=o.length;C<y;C++)o[C].ignore=!1}return{supported:!0,shouldRemoveComments:c,lines:o}}},{key:"_gatherPreflightData",value:function(t,n,o,i,r,a,s,c){var u=e._gatherPreflightCommentStrings(o,i,r,c);return null===u?{supported:!1}:e._analyzeLines(t,n,o,u,i,a,s,c)}},{key:"_createRemoveLineCommentsOperations",value:function(e,t){for(var n=[],o=0,i=e.length;o<i;o++){var r=e[o];r.ignore||n.push(f.h.delete(new l.e(t+o,r.commentStrOffset+1,t+o,r.commentStrOffset+r.commentStrLength+1)))}return n}},{key:"nextVisibleColumn",value:function(e,t,n,o){return n?e+(t-e%t):e+o}},{key:"_normalizeInsertionPoint",value:function(t,n,o,i){for(var r,a,s=1073741824,c=0,u=n.length;c<u;c++)if(!n[c].ignore){for(var l=t.getLineContent(o+c),d=0,h=0,f=n[c].commentStrOffset;d<s&&h<f;h++)d=e.nextVisibleColumn(d,i,9===l.charCodeAt(h),1);d<s&&(s=d)}s=Math.floor(s/i)*i;for(var g=0,p=n.length;g<p;g++)if(!n[g].ignore){var v=t.getLineContent(o+g),m=0;for(r=0,a=n[g].commentStrOffset;m<s&&r<a;r++)m=e.nextVisibleColumn(m,i,9===v.charCodeAt(r),1);n[g].commentStrOffset=m>s?r-1:r}}}]),e}(),C=n(18420),y=n(14443),b=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,o){var r;return(0,i.Z)(this,n),(r=t.call(this,o))._type=e,r}return(0,r.Z)(n,[{key:"run",value:function(e,t){var n=e.get(h.c_);if(t.hasModel()){var i=[],r=t.getModel().getOptions(),a=t.getOption(23),s=t.getSelections().map((function(e,t){return{selection:e,index:t,ignoreFirstLine:!1}}));s.sort((function(e,t){return l.e.compareRangesUsingStarts(e.selection,t.selection)}));for(var c=s[0],u=1;u<s.length;u++){var d=s[u];c.selection.endLineNumber===d.selection.startLineNumber&&(c.index<d.index?d.ignoreFirstLine=!0:(c.ignoreFirstLine=!0,c=d))}var f,g=(0,o.Z)(s);try{for(g.s();!(f=g.n()).done;){var p=f.value;i.push(new _(n,p.selection,r.tabSize,this._type,a.insertSpace,a.ignoreEmptyLines,p.ignoreFirstLine))}}catch(v){g.e(v)}finally{g.f()}t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}}]),n}(u.R6),k=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.call(this,0,{id:"editor.action.commentLine",label:C.NC("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:d.u.writable,kbOpts:{kbExpr:d.u.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:y.eH.MenubarEditMenu,group:"5_insert",title:C.NC({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}return(0,r.Z)(n)}(b),w=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.call(this,1,{id:"editor.action.addCommentLine",label:C.NC("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:d.u.writable,kbOpts:{kbExpr:d.u.editorTextFocus,primary:(0,c.gx)(2089,2081),weight:100}})}return(0,r.Z)(n)}(b),x=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.call(this,2,{id:"editor.action.removeCommentLine",label:C.NC("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:d.u.writable,kbOpts:{kbExpr:d.u.editorTextFocus,primary:(0,c.gx)(2089,2099),weight:100}})}return(0,r.Z)(n)}(b),S=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.call(this,{id:"editor.action.blockComment",label:C.NC("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:d.u.writable,kbOpts:{kbExpr:d.u.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:y.eH.MenubarEditMenu,group:"5_insert",title:C.NC({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}return(0,r.Z)(n,[{key:"run",value:function(e,t){var n=e.get(h.c_);if(t.hasModel()){var i,r=t.getOption(23),a=[],s=t.getSelections(),c=(0,o.Z)(s);try{for(c.s();!(i=c.n()).done;){var u=i.value;a.push(new v(u,r.insertSpace,n))}}catch(l){c.e(l)}finally{c.f()}t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}}}]),n}(u.R6);(0,u.Qr)(k),(0,u.Qr)(w),(0,u.Qr)(x),(0,u.Qr)(S)},33065:function(e,t,n){n.r(t),n.d(t,{ContextMenuController:function(){return N}});var o,i=n(60136),r=n(27277),a=n(29439),s=n(37762),c=n(15671),u=n(43144),l=n(32959),d=n(6035),h=n(93720),f=n(65096),g=n(90650),p=n(95253),v=n(98926),m=n(18420),_=n(14443),C=n(8022),y=n(92361),b=n(75256),k=n(77819),w=n(55208),x=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},S=function(e,t){return function(n,o){t(n,o,e)}},N=o=function(){function e(t,n,o,i,r,a,s,u){var d=this;(0,c.Z)(this,e),this._contextMenuService=n,this._contextViewService=o,this._contextKeyService=i,this._keybindingService=r,this._menuService=a,this._configurationService=s,this._workspaceContextService=u,this._toDispose=new f.SL,this._contextMenuIsBeingShownCount=0,this._editor=t,this._toDispose.add(this._editor.onContextMenu((function(e){return d._onContextMenu(e)}))),this._toDispose.add(this._editor.onMouseWheel((function(e){if(d._contextMenuIsBeingShownCount>0){var t=d._contextViewService.getContextViewElement(),n=e.srcElement;n.shadowRoot&&l.getShadowRoot(t)===n.shadowRoot||d._contextViewService.hideContextView()}}))),this._toDispose.add(this._editor.onKeyDown((function(e){d._editor.getOption(24)&&58===e.keyCode&&(e.preventDefault(),e.stopPropagation(),d.showContextMenu())})))}return(0,u.Z)(e,[{key:"_onContextMenu",value:function(e){if(this._editor.hasModel()){if(!this._editor.getOption(24))return this._editor.focus(),void(e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position));if(12!==e.target.type&&(6!==e.target.type||!e.target.detail.injectedText)){if(e.event.preventDefault(),e.event.stopPropagation(),11===e.target.type)return this._showScrollbarContextMenu(e.event);if(6===e.target.type||7===e.target.type||1===e.target.type){if(this._editor.focus(),e.target.position){var t,n=!1,o=(0,s.Z)(this._editor.getSelections());try{for(o.s();!(t=o.n()).done;){if(t.value.containsPosition(e.target.position)){n=!0;break}}}catch(r){o.e(r)}finally{o.f()}n||this._editor.setPosition(e.target.position)}var i=null;1!==e.target.type&&(i=e.event),this.showContextMenu(i)}}}}},{key:"showContextMenu",value:function(e){if(this._editor.getOption(24)&&this._editor.hasModel()){var t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?_.eH.SimpleEditorContext:_.eH.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}}},{key:"_getMenuActions",value:function(e,t){var n=[],o=this._menuService.createMenu(t,this._contextKeyService),i=o.getActions({arg:e.uri});o.dispose();var r,c=(0,s.Z)(i);try{for(c.s();!(r=c.n()).done;){var u,l=r.value,d=(0,a.Z)(l,2)[1],f=0,g=(0,s.Z)(d);try{for(g.s();!(u=g.n()).done;){var p=u.value;if(p instanceof _.NZ){var v=this._getMenuActions(e,p.item.submenu);v.length>0&&(n.push(new h.wY(p.id,p.label,v)),f++)}else n.push(p),f++}}catch(m){g.e(m)}finally{g.f()}f&&n.push(new h.Z0)}}catch(m){c.e(m)}finally{c.f()}return n.length&&n.pop(),n}},{key:"_doShowContextMenu",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this._editor.hasModel()){var o=this._editor.getOption(60);this._editor.updateOptions({hover:{enabled:!1}});var i=n;if(!i){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();var r=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),a=l.getDomNodePagePosition(this._editor.getDomNode()),s=a.left+r.left,c=a.top+r.top+r.height;i={x:s,y:c}}var u=this._editor.getOption(126)&&!g.gn;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:u?this._editor.getDomNode():void 0,getAnchor:function(){return i},getActions:function(){return e},getActionViewItem:function(e){var n=t._keybindingFor(e);if(n)return new d.gU(e,e,{label:!0,keybinding:n.getLabel(),isMenu:!0});var o=e;return"function"===typeof o.getActionViewItem?o.getActionViewItem():new d.gU(e,e,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:function(e){return t._keybindingFor(e)},onHide:function(e){t._contextMenuIsBeingShownCount--,t._editor.updateOptions({hover:o})}})}}},{key:"_showScrollbarContextMenu",value:function(e){var t=this;if(this._editor.hasModel()&&!(0,w.x)(this._workspaceContextService.getWorkspace())){var n=this._editor.getOption(72),o=0,i=function(e){return{id:"menu-action-".concat(++o),label:e.label,tooltip:"",class:void 0,enabled:"undefined"===typeof e.enabled||e.enabled,checked:e.checked,run:e.run}},r=function(e,n,r,a,c){if(!n)return i({label:e,enabled:n,run:function(){}});var u,l=function(e){return function(){t._configurationService.updateValue(r,e)}},d=[],f=(0,s.Z)(c);try{for(f.s();!(u=f.n()).done;){var g=u.value;d.push(i({label:g.label,checked:a===g.value,run:l(g.value)}))}}catch(p){f.e(p)}finally{f.f()}return function(e,t){return new h.wY("menu-action-".concat(++o),e,t,void 0)}(e,d)},a=[];a.push(i({label:m.NC("context.minimap.minimap","Minimap"),checked:n.enabled,run:function(){t._configurationService.updateValue("editor.minimap.enabled",!n.enabled)}})),a.push(new h.Z0),a.push(i({label:m.NC("context.minimap.renderCharacters","Render Characters"),enabled:n.enabled,checked:n.renderCharacters,run:function(){t._configurationService.updateValue("editor.minimap.renderCharacters",!n.renderCharacters)}})),a.push(r(m.NC("context.minimap.size","Vertical size"),n.enabled,"editor.minimap.size",n.size,[{label:m.NC("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:m.NC("context.minimap.size.fill","Fill"),value:"fill"},{label:m.NC("context.minimap.size.fit","Fit"),value:"fit"}])),a.push(r(m.NC("context.minimap.slider","Slider"),n.enabled,"editor.minimap.showSlider",n.showSlider,[{label:m.NC("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:m.NC("context.minimap.slider.always","Always"),value:"always"}]));var c=this._editor.getOption(126)&&!g.gn;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:c?this._editor.getDomNode():void 0,getAnchor:function(){return e},getActions:function(){return a},onHide:function(e){t._contextMenuIsBeingShownCount--,t._editor.focus()}})}}},{key:"_keybindingFor",value:function(e){return this._keybindingService.lookupKeybinding(e.id)}},{key:"dispose",value:function(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}}],[{key:"get",value:function(e){return e.getContribution(o.ID)}}]),e}();N.ID="editor.contrib.contextmenu",N=o=x([S(1,y.i),S(2,y.u),S(3,C.i6),S(4,b.d),S(5,_.co),S(6,k.Ui),S(7,w.ec)],N);var Z=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(){return(0,c.Z)(this,n),t.call(this,{id:"editor.action.showContextMenu",label:m.NC("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:v.u.textInputFocus,primary:1092,weight:100}})}return(0,u.Z)(n,[{key:"run",value:function(e,t){var n;null===(n=N.get(t))||void 0===n||n.showContextMenu()}}]),n}(p.R6);(0,p._K)(N.ID,N,2),(0,p.Qr)(Z)},13081:function(e,t,n){n.r(t),n.d(t,{CursorRedo:function(){return p},CursorUndo:function(){return g},CursorUndoRedoController:function(){return f}});var o=n(60136),i=n(27277),r=n(15671),a=n(43144),s=n(65096),c=n(95253),u=n(98926),l=n(18420),d=function(){function e(t){(0,r.Z)(this,e),this.selections=t}return(0,a.Z)(e,[{key:"equals",value:function(e){var t=this.selections.length;if(t!==e.selections.length)return!1;for(var n=0;n<t;n++)if(!this.selections[n].equalsSelection(e.selections[n]))return!1;return!0}}]),e}(),h=(0,a.Z)((function e(t,n,o){(0,r.Z)(this,e),this.cursorState=t,this.scrollTop=n,this.scrollLeft=o})),f=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(e){var o;return(0,r.Z)(this,n),(o=t.call(this))._editor=e,o._isCursorUndoRedo=!1,o._undoStack=[],o._redoStack=[],o._register(e.onDidChangeModel((function(e){o._undoStack=[],o._redoStack=[]}))),o._register(e.onDidChangeModelContent((function(e){o._undoStack=[],o._redoStack=[]}))),o._register(e.onDidChangeCursorSelection((function(t){if(!o._isCursorUndoRedo&&t.oldSelections&&t.oldModelVersionId===t.modelVersionId){var n=new d(t.oldSelections);o._undoStack.length>0&&o._undoStack[o._undoStack.length-1].cursorState.equals(n)||(o._undoStack.push(new h(n,e.getScrollTop(),e.getScrollLeft())),o._redoStack=[],o._undoStack.length>50&&o._undoStack.shift())}}))),o}return(0,a.Z)(n,[{key:"cursorUndo",value:function(){this._editor.hasModel()&&0!==this._undoStack.length&&(this._redoStack.push(new h(new d(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}},{key:"cursorRedo",value:function(){this._editor.hasModel()&&0!==this._redoStack.length&&(this._undoStack.push(new h(new d(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}},{key:"_applyState",value:function(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}],[{key:"get",value:function(e){return e.getContribution(n.ID)}}]),n}(s.JT);f.ID="editor.contrib.cursorUndoRedoController";var g=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"cursorUndo",label:l.NC("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:u.u.textInputFocus,primary:2099,weight:100}})}return(0,a.Z)(n,[{key:"run",value:function(e,t,n){var o;null===(o=f.get(t))||void 0===o||o.cursorUndo()}}]),n}(c.R6),p=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"cursorRedo",label:l.NC("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}return(0,a.Z)(n,[{key:"run",value:function(e,t,n){var o;null===(o=f.get(t))||void 0===o||o.cursorRedo()}}]),n}(c.R6);(0,c._K)(f.ID,f,0),(0,c.Qr)(g),(0,c.Qr)(p)},1061:function(){}}]);
//# sourceMappingURL=monaco-editor-vendor.9fdc3ed8.13756458.js.map