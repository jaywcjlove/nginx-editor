"use strict";(self.webpackChunkmonaco_editor_nginx=self.webpackChunkmonaco_editor_nginx||[]).push([[235],{67425:function(e,t,n){n.d(t,{M$:function(){return a},YA:function(){return u}});var i=n(60136),o=n(43668),r=n(43144),s=n(15671),a=(0,r.Z)((function e(t,n,i){(0,s.Z)(this,e),this.range=t,this.nestingLevel=n,this.isInvalid=i})),u=function(e){(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(e,i,o,r,a){var u;return(0,s.Z)(this,n),(u=t.call(this,e,i,o,r)).minVisibleColumnIndentation=a,u}return(0,r.Z)(n)}((0,r.Z)((function e(t,n,i,o){(0,s.Z)(this,e),this.range=t,this.openingBracketRange=n,this.closingBracketRange=i,this.nestingLevel=o})))},94583:function(e,t,n){n.d(t,{Jx:function(){return s},gk:function(){return a},rU:function(){return u},lN:function(){return l},Tx:function(){return h},CZ:function(){return c},dQ:function(){return f},D8:function(){return d},fV:function(){return g}});var i=n(37762),o=n(43144),r=n(15671),s=(0,o.Z)((function e(){(0,r.Z)(this,e),this.changeType=1})),a=function(){function e(t,n,i,o,s){(0,r.Z)(this,e),this.ownerId=t,this.lineNumber=n,this.column=i,this.options=o,this.order=s}return(0,o.Z)(e,null,[{key:"applyInjectedText",value:function(e,t){if(!t||0===t.length)return e;var n,o="",r=0,s=(0,i.Z)(t);try{for(s.s();!(n=s.n()).done;){var a=n.value;o+=e.substring(r,a.column-1),r=a.column-1,o+=a.options.content}}catch(u){s.e(u)}finally{s.f()}return o+=e.substring(r)}},{key:"fromDecorations",value:function(t){var n,o=[],r=(0,i.Z)(t);try{for(r.s();!(n=r.n()).done;){var s=n.value;s.options.before&&s.options.before.content.length>0&&o.push(new e(s.ownerId,s.range.startLineNumber,s.range.startColumn,s.options.before,0)),s.options.after&&s.options.after.content.length>0&&o.push(new e(s.ownerId,s.range.endLineNumber,s.range.endColumn,s.options.after,1))}}catch(a){r.e(a)}finally{r.f()}return o.sort((function(e,t){return e.lineNumber===t.lineNumber?e.column===t.column?e.order-t.order:e.column-t.column:e.lineNumber-t.lineNumber})),o}}]),e}(),u=(0,o.Z)((function e(t,n,i){(0,r.Z)(this,e),this.changeType=2,this.lineNumber=t,this.detail=n,this.injectedText=i})),l=(0,o.Z)((function e(t,n){(0,r.Z)(this,e),this.changeType=3,this.fromLineNumber=t,this.toLineNumber=n})),h=(0,o.Z)((function e(t,n,i,o){(0,r.Z)(this,e),this.changeType=4,this.injectedTexts=o,this.fromLineNumber=t,this.toLineNumber=n,this.detail=i})),c=(0,o.Z)((function e(){(0,r.Z)(this,e),this.changeType=5})),f=function(){function e(t,n,i,o){(0,r.Z)(this,e),this.changes=t,this.versionId=n,this.isUndoing=i,this.isRedoing=o,this.resultingSelection=null}return(0,o.Z)(e,[{key:"containsEvent",value:function(e){for(var t=0,n=this.changes.length;t<n;t++){if(this.changes[t].changeType===e)return!0}return!1}}],[{key:"merge",value:function(t,n){return new e([].concat(t.changes).concat(n.changes),n.versionId,t.isUndoing||n.isUndoing,t.isRedoing||n.isRedoing)}}]),e}(),d=(0,o.Z)((function e(t){(0,r.Z)(this,e),this.changes=t})),g=function(){function e(t,n){(0,r.Z)(this,e),this.rawContentChangedEvent=t,this.contentChangedEvent=n}return(0,o.Z)(e,[{key:"merge",value:function(t){var n=f.merge(this.rawContentChangedEvent,t.rawContentChangedEvent),i=e._mergeChangeEvents(this.contentChangedEvent,t.contentChangedEvent);return new e(n,i)}}],[{key:"_mergeChangeEvents",value:function(e,t){return{changes:[].concat(e.changes).concat(t.changes),eol:t.eol,versionId:t.versionId,isUndoing:e.isUndoing||t.isUndoing,isRedoing:e.isRedoing||t.isRedoing,isFlush:e.isFlush||t.isFlush}}}]),e}()},54612:function(e,t,n){n.d(t,{s6:function(){return i},UO:function(){return s},vW:function(){return a}});var i,o=n(43144),r=n(15671);!function(e){e[e.Disabled=0]="Disabled",e[e.EnabledForActive=1]="EnabledForActive",e[e.Enabled=2]="Enabled"}(i||(i={}));var s=(0,o.Z)((function e(t,n,i){(0,r.Z)(this,e),this.visibleColumn=t,this.className=n,this.horizontalLine=i})),a=(0,o.Z)((function e(t,n){(0,r.Z)(this,e),this.top=t,this.endColumn=n}))},72669:function(e,t,n){n.d(t,{R:function(){return g}});var i=n(11752),o=n(61120),r=n(60136),s=n(43668),a=n(15671),u=n(43144),l=n(87757),h=n.n(l),c=n(28941),f=n(10526),d=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{u(i.next(e))}catch(t){r(t)}}function a(e){try{u(i.throw(e))}catch(t){r(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((i=i.apply(e,t||[])).next())}))},g=function(){function e(){(0,a.Z)(this,e),this._map=new Map,this._factories=new Map,this._onDidChange=new c.Q5,this.onDidChange=this._onDidChange.event,this._colorMap=null}return(0,u.Z)(e,[{key:"fire",value:function(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}},{key:"register",value:function(e,t){var n=this;return this._map.set(e,t),this.fire([e]),(0,f.OF)((function(){n._map.get(e)===t&&(n._map.delete(e),n.fire([e]))}))}},{key:"registerFactory",value:function(e,t){var n,i=this;null===(n=this._factories.get(e))||void 0===n||n.dispose();var o=new v(this,e,t);return this._factories.set(e,o),(0,f.OF)((function(){var t=i._factories.get(e);t&&t===o&&(i._factories.delete(e),t.dispose())}))}},{key:"getOrCreate",value:function(e){return d(this,void 0,void 0,h().mark((function t(){var n,i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=this.get(e))){t.next=3;break}return t.abrupt("return",n);case 3:if((i=this._factories.get(e))&&!i.isResolved){t.next=6;break}return t.abrupt("return",null);case 6:return t.next=8,i.resolve();case 8:return t.abrupt("return",this.get(e));case 9:case"end":return t.stop()}}),t,this)})))}},{key:"get",value:function(e){return this._map.get(e)||null}},{key:"isResolved",value:function(e){if(this.get(e))return!0;var t=this._factories.get(e);return!(t&&!t.isResolved)}},{key:"setColorMap",value:function(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._map.keys()),changedColorMap:!0})}},{key:"getColorMap",value:function(){return this._colorMap}},{key:"getDefaultBackground",value:function(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}]),e}(),v=function(e){(0,r.Z)(n,e);var t=(0,s.Z)(n);function n(e,i,o){var r;return(0,a.Z)(this,n),(r=t.call(this))._registry=e,r._languageId=i,r._factory=o,r._isDisposed=!1,r._resolvePromise=null,r._isResolved=!1,r}return(0,u.Z)(n,[{key:"isResolved",get:function(){return this._isResolved}},{key:"dispose",value:function(){this._isDisposed=!0,(0,i.Z)((0,o.Z)(n.prototype),"dispose",this).call(this)}},{key:"resolve",value:function(){return d(this,void 0,void 0,h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._resolvePromise||(this._resolvePromise=this._create()),e.abrupt("return",this._resolvePromise);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"_create",value:function(){return d(this,void 0,void 0,h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(this._factory.createTokenizationSupport());case 2:t=e.sent,this._isResolved=!0,t&&!this._isDisposed&&this._register(this._registry.register(this._languageId,t));case 5:case"end":return e.stop()}}),e,this)})))}}]),n}(f.JT)},4723:function(e,t,n){n.d(t,{N:function(){return s}});var i=n(15671),o=n(43144),r=function(){function e(t,n){(0,i.Z)(this,e),this._startLineNumber=t,this._tokens=n}return(0,o.Z)(e,[{key:"startLineNumber",get:function(){return this._startLineNumber}},{key:"endLineNumber",get:function(){return this._startLineNumber+this._tokens.length-1}},{key:"getLineTokens",value:function(e){return this._tokens[e-this._startLineNumber]}},{key:"appendLineTokens",value:function(e){this._tokens.push(e)}}]),e}(),s=function(){function e(){(0,i.Z)(this,e),this._tokens=[]}return(0,o.Z)(e,[{key:"add",value:function(e,t){if(this._tokens.length>0){var n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e)return void n.appendLineTokens(t)}this._tokens.push(new r(e,[t]))}},{key:"finalize",value:function(){return this._tokens}}]),e}()},10594:function(e,t,n){n.d(t,{l:function(){return f}});var i=n(15671),o=n(43144),r=n(71881),s=n(10849),a=n(58705),u=new Uint32Array(0).buffer,l=function(){function e(){(0,i.Z)(this,e)}return(0,o.Z)(e,null,[{key:"deleteBeginning",value:function(t,n){return null===t||t===u?t:e.delete(t,0,n)}},{key:"deleteEnding",value:function(t,n){if(null===t||t===u)return t;var i=h(t),o=i[i.length-2];return e.delete(t,n,o)}},{key:"delete",value:function(e,t,n){if(null===e||e===u||t===n)return e;var i=h(e),o=i.length>>>1;if(0===t&&i[i.length-2]===n)return u;var r,s,l=a.A.findIndexInTokensArray(i,t),c=l>0?i[l-1<<1]:0;if(n<i[l<<1]){for(var f=n-t,d=l;d<o;d++)i[d<<1]-=f;return e}c!==t?(i[l<<1]=t,r=l+1<<1,s=t):(r=l<<1,s=c);for(var g=n-t,v=l+1;v<o;v++){var m=i[v<<1]-g;m>s&&(i[r++]=m,i[r++]=i[1+(v<<1)],s=m)}if(r===i.length)return e;var p=new Uint32Array(r);return p.set(i.subarray(0,r),0),p.buffer}},{key:"append",value:function(e,t){if(t===u)return e;if(e===u)return t;if(null===e)return e;if(null===t)return null;var n=h(e),i=h(t),o=i.length>>>1,r=new Uint32Array(n.length+i.length);r.set(n,0);for(var s=n.length,a=n[n.length-2],l=0;l<o;l++)r[s++]=i[l<<1]+a,r[s++]=i[1+(l<<1)];return r.buffer}},{key:"insert",value:function(e,t,n){if(null===e||e===u)return e;var i=h(e),o=i.length>>>1,r=a.A.findIndexInTokensArray(i,t);r>0&&(i[r-1<<1]===t&&r--);for(var s=r;s<o;s++)i[s<<1]+=n;return e}}]),e}();function h(e){return e instanceof Uint32Array?e:new Uint32Array(e)}var c=n(49500),f=function(){function e(t){(0,i.Z)(this,e),this._lineTokens=[],this._len=0,this._languageIdCodec=t}return(0,o.Z)(e,[{key:"flush",value:function(){this._lineTokens=[],this._len=0}},{key:"getTokens",value:function(e,t,n){var i=null;if(t<this._len&&(i=this._lineTokens[t]),null!==i&&i!==u)return new a.A(h(i),n,this._languageIdCodec);var o=new Uint32Array(2);return o[0]=n.length,o[1]=d(this._languageIdCodec.encodeLanguageId(e)),new a.A(o,n,this._languageIdCodec)}},{key:"_ensureLine",value:function(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}},{key:"_deleteLines",value:function(e,t){0!==t&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}},{key:"_insertLines",value:function(e,t){if(0!==t){for(var n=[],i=0;i<t;i++)n[i]=null;this._lineTokens=r.Zv(this._lineTokens,e,n),this._len+=t}}},{key:"setTokens",value:function(t,n,i,o,r){var s=e._massageTokens(this._languageIdCodec.encodeLanguageId(t),i,o);this._ensureLine(n);var a=this._lineTokens[n];return this._lineTokens[n]=s,!!r&&!e._equals(a,s)}},{key:"acceptEdit",value:function(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new s.L(e.startLineNumber,e.startColumn),t,n)}},{key:"_acceptDeleteRange",value:function(e){var t=e.startLineNumber-1;if(!(t>=this._len))if(e.startLineNumber!==e.endLineNumber){this._lineTokens[t]=l.deleteEnding(this._lineTokens[t],e.startColumn-1);var n=e.endLineNumber-1,i=null;n<this._len&&(i=l.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=l.append(this._lineTokens[t],i),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}else{if(e.startColumn===e.endColumn)return;this._lineTokens[t]=l.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1)}}},{key:"_acceptInsertText",value:function(e,t,n){if(0!==t||0!==n){var i=e.lineNumber-1;i>=this._len||(0!==t?(this._lineTokens[i]=l.deleteEnding(this._lineTokens[i],e.column-1),this._lineTokens[i]=l.insert(this._lineTokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)):this._lineTokens[i]=l.insert(this._lineTokens[i],e.column-1,n))}}}],[{key:"_massageTokens",value:function(e,t,n){var i=n?h(n):null;if(0===t){var o=!1;if(i&&i.length>1&&(o=c.NX.getLanguageId(i[1])!==e),!o)return u}if(!i||0===i.length){var r=new Uint32Array(2);return r[0]=t,r[1]=d(e),r.buffer}return i[i.length-2]=t,0===i.byteOffset&&i.byteLength===i.buffer.byteLength?i.buffer:i}},{key:"_equals",value:function(e,t){if(!e||!t)return!e&&!t;var n=h(e),i=h(t);if(n.length!==i.length)return!1;for(var o=0,r=n.length;o<r;o++)if(n[o]!==i[o])return!1;return!0}}]),e}();function d(e){return(16384|e<<0|2<<23)>>>0}},58705:function(e,t,n){n.d(t,{A:function(){return s}});var i=n(15671),o=n(43144),r=n(49500),s=function(){function e(t,n,o){(0,i.Z)(this,e),this._lineTokensBrand=void 0,this._tokens=t,this._tokensCount=this._tokens.length>>>1,this._text=n,this._languageIdCodec=o}return(0,o.Z)(e,[{key:"equals",value:function(t){return t instanceof e&&this.slicedEquals(t,0,this._tokensCount)}},{key:"slicedEquals",value:function(e,t,n){if(this._text!==e._text)return!1;if(this._tokensCount!==e._tokensCount)return!1;for(var i=t<<1,o=i+(n<<1),r=i;r<o;r++)if(this._tokens[r]!==e._tokens[r])return!1;return!0}},{key:"getLineContent",value:function(){return this._text}},{key:"getCount",value:function(){return this._tokensCount}},{key:"getStartOffset",value:function(e){return e>0?this._tokens[e-1<<1]:0}},{key:"getMetadata",value:function(e){return this._tokens[1+(e<<1)]}},{key:"getLanguageId",value:function(e){var t=this._tokens[1+(e<<1)],n=r.NX.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(n)}},{key:"getStandardTokenType",value:function(e){var t=this._tokens[1+(e<<1)];return r.NX.getTokenType(t)}},{key:"getForeground",value:function(e){var t=this._tokens[1+(e<<1)];return r.NX.getForeground(t)}},{key:"getClassName",value:function(e){var t=this._tokens[1+(e<<1)];return r.NX.getClassNameFromMetadata(t)}},{key:"getInlineStyle",value:function(e,t){var n=this._tokens[1+(e<<1)];return r.NX.getInlineStyleFromMetadata(n,t)}},{key:"getPresentation",value:function(e){var t=this._tokens[1+(e<<1)];return r.NX.getPresentationFromMetadata(t)}},{key:"getEndOffset",value:function(e){return this._tokens[e<<1]}},{key:"findTokenIndexAtOffset",value:function(t){return e.findIndexInTokensArray(this._tokens,t)}},{key:"inflate",value:function(){return this}},{key:"sliceAndInflate",value:function(e,t,n){return new a(this,e,t,n)}},{key:"withInserted",value:function(t){if(0===t.length)return this;for(var n=0,i=0,o="",r=new Array,s=0;;){var a=n<this._tokensCount?this._tokens[n<<1]:-1,u=i<t.length?t[i]:null;if(-1!==a&&(null===u||a<=u.offset)){o+=this._text.substring(s,a);var l=this._tokens[1+(n<<1)];r.push(o.length,l),n++,s=a}else{if(!u)break;if(u.offset>s){o+=this._text.substring(s,u.offset);var h=this._tokens[1+(n<<1)];r.push(o.length,h),s=u.offset}o+=u.text,r.push(o.length,u.tokenMetadata),i++}}return new e(new Uint32Array(r),o,this._languageIdCodec)}}],[{key:"createEmpty",value:function(t,n){var i=e.defaultTokenMetadata,o=new Uint32Array(2);return o[0]=t.length,o[1]=i,new e(o,t,n)}},{key:"convertToEndOffset",value:function(e,t){for(var n=(e.length>>>1)-1,i=0;i<n;i++)e[i<<1]=e[i+1<<1];e[n<<1]=t}},{key:"findIndexInTokensArray",value:function(e,t){if(e.length<=2)return 0;for(var n=0,i=(e.length>>>1)-1;n<i;){var o=n+Math.floor((i-n)/2),r=e[o<<1];if(r===t)return o+1;r<t?n=o+1:r>t&&(i=o)}return n}}]),e}();s.defaultTokenMetadata=16793600;var a=function(){function e(t,n,o,r){(0,i.Z)(this,e),this._source=t,this._startOffset=n,this._endOffset=o,this._deltaOffset=r,this._firstTokenIndex=t.findTokenIndexAtOffset(n),this._tokensCount=0;for(var s=this._firstTokenIndex,a=t.getCount();s<a;s++){if(t.getStartOffset(s)>=o)break;this._tokensCount++}}return(0,o.Z)(e,[{key:"getMetadata",value:function(e){return this._source.getMetadata(this._firstTokenIndex+e)}},{key:"getLanguageId",value:function(e){return this._source.getLanguageId(this._firstTokenIndex+e)}},{key:"getLineContent",value:function(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}},{key:"equals",value:function(t){return t instanceof e&&(this._startOffset===t._startOffset&&this._endOffset===t._endOffset&&this._deltaOffset===t._deltaOffset&&this._source.slicedEquals(t._source,this._firstTokenIndex,this._tokensCount))}},{key:"getCount",value:function(){return this._tokensCount}},{key:"getForeground",value:function(e){return this._source.getForeground(this._firstTokenIndex+e)}},{key:"getEndOffset",value:function(e){var t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}},{key:"getClassName",value:function(e){return this._source.getClassName(this._firstTokenIndex+e)}},{key:"getInlineStyle",value:function(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}},{key:"getPresentation",value:function(e){return this._source.getPresentation(this._firstTokenIndex+e)}},{key:"findTokenIndexAtOffset",value:function(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}]),e}()},83464:function(e,t,n){n.d(t,{Y:function(){return l}});var i=n(29439),o=n(15671),r=n(43144),s=n(10849),a=n(30788),u=n(63636),l=function(){function e(t,n){(0,o.Z)(this,e),this._startLineNumber=t,this._tokens=n,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}return(0,r.Z)(e,[{key:"startLineNumber",get:function(){return this._startLineNumber}},{key:"endLineNumber",get:function(){return this._endLineNumber}},{key:"toString",value:function(){return this._tokens.toString(this._startLineNumber)}},{key:"_updateEndLineNumber",value:function(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}},{key:"isEmpty",value:function(){return this._tokens.isEmpty()}},{key:"getLineTokens",value:function(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}},{key:"getRange",value:function(){var e=this._tokens.getRange();return e?new a.e(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn):e}},{key:"removeTokens",value:function(e){var t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}},{key:"split",value:function(t){var n=t.startLineNumber-this._startLineNumber,o=t.endLineNumber-this._startLineNumber,r=this._tokens.split(n,t.startColumn-1,o,t.endColumn-1),s=(0,i.Z)(r,3),a=s[0],u=s[1],l=s[2];return[new e(this._startLineNumber,a),new e(this._startLineNumber+l,u)]}},{key:"applyEdit",value:function(e,t){var n=(0,u.Q)(t),o=(0,i.Z)(n,3),r=o[0],s=o[1],a=o[2];this.acceptEdit(e,r,s,a,t.length>0?t.charCodeAt(0):0)}},{key:"acceptEdit",value:function(e,t,n,i,o){this._acceptDeleteRange(e),this._acceptInsertText(new s.L(e.startLineNumber,e.startColumn),t,n,i,o),this._updateEndLineNumber()}},{key:"_acceptDeleteRange",value:function(e){if(e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn){var t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){var i=n-t;this._startLineNumber-=i}else{var o=this._tokens.getMaxDeltaLine();if(!(t>=o+1)){if(t<0&&n>=o+1)return this._startLineNumber=0,void this._tokens.clear();if(t<0){var r=-t;this._startLineNumber-=r,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}}}},{key:"_acceptInsertText",value:function(e,t,n,i,o){if(0!==t||0!==n){var r=e.lineNumber-this._startLineNumber;if(r<0)this._startLineNumber+=t;else r>=this._tokens.getMaxDeltaLine()+1||this._tokens.acceptInsertText(r,e.column-1,t,n,i,o)}}}],[{key:"create",value:function(t,n){return new e(t,new h(n))}}]),e}(),h=function(){function e(t){(0,o.Z)(this,e),this._tokens=t,this._tokenCount=t.length/4}return(0,r.Z)(e,[{key:"toString",value:function(e){for(var t=[],n=0;n<this._tokenCount;n++)t.push("(".concat(this._getDeltaLine(n)+e,",").concat(this._getStartCharacter(n),"-").concat(this._getEndCharacter(n),")"));return"[".concat(t.join(","),"]")}},{key:"getMaxDeltaLine",value:function(){var e=this._getTokenCount();return 0===e?-1:this._getDeltaLine(e-1)}},{key:"getRange",value:function(){var e=this._getTokenCount();if(0===e)return null;var t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),i=this._getEndCharacter(e-1);return new a.e(0,t+1,n,i+1)}},{key:"_getTokenCount",value:function(){return this._tokenCount}},{key:"_getDeltaLine",value:function(e){return this._tokens[4*e]}},{key:"_getStartCharacter",value:function(e){return this._tokens[4*e+1]}},{key:"_getEndCharacter",value:function(e){return this._tokens[4*e+2]}},{key:"isEmpty",value:function(){return 0===this._getTokenCount()}},{key:"getLineTokens",value:function(e){for(var t=0,n=this._getTokenCount()-1;t<n;){var i=t+Math.floor((n-t)/2),o=this._getDeltaLine(i);if(o<e)t=i+1;else{if(!(o>e)){for(var r=i;r>t&&this._getDeltaLine(r-1)===e;)r--;for(var s=i;s<n&&this._getDeltaLine(s+1)===e;)s++;return new c(this._tokens.subarray(4*r,4*s+4))}n=i-1}}return this._getDeltaLine(t)===e?new c(this._tokens.subarray(4*t,4*t+4)):null}},{key:"clear",value:function(){this._tokenCount=0}},{key:"removeTokens",value:function(e,t,n,i){for(var o=this._tokens,r=this._tokenCount,s=0,a=!1,u=0,l=0;l<r;l++){var h=4*l,c=o[h],f=o[h+1],d=o[h+2],g=o[h+3];if((c>e||c===e&&d>=t)&&(c<n||c===n&&f<=i))a=!0;else{if(0===s&&(u=c),a){var v=4*s;o[v]=c-u,o[v+1]=f,o[v+2]=d,o[v+3]=g}s++}}return this._tokenCount=s,u}},{key:"split",value:function(t,n,i,o){for(var r=this._tokens,s=this._tokenCount,a=[],u=[],l=a,h=0,c=0,f=0;f<s;f++){var d=4*f,g=r[d],v=r[d+1],m=r[d+2],p=r[d+3];if(g>t||g===t&&m>=n){if(g<i||g===i&&v<=o)continue;l!==u&&(l=u,h=0,c=g)}l[h++]=g-c,l[h++]=v,l[h++]=m,l[h++]=p}return[new e(new Uint32Array(a)),new e(new Uint32Array(u)),c]}},{key:"acceptDeleteRange",value:function(e,t,n,i,o){for(var r=this._tokens,s=this._tokenCount,a=i-t,u=0,l=!1,h=0;h<s;h++){var c=4*h,f=r[c],d=r[c+1],g=r[c+2],v=r[c+3];if(f<t||f===t&&g<=n)u++;else{if(f===t&&d<n)f===i&&g>o?g-=o-n:g=n;else if(f===t&&d===n){if(!(f===i&&g>o)){l=!0;continue}g-=o-n}else if(f<i||f===i&&d<o){if(!(f===i&&g>o)){l=!0;continue}g=f===t?(d=n)+(g-o):(d=0)+(g-o)}else if(f>i){if(0===a&&!l){u=s;break}f-=a}else{if(!(f===i&&d>=o))throw new Error("Not possible!");e&&0===f&&(d+=e,g+=e),f-=a,d-=o-n,g-=o-n}var m=4*u;r[m]=f,r[m+1]=d,r[m+2]=g,r[m+3]=v,u++}}this._tokenCount=u}},{key:"acceptInsertText",value:function(e,t,n,i,o,r){for(var s=0===n&&1===i&&(r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122),a=this._tokens,u=this._tokenCount,l=0;l<u;l++){var h=4*l,c=a[h],f=a[h+1],d=a[h+2];if(!(c<e||c===e&&d<t)){if(c===e&&d===t){if(!s)continue;d+=1}else if(c===e&&f<t&&t<d)0===n?d+=i:d=t;else{if(c===e&&f===t&&s)continue;if(c===e)if(c+=n,0===n)f+=i,d+=i;else{var g=d-f;d=(f=o+(f-t))+g}else c+=n}a[h]=c,a[h+1]=f,a[h+2]=d}}}}]),e}(),c=function(){function e(t){(0,o.Z)(this,e),this._tokens=t}return(0,r.Z)(e,[{key:"getCount",value:function(){return this._tokens.length/4}},{key:"getStartCharacter",value:function(e){return this._tokens[4*e+1]}},{key:"getEndCharacter",value:function(e){return this._tokens[4*e+2]}},{key:"getMetadata",value:function(e){return this._tokens[4*e+3]}}]),e}()},22695:function(e,t,n){n.d(t,{u:function(){return l}});var i=n(37762),o=n(29439),r=n(15671),s=n(43144),a=n(71881),u=n(58705),l=function(){function e(t){(0,r.Z)(this,e),this._pieces=[],this._isComplete=!1,this._languageIdCodec=t}return(0,s.Z)(e,[{key:"flush",value:function(){this._pieces=[],this._isComplete=!1}},{key:"isEmpty",value:function(){return 0===this._pieces.length}},{key:"set",value:function(e,t){this._pieces=e||[],this._isComplete=t}},{key:"setPartial",value:function(e,t){var n=e;if(t.length>0){var i=t[0].getRange(),r=t[t.length-1].getRange();if(!i||!r)return e;n=e.plusRange(i).plusRange(r)}for(var s=null,u=0,l=this._pieces.length;u<l;u++){var h=this._pieces[u];if(!(h.endLineNumber<n.startLineNumber)){if(h.startLineNumber>n.endLineNumber){s=s||{index:u};break}if(h.removeTokens(n),h.isEmpty())this._pieces.splice(u,1),u--,l--;else if(!(h.endLineNumber<n.startLineNumber))if(h.startLineNumber>n.endLineNumber)s=s||{index:u};else{var c=h.split(n),f=(0,o.Z)(c,2),d=f[0],g=f[1];d.isEmpty()?s=s||{index:u}:g.isEmpty()||(this._pieces.splice(u,1,d,g),u++,l++,s=s||{index:u})}}}return s=s||{index:this._pieces.length},t.length>0&&(this._pieces=a.Zv(this._pieces,s.index,t)),n}},{key:"isComplete",value:function(){return this._isComplete}},{key:"addSparseTokens",value:function(t,n){var i=this._pieces;if(0===i.length)return n;var o=i[e._findFirstPieceWithLine(i,t)].getLineTokens(t);if(!o)return n;for(var r=n.getCount(),s=o.getCount(),a=0,l=[],h=0,c=0,f=function(e,t){e!==c&&(c=e,l[h++]=e,l[h++]=t)},d=0;d<s;d++){for(var g=o.getStartCharacter(d),v=o.getEndCharacter(d),m=o.getMetadata(d),p=((1&m?1024:0)|(2&m?2048:0)|(4&m?4096:0)|(8&m?8192:0)|(16&m?8372224:0)|(32&m?4286578688:0))>>>0,_=~p>>>0;a<r&&n.getEndOffset(a)<=g;)f(n.getEndOffset(a),n.getMetadata(a)),a++;for(a<r&&n.getStartOffset(a)<g&&f(g,n.getMetadata(a));a<r&&n.getEndOffset(a)<v;)f(n.getEndOffset(a),n.getMetadata(a)&_|m&p),a++;if(a<r)f(v,n.getMetadata(a)&_|m&p),n.getEndOffset(a)===v&&a++;else{var L=Math.min(Math.max(0,a-1),r-1);f(v,n.getMetadata(L)&_|m&p)}}for(;a<r;)f(n.getEndOffset(a),n.getMetadata(a)),a++;return new u.A(new Uint32Array(l),n.getLineContent(),this._languageIdCodec)}},{key:"acceptEdit",value:function(e,t,n,o,r){var s,a=(0,i.Z)(this._pieces);try{for(a.s();!(s=a.n()).done;){s.value.acceptEdit(e,t,n,o,r)}}catch(u){a.e(u)}finally{a.f()}}}],[{key:"_findFirstPieceWithLine",value:function(e,t){for(var n=0,i=e.length-1;n<i;){var o=n+Math.floor((i-n)/2);if(e[o].endLineNumber<t)n=o+1;else{if(!(e[o].startLineNumber>t)){for(;o>n&&e[o-1].startLineNumber<=t&&t<=e[o-1].endLineNumber;)o--;return o}i=o-1}}return n}}]),e}()},50381:function(e,t,n){n.d(t,{Kp:function(){return a},k:function(){return h}});var i=n(37762),o=n(15671),r=n(43144),s=n(26684),a=function(){function e(t,n,i,r){(0,o.Z)(this,e),this.startColumn=t,this.endColumn=n,this.className=i,this.type=r,this._lineDecorationBrand=void 0}return(0,r.Z)(e,null,[{key:"_equals",value:function(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}},{key:"equalsArr",value:function(t,n){var i=t.length;if(i!==n.length)return!1;for(var o=0;o<i;o++)if(!e._equals(t[o],n[o]))return!1;return!0}},{key:"extractWrapped",value:function(t,n,o){if(0===t.length)return t;var r,s=n+1,a=o+1,u=o-n,l=[],h=0,c=(0,i.Z)(t);try{for(c.s();!(r=c.n()).done;){var f=r.value;f.endColumn<=s||f.startColumn>=a||(l[h++]=new e(Math.max(1,f.startColumn-s+1),Math.min(u+1,f.endColumn-s+1),f.className,f.type))}}catch(d){c.e(d)}finally{c.f()}return l}},{key:"filter",value:function(t,n,i,o){if(0===t.length)return[];for(var r=[],s=0,a=0,u=t.length;a<u;a++){var l=t[a],h=l.range;if(!(h.endLineNumber<n||h.startLineNumber>n)&&(!h.isEmpty()||0!==l.type&&3!==l.type)){var c=h.startLineNumber===n?h.startColumn:i,f=h.endLineNumber===n?h.endColumn:o;r[s++]=new e(c,f,l.inlineClassName,l.type)}}return r}},{key:"_typeCompare",value:function(e,t){var n=[2,0,1,3];return n[e]-n[t]}},{key:"compare",value:function(t,n){if(t.startColumn!==n.startColumn)return t.startColumn-n.startColumn;if(t.endColumn!==n.endColumn)return t.endColumn-n.endColumn;var i=e._typeCompare(t.type,n.type);return 0!==i?i:t.className!==n.className?t.className<n.className?-1:1:0}}]),e}(),u=(0,r.Z)((function e(t,n,i,r){(0,o.Z)(this,e),this.startOffset=t,this.endOffset=n,this.className=i,this.metadata=r})),l=function(){function e(){(0,o.Z)(this,e),this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}return(0,r.Z)(e,[{key:"consumeLowerThan",value:function(t,n,i){for(;this.count>0&&this.stopOffsets[0]<t;){for(var o=0;o+1<this.count&&this.stopOffsets[o]===this.stopOffsets[o+1];)o++;i.push(new u(n,this.stopOffsets[o],this.classNames.join(" "),e._metadata(this.metadata))),n=this.stopOffsets[o]+1,this.stopOffsets.splice(0,o+1),this.classNames.splice(0,o+1),this.metadata.splice(0,o+1),this.count-=o+1}return this.count>0&&n<t&&(i.push(new u(n,t-1,this.classNames.join(" "),e._metadata(this.metadata))),n=t),n}},{key:"insert",value:function(e,t,n){if(0===this.count||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(var i=0;i<this.count;i++)if(this.stopOffsets[i]>=e){this.stopOffsets.splice(i,0,e),this.classNames.splice(i,0,t),this.metadata.splice(i,0,n);break}this.count++}}],[{key:"_metadata",value:function(e){for(var t=0,n=0,i=e.length;n<i;n++)t|=e[n];return t}}]),e}(),h=function(){function e(){(0,o.Z)(this,e)}return(0,r.Z)(e,null,[{key:"normalize",value:function(e,t){if(0===t.length)return[];for(var n=[],i=new l,o=0,r=0,a=t.length;r<a;r++){var u=t[r],h=u.startColumn,c=u.endColumn,f=u.className,d=1===u.type?2:2===u.type?4:0;if(h>1){var g=e.charCodeAt(h-2);s.ZG(g)&&h--}if(c>1){var v=e.charCodeAt(c-2);s.ZG(v)&&c--}var m=h-1,p=c-2;o=i.consumeLowerThan(m,o,n),0===i.count&&(o=m),i.insert(p,f,d)}return i.consumeLowerThan(1073741824,o,n),n}}]),e}()},78699:function(e,t,n){n.d(t,{zG:function(){return h},IJ:function(){return c},Nd:function(){return f},d1:function(){return v},tF:function(){return p}});var i=n(37762),o=n(15671),r=n(43144),s=n(26684),a=n(63633),u=n(50381),l=function(){function e(t,n,i){(0,o.Z)(this,e),this._linePartBrand=void 0,this.endIndex=t,this.type=n,this.metadata=i}return(0,r.Z)(e,[{key:"isWhitespace",value:function(){return!!(1&this.metadata)}},{key:"isPseudoAfter",value:function(){return!!(4&this.metadata)}}]),e}(),h=function(){function e(t,n){(0,o.Z)(this,e),this.startOffset=t,this.endOffset=n}return(0,r.Z)(e,[{key:"equals",value:function(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}]),e}(),c=function(){function e(t,n,i,r,s,a,l,h,c,f,d,g,v,m,p,_,L,k,C){(0,o.Z)(this,e),this.useMonospaceOptimizations=t,this.canUseHalfwidthRightwardsArrow=n,this.lineContent=i,this.continuesWithWrappedLine=r,this.isBasicASCII=s,this.containsRTL=a,this.fauxIndentLength=l,this.lineTokens=h,this.lineDecorations=c.sort(u.Kp.compare),this.tabSize=f,this.startVisibleColumn=d,this.spaceWidth=g,this.stopRenderingLineAfter=p,this.renderWhitespace="all"===_?4:"boundary"===_?1:"selection"===_?2:"trailing"===_?3:0,this.renderControlCharacters=L,this.fontLigatures=k,this.selectionsOnLine=C&&C.sort((function(e,t){return e.startOffset<t.startOffset?-1:1})),Math.abs(m-g)<Math.abs(v-g)?(this.renderSpaceWidth=m,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=v,this.renderSpaceCharCode=183)}return(0,r.Z)(e,[{key:"sameSelection",value:function(e){if(null===this.selectionsOnLine)return null===e;if(null===e)return!1;if(e.length!==this.selectionsOnLine.length)return!1;for(var t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}},{key:"equals",value:function(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&u.Kp.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}]),e}(),f=(0,r.Z)((function e(t,n){(0,o.Z)(this,e),this.partIndex=t,this.charIndex=n})),d=function(){function e(t,n){(0,o.Z)(this,e),this.length=t,this._data=new Uint32Array(this.length),this._absoluteOffsets=new Uint32Array(this.length)}return(0,r.Z)(e,[{key:"setColumnInfo",value:function(e,t,n,i){var o=(t<<16|n<<0)>>>0;this._data[e-1]=o,this._absoluteOffsets[e-1]=i+n}},{key:"getAbsoluteOffset",value:function(e){return 0===this._absoluteOffsets.length?0:this._absoluteOffsets[e-1]}},{key:"charOffsetToPartData",value:function(e){return 0===this.length?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}},{key:"getDomPosition",value:function(t){var n=this.charOffsetToPartData(t-1),i=e.getPartIndex(n),o=e.getCharIndex(n);return new f(i,o)}},{key:"getColumn",value:function(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}},{key:"partDataToCharOffset",value:function(t,n,i){if(0===this.length)return 0;for(var o=(t<<16|i<<0)>>>0,r=0,s=this.length-1;r+1<s;){var a=r+s>>>1,u=this._data[a];if(u===o)return a;u>o?s=a:r=a}if(r===s)return r;var l=this._data[r],h=this._data[s];if(l===o)return r;if(h===o)return s;var c=e.getPartIndex(l);return i-e.getCharIndex(l)<=(c!==e.getPartIndex(h)?n:e.getCharIndex(h))-i?r:s}}],[{key:"getPartIndex",value:function(e){return(4294901760&e)>>>16}},{key:"getCharIndex",value:function(e){return(65535&e)>>>0}}]),e}(),g=(0,r.Z)((function e(t,n,i){(0,o.Z)(this,e),this._renderLineOutputBrand=void 0,this.characterMapping=t,this.containsRTL=n,this.containsForeignElements=i}));function v(e,t){if(0===e.lineContent.length){if(e.lineDecorations.length>0){t.appendASCIIString("<span>");var n,o=0,r=0,a=0,h=(0,i.Z)(e.lineDecorations);try{for(h.s();!(n=h.n()).done;){var c=n.value;1!==c.type&&2!==c.type||(t.appendASCIIString('<span class="'),t.appendASCIIString(c.className),t.appendASCIIString('"></span>'),1===c.type&&(a|=1,o++),2===c.type&&(a|=2,r++))}}catch(v){h.e(v)}finally{h.f()}t.appendASCIIString("</span>");var f=new d(1,o+r);return f.setColumnInfo(1,o,0,0),new g(f,!1,a)}return t.appendASCIIString("<span><span></span></span>"),new g(new d(0,0),!1,0)}return function(e,t){var n=e.fontIsMonospace,i=e.canUseHalfwidthRightwardsArrow,o=e.containsForeignElements,r=e.lineContent,a=e.len,u=e.isOverflowing,l=e.parts,h=e.fauxIndentLength,c=e.tabSize,f=e.startVisibleColumn,v=e.containsRTL,m=e.spaceWidth,p=e.renderSpaceCharCode,_=e.renderWhitespace,C=e.renderControlCharacters,y=new d(a+1,l.length),w=!1,b=0,I=f,V=0,N=0,S=0,M=0;v?t.appendASCIIString('<span dir="ltr">'):t.appendASCIIString("<span>");for(var O=0,T=l.length;O<T;O++){M+=S;var P=l[O],x=P.endIndex,D=P.type,Z=0!==_&&P.isWhitespace(),E=Z&&!n&&("mtkw"===D||!o),A=b===x&&P.isPseudoAfter();if(V=0,t.appendASCIIString('<span class="'),t.appendASCIIString(E?"mtkz":D),t.appendASCII(34),Z){for(var W=0,R=b,j=I;R<x;R++){var H=0|(9===r.charCodeAt(R)?c-j%c:1);W+=H,R>=h&&(j+=H)}for(E&&(t.appendASCIIString(' style="width:'),t.appendASCIIString(String(m*W)),t.appendASCIIString('px"')),t.appendASCII(62);b<x;b++){y.setColumnInfo(b+1,O-N,V,M),N=0;var F=void 0;if(9===r.charCodeAt(b)){F=c-I%c|0,!i||F>1?t.write1(8594):t.write1(65515);for(var z=2;z<=F;z++)t.write1(160)}else F=1,t.write1(p);V+=F,b>=h&&(I+=F)}S=W}else{var B=0;for(t.appendASCII(62);b<x;b++){y.setColumnInfo(b+1,O-N,V,M),N=0;var U=r.charCodeAt(b),q=1,Q=1;switch(U){case 9:Q=q=c-I%c;for(var G=1;G<=q;G++)t.write1(160);break;case 32:t.write1(160);break;case 60:t.appendASCIIString("&lt;");break;case 62:t.appendASCIIString("&gt;");break;case 38:t.appendASCIIString("&amp;");break;case 0:C?t.write1(9216):t.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:t.write1(65533);break;default:s.K7(U)&&Q++,C&&U<32?t.write1(9216+U):C&&127===U?t.write1(9249):C&&L(U)?(t.appendASCIIString("[U+"),t.appendASCIIString(k(U)),t.appendASCIIString("]"),q=8):t.write1(U)}V+=q,B+=q,b>=h&&(I+=Q)}S=B}A?N++:N=0,b>=a&&!w&&P.isPseudoAfter()&&(w=!0,y.setColumnInfo(b+1,O,V,M)),t.appendASCIIString("</span>")}w||y.setColumnInfo(a+1,l.length-1,V,M);u&&t.appendASCIIString("<span>&hellip;</span>");return t.appendASCIIString("</span>"),new g(y,v,o)}(function(e){var t,n,o=e.lineContent;-1!==e.stopRenderingLineAfter&&e.stopRenderingLineAfter<o.length?(t=!0,n=e.stopRenderingLineAfter):(t=!1,n=o.length);var r=function(e,t,n){var i=[],o=0;t>0&&(i[o++]=new l(t,"",0));for(var r=0,s=e.getCount();r<s;r++){var a=e.getEndOffset(r);if(!(a<=t)){var u=e.getClassName(r);if(a>=n){i[o++]=new l(n,u,0);break}i[o++]=new l(a,u,0)}}return i}(e.lineTokens,e.fauxIndentLength,n);e.renderControlCharacters&&!e.isBasicASCII&&(r=function(e,t){var n,o=[],r=new l(0,"",0),s=0,a=(0,i.Z)(t);try{for(a.s();!(n=a.n()).done;){for(var u=n.value,h=u.endIndex;s<h;s++){L(e.charCodeAt(s))&&(s>r.endIndex&&(r=new l(s,u.type,u.metadata),o.push(r)),r=new l(s+1,"mtkcontrol",u.metadata),o.push(r))}s>r.endIndex&&(r=new l(h,u.type,u.metadata),o.push(r))}}catch(v){a.e(v)}finally{a.f()}return o}(o,r));(4===e.renderWhitespace||1===e.renderWhitespace||2===e.renderWhitespace&&e.selectionsOnLine||3===e.renderWhitespace)&&(r=function(e,t,n,i){var o,r=e.continuesWithWrappedLine,a=e.fauxIndentLength,u=e.tabSize,h=e.startVisibleColumn,c=e.useMonospaceOptimizations,f=e.selectionsOnLine,d=1===e.renderWhitespace,g=3===e.renderWhitespace,v=e.renderSpaceWidth!==e.spaceWidth,m=[],p=0,_=0,L=i[_].type,k=i[_].endIndex,C=i.length,y=!1,w=s.LC(t);-1===w?(y=!0,w=n,o=n):o=s.ow(t);for(var b=!1,I=0,V=f&&f[I],N=h%u,S=a;S<n;S++){var M=t.charCodeAt(S);V&&S>=V.endOffset&&(I++,V=f&&f[I]);var O=void 0;if(S<w||S>o)O=!0;else if(9===M)O=!0;else if(32===M)if(d)if(b)O=!0;else{var T=S+1<n?t.charCodeAt(S+1):0;O=32===T||9===T}else O=!0;else O=!1;if(O&&f&&(O=!!V&&V.startOffset<=S&&V.endOffset>S),O&&g&&(O=y||S>o),b){if(!O||!c&&N>=u){if(v)for(var P=(p>0?m[p-1].endIndex:a)+1;P<=S;P++)m[p++]=new l(P,"mtkw",1);else m[p++]=new l(S,"mtkw",1);N%=u}}else(S===k||O&&S>a)&&(m[p++]=new l(S,L,0),N%=u);for(9===M?N=u:s.K7(M)?N+=2:N++,b=O;S===k&&++_<C;)L=i[_].type,k=i[_].endIndex}var x=!1;if(b)if(r&&d){var D=n>0?t.charCodeAt(n-1):0,Z=n>1?t.charCodeAt(n-2):0;32===D&&32!==Z&&9!==Z||(x=!0)}else x=!0;if(x)if(v)for(var E=(p>0?m[p-1].endIndex:a)+1;E<=n;E++)m[p++]=new l(E,"mtkw",1);else m[p++]=new l(n,"mtkw",1);else m[p++]=new l(n,L,0);return m}(e,o,n,r));var a=0;if(e.lineDecorations.length>0){for(var h=0,c=e.lineDecorations.length;h<c;h++){var f=e.lineDecorations[h];3===f.type||1===f.type?a|=1:2===f.type&&(a|=2)}r=function(e,t,n,i){i.sort(u.Kp.compare);for(var o=u.k.normalize(e,i),r=o.length,s=0,a=[],h=0,c=0,f=0,d=n.length;f<d;f++){for(var g=n[f],v=g.endIndex,m=g.type,p=g.metadata;s<r&&o[s].startOffset<v;){var _=o[s];if(_.startOffset>c&&(c=_.startOffset,a[h++]=new l(c,m,p)),!(_.endOffset+1<=v)){c=v,a[h++]=new l(c,m+" "+_.className,p|_.metadata);break}c=_.endOffset+1,a[h++]=new l(c,m+" "+_.className,p|_.metadata),s++}v>c&&(c=v,a[h++]=new l(c,m,p))}var L=n[n.length-1].endIndex;if(s<r&&o[s].startOffset===L)for(;s<r&&o[s].startOffset===L;){var k=o[s];a[h++]=new l(c,k.className,k.metadata),s++}return a}(o,0,r,e.lineDecorations)}e.containsRTL||(r=function(e,t,n){var i=0,o=[],r=0;if(n)for(var s=0,a=t.length;s<a;s++){var u=t[s],h=u.endIndex;if(i+50<h){for(var c=u.type,f=u.metadata,d=-1,g=i,v=i;v<h;v++)32===e.charCodeAt(v)&&(d=v),-1!==d&&v-g>=50&&(o[r++]=new l(d+1,c,f),g=d+1,d=-1);g!==h&&(o[r++]=new l(h,c,f))}else o[r++]=u;i=h}else for(var m=0,p=t.length;m<p;m++){var _=t[m],L=_.endIndex,k=L-i;if(k>50){for(var C=_.type,y=_.metadata,w=Math.ceil(k/50),b=1;b<w;b++){var I=i+50*b;o[r++]=new l(I,C,y)}o[r++]=new l(L,C,y)}else o[r++]=_;i=L}return o}(o,r,!e.isBasicASCII||e.fontLigatures));return new _(e.useMonospaceOptimizations,e.canUseHalfwidthRightwardsArrow,o,n,t,r,a,e.fauxIndentLength,e.tabSize,e.startVisibleColumn,e.containsRTL,e.spaceWidth,e.renderSpaceCharCode,e.renderWhitespace,e.renderControlCharacters)}(e),t)}var m=(0,r.Z)((function e(t,n,i,r){(0,o.Z)(this,e),this.characterMapping=t,this.html=n,this.containsRTL=i,this.containsForeignElements=r}));function p(e){var t=(0,a.l$)(1e4),n=v(e,t);return new m(n.characterMapping,t.build(),n.containsRTL,n.containsForeignElements)}var _=(0,r.Z)((function e(t,n,i,r,s,a,u,l,h,c,f,d,g,v,m){(0,o.Z)(this,e),this.fontIsMonospace=t,this.canUseHalfwidthRightwardsArrow=n,this.lineContent=i,this.len=r,this.isOverflowing=s,this.parts=a,this.containsForeignElements=u,this.fauxIndentLength=l,this.tabSize=h,this.startVisibleColumn=c,this.containsRTL=f,this.spaceWidth=d,this.renderSpaceCharCode=g,this.renderWhitespace=v,this.renderControlCharacters=m}));function L(e){return e<32?9!==e:127===e||(e>=8234&&e<=8238||e>=8294&&e<=8297||e>=8206&&e<=8207||1564===e)}function k(e){return e.toString(16).toUpperCase().padStart(4,"0")}},14660:function(e,t,n){n.d(t,{x:function(){return s}});var i=n(15671),o=n(43144),r=n(30788),s=function(){function e(t,n,o,s){(0,i.Z)(this,e),this.selections=t,this.startLineNumber=0|n.startLineNumber,this.endLineNumber=0|n.endLineNumber,this.relativeVerticalOffset=n.relativeVerticalOffset,this.bigNumbersDelta=0|n.bigNumbersDelta,this.whitespaceViewportData=o,this._model=s,this.visibleRange=new r.e(n.startLineNumber,this._model.getLineMinColumn(n.startLineNumber),n.endLineNumber,this._model.getLineMaxColumn(n.endLineNumber))}return(0,o.Z)(e,[{key:"getViewLineRenderingData",value:function(e){return this._model.getViewLineRenderingData(this.visibleRange,e)}},{key:"getDecorationsInViewport",value:function(){return this._model.getDecorationsInViewport(this.visibleRange)}}]),e}()},85551:function(e,t,n){n.d(t,{E:function(){return c}});var i=n(15671),o=n(43144),r=n(60136),s=n(43668),a=n(28941),u=n(10526),l=n(65782),h=n(49500),c=function(e){(0,r.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.call(this))._onDidChange=new a.Q5,e.onDidChange=e._onDidChange.event,e._updateColorMap(),e._register(h.RW.onDidChange((function(t){t.changedColorMap&&e._updateColorMap()}))),e}return(0,o.Z)(n,[{key:"_updateColorMap",value:function(){var e=h.RW.getColorMap();if(!e)return this._colors=[l.h.Empty],void(this._backgroundIsLight=!0);this._colors=[l.h.Empty];for(var t=1;t<e.length;t++){var n=e[t].rgba;this._colors[t]=new l.h(n.r,n.g,n.b,Math.round(255*n.a))}var i=e[2].getRelativeLuminance();this._backgroundIsLight=i>=.5,this._onDidChange.fire(void 0)}},{key:"getColor",value:function(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}},{key:"backgroundIsLight",value:function(){return this._backgroundIsLight}}],[{key:"getInstance",value:function(){return this._INSTANCE||(this._INSTANCE=(0,u.dk)(new n)),this._INSTANCE}}]),n}(u.JT);c._INSTANCE=null},2206:function(e,t,n){n.d(t,{gD:function(){return u}});var i=n(15671),o=n(43144),r=n(64272),s=n(10849),a=n(36158),u=function(){function e(t,n,o,r,s){(0,i.Z)(this,e),this.injectionOffsets=t,this.injectionOptions=n,this.breakOffsets=o,this.breakOffsetsVisibleColumn=r,this.wrappedTextIndentLength=s}return(0,o.Z)(e,[{key:"getOutputLineCount",value:function(){return this.breakOffsets.length}},{key:"getMinOutputOffset",value:function(e){return e>0?this.wrappedTextIndentLength:0}},{key:"getLineLength",value:function(e){var t=e>0?this.breakOffsets[e-1]:0,n=this.breakOffsets[e]-t;return e>0&&(n+=this.wrappedTextIndentLength),n}},{key:"getMaxOutputOffset",value:function(e){return this.getLineLength(e)}},{key:"translateToInputOffset",value:function(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));var n=0===e?t:this.breakOffsets[e-1]+t;if(null!==this.injectionOffsets)for(var i=0;i<this.injectionOffsets.length&&n>this.injectionOffsets[i];i++)n<this.injectionOffsets[i]+this.injectionOptions[i].content.length?n=this.injectionOffsets[i]:n-=this.injectionOptions[i].content.length;return n}},{key:"translateToOutputPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e;if(null!==this.injectionOffsets)for(var i=0;i<this.injectionOffsets.length&&!(e<this.injectionOffsets[i])&&(1===t||e!==this.injectionOffsets[i]);i++)n+=this.injectionOptions[i].content.length;return this.offsetInInputWithInjectionsToOutputPosition(n,t)}},{key:"offsetInInputWithInjectionsToOutputPosition",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=0,i=this.breakOffsets.length-1,o=0,r=0;n<=i;){o=n+(i-n)/2|0;var s=this.breakOffsets[o];if(r=o>0?this.breakOffsets[o-1]:0,0===t)if(e<=r)i=o-1;else{if(!(e>s))break;n=o+1}else if(e<r)i=o-1;else{if(!(e>=s))break;n=o+1}}var a=e-r;return o>0&&(a+=this.wrappedTextIndentLength),new c(o,a)}},{key:"normalizeOutputPosition",value:function(e,t,n){if(null!==this.injectionOffsets){var i=this.outputPositionToOffsetInInputWithInjections(e,t),o=this.normalizeOffsetInInputWithInjectionsAroundInjections(i,n);if(o!==i)return this.offsetInInputWithInjectionsToOutputPosition(o,n)}if(0===n){if(e>0&&t===this.getMinOutputOffset(e))return new c(e-1,this.getMaxOutputOffset(e-1))}else if(1===n){if(e<this.getOutputLineCount()-1&&t===this.getMaxOutputOffset(e))return new c(e+1,this.getMinOutputOffset(e+1))}return new c(e,t)}},{key:"outputPositionToOffsetInInputWithInjections",value:function(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}},{key:"normalizeOffsetInInputWithInjectionsAroundInjections",value:function(e,t){var n=this.getInjectedTextAtOffset(e);if(!n)return e;if(2===t){if(e===n.offsetInInputWithInjections+n.length&&l(this.injectionOptions[n.injectedTextIndex].cursorStops))return n.offsetInInputWithInjections+n.length;var i=n.offsetInInputWithInjections;if(h(this.injectionOptions[n.injectedTextIndex].cursorStops))return i;for(var o=n.injectedTextIndex-1;o>=0&&this.injectionOffsets[o]===this.injectionOffsets[n.injectedTextIndex]&&!l(this.injectionOptions[o].cursorStops)&&(i-=this.injectionOptions[o].content.length,!h(this.injectionOptions[o].cursorStops));)o--;return i}if(1===t){for(var s=n.offsetInInputWithInjections+n.length,a=n.injectedTextIndex;a+1<this.injectionOffsets.length&&this.injectionOffsets[a+1]===this.injectionOffsets[a];)s+=this.injectionOptions[a+1].content.length,a++;return s}if(0===t){for(var u=n.offsetInInputWithInjections,c=n.injectedTextIndex;c-1>=0&&this.injectionOffsets[c-1]===this.injectionOffsets[c];)u-=this.injectionOptions[c-1].content.length,c--;return u}(0,r.vE)(t)}},{key:"getInjectedText",value:function(e,t){var n=this.outputPositionToOffsetInInputWithInjections(e,t),i=this.getInjectedTextAtOffset(n);return i?{options:this.injectionOptions[i.injectedTextIndex]}:null}},{key:"getInjectedTextAtOffset",value:function(e){var t=this.injectionOffsets,n=this.injectionOptions;if(null!==t)for(var i=0,o=0;o<t.length;o++){var r=n[o].content.length,s=t[o]+i,a=t[o]+i+r;if(s>e)break;if(e<=a)return{injectedTextIndex:o,offsetInInputWithInjections:s,length:r};i+=r}}}]),e}();function l(e){return null===e||void 0===e||(e===a.RM.Right||e===a.RM.Both)}function h(e){return null===e||void 0===e||(e===a.RM.Left||e===a.RM.Both)}var c=function(){function e(t,n){(0,i.Z)(this,e),this.outputLineIndex=t,this.outputOffset=n}return(0,o.Z)(e,[{key:"toString",value:function(){return"".concat(this.outputLineIndex,":").concat(this.outputOffset)}},{key:"toPosition",value:function(e){return new s.L(e+this.outputLineIndex,this.outputOffset+1)}}]),e}()},49304:function(e,t,n){n.d(t,{p:function(){return c}});var i=n(60136),o=n(43668),r=n(15671),s=n(43144),a=n(26684),u=n(70779),l=n(94583),h=n(2206),c=function(){function e(t,n){(0,r.Z)(this,e),this.classifier=new f(t,n)}return(0,s.Z)(e,[{key:"createLineBreaksComputer",value:function(e,t,n,i){var o=this,r=[],s=[],a=[];return{addRequest:function(e,t,n){r.push(e),s.push(t),a.push(n)},finalize:function(){for(var u=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,l=[],h=0,c=r.length;h<c;h++){var f=s[h],p=a[h];!p||p.injectionOptions||f?l[h]=m(o.classifier,r[h],f,t,n,u,i):l[h]=v(o.classifier,p,r[h],t,n,u,i)}return d.length=0,g.length=0,l}}}}],[{key:"create",value:function(t){return new e(t.get(120),t.get(119))}}]),e}(),f=function(e){(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(e,i){var o;(0,r.Z)(this,n),o=t.call(this,0);for(var s=0;s<e.length;s++)o.set(e.charCodeAt(s),1);for(var a=0;a<i.length;a++)o.set(i.charCodeAt(a),2);return o}return(0,s.Z)(n,[{key:"get",value:function(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}]),n}(u.N),d=[],g=[];function v(e,t,n,i,o,r,s){if(-1===o)return null;var u=n.length;if(u<=1)return null;var l=t.breakOffsets,h=t.breakOffsetsVisibleColumn,c=k(n,i,o,r,s),f=o-c,v=d,m=g,_=0,C=0,y=0,w=o,b=l.length,I=0;if(I>=0)for(var V=Math.abs(h[I]-w);I+1<b;){var N=Math.abs(h[I+1]-w);if(N>=V)break;V=N,I++}for(;I<b;){var S=I<0?0:l[I],M=I<0?0:h[I];C>S&&(S=C,M=y);var O=0,T=0,P=0,x=0;if(M<=w){for(var D=M,Z=0===S?0:n.charCodeAt(S-1),E=0===S?0:e.get(Z),A=!0,W=S;W<u;W++){var R=W,j=n.charCodeAt(W),H=void 0,F=void 0;if(a.ZG(j)?(W++,H=0,F=2):(H=e.get(j),F=p(j,D,i,r)),R>C&&L(Z,E,j,H)&&(O=R,T=D),(D+=F)>w){R>C?(P=R,x=D-F):(P=W+1,x=D),D-T>f&&(O=0),A=!1;break}Z=j,E=H}if(A){_>0&&(v[_]=l[l.length-1],m[_]=h[l.length-1],_++);break}}if(0===O){for(var z=M,B=n.charCodeAt(S),U=e.get(B),q=!1,Q=S-1;Q>=C;Q--){var G=Q+1,J=n.charCodeAt(Q);if(9===J){q=!0;break}var K=void 0,$=void 0;if(a.YK(J)?(Q--,K=0,$=2):(K=e.get(J),$=a.K7(J)?r:1),z<=w){if(0===P&&(P=G,x=z),z<=w-f)break;if(L(J,K,B,U)){O=G,T=z;break}}z-=$,B=J,U=K}if(0!==O){var X=f-(x-T);if(X<=i){var Y=n.charCodeAt(P);X-(a.ZG(Y)?2:p(Y,x,i,r))<0&&(O=0)}}if(q){I--;continue}}if(0===O&&(O=P,T=x),O<=C){var ee=n.charCodeAt(C);a.ZG(ee)?(O=C+2,T=y+2):(O=C+1,T=y+p(ee,y,i,r))}for(C=O,v[_]=O,y=T,m[_]=T,_++,w=T+f;I<0||I<b&&h[I]<T;)I++;for(var te=Math.abs(h[I]-w);I+1<b;){var ne=Math.abs(h[I+1]-w);if(ne>=te)break;te=ne,I++}}return 0===_?null:(v.length=_,m.length=_,d=t.breakOffsets,g=t.breakOffsetsVisibleColumn,t.breakOffsets=v,t.breakOffsetsVisibleColumn=m,t.wrappedTextIndentLength=c,t)}function m(e,t,n,i,o,r,s){var u,c,f=l.gk.applyInjectedText(t,n);if(n&&n.length>0?(u=n.map((function(e){return e.options})),c=n.map((function(e){return e.column-1}))):(u=null,c=null),-1===o)return u?new h.gD(c,u,[f.length],[],0):null;var d=f.length;if(d<=1)return u?new h.gD(c,u,[f.length],[],0):null;var g=k(f,i,o,r,s),v=o-g,m=[],_=[],C=0,y=0,w=0,b=o,I=f.charCodeAt(0),V=e.get(I),N=p(I,0,i,r),S=1;a.ZG(I)&&(N+=1,I=f.charCodeAt(1),V=e.get(I),S++);for(var M=S;M<d;M++){var O=M,T=f.charCodeAt(M),P=void 0,x=void 0;a.ZG(T)?(M++,P=0,x=2):(P=e.get(T),x=p(T,N,i,r)),L(I,V,T,P)&&(y=O,w=N),(N+=x)>b&&((0===y||N-w>v)&&(y=O,w=N-x),m[C]=y,_[C]=w,C++,b=w+v,y=0),I=T,V=P}return 0!==C||n&&0!==n.length?(m[C]=d,_[C]=N,new h.gD(c,u,m,_,g)):null}function p(e,t,n,i){return 9===e?n-t%n:a.K7(e)||e<32?i:1}function _(e,t){return t-e%t}function L(e,t,n,i){return 32!==n&&(2===t||3===t&&2!==i||1===i||3===i&&1!==t)}function k(e,t,n,i,o){var r=0;if(0!==o){var s=a.LC(e);if(-1!==s){for(var u=0;u<s;u++){r+=9===e.charCodeAt(u)?_(r,t):1}for(var l=3===o?2:2===o?1:0,h=0;h<l;h++){r+=_(r,t)}r+i>n&&(r=0)}}return r}},55522:function(e,t,n){n.d(t,{EY:function(){return s},Tj:function(){return a}});var i=n(15671),o=n(43144),r=function(){function e(t,n,o){(0,i.Z)(this,e),this._colorZoneBrand=void 0,this.from=0|t,this.to=0|n,this.colorId=0|o}return(0,o.Z)(e,null,[{key:"compare",value:function(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}]),e}(),s=function(){function e(t,n,o){(0,i.Z)(this,e),this._overviewRulerZoneBrand=void 0,this.startLineNumber=t,this.endLineNumber=n,this.color=o,this._colorZone=null}return(0,o.Z)(e,[{key:"setColorZone",value:function(e){this._colorZone=e}},{key:"getColorZones",value:function(){return this._colorZone}}],[{key:"compare",value:function(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}}]),e}(),a=function(){function e(t){(0,i.Z)(this,e),this._getVerticalOffsetForLine=t,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}return(0,o.Z)(e,[{key:"getId2Color",value:function(){return this._id2Color}},{key:"setZones",value:function(e){this._zones=e,this._zones.sort(s.compare)}},{key:"setLineHeight",value:function(e){return this._lineHeight!==e&&(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e,this._colorZonesInvalid=!0}},{key:"getDOMWidth",value:function(){return this._domWidth}},{key:"getCanvasWidth",value:function(){return this._domWidth*this._pixelRatio}},{key:"setDOMWidth",value:function(e){return this._domWidth!==e&&(this._domWidth=e,this._colorZonesInvalid=!0,!0)}},{key:"getDOMHeight",value:function(){return this._domHeight}},{key:"getCanvasHeight",value:function(){return this._domHeight*this._pixelRatio}},{key:"setDOMHeight",value:function(e){return this._domHeight!==e&&(this._domHeight=e,this._colorZonesInvalid=!0,!0)}},{key:"getOuterHeight",value:function(){return this._outerHeight}},{key:"setOuterHeight",value:function(e){return this._outerHeight!==e&&(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}},{key:"resolveColorZones",value:function(){for(var e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),i=n/Math.floor(this._outerHeight),o=Math.floor(4*this._pixelRatio/2),s=[],a=0,u=this._zones.length;a<u;a++){var l=this._zones[a];if(!e){var h=l.getColorZones();if(h){s.push(h);continue}}var c=Math.floor(i*this._getVerticalOffsetForLine(l.startLineNumber)),f=Math.floor(i*(this._getVerticalOffsetForLine(l.endLineNumber)+t)),d=Math.floor((c+f)/2),g=f-d;g<o&&(g=o),d-g<0&&(d=g),d+g>n&&(d=n-g);var v=l.color,m=this._color2Id[v];m||(m=++this._lastAssignedId,this._color2Id[v]=m,this._id2Color[m]=v);var p=new r(d-g,d+g,m);l.setColorZone(p),s.push(p)}return this._colorZonesInvalid=!1,s.sort(r.compare),s}}]),e}()},8003:function(e,t,n){n.d(t,{A:function(){return s}});var i=n(15671),o=n(43144),r=function(){function e(t){(0,i.Z)(this,e),this._theme=t}return(0,o.Z)(e,[{key:"type",get:function(){return this._theme.type}},{key:"value",get:function(){return this._theme}},{key:"update",value:function(e){this._theme=e}},{key:"getColor",value:function(e){return this._theme.getColor(e)}}]),e}(),s=function(){function e(t,n,o){(0,i.Z)(this,e),this.configuration=t,this.theme=new r(n),this.model=o,this.viewLayout=o.viewLayout}return(0,o.Z)(e,[{key:"addEventHandler",value:function(e){this.model.addViewEventHandler(e)}},{key:"removeEventHandler",value:function(e){this.model.removeViewEventHandler(e)}}]),e}()},63344:function(e,t,n){n.d(t,{O:function(){return a}});var i=n(15671),o=n(43144),r=n(60136),s=n(43668),a=function(e){(0,r.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.call(this))._shouldRender=!0,e}return(0,o.Z)(n,[{key:"shouldRender",value:function(){return this._shouldRender}},{key:"forceShouldRender",value:function(){this._shouldRender=!0}},{key:"setShouldRender",value:function(){this._shouldRender=!0}},{key:"onDidRender",value:function(){this._shouldRender=!1}},{key:"onCompositionStart",value:function(e){return!1}},{key:"onCompositionEnd",value:function(e){return!1}},{key:"onConfigurationChanged",value:function(e){return!1}},{key:"onCursorStateChanged",value:function(e){return!1}},{key:"onDecorationsChanged",value:function(e){return!1}},{key:"onFlushed",value:function(e){return!1}},{key:"onFocusChanged",value:function(e){return!1}},{key:"onLanguageConfigurationChanged",value:function(e){return!1}},{key:"onLineMappingChanged",value:function(e){return!1}},{key:"onLinesChanged",value:function(e){return!1}},{key:"onLinesDeleted",value:function(e){return!1}},{key:"onLinesInserted",value:function(e){return!1}},{key:"onRevealRangeRequest",value:function(e){return!1}},{key:"onScrollChanged",value:function(e){return!1}},{key:"onThemeChanged",value:function(e){return!1}},{key:"onTokensChanged",value:function(e){return!1}},{key:"onTokensColorsChanged",value:function(e){return!1}},{key:"onZonesChanged",value:function(e){return!1}},{key:"handleEvents",value:function(e){for(var t=!1,n=0,i=e.length;n<i;n++){var o=e[n];switch(o.type){case 0:this.onCompositionStart(o)&&(t=!0);break;case 1:this.onCompositionEnd(o)&&(t=!0);break;case 2:this.onConfigurationChanged(o)&&(t=!0);break;case 3:this.onCursorStateChanged(o)&&(t=!0);break;case 4:this.onDecorationsChanged(o)&&(t=!0);break;case 5:this.onFlushed(o)&&(t=!0);break;case 6:this.onFocusChanged(o)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(o)&&(t=!0);break;case 8:this.onLineMappingChanged(o)&&(t=!0);break;case 9:this.onLinesChanged(o)&&(t=!0);break;case 10:this.onLinesDeleted(o)&&(t=!0);break;case 11:this.onLinesInserted(o)&&(t=!0);break;case 12:this.onRevealRangeRequest(o)&&(t=!0);break;case 13:this.onScrollChanged(o)&&(t=!0);break;case 15:this.onTokensChanged(o)&&(t=!0);break;case 14:this.onThemeChanged(o)&&(t=!0);break;case 16:this.onTokensColorsChanged(o)&&(t=!0);break;case 17:this.onZonesChanged(o)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(o)}}t&&(this._shouldRender=!0)}}]),n}(n(10526).JT)},28238:function(e,t,n){n.d(t,{JP:function(){return r},IN:function(){return s},x4:function(){return a},e$:function(){return u},vA:function(){return l},CL:function(){return h},SJ:function(){return c},_0:function(){return f},d8:function(){return d},il:function(){return g},vk:function(){return v},K9:function(){return m},Qb:function(){return p},Ay:function(){return _},Hf:function(){return L},H9:function(){return k},uc:function(){return C},Ic:function(){return y}});var i=n(43144),o=n(15671),r=(0,i.Z)((function e(){(0,o.Z)(this,e),this.type=0})),s=(0,i.Z)((function e(){(0,o.Z)(this,e),this.type=1})),a=function(){function e(t){(0,o.Z)(this,e),this.type=2,this._source=t}return(0,i.Z)(e,[{key:"hasChanged",value:function(e){return this._source.hasChanged(e)}}]),e}(),u=(0,i.Z)((function e(t,n){(0,o.Z)(this,e),this.type=3,this.selections=t,this.modelSelections=n})),l=(0,i.Z)((function e(t){(0,o.Z)(this,e),this.type=4,t?(this.affectsMinimap=t.affectsMinimap,this.affectsOverviewRuler=t.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)})),h=(0,i.Z)((function e(){(0,o.Z)(this,e),this.type=5})),c=(0,i.Z)((function e(t){(0,o.Z)(this,e),this.type=6,this.isFocused=t})),f=(0,i.Z)((function e(){(0,o.Z)(this,e),this.type=7})),d=(0,i.Z)((function e(){(0,o.Z)(this,e),this.type=8})),g=(0,i.Z)((function e(t,n){(0,o.Z)(this,e),this.type=9,this.fromLineNumber=t,this.toLineNumber=n})),v=(0,i.Z)((function e(t,n){(0,o.Z)(this,e),this.type=10,this.fromLineNumber=t,this.toLineNumber=n})),m=(0,i.Z)((function e(t,n){(0,o.Z)(this,e),this.type=11,this.fromLineNumber=t,this.toLineNumber=n})),p=(0,i.Z)((function e(t,n,i,r,s,a,u){(0,o.Z)(this,e),this.source=t,this.minimalReveal=n,this.range=i,this.selections=r,this.verticalType=s,this.revealHorizontal=a,this.scrollType=u,this.type=12})),_=(0,i.Z)((function e(t){(0,o.Z)(this,e),this.type=13,this.scrollWidth=t.scrollWidth,this.scrollLeft=t.scrollLeft,this.scrollHeight=t.scrollHeight,this.scrollTop=t.scrollTop,this.scrollWidthChanged=t.scrollWidthChanged,this.scrollLeftChanged=t.scrollLeftChanged,this.scrollHeightChanged=t.scrollHeightChanged,this.scrollTopChanged=t.scrollTopChanged})),L=(0,i.Z)((function e(){(0,o.Z)(this,e),this.type=14})),k=(0,i.Z)((function e(t){(0,o.Z)(this,e),this.type=15,this.ranges=t})),C=(0,i.Z)((function e(){(0,o.Z)(this,e),this.type=16})),y=(0,i.Z)((function e(){(0,o.Z)(this,e),this.type=17}))},99990:function(e,t,n){n.d(t,{l_:function(){return a},ud:function(){return u},IP:function(){return l},wA:function(){return h},$t:function(){return c},Wx:function(){return f},$l:function(){return d},SQ:function(){return g}});var i=n(43144),o=n(15671),r=n(26684),s=n(30788),a=(0,i.Z)((function e(t,n,i,r){(0,o.Z)(this,e),this._viewportBrand=void 0,this.top=0|t,this.left=0|n,this.width=0|i,this.height=0|r})),u=(0,i.Z)((function e(t,n){(0,o.Z)(this,e),this.tabSize=t,this.data=n})),l=(0,i.Z)((function e(t,n,i,r,s,a,u){(0,o.Z)(this,e),this._viewLineDataBrand=void 0,this.content=t,this.continuesWithWrappedLine=n,this.minColumn=i,this.maxColumn=r,this.startVisibleColumn=s,this.tokens=a,this.inlineDecorations=u})),h=function(){function e(t,n,i,r,s,a,u,l,h,c){(0,o.Z)(this,e),this.minColumn=t,this.maxColumn=n,this.content=i,this.continuesWithWrappedLine=r,this.isBasicASCII=e.isBasicASCII(i,a),this.containsRTL=e.containsRTL(i,this.isBasicASCII,s),this.tokens=u,this.inlineDecorations=l,this.tabSize=h,this.startVisibleColumn=c}return(0,i.Z)(e,null,[{key:"isBasicASCII",value:function(e,t){return!t||r.$i(e)}},{key:"containsRTL",value:function(e,t,n){return!(t||!n)&&r.Ut(e)}}]),e}(),c=(0,i.Z)((function e(t,n,i){(0,o.Z)(this,e),this.range=t,this.inlineClassName=n,this.type=i})),f=function(){function e(t,n,i,r){(0,o.Z)(this,e),this.startOffset=t,this.endOffset=n,this.inlineClassName=i,this.inlineClassNameAffectsLetterSpacing=r}return(0,i.Z)(e,[{key:"toInlineDecoration",value:function(e){return new c(new s.e(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}]),e}(),d=(0,i.Z)((function e(t,n){(0,o.Z)(this,e),this._viewModelDecorationBrand=void 0,this.range=t,this.options=n})),g=function(){function e(t,n,i){(0,o.Z)(this,e),this.color=t,this.zIndex=n,this.data=i}return(0,i.Z)(e,null,[{key:"cmp",value:function(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}}]),e}()},13037:function(e,t,n){n.d(t,{CU:function(){return l},Fd:function(){return h},$t:function(){return c},zg:function(){return f}});var i=n(15671),o=n(43144),r=n(10849),s=n(30788),a=n(99990),u=n(31492),l=function(){function e(t,n,o,r,s){(0,i.Z)(this,e),this.editorId=t,this.model=n,this.configuration=o,this._linesCollection=r,this._coordinatesConverter=s,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}return(0,o.Z)(e,[{key:"_clearCachedModelDecorationsResolver",value:function(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}},{key:"dispose",value:function(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}},{key:"reset",value:function(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}},{key:"onModelDecorationsChanged",value:function(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}},{key:"onLineMappingChanged",value:function(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}},{key:"_getOrCreateViewModelDecoration",value:function(e){var t=e.id,n=this._decorationsCache[t];if(!n){var i,o=e.range,u=e.options;if(u.isWholeLine){var l=this._coordinatesConverter.convertModelPositionToViewPosition(new r.L(o.startLineNumber,1),0),h=this._coordinatesConverter.convertModelPositionToViewPosition(new r.L(o.endLineNumber,this.model.getLineMaxColumn(o.endLineNumber)),1);i=new s.e(l.lineNumber,l.column,h.lineNumber,h.column)}else i=this._coordinatesConverter.convertModelRangeToViewRange(o,1);n=new a.$l(i,u),this._decorationsCache[t]=n}return n}},{key:"getDecorationsViewportData",value:function(e){var t=null!==this._cachedModelDecorationsResolver;return(t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange))||(this._cachedModelDecorationsResolver=this._getDecorationsViewportData(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}},{key:"_getDecorationsViewportData",value:function(e){for(var t=this._linesCollection.getDecorationsInRange(e,this.editorId,(0,u.$J)(this.configuration.options)),n=e.startLineNumber,i=e.endLineNumber,o=[],r=0,l=[],c=n;c<=i;c++)l[c-n]=[];for(var f=0,d=t.length;f<d;f++){var g=t[f],v=g.options;if(h(this.model,g)){var m=this._getOrCreateViewModelDecoration(g),p=m.range;if(o[r++]=m,v.inlineClassName)for(var _=new a.$t(p,v.inlineClassName,v.inlineClassNameAffectsLetterSpacing?3:0),L=Math.max(n,p.startLineNumber),k=Math.min(i,p.endLineNumber),C=L;C<=k;C++)l[C-n].push(_);if(v.beforeContentClassName&&n<=p.startLineNumber&&p.startLineNumber<=i){var y=new a.$t(new s.e(p.startLineNumber,p.startColumn,p.startLineNumber,p.startColumn),v.beforeContentClassName,1);l[p.startLineNumber-n].push(y)}if(v.afterContentClassName&&n<=p.endLineNumber&&p.endLineNumber<=i){var w=new a.$t(new s.e(p.endLineNumber,p.endColumn,p.endLineNumber,p.endColumn),v.afterContentClassName,2);l[p.endLineNumber-n].push(w)}}}return{decorations:o,inlineDecorations:l}}}]),e}();function h(e,t){return(!t.options.hideInCommentTokens||!c(e,t))&&(!t.options.hideInStringTokens||!f(e,t))}function c(e,t){return d(e,t.range,(function(e){return 1===e}))}function f(e,t){return d(e,t.range,(function(e){return 2===e}))}function d(e,t,n){for(var i=t.startLineNumber;i<=t.endLineNumber;i++)for(var o=e.getLineTokens(i),r=i===t.startLineNumber,s=i===t.endLineNumber,a=r?o.findTokenIndexAtOffset(t.startColumn-1):0;a<o.getCount();){if(s)if(o.getStartOffset(a)>t.endColumn-1)break;if(!n(o.getStandardTokenType(a)))return!1;a++}return!0}},23880:function(e,t,n){n.d(t,{nu:function(){return l},zf:function(){return c},Zw:function(){return f},Pt:function(){return d},Ic:function(){return g},H6:function(){return v},Ki:function(){return m}});var i=n(37762),o=n(15671),r=n(43144),s=n(60136),a=n(43668),u=n(28941),l=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.call(this))._onEvent=e._register(new u.Q5),e.onEvent=e._onEvent.event,e._eventHandlers=[],e._viewEventQueue=null,e._isConsumingViewEventQueue=!1,e._collector=null,e._collectorCnt=0,e._outgoingEvents=[],e}return(0,r.Z)(n,[{key:"emitOutgoingEvent",value:function(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}},{key:"_addOutgoingEvent",value:function(e){for(var t=0,n=this._outgoingEvents.length;t<n;t++)if(this._outgoingEvents[t].kind===e.kind)return void(this._outgoingEvents[t]=this._outgoingEvents[t].merge(e));this._outgoingEvents.push(e)}},{key:"_emitOutgoingEvents",value:function(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;var e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}},{key:"addViewEventHandler",value:function(e){for(var t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}},{key:"removeViewEventHandler",value:function(e){for(var t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}},{key:"beginEmitViewEvents",value:function(){return this._collectorCnt++,1===this._collectorCnt&&(this._collector=new h),this._collector}},{key:"endEmitViewEvents",value:function(){if(this._collectorCnt--,0===this._collectorCnt){var e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;var n,o=(0,i.Z)(e);try{for(o.s();!(n=o.n()).done;){var r=n.value;this._addOutgoingEvent(r)}}catch(s){o.e(s)}finally{o.f()}t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}},{key:"emitSingleViewEvent",value:function(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}},{key:"_emitMany",value:function(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}},{key:"_consumeViewEventQueue",value:function(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}},{key:"_doConsumeQueue",value:function(){for(;this._viewEventQueue;){var e=this._viewEventQueue;this._viewEventQueue=null;var t,n=this._eventHandlers.slice(0),o=(0,i.Z)(n);try{for(o.s();!(t=o.n()).done;){t.value.handleEvents(e)}}catch(r){o.e(r)}finally{o.f()}}}}]),n}(n(10526).JT),h=function(){function e(){(0,o.Z)(this,e),this.viewEvents=[],this.outgoingEvents=[]}return(0,r.Z)(e,[{key:"emitViewEvent",value:function(e){this.viewEvents.push(e)}},{key:"emitOutgoingEvent",value:function(e){this.outgoingEvents.push(e)}}]),e}(),c=function(){function e(t,n,i,r){(0,o.Z)(this,e),this.kind=0,this._oldContentWidth=t,this._oldContentHeight=n,this.contentWidth=i,this.contentHeight=r,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}return(0,r.Z)(e,[{key:"isNoOp",value:function(){return!this.contentWidthChanged&&!this.contentHeightChanged}},{key:"merge",value:function(t){return 0!==t.kind?this:new e(this._oldContentWidth,this._oldContentHeight,t.contentWidth,t.contentHeight)}}]),e}(),f=function(){function e(t,n){(0,o.Z)(this,e),this.kind=1,this.oldHasFocus=t,this.hasFocus=n}return(0,r.Z)(e,[{key:"isNoOp",value:function(){return this.oldHasFocus===this.hasFocus}},{key:"merge",value:function(t){return 1!==t.kind?this:new e(this.oldHasFocus,t.hasFocus)}}]),e}(),d=function(){function e(t,n,i,r,s,a,u,l){(0,o.Z)(this,e),this.kind=2,this._oldScrollWidth=t,this._oldScrollLeft=n,this._oldScrollHeight=i,this._oldScrollTop=r,this.scrollWidth=s,this.scrollLeft=a,this.scrollHeight=u,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}return(0,r.Z)(e,[{key:"isNoOp",value:function(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}},{key:"merge",value:function(t){return 2!==t.kind?this:new e(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,t.scrollWidth,t.scrollLeft,t.scrollHeight,t.scrollTop)}}]),e}(),g=function(){function e(){(0,o.Z)(this,e),this.kind=3}return(0,r.Z)(e,[{key:"isNoOp",value:function(){return!1}},{key:"merge",value:function(e){return this}}]),e}(),v=function(){function e(t,n,i,r,s,a,u){(0,o.Z)(this,e),this.kind=6,this.oldSelections=t,this.selections=n,this.oldModelVersionId=i,this.modelVersionId=r,this.source=s,this.reason=a,this.reachedMaxCursorCount=u}return(0,r.Z)(e,[{key:"isNoOp",value:function(){return e._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}},{key:"merge",value:function(t){return 6!==t.kind?this:new e(this.oldSelections,t.selections,this.oldModelVersionId,t.modelVersionId,t.source,t.reason,this.reachedMaxCursorCount||t.reachedMaxCursorCount)}}],[{key:"_selectionsAreEqual",value:function(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;var n=e.length;if(n!==t.length)return!1;for(var i=0;i<n;i++)if(!e[i].equalsSelection(t[i]))return!1;return!0}}]),e}(),m=function(){function e(){(0,o.Z)(this,e),this.kind=5}return(0,r.Z)(e,[{key:"isNoOp",value:function(){return!1}},{key:"merge",value:function(e){return this}}]),e}()},80270:function(e,t,n){n.d(t,{j:function(){return oe}});var i=n(93433),o=n(29439),r=n(37762),s=n(15671),a=n(43144),u=n(97326),l=n(11752),h=n(61120),c=n(60136),f=n(43668),d=n(71881),g=n(32590),v=n(17424),m=n(10526),p=n(4827),_=n(26684),L=n(31492),k=n(32584),C=n(53406),y=n(10849),w=n(30788),b=n(94583),I=n(49500),V=n(73833),N=n(93586),S=n(28238),M=n(28941),O=n(17603),T=function(){function e(){(0,s.Z)(this,e),this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}return(0,a.Z)(e,[{key:"insert",value:function(e){this._hasPending=!0,this._inserts.push(e)}},{key:"change",value:function(e){this._hasPending=!0,this._changes.push(e)}},{key:"remove",value:function(e){this._hasPending=!0,this._removes.push(e)}},{key:"mustCommit",value:function(){return this._hasPending}},{key:"commit",value:function(e){if(this._hasPending){var t=this._inserts,n=this._changes,i=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,i)}}}]),e}(),P=(0,a.Z)((function e(t,n,i,o,r){(0,s.Z)(this,e),this.id=t,this.afterLineNumber=n,this.ordinal=i,this.height=o,this.minWidth=r,this.prefixSum=0})),x=function(){function e(t,n,i,o){(0,s.Z)(this,e),this._instanceId=_.PJ(++e.INSTANCE_COUNT),this._pendingChanges=new T,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=t,this._lineHeight=n,this._paddingTop=i,this._paddingBottom=o}return(0,a.Z)(e,[{key:"setLineHeight",value:function(e){this._checkPendingChanges(),this._lineHeight=e}},{key:"setPadding",value:function(e,t){this._paddingTop=e,this._paddingBottom=t}},{key:"onFlushed",value:function(e){this._checkPendingChanges(),this._lineCount=e}},{key:"changeWhitespace",value:function(e){var t=this,n=!1;try{e({insertWhitespace:function(e,i,o,r){n=!0,e|=0,i|=0,o|=0,r|=0;var s=t._instanceId+ ++t._lastWhitespaceId;return t._pendingChanges.insert(new P(s,e,i,o,r)),s},changeOneWhitespace:function(e,i,o){n=!0,i|=0,o|=0,t._pendingChanges.change({id:e,newAfterLineNumber:i,newHeight:o})},removeWhitespace:function(e){n=!0,t._pendingChanges.remove({id:e})}})}finally{this._pendingChanges.commit(this)}return n}},{key:"_commitPendingChanges",value:function(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){var i,o=(0,r.Z)(e);try{for(o.s();!(i=o.n()).done;){var s=i.value;this._insertWhitespace(s)}}catch(b){o.e(b)}finally{o.f()}var a,u=(0,r.Z)(t);try{for(u.s();!(a=u.n()).done;){var l=a.value;this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight)}}catch(b){u.e(b)}finally{u.f()}var h,c=(0,r.Z)(n);try{for(c.s();!(h=c.n()).done;){var f=h.value,d=this._findWhitespaceIndex(f.id);-1!==d&&this._removeWhitespace(d)}}catch(b){c.e(b)}finally{c.f()}}else{var g,v=new Set,m=(0,r.Z)(n);try{for(m.s();!(g=m.n()).done;){var p=g.value;v.add(p.id)}}catch(b){m.e(b)}finally{m.f()}var _,L=new Map,k=(0,r.Z)(t);try{for(k.s();!(_=k.n()).done;){var C=_.value;L.set(C.id,C)}}catch(b){k.e(b)}finally{k.f()}var y=function(e){var t,n=[],i=(0,r.Z)(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(!v.has(o.id)){if(L.has(o.id)){var s=L.get(o.id);o.afterLineNumber=s.newAfterLineNumber,o.height=s.newHeight}n.push(o)}}}catch(b){i.e(b)}finally{i.f()}return n},w=y(this._arr).concat(y(e));w.sort((function(e,t){return e.afterLineNumber===t.afterLineNumber?e.ordinal-t.ordinal:e.afterLineNumber-t.afterLineNumber})),this._arr=w,this._prefixSumValidIndex=-1}}},{key:"_checkPendingChanges",value:function(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}},{key:"_insertWhitespace",value:function(t){var n=e.findInsertionIndex(this._arr,t.afterLineNumber,t.ordinal);this._arr.splice(n,0,t),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,n-1)}},{key:"_findWhitespaceIndex",value:function(e){for(var t=this._arr,n=0,i=t.length;n<i;n++)if(t[n].id===e)return n;return-1}},{key:"_changeOneWhitespace",value:function(e,t,n){var i=this._findWhitespaceIndex(e);if(-1!==i&&(this._arr[i].height!==n&&(this._arr[i].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,i-1)),this._arr[i].afterLineNumber!==t)){var o=this._arr[i];this._removeWhitespace(i),o.afterLineNumber=t,this._insertWhitespace(o)}}},{key:"_removeWhitespace",value:function(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}},{key:"onLinesDeleted",value:function(e,t){this._checkPendingChanges(),e|=0,t|=0,this._lineCount-=t-e+1;for(var n=0,i=this._arr.length;n<i;n++){var o=this._arr[n].afterLineNumber;e<=o&&o<=t?this._arr[n].afterLineNumber=e-1:o>t&&(this._arr[n].afterLineNumber-=t-e+1)}}},{key:"onLinesInserted",value:function(e,t){this._checkPendingChanges(),e|=0,t|=0,this._lineCount+=t-e+1;for(var n=0,i=this._arr.length;n<i;n++){e<=this._arr[n].afterLineNumber&&(this._arr[n].afterLineNumber+=t-e+1)}}},{key:"getWhitespacesTotalHeight",value:function(){return this._checkPendingChanges(),0===this._arr.length?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}},{key:"getWhitespacesAccumulatedHeight",value:function(e){this._checkPendingChanges(),e|=0;var t=Math.max(0,this._prefixSumValidIndex+1);0===t&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(var n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}},{key:"getLinesTotalHeight",value:function(){return this._checkPendingChanges(),this._lineHeight*this._lineCount+this.getWhitespacesTotalHeight()+this._paddingTop+this._paddingBottom}},{key:"getWhitespaceAccumulatedHeightBeforeLineNumber",value:function(e){this._checkPendingChanges(),e|=0;var t=this._findLastWhitespaceBeforeLineNumber(e);return-1===t?0:this.getWhitespacesAccumulatedHeight(t)}},{key:"_findLastWhitespaceBeforeLineNumber",value:function(e){e|=0;for(var t=this._arr,n=0,i=t.length-1;n<=i;){var o=n+((i-n|0)/2|0)|0;if(t[o].afterLineNumber<e){if(o+1>=t.length||t[o+1].afterLineNumber>=e)return o;n=o+1|0}else i=o-1|0}return-1}},{key:"_findFirstWhitespaceAfterLineNumber",value:function(e){e|=0;var t=this._findLastWhitespaceBeforeLineNumber(e)+1;return t<this._arr.length?t:-1}},{key:"getFirstWhitespaceIndexAfterLineNumber",value:function(e){return this._checkPendingChanges(),e|=0,this._findFirstWhitespaceAfterLineNumber(e)}},{key:"getVerticalOffsetForLineNumber",value:function(e){return this._checkPendingChanges(),((e|=0)>1?this._lineHeight*(e-1):0)+this.getWhitespaceAccumulatedHeightBeforeLineNumber(e)+this._paddingTop}},{key:"getWhitespaceMinWidth",value:function(){if(this._checkPendingChanges(),-1===this._minWidth){for(var e=0,t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}},{key:"isAfterLines",value:function(e){return this._checkPendingChanges(),e>this.getLinesTotalHeight()}},{key:"isInTopPadding",value:function(e){return 0!==this._paddingTop&&(this._checkPendingChanges(),e<this._paddingTop)}},{key:"isInBottomPadding",value:function(e){return 0!==this._paddingBottom&&(this._checkPendingChanges(),e>=this.getLinesTotalHeight()-this._paddingBottom)}},{key:"getLineNumberAtOrAfterVerticalOffset",value:function(e){if(this._checkPendingChanges(),(e|=0)<0)return 1;for(var t=0|this._lineCount,n=this._lineHeight,i=1,o=t;i<o;){var r=(i+o)/2|0,s=0|this.getVerticalOffsetForLineNumber(r);if(e>=s+n)i=r+1;else{if(e>=s)return r;o=r}}return i>t?t:i}},{key:"getLinesViewportData",value:function(e,t){this._checkPendingChanges(),e|=0,t|=0;var n,i,o=this._lineHeight,r=0|this.getLineNumberAtOrAfterVerticalOffset(e),s=0|this.getVerticalOffsetForLineNumber(r),a=0|this._lineCount,u=0|this.getFirstWhitespaceIndexAfterLineNumber(r),l=0|this.getWhitespacesCount();-1===u?(u=l,i=a+1,n=0):(i=0|this.getAfterLineNumberForWhitespaceIndex(u),n=0|this.getHeightForWhitespaceIndex(u));var h=s,c=h,f=5e5,d=0;s>=f&&(d=Math.floor(s/f)*f,c-=d=Math.floor(d/o)*o);for(var g=[],v=e+(t-e)/2,m=-1,p=r;p<=a;p++){if(-1===m){(h<=v&&v<h+o||h>v)&&(m=p)}for(h+=o,g[p-r]=c,c+=o;i===p;)c+=n,h+=n,++u>=l?i=a+1:(i=0|this.getAfterLineNumberForWhitespaceIndex(u),n=0|this.getHeightForWhitespaceIndex(u));if(h>=t){a=p;break}}-1===m&&(m=a);var _=0|this.getVerticalOffsetForLineNumber(a),L=r,k=a;return L<k&&s<e&&L++,L<k&&_+o>t&&k--,{bigNumbersDelta:d,startLineNumber:r,endLineNumber:a,relativeVerticalOffset:g,centeredLineNumber:m,completelyVisibleStartLineNumber:L,completelyVisibleEndLineNumber:k}}},{key:"getVerticalOffsetForWhitespaceIndex",value:function(e){this._checkPendingChanges(),e|=0;var t=this.getAfterLineNumberForWhitespaceIndex(e);return(t>=1?this._lineHeight*t:0)+(e>0?this.getWhitespacesAccumulatedHeight(e-1):0)+this._paddingTop}},{key:"getWhitespaceIndexAtOrAfterVerticallOffset",value:function(e){this._checkPendingChanges(),e|=0;var t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;if(e>=this.getVerticalOffsetForWhitespaceIndex(n)+this.getHeightForWhitespaceIndex(n))return-1;for(;t<n;){var i=Math.floor((t+n)/2),o=this.getVerticalOffsetForWhitespaceIndex(i);if(e>=o+this.getHeightForWhitespaceIndex(i))t=i+1;else{if(e>=o)return i;n=i}}return t}},{key:"getWhitespaceAtVerticalOffset",value:function(e){this._checkPendingChanges(),e|=0;var t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0)return null;if(t>=this.getWhitespacesCount())return null;var n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;var i=this.getHeightForWhitespaceIndex(t);return{id:this.getIdForWhitespaceIndex(t),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(t),verticalOffset:n,height:i}}},{key:"getWhitespaceViewportData",value:function(e,t){this._checkPendingChanges(),e|=0,t|=0;var n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),i=this.getWhitespacesCount()-1;if(n<0)return[];for(var o=[],r=n;r<=i;r++){var s=this.getVerticalOffsetForWhitespaceIndex(r),a=this.getHeightForWhitespaceIndex(r);if(s>=t)break;o.push({id:this.getIdForWhitespaceIndex(r),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(r),verticalOffset:s,height:a})}return o}},{key:"getWhitespaces",value:function(){return this._checkPendingChanges(),this._arr.slice(0)}},{key:"getWhitespacesCount",value:function(){return this._checkPendingChanges(),this._arr.length}},{key:"getIdForWhitespaceIndex",value:function(e){return this._checkPendingChanges(),e|=0,this._arr[e].id}},{key:"getAfterLineNumberForWhitespaceIndex",value:function(e){return this._checkPendingChanges(),e|=0,this._arr[e].afterLineNumber}},{key:"getHeightForWhitespaceIndex",value:function(e){return this._checkPendingChanges(),e|=0,this._arr[e].height}}],[{key:"findInsertionIndex",value:function(e,t,n){for(var i=0,o=e.length;i<o;){var r=i+o>>>1;t===e[r].afterLineNumber?n<e[r].ordinal?o=r:i=r+1:t<e[r].afterLineNumber?o=r:i=r+1}return i}}]),e}();x.INSTANCE_COUNT=0;var D=n(99990),Z=n(23880),E=function(){function e(t,n,i,o){(0,s.Z)(this,e),(t|=0)<0&&(t=0),(n|=0)<0&&(n=0),(i|=0)<0&&(i=0),(o|=0)<0&&(o=0),this.width=t,this.contentWidth=n,this.scrollWidth=Math.max(t,n),this.height=i,this.contentHeight=o,this.scrollHeight=Math.max(i,o)}return(0,a.Z)(e,[{key:"equals",value:function(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}]),e}(),A=function(e){(0,c.Z)(n,e);var t=(0,f.Z)(n);function n(e,i){var o;return(0,s.Z)(this,n),(o=t.call(this))._onDidContentSizeChange=o._register(new M.Q5),o.onDidContentSizeChange=o._onDidContentSizeChange.event,o._dimensions=new E(0,0,0,0),o._scrollable=o._register(new O.Rm({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:i})),o.onDidScroll=o._scrollable.onScroll,o}return(0,a.Z)(n,[{key:"getScrollable",value:function(){return this._scrollable}},{key:"setSmoothScrollDuration",value:function(e){this._scrollable.setSmoothScrollDuration(e)}},{key:"validateScrollPosition",value:function(e){return this._scrollable.validateScrollPosition(e)}},{key:"getScrollDimensions",value:function(){return this._dimensions}},{key:"setScrollDimensions",value:function(e){if(!this._dimensions.equals(e)){var t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);var n=t.contentWidth!==e.contentWidth,i=t.contentHeight!==e.contentHeight;(n||i)&&this._onDidContentSizeChange.fire(new Z.zf(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}}},{key:"getFutureScrollPosition",value:function(){return this._scrollable.getFutureScrollPosition()}},{key:"getCurrentScrollPosition",value:function(){return this._scrollable.getCurrentScrollPosition()}},{key:"setScrollPositionNow",value:function(e){this._scrollable.setScrollPositionNow(e)}},{key:"setScrollPositionSmooth",value:function(e){this._scrollable.setScrollPositionSmooth(e)}}]),n}(m.JT),W=function(e){(0,c.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,o){var r;(0,s.Z)(this,n),(r=t.call(this))._configuration=e;var a=r._configuration.options,u=a.get(131),l=a.get(75);return r._linesLayout=new x(i,a.get(59),l.top,l.bottom),r._scrollable=r._register(new A(0,o)),r._configureSmoothScrollDuration(),r._scrollable.setScrollDimensions(new E(u.contentWidth,0,u.height,0)),r.onDidScroll=r._scrollable.onDidScroll,r.onDidContentSizeChange=r._scrollable.onDidContentSizeChange,r._updateHeight(),r}return(0,a.Z)(n,[{key:"dispose",value:function(){(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this)}},{key:"getScrollable",value:function(){return this._scrollable.getScrollable()}},{key:"onHeightMaybeChanged",value:function(){this._updateHeight()}},{key:"_configureSmoothScrollDuration",value:function(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(103)?125:0)}},{key:"onConfigurationChanged",value:function(e){var t=this._configuration.options;if(e.hasChanged(59)&&this._linesLayout.setLineHeight(t.get(59)),e.hasChanged(75)){var n=t.get(75);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(131)){var i=t.get(131),o=i.contentWidth,r=i.height,s=this._scrollable.getScrollDimensions(),a=s.contentWidth;this._scrollable.setScrollDimensions(new E(o,s.contentWidth,r,this._getContentHeight(o,r,a)))}else this._updateHeight();e.hasChanged(103)&&this._configureSmoothScrollDuration()}},{key:"onFlushed",value:function(e){this._linesLayout.onFlushed(e)}},{key:"onLinesDeleted",value:function(e,t){this._linesLayout.onLinesDeleted(e,t)}},{key:"onLinesInserted",value:function(e,t){this._linesLayout.onLinesInserted(e,t)}},{key:"_getHorizontalScrollbarHeight",value:function(e,t){var n=this._configuration.options.get(92);return 2===n.horizontal||e>=t?0:n.horizontalScrollbarSize}},{key:"_getContentHeight",value:function(e,t,n){var i=this._configuration.options,o=this._linesLayout.getLinesTotalHeight();return i.get(94)?o+=Math.max(0,t-i.get(59)-i.get(75).bottom):o+=this._getHorizontalScrollbarHeight(e,n),o}},{key:"_updateHeight",value:function(){var e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,i=e.contentWidth;this._scrollable.setScrollDimensions(new E(t,e.contentWidth,n,this._getContentHeight(t,n,i)))}},{key:"getCurrentViewport",value:function(){var e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new D.l_(t.scrollTop,t.scrollLeft,e.width,e.height)}},{key:"getFutureViewport",value:function(){var e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new D.l_(t.scrollTop,t.scrollLeft,e.width,e.height)}},{key:"_computeContentWidth",value:function(e){var t=this._configuration.options,n=t.get(132),i=t.get(44);if(n.isViewportWrapping){var o=t.get(131),r=t.get(65);return e>o.contentWidth+i.typicalHalfwidthCharacterWidth&&r.enabled&&"right"===r.side?e+o.verticalScrollbarWidth:e}var s=t.get(93)*i.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+s,a)}},{key:"setMaxLineWidth",value:function(e){var t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new E(t.width,this._computeContentWidth(e),t.height,t.contentHeight)),this._updateHeight()}},{key:"saveState",value:function(){var e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t);return{scrollTop:t,scrollTopWithoutViewZones:t-this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n),scrollLeft:e.scrollLeft}}},{key:"changeWhitespace",value:function(e){var t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}},{key:"getVerticalOffsetForLineNumber",value:function(e){return this._linesLayout.getVerticalOffsetForLineNumber(e)}},{key:"isAfterLines",value:function(e){return this._linesLayout.isAfterLines(e)}},{key:"isInTopPadding",value:function(e){return this._linesLayout.isInTopPadding(e)}},{key:"isInBottomPadding",value:function(e){return this._linesLayout.isInBottomPadding(e)}},{key:"getLineNumberAtVerticalOffset",value:function(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}},{key:"getWhitespaceAtVerticalOffset",value:function(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}},{key:"getLinesViewportData",value:function(){var e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}},{key:"getLinesViewportDataAtScrollTop",value:function(e){var t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}},{key:"getWhitespaceViewportData",value:function(){var e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}},{key:"getWhitespaces",value:function(){return this._linesLayout.getWhitespaces()}},{key:"getContentWidth",value:function(){return this._scrollable.getScrollDimensions().contentWidth}},{key:"getScrollWidth",value:function(){return this._scrollable.getScrollDimensions().scrollWidth}},{key:"getContentHeight",value:function(){return this._scrollable.getScrollDimensions().contentHeight}},{key:"getScrollHeight",value:function(){return this._scrollable.getScrollDimensions().scrollHeight}},{key:"getCurrentScrollLeft",value:function(){return this._scrollable.getCurrentScrollPosition().scrollLeft}},{key:"getCurrentScrollTop",value:function(){return this._scrollable.getCurrentScrollPosition().scrollTop}},{key:"validateScrollPosition",value:function(e){return this._scrollable.validateScrollPosition(e)}},{key:"setScrollPosition",value:function(e,t){1===t?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}},{key:"deltaScrollNow",value:function(e,t){var n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}]),n}(m.JT),R=n(85551),j=n(13037),H=n(54612),F=n(27959),z=n(58705);function B(e,t){return null===e?t?q.INSTANCE:Q.INSTANCE:new U(e,t)}var U=function(){function e(t,n){(0,s.Z)(this,e),this._projectionData=t,this._isVisible=n}return(0,a.Z)(e,[{key:"isVisible",value:function(){return this._isVisible}},{key:"setVisible",value:function(e){return this._isVisible=e,this}},{key:"getProjectionData",value:function(){return this._projectionData}},{key:"getViewLineCount",value:function(){return this._isVisible?this._projectionData.getOutputLineCount():0}},{key:"getViewLineContent",value:function(e,t,n){var i=this;this._assertVisible();var o,r=n>0?this._projectionData.breakOffsets[n-1]:0,s=this._projectionData.breakOffsets[n];if(null!==this._projectionData.injectionOffsets){var a=this._projectionData.injectionOffsets.map((function(e,t){return new b.gk(0,0,e+1,i._projectionData.injectionOptions[t],0)}));o=b.gk.applyInjectedText(e.getLineContent(t),a).substring(r,s)}else o=e.getValueInRange({startLineNumber:t,startColumn:r+1,endLineNumber:t,endColumn:s+1});return n>0&&(o=J(this._projectionData.wrappedTextIndentLength)+o),o}},{key:"getViewLineLength",value:function(e,t,n){return this._assertVisible(),this._projectionData.getLineLength(n)}},{key:"getViewLineMinColumn",value:function(e,t,n){return this._assertVisible(),this._projectionData.getMinOutputOffset(n)+1}},{key:"getViewLineMaxColumn",value:function(e,t,n){return this._assertVisible(),this._projectionData.getMaxOutputOffset(n)+1}},{key:"getViewLineData",value:function(e,t,n){var i=new Array;return this.getViewLinesData(e,t,n,1,0,[!0],i),i[0]}},{key:"getViewLinesData",value:function(e,t,n,i,o,r,s){this._assertVisible();var a,u=this._projectionData,l=u.injectionOffsets,h=u.injectionOptions,c=null;if(l){c=[];for(var f=0,d=0,g=0;g<u.getOutputLineCount();g++){var v=new Array;c[g]=v;for(var m=g>0?u.breakOffsets[g-1]:0,p=u.breakOffsets[g];d<l.length;){var _=h[d].content.length,L=l[d]+f,k=L+_;if(L>p)break;if(m<k){var C=h[d];if(C.inlineClassName){var y=g>0?u.wrappedTextIndentLength:0,w=y+Math.max(L-m,0),b=y+Math.min(k-m,p);w!==b&&v.push(new D.Wx(w,b,C.inlineClassName,C.inlineClassNameAffectsLetterSpacing))}}if(!(k<=p))break;f+=_,d++}}}a=l?e.getLineTokens(t).withInserted(l.map((function(e,t){return{offset:e,text:h[t].content,tokenMetadata:z.A.defaultTokenMetadata}}))):e.getLineTokens(t);for(var I=n;I<n+i;I++){var V=o+I-n;r[V]?s[V]=this._getViewLineData(a,c?c[I]:null,I):s[V]=null}}},{key:"_getViewLineData",value:function(e,t,n){this._assertVisible();var i=this._projectionData,o=n>0?i.wrappedTextIndentLength:0,r=n>0?i.breakOffsets[n-1]:0,s=i.breakOffsets[n],a=e.sliceAndInflate(r,s,o),u=a.getLineContent();n>0&&(u=J(i.wrappedTextIndentLength)+u);var l=this._projectionData.getMinOutputOffset(n)+1,h=u.length+1,c=n+1<this.getViewLineCount(),f=0===n?0:i.breakOffsetsVisibleColumn[n-1];return new D.IP(u,c,l,h,f,a,t)}},{key:"getModelColumnOfViewPosition",value:function(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}},{key:"getViewPositionOfModelPosition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;this._assertVisible();var i=this._projectionData.translateToOutputPosition(t-1,n);return i.toPosition(e)}},{key:"getViewLineNumberOfModelPosition",value:function(e,t){return this._assertVisible(),e+this._projectionData.translateToOutputPosition(t-1).outputLineIndex}},{key:"normalizePosition",value:function(e,t,n){var i=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,n).toPosition(i)}},{key:"getInjectedTextAt",value:function(e,t){return this._projectionData.getInjectedText(e,t-1)}},{key:"_assertVisible",value:function(){if(!this._isVisible)throw new Error("Not supported")}}]),e}(),q=function(){function e(){(0,s.Z)(this,e)}return(0,a.Z)(e,[{key:"isVisible",value:function(){return!0}},{key:"setVisible",value:function(e){return e?this:Q.INSTANCE}},{key:"getProjectionData",value:function(){return null}},{key:"getViewLineCount",value:function(){return 1}},{key:"getViewLineContent",value:function(e,t,n){return e.getLineContent(t)}},{key:"getViewLineLength",value:function(e,t,n){return e.getLineLength(t)}},{key:"getViewLineMinColumn",value:function(e,t,n){return e.getLineMinColumn(t)}},{key:"getViewLineMaxColumn",value:function(e,t,n){return e.getLineMaxColumn(t)}},{key:"getViewLineData",value:function(e,t,n){var i=e.getLineTokens(t),o=i.getLineContent();return new D.IP(o,!1,1,o.length+1,0,i.inflate(),null)}},{key:"getViewLinesData",value:function(e,t,n,i,o,r,s){r[o]?s[o]=this.getViewLineData(e,t,0):s[o]=null}},{key:"getModelColumnOfViewPosition",value:function(e,t){return t}},{key:"getViewPositionOfModelPosition",value:function(e,t){return new y.L(e,t)}},{key:"getViewLineNumberOfModelPosition",value:function(e,t){return e}},{key:"normalizePosition",value:function(e,t,n){return t}},{key:"getInjectedTextAt",value:function(e,t){return null}}]),e}();q.INSTANCE=new q;var Q=function(){function e(){(0,s.Z)(this,e)}return(0,a.Z)(e,[{key:"isVisible",value:function(){return!1}},{key:"setVisible",value:function(e){return e?q.INSTANCE:this}},{key:"getProjectionData",value:function(){return null}},{key:"getViewLineCount",value:function(){return 0}},{key:"getViewLineContent",value:function(e,t,n){throw new Error("Not supported")}},{key:"getViewLineLength",value:function(e,t,n){throw new Error("Not supported")}},{key:"getViewLineMinColumn",value:function(e,t,n){throw new Error("Not supported")}},{key:"getViewLineMaxColumn",value:function(e,t,n){throw new Error("Not supported")}},{key:"getViewLineData",value:function(e,t,n){throw new Error("Not supported")}},{key:"getViewLinesData",value:function(e,t,n,i,o,r,s){throw new Error("Not supported")}},{key:"getModelColumnOfViewPosition",value:function(e,t){throw new Error("Not supported")}},{key:"getViewPositionOfModelPosition",value:function(e,t){throw new Error("Not supported")}},{key:"getViewLineNumberOfModelPosition",value:function(e,t){throw new Error("Not supported")}},{key:"normalizePosition",value:function(e,t,n){throw new Error("Not supported")}},{key:"getInjectedTextAt",value:function(e,t){throw new Error("Not supported")}}]),e}();Q.INSTANCE=new Q;var G=[""];function J(e){if(e>=G.length)for(var t=1;t<=e;t++)G[t]=K(t);return G[e]}function K(e){return new Array(e+1).join(" ")}var $=n(34725),X=function(){function e(t,n,i,o,r,a,u,l,h){(0,s.Z)(this,e),this._editorId=t,this.model=n,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=i,this._monospaceLineBreaksComputerFactory=o,this.fontInfo=r,this.tabSize=a,this.wrappingStrategy=u,this.wrappingColumn=l,this.wrappingIndent=h,this._constructLines(!0,null)}return(0,a.Z)(e,[{key:"dispose",value:function(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}},{key:"createCoordinatesConverter",value:function(){return new te(this)}},{key:"_constructLines",value:function(e,t){var n=this;this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));for(var i=this.model.getLinesContent(),o=this.model.getInjectedTextDecorations(this._editorId),r=i.length,s=this.createLineBreaksComputer(),a=new d.H9(b.gk.fromDecorations(o)),u=function(e){var n=a.takeWhile((function(t){return t.lineNumber===e+1}));s.addRequest(i[e],n,t?t[e]:null)},l=0;l<r;l++)u(l);for(var h=s.finalize(),c=[],f=this.hiddenAreasDecorationIds.map((function(e){return n.model.getDecorationRange(e)})).sort(w.e.compareRangesUsingStarts),g=1,v=0,m=-1,p=m+1<f.length?v+1:r+2,_=0;_<r;_++){var L=_+1;L===p&&(g=f[++m].startLineNumber,v=f[m].endLineNumber,p=m+1<f.length?v+1:r+2);var k=L>=g&&L<=v,C=B(h[_],!k);c[_]=C.getViewLineCount(),this.modelLineProjections[_]=C}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new $.Ck(c)}},{key:"getHiddenAreas",value:function(){var e=this;return this.hiddenAreasDecorationIds.map((function(t){return e.model.getDecorationRange(t)}))}},{key:"setHiddenAreas",value:function(e){var t=this,n=function(e){if(0===e.length)return[];var t=e.slice();t.sort(w.e.compareRangesUsingStarts);for(var n=[],i=t[0].startLineNumber,o=t[0].endLineNumber,r=1,s=t.length;r<s;r++){var a=t[r];a.startLineNumber>o+1?(n.push(new w.e(i,1,o,1)),i=a.startLineNumber,o=a.endLineNumber):a.endLineNumber>o&&(o=a.endLineNumber)}return n.push(new w.e(i,1,o,1)),n}(e.map((function(e){return t.model.validateRange(e)}))),i=this.hiddenAreasDecorationIds.map((function(e){return t.model.getDecorationRange(e)})).sort(w.e.compareRangesUsingStarts);if(n.length===i.length){for(var o=!1,r=0;r<n.length;r++)if(!n[r].equalsRange(i[r])){o=!0;break}if(!o)return!1}var s=n.map((function(e){return{range:e,options:F.qx.EMPTY}}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,s);for(var a=n,u=1,l=0,h=-1,c=h+1<a.length?l+1:this.modelLineProjections.length+2,f=!1,d=0;d<this.modelLineProjections.length;d++){var g=d+1;g===c&&(u=a[++h].startLineNumber,l=a[h].endLineNumber,c=h+1<a.length?l+1:this.modelLineProjections.length+2);var v=!1;if(g>=u&&g<=l?this.modelLineProjections[d].isVisible()&&(this.modelLineProjections[d]=this.modelLineProjections[d].setVisible(!1),v=!0):(f=!0,this.modelLineProjections[d].isVisible()||(this.modelLineProjections[d]=this.modelLineProjections[d].setVisible(!0),v=!0)),v){var m=this.modelLineProjections[d].getViewLineCount();this.projectedModelLineLineCounts.setValue(d,m)}}return f||this.setHiddenAreas([]),!0}},{key:"modelPositionIsVisible",value:function(e,t){return!(e<1||e>this.modelLineProjections.length)&&this.modelLineProjections[e-1].isVisible()}},{key:"getModelLineViewLineCount",value:function(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}},{key:"setTabSize",value:function(e){return this.tabSize!==e&&(this.tabSize=e,this._constructLines(!1,null),!0)}},{key:"setWrappingSettings",value:function(e,t,n,i){var o=this.fontInfo.equals(e),r=this.wrappingStrategy===t,s=this.wrappingColumn===n,a=this.wrappingIndent===i;if(o&&r&&s&&a)return!1;var u=o&&r&&!s&&a;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=i;var l=null;if(u){l=[];for(var h=0,c=this.modelLineProjections.length;h<c;h++)l[h]=this.modelLineProjections[h].getProjectionData()}return this._constructLines(!1,l),!0}},{key:"createLineBreaksComputer",value:function(){return("advanced"===this.wrappingStrategy?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}},{key:"onModelFlushed",value:function(){this._constructLines(!0,null)}},{key:"onModelLinesDeleted",value:function(e,t,n){if(!e||e<=this._validModelVersionId)return null;var i=1===t?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,o=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(t-1,n-t+1),this.projectedModelLineLineCounts.removeValues(t-1,n-t+1),new S.vk(i,o)}},{key:"onModelLinesInserted",value:function(e,t,n,i){if(!e||e<=this._validModelVersionId)return null;for(var o=t>2&&!this.modelLineProjections[t-2].isVisible(),r=1===t?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,s=0,a=[],u=[],l=0,h=i.length;l<h;l++){var c=B(i[l],!o);a.push(c);var f=c.getViewLineCount();s+=f,u[l]=f}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(a).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,u),new S.K9(r,r+s-1)}},{key:"onModelLineChanged",value:function(e,t,n){if(null!==e&&e<=this._validModelVersionId)return[!1,null,null,null];var i=t-1,o=this.modelLineProjections[i].getViewLineCount(),r=B(n,this.modelLineProjections[i].isVisible());this.modelLineProjections[i]=r;var s=this.modelLineProjections[i].getViewLineCount(),a=!1,u=0,l=-1,h=0,c=-1,f=0,d=-1;return o>s?(d=(f=(l=(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1)+s-1)+1)+(o-s)-1,a=!0):o<s?(c=(h=(l=(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1)+o-1)+1)+(s-o)-1,a=!0):l=(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1)+s-1,this.projectedModelLineLineCounts.setValue(i,s),[a,u<=l?new S.il(u,l):null,h<=c?new S.K9(h,c):null,f<=d?new S.vk(f,d):null]}},{key:"acceptVersionId",value:function(e){this._validModelVersionId=e,1!==this.modelLineProjections.length||this.modelLineProjections[0].isVisible()||this.setHiddenAreas([])}},{key:"getViewLineCount",value:function(){return this.projectedModelLineLineCounts.getTotalSum()}},{key:"_toValidViewLineNumber",value:function(e){if(e<1)return 1;var t=this.getViewLineCount();return e>t?t:0|e}},{key:"getActiveIndentGuide",value:function(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);var i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),o=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),r=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),s=this.model.guides.getActiveIndentGuide(i.lineNumber,o.lineNumber,r.lineNumber),a=this.convertModelPositionToViewPosition(s.startLineNumber,1),u=this.convertModelPositionToViewPosition(s.endLineNumber,this.model.getLineMaxColumn(s.endLineNumber));return{startLineNumber:a.lineNumber,endLineNumber:u.lineNumber,indent:s.indent}}},{key:"getViewLineInfo",value:function(e){e=this._toValidViewLineNumber(e);var t=this.projectedModelLineLineCounts.getIndexOf(e-1),n=t.index,i=t.remainder;return new Y(n+1,i)}},{key:"getMinColumnOfViewLine",value:function(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}},{key:"getModelStartPositionOfViewLine",value:function(e){var t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new y.L(e.modelLineNumber,i)}},{key:"getModelEndPositionOfViewLine",value:function(e){var t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new y.L(e.modelLineNumber,i)}},{key:"getViewLineInfosGroupedByModelRanges",value:function(e,t){for(var n=this.getViewLineInfo(e),i=this.getViewLineInfo(t),o=new Array,r=this.getModelStartPositionOfViewLine(n),s=new Array,a=n.modelLineNumber;a<=i.modelLineNumber;a++){var u=this.modelLineProjections[a-1];if(u.isVisible())for(var l=a===n.modelLineNumber?n.modelLineWrappedLineIdx:0,h=a===i.modelLineNumber?i.modelLineWrappedLineIdx+1:u.getViewLineCount(),c=l;c<h;c++)s.push(new Y(a,c));if(!u.isVisible()&&r){var f=new y.L(a-1,this.model.getLineMaxColumn(a-1)+1),d=w.e.fromPositions(r,f);o.push(new ee(d,s)),s=[],r=null}else u.isVisible()&&!r&&(r=new y.L(a,1))}if(r){var g=w.e.fromPositions(r,this.getModelEndPositionOfViewLine(i));o.push(new ee(g,s))}return o}},{key:"getViewLinesBracketGuides",value:function(e,t,n,i){var o,s=this,a=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,u=[],l=(0,r.Z)(this.getViewLineInfosGroupedByModelRanges(e,t));try{for(l.s();!(o=l.n()).done;){var h,c=o.value,f=c.modelRange.startLineNumber,d=this.model.guides.getLinesBracketGuides(f,c.modelRange.endLineNumber,a,i),g=(0,r.Z)(c.viewLines);try{var v=function(){var e=h.value;if(e.isWrappedLineContinuation&&1===s.getMinColumnOfViewLine(e))u.push([]);else{var t=d[e.modelLineNumber-f];t=t.map((function(t){return t.horizontalLine?new H.UO(t.visibleColumn,t.className,new H.vW(t.horizontalLine.top,s.convertModelPositionToViewPosition(e.modelLineNumber,t.horizontalLine.endColumn).column)):t})),u.push(t)}};for(g.s();!(h=g.n()).done;)v()}catch(m){g.e(m)}finally{g.f()}}}catch(m){l.e(m)}finally{l.f()}return u}},{key:"getViewLinesIndentGuides",value:function(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);for(var n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),i=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t)),o=[],r=[],s=[],a=n.lineNumber-1,u=i.lineNumber-1,l=null,h=a;h<=u;h++){var c=this.modelLineProjections[h];if(c.isVisible()){var f=c.getViewLineNumberOfModelPosition(0,h===a?n.column:1),d=c.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(h+1)),g=d-f+1,v=0;g>1&&1===c.getViewLineMinColumn(this.model,h+1,d)&&(v=0===f?1:2),r.push(g),s.push(v),null===l&&(l=new y.L(h+1,0))}else null!==l&&(o=o.concat(this.model.guides.getLinesIndentGuides(l.lineNumber,h)),l=null)}null!==l&&(o=o.concat(this.model.guides.getLinesIndentGuides(l.lineNumber,i.lineNumber)),l=null);for(var m=t-e+1,p=new Array(m),_=0,L=0,k=o.length;L<k;L++){var C=o[L],w=Math.min(m-_,r[L]),b=s[L],I=void 0;I=2===b?0:1===b?1:w;for(var V=0;V<w;V++)V===I&&(C=0),p[_++]=C}return p}},{key:"getViewLineContent",value:function(e){var t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}},{key:"getViewLineLength",value:function(e){var t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}},{key:"getViewLineMinColumn",value:function(e){var t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}},{key:"getViewLineMaxColumn",value:function(e){var t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}},{key:"getViewLineData",value:function(e){var t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}},{key:"getViewLinesData",value:function(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);for(var i=this.projectedModelLineLineCounts.getIndexOf(e-1),o=e,r=i.index,s=i.remainder,a=[],u=r,l=this.model.getLineCount();u<l;u++){var h=this.modelLineProjections[u];if(h.isVisible()){var c=u===r?s:0,f=h.getViewLineCount()-c,d=!1;if(o+f>t&&(d=!0,f=t-o+1),h.getViewLinesData(this.model,u+1,c,f,o-e,n,a),o+=f,d)break}}return a}},{key:"validateViewPosition",value:function(e,t,n){e=this._toValidViewLineNumber(e);var i=this.projectedModelLineLineCounts.getIndexOf(e-1),o=i.index,r=i.remainder,s=this.modelLineProjections[o],a=s.getViewLineMinColumn(this.model,o+1,r),u=s.getViewLineMaxColumn(this.model,o+1,r);t<a&&(t=a),t>u&&(t=u);var l=s.getModelColumnOfViewPosition(r,t);return this.model.validatePosition(new y.L(o+1,l)).equals(n)?new y.L(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}},{key:"validateViewRange",value:function(e,t){var n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),i=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new w.e(n.lineNumber,n.column,i.lineNumber,i.column)}},{key:"convertViewPositionToModelPosition",value:function(e,t){var n=this.getViewLineInfo(e),i=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,t);return this.model.validatePosition(new y.L(n.modelLineNumber,i))}},{key:"convertViewRangeToModelRange",value:function(e){var t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new w.e(t.lineNumber,t.column,n.lineNumber,n.column)}},{key:"convertModelPositionToViewPosition",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=this.model.validatePosition(new y.L(e,t)),o=i.lineNumber,r=i.column,s=o-1,a=!1;s>0&&!this.modelLineProjections[s].isVisible();)s--,a=!0;if(0===s&&!this.modelLineProjections[s].isVisible())return new y.L(1,1);var u=1+this.projectedModelLineLineCounts.getPrefixSum(s);return a?this.modelLineProjections[s].getViewPositionOfModelPosition(u,this.model.getLineMaxColumn(s+1),n):this.modelLineProjections[o-1].getViewPositionOfModelPosition(u,r,n)}},{key:"convertModelRangeToViewRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e.isEmpty()){var n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return w.e.fromPositions(n)}var i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),o=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new w.e(i.lineNumber,i.column,o.lineNumber,o.column)}},{key:"getViewLineNumberOfModelPosition",value:function(e,t){var n=e-1;if(this.modelLineProjections[n].isVisible()){var i=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(i,t)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(0===n&&!this.modelLineProjections[n].isVisible())return 1;var o=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(o,this.model.getLineMaxColumn(n+1))}},{key:"getDecorationsInRange",value:function(e,t,n){var i=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),o=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(o.lineNumber-i.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new w.e(i.lineNumber,1,o.lineNumber,o.column),t,n);for(var s=[],a=i.lineNumber-1,u=o.lineNumber-1,l=null,h=a;h<=u;h++){if(this.modelLineProjections[h].isVisible())null===l&&(l=new y.L(h+1,h===a?i.column:1));else if(null!==l){var c=this.model.getLineMaxColumn(h);s=s.concat(this.model.getDecorationsInRange(new w.e(l.lineNumber,l.column,h,c),t,n)),l=null}}null!==l&&(s=s.concat(this.model.getDecorationsInRange(new w.e(l.lineNumber,l.column,o.lineNumber,o.column),t,n)),l=null),s.sort((function(e,t){var n=w.e.compareRangesUsingStarts(e.range,t.range);return 0===n?e.id<t.id?-1:e.id>t.id?1:0:n}));var f,d=[],g=0,v=null,m=(0,r.Z)(s);try{for(m.s();!(f=m.n()).done;){var p=f.value,_=p.id;v!==_&&(v=_,d[g++]=p)}}catch(L){m.e(L)}finally{m.f()}return d}},{key:"getInjectedTextAt",value:function(e){var t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}},{key:"normalizePosition",value:function(e,t){var n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,t)}},{key:"getLineIndentColumn",value:function(e){var t=this.getViewLineInfo(e);return 0===t.modelLineWrappedLineIdx?this.model.getLineIndentColumn(t.modelLineNumber):0}}]),e}();var Y=function(){function e(t,n){(0,s.Z)(this,e),this.modelLineNumber=t,this.modelLineWrappedLineIdx=n}return(0,a.Z)(e,[{key:"isWrappedLineContinuation",get:function(){return this.modelLineWrappedLineIdx>0}}]),e}(),ee=(0,a.Z)((function e(t,n){(0,s.Z)(this,e),this.modelRange=t,this.viewLines=n})),te=function(){function e(t){(0,s.Z)(this,e),this._lines=t}return(0,a.Z)(e,[{key:"convertViewPositionToModelPosition",value:function(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}},{key:"convertViewRangeToModelRange",value:function(e){return this._lines.convertViewRangeToModelRange(e)}},{key:"validateViewPosition",value:function(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}},{key:"validateViewRange",value:function(e,t){return this._lines.validateViewRange(e,t)}},{key:"convertModelPositionToViewPosition",value:function(e,t){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t)}},{key:"convertModelRangeToViewRange",value:function(e,t){return this._lines.convertModelRangeToViewRange(e,t)}},{key:"modelPositionIsVisible",value:function(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}},{key:"getModelLineViewLineCount",value:function(e){return this._lines.getModelLineViewLineCount(e)}},{key:"getViewLineNumberOfModelPosition",value:function(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}]),e}(),ne=function(){function e(t){(0,s.Z)(this,e),this.model=t}return(0,a.Z)(e,[{key:"dispose",value:function(){}},{key:"createCoordinatesConverter",value:function(){return new ie(this)}},{key:"getHiddenAreas",value:function(){return[]}},{key:"setHiddenAreas",value:function(e){return!1}},{key:"setTabSize",value:function(e){return!1}},{key:"setWrappingSettings",value:function(e,t,n,i){return!1}},{key:"createLineBreaksComputer",value:function(){var e=[];return{addRequest:function(t,n,i){e.push(null)},finalize:function(){return e}}}},{key:"onModelFlushed",value:function(){}},{key:"onModelLinesDeleted",value:function(e,t,n){return new S.vk(t,n)}},{key:"onModelLinesInserted",value:function(e,t,n,i){return new S.K9(t,n)}},{key:"onModelLineChanged",value:function(e,t,n){return[!1,new S.il(t,t),null,null]}},{key:"acceptVersionId",value:function(e){}},{key:"getViewLineCount",value:function(){return this.model.getLineCount()}},{key:"getActiveIndentGuide",value:function(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}},{key:"getViewLinesBracketGuides",value:function(e,t,n){return new Array(t-e+1).fill([])}},{key:"getViewLinesIndentGuides",value:function(e,t){for(var n=t-e+1,i=new Array(n),o=0;o<n;o++)i[o]=0;return i}},{key:"getViewLineContent",value:function(e){return this.model.getLineContent(e)}},{key:"getViewLineLength",value:function(e){return this.model.getLineLength(e)}},{key:"getViewLineMinColumn",value:function(e){return this.model.getLineMinColumn(e)}},{key:"getViewLineMaxColumn",value:function(e){return this.model.getLineMaxColumn(e)}},{key:"getViewLineData",value:function(e){var t=this.model.getLineTokens(e),n=t.getLineContent();return new D.IP(n,!1,1,n.length+1,0,t.inflate(),null)}},{key:"getViewLinesData",value:function(e,t,n){var i=this.model.getLineCount();e=Math.min(Math.max(1,e),i),t=Math.min(Math.max(1,t),i);for(var o=[],r=e;r<=t;r++){var s=r-e;o[s]=n[s]?this.getViewLineData(r):null}return o}},{key:"getDecorationsInRange",value:function(e,t,n){return this.model.getDecorationsInRange(e,t,n)}},{key:"normalizePosition",value:function(e,t){return this.model.normalizePosition(e,t)}},{key:"getLineIndentColumn",value:function(e){return this.model.getLineIndentColumn(e)}},{key:"getInjectedTextAt",value:function(e){return null}}]),e}(),ie=function(){function e(t){(0,s.Z)(this,e),this._lines=t}return(0,a.Z)(e,[{key:"_validPosition",value:function(e){return this._lines.model.validatePosition(e)}},{key:"_validRange",value:function(e){return this._lines.model.validateRange(e)}},{key:"convertViewPositionToModelPosition",value:function(e){return this._validPosition(e)}},{key:"convertViewRangeToModelRange",value:function(e){return this._validRange(e)}},{key:"validateViewPosition",value:function(e,t){return this._validPosition(t)}},{key:"validateViewRange",value:function(e,t){return this._validRange(t)}},{key:"convertModelPositionToViewPosition",value:function(e){return this._validPosition(e)}},{key:"convertModelRangeToViewRange",value:function(e){return this._validRange(e)}},{key:"modelPositionIsVisible",value:function(e){var t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}},{key:"getModelLineViewLineCount",value:function(e){return 1}},{key:"getViewLineNumberOfModelPosition",value:function(e,t){return e}}]),e}(),oe=function(e){(0,c.Z)(n,e);var t=(0,f.Z)(n);function n(e,i,o,r,a,l,h){var c;if((0,s.Z)(this,n),(c=t.call(this)).languageConfigurationService=h,c._editorId=e,c._configuration=i,c.model=o,c._eventDispatcher=new Z.nu,c.onEvent=c._eventDispatcher.onEvent,c.cursorConfig=new C.LM(c.model.getLanguageId(),c.model.getOptions(),c._configuration,c.languageConfigurationService),c._tokenizeViewportSoon=c._register(new g.pY((function(){return c.tokenizeViewport()}),50)),c._updateConfigurationViewLineCount=c._register(new g.pY((function(){return c._updateConfigurationViewLineCountNow()}),0)),c._hasFocus=!1,c._viewportStartLine=-1,c._viewportStartLineTrackedRange=null,c._viewportStartLineDelta=0,c.model.isTooLargeForTokenization())c._lines=new ne(c.model);else{var f=c._configuration.options,d=f.get(44),v=f.get(125),m=f.get(132),p=f.get(124);c._lines=new X(c._editorId,c.model,r,a,d,c.model.getOptions().tabSize,v,m.wrappingColumn,p)}return c.coordinatesConverter=c._lines.createCoordinatesConverter(),c._cursor=c._register(new k.U(o,(0,u.Z)(c),c.coordinatesConverter,c.cursorConfig)),c.viewLayout=c._register(new W(c._configuration,c.getLineCount(),l)),c._register(c.viewLayout.onDidScroll((function(e){e.scrollTopChanged&&c._tokenizeViewportSoon.schedule(),c._eventDispatcher.emitSingleViewEvent(new S.Ay(e)),c._eventDispatcher.emitOutgoingEvent(new Z.Pt(e.oldScrollWidth,e.oldScrollLeft,e.oldScrollHeight,e.oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop))}))),c._register(c.viewLayout.onDidContentSizeChange((function(e){c._eventDispatcher.emitOutgoingEvent(e)}))),c._decorations=new j.CU(c._editorId,c.model,c._configuration,c._lines,c.coordinatesConverter),c._registerModelEvents(),c._register(c._configuration.onDidChangeFast((function(e){try{var t=c._eventDispatcher.beginEmitViewEvents();c._onConfigurationChanged(t,e)}finally{c._eventDispatcher.endEmitViewEvents()}}))),c._register(R.E.getInstance().onDidChange((function(){c._eventDispatcher.emitSingleViewEvent(new S.uc)}))),c._updateConfigurationViewLineCountNow(),c}return(0,a.Z)(n,[{key:"dispose",value:function(){(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this),this._decorations.dispose(),this._lines.dispose(),this.invalidateMinimapColorCache(),this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,null,1),this._eventDispatcher.dispose()}},{key:"createLineBreaksComputer",value:function(){return this._lines.createLineBreaksComputer()}},{key:"addViewEventHandler",value:function(e){this._eventDispatcher.addViewEventHandler(e)}},{key:"removeViewEventHandler",value:function(e){this._eventDispatcher.removeViewEventHandler(e)}},{key:"_updateConfigurationViewLineCountNow",value:function(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}},{key:"tokenizeViewport",value:function(){var e,t=this.viewLayout.getLinesViewportData(),n=new w.e(t.startLineNumber,this.getLineMinColumn(t.startLineNumber),t.endLineNumber,this.getLineMaxColumn(t.endLineNumber)),i=this._toModelVisibleRanges(n),o=(0,r.Z)(i);try{for(o.s();!(e=o.n()).done;){var s=e.value;this.model.tokenizeViewport(s.startLineNumber,s.endLineNumber)}}catch(a){o.e(a)}finally{o.f()}}},{key:"setHasFocus",value:function(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new S.SJ(e)),this._eventDispatcher.emitOutgoingEvent(new Z.Zw(!e,e))}},{key:"onCompositionStart",value:function(){this._eventDispatcher.emitSingleViewEvent(new S.JP)}},{key:"onCompositionEnd",value:function(){this._eventDispatcher.emitSingleViewEvent(new S.IN)}},{key:"onDidColorThemeChange",value:function(){this._eventDispatcher.emitSingleViewEvent(new S.Hf)}},{key:"_onConfigurationChanged",value:function(e,t){var n=null;if(-1!==this._viewportStartLine){var i=new y.L(this._viewportStartLine,this.getLineMinColumn(this._viewportStartLine));n=this.coordinatesConverter.convertViewPositionToModelPosition(i)}var o=!1,r=this._configuration.options,s=r.get(44),a=r.get(125),u=r.get(132),l=r.get(124);if(this._lines.setWrappingSettings(s,a,u.wrappingColumn,l)&&(e.emitViewEvent(new S.CL),e.emitViewEvent(new S.d8),e.emitViewEvent(new S.vA(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),0!==this.viewLayout.getCurrentScrollTop()&&(o=!0),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(81)&&(this._decorations.reset(),e.emitViewEvent(new S.vA(null))),e.emitViewEvent(new S.x4(t)),this.viewLayout.onConfigurationChanged(t),o&&n){var h=this.coordinatesConverter.convertModelPositionToViewPosition(n),c=this.viewLayout.getVerticalOffsetForLineNumber(h.lineNumber);this.viewLayout.setScrollPosition({scrollTop:c+this._viewportStartLineDelta},1)}C.LM.shouldRecreate(t)&&(this.cursorConfig=new C.LM(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}},{key:"_registerModelEvents",value:function(){var e=this;this._register(this.model.onDidChangeContentOrInjectedText((function(t){try{var n,i=e._eventDispatcher.beginEmitViewEvents(),s=!1,a=!1,u=t.changes,l=t instanceof b.dQ?t.versionId:null,h=e._lines.createLineBreaksComputer(),c=(0,r.Z)(u);try{for(c.s();!(n=c.n()).done;){var f=n.value;switch(f.changeType){case 4:for(var g=0;g<f.detail.length;g++){var v=f.detail[g],m=f.injectedTexts[g];m&&(m=m.filter((function(t){return!t.ownerId||t.ownerId===e._editorId}))),h.addRequest(v,m,null)}break;case 2:var p=null;f.injectedText&&(p=f.injectedText.filter((function(t){return!t.ownerId||t.ownerId===e._editorId}))),h.addRequest(f.detail,p,null)}}}catch(R){c.e(R)}finally{c.f()}var _,L=h.finalize(),k=new d.H9(L),C=(0,r.Z)(u);try{for(C.s();!(_=C.n()).done;){var y=_.value;switch(y.changeType){case 1:e._lines.onModelFlushed(),i.emitViewEvent(new S.CL),e._decorations.reset(),e.viewLayout.onFlushed(e.getLineCount()),s=!0;break;case 3:var w=e._lines.onModelLinesDeleted(l,y.fromLineNumber,y.toLineNumber);null!==w&&(i.emitViewEvent(w),e.viewLayout.onLinesDeleted(w.fromLineNumber,w.toLineNumber)),s=!0;break;case 4:var I=k.takeCount(y.detail.length),V=e._lines.onModelLinesInserted(l,y.fromLineNumber,y.toLineNumber,I);null!==V&&(i.emitViewEvent(V),e.viewLayout.onLinesInserted(V.fromLineNumber,V.toLineNumber)),s=!0;break;case 2:var N=k.dequeue(),M=e._lines.onModelLineChanged(l,y.lineNumber,N),O=(0,o.Z)(M,4),T=O[0],P=O[1],x=O[2],D=O[3];a=T,P&&i.emitViewEvent(P),x&&(i.emitViewEvent(x),e.viewLayout.onLinesInserted(x.fromLineNumber,x.toLineNumber)),D&&(i.emitViewEvent(D),e.viewLayout.onLinesDeleted(D.fromLineNumber,D.toLineNumber))}}}catch(R){C.e(R)}finally{C.f()}null!==l&&e._lines.acceptVersionId(l),e.viewLayout.onHeightMaybeChanged(),!s&&a&&(i.emitViewEvent(new S.d8),i.emitViewEvent(new S.vA(null)),e._cursor.onLineMappingChanged(i),e._decorations.onLineMappingChanged())}finally{e._eventDispatcher.endEmitViewEvents()}if(e._viewportStartLine=-1,e._configuration.setModelLineCount(e.model.getLineCount()),e._updateConfigurationViewLineCountNow(),!e._hasFocus&&e.model.getAttachedEditorCount()>=2&&e._viewportStartLineTrackedRange){var Z=e.model._getTrackedRange(e._viewportStartLineTrackedRange);if(Z){var E=e.coordinatesConverter.convertModelPositionToViewPosition(Z.getStartPosition()),A=e.viewLayout.getVerticalOffsetForLineNumber(E.lineNumber);e.viewLayout.setScrollPosition({scrollTop:A+e._viewportStartLineDelta},1)}}try{var W=e._eventDispatcher.beginEmitViewEvents();e._cursor.onModelContentChanged(W,t)}finally{e._eventDispatcher.endEmitViewEvents()}e._tokenizeViewportSoon.schedule()}))),this._register(this.model.onDidChangeTokens((function(t){for(var n=[],i=0,o=t.ranges.length;i<o;i++){var r=t.ranges[i],s=e.coordinatesConverter.convertModelPositionToViewPosition(new y.L(r.fromLineNumber,1)).lineNumber,a=e.coordinatesConverter.convertModelPositionToViewPosition(new y.L(r.toLineNumber,e.model.getLineMaxColumn(r.toLineNumber))).lineNumber;n[i]={fromLineNumber:s,toLineNumber:a}}e._eventDispatcher.emitSingleViewEvent(new S.H9(n)),t.tokenizationSupportChanged&&e._tokenizeViewportSoon.schedule()}))),this._register(this.model.onDidChangeLanguageConfiguration((function(t){e._eventDispatcher.emitSingleViewEvent(new S._0),e.cursorConfig=new C.LM(e.model.getLanguageId(),e.model.getOptions(),e._configuration,e.languageConfigurationService),e._cursor.updateConfiguration(e.cursorConfig)}))),this._register(this.model.onDidChangeLanguage((function(t){e.cursorConfig=new C.LM(e.model.getLanguageId(),e.model.getOptions(),e._configuration,e.languageConfigurationService),e._cursor.updateConfiguration(e.cursorConfig)}))),this._register(this.model.onDidChangeOptions((function(t){if(e._lines.setTabSize(e.model.getOptions().tabSize)){try{var n=e._eventDispatcher.beginEmitViewEvents();n.emitViewEvent(new S.CL),n.emitViewEvent(new S.d8),n.emitViewEvent(new S.vA(null)),e._cursor.onLineMappingChanged(n),e._decorations.onLineMappingChanged(),e.viewLayout.onFlushed(e.getLineCount())}finally{e._eventDispatcher.endEmitViewEvents()}e._updateConfigurationViewLineCount.schedule()}e.cursorConfig=new C.LM(e.model.getLanguageId(),e.model.getOptions(),e._configuration,e.languageConfigurationService),e._cursor.updateConfiguration(e.cursorConfig)}))),this._register(this.model.onDidChangeDecorations((function(t){e._decorations.onModelDecorationsChanged(),e._eventDispatcher.emitSingleViewEvent(new S.vA(t))})))}},{key:"setHiddenAreas",value:function(e){var t=!1;try{var n=this._eventDispatcher.beginEmitViewEvents();(t=this._lines.setHiddenAreas(e))&&(n.emitViewEvent(new S.CL),n.emitViewEvent(new S.d8),n.emitViewEvent(new S.vA(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),t&&this._eventDispatcher.emitOutgoingEvent(new Z.Ic)}},{key:"getVisibleRangesPlusViewportAboveBelow",value:function(){var e=this._configuration.options.get(131),t=this._configuration.options.get(59),n=Math.max(20,Math.round(e.height/t)),i=this.viewLayout.getLinesViewportData(),o=Math.max(1,i.completelyVisibleStartLineNumber-n),r=Math.min(this.getLineCount(),i.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new w.e(o,this.getLineMinColumn(o),r,this.getLineMaxColumn(r)))}},{key:"getVisibleRanges",value:function(){var e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}},{key:"_toModelVisibleRanges",value:function(e){var t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(0===n.length)return[t];for(var i=[],o=0,r=t.startLineNumber,s=t.startColumn,a=t.endLineNumber,u=t.endColumn,l=0,h=n.length;l<h;l++){var c=n[l].startLineNumber,f=n[l].endLineNumber;f<r||(c>a||(r<c&&(i[o++]=new w.e(r,s,c-1,this.model.getLineMaxColumn(c-1))),r=f+1,s=1))}return(r<a||r===a&&s<u)&&(i[o++]=new w.e(r,s,a,u)),i}},{key:"getCompletelyVisibleViewRange",value:function(){var e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new w.e(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}},{key:"getCompletelyVisibleViewRangeAtScrollTop",value:function(e){var t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,i=t.completelyVisibleEndLineNumber;return new w.e(n,this.getLineMinColumn(n),i,this.getLineMaxColumn(i))}},{key:"saveState",value:function(){var e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),i=this.coordinatesConverter.convertViewPositionToModelPosition(new y.L(n,this.getLineMinColumn(n))),o=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:i,firstPositionDeltaTop:o}}},{key:"reduceRestoreState",value:function(e){if("undefined"===typeof e.firstPosition)return this._reduceRestoreStateCompatibility(e);var t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),i=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:i}}},{key:"_reduceRestoreStateCompatibility",value:function(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}},{key:"getTabSize",value:function(){return this.model.getOptions().tabSize}},{key:"getTextModelOptions",value:function(){return this.model.getOptions()}},{key:"getLineCount",value:function(){return this._lines.getViewLineCount()}},{key:"setViewport",value:function(e,t,n){this._viewportStartLine=e;var i=this.coordinatesConverter.convertViewPositionToModelPosition(new y.L(e,this.getLineMinColumn(e)));this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,new w.e(i.lineNumber,i.column,i.lineNumber,i.column),1);var o=this.viewLayout.getVerticalOffsetForLineNumber(e),r=this.viewLayout.getCurrentScrollTop();this._viewportStartLineDelta=r-o}},{key:"getActiveIndentGuide",value:function(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}},{key:"getLinesIndentGuides",value:function(e,t){return this._lines.getViewLinesIndentGuides(e,t)}},{key:"getBracketGuidesInRangeByLine",value:function(e,t,n,i){return this._lines.getViewLinesBracketGuides(e,t,n,i)}},{key:"getLineContent",value:function(e){return this._lines.getViewLineContent(e)}},{key:"getLineLength",value:function(e){return this._lines.getViewLineLength(e)}},{key:"getLineMinColumn",value:function(e){return this._lines.getViewLineMinColumn(e)}},{key:"getLineMaxColumn",value:function(e){return this._lines.getViewLineMaxColumn(e)}},{key:"getLineFirstNonWhitespaceColumn",value:function(e){var t=_.LC(this.getLineContent(e));return-1===t?0:t+1}},{key:"getLineLastNonWhitespaceColumn",value:function(e){var t=_.ow(this.getLineContent(e));return-1===t?0:t+2}},{key:"getDecorationsInViewport",value:function(e){return this._decorations.getDecorationsViewportData(e).decorations}},{key:"getInjectedTextAt",value:function(e){return this._lines.getInjectedTextAt(e)}},{key:"getViewLineRenderingData",value:function(e,t){var n=this.model.mightContainRTL(),o=this.model.mightContainNonBasicASCII(),r=this.getTabSize(),s=this._lines.getViewLineData(t),a=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return s.inlineDecorations&&(a=[].concat((0,i.Z)(a),(0,i.Z)(s.inlineDecorations.map((function(e){return e.toInlineDecoration(t)}))))),new D.wA(s.minColumn,s.maxColumn,s.content,s.continuesWithWrappedLine,n,o,s.tokens,a,r,s.startVisibleColumn)}},{key:"getViewLineData",value:function(e){return this._lines.getViewLineData(e)}},{key:"getMinimapLinesRenderingData",value:function(e,t,n){var i=this._lines.getViewLinesData(e,t,n);return new D.ud(this.getTabSize(),i)}},{key:"getAllOverviewRulerDecorations",value:function(e){var t,n=this.model.getOverviewRulerDecorations(this._editorId,(0,L.$J)(this._configuration.options)),i=new re,o=(0,r.Z)(n);try{for(o.s();!(t=o.n()).done;){var s=t.value,a=s.options,u=a.overviewRuler;if(u){var l=u.position;if(0!==l){var h=u.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.startLineNumber,s.range.startColumn),f=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.endLineNumber,s.range.endColumn);i.accept(h,a.zIndex,c,f,l)}}}}catch(d){o.e(d)}finally{o.f()}return i.asArray}},{key:"invalidateOverviewRulerColorCache",value:function(){var e,t=this.model.getOverviewRulerDecorations(),n=(0,r.Z)(t);try{for(n.s();!(e=n.n()).done;){var i=e.value.options.overviewRuler;i&&i.invalidateCachedColor()}}catch(o){n.e(o)}finally{n.f()}}},{key:"invalidateMinimapColorCache",value:function(){var e,t=this.model.getAllDecorations(),n=(0,r.Z)(t);try{for(n.s();!(e=n.n()).done;){var i=e.value.options.minimap;i&&i.invalidateCachedColor()}}catch(o){n.e(o)}finally{n.f()}}},{key:"getValueInRange",value:function(e,t){var n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}},{key:"getModelLineMaxColumn",value:function(e){return this.model.getLineMaxColumn(e)}},{key:"validateModelPosition",value:function(e){return this.model.validatePosition(e)}},{key:"validateModelRange",value:function(e){return this.model.validateRange(e)}},{key:"deduceModelPositionRelativeToViewPosition",value:function(e,t,n){var i=this.coordinatesConverter.convertViewPositionToModelPosition(e);2===this.model.getEOL().length&&(t<0?t-=n:t+=n);var o=this.model.getOffsetAt(i)+t;return this.model.getPositionAt(o)}},{key:"getEOL",value:function(){return this.model.getEOL()}},{key:"getPlainTextToCopy",value:function(e,t,n){var i=n?"\r\n":this.model.getEOL();(e=e.slice(0)).sort(w.e.compareRangesUsingStarts);var o,s=!1,a=!1,u=(0,r.Z)(e);try{for(u.s();!(o=u.n()).done;){o.value.isEmpty()?s=!0:a=!0}}catch(y){u.e(y)}finally{u.f()}if(!a){if(!t)return"";for(var l=e.map((function(e){return e.startLineNumber})),h="",c=0;c<l.length;c++)c>0&&l[c-1]===l[c]||(h+=this.model.getLineContent(l[c])+i);return h}if(s&&t){var f,d=[],g=0,v=(0,r.Z)(e);try{for(v.s();!(f=v.n()).done;){var m=f.value,p=m.startLineNumber;m.isEmpty()?p!==g&&d.push(this.model.getLineContent(p)):d.push(this.model.getValueInRange(m,n?2:0)),g=p}}catch(y){v.e(y)}finally{v.f()}return 1===d.length?d[0]:d}var _,L=[],k=(0,r.Z)(e);try{for(k.s();!(_=k.n()).done;){var C=_.value;C.isEmpty()||L.push(this.model.getValueInRange(C,n?2:0))}}catch(y){k.e(y)}finally{k.f()}return 1===L.length?L[0]:L}},{key:"getRichTextToCopy",value:function(e,t){var n=this.model.getLanguageId();if(n===V.bd)return null;if(1!==e.length)return null;var i=e[0];if(i.isEmpty()){if(!t)return null;var o=i.startLineNumber;i=new w.e(o,this.model.getLineMinColumn(o),o,this.model.getLineMaxColumn(o))}var r,s=this._configuration.options.get(44),a=this._getColorMap();if(/[:;\\\/<>]/.test(s.fontFamily)||s.fontFamily===L.hL.fontFamily)r=L.hL.fontFamily;else{if(r=(r=s.fontFamily).replace(/"/g,"'"),!/[,']/.test(r))/[+ ]/.test(r)&&(r="'".concat(r,"'"));r="".concat(r,", ").concat(L.hL.fontFamily)}return{mode:n,html:'<div style="'+"color: ".concat(a[1],";")+"background-color: ".concat(a[2],";")+"font-family: ".concat(r,";")+"font-weight: ".concat(s.fontWeight,";")+"font-size: ".concat(s.fontSize,"px;")+"line-height: ".concat(s.lineHeight,"px;")+'white-space: pre;">'+this._getHTMLToCopy(i,a)+"</div>"}}},{key:"_getHTMLToCopy",value:function(e,t){for(var n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,r=e.endColumn,s=this.getTabSize(),a="",u=n;u<=o;u++){var l=this.model.getLineTokens(u),h=l.getLineContent(),c=u===n?i-1:0,f=u===o?r-1:h.length;a+=""===h?"<br>":(0,N.Fq)(h,l.inflate(),t,c,f,s,p.ED)}return a}},{key:"_getColorMap",value:function(){var e=I.RW.getColorMap(),t=["#000000"];if(e)for(var n=1,i=e.length;n<i;n++)t[n]=v.Il.Format.CSS.formatHex(e[n]);return t}},{key:"pushStackElement",value:function(){this.model.pushStackElement()}},{key:"getPrimaryCursorState",value:function(){return this._cursor.getPrimaryCursorState()}},{key:"getLastAddedCursorIndex",value:function(){return this._cursor.getLastAddedCursorIndex()}},{key:"getCursorStates",value:function(){return this._cursor.getCursorStates()}},{key:"setCursorStates",value:function(e,t,n){var i=this;return this._withViewEventsCollector((function(o){return i._cursor.setStates(o,e,t,n)}))}},{key:"getCursorColumnSelectData",value:function(){return this._cursor.getCursorColumnSelectData()}},{key:"getCursorAutoClosedCharacters",value:function(){return this._cursor.getAutoClosedCharacters()}},{key:"setCursorColumnSelectData",value:function(e){this._cursor.setCursorColumnSelectData(e)}},{key:"getPrevEditOperationType",value:function(){return this._cursor.getPrevEditOperationType()}},{key:"setPrevEditOperationType",value:function(e){this._cursor.setPrevEditOperationType(e)}},{key:"getSelection",value:function(){return this._cursor.getSelection()}},{key:"getSelections",value:function(){return this._cursor.getSelections()}},{key:"getPosition",value:function(){return this._cursor.getPrimaryCursorState().modelState.position}},{key:"setSelections",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._withViewEventsCollector((function(o){return n._cursor.setSelections(o,e,t,i)}))}},{key:"saveCursorState",value:function(){return this._cursor.saveState()}},{key:"restoreCursorState",value:function(e){var t=this;this._withViewEventsCollector((function(n){return t._cursor.restoreState(n,e)}))}},{key:"_executeCursorEdit",value:function(e){this._cursor.context.cursorConfig.readOnly?this._eventDispatcher.emitOutgoingEvent(new Z.Ki):this._withViewEventsCollector(e)}},{key:"executeEdits",value:function(e,t,n){var i=this;this._executeCursorEdit((function(o){return i._cursor.executeEdits(o,e,t,n)}))}},{key:"startComposition",value:function(){var e=this;this._cursor.setIsDoingComposition(!0),this._executeCursorEdit((function(t){return e._cursor.startComposition(t)}))}},{key:"endComposition",value:function(e){var t=this;this._cursor.setIsDoingComposition(!1),this._executeCursorEdit((function(n){return t._cursor.endComposition(n,e)}))}},{key:"type",value:function(e,t){var n=this;this._executeCursorEdit((function(i){return n._cursor.type(i,e,t)}))}},{key:"compositionType",value:function(e,t,n,i,o){var r=this;this._executeCursorEdit((function(s){return r._cursor.compositionType(s,e,t,n,i,o)}))}},{key:"paste",value:function(e,t,n,i){var o=this;this._executeCursorEdit((function(r){return o._cursor.paste(r,e,t,n,i)}))}},{key:"cut",value:function(e){var t=this;this._executeCursorEdit((function(n){return t._cursor.cut(n,e)}))}},{key:"executeCommand",value:function(e,t){var n=this;this._executeCursorEdit((function(i){return n._cursor.executeCommand(i,e,t)}))}},{key:"executeCommands",value:function(e,t){var n=this;this._executeCursorEdit((function(i){return n._cursor.executeCommands(i,e,t)}))}},{key:"revealPrimaryCursor",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._withViewEventsCollector((function(o){return n._cursor.revealPrimary(o,e,i,0,t,0)}))}},{key:"revealTopMostCursor",value:function(e){var t=this._cursor.getTopMostViewPosition(),n=new w.e(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector((function(t){return t.emitViewEvent(new S.Qb(e,!1,n,null,0,!0,0))}))}},{key:"revealBottomMostCursor",value:function(e){var t=this._cursor.getBottomMostViewPosition(),n=new w.e(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector((function(t){return t.emitViewEvent(new S.Qb(e,!1,n,null,0,!0,0))}))}},{key:"revealRange",value:function(e,t,n,i,o){this._withViewEventsCollector((function(r){return r.emitViewEvent(new S.Qb(e,!1,n,null,i,t,o))}))}},{key:"getVerticalOffsetForLineNumber",value:function(e){return this.viewLayout.getVerticalOffsetForLineNumber(e)}},{key:"getScrollTop",value:function(){return this.viewLayout.getCurrentScrollTop()}},{key:"setScrollTop",value:function(e,t){this.viewLayout.setScrollPosition({scrollTop:e},t)}},{key:"setScrollPosition",value:function(e,t){this.viewLayout.setScrollPosition(e,t)}},{key:"deltaScrollNow",value:function(e,t){this.viewLayout.deltaScrollNow(e,t)}},{key:"changeWhitespace",value:function(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new S.Ic),this._eventDispatcher.emitOutgoingEvent(new Z.Ic))}},{key:"setMaxLineWidth",value:function(e){this.viewLayout.setMaxLineWidth(e)}},{key:"_withViewEventsCollector",value:function(e){try{return e(this._eventDispatcher.beginEmitViewEvents())}finally{this._eventDispatcher.endEmitViewEvents()}}},{key:"normalizePosition",value:function(e,t){return this._lines.normalizePosition(e,t)}},{key:"getLineIndentColumn",value:function(e){return this._lines.getLineIndentColumn(e)}}]),n}(m.JT),re=function(){function e(){(0,s.Z)(this,e),this._asMap=Object.create(null),this.asArray=[]}return(0,a.Z)(e,[{key:"accept",value:function(e,t,n,i,o){var r=this._asMap[e];if(r){var s=r.data,a=s[s.length-3],u=s[s.length-1];if(a===o&&u+1>=n)return void(i>u&&(s[s.length-1]=i));s.push(o,n,i)}else{var l=new D.SQ(e,t,[o,n,i]);this._asMap[e]=l,this.asArray.push(l)}}}]),e}()}}]);
//# sourceMappingURL=monaco-editor-vendor.192dbdcc.f4e3c423.js.map