{"version":3,"file":"static/js/monaco-editor-vendor.a666f4a9.94d0e155.js","mappings":"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","sources":["../../node_modules/monaco-editor/esm/vs/base/browser/ui/keybindingLabel/keybindingLabel.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/list/listPaging.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/list/rangeMap.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/list/rowCache.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/list/listView.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/list/splice.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/list/list.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/list/listWidget.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/menu/menu.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/mouseCursor/mouseCursor.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/progressbar/progressbar.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/resizable/resizable.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/sash/sash.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollbarArrow.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollbarVisibilityController.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/abstractScrollbar.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/horizontalScrollbar.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/verticalScrollbar.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollableElement.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollbarState.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/selectBox/selectBoxCustom.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/selectBox/selectBoxNative.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/selectBox/selectBox.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/splitview/splitview.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/table/tableWidget.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/toggle/toggle.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/toolbar/toolbar.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/abstractTree.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/asyncDataTree.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/dataTree.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/indexTreeModel.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/compressedObjectTreeModel.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/objectTree.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/objectTreeModel.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/tree.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/widget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { UILabelProvider } from '../../../common/keybindingLabels.js';\nimport { equals } from '../../../common/objects.js';\nimport './keybindingLabel.css';\nimport { localize } from '../../../../nls.js';\nconst $ = dom.$;\nexport const unthemedKeybindingLabelOptions = {\n    keybindingLabelBackground: undefined,\n    keybindingLabelForeground: undefined,\n    keybindingLabelBorder: undefined,\n    keybindingLabelBottomBorder: undefined,\n    keybindingLabelShadow: undefined\n};\nexport class KeybindingLabel {\n    constructor(container, os, options) {\n        this.os = os;\n        this.keyElements = new Set();\n        this.options = options || Object.create(null);\n        const labelForeground = this.options.keybindingLabelForeground;\n        this.domNode = dom.append(container, $('.monaco-keybinding'));\n        if (labelForeground) {\n            this.domNode.style.color = labelForeground;\n        }\n        this.didEverRender = false;\n        container.appendChild(this.domNode);\n    }\n    get element() {\n        return this.domNode;\n    }\n    set(keybinding, matches) {\n        if (this.didEverRender && this.keybinding === keybinding && KeybindingLabel.areSame(this.matches, matches)) {\n            return;\n        }\n        this.keybinding = keybinding;\n        this.matches = matches;\n        this.render();\n    }\n    render() {\n        var _a;\n        this.clear();\n        if (this.keybinding) {\n            const chords = this.keybinding.getChords();\n            if (chords[0]) {\n                this.renderChord(this.domNode, chords[0], this.matches ? this.matches.firstPart : null);\n            }\n            for (let i = 1; i < chords.length; i++) {\n                dom.append(this.domNode, $('span.monaco-keybinding-key-chord-separator', undefined, ' '));\n                this.renderChord(this.domNode, chords[i], this.matches ? this.matches.chordPart : null);\n            }\n            const title = ((_a = this.options.disableTitle) !== null && _a !== void 0 ? _a : false) ? undefined : this.keybinding.getAriaLabel() || undefined;\n            if (title !== undefined) {\n                this.domNode.title = title;\n            }\n            else {\n                this.domNode.removeAttribute('title');\n            }\n        }\n        else if (this.options && this.options.renderUnboundKeybindings) {\n            this.renderUnbound(this.domNode);\n        }\n        this.didEverRender = true;\n    }\n    clear() {\n        dom.clearNode(this.domNode);\n        this.keyElements.clear();\n    }\n    renderChord(parent, chord, match) {\n        const modifierLabels = UILabelProvider.modifierLabels[this.os];\n        if (chord.ctrlKey) {\n            this.renderKey(parent, modifierLabels.ctrlKey, Boolean(match === null || match === void 0 ? void 0 : match.ctrlKey), modifierLabels.separator);\n        }\n        if (chord.shiftKey) {\n            this.renderKey(parent, modifierLabels.shiftKey, Boolean(match === null || match === void 0 ? void 0 : match.shiftKey), modifierLabels.separator);\n        }\n        if (chord.altKey) {\n            this.renderKey(parent, modifierLabels.altKey, Boolean(match === null || match === void 0 ? void 0 : match.altKey), modifierLabels.separator);\n        }\n        if (chord.metaKey) {\n            this.renderKey(parent, modifierLabels.metaKey, Boolean(match === null || match === void 0 ? void 0 : match.metaKey), modifierLabels.separator);\n        }\n        const keyLabel = chord.keyLabel;\n        if (keyLabel) {\n            this.renderKey(parent, keyLabel, Boolean(match === null || match === void 0 ? void 0 : match.keyCode), '');\n        }\n    }\n    renderKey(parent, label, highlight, separator) {\n        dom.append(parent, this.createKeyElement(label, highlight ? '.highlight' : ''));\n        if (separator) {\n            dom.append(parent, $('span.monaco-keybinding-key-separator', undefined, separator));\n        }\n    }\n    renderUnbound(parent) {\n        dom.append(parent, this.createKeyElement(localize('unbound', \"Unbound\")));\n    }\n    createKeyElement(label, extraClass = '') {\n        const keyElement = $('span.monaco-keybinding-key' + extraClass, undefined, label);\n        this.keyElements.add(keyElement);\n        if (this.options.keybindingLabelBackground) {\n            keyElement.style.backgroundColor = this.options.keybindingLabelBackground;\n        }\n        if (this.options.keybindingLabelBorder) {\n            keyElement.style.borderColor = this.options.keybindingLabelBorder;\n        }\n        if (this.options.keybindingLabelBottomBorder) {\n            keyElement.style.borderBottomColor = this.options.keybindingLabelBottomBorder;\n        }\n        if (this.options.keybindingLabelShadow) {\n            keyElement.style.boxShadow = `inset 0 -1px 0 ${this.options.keybindingLabelShadow}`;\n        }\n        return keyElement;\n    }\n    static areSame(a, b) {\n        if (a === b || (!a && !b)) {\n            return true;\n        }\n        return !!a && !!b && equals(a.firstPart, b.firstPart) && equals(a.chordPart, b.chordPart);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { range } from '../../../common/arrays.js';\nimport { CancellationTokenSource } from '../../../common/cancellation.js';\nimport { Event } from '../../../common/event.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport './list.css';\nimport { List } from './listWidget.js';\nclass PagedRenderer {\n    get templateId() { return this.renderer.templateId; }\n    constructor(renderer, modelProvider) {\n        this.renderer = renderer;\n        this.modelProvider = modelProvider;\n    }\n    renderTemplate(container) {\n        const data = this.renderer.renderTemplate(container);\n        return { data, disposable: Disposable.None };\n    }\n    renderElement(index, _, data, height) {\n        var _a;\n        (_a = data.disposable) === null || _a === void 0 ? void 0 : _a.dispose();\n        if (!data.data) {\n            return;\n        }\n        const model = this.modelProvider();\n        if (model.isResolved(index)) {\n            return this.renderer.renderElement(model.get(index), index, data.data, height);\n        }\n        const cts = new CancellationTokenSource();\n        const promise = model.resolve(index, cts.token);\n        data.disposable = { dispose: () => cts.cancel() };\n        this.renderer.renderPlaceholder(index, data.data);\n        promise.then(entry => this.renderer.renderElement(entry, index, data.data, height));\n    }\n    disposeTemplate(data) {\n        if (data.disposable) {\n            data.disposable.dispose();\n            data.disposable = undefined;\n        }\n        if (data.data) {\n            this.renderer.disposeTemplate(data.data);\n            data.data = undefined;\n        }\n    }\n}\nclass PagedAccessibilityProvider {\n    constructor(modelProvider, accessibilityProvider) {\n        this.modelProvider = modelProvider;\n        this.accessibilityProvider = accessibilityProvider;\n    }\n    getWidgetAriaLabel() {\n        return this.accessibilityProvider.getWidgetAriaLabel();\n    }\n    getAriaLabel(index) {\n        const model = this.modelProvider();\n        if (!model.isResolved(index)) {\n            return null;\n        }\n        return this.accessibilityProvider.getAriaLabel(model.get(index));\n    }\n}\nfunction fromPagedListOptions(modelProvider, options) {\n    return Object.assign(Object.assign({}, options), { accessibilityProvider: options.accessibilityProvider && new PagedAccessibilityProvider(modelProvider, options.accessibilityProvider) });\n}\nexport class PagedList {\n    constructor(user, container, virtualDelegate, renderers, options = {}) {\n        const modelProvider = () => this.model;\n        const pagedRenderers = renderers.map(r => new PagedRenderer(r, modelProvider));\n        this.list = new List(user, container, virtualDelegate, pagedRenderers, fromPagedListOptions(modelProvider, options));\n    }\n    updateOptions(options) {\n        this.list.updateOptions(options);\n    }\n    getHTMLElement() {\n        return this.list.getHTMLElement();\n    }\n    get onDidFocus() {\n        return this.list.onDidFocus;\n    }\n    get widget() {\n        return this.list;\n    }\n    get onDidDispose() {\n        return this.list.onDidDispose;\n    }\n    get onMouseDblClick() {\n        return Event.map(this.list.onMouseDblClick, ({ element, index, browserEvent }) => ({ element: element === undefined ? undefined : this._model.get(element), index, browserEvent }));\n    }\n    get onPointer() {\n        return Event.map(this.list.onPointer, ({ element, index, browserEvent }) => ({ element: element === undefined ? undefined : this._model.get(element), index, browserEvent }));\n    }\n    get onDidChangeSelection() {\n        return Event.map(this.list.onDidChangeSelection, ({ elements, indexes, browserEvent }) => ({ elements: elements.map(e => this._model.get(e)), indexes, browserEvent }));\n    }\n    get model() {\n        return this._model;\n    }\n    set model(model) {\n        this._model = model;\n        this.list.splice(0, this.list.length, range(model.length));\n    }\n    getFocus() {\n        return this.list.getFocus();\n    }\n    getSelection() {\n        return this.list.getSelection();\n    }\n    getSelectedElements() {\n        return this.getSelection().map(i => this.model.get(i));\n    }\n    style(styles) {\n        this.list.style(styles);\n    }\n    dispose() {\n        this.list.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/range.js';\n/**\n * Returns the intersection between a ranged group and a range.\n * Returns `[]` if the intersection is empty.\n */\nexport function groupIntersect(range, groups) {\n    const result = [];\n    for (const r of groups) {\n        if (range.start >= r.range.end) {\n            continue;\n        }\n        if (range.end < r.range.start) {\n            break;\n        }\n        const intersection = Range.intersect(range, r.range);\n        if (Range.isEmpty(intersection)) {\n            continue;\n        }\n        result.push({\n            range: intersection,\n            size: r.size\n        });\n    }\n    return result;\n}\n/**\n * Shifts a range by that `much`.\n */\nexport function shift({ start, end }, much) {\n    return { start: start + much, end: end + much };\n}\n/**\n * Consolidates a collection of ranged groups.\n *\n * Consolidation is the process of merging consecutive ranged groups\n * that share the same `size`.\n */\nexport function consolidate(groups) {\n    const result = [];\n    let previousGroup = null;\n    for (const group of groups) {\n        const start = group.range.start;\n        const end = group.range.end;\n        const size = group.size;\n        if (previousGroup && size === previousGroup.size) {\n            previousGroup.range.end = end;\n            continue;\n        }\n        previousGroup = { range: { start, end }, size };\n        result.push(previousGroup);\n    }\n    return result;\n}\n/**\n * Concatenates several collections of ranged groups into a single\n * collection.\n */\nfunction concat(...groups) {\n    return consolidate(groups.reduce((r, g) => r.concat(g), []));\n}\nexport class RangeMap {\n    get paddingTop() {\n        return this._paddingTop;\n    }\n    set paddingTop(paddingTop) {\n        this._size = this._size + paddingTop - this._paddingTop;\n        this._paddingTop = paddingTop;\n    }\n    constructor(topPadding) {\n        this.groups = [];\n        this._size = 0;\n        this._paddingTop = 0;\n        this._paddingTop = topPadding !== null && topPadding !== void 0 ? topPadding : 0;\n        this._size = this._paddingTop;\n    }\n    splice(index, deleteCount, items = []) {\n        const diff = items.length - deleteCount;\n        const before = groupIntersect({ start: 0, end: index }, this.groups);\n        const after = groupIntersect({ start: index + deleteCount, end: Number.POSITIVE_INFINITY }, this.groups)\n            .map(g => ({ range: shift(g.range, diff), size: g.size }));\n        const middle = items.map((item, i) => ({\n            range: { start: index + i, end: index + i + 1 },\n            size: item.size\n        }));\n        this.groups = concat(before, middle, after);\n        this._size = this._paddingTop + this.groups.reduce((t, g) => t + (g.size * (g.range.end - g.range.start)), 0);\n    }\n    /**\n     * Returns the number of items in the range map.\n     */\n    get count() {\n        const len = this.groups.length;\n        if (!len) {\n            return 0;\n        }\n        return this.groups[len - 1].range.end;\n    }\n    /**\n     * Returns the sum of the sizes of all items in the range map.\n     */\n    get size() {\n        return this._size;\n    }\n    /**\n     * Returns the index of the item at the given position.\n     */\n    indexAt(position) {\n        if (position < 0) {\n            return -1;\n        }\n        if (position < this._paddingTop) {\n            return 0;\n        }\n        let index = 0;\n        let size = this._paddingTop;\n        for (const group of this.groups) {\n            const count = group.range.end - group.range.start;\n            const newSize = size + (count * group.size);\n            if (position < newSize) {\n                return index + Math.floor((position - size) / group.size);\n            }\n            index += count;\n            size = newSize;\n        }\n        return index;\n    }\n    /**\n     * Returns the index of the item right after the item at the\n     * index of the given position.\n     */\n    indexAfter(position) {\n        return Math.min(this.indexAt(position) + 1, this.count);\n    }\n    /**\n     * Returns the start position of the item at the given index.\n     */\n    positionAt(index) {\n        if (index < 0) {\n            return -1;\n        }\n        let position = 0;\n        let count = 0;\n        for (const group of this.groups) {\n            const groupCount = group.range.end - group.range.start;\n            const newCount = count + groupCount;\n            if (index < newCount) {\n                return this._paddingTop + position + ((index - count) * group.size);\n            }\n            position += groupCount * group.size;\n            count = newCount;\n        }\n        return -1;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $ } from '../../dom.js';\nfunction removeFromParent(element) {\n    var _a;\n    try {\n        (_a = element.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(element);\n    }\n    catch (e) {\n        // this will throw if this happens due to a blur event, nasty business\n    }\n}\nexport class RowCache {\n    constructor(renderers) {\n        this.renderers = renderers;\n        this.cache = new Map();\n        this.transactionNodesPendingRemoval = new Set();\n        this.inTransaction = false;\n    }\n    /**\n     * Returns a row either by creating a new one or reusing\n     * a previously released row which shares the same templateId.\n     *\n     * @returns A row and `isReusingConnectedDomNode` if the row's node is already in the dom in a stale position.\n     */\n    alloc(templateId) {\n        let result = this.getTemplateCache(templateId).pop();\n        let isStale = false;\n        if (result) {\n            isStale = this.transactionNodesPendingRemoval.has(result.domNode);\n            if (isStale) {\n                this.transactionNodesPendingRemoval.delete(result.domNode);\n            }\n        }\n        else {\n            const domNode = $('.monaco-list-row');\n            const renderer = this.getRenderer(templateId);\n            const templateData = renderer.renderTemplate(domNode);\n            result = { domNode, templateId, templateData };\n        }\n        return { row: result, isReusingConnectedDomNode: isStale };\n    }\n    /**\n     * Releases the row for eventual reuse.\n     */\n    release(row) {\n        if (!row) {\n            return;\n        }\n        this.releaseRow(row);\n    }\n    /**\n     * Begin a set of changes that use the cache. This lets us skip work when a row is removed and then inserted again.\n     */\n    transact(makeChanges) {\n        if (this.inTransaction) {\n            throw new Error('Already in transaction');\n        }\n        this.inTransaction = true;\n        try {\n            makeChanges();\n        }\n        finally {\n            for (const domNode of this.transactionNodesPendingRemoval) {\n                this.doRemoveNode(domNode);\n            }\n            this.transactionNodesPendingRemoval.clear();\n            this.inTransaction = false;\n        }\n    }\n    releaseRow(row) {\n        const { domNode, templateId } = row;\n        if (domNode) {\n            if (this.inTransaction) {\n                this.transactionNodesPendingRemoval.add(domNode);\n            }\n            else {\n                this.doRemoveNode(domNode);\n            }\n        }\n        const cache = this.getTemplateCache(templateId);\n        cache.push(row);\n    }\n    doRemoveNode(domNode) {\n        domNode.classList.remove('scrolling');\n        removeFromParent(domNode);\n    }\n    getTemplateCache(templateId) {\n        let result = this.cache.get(templateId);\n        if (!result) {\n            result = [];\n            this.cache.set(templateId, result);\n        }\n        return result;\n    }\n    dispose() {\n        this.cache.forEach((cachedRows, templateId) => {\n            for (const cachedRow of cachedRows) {\n                const renderer = this.getRenderer(templateId);\n                renderer.disposeTemplate(cachedRow.templateData);\n                cachedRow.templateData = null;\n            }\n        });\n        this.cache.clear();\n        this.transactionNodesPendingRemoval.clear();\n    }\n    getRenderer(templateId) {\n        const renderer = this.renderers.get(templateId);\n        if (!renderer) {\n            throw new Error(`No renderer found for ${templateId}`);\n        }\n        return renderer;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { DataTransfers } from '../../dnd.js';\nimport { $, addDisposableListener, animate, getContentHeight, getContentWidth, getTopLeftOffset, scheduleAtNextAnimationFrame } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { SmoothScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { distinct, equals } from '../../../common/arrays.js';\nimport { Delayer, disposableTimeout } from '../../../common/async.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../common/lifecycle.js';\nimport { Range } from '../../../common/range.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport { RangeMap, shift } from './rangeMap.js';\nimport { RowCache } from './rowCache.js';\nimport { BugIndicatingError } from '../../../common/errors.js';\nconst StaticDND = {\n    CurrentDragAndDropData: undefined\n};\nconst DefaultOptions = {\n    useShadows: true,\n    verticalScrollMode: 1 /* ScrollbarVisibility.Auto */,\n    setRowLineHeight: true,\n    setRowHeight: true,\n    supportDynamicHeights: false,\n    dnd: {\n        getDragElements(e) { return [e]; },\n        getDragURI() { return null; },\n        onDragStart() { },\n        onDragOver() { return false; },\n        drop() { },\n        dispose() { }\n    },\n    horizontalScrolling: false,\n    transformOptimization: true,\n    alwaysConsumeMouseWheel: true,\n};\nexport class ElementsDragAndDropData {\n    constructor(elements) {\n        this.elements = elements;\n    }\n    update() { }\n    getData() {\n        return this.elements;\n    }\n}\nexport class ExternalElementsDragAndDropData {\n    constructor(elements) {\n        this.elements = elements;\n    }\n    update() { }\n    getData() {\n        return this.elements;\n    }\n}\nexport class NativeDragAndDropData {\n    constructor() {\n        this.types = [];\n        this.files = [];\n    }\n    update(dataTransfer) {\n        if (dataTransfer.types) {\n            this.types.splice(0, this.types.length, ...dataTransfer.types);\n        }\n        if (dataTransfer.files) {\n            this.files.splice(0, this.files.length);\n            for (let i = 0; i < dataTransfer.files.length; i++) {\n                const file = dataTransfer.files.item(i);\n                if (file && (file.size || file.type)) {\n                    this.files.push(file);\n                }\n            }\n        }\n    }\n    getData() {\n        return {\n            types: this.types,\n            files: this.files\n        };\n    }\n}\nfunction equalsDragFeedback(f1, f2) {\n    if (Array.isArray(f1) && Array.isArray(f2)) {\n        return equals(f1, f2);\n    }\n    return f1 === f2;\n}\nclass ListViewAccessibilityProvider {\n    constructor(accessibilityProvider) {\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.getSetSize) {\n            this.getSetSize = accessibilityProvider.getSetSize.bind(accessibilityProvider);\n        }\n        else {\n            this.getSetSize = (e, i, l) => l;\n        }\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.getPosInSet) {\n            this.getPosInSet = accessibilityProvider.getPosInSet.bind(accessibilityProvider);\n        }\n        else {\n            this.getPosInSet = (e, i) => i + 1;\n        }\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.getRole) {\n            this.getRole = accessibilityProvider.getRole.bind(accessibilityProvider);\n        }\n        else {\n            this.getRole = _ => 'listitem';\n        }\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.isChecked) {\n            this.isChecked = accessibilityProvider.isChecked.bind(accessibilityProvider);\n        }\n        else {\n            this.isChecked = _ => undefined;\n        }\n    }\n}\n/**\n * The {@link ListView} is a virtual scrolling engine.\n *\n * Given that it only renders elements within its viewport, it can hold large\n * collections of elements and stay very performant. The performance bottleneck\n * usually lies within the user's rendering code for each element.\n *\n * @remarks It is a low-level widget, not meant to be used directly. Refer to the\n * List widget instead.\n */\nexport class ListView {\n    get contentHeight() { return this.rangeMap.size; }\n    get onDidScroll() { return this.scrollableElement.onScroll; }\n    get horizontalScrolling() { return this._horizontalScrolling; }\n    set horizontalScrolling(value) {\n        if (value === this._horizontalScrolling) {\n            return;\n        }\n        if (value && this.supportDynamicHeights) {\n            throw new Error('Horizontal scrolling and dynamic heights not supported simultaneously');\n        }\n        this._horizontalScrolling = value;\n        this.domNode.classList.toggle('horizontal-scrolling', this._horizontalScrolling);\n        if (this._horizontalScrolling) {\n            for (const item of this.items) {\n                this.measureItemWidth(item);\n            }\n            this.updateScrollWidth();\n            this.scrollableElement.setScrollDimensions({ width: getContentWidth(this.domNode) });\n            this.rowsContainer.style.width = `${Math.max(this.scrollWidth || 0, this.renderWidth)}px`;\n        }\n        else {\n            this.scrollableElementWidthDelayer.cancel();\n            this.scrollableElement.setScrollDimensions({ width: this.renderWidth, scrollWidth: this.renderWidth });\n            this.rowsContainer.style.width = '';\n        }\n    }\n    constructor(container, virtualDelegate, renderers, options = DefaultOptions) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;\n        this.virtualDelegate = virtualDelegate;\n        this.domId = `list_id_${++ListView.InstanceCount}`;\n        this.renderers = new Map();\n        this.renderWidth = 0;\n        this._scrollHeight = 0;\n        this.scrollableElementUpdateDisposable = null;\n        this.scrollableElementWidthDelayer = new Delayer(50);\n        this.splicing = false;\n        this.dragOverAnimationStopDisposable = Disposable.None;\n        this.dragOverMouseY = 0;\n        this.canDrop = false;\n        this.currentDragFeedbackDisposable = Disposable.None;\n        this.onDragLeaveTimeout = Disposable.None;\n        this.disposables = new DisposableStore();\n        this._onDidChangeContentHeight = new Emitter();\n        this._onDidChangeContentWidth = new Emitter();\n        this._horizontalScrolling = false;\n        if (options.horizontalScrolling && options.supportDynamicHeights) {\n            throw new Error('Horizontal scrolling and dynamic heights not supported simultaneously');\n        }\n        this.items = [];\n        this.itemId = 0;\n        this.rangeMap = new RangeMap((_a = options.paddingTop) !== null && _a !== void 0 ? _a : 0);\n        for (const renderer of renderers) {\n            this.renderers.set(renderer.templateId, renderer);\n        }\n        this.cache = this.disposables.add(new RowCache(this.renderers));\n        this.lastRenderTop = 0;\n        this.lastRenderHeight = 0;\n        this.domNode = document.createElement('div');\n        this.domNode.className = 'monaco-list';\n        this.domNode.classList.add(this.domId);\n        this.domNode.tabIndex = 0;\n        this.domNode.classList.toggle('mouse-support', typeof options.mouseSupport === 'boolean' ? options.mouseSupport : true);\n        this._horizontalScrolling = (_b = options.horizontalScrolling) !== null && _b !== void 0 ? _b : DefaultOptions.horizontalScrolling;\n        this.domNode.classList.toggle('horizontal-scrolling', this._horizontalScrolling);\n        this.paddingBottom = typeof options.paddingBottom === 'undefined' ? 0 : options.paddingBottom;\n        this.accessibilityProvider = new ListViewAccessibilityProvider(options.accessibilityProvider);\n        this.rowsContainer = document.createElement('div');\n        this.rowsContainer.className = 'monaco-list-rows';\n        const transformOptimization = (_c = options.transformOptimization) !== null && _c !== void 0 ? _c : DefaultOptions.transformOptimization;\n        if (transformOptimization) {\n            this.rowsContainer.style.transform = 'translate3d(0px, 0px, 0px)';\n            this.rowsContainer.style.overflow = 'hidden';\n            this.rowsContainer.style.contain = 'strict';\n        }\n        this.disposables.add(Gesture.addTarget(this.rowsContainer));\n        this.scrollable = this.disposables.add(new Scrollable({\n            forceIntegerValues: true,\n            smoothScrollDuration: ((_d = options.smoothScrolling) !== null && _d !== void 0 ? _d : false) ? 125 : 0,\n            scheduleAtNextAnimationFrame: cb => scheduleAtNextAnimationFrame(cb)\n        }));\n        this.scrollableElement = this.disposables.add(new SmoothScrollableElement(this.rowsContainer, {\n            alwaysConsumeMouseWheel: (_e = options.alwaysConsumeMouseWheel) !== null && _e !== void 0 ? _e : DefaultOptions.alwaysConsumeMouseWheel,\n            horizontal: 1 /* ScrollbarVisibility.Auto */,\n            vertical: (_f = options.verticalScrollMode) !== null && _f !== void 0 ? _f : DefaultOptions.verticalScrollMode,\n            useShadows: (_g = options.useShadows) !== null && _g !== void 0 ? _g : DefaultOptions.useShadows,\n            mouseWheelScrollSensitivity: options.mouseWheelScrollSensitivity,\n            fastScrollSensitivity: options.fastScrollSensitivity,\n            scrollByPage: options.scrollByPage\n        }, this.scrollable));\n        this.domNode.appendChild(this.scrollableElement.getDomNode());\n        container.appendChild(this.domNode);\n        this.scrollableElement.onScroll(this.onScroll, this, this.disposables);\n        this.disposables.add(addDisposableListener(this.rowsContainer, TouchEventType.Change, e => this.onTouchChange(e)));\n        // Prevent the monaco-scrollable-element from scrolling\n        // https://github.com/microsoft/vscode/issues/44181\n        this.disposables.add(addDisposableListener(this.scrollableElement.getDomNode(), 'scroll', e => e.target.scrollTop = 0));\n        this.disposables.add(addDisposableListener(this.domNode, 'dragover', e => this.onDragOver(this.toDragEvent(e))));\n        this.disposables.add(addDisposableListener(this.domNode, 'drop', e => this.onDrop(this.toDragEvent(e))));\n        this.disposables.add(addDisposableListener(this.domNode, 'dragleave', e => this.onDragLeave(this.toDragEvent(e))));\n        this.disposables.add(addDisposableListener(this.domNode, 'dragend', e => this.onDragEnd(e)));\n        this.setRowLineHeight = (_h = options.setRowLineHeight) !== null && _h !== void 0 ? _h : DefaultOptions.setRowLineHeight;\n        this.setRowHeight = (_j = options.setRowHeight) !== null && _j !== void 0 ? _j : DefaultOptions.setRowHeight;\n        this.supportDynamicHeights = (_k = options.supportDynamicHeights) !== null && _k !== void 0 ? _k : DefaultOptions.supportDynamicHeights;\n        this.dnd = (_l = options.dnd) !== null && _l !== void 0 ? _l : this.disposables.add(DefaultOptions.dnd);\n        this.layout((_m = options.initialSize) === null || _m === void 0 ? void 0 : _m.height, (_o = options.initialSize) === null || _o === void 0 ? void 0 : _o.width);\n    }\n    updateOptions(options) {\n        if (options.paddingBottom !== undefined) {\n            this.paddingBottom = options.paddingBottom;\n            this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n        }\n        if (options.smoothScrolling !== undefined) {\n            this.scrollable.setSmoothScrollDuration(options.smoothScrolling ? 125 : 0);\n        }\n        if (options.horizontalScrolling !== undefined) {\n            this.horizontalScrolling = options.horizontalScrolling;\n        }\n        let scrollableOptions;\n        if (options.scrollByPage !== undefined) {\n            scrollableOptions = Object.assign(Object.assign({}, (scrollableOptions !== null && scrollableOptions !== void 0 ? scrollableOptions : {})), { scrollByPage: options.scrollByPage });\n        }\n        if (options.mouseWheelScrollSensitivity !== undefined) {\n            scrollableOptions = Object.assign(Object.assign({}, (scrollableOptions !== null && scrollableOptions !== void 0 ? scrollableOptions : {})), { mouseWheelScrollSensitivity: options.mouseWheelScrollSensitivity });\n        }\n        if (options.fastScrollSensitivity !== undefined) {\n            scrollableOptions = Object.assign(Object.assign({}, (scrollableOptions !== null && scrollableOptions !== void 0 ? scrollableOptions : {})), { fastScrollSensitivity: options.fastScrollSensitivity });\n        }\n        if (scrollableOptions) {\n            this.scrollableElement.updateOptions(scrollableOptions);\n        }\n        if (options.paddingTop !== undefined && options.paddingTop !== this.rangeMap.paddingTop) {\n            // trigger a rerender\n            const lastRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n            const offset = options.paddingTop - this.rangeMap.paddingTop;\n            this.rangeMap.paddingTop = options.paddingTop;\n            this.render(lastRenderRange, Math.max(0, this.lastRenderTop + offset), this.lastRenderHeight, undefined, undefined, true);\n            this.setScrollTop(this.lastRenderTop);\n            this.eventuallyUpdateScrollDimensions();\n            if (this.supportDynamicHeights) {\n                this._rerender(this.lastRenderTop, this.lastRenderHeight);\n            }\n        }\n    }\n    splice(start, deleteCount, elements = []) {\n        if (this.splicing) {\n            throw new Error('Can\\'t run recursive splices.');\n        }\n        this.splicing = true;\n        try {\n            return this._splice(start, deleteCount, elements);\n        }\n        finally {\n            this.splicing = false;\n            this._onDidChangeContentHeight.fire(this.contentHeight);\n        }\n    }\n    _splice(start, deleteCount, elements = []) {\n        const previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n        const deleteRange = { start, end: start + deleteCount };\n        const removeRange = Range.intersect(previousRenderRange, deleteRange);\n        // try to reuse rows, avoid removing them from DOM\n        const rowsToDispose = new Map();\n        for (let i = removeRange.end - 1; i >= removeRange.start; i--) {\n            const item = this.items[i];\n            item.dragStartDisposable.dispose();\n            item.checkedDisposable.dispose();\n            if (item.row) {\n                let rows = rowsToDispose.get(item.templateId);\n                if (!rows) {\n                    rows = [];\n                    rowsToDispose.set(item.templateId, rows);\n                }\n                const renderer = this.renderers.get(item.templateId);\n                if (renderer && renderer.disposeElement) {\n                    renderer.disposeElement(item.element, i, item.row.templateData, item.size);\n                }\n                rows.push(item.row);\n            }\n            item.row = null;\n        }\n        const previousRestRange = { start: start + deleteCount, end: this.items.length };\n        const previousRenderedRestRange = Range.intersect(previousRestRange, previousRenderRange);\n        const previousUnrenderedRestRanges = Range.relativeComplement(previousRestRange, previousRenderRange);\n        const inserted = elements.map(element => ({\n            id: String(this.itemId++),\n            element,\n            templateId: this.virtualDelegate.getTemplateId(element),\n            size: this.virtualDelegate.getHeight(element),\n            width: undefined,\n            hasDynamicHeight: !!this.virtualDelegate.hasDynamicHeight && this.virtualDelegate.hasDynamicHeight(element),\n            lastDynamicHeightWidth: undefined,\n            row: null,\n            uri: undefined,\n            dropTarget: false,\n            dragStartDisposable: Disposable.None,\n            checkedDisposable: Disposable.None\n        }));\n        let deleted;\n        // TODO@joao: improve this optimization to catch even more cases\n        if (start === 0 && deleteCount >= this.items.length) {\n            this.rangeMap = new RangeMap(this.rangeMap.paddingTop);\n            this.rangeMap.splice(0, 0, inserted);\n            deleted = this.items;\n            this.items = inserted;\n        }\n        else {\n            this.rangeMap.splice(start, deleteCount, inserted);\n            deleted = this.items.splice(start, deleteCount, ...inserted);\n        }\n        const delta = elements.length - deleteCount;\n        const renderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n        const renderedRestRange = shift(previousRenderedRestRange, delta);\n        const updateRange = Range.intersect(renderRange, renderedRestRange);\n        for (let i = updateRange.start; i < updateRange.end; i++) {\n            this.updateItemInDOM(this.items[i], i);\n        }\n        const removeRanges = Range.relativeComplement(renderedRestRange, renderRange);\n        for (const range of removeRanges) {\n            for (let i = range.start; i < range.end; i++) {\n                this.removeItemFromDOM(i);\n            }\n        }\n        const unrenderedRestRanges = previousUnrenderedRestRanges.map(r => shift(r, delta));\n        const elementsRange = { start, end: start + elements.length };\n        const insertRanges = [elementsRange, ...unrenderedRestRanges].map(r => Range.intersect(renderRange, r));\n        const beforeElement = this.getNextToLastElement(insertRanges);\n        for (const range of insertRanges) {\n            for (let i = range.start; i < range.end; i++) {\n                const item = this.items[i];\n                const rows = rowsToDispose.get(item.templateId);\n                const row = rows === null || rows === void 0 ? void 0 : rows.pop();\n                this.insertItemInDOM(i, beforeElement, row);\n            }\n        }\n        for (const rows of rowsToDispose.values()) {\n            for (const row of rows) {\n                this.cache.release(row);\n            }\n        }\n        this.eventuallyUpdateScrollDimensions();\n        if (this.supportDynamicHeights) {\n            this._rerender(this.scrollTop, this.renderHeight);\n        }\n        return deleted.map(i => i.element);\n    }\n    eventuallyUpdateScrollDimensions() {\n        this._scrollHeight = this.contentHeight;\n        this.rowsContainer.style.height = `${this._scrollHeight}px`;\n        if (!this.scrollableElementUpdateDisposable) {\n            this.scrollableElementUpdateDisposable = scheduleAtNextAnimationFrame(() => {\n                this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n                this.updateScrollWidth();\n                this.scrollableElementUpdateDisposable = null;\n            });\n        }\n    }\n    eventuallyUpdateScrollWidth() {\n        if (!this.horizontalScrolling) {\n            this.scrollableElementWidthDelayer.cancel();\n            return;\n        }\n        this.scrollableElementWidthDelayer.trigger(() => this.updateScrollWidth());\n    }\n    updateScrollWidth() {\n        if (!this.horizontalScrolling) {\n            return;\n        }\n        let scrollWidth = 0;\n        for (const item of this.items) {\n            if (typeof item.width !== 'undefined') {\n                scrollWidth = Math.max(scrollWidth, item.width);\n            }\n        }\n        this.scrollWidth = scrollWidth;\n        this.scrollableElement.setScrollDimensions({ scrollWidth: scrollWidth === 0 ? 0 : (scrollWidth + 10) });\n        this._onDidChangeContentWidth.fire(this.scrollWidth);\n    }\n    rerender() {\n        if (!this.supportDynamicHeights) {\n            return;\n        }\n        for (const item of this.items) {\n            item.lastDynamicHeightWidth = undefined;\n        }\n        this._rerender(this.lastRenderTop, this.lastRenderHeight);\n    }\n    get length() {\n        return this.items.length;\n    }\n    get renderHeight() {\n        const scrollDimensions = this.scrollableElement.getScrollDimensions();\n        return scrollDimensions.height;\n    }\n    get firstVisibleIndex() {\n        const range = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n        const firstElTop = this.rangeMap.positionAt(range.start);\n        const nextElTop = this.rangeMap.positionAt(range.start + 1);\n        if (nextElTop !== -1) {\n            const firstElMidpoint = (nextElTop - firstElTop) / 2 + firstElTop;\n            if (firstElMidpoint < this.scrollTop) {\n                return range.start + 1;\n            }\n        }\n        return range.start;\n    }\n    element(index) {\n        return this.items[index].element;\n    }\n    domElement(index) {\n        const row = this.items[index].row;\n        return row && row.domNode;\n    }\n    elementHeight(index) {\n        return this.items[index].size;\n    }\n    elementTop(index) {\n        return this.rangeMap.positionAt(index);\n    }\n    indexAt(position) {\n        return this.rangeMap.indexAt(position);\n    }\n    indexAfter(position) {\n        return this.rangeMap.indexAfter(position);\n    }\n    layout(height, width) {\n        const scrollDimensions = {\n            height: typeof height === 'number' ? height : getContentHeight(this.domNode)\n        };\n        if (this.scrollableElementUpdateDisposable) {\n            this.scrollableElementUpdateDisposable.dispose();\n            this.scrollableElementUpdateDisposable = null;\n            scrollDimensions.scrollHeight = this.scrollHeight;\n        }\n        this.scrollableElement.setScrollDimensions(scrollDimensions);\n        if (typeof width !== 'undefined') {\n            this.renderWidth = width;\n            if (this.supportDynamicHeights) {\n                this._rerender(this.scrollTop, this.renderHeight);\n            }\n        }\n        if (this.horizontalScrolling) {\n            this.scrollableElement.setScrollDimensions({\n                width: typeof width === 'number' ? width : getContentWidth(this.domNode)\n            });\n        }\n    }\n    // Render\n    render(previousRenderRange, renderTop, renderHeight, renderLeft, scrollWidth, updateItemsInDOM = false) {\n        const renderRange = this.getRenderRange(renderTop, renderHeight);\n        const rangesToInsert = Range.relativeComplement(renderRange, previousRenderRange);\n        const rangesToRemove = Range.relativeComplement(previousRenderRange, renderRange);\n        const beforeElement = this.getNextToLastElement(rangesToInsert);\n        if (updateItemsInDOM) {\n            const rangesToUpdate = Range.intersect(previousRenderRange, renderRange);\n            for (let i = rangesToUpdate.start; i < rangesToUpdate.end; i++) {\n                this.updateItemInDOM(this.items[i], i);\n            }\n        }\n        this.cache.transact(() => {\n            for (const range of rangesToRemove) {\n                for (let i = range.start; i < range.end; i++) {\n                    this.removeItemFromDOM(i);\n                }\n            }\n            for (const range of rangesToInsert) {\n                for (let i = range.start; i < range.end; i++) {\n                    this.insertItemInDOM(i, beforeElement);\n                }\n            }\n        });\n        if (renderLeft !== undefined) {\n            this.rowsContainer.style.left = `-${renderLeft}px`;\n        }\n        this.rowsContainer.style.top = `-${renderTop}px`;\n        if (this.horizontalScrolling && scrollWidth !== undefined) {\n            this.rowsContainer.style.width = `${Math.max(scrollWidth, this.renderWidth)}px`;\n        }\n        this.lastRenderTop = renderTop;\n        this.lastRenderHeight = renderHeight;\n    }\n    // DOM operations\n    insertItemInDOM(index, beforeElement, row) {\n        const item = this.items[index];\n        let isStale = false;\n        if (!item.row) {\n            if (row) {\n                item.row = row;\n            }\n            else {\n                const result = this.cache.alloc(item.templateId);\n                item.row = result.row;\n                isStale = result.isReusingConnectedDomNode;\n            }\n        }\n        const role = this.accessibilityProvider.getRole(item.element) || 'listitem';\n        item.row.domNode.setAttribute('role', role);\n        const checked = this.accessibilityProvider.isChecked(item.element);\n        if (typeof checked === 'boolean') {\n            item.row.domNode.setAttribute('aria-checked', String(!!checked));\n        }\n        else if (checked) {\n            const update = (checked) => item.row.domNode.setAttribute('aria-checked', String(!!checked));\n            update(checked.value);\n            item.checkedDisposable = checked.onDidChange(update);\n        }\n        if (isStale || !item.row.domNode.parentElement) {\n            if (beforeElement) {\n                this.rowsContainer.insertBefore(item.row.domNode, beforeElement);\n            }\n            else {\n                this.rowsContainer.appendChild(item.row.domNode);\n            }\n        }\n        this.updateItemInDOM(item, index);\n        const renderer = this.renderers.get(item.templateId);\n        if (!renderer) {\n            throw new Error(`No renderer found for template id ${item.templateId}`);\n        }\n        renderer === null || renderer === void 0 ? void 0 : renderer.renderElement(item.element, index, item.row.templateData, item.size);\n        const uri = this.dnd.getDragURI(item.element);\n        item.dragStartDisposable.dispose();\n        item.row.domNode.draggable = !!uri;\n        if (uri) {\n            item.dragStartDisposable = addDisposableListener(item.row.domNode, 'dragstart', event => this.onDragStart(item.element, uri, event));\n        }\n        if (this.horizontalScrolling) {\n            this.measureItemWidth(item);\n            this.eventuallyUpdateScrollWidth();\n        }\n    }\n    measureItemWidth(item) {\n        if (!item.row || !item.row.domNode) {\n            return;\n        }\n        item.row.domNode.style.width = 'fit-content';\n        item.width = getContentWidth(item.row.domNode);\n        const style = window.getComputedStyle(item.row.domNode);\n        if (style.paddingLeft) {\n            item.width += parseFloat(style.paddingLeft);\n        }\n        if (style.paddingRight) {\n            item.width += parseFloat(style.paddingRight);\n        }\n        item.row.domNode.style.width = '';\n    }\n    updateItemInDOM(item, index) {\n        item.row.domNode.style.top = `${this.elementTop(index)}px`;\n        if (this.setRowHeight) {\n            item.row.domNode.style.height = `${item.size}px`;\n        }\n        if (this.setRowLineHeight) {\n            item.row.domNode.style.lineHeight = `${item.size}px`;\n        }\n        item.row.domNode.setAttribute('data-index', `${index}`);\n        item.row.domNode.setAttribute('data-last-element', index === this.length - 1 ? 'true' : 'false');\n        item.row.domNode.setAttribute('data-parity', index % 2 === 0 ? 'even' : 'odd');\n        item.row.domNode.setAttribute('aria-setsize', String(this.accessibilityProvider.getSetSize(item.element, index, this.length)));\n        item.row.domNode.setAttribute('aria-posinset', String(this.accessibilityProvider.getPosInSet(item.element, index)));\n        item.row.domNode.setAttribute('id', this.getElementDomId(index));\n        item.row.domNode.classList.toggle('drop-target', item.dropTarget);\n    }\n    removeItemFromDOM(index) {\n        const item = this.items[index];\n        item.dragStartDisposable.dispose();\n        item.checkedDisposable.dispose();\n        if (item.row) {\n            const renderer = this.renderers.get(item.templateId);\n            if (renderer && renderer.disposeElement) {\n                renderer.disposeElement(item.element, index, item.row.templateData, item.size);\n            }\n            this.cache.release(item.row);\n            item.row = null;\n        }\n        if (this.horizontalScrolling) {\n            this.eventuallyUpdateScrollWidth();\n        }\n    }\n    getScrollTop() {\n        const scrollPosition = this.scrollableElement.getScrollPosition();\n        return scrollPosition.scrollTop;\n    }\n    setScrollTop(scrollTop, reuseAnimation) {\n        if (this.scrollableElementUpdateDisposable) {\n            this.scrollableElementUpdateDisposable.dispose();\n            this.scrollableElementUpdateDisposable = null;\n            this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n        }\n        this.scrollableElement.setScrollPosition({ scrollTop, reuseAnimation });\n    }\n    get scrollTop() {\n        return this.getScrollTop();\n    }\n    set scrollTop(scrollTop) {\n        this.setScrollTop(scrollTop);\n    }\n    get scrollHeight() {\n        return this._scrollHeight + (this.horizontalScrolling ? 10 : 0) + this.paddingBottom;\n    }\n    // Events\n    get onMouseClick() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'click')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseDblClick() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'dblclick')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseMiddleClick() { return Event.filter(Event.map(this.disposables.add(new DomEmitter(this.domNode, 'auxclick')).event, e => this.toMouseEvent(e), this.disposables), e => e.browserEvent.button === 1, this.disposables); }\n    get onMouseDown() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mousedown')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseOver() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mouseover')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseOut() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mouseout')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onContextMenu() { return Event.any(Event.map(this.disposables.add(new DomEmitter(this.domNode, 'contextmenu')).event, e => this.toMouseEvent(e), this.disposables), Event.map(this.disposables.add(new DomEmitter(this.domNode, TouchEventType.Contextmenu)).event, e => this.toGestureEvent(e), this.disposables)); }\n    get onTouchStart() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'touchstart')).event, e => this.toTouchEvent(e), this.disposables); }\n    get onTap() { return Event.map(this.disposables.add(new DomEmitter(this.rowsContainer, TouchEventType.Tap)).event, e => this.toGestureEvent(e), this.disposables); }\n    toMouseEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    toTouchEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    toGestureEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.initialTarget || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    toDragEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    onScroll(e) {\n        try {\n            const previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n            this.render(previousRenderRange, e.scrollTop, e.height, e.scrollLeft, e.scrollWidth);\n            if (this.supportDynamicHeights) {\n                this._rerender(e.scrollTop, e.height, e.inSmoothScrolling);\n            }\n        }\n        catch (err) {\n            console.error('Got bad scroll event:', e);\n            throw err;\n        }\n    }\n    onTouchChange(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.scrollTop -= event.translationY;\n    }\n    // DND\n    onDragStart(element, uri, event) {\n        var _a, _b;\n        if (!event.dataTransfer) {\n            return;\n        }\n        const elements = this.dnd.getDragElements(element);\n        event.dataTransfer.effectAllowed = 'copyMove';\n        event.dataTransfer.setData(DataTransfers.TEXT, uri);\n        if (event.dataTransfer.setDragImage) {\n            let label;\n            if (this.dnd.getDragLabel) {\n                label = this.dnd.getDragLabel(elements, event);\n            }\n            if (typeof label === 'undefined') {\n                label = String(elements.length);\n            }\n            const dragImage = $('.monaco-drag-image');\n            dragImage.textContent = label;\n            const getDragImageContainer = (e) => {\n                while (e && !e.classList.contains('monaco-workbench')) {\n                    e = e.parentElement;\n                }\n                return e || document.body;\n            };\n            const container = getDragImageContainer(this.domNode);\n            container.appendChild(dragImage);\n            event.dataTransfer.setDragImage(dragImage, -10, -10);\n            setTimeout(() => container.removeChild(dragImage), 0);\n        }\n        this.domNode.classList.add('dragging');\n        this.currentDragData = new ElementsDragAndDropData(elements);\n        StaticDND.CurrentDragAndDropData = new ExternalElementsDragAndDropData(elements);\n        (_b = (_a = this.dnd).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, this.currentDragData, event);\n    }\n    onDragOver(event) {\n        var _a;\n        event.browserEvent.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\n        this.onDragLeaveTimeout.dispose();\n        if (StaticDND.CurrentDragAndDropData && StaticDND.CurrentDragAndDropData.getData() === 'vscode-ui') {\n            return false;\n        }\n        this.setupDragAndDropScrollTopAnimation(event.browserEvent);\n        if (!event.browserEvent.dataTransfer) {\n            return false;\n        }\n        // Drag over from outside\n        if (!this.currentDragData) {\n            if (StaticDND.CurrentDragAndDropData) {\n                // Drag over from another list\n                this.currentDragData = StaticDND.CurrentDragAndDropData;\n            }\n            else {\n                // Drag over from the desktop\n                if (!event.browserEvent.dataTransfer.types) {\n                    return false;\n                }\n                this.currentDragData = new NativeDragAndDropData();\n            }\n        }\n        const result = this.dnd.onDragOver(this.currentDragData, event.element, event.index, event.browserEvent);\n        this.canDrop = typeof result === 'boolean' ? result : result.accept;\n        if (!this.canDrop) {\n            this.currentDragFeedback = undefined;\n            this.currentDragFeedbackDisposable.dispose();\n            return false;\n        }\n        event.browserEvent.dataTransfer.dropEffect = (typeof result !== 'boolean' && result.effect === 0 /* ListDragOverEffect.Copy */) ? 'copy' : 'move';\n        let feedback;\n        if (typeof result !== 'boolean' && result.feedback) {\n            feedback = result.feedback;\n        }\n        else {\n            if (typeof event.index === 'undefined') {\n                feedback = [-1];\n            }\n            else {\n                feedback = [event.index];\n            }\n        }\n        // sanitize feedback list\n        feedback = distinct(feedback).filter(i => i >= -1 && i < this.length).sort((a, b) => a - b);\n        feedback = feedback[0] === -1 ? [-1] : feedback;\n        if (equalsDragFeedback(this.currentDragFeedback, feedback)) {\n            return true;\n        }\n        this.currentDragFeedback = feedback;\n        this.currentDragFeedbackDisposable.dispose();\n        if (feedback[0] === -1) { // entire list feedback\n            this.domNode.classList.add('drop-target');\n            this.rowsContainer.classList.add('drop-target');\n            this.currentDragFeedbackDisposable = toDisposable(() => {\n                this.domNode.classList.remove('drop-target');\n                this.rowsContainer.classList.remove('drop-target');\n            });\n        }\n        else {\n            for (const index of feedback) {\n                const item = this.items[index];\n                item.dropTarget = true;\n                (_a = item.row) === null || _a === void 0 ? void 0 : _a.domNode.classList.add('drop-target');\n            }\n            this.currentDragFeedbackDisposable = toDisposable(() => {\n                var _a;\n                for (const index of feedback) {\n                    const item = this.items[index];\n                    item.dropTarget = false;\n                    (_a = item.row) === null || _a === void 0 ? void 0 : _a.domNode.classList.remove('drop-target');\n                }\n            });\n        }\n        return true;\n    }\n    onDragLeave(event) {\n        var _a, _b;\n        this.onDragLeaveTimeout.dispose();\n        this.onDragLeaveTimeout = disposableTimeout(() => this.clearDragOverFeedback(), 100, this.disposables);\n        if (this.currentDragData) {\n            (_b = (_a = this.dnd).onDragLeave) === null || _b === void 0 ? void 0 : _b.call(_a, this.currentDragData, event.element, event.index, event.browserEvent);\n        }\n    }\n    onDrop(event) {\n        if (!this.canDrop) {\n            return;\n        }\n        const dragData = this.currentDragData;\n        this.teardownDragAndDropScrollTopAnimation();\n        this.clearDragOverFeedback();\n        this.domNode.classList.remove('dragging');\n        this.currentDragData = undefined;\n        StaticDND.CurrentDragAndDropData = undefined;\n        if (!dragData || !event.browserEvent.dataTransfer) {\n            return;\n        }\n        event.browserEvent.preventDefault();\n        dragData.update(event.browserEvent.dataTransfer);\n        this.dnd.drop(dragData, event.element, event.index, event.browserEvent);\n    }\n    onDragEnd(event) {\n        var _a, _b;\n        this.canDrop = false;\n        this.teardownDragAndDropScrollTopAnimation();\n        this.clearDragOverFeedback();\n        this.domNode.classList.remove('dragging');\n        this.currentDragData = undefined;\n        StaticDND.CurrentDragAndDropData = undefined;\n        (_b = (_a = this.dnd).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, event);\n    }\n    clearDragOverFeedback() {\n        this.currentDragFeedback = undefined;\n        this.currentDragFeedbackDisposable.dispose();\n        this.currentDragFeedbackDisposable = Disposable.None;\n    }\n    // DND scroll top animation\n    setupDragAndDropScrollTopAnimation(event) {\n        if (!this.dragOverAnimationDisposable) {\n            const viewTop = getTopLeftOffset(this.domNode).top;\n            this.dragOverAnimationDisposable = animate(this.animateDragAndDropScrollTop.bind(this, viewTop));\n        }\n        this.dragOverAnimationStopDisposable.dispose();\n        this.dragOverAnimationStopDisposable = disposableTimeout(() => {\n            if (this.dragOverAnimationDisposable) {\n                this.dragOverAnimationDisposable.dispose();\n                this.dragOverAnimationDisposable = undefined;\n            }\n        }, 1000, this.disposables);\n        this.dragOverMouseY = event.pageY;\n    }\n    animateDragAndDropScrollTop(viewTop) {\n        if (this.dragOverMouseY === undefined) {\n            return;\n        }\n        const diff = this.dragOverMouseY - viewTop;\n        const upperLimit = this.renderHeight - 35;\n        if (diff < 35) {\n            this.scrollTop += Math.max(-14, Math.floor(0.3 * (diff - 35)));\n        }\n        else if (diff > upperLimit) {\n            this.scrollTop += Math.min(14, Math.floor(0.3 * (diff - upperLimit)));\n        }\n    }\n    teardownDragAndDropScrollTopAnimation() {\n        this.dragOverAnimationStopDisposable.dispose();\n        if (this.dragOverAnimationDisposable) {\n            this.dragOverAnimationDisposable.dispose();\n            this.dragOverAnimationDisposable = undefined;\n        }\n    }\n    // Util\n    getItemIndexFromEventTarget(target) {\n        const scrollableElement = this.scrollableElement.getDomNode();\n        let element = target;\n        while (element instanceof HTMLElement && element !== this.rowsContainer && scrollableElement.contains(element)) {\n            const rawIndex = element.getAttribute('data-index');\n            if (rawIndex) {\n                const index = Number(rawIndex);\n                if (!isNaN(index)) {\n                    return index;\n                }\n            }\n            element = element.parentElement;\n        }\n        return undefined;\n    }\n    getRenderRange(renderTop, renderHeight) {\n        return {\n            start: this.rangeMap.indexAt(renderTop),\n            end: this.rangeMap.indexAfter(renderTop + renderHeight - 1)\n        };\n    }\n    /**\n     * Given a stable rendered state, checks every rendered element whether it needs\n     * to be probed for dynamic height. Adjusts scroll height and top if necessary.\n     */\n    _rerender(renderTop, renderHeight, inSmoothScrolling) {\n        const previousRenderRange = this.getRenderRange(renderTop, renderHeight);\n        // Let's remember the second element's position, this helps in scrolling up\n        // and preserving a linear upwards scroll movement\n        let anchorElementIndex;\n        let anchorElementTopDelta;\n        if (renderTop === this.elementTop(previousRenderRange.start)) {\n            anchorElementIndex = previousRenderRange.start;\n            anchorElementTopDelta = 0;\n        }\n        else if (previousRenderRange.end - previousRenderRange.start > 1) {\n            anchorElementIndex = previousRenderRange.start + 1;\n            anchorElementTopDelta = this.elementTop(anchorElementIndex) - renderTop;\n        }\n        let heightDiff = 0;\n        while (true) {\n            const renderRange = this.getRenderRange(renderTop, renderHeight);\n            let didChange = false;\n            for (let i = renderRange.start; i < renderRange.end; i++) {\n                const diff = this.probeDynamicHeight(i);\n                if (diff !== 0) {\n                    this.rangeMap.splice(i, 1, [this.items[i]]);\n                }\n                heightDiff += diff;\n                didChange = didChange || diff !== 0;\n            }\n            if (!didChange) {\n                if (heightDiff !== 0) {\n                    this.eventuallyUpdateScrollDimensions();\n                }\n                const unrenderRanges = Range.relativeComplement(previousRenderRange, renderRange);\n                for (const range of unrenderRanges) {\n                    for (let i = range.start; i < range.end; i++) {\n                        if (this.items[i].row) {\n                            this.removeItemFromDOM(i);\n                        }\n                    }\n                }\n                const renderRanges = Range.relativeComplement(renderRange, previousRenderRange);\n                for (const range of renderRanges) {\n                    for (let i = range.start; i < range.end; i++) {\n                        const afterIndex = i + 1;\n                        const beforeRow = afterIndex < this.items.length ? this.items[afterIndex].row : null;\n                        const beforeElement = beforeRow ? beforeRow.domNode : null;\n                        this.insertItemInDOM(i, beforeElement);\n                    }\n                }\n                for (let i = renderRange.start; i < renderRange.end; i++) {\n                    if (this.items[i].row) {\n                        this.updateItemInDOM(this.items[i], i);\n                    }\n                }\n                if (typeof anchorElementIndex === 'number') {\n                    // To compute a destination scroll top, we need to take into account the current smooth scrolling\n                    // animation, and then reuse it with a new target (to avoid prolonging the scroll)\n                    // See https://github.com/microsoft/vscode/issues/104144\n                    // See https://github.com/microsoft/vscode/pull/104284\n                    // See https://github.com/microsoft/vscode/issues/107704\n                    const deltaScrollTop = this.scrollable.getFutureScrollPosition().scrollTop - renderTop;\n                    const newScrollTop = this.elementTop(anchorElementIndex) - anchorElementTopDelta + deltaScrollTop;\n                    this.setScrollTop(newScrollTop, inSmoothScrolling);\n                }\n                this._onDidChangeContentHeight.fire(this.contentHeight);\n                return;\n            }\n        }\n    }\n    probeDynamicHeight(index) {\n        var _a, _b, _c;\n        const item = this.items[index];\n        if (!!this.virtualDelegate.getDynamicHeight) {\n            const newSize = this.virtualDelegate.getDynamicHeight(item.element);\n            if (newSize !== null) {\n                const size = item.size;\n                item.size = newSize;\n                item.lastDynamicHeightWidth = this.renderWidth;\n                return newSize - size;\n            }\n        }\n        if (!item.hasDynamicHeight || item.lastDynamicHeightWidth === this.renderWidth) {\n            return 0;\n        }\n        if (!!this.virtualDelegate.hasDynamicHeight && !this.virtualDelegate.hasDynamicHeight(item.element)) {\n            return 0;\n        }\n        const size = item.size;\n        if (item.row) {\n            item.row.domNode.style.height = '';\n            item.size = item.row.domNode.offsetHeight;\n            item.lastDynamicHeightWidth = this.renderWidth;\n            return item.size - size;\n        }\n        const { row } = this.cache.alloc(item.templateId);\n        row.domNode.style.height = '';\n        this.rowsContainer.appendChild(row.domNode);\n        const renderer = this.renderers.get(item.templateId);\n        if (!renderer) {\n            throw new BugIndicatingError('Missing renderer for templateId: ' + item.templateId);\n        }\n        renderer.renderElement(item.element, index, row.templateData, undefined);\n        item.size = row.domNode.offsetHeight;\n        (_a = renderer.disposeElement) === null || _a === void 0 ? void 0 : _a.call(renderer, item.element, index, row.templateData, undefined);\n        (_c = (_b = this.virtualDelegate).setDynamicHeight) === null || _c === void 0 ? void 0 : _c.call(_b, item.element, item.size);\n        item.lastDynamicHeightWidth = this.renderWidth;\n        this.rowsContainer.removeChild(row.domNode);\n        this.cache.release(row);\n        return item.size - size;\n    }\n    getNextToLastElement(ranges) {\n        const lastRange = ranges[ranges.length - 1];\n        if (!lastRange) {\n            return null;\n        }\n        const nextToLastItem = this.items[lastRange.end];\n        if (!nextToLastItem) {\n            return null;\n        }\n        if (!nextToLastItem.row) {\n            return null;\n        }\n        return nextToLastItem.row.domNode;\n    }\n    getElementDomId(index) {\n        return `${this.domId}_${index}`;\n    }\n    // Dispose\n    dispose() {\n        var _a, _b;\n        for (const item of this.items) {\n            item.dragStartDisposable.dispose();\n            item.checkedDisposable.dispose();\n            if (item.row) {\n                const renderer = this.renderers.get(item.row.templateId);\n                if (renderer) {\n                    (_a = renderer.disposeElement) === null || _a === void 0 ? void 0 : _a.call(renderer, item.element, -1, item.row.templateData, undefined);\n                    renderer.disposeTemplate(item.row.templateData);\n                }\n            }\n        }\n        this.items = [];\n        if (this.domNode && this.domNode.parentNode) {\n            this.domNode.parentNode.removeChild(this.domNode);\n        }\n        (_b = this.dragOverAnimationDisposable) === null || _b === void 0 ? void 0 : _b.dispose();\n        this.disposables.dispose();\n    }\n}\nListView.InstanceCount = 0;\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseClick\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseDblClick\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseMiddleClick\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseDown\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseOver\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseOut\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onContextMenu\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onTouchStart\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onTap\", null);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class CombinedSpliceable {\n    constructor(spliceables) {\n        this.spliceables = spliceables;\n    }\n    splice(start, deleteCount, elements) {\n        this.spliceables.forEach(s => s.splice(start, deleteCount, elements));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class ListError extends Error {\n    constructor(user, message) {\n        super(`ListError [${user}] ${message}`);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { asCssValueWithDefault, createStyleSheet, EventHelper } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { Gesture } from '../../touch.js';\nimport { alert } from '../aria/aria.js';\nimport { CombinedSpliceable } from './splice.js';\nimport { binarySearch, firstOrDefault, range } from '../../../common/arrays.js';\nimport { timeout } from '../../../common/async.js';\nimport { Color } from '../../../common/color.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter, Event, EventBufferer } from '../../../common/event.js';\nimport { matchesFuzzy2, matchesPrefix } from '../../../common/filters.js';\nimport { DisposableStore, dispose } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport * as platform from '../../../common/platform.js';\nimport { isNumber } from '../../../common/types.js';\nimport './list.css';\nimport { ListError } from './list.js';\nimport { ListView } from './listView.js';\nimport { StandardMouseEvent } from '../../mouseEvent.js';\nclass TraitRenderer {\n    constructor(trait) {\n        this.trait = trait;\n        this.renderedElements = [];\n    }\n    get templateId() {\n        return `template:${this.trait.name}`;\n    }\n    renderTemplate(container) {\n        return container;\n    }\n    renderElement(element, index, templateData) {\n        const renderedElementIndex = this.renderedElements.findIndex(el => el.templateData === templateData);\n        if (renderedElementIndex >= 0) {\n            const rendered = this.renderedElements[renderedElementIndex];\n            this.trait.unrender(templateData);\n            rendered.index = index;\n        }\n        else {\n            const rendered = { index, templateData };\n            this.renderedElements.push(rendered);\n        }\n        this.trait.renderIndex(index, templateData);\n    }\n    splice(start, deleteCount, insertCount) {\n        const rendered = [];\n        for (const renderedElement of this.renderedElements) {\n            if (renderedElement.index < start) {\n                rendered.push(renderedElement);\n            }\n            else if (renderedElement.index >= start + deleteCount) {\n                rendered.push({\n                    index: renderedElement.index + insertCount - deleteCount,\n                    templateData: renderedElement.templateData\n                });\n            }\n        }\n        this.renderedElements = rendered;\n    }\n    renderIndexes(indexes) {\n        for (const { index, templateData } of this.renderedElements) {\n            if (indexes.indexOf(index) > -1) {\n                this.trait.renderIndex(index, templateData);\n            }\n        }\n    }\n    disposeTemplate(templateData) {\n        const index = this.renderedElements.findIndex(el => el.templateData === templateData);\n        if (index < 0) {\n            return;\n        }\n        this.renderedElements.splice(index, 1);\n    }\n}\nclass Trait {\n    get name() { return this._trait; }\n    get renderer() {\n        return new TraitRenderer(this);\n    }\n    constructor(_trait) {\n        this._trait = _trait;\n        this.length = 0;\n        this.indexes = [];\n        this.sortedIndexes = [];\n        this._onChange = new Emitter();\n        this.onChange = this._onChange.event;\n    }\n    splice(start, deleteCount, elements) {\n        var _a;\n        deleteCount = Math.max(0, Math.min(deleteCount, this.length - start));\n        const diff = elements.length - deleteCount;\n        const end = start + deleteCount;\n        const sortedIndexes = [];\n        let i = 0;\n        while (i < this.sortedIndexes.length && this.sortedIndexes[i] < start) {\n            sortedIndexes.push(this.sortedIndexes[i++]);\n        }\n        for (let j = 0; j < elements.length; j++) {\n            if (elements[j]) {\n                sortedIndexes.push(j + start);\n            }\n        }\n        while (i < this.sortedIndexes.length && this.sortedIndexes[i] >= end) {\n            sortedIndexes.push(this.sortedIndexes[i++] + diff);\n        }\n        const length = this.length + diff;\n        if (this.sortedIndexes.length > 0 && sortedIndexes.length === 0 && length > 0) {\n            const first = (_a = this.sortedIndexes.find(index => index >= start)) !== null && _a !== void 0 ? _a : length - 1;\n            sortedIndexes.push(Math.min(first, length - 1));\n        }\n        this.renderer.splice(start, deleteCount, elements.length);\n        this._set(sortedIndexes, sortedIndexes);\n        this.length = length;\n    }\n    renderIndex(index, container) {\n        container.classList.toggle(this._trait, this.contains(index));\n    }\n    unrender(container) {\n        container.classList.remove(this._trait);\n    }\n    /**\n     * Sets the indexes which should have this trait.\n     *\n     * @param indexes Indexes which should have this trait.\n     * @return The old indexes which had this trait.\n     */\n    set(indexes, browserEvent) {\n        return this._set(indexes, [...indexes].sort(numericSort), browserEvent);\n    }\n    _set(indexes, sortedIndexes, browserEvent) {\n        const result = this.indexes;\n        const sortedResult = this.sortedIndexes;\n        this.indexes = indexes;\n        this.sortedIndexes = sortedIndexes;\n        const toRender = disjunction(sortedResult, indexes);\n        this.renderer.renderIndexes(toRender);\n        this._onChange.fire({ indexes, browserEvent });\n        return result;\n    }\n    get() {\n        return this.indexes;\n    }\n    contains(index) {\n        return binarySearch(this.sortedIndexes, index, numericSort) >= 0;\n    }\n    dispose() {\n        dispose(this._onChange);\n    }\n}\n__decorate([\n    memoize\n], Trait.prototype, \"renderer\", null);\nclass SelectionTrait extends Trait {\n    constructor(setAriaSelected) {\n        super('selected');\n        this.setAriaSelected = setAriaSelected;\n    }\n    renderIndex(index, container) {\n        super.renderIndex(index, container);\n        if (this.setAriaSelected) {\n            if (this.contains(index)) {\n                container.setAttribute('aria-selected', 'true');\n            }\n            else {\n                container.setAttribute('aria-selected', 'false');\n            }\n        }\n    }\n}\n/**\n * The TraitSpliceable is used as a util class to be able\n * to preserve traits across splice calls, given an identity\n * provider.\n */\nclass TraitSpliceable {\n    constructor(trait, view, identityProvider) {\n        this.trait = trait;\n        this.view = view;\n        this.identityProvider = identityProvider;\n    }\n    splice(start, deleteCount, elements) {\n        if (!this.identityProvider) {\n            return this.trait.splice(start, deleteCount, new Array(elements.length).fill(false));\n        }\n        const pastElementsWithTrait = this.trait.get().map(i => this.identityProvider.getId(this.view.element(i)).toString());\n        if (pastElementsWithTrait.length === 0) {\n            return this.trait.splice(start, deleteCount, new Array(elements.length).fill(false));\n        }\n        const pastElementsWithTraitSet = new Set(pastElementsWithTrait);\n        const elementsWithTrait = elements.map(e => pastElementsWithTraitSet.has(this.identityProvider.getId(e).toString()));\n        this.trait.splice(start, deleteCount, elementsWithTrait);\n    }\n}\nexport function isInputElement(e) {\n    return e.tagName === 'INPUT' || e.tagName === 'TEXTAREA';\n}\nexport function isMonacoEditor(e) {\n    if (e.classList.contains('monaco-editor')) {\n        return true;\n    }\n    if (e.classList.contains('monaco-list')) {\n        return false;\n    }\n    if (!e.parentElement) {\n        return false;\n    }\n    return isMonacoEditor(e.parentElement);\n}\nexport function isButton(e) {\n    if ((e.tagName === 'A' && e.classList.contains('monaco-button')) ||\n        (e.tagName === 'DIV' && e.classList.contains('monaco-button-dropdown'))) {\n        return true;\n    }\n    if (e.classList.contains('monaco-list')) {\n        return false;\n    }\n    if (!e.parentElement) {\n        return false;\n    }\n    return isButton(e.parentElement);\n}\nclass KeyboardController {\n    get onKeyDown() {\n        return Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event, $ => $.filter(e => !isInputElement(e.target))\n            .map(e => new StandardKeyboardEvent(e)));\n    }\n    constructor(list, view, options) {\n        this.list = list;\n        this.view = view;\n        this.disposables = new DisposableStore();\n        this.multipleSelectionDisposables = new DisposableStore();\n        this.multipleSelectionSupport = options.multipleSelectionSupport;\n        this.disposables.add(this.onKeyDown(e => {\n            switch (e.keyCode) {\n                case 3 /* KeyCode.Enter */:\n                    return this.onEnter(e);\n                case 16 /* KeyCode.UpArrow */:\n                    return this.onUpArrow(e);\n                case 18 /* KeyCode.DownArrow */:\n                    return this.onDownArrow(e);\n                case 11 /* KeyCode.PageUp */:\n                    return this.onPageUpArrow(e);\n                case 12 /* KeyCode.PageDown */:\n                    return this.onPageDownArrow(e);\n                case 9 /* KeyCode.Escape */:\n                    return this.onEscape(e);\n                case 31 /* KeyCode.KeyA */:\n                    if (this.multipleSelectionSupport && (platform.isMacintosh ? e.metaKey : e.ctrlKey)) {\n                        this.onCtrlA(e);\n                    }\n            }\n        }));\n    }\n    updateOptions(optionsUpdate) {\n        if (optionsUpdate.multipleSelectionSupport !== undefined) {\n            this.multipleSelectionSupport = optionsUpdate.multipleSelectionSupport;\n        }\n    }\n    onEnter(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.setSelection(this.list.getFocus(), e.browserEvent);\n    }\n    onUpArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusPrevious(1, false, e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onDownArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusNext(1, false, e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onPageUpArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusPreviousPage(e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onPageDownArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusNextPage(e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onCtrlA(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.setSelection(range(this.list.length), e.browserEvent);\n        this.list.setAnchor(undefined);\n        this.view.domNode.focus();\n    }\n    onEscape(e) {\n        if (this.list.getSelection().length) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.list.setSelection([], e.browserEvent);\n            this.list.setAnchor(undefined);\n            this.view.domNode.focus();\n        }\n    }\n    dispose() {\n        this.disposables.dispose();\n        this.multipleSelectionDisposables.dispose();\n    }\n}\n__decorate([\n    memoize\n], KeyboardController.prototype, \"onKeyDown\", null);\nexport var TypeNavigationMode;\n(function (TypeNavigationMode) {\n    TypeNavigationMode[TypeNavigationMode[\"Automatic\"] = 0] = \"Automatic\";\n    TypeNavigationMode[TypeNavigationMode[\"Trigger\"] = 1] = \"Trigger\";\n})(TypeNavigationMode || (TypeNavigationMode = {}));\nvar TypeNavigationControllerState;\n(function (TypeNavigationControllerState) {\n    TypeNavigationControllerState[TypeNavigationControllerState[\"Idle\"] = 0] = \"Idle\";\n    TypeNavigationControllerState[TypeNavigationControllerState[\"Typing\"] = 1] = \"Typing\";\n})(TypeNavigationControllerState || (TypeNavigationControllerState = {}));\nexport const DefaultKeyboardNavigationDelegate = new class {\n    mightProducePrintableCharacter(event) {\n        if (event.ctrlKey || event.metaKey || event.altKey) {\n            return false;\n        }\n        return (event.keyCode >= 31 /* KeyCode.KeyA */ && event.keyCode <= 56 /* KeyCode.KeyZ */)\n            || (event.keyCode >= 21 /* KeyCode.Digit0 */ && event.keyCode <= 30 /* KeyCode.Digit9 */)\n            || (event.keyCode >= 98 /* KeyCode.Numpad0 */ && event.keyCode <= 107 /* KeyCode.Numpad9 */)\n            || (event.keyCode >= 85 /* KeyCode.Semicolon */ && event.keyCode <= 95 /* KeyCode.Quote */);\n    }\n};\nclass TypeNavigationController {\n    constructor(list, view, keyboardNavigationLabelProvider, keyboardNavigationEventFilter, delegate) {\n        this.list = list;\n        this.view = view;\n        this.keyboardNavigationLabelProvider = keyboardNavigationLabelProvider;\n        this.keyboardNavigationEventFilter = keyboardNavigationEventFilter;\n        this.delegate = delegate;\n        this.enabled = false;\n        this.state = TypeNavigationControllerState.Idle;\n        this.mode = TypeNavigationMode.Automatic;\n        this.triggered = false;\n        this.previouslyFocused = -1;\n        this.enabledDisposables = new DisposableStore();\n        this.disposables = new DisposableStore();\n        this.updateOptions(list.options);\n    }\n    updateOptions(options) {\n        var _a, _b;\n        if ((_a = options.typeNavigationEnabled) !== null && _a !== void 0 ? _a : true) {\n            this.enable();\n        }\n        else {\n            this.disable();\n        }\n        this.mode = (_b = options.typeNavigationMode) !== null && _b !== void 0 ? _b : TypeNavigationMode.Automatic;\n    }\n    enable() {\n        if (this.enabled) {\n            return;\n        }\n        let typing = false;\n        const onChar = Event.chain(this.enabledDisposables.add(new DomEmitter(this.view.domNode, 'keydown')).event, $ => $.filter(e => !isInputElement(e.target))\n            .filter(() => this.mode === TypeNavigationMode.Automatic || this.triggered)\n            .map(event => new StandardKeyboardEvent(event))\n            .filter(e => typing || this.keyboardNavigationEventFilter(e))\n            .filter(e => this.delegate.mightProducePrintableCharacter(e))\n            .forEach(e => EventHelper.stop(e, true))\n            .map(event => event.browserEvent.key));\n        const onClear = Event.debounce(onChar, () => null, 800, undefined, undefined, undefined, this.enabledDisposables);\n        const onInput = Event.reduce(Event.any(onChar, onClear), (r, i) => i === null ? null : ((r || '') + i), undefined, this.enabledDisposables);\n        onInput(this.onInput, this, this.enabledDisposables);\n        onClear(this.onClear, this, this.enabledDisposables);\n        onChar(() => typing = true, undefined, this.enabledDisposables);\n        onClear(() => typing = false, undefined, this.enabledDisposables);\n        this.enabled = true;\n        this.triggered = false;\n    }\n    disable() {\n        if (!this.enabled) {\n            return;\n        }\n        this.enabledDisposables.clear();\n        this.enabled = false;\n        this.triggered = false;\n    }\n    onClear() {\n        var _a;\n        const focus = this.list.getFocus();\n        if (focus.length > 0 && focus[0] === this.previouslyFocused) {\n            // List: re-announce element on typing end since typed keys will interrupt aria label of focused element\n            // Do not announce if there was a focus change at the end to prevent duplication https://github.com/microsoft/vscode/issues/95961\n            const ariaLabel = (_a = this.list.options.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getAriaLabel(this.list.element(focus[0]));\n            if (ariaLabel) {\n                alert(ariaLabel);\n            }\n        }\n        this.previouslyFocused = -1;\n    }\n    onInput(word) {\n        if (!word) {\n            this.state = TypeNavigationControllerState.Idle;\n            this.triggered = false;\n            return;\n        }\n        const focus = this.list.getFocus();\n        const start = focus.length > 0 ? focus[0] : 0;\n        const delta = this.state === TypeNavigationControllerState.Idle ? 1 : 0;\n        this.state = TypeNavigationControllerState.Typing;\n        for (let i = 0; i < this.list.length; i++) {\n            const index = (start + i + delta) % this.list.length;\n            const label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(index));\n            const labelStr = label && label.toString();\n            if (this.list.options.typeNavigationEnabled) {\n                if (typeof labelStr !== 'undefined') {\n                    // If prefix is found, focus and return early\n                    if (matchesPrefix(word, labelStr)) {\n                        this.previouslyFocused = start;\n                        this.list.setFocus([index]);\n                        this.list.reveal(index);\n                        return;\n                    }\n                    const fuzzy = matchesFuzzy2(word, labelStr);\n                    if (fuzzy) {\n                        const fuzzyScore = fuzzy[0].end - fuzzy[0].start;\n                        // ensures that when fuzzy matching, doesn't clash with prefix matching (1 input vs 1+ should be prefix and fuzzy respecitvely). Also makes sure that exact matches are prioritized.\n                        if (fuzzyScore > 1 && fuzzy.length === 1) {\n                            this.previouslyFocused = start;\n                            this.list.setFocus([index]);\n                            this.list.reveal(index);\n                            return;\n                        }\n                    }\n                }\n            }\n            else if (typeof labelStr === 'undefined' || matchesPrefix(word, labelStr)) {\n                this.previouslyFocused = start;\n                this.list.setFocus([index]);\n                this.list.reveal(index);\n                return;\n            }\n        }\n    }\n    dispose() {\n        this.disable();\n        this.enabledDisposables.dispose();\n        this.disposables.dispose();\n    }\n}\nclass DOMFocusController {\n    constructor(list, view) {\n        this.list = list;\n        this.view = view;\n        this.disposables = new DisposableStore();\n        const onKeyDown = Event.chain(this.disposables.add(new DomEmitter(view.domNode, 'keydown')).event, $ => $\n            .filter(e => !isInputElement(e.target))\n            .map(e => new StandardKeyboardEvent(e)));\n        const onTab = Event.chain(onKeyDown, $ => $.filter(e => e.keyCode === 2 /* KeyCode.Tab */ && !e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey));\n        onTab(this.onTab, this, this.disposables);\n    }\n    onTab(e) {\n        if (e.target !== this.view.domNode) {\n            return;\n        }\n        const focus = this.list.getFocus();\n        if (focus.length === 0) {\n            return;\n        }\n        const focusedDomElement = this.view.domElement(focus[0]);\n        if (!focusedDomElement) {\n            return;\n        }\n        const tabIndexElement = focusedDomElement.querySelector('[tabIndex]');\n        if (!tabIndexElement || !(tabIndexElement instanceof HTMLElement) || tabIndexElement.tabIndex === -1) {\n            return;\n        }\n        const style = window.getComputedStyle(tabIndexElement);\n        if (style.visibility === 'hidden' || style.display === 'none') {\n            return;\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        tabIndexElement.focus();\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nexport function isSelectionSingleChangeEvent(event) {\n    return platform.isMacintosh ? event.browserEvent.metaKey : event.browserEvent.ctrlKey;\n}\nexport function isSelectionRangeChangeEvent(event) {\n    return event.browserEvent.shiftKey;\n}\nfunction isMouseRightClick(event) {\n    return event instanceof MouseEvent && event.button === 2;\n}\nconst DefaultMultipleSelectionController = {\n    isSelectionSingleChangeEvent,\n    isSelectionRangeChangeEvent\n};\nexport class MouseController {\n    constructor(list) {\n        this.list = list;\n        this.disposables = new DisposableStore();\n        this._onPointer = new Emitter();\n        this.onPointer = this._onPointer.event;\n        if (list.options.multipleSelectionSupport !== false) {\n            this.multipleSelectionController = this.list.options.multipleSelectionController || DefaultMultipleSelectionController;\n        }\n        this.mouseSupport = typeof list.options.mouseSupport === 'undefined' || !!list.options.mouseSupport;\n        if (this.mouseSupport) {\n            list.onMouseDown(this.onMouseDown, this, this.disposables);\n            list.onContextMenu(this.onContextMenu, this, this.disposables);\n            list.onMouseDblClick(this.onDoubleClick, this, this.disposables);\n            list.onTouchStart(this.onMouseDown, this, this.disposables);\n            this.disposables.add(Gesture.addTarget(list.getHTMLElement()));\n        }\n        Event.any(list.onMouseClick, list.onMouseMiddleClick, list.onTap)(this.onViewPointer, this, this.disposables);\n    }\n    updateOptions(optionsUpdate) {\n        if (optionsUpdate.multipleSelectionSupport !== undefined) {\n            this.multipleSelectionController = undefined;\n            if (optionsUpdate.multipleSelectionSupport) {\n                this.multipleSelectionController = this.list.options.multipleSelectionController || DefaultMultipleSelectionController;\n            }\n        }\n    }\n    isSelectionSingleChangeEvent(event) {\n        if (!this.multipleSelectionController) {\n            return false;\n        }\n        return this.multipleSelectionController.isSelectionSingleChangeEvent(event);\n    }\n    isSelectionRangeChangeEvent(event) {\n        if (!this.multipleSelectionController) {\n            return false;\n        }\n        return this.multipleSelectionController.isSelectionRangeChangeEvent(event);\n    }\n    isSelectionChangeEvent(event) {\n        return this.isSelectionSingleChangeEvent(event) || this.isSelectionRangeChangeEvent(event);\n    }\n    onMouseDown(e) {\n        if (isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (document.activeElement !== e.browserEvent.target) {\n            this.list.domFocus();\n        }\n    }\n    onContextMenu(e) {\n        if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        const focus = typeof e.index === 'undefined' ? [] : [e.index];\n        this.list.setFocus(focus, e.browserEvent);\n    }\n    onViewPointer(e) {\n        if (!this.mouseSupport) {\n            return;\n        }\n        if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (e.browserEvent.isHandledByList) {\n            return;\n        }\n        e.browserEvent.isHandledByList = true;\n        const focus = e.index;\n        if (typeof focus === 'undefined') {\n            this.list.setFocus([], e.browserEvent);\n            this.list.setSelection([], e.browserEvent);\n            this.list.setAnchor(undefined);\n            return;\n        }\n        if (this.isSelectionChangeEvent(e)) {\n            return this.changeSelection(e);\n        }\n        this.list.setFocus([focus], e.browserEvent);\n        this.list.setAnchor(focus);\n        if (!isMouseRightClick(e.browserEvent)) {\n            this.list.setSelection([focus], e.browserEvent);\n        }\n        this._onPointer.fire(e);\n    }\n    onDoubleClick(e) {\n        if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (this.isSelectionChangeEvent(e)) {\n            return;\n        }\n        if (e.browserEvent.isHandledByList) {\n            return;\n        }\n        e.browserEvent.isHandledByList = true;\n        const focus = this.list.getFocus();\n        this.list.setSelection(focus, e.browserEvent);\n    }\n    changeSelection(e) {\n        const focus = e.index;\n        let anchor = this.list.getAnchor();\n        if (this.isSelectionRangeChangeEvent(e)) {\n            if (typeof anchor === 'undefined') {\n                const currentFocus = this.list.getFocus()[0];\n                anchor = currentFocus !== null && currentFocus !== void 0 ? currentFocus : focus;\n                this.list.setAnchor(anchor);\n            }\n            const min = Math.min(anchor, focus);\n            const max = Math.max(anchor, focus);\n            const rangeSelection = range(min, max + 1);\n            const selection = this.list.getSelection();\n            const contiguousRange = getContiguousRangeContaining(disjunction(selection, [anchor]), anchor);\n            if (contiguousRange.length === 0) {\n                return;\n            }\n            const newSelection = disjunction(rangeSelection, relativeComplement(selection, contiguousRange));\n            this.list.setSelection(newSelection, e.browserEvent);\n            this.list.setFocus([focus], e.browserEvent);\n        }\n        else if (this.isSelectionSingleChangeEvent(e)) {\n            const selection = this.list.getSelection();\n            const newSelection = selection.filter(i => i !== focus);\n            this.list.setFocus([focus]);\n            this.list.setAnchor(focus);\n            if (selection.length === newSelection.length) {\n                this.list.setSelection([...newSelection, focus], e.browserEvent);\n            }\n            else {\n                this.list.setSelection(newSelection, e.browserEvent);\n            }\n        }\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nexport class DefaultStyleController {\n    constructor(styleElement, selectorSuffix) {\n        this.styleElement = styleElement;\n        this.selectorSuffix = selectorSuffix;\n    }\n    style(styles) {\n        var _a, _b;\n        const suffix = this.selectorSuffix && `.${this.selectorSuffix}`;\n        const content = [];\n        if (styles.listBackground) {\n            content.push(`.monaco-list${suffix} .monaco-list-rows { background: ${styles.listBackground}; }`);\n        }\n        if (styles.listFocusBackground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused { background-color: ${styles.listFocusBackground}; }`);\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused:hover { background-color: ${styles.listFocusBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listFocusForeground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused { color: ${styles.listFocusForeground}; }`);\n        }\n        if (styles.listActiveSelectionBackground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { background-color: ${styles.listActiveSelectionBackground}; }`);\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected:hover { background-color: ${styles.listActiveSelectionBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listActiveSelectionForeground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { color: ${styles.listActiveSelectionForeground}; }`);\n        }\n        if (styles.listActiveSelectionIconForeground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected .codicon { color: ${styles.listActiveSelectionIconForeground}; }`);\n        }\n        if (styles.listFocusAndSelectionBackground) {\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.selected.focused { background-color: ${styles.listFocusAndSelectionBackground}; }\n\t\t\t`);\n        }\n        if (styles.listFocusAndSelectionForeground) {\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.selected.focused { color: ${styles.listFocusAndSelectionForeground}; }\n\t\t\t`);\n        }\n        if (styles.listInactiveFocusForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { color:  ${styles.listInactiveFocusForeground}; }`);\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused:hover { color:  ${styles.listInactiveFocusForeground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listInactiveSelectionIconForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused .codicon { color:  ${styles.listInactiveSelectionIconForeground}; }`);\n        }\n        if (styles.listInactiveFocusBackground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { background-color:  ${styles.listInactiveFocusBackground}; }`);\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused:hover { background-color:  ${styles.listInactiveFocusBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listInactiveSelectionBackground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { background-color:  ${styles.listInactiveSelectionBackground}; }`);\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected:hover { background-color:  ${styles.listInactiveSelectionBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listInactiveSelectionForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { color: ${styles.listInactiveSelectionForeground}; }`);\n        }\n        if (styles.listHoverBackground) {\n            content.push(`.monaco-list${suffix}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${styles.listHoverBackground}; }`);\n        }\n        if (styles.listHoverForeground) {\n            content.push(`.monaco-list${suffix}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${styles.listHoverForeground}; }`);\n        }\n        /**\n         * Outlines\n         */\n        const focusAndSelectionOutline = asCssValueWithDefault(styles.listFocusAndSelectionOutline, asCssValueWithDefault(styles.listSelectionOutline, (_a = styles.listFocusOutline) !== null && _a !== void 0 ? _a : ''));\n        if (focusAndSelectionOutline) { // default: listFocusOutline\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused.selected { outline: 1px solid ${focusAndSelectionOutline}; outline-offset: -1px;}`);\n        }\n        if (styles.listFocusOutline) { // default: set\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.focused { outline: 1px solid ${styles.listFocusOutline}; outline-offset: -1px; }\n\t\t\t\t.monaco-workbench.context-menu-visible .monaco-list${suffix}.last-focused .monaco-list-row.focused { outline: 1px solid ${styles.listFocusOutline}; outline-offset: -1px; }\n\t\t\t`);\n        }\n        const inactiveFocusAndSelectionOutline = asCssValueWithDefault(styles.listSelectionOutline, (_b = styles.listInactiveFocusOutline) !== null && _b !== void 0 ? _b : '');\n        if (inactiveFocusAndSelectionOutline) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused.selected { outline: 1px dotted ${inactiveFocusAndSelectionOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listSelectionOutline) { // default: activeContrastBorder\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { outline: 1px dotted ${styles.listSelectionOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listInactiveFocusOutline) { // default: null\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { outline: 1px dotted ${styles.listInactiveFocusOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listHoverOutline) { // default: activeContrastBorder\n            content.push(`.monaco-list${suffix} .monaco-list-row:hover { outline: 1px dashed ${styles.listHoverOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listDropBackground) {\n            content.push(`\n\t\t\t\t.monaco-list${suffix}.drop-target,\n\t\t\t\t.monaco-list${suffix} .monaco-list-rows.drop-target,\n\t\t\t\t.monaco-list${suffix} .monaco-list-row.drop-target { background-color: ${styles.listDropBackground} !important; color: inherit !important; }\n\t\t\t`);\n        }\n        if (styles.tableColumnsBorder) {\n            content.push(`\n\t\t\t\t.monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: ${styles.tableColumnsBorder};\n\t\t\t\t}\n\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: transparent;\n\t\t\t\t}\n\t\t\t`);\n        }\n        if (styles.tableOddRowsBackgroundColor) {\n            content.push(`\n\t\t\t\t.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {\n\t\t\t\t\tbackground-color: ${styles.tableOddRowsBackgroundColor};\n\t\t\t\t}\n\t\t\t`);\n        }\n        this.styleElement.textContent = content.join('\\n');\n    }\n}\nexport const unthemedListStyles = {\n    listFocusBackground: '#7FB0D0',\n    listActiveSelectionBackground: '#0E639C',\n    listActiveSelectionForeground: '#FFFFFF',\n    listActiveSelectionIconForeground: '#FFFFFF',\n    listFocusAndSelectionOutline: '#90C2F9',\n    listFocusAndSelectionBackground: '#094771',\n    listFocusAndSelectionForeground: '#FFFFFF',\n    listInactiveSelectionBackground: '#3F3F46',\n    listInactiveSelectionIconForeground: '#FFFFFF',\n    listHoverBackground: '#2A2D2E',\n    listDropBackground: '#383B3D',\n    treeIndentGuidesStroke: '#a9a9a9',\n    treeInactiveIndentGuidesStroke: Color.fromHex('#a9a9a9').transparent(0.4).toString(),\n    tableColumnsBorder: Color.fromHex('#cccccc').transparent(0.2).toString(),\n    tableOddRowsBackgroundColor: Color.fromHex('#cccccc').transparent(0.04).toString(),\n    listBackground: undefined,\n    listFocusForeground: undefined,\n    listInactiveSelectionForeground: undefined,\n    listInactiveFocusForeground: undefined,\n    listInactiveFocusBackground: undefined,\n    listHoverForeground: undefined,\n    listFocusOutline: undefined,\n    listInactiveFocusOutline: undefined,\n    listSelectionOutline: undefined,\n    listHoverOutline: undefined\n};\nconst DefaultOptions = {\n    keyboardSupport: true,\n    mouseSupport: true,\n    multipleSelectionSupport: true,\n    dnd: {\n        getDragURI() { return null; },\n        onDragStart() { },\n        onDragOver() { return false; },\n        drop() { },\n        dispose() { }\n    }\n};\n// TODO@Joao: move these utils into a SortedArray class\nfunction getContiguousRangeContaining(range, value) {\n    const index = range.indexOf(value);\n    if (index === -1) {\n        return [];\n    }\n    const result = [];\n    let i = index - 1;\n    while (i >= 0 && range[i] === value - (index - i)) {\n        result.push(range[i--]);\n    }\n    result.reverse();\n    i = index;\n    while (i < range.length && range[i] === value + (i - index)) {\n        result.push(range[i++]);\n    }\n    return result;\n}\n/**\n * Given two sorted collections of numbers, returns the intersection\n * between them (OR).\n */\nfunction disjunction(one, other) {\n    const result = [];\n    let i = 0, j = 0;\n    while (i < one.length || j < other.length) {\n        if (i >= one.length) {\n            result.push(other[j++]);\n        }\n        else if (j >= other.length) {\n            result.push(one[i++]);\n        }\n        else if (one[i] === other[j]) {\n            result.push(one[i]);\n            i++;\n            j++;\n            continue;\n        }\n        else if (one[i] < other[j]) {\n            result.push(one[i++]);\n        }\n        else {\n            result.push(other[j++]);\n        }\n    }\n    return result;\n}\n/**\n * Given two sorted collections of numbers, returns the relative\n * complement between them (XOR).\n */\nfunction relativeComplement(one, other) {\n    const result = [];\n    let i = 0, j = 0;\n    while (i < one.length || j < other.length) {\n        if (i >= one.length) {\n            result.push(other[j++]);\n        }\n        else if (j >= other.length) {\n            result.push(one[i++]);\n        }\n        else if (one[i] === other[j]) {\n            i++;\n            j++;\n            continue;\n        }\n        else if (one[i] < other[j]) {\n            result.push(one[i++]);\n        }\n        else {\n            j++;\n        }\n    }\n    return result;\n}\nconst numericSort = (a, b) => a - b;\nclass PipelineRenderer {\n    constructor(_templateId, renderers) {\n        this._templateId = _templateId;\n        this.renderers = renderers;\n    }\n    get templateId() {\n        return this._templateId;\n    }\n    renderTemplate(container) {\n        return this.renderers.map(r => r.renderTemplate(container));\n    }\n    renderElement(element, index, templateData, height) {\n        let i = 0;\n        for (const renderer of this.renderers) {\n            renderer.renderElement(element, index, templateData[i++], height);\n        }\n    }\n    disposeElement(element, index, templateData, height) {\n        var _a;\n        let i = 0;\n        for (const renderer of this.renderers) {\n            (_a = renderer.disposeElement) === null || _a === void 0 ? void 0 : _a.call(renderer, element, index, templateData[i], height);\n            i += 1;\n        }\n    }\n    disposeTemplate(templateData) {\n        let i = 0;\n        for (const renderer of this.renderers) {\n            renderer.disposeTemplate(templateData[i++]);\n        }\n    }\n}\nclass AccessibiltyRenderer {\n    constructor(accessibilityProvider) {\n        this.accessibilityProvider = accessibilityProvider;\n        this.templateId = 'a18n';\n    }\n    renderTemplate(container) {\n        return container;\n    }\n    renderElement(element, index, container) {\n        const ariaLabel = this.accessibilityProvider.getAriaLabel(element);\n        if (ariaLabel) {\n            container.setAttribute('aria-label', ariaLabel);\n        }\n        else {\n            container.removeAttribute('aria-label');\n        }\n        const ariaLevel = this.accessibilityProvider.getAriaLevel && this.accessibilityProvider.getAriaLevel(element);\n        if (typeof ariaLevel === 'number') {\n            container.setAttribute('aria-level', `${ariaLevel}`);\n        }\n        else {\n            container.removeAttribute('aria-level');\n        }\n    }\n    disposeTemplate(templateData) {\n        // noop\n    }\n}\nclass ListViewDragAndDrop {\n    constructor(list, dnd) {\n        this.list = list;\n        this.dnd = dnd;\n    }\n    getDragElements(element) {\n        const selection = this.list.getSelectedElements();\n        const elements = selection.indexOf(element) > -1 ? selection : [element];\n        return elements;\n    }\n    getDragURI(element) {\n        return this.dnd.getDragURI(element);\n    }\n    getDragLabel(elements, originalEvent) {\n        if (this.dnd.getDragLabel) {\n            return this.dnd.getDragLabel(elements, originalEvent);\n        }\n        return undefined;\n    }\n    onDragStart(data, originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, data, originalEvent);\n    }\n    onDragOver(data, targetElement, targetIndex, originalEvent) {\n        return this.dnd.onDragOver(data, targetElement, targetIndex, originalEvent);\n    }\n    onDragLeave(data, targetElement, targetIndex, originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragLeave) === null || _b === void 0 ? void 0 : _b.call(_a, data, targetElement, targetIndex, originalEvent);\n    }\n    onDragEnd(originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, originalEvent);\n    }\n    drop(data, targetElement, targetIndex, originalEvent) {\n        this.dnd.drop(data, targetElement, targetIndex, originalEvent);\n    }\n    dispose() {\n        this.dnd.dispose();\n    }\n}\n/**\n * The {@link List} is a virtual scrolling widget, built on top of the {@link ListView}\n * widget.\n *\n * Features:\n * - Customizable keyboard and mouse support\n * - Element traits: focus, selection, achor\n * - Accessibility support\n * - Touch support\n * - Performant template-based rendering\n * - Horizontal scrolling\n * - Variable element height support\n * - Dynamic element height support\n * - Drag-and-drop support\n */\nexport class List {\n    get onDidChangeFocus() {\n        return Event.map(this.eventBufferer.wrapEvent(this.focus.onChange), e => this.toListEvent(e), this.disposables);\n    }\n    get onDidChangeSelection() {\n        return Event.map(this.eventBufferer.wrapEvent(this.selection.onChange), e => this.toListEvent(e), this.disposables);\n    }\n    get domId() { return this.view.domId; }\n    get onDidScroll() { return this.view.onDidScroll; }\n    get onMouseClick() { return this.view.onMouseClick; }\n    get onMouseDblClick() { return this.view.onMouseDblClick; }\n    get onMouseMiddleClick() { return this.view.onMouseMiddleClick; }\n    get onPointer() { return this.mouseController.onPointer; }\n    get onMouseDown() { return this.view.onMouseDown; }\n    get onMouseOver() { return this.view.onMouseOver; }\n    get onMouseOut() { return this.view.onMouseOut; }\n    get onTouchStart() { return this.view.onTouchStart; }\n    get onTap() { return this.view.onTap; }\n    /**\n     * Possible context menu trigger events:\n     * - ContextMenu key\n     * - Shift F10\n     * - Ctrl Option Shift M (macOS with VoiceOver)\n     * - Mouse right click\n     */\n    get onContextMenu() {\n        let didJustPressContextMenuKey = false;\n        const fromKeyDown = Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event, $ => $.map(e => new StandardKeyboardEvent(e))\n            .filter(e => didJustPressContextMenuKey = e.keyCode === 58 /* KeyCode.ContextMenu */ || (e.shiftKey && e.keyCode === 68 /* KeyCode.F10 */))\n            .map(e => EventHelper.stop(e, true))\n            .filter(() => false));\n        const fromKeyUp = Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keyup')).event, $ => $.forEach(() => didJustPressContextMenuKey = false)\n            .map(e => new StandardKeyboardEvent(e))\n            .filter(e => e.keyCode === 58 /* KeyCode.ContextMenu */ || (e.shiftKey && e.keyCode === 68 /* KeyCode.F10 */))\n            .map(e => EventHelper.stop(e, true))\n            .map(({ browserEvent }) => {\n            const focus = this.getFocus();\n            const index = focus.length ? focus[0] : undefined;\n            const element = typeof index !== 'undefined' ? this.view.element(index) : undefined;\n            const anchor = typeof index !== 'undefined' ? this.view.domElement(index) : this.view.domNode;\n            return { index, element, anchor, browserEvent };\n        }));\n        const fromMouse = Event.chain(this.view.onContextMenu, $ => $.filter(_ => !didJustPressContextMenuKey)\n            .map(({ element, index, browserEvent }) => ({ element, index, anchor: new StandardMouseEvent(browserEvent), browserEvent })));\n        return Event.any(fromKeyDown, fromKeyUp, fromMouse);\n    }\n    get onKeyDown() { return this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event; }\n    get onDidFocus() { return Event.signal(this.disposables.add(new DomEmitter(this.view.domNode, 'focus', true)).event); }\n    constructor(user, container, virtualDelegate, renderers, _options = DefaultOptions) {\n        var _a, _b, _c, _d;\n        this.user = user;\n        this._options = _options;\n        this.focus = new Trait('focused');\n        this.anchor = new Trait('anchor');\n        this.eventBufferer = new EventBufferer();\n        this._ariaLabel = '';\n        this.disposables = new DisposableStore();\n        this._onDidDispose = new Emitter();\n        this.onDidDispose = this._onDidDispose.event;\n        const role = this._options.accessibilityProvider && this._options.accessibilityProvider.getWidgetRole ? (_a = this._options.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getWidgetRole() : 'list';\n        this.selection = new SelectionTrait(role !== 'listbox');\n        const baseRenderers = [this.focus.renderer, this.selection.renderer];\n        this.accessibilityProvider = _options.accessibilityProvider;\n        if (this.accessibilityProvider) {\n            baseRenderers.push(new AccessibiltyRenderer(this.accessibilityProvider));\n            (_c = (_b = this.accessibilityProvider).onDidChangeActiveDescendant) === null || _c === void 0 ? void 0 : _c.call(_b, this.onDidChangeActiveDescendant, this, this.disposables);\n        }\n        renderers = renderers.map(r => new PipelineRenderer(r.templateId, [...baseRenderers, r]));\n        const viewOptions = Object.assign(Object.assign({}, _options), { dnd: _options.dnd && new ListViewDragAndDrop(this, _options.dnd) });\n        this.view = this.createListView(container, virtualDelegate, renderers, viewOptions);\n        this.view.domNode.setAttribute('role', role);\n        if (_options.styleController) {\n            this.styleController = _options.styleController(this.view.domId);\n        }\n        else {\n            const styleElement = createStyleSheet(this.view.domNode);\n            this.styleController = new DefaultStyleController(styleElement, this.view.domId);\n        }\n        this.spliceable = new CombinedSpliceable([\n            new TraitSpliceable(this.focus, this.view, _options.identityProvider),\n            new TraitSpliceable(this.selection, this.view, _options.identityProvider),\n            new TraitSpliceable(this.anchor, this.view, _options.identityProvider),\n            this.view\n        ]);\n        this.disposables.add(this.focus);\n        this.disposables.add(this.selection);\n        this.disposables.add(this.anchor);\n        this.disposables.add(this.view);\n        this.disposables.add(this._onDidDispose);\n        this.disposables.add(new DOMFocusController(this, this.view));\n        if (typeof _options.keyboardSupport !== 'boolean' || _options.keyboardSupport) {\n            this.keyboardController = new KeyboardController(this, this.view, _options);\n            this.disposables.add(this.keyboardController);\n        }\n        if (_options.keyboardNavigationLabelProvider) {\n            const delegate = _options.keyboardNavigationDelegate || DefaultKeyboardNavigationDelegate;\n            this.typeNavigationController = new TypeNavigationController(this, this.view, _options.keyboardNavigationLabelProvider, (_d = _options.keyboardNavigationEventFilter) !== null && _d !== void 0 ? _d : (() => true), delegate);\n            this.disposables.add(this.typeNavigationController);\n        }\n        this.mouseController = this.createMouseController(_options);\n        this.disposables.add(this.mouseController);\n        this.onDidChangeFocus(this._onFocusChange, this, this.disposables);\n        this.onDidChangeSelection(this._onSelectionChange, this, this.disposables);\n        if (this.accessibilityProvider) {\n            this.ariaLabel = this.accessibilityProvider.getWidgetAriaLabel();\n        }\n        if (this._options.multipleSelectionSupport !== false) {\n            this.view.domNode.setAttribute('aria-multiselectable', 'true');\n        }\n    }\n    createListView(container, virtualDelegate, renderers, viewOptions) {\n        return new ListView(container, virtualDelegate, renderers, viewOptions);\n    }\n    createMouseController(options) {\n        return new MouseController(this);\n    }\n    updateOptions(optionsUpdate = {}) {\n        var _a, _b;\n        this._options = Object.assign(Object.assign({}, this._options), optionsUpdate);\n        (_a = this.typeNavigationController) === null || _a === void 0 ? void 0 : _a.updateOptions(this._options);\n        if (this._options.multipleSelectionController !== undefined) {\n            if (this._options.multipleSelectionSupport) {\n                this.view.domNode.setAttribute('aria-multiselectable', 'true');\n            }\n            else {\n                this.view.domNode.removeAttribute('aria-multiselectable');\n            }\n        }\n        this.mouseController.updateOptions(optionsUpdate);\n        (_b = this.keyboardController) === null || _b === void 0 ? void 0 : _b.updateOptions(optionsUpdate);\n        this.view.updateOptions(optionsUpdate);\n    }\n    get options() {\n        return this._options;\n    }\n    splice(start, deleteCount, elements = []) {\n        if (start < 0 || start > this.view.length) {\n            throw new ListError(this.user, `Invalid start index: ${start}`);\n        }\n        if (deleteCount < 0) {\n            throw new ListError(this.user, `Invalid delete count: ${deleteCount}`);\n        }\n        if (deleteCount === 0 && elements.length === 0) {\n            return;\n        }\n        this.eventBufferer.bufferEvents(() => this.spliceable.splice(start, deleteCount, elements));\n    }\n    rerender() {\n        this.view.rerender();\n    }\n    element(index) {\n        return this.view.element(index);\n    }\n    get length() {\n        return this.view.length;\n    }\n    get contentHeight() {\n        return this.view.contentHeight;\n    }\n    get scrollTop() {\n        return this.view.getScrollTop();\n    }\n    set scrollTop(scrollTop) {\n        this.view.setScrollTop(scrollTop);\n    }\n    get scrollHeight() {\n        return this.view.scrollHeight;\n    }\n    get renderHeight() {\n        return this.view.renderHeight;\n    }\n    get firstVisibleIndex() {\n        return this.view.firstVisibleIndex;\n    }\n    get ariaLabel() {\n        return this._ariaLabel;\n    }\n    set ariaLabel(value) {\n        this._ariaLabel = value;\n        this.view.domNode.setAttribute('aria-label', value);\n    }\n    domFocus() {\n        this.view.domNode.focus({ preventScroll: true });\n    }\n    layout(height, width) {\n        this.view.layout(height, width);\n    }\n    setSelection(indexes, browserEvent) {\n        for (const index of indexes) {\n            if (index < 0 || index >= this.length) {\n                throw new ListError(this.user, `Invalid index ${index}`);\n            }\n        }\n        this.selection.set(indexes, browserEvent);\n    }\n    getSelection() {\n        return this.selection.get();\n    }\n    getSelectedElements() {\n        return this.getSelection().map(i => this.view.element(i));\n    }\n    setAnchor(index) {\n        if (typeof index === 'undefined') {\n            this.anchor.set([]);\n            return;\n        }\n        if (index < 0 || index >= this.length) {\n            throw new ListError(this.user, `Invalid index ${index}`);\n        }\n        this.anchor.set([index]);\n    }\n    getAnchor() {\n        return firstOrDefault(this.anchor.get(), undefined);\n    }\n    getAnchorElement() {\n        const anchor = this.getAnchor();\n        return typeof anchor === 'undefined' ? undefined : this.element(anchor);\n    }\n    setFocus(indexes, browserEvent) {\n        for (const index of indexes) {\n            if (index < 0 || index >= this.length) {\n                throw new ListError(this.user, `Invalid index ${index}`);\n            }\n        }\n        this.focus.set(indexes, browserEvent);\n    }\n    focusNext(n = 1, loop = false, browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const focus = this.focus.get();\n        const index = this.findNextIndex(focus.length > 0 ? focus[0] + n : 0, loop, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    focusPrevious(n = 1, loop = false, browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const focus = this.focus.get();\n        const index = this.findPreviousIndex(focus.length > 0 ? focus[0] - n : 0, loop, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    focusNextPage(browserEvent, filter) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let lastPageIndex = this.view.indexAt(this.view.getScrollTop() + this.view.renderHeight);\n            lastPageIndex = lastPageIndex === 0 ? 0 : lastPageIndex - 1;\n            const currentlyFocusedElementIndex = this.getFocus()[0];\n            if (currentlyFocusedElementIndex !== lastPageIndex && (currentlyFocusedElementIndex === undefined || lastPageIndex > currentlyFocusedElementIndex)) {\n                const lastGoodPageIndex = this.findPreviousIndex(lastPageIndex, false, filter);\n                if (lastGoodPageIndex > -1 && currentlyFocusedElementIndex !== lastGoodPageIndex) {\n                    this.setFocus([lastGoodPageIndex], browserEvent);\n                }\n                else {\n                    this.setFocus([lastPageIndex], browserEvent);\n                }\n            }\n            else {\n                const previousScrollTop = this.view.getScrollTop();\n                let nextpageScrollTop = previousScrollTop + this.view.renderHeight;\n                if (lastPageIndex > currentlyFocusedElementIndex) {\n                    // scroll last page element to the top only if the last page element is below the focused element\n                    nextpageScrollTop -= this.view.elementHeight(lastPageIndex);\n                }\n                this.view.setScrollTop(nextpageScrollTop);\n                if (this.view.getScrollTop() !== previousScrollTop) {\n                    this.setFocus([]);\n                    // Let the scroll event listener run\n                    yield timeout(0);\n                    yield this.focusNextPage(browserEvent, filter);\n                }\n            }\n        });\n    }\n    focusPreviousPage(browserEvent, filter) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let firstPageIndex;\n            const scrollTop = this.view.getScrollTop();\n            if (scrollTop === 0) {\n                firstPageIndex = this.view.indexAt(scrollTop);\n            }\n            else {\n                firstPageIndex = this.view.indexAfter(scrollTop - 1);\n            }\n            const currentlyFocusedElementIndex = this.getFocus()[0];\n            if (currentlyFocusedElementIndex !== firstPageIndex && (currentlyFocusedElementIndex === undefined || currentlyFocusedElementIndex >= firstPageIndex)) {\n                const firstGoodPageIndex = this.findNextIndex(firstPageIndex, false, filter);\n                if (firstGoodPageIndex > -1 && currentlyFocusedElementIndex !== firstGoodPageIndex) {\n                    this.setFocus([firstGoodPageIndex], browserEvent);\n                }\n                else {\n                    this.setFocus([firstPageIndex], browserEvent);\n                }\n            }\n            else {\n                const previousScrollTop = scrollTop;\n                this.view.setScrollTop(scrollTop - this.view.renderHeight);\n                if (this.view.getScrollTop() !== previousScrollTop) {\n                    this.setFocus([]);\n                    // Let the scroll event listener run\n                    yield timeout(0);\n                    yield this.focusPreviousPage(browserEvent, filter);\n                }\n            }\n        });\n    }\n    focusLast(browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const index = this.findPreviousIndex(this.length - 1, false, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    focusFirst(browserEvent, filter) {\n        this.focusNth(0, browserEvent, filter);\n    }\n    focusNth(n, browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const index = this.findNextIndex(n, false, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    findNextIndex(index, loop = false, filter) {\n        for (let i = 0; i < this.length; i++) {\n            if (index >= this.length && !loop) {\n                return -1;\n            }\n            index = index % this.length;\n            if (!filter || filter(this.element(index))) {\n                return index;\n            }\n            index++;\n        }\n        return -1;\n    }\n    findPreviousIndex(index, loop = false, filter) {\n        for (let i = 0; i < this.length; i++) {\n            if (index < 0 && !loop) {\n                return -1;\n            }\n            index = (this.length + (index % this.length)) % this.length;\n            if (!filter || filter(this.element(index))) {\n                return index;\n            }\n            index--;\n        }\n        return -1;\n    }\n    getFocus() {\n        return this.focus.get();\n    }\n    getFocusedElements() {\n        return this.getFocus().map(i => this.view.element(i));\n    }\n    reveal(index, relativeTop) {\n        if (index < 0 || index >= this.length) {\n            throw new ListError(this.user, `Invalid index ${index}`);\n        }\n        const scrollTop = this.view.getScrollTop();\n        const elementTop = this.view.elementTop(index);\n        const elementHeight = this.view.elementHeight(index);\n        if (isNumber(relativeTop)) {\n            // y = mx + b\n            const m = elementHeight - this.view.renderHeight;\n            this.view.setScrollTop(m * clamp(relativeTop, 0, 1) + elementTop);\n        }\n        else {\n            const viewItemBottom = elementTop + elementHeight;\n            const scrollBottom = scrollTop + this.view.renderHeight;\n            if (elementTop < scrollTop && viewItemBottom >= scrollBottom) {\n                // The element is already overflowing the viewport, no-op\n            }\n            else if (elementTop < scrollTop || (viewItemBottom >= scrollBottom && elementHeight >= this.view.renderHeight)) {\n                this.view.setScrollTop(elementTop);\n            }\n            else if (viewItemBottom >= scrollBottom) {\n                this.view.setScrollTop(viewItemBottom - this.view.renderHeight);\n            }\n        }\n    }\n    getHTMLElement() {\n        return this.view.domNode;\n    }\n    getElementID(index) {\n        return this.view.getElementDomId(index);\n    }\n    style(styles) {\n        this.styleController.style(styles);\n    }\n    toListEvent({ indexes, browserEvent }) {\n        return { indexes, elements: indexes.map(i => this.view.element(i)), browserEvent };\n    }\n    _onFocusChange() {\n        const focus = this.focus.get();\n        this.view.domNode.classList.toggle('element-focused', focus.length > 0);\n        this.onDidChangeActiveDescendant();\n    }\n    onDidChangeActiveDescendant() {\n        var _a;\n        const focus = this.focus.get();\n        if (focus.length > 0) {\n            let id;\n            if ((_a = this.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getActiveDescendantId) {\n                id = this.accessibilityProvider.getActiveDescendantId(this.view.element(focus[0]));\n            }\n            this.view.domNode.setAttribute('aria-activedescendant', id || this.view.getElementDomId(focus[0]));\n        }\n        else {\n            this.view.domNode.removeAttribute('aria-activedescendant');\n        }\n    }\n    _onSelectionChange() {\n        const selection = this.selection.get();\n        this.view.domNode.classList.toggle('selection-none', selection.length === 0);\n        this.view.domNode.classList.toggle('selection-single', selection.length === 1);\n        this.view.domNode.classList.toggle('selection-multiple', selection.length > 1);\n    }\n    dispose() {\n        this._onDidDispose.fire();\n        this.disposables.dispose();\n        this._onDidDispose.dispose();\n    }\n}\n__decorate([\n    memoize\n], List.prototype, \"onDidChangeFocus\", null);\n__decorate([\n    memoize\n], List.prototype, \"onDidChangeSelection\", null);\n__decorate([\n    memoize\n], List.prototype, \"onContextMenu\", null);\n__decorate([\n    memoize\n], List.prototype, \"onKeyDown\", null);\n__decorate([\n    memoize\n], List.prototype, \"onDidFocus\", null);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isFirefox } from '../../browser.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { $, addDisposableListener, append, clearNode, createStyleSheet, Dimension, EventHelper, EventType, getActiveElement, isAncestor, isInShadowDOM } from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { StandardMouseEvent } from '../../mouseEvent.js';\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport { ActionViewItem, BaseActionViewItem } from '../actionbar/actionViewItems.js';\nimport { layout } from '../contextview/contextview.js';\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { EmptySubmenuAction, Separator, SubmenuAction } from '../../../common/actions.js';\nimport { RunOnceScheduler } from '../../../common/async.js';\nimport { Codicon, getCodiconFontCharacters } from '../../../common/codicons.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { stripIcons } from '../../../common/iconLabels.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nimport { isLinux, isMacintosh } from '../../../common/platform.js';\nimport * as strings from '../../../common/strings.js';\nexport const MENU_MNEMONIC_REGEX = /\\(&([^\\s&])\\)|(^|[^&])&([^\\s&])/;\nexport const MENU_ESCAPED_MNEMONIC_REGEX = /(&amp;)?(&amp;)([^\\s&])/g;\nexport var Direction;\n(function (Direction) {\n    Direction[Direction[\"Right\"] = 0] = \"Right\";\n    Direction[Direction[\"Left\"] = 1] = \"Left\";\n})(Direction || (Direction = {}));\nexport class Menu extends ActionBar {\n    constructor(container, actions, options, menuStyles) {\n        container.classList.add('monaco-menu-container');\n        container.setAttribute('role', 'presentation');\n        const menuElement = document.createElement('div');\n        menuElement.classList.add('monaco-menu');\n        menuElement.setAttribute('role', 'presentation');\n        super(menuElement, {\n            orientation: 1 /* ActionsOrientation.VERTICAL */,\n            actionViewItemProvider: action => this.doGetActionViewItem(action, options, parentData),\n            context: options.context,\n            actionRunner: options.actionRunner,\n            ariaLabel: options.ariaLabel,\n            ariaRole: 'menu',\n            focusOnlyEnabledItems: true,\n            triggerKeys: { keys: [3 /* KeyCode.Enter */, ...(isMacintosh || isLinux ? [10 /* KeyCode.Space */] : [])], keyDown: true }\n        });\n        this.menuStyles = menuStyles;\n        this.menuElement = menuElement;\n        this.actionsList.tabIndex = 0;\n        this.menuDisposables = this._register(new DisposableStore());\n        this.initializeOrUpdateStyleSheet(container, menuStyles);\n        this._register(Gesture.addTarget(menuElement));\n        addDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\n            const event = new StandardKeyboardEvent(e);\n            // Stop tab navigation of menus\n            if (event.equals(2 /* KeyCode.Tab */)) {\n                e.preventDefault();\n            }\n        });\n        if (options.enableMnemonics) {\n            this.menuDisposables.add(addDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\n                const key = e.key.toLocaleLowerCase();\n                if (this.mnemonics.has(key)) {\n                    EventHelper.stop(e, true);\n                    const actions = this.mnemonics.get(key);\n                    if (actions.length === 1) {\n                        if (actions[0] instanceof SubmenuMenuActionViewItem && actions[0].container) {\n                            this.focusItemByElement(actions[0].container);\n                        }\n                        actions[0].onClick(e);\n                    }\n                    if (actions.length > 1) {\n                        const action = actions.shift();\n                        if (action && action.container) {\n                            this.focusItemByElement(action.container);\n                            actions.push(action);\n                        }\n                        this.mnemonics.set(key, actions);\n                    }\n                }\n            }));\n        }\n        if (isLinux) {\n            this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(14 /* KeyCode.Home */) || event.equals(11 /* KeyCode.PageUp */)) {\n                    this.focusedItem = this.viewItems.length - 1;\n                    this.focusNext();\n                    EventHelper.stop(e, true);\n                }\n                else if (event.equals(13 /* KeyCode.End */) || event.equals(12 /* KeyCode.PageDown */)) {\n                    this.focusedItem = 0;\n                    this.focusPrevious();\n                    EventHelper.stop(e, true);\n                }\n            }));\n        }\n        this._register(addDisposableListener(this.domNode, EventType.MOUSE_OUT, e => {\n            const relatedTarget = e.relatedTarget;\n            if (!isAncestor(relatedTarget, this.domNode)) {\n                this.focusedItem = undefined;\n                this.updateFocus();\n                e.stopPropagation();\n            }\n        }));\n        this._register(addDisposableListener(this.actionsList, EventType.MOUSE_OVER, e => {\n            let target = e.target;\n            if (!target || !isAncestor(target, this.actionsList) || target === this.actionsList) {\n                return;\n            }\n            while (target.parentElement !== this.actionsList && target.parentElement !== null) {\n                target = target.parentElement;\n            }\n            if (target.classList.contains('action-item')) {\n                const lastFocusedItem = this.focusedItem;\n                this.setFocusedItem(target);\n                if (lastFocusedItem !== this.focusedItem) {\n                    this.updateFocus();\n                }\n            }\n        }));\n        // Support touch on actions list to focus items (needed for submenus)\n        this._register(Gesture.addTarget(this.actionsList));\n        this._register(addDisposableListener(this.actionsList, TouchEventType.Tap, e => {\n            let target = e.initialTarget;\n            if (!target || !isAncestor(target, this.actionsList) || target === this.actionsList) {\n                return;\n            }\n            while (target.parentElement !== this.actionsList && target.parentElement !== null) {\n                target = target.parentElement;\n            }\n            if (target.classList.contains('action-item')) {\n                const lastFocusedItem = this.focusedItem;\n                this.setFocusedItem(target);\n                if (lastFocusedItem !== this.focusedItem) {\n                    this.updateFocus();\n                }\n            }\n        }));\n        const parentData = {\n            parent: this\n        };\n        this.mnemonics = new Map();\n        // Scroll Logic\n        this.scrollableElement = this._register(new DomScrollableElement(menuElement, {\n            alwaysConsumeMouseWheel: true,\n            horizontal: 2 /* ScrollbarVisibility.Hidden */,\n            vertical: 3 /* ScrollbarVisibility.Visible */,\n            verticalScrollbarSize: 7,\n            handleMouseWheel: true,\n            useShadows: true\n        }));\n        const scrollElement = this.scrollableElement.getDomNode();\n        scrollElement.style.position = '';\n        this.styleScrollElement(scrollElement, menuStyles);\n        // Support scroll on menu drag\n        this._register(addDisposableListener(menuElement, TouchEventType.Change, e => {\n            EventHelper.stop(e, true);\n            const scrollTop = this.scrollableElement.getScrollPosition().scrollTop;\n            this.scrollableElement.setScrollPosition({ scrollTop: scrollTop - e.translationY });\n        }));\n        this._register(addDisposableListener(scrollElement, EventType.MOUSE_UP, e => {\n            // Absorb clicks in menu dead space https://github.com/microsoft/vscode/issues/63575\n            // We do this on the scroll element so the scroll bar doesn't dismiss the menu either\n            e.preventDefault();\n        }));\n        menuElement.style.maxHeight = `${Math.max(10, window.innerHeight - container.getBoundingClientRect().top - 35)}px`;\n        actions = actions.filter(a => {\n            var _a;\n            if ((_a = options.submenuIds) === null || _a === void 0 ? void 0 : _a.has(a.id)) {\n                console.warn(`Found submenu cycle: ${a.id}`);\n                return false;\n            }\n            return true;\n        });\n        this.push(actions, { icon: true, label: true, isMenu: true });\n        container.appendChild(this.scrollableElement.getDomNode());\n        this.scrollableElement.scanDomNode();\n        this.viewItems.filter(item => !(item instanceof MenuSeparatorActionViewItem)).forEach((item, index, array) => {\n            item.updatePositionInSet(index + 1, array.length);\n        });\n    }\n    initializeOrUpdateStyleSheet(container, style) {\n        if (!this.styleSheet) {\n            if (isInShadowDOM(container)) {\n                this.styleSheet = createStyleSheet(container);\n            }\n            else {\n                if (!Menu.globalStyleSheet) {\n                    Menu.globalStyleSheet = createStyleSheet();\n                }\n                this.styleSheet = Menu.globalStyleSheet;\n            }\n        }\n        this.styleSheet.textContent = getMenuWidgetCSS(style, isInShadowDOM(container));\n    }\n    styleScrollElement(scrollElement, style) {\n        var _a, _b;\n        const fgColor = (_a = style.foregroundColor) !== null && _a !== void 0 ? _a : '';\n        const bgColor = (_b = style.backgroundColor) !== null && _b !== void 0 ? _b : '';\n        const border = style.borderColor ? `1px solid ${style.borderColor}` : '';\n        const borderRadius = '5px';\n        const shadow = style.shadowColor ? `0 2px 8px ${style.shadowColor}` : '';\n        scrollElement.style.outline = border;\n        scrollElement.style.borderRadius = borderRadius;\n        scrollElement.style.color = fgColor;\n        scrollElement.style.backgroundColor = bgColor;\n        scrollElement.style.boxShadow = shadow;\n    }\n    getContainer() {\n        return this.scrollableElement.getDomNode();\n    }\n    get onScroll() {\n        return this.scrollableElement.onScroll;\n    }\n    focusItemByElement(element) {\n        const lastFocusedItem = this.focusedItem;\n        this.setFocusedItem(element);\n        if (lastFocusedItem !== this.focusedItem) {\n            this.updateFocus();\n        }\n    }\n    setFocusedItem(element) {\n        for (let i = 0; i < this.actionsList.children.length; i++) {\n            const elem = this.actionsList.children[i];\n            if (element === elem) {\n                this.focusedItem = i;\n                break;\n            }\n        }\n    }\n    updateFocus(fromRight) {\n        super.updateFocus(fromRight, true, true);\n        if (typeof this.focusedItem !== 'undefined') {\n            // Workaround for #80047 caused by an issue in chromium\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=414283\n            // When that's fixed, just call this.scrollableElement.scanDomNode()\n            this.scrollableElement.setScrollPosition({\n                scrollTop: Math.round(this.menuElement.scrollTop)\n            });\n        }\n    }\n    doGetActionViewItem(action, options, parentData) {\n        if (action instanceof Separator) {\n            return new MenuSeparatorActionViewItem(options.context, action, { icon: true }, this.menuStyles);\n        }\n        else if (action instanceof SubmenuAction) {\n            const menuActionViewItem = new SubmenuMenuActionViewItem(action, action.actions, parentData, Object.assign(Object.assign({}, options), { submenuIds: new Set([...(options.submenuIds || []), action.id]) }), this.menuStyles);\n            if (options.enableMnemonics) {\n                const mnemonic = menuActionViewItem.getMnemonic();\n                if (mnemonic && menuActionViewItem.isEnabled()) {\n                    let actionViewItems = [];\n                    if (this.mnemonics.has(mnemonic)) {\n                        actionViewItems = this.mnemonics.get(mnemonic);\n                    }\n                    actionViewItems.push(menuActionViewItem);\n                    this.mnemonics.set(mnemonic, actionViewItems);\n                }\n            }\n            return menuActionViewItem;\n        }\n        else {\n            const menuItemOptions = { enableMnemonics: options.enableMnemonics, useEventAsContext: options.useEventAsContext };\n            if (options.getKeyBinding) {\n                const keybinding = options.getKeyBinding(action);\n                if (keybinding) {\n                    const keybindingLabel = keybinding.getLabel();\n                    if (keybindingLabel) {\n                        menuItemOptions.keybinding = keybindingLabel;\n                    }\n                }\n            }\n            const menuActionViewItem = new BaseMenuActionViewItem(options.context, action, menuItemOptions, this.menuStyles);\n            if (options.enableMnemonics) {\n                const mnemonic = menuActionViewItem.getMnemonic();\n                if (mnemonic && menuActionViewItem.isEnabled()) {\n                    let actionViewItems = [];\n                    if (this.mnemonics.has(mnemonic)) {\n                        actionViewItems = this.mnemonics.get(mnemonic);\n                    }\n                    actionViewItems.push(menuActionViewItem);\n                    this.mnemonics.set(mnemonic, actionViewItems);\n                }\n            }\n            return menuActionViewItem;\n        }\n    }\n}\nclass BaseMenuActionViewItem extends BaseActionViewItem {\n    constructor(ctx, action, options, menuStyle) {\n        options.isMenu = true;\n        super(action, action, options);\n        this.menuStyle = menuStyle;\n        this.options = options;\n        this.options.icon = options.icon !== undefined ? options.icon : false;\n        this.options.label = options.label !== undefined ? options.label : true;\n        this.cssClass = '';\n        // Set mnemonic\n        if (this.options.label && options.enableMnemonics) {\n            const label = this.action.label;\n            if (label) {\n                const matches = MENU_MNEMONIC_REGEX.exec(label);\n                if (matches) {\n                    this.mnemonic = (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase();\n                }\n            }\n        }\n        // Add mouse up listener later to avoid accidental clicks\n        this.runOnceToEnableMouseUp = new RunOnceScheduler(() => {\n            if (!this.element) {\n                return;\n            }\n            this._register(addDisposableListener(this.element, EventType.MOUSE_UP, e => {\n                // removed default prevention as it conflicts\n                // with BaseActionViewItem #101537\n                // add back if issues arise and link new issue\n                EventHelper.stop(e, true);\n                // See https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Interact_with_the_clipboard\n                // > Writing to the clipboard\n                // > You can use the \"cut\" and \"copy\" commands without any special\n                // permission if you are using them in a short-lived event handler\n                // for a user action (for example, a click handler).\n                // => to get the Copy and Paste context menu actions working on Firefox,\n                // there should be no timeout here\n                if (isFirefox) {\n                    const mouseEvent = new StandardMouseEvent(e);\n                    // Allowing right click to trigger the event causes the issue described below,\n                    // but since the solution below does not work in FF, we must disable right click\n                    if (mouseEvent.rightButton) {\n                        return;\n                    }\n                    this.onClick(e);\n                }\n                // In all other cases, set timeout to allow context menu cancellation to trigger\n                // otherwise the action will destroy the menu and a second context menu\n                // will still trigger for right click.\n                else {\n                    setTimeout(() => {\n                        this.onClick(e);\n                    }, 0);\n                }\n            }));\n            this._register(addDisposableListener(this.element, EventType.CONTEXT_MENU, e => {\n                EventHelper.stop(e, true);\n            }));\n        }, 100);\n        this._register(this.runOnceToEnableMouseUp);\n    }\n    render(container) {\n        super.render(container);\n        if (!this.element) {\n            return;\n        }\n        this.container = container;\n        this.item = append(this.element, $('a.action-menu-item'));\n        if (this._action.id === Separator.ID) {\n            // A separator is a presentation item\n            this.item.setAttribute('role', 'presentation');\n        }\n        else {\n            this.item.setAttribute('role', 'menuitem');\n            if (this.mnemonic) {\n                this.item.setAttribute('aria-keyshortcuts', `${this.mnemonic}`);\n            }\n        }\n        this.check = append(this.item, $('span.menu-item-check' + ThemeIcon.asCSSSelector(Codicon.menuSelection)));\n        this.check.setAttribute('role', 'none');\n        this.label = append(this.item, $('span.action-label'));\n        if (this.options.label && this.options.keybinding) {\n            append(this.item, $('span.keybinding')).textContent = this.options.keybinding;\n        }\n        // Adds mouse up listener to actually run the action\n        this.runOnceToEnableMouseUp.schedule();\n        this.updateClass();\n        this.updateLabel();\n        this.updateTooltip();\n        this.updateEnabled();\n        this.updateChecked();\n        this.applyStyle();\n    }\n    blur() {\n        super.blur();\n        this.applyStyle();\n    }\n    focus() {\n        var _a;\n        super.focus();\n        (_a = this.item) === null || _a === void 0 ? void 0 : _a.focus();\n        this.applyStyle();\n    }\n    updatePositionInSet(pos, setSize) {\n        if (this.item) {\n            this.item.setAttribute('aria-posinset', `${pos}`);\n            this.item.setAttribute('aria-setsize', `${setSize}`);\n        }\n    }\n    updateLabel() {\n        var _a;\n        if (!this.label) {\n            return;\n        }\n        if (this.options.label) {\n            clearNode(this.label);\n            let label = stripIcons(this.action.label);\n            if (label) {\n                const cleanLabel = cleanMnemonic(label);\n                if (!this.options.enableMnemonics) {\n                    label = cleanLabel;\n                }\n                this.label.setAttribute('aria-label', cleanLabel.replace(/&&/g, '&'));\n                const matches = MENU_MNEMONIC_REGEX.exec(label);\n                if (matches) {\n                    label = strings.escape(label);\n                    // This is global, reset it\n                    MENU_ESCAPED_MNEMONIC_REGEX.lastIndex = 0;\n                    let escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n                    // We can't use negative lookbehind so if we match our negative and skip\n                    while (escMatch && escMatch[1]) {\n                        escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n                    }\n                    const replaceDoubleEscapes = (str) => str.replace(/&amp;&amp;/g, '&amp;');\n                    if (escMatch) {\n                        this.label.append(strings.ltrim(replaceDoubleEscapes(label.substr(0, escMatch.index)), ' '), $('u', { 'aria-hidden': 'true' }, escMatch[3]), strings.rtrim(replaceDoubleEscapes(label.substr(escMatch.index + escMatch[0].length)), ' '));\n                    }\n                    else {\n                        this.label.innerText = replaceDoubleEscapes(label).trim();\n                    }\n                    (_a = this.item) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-keyshortcuts', (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase());\n                }\n                else {\n                    this.label.innerText = label.replace(/&&/g, '&').trim();\n                }\n            }\n        }\n    }\n    updateTooltip() {\n        // menus should function like native menus and they do not have tooltips\n    }\n    updateClass() {\n        if (this.cssClass && this.item) {\n            this.item.classList.remove(...this.cssClass.split(' '));\n        }\n        if (this.options.icon && this.label) {\n            this.cssClass = this.action.class || '';\n            this.label.classList.add('icon');\n            if (this.cssClass) {\n                this.label.classList.add(...this.cssClass.split(' '));\n            }\n            this.updateEnabled();\n        }\n        else if (this.label) {\n            this.label.classList.remove('icon');\n        }\n    }\n    updateEnabled() {\n        if (this.action.enabled) {\n            if (this.element) {\n                this.element.classList.remove('disabled');\n                this.element.removeAttribute('aria-disabled');\n            }\n            if (this.item) {\n                this.item.classList.remove('disabled');\n                this.item.removeAttribute('aria-disabled');\n                this.item.tabIndex = 0;\n            }\n        }\n        else {\n            if (this.element) {\n                this.element.classList.add('disabled');\n                this.element.setAttribute('aria-disabled', 'true');\n            }\n            if (this.item) {\n                this.item.classList.add('disabled');\n                this.item.setAttribute('aria-disabled', 'true');\n            }\n        }\n    }\n    updateChecked() {\n        if (!this.item) {\n            return;\n        }\n        const checked = this.action.checked;\n        this.item.classList.toggle('checked', !!checked);\n        if (checked !== undefined) {\n            this.item.setAttribute('role', 'menuitemcheckbox');\n            this.item.setAttribute('aria-checked', checked ? 'true' : 'false');\n        }\n        else {\n            this.item.setAttribute('role', 'menuitem');\n            this.item.setAttribute('aria-checked', '');\n        }\n    }\n    getMnemonic() {\n        return this.mnemonic;\n    }\n    applyStyle() {\n        const isSelected = this.element && this.element.classList.contains('focused');\n        const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n        const bgColor = isSelected && this.menuStyle.selectionBackgroundColor ? this.menuStyle.selectionBackgroundColor : undefined;\n        const outline = isSelected && this.menuStyle.selectionBorderColor ? `1px solid ${this.menuStyle.selectionBorderColor}` : '';\n        const outlineOffset = isSelected && this.menuStyle.selectionBorderColor ? `-1px` : '';\n        if (this.item) {\n            this.item.style.color = fgColor !== null && fgColor !== void 0 ? fgColor : '';\n            this.item.style.backgroundColor = bgColor !== null && bgColor !== void 0 ? bgColor : '';\n            this.item.style.outline = outline;\n            this.item.style.outlineOffset = outlineOffset;\n        }\n        if (this.check) {\n            this.check.style.color = fgColor !== null && fgColor !== void 0 ? fgColor : '';\n        }\n    }\n}\nclass SubmenuMenuActionViewItem extends BaseMenuActionViewItem {\n    constructor(action, submenuActions, parentData, submenuOptions, menuStyles) {\n        super(action, action, submenuOptions, menuStyles);\n        this.submenuActions = submenuActions;\n        this.parentData = parentData;\n        this.submenuOptions = submenuOptions;\n        this.mysubmenu = null;\n        this.submenuDisposables = this._register(new DisposableStore());\n        this.mouseOver = false;\n        this.expandDirection = submenuOptions && submenuOptions.expandDirection !== undefined ? submenuOptions.expandDirection : Direction.Right;\n        this.showScheduler = new RunOnceScheduler(() => {\n            if (this.mouseOver) {\n                this.cleanupExistingSubmenu(false);\n                this.createSubmenu(false);\n            }\n        }, 250);\n        this.hideScheduler = new RunOnceScheduler(() => {\n            if (this.element && (!isAncestor(getActiveElement(), this.element) && this.parentData.submenu === this.mysubmenu)) {\n                this.parentData.parent.focus(false);\n                this.cleanupExistingSubmenu(true);\n            }\n        }, 750);\n    }\n    render(container) {\n        super.render(container);\n        if (!this.element) {\n            return;\n        }\n        if (this.item) {\n            this.item.classList.add('monaco-submenu-item');\n            this.item.tabIndex = 0;\n            this.item.setAttribute('aria-haspopup', 'true');\n            this.updateAriaExpanded('false');\n            this.submenuIndicator = append(this.item, $('span.submenu-indicator' + ThemeIcon.asCSSSelector(Codicon.menuSubmenu)));\n            this.submenuIndicator.setAttribute('aria-hidden', 'true');\n        }\n        this._register(addDisposableListener(this.element, EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(17 /* KeyCode.RightArrow */) || event.equals(3 /* KeyCode.Enter */)) {\n                EventHelper.stop(e, true);\n                this.createSubmenu(true);\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (getActiveElement() === this.item) {\n                if (event.equals(17 /* KeyCode.RightArrow */) || event.equals(3 /* KeyCode.Enter */)) {\n                    EventHelper.stop(e, true);\n                }\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.MOUSE_OVER, e => {\n            if (!this.mouseOver) {\n                this.mouseOver = true;\n                this.showScheduler.schedule();\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.MOUSE_LEAVE, e => {\n            this.mouseOver = false;\n        }));\n        this._register(addDisposableListener(this.element, EventType.FOCUS_OUT, e => {\n            if (this.element && !isAncestor(getActiveElement(), this.element)) {\n                this.hideScheduler.schedule();\n            }\n        }));\n        this._register(this.parentData.parent.onScroll(() => {\n            if (this.parentData.submenu === this.mysubmenu) {\n                this.parentData.parent.focus(false);\n                this.cleanupExistingSubmenu(true);\n            }\n        }));\n    }\n    updateEnabled() {\n        // override on submenu entry\n        // native menus do not observe enablement on sumbenus\n        // we mimic that behavior\n    }\n    onClick(e) {\n        // stop clicking from trying to run an action\n        EventHelper.stop(e, true);\n        this.cleanupExistingSubmenu(false);\n        this.createSubmenu(true);\n    }\n    cleanupExistingSubmenu(force) {\n        if (this.parentData.submenu && (force || (this.parentData.submenu !== this.mysubmenu))) {\n            // disposal may throw if the submenu has already been removed\n            try {\n                this.parentData.submenu.dispose();\n            }\n            catch (_a) { }\n            this.parentData.submenu = undefined;\n            this.updateAriaExpanded('false');\n            if (this.submenuContainer) {\n                this.submenuDisposables.clear();\n                this.submenuContainer = undefined;\n            }\n        }\n    }\n    calculateSubmenuMenuLayout(windowDimensions, submenu, entry, expandDirection) {\n        const ret = { top: 0, left: 0 };\n        // Start with horizontal\n        ret.left = layout(windowDimensions.width, submenu.width, { position: expandDirection === Direction.Right ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */, offset: entry.left, size: entry.width });\n        // We don't have enough room to layout the menu fully, so we are overlapping the menu\n        if (ret.left >= entry.left && ret.left < entry.left + entry.width) {\n            if (entry.left + 10 + submenu.width <= windowDimensions.width) {\n                ret.left = entry.left + 10;\n            }\n            entry.top += 10;\n            entry.height = 0;\n        }\n        // Now that we have a horizontal position, try layout vertically\n        ret.top = layout(windowDimensions.height, submenu.height, { position: 0 /* LayoutAnchorPosition.Before */, offset: entry.top, size: 0 });\n        // We didn't have enough room below, but we did above, so we shift down to align the menu\n        if (ret.top + submenu.height === entry.top && ret.top + entry.height + submenu.height <= windowDimensions.height) {\n            ret.top += entry.height;\n        }\n        return ret;\n    }\n    createSubmenu(selectFirstItem = true) {\n        if (!this.element) {\n            return;\n        }\n        if (!this.parentData.submenu) {\n            this.updateAriaExpanded('true');\n            this.submenuContainer = append(this.element, $('div.monaco-submenu'));\n            this.submenuContainer.classList.add('menubar-menu-items-holder', 'context-view');\n            // Set the top value of the menu container before construction\n            // This allows the menu constructor to calculate the proper max height\n            const computedStyles = getComputedStyle(this.parentData.parent.domNode);\n            const paddingTop = parseFloat(computedStyles.paddingTop || '0') || 0;\n            // this.submenuContainer.style.top = `${this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop}px`;\n            this.submenuContainer.style.zIndex = '1';\n            this.submenuContainer.style.position = 'fixed';\n            this.submenuContainer.style.top = '0';\n            this.submenuContainer.style.left = '0';\n            this.parentData.submenu = new Menu(this.submenuContainer, this.submenuActions.length ? this.submenuActions : [new EmptySubmenuAction()], this.submenuOptions, this.menuStyle);\n            // layout submenu\n            const entryBox = this.element.getBoundingClientRect();\n            const entryBoxUpdated = {\n                top: entryBox.top - paddingTop,\n                left: entryBox.left,\n                height: entryBox.height + 2 * paddingTop,\n                width: entryBox.width\n            };\n            const viewBox = this.submenuContainer.getBoundingClientRect();\n            const { top, left } = this.calculateSubmenuMenuLayout(new Dimension(window.innerWidth, window.innerHeight), Dimension.lift(viewBox), entryBoxUpdated, this.expandDirection);\n            // subtract offsets caused by transform parent\n            this.submenuContainer.style.left = `${left - viewBox.left}px`;\n            this.submenuContainer.style.top = `${top - viewBox.top}px`;\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_UP, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                    EventHelper.stop(e, true);\n                    this.parentData.parent.focus();\n                    this.cleanupExistingSubmenu(true);\n                }\n            }));\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_DOWN, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                    EventHelper.stop(e, true);\n                }\n            }));\n            this.submenuDisposables.add(this.parentData.submenu.onDidCancel(() => {\n                this.parentData.parent.focus();\n                this.cleanupExistingSubmenu(true);\n            }));\n            this.parentData.submenu.focus(selectFirstItem);\n            this.mysubmenu = this.parentData.submenu;\n        }\n        else {\n            this.parentData.submenu.focus(false);\n        }\n    }\n    updateAriaExpanded(value) {\n        var _a;\n        if (this.item) {\n            (_a = this.item) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-expanded', value);\n        }\n    }\n    applyStyle() {\n        super.applyStyle();\n        const isSelected = this.element && this.element.classList.contains('focused');\n        const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n        if (this.submenuIndicator) {\n            this.submenuIndicator.style.color = fgColor !== null && fgColor !== void 0 ? fgColor : '';\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.hideScheduler.dispose();\n        if (this.mysubmenu) {\n            this.mysubmenu.dispose();\n            this.mysubmenu = null;\n        }\n        if (this.submenuContainer) {\n            this.submenuContainer = undefined;\n        }\n    }\n}\nclass MenuSeparatorActionViewItem extends ActionViewItem {\n    constructor(context, action, options, menuStyles) {\n        super(context, action, options);\n        this.menuStyles = menuStyles;\n    }\n    render(container) {\n        super.render(container);\n        if (this.label) {\n            this.label.style.borderBottomColor = this.menuStyles.separatorColor ? `${this.menuStyles.separatorColor}` : '';\n        }\n    }\n}\nexport function cleanMnemonic(label) {\n    const regex = MENU_MNEMONIC_REGEX;\n    const matches = regex.exec(label);\n    if (!matches) {\n        return label;\n    }\n    const mnemonicInText = !matches[1];\n    return label.replace(regex, mnemonicInText ? '$2$3' : '').trim();\n}\nexport function formatRule(c) {\n    const fontCharacter = getCodiconFontCharacters()[c.id];\n    return `.codicon-${c.id}:before { content: '\\\\${fontCharacter.toString(16)}'; }`;\n}\nfunction getMenuWidgetCSS(style, isForShadowDom) {\n    let result = /* css */ `\n.monaco-menu {\n\tfont-size: 13px;\n\tborder-radius: 5px;\n\tmin-width: 160px;\n}\n\n${formatRule(Codicon.menuSelection)}\n${formatRule(Codicon.menuSubmenu)}\n\n.monaco-menu .monaco-action-bar {\n\ttext-align: right;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.monaco-menu .monaco-action-bar .actions-container {\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tpadding: 0;\n\twidth: 100%;\n\tjustify-content: flex-end;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar.reverse .actions-container {\n\tflex-direction: row-reverse;\n}\n\n.monaco-menu .monaco-action-bar .action-item {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\ttransition: transform 50ms ease;\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled {\n\tcursor: default;\n}\n\n.monaco-menu .monaco-action-bar.animated .action-item.active {\n\ttransform: scale(1.272019649, 1.272019649); /* 1.272019649 = √φ */\n}\n\n.monaco-menu .monaco-action-bar .action-item .icon,\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar .action-label {\n\tfont-size: 11px;\n\tmargin-right: 4px;\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\n\tcolor: var(--vscode-disabledForeground);\n}\n\n/* Vertical actions */\n\n.monaco-menu .monaco-action-bar.vertical {\n\ttext-align: left;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tdisplay: block;\n\tborder-bottom: 1px solid var(--vscode-menu-separatorBackground);\n\tpadding-top: 1px;\n\tpadding: 30px;\n}\n\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\n\tmargin-left: 6px;\n}\n\n/* Action Items */\n.monaco-menu .monaco-action-bar .action-item.select-container {\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\n\tflex: 1;\n\tmax-width: 170px;\n\tmin-width: 60px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 10px;\n}\n\n.monaco-menu .monaco-action-bar.vertical {\n\tmargin-left: 0;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tpadding: 0;\n\ttransform: none;\n\tdisplay: flex;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\n\ttransform: none;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\theight: 2em;\n\talign-items: center;\n\tposition: relative;\n\tmargin: 0 4px;\n\tborder-radius: 4px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {\n\topacity: unset;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label {\n\tflex: 1 1 auto;\n\ttext-decoration: none;\n\tpadding: 0 1em;\n\tbackground: none;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .keybinding,\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tdisplay: inline-block;\n\tflex: 2 1 auto;\n\tpadding: 0 1em;\n\ttext-align: right;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\n\tfont-size: 16px !important;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\n\tmargin-left: auto;\n\tmargin-right: -20px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\n\topacity: 0.4;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tmargin: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tposition: static;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\n\tposition: absolute;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\twidth: 100%;\n\theight: 0px !important;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\n\tpadding: 0.7em 1em 0.1em 1em;\n\tfont-weight: bold;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\n\tcolor: inherit;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tposition: absolute;\n\tvisibility: hidden;\n\twidth: 1em;\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\n\tvisibility: visible;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Context Menu */\n\n.context-view.monaco-menu-container {\n\toutline: 0;\n\tborder: none;\n\tanimation: fadeIn 0.083s linear;\n\t-webkit-app-region: no-drag;\n}\n\n.context-view.monaco-menu-container :focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\n\toutline: 0;\n}\n\n.hc-black .context-view.monaco-menu-container,\n.hc-light .context-view.monaco-menu-container,\n:host-context(.hc-black) .context-view.monaco-menu-container,\n:host-context(.hc-light) .context-view.monaco-menu-container {\n\tbox-shadow: none;\n}\n\n.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\n\tbackground: none;\n}\n\n/* Vertical Action Bar Styles */\n\n.monaco-menu .monaco-action-bar.vertical {\n\tpadding: 4px 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\theight: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\n.monaco-menu .monaco-action-bar.vertical .keybinding {\n\tfont-size: inherit;\n\tpadding: 0 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tfont-size: inherit;\n\twidth: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tfont-size: inherit;\n\tmargin: 5px 0 !important;\n\tpadding: 0;\n\tborder-radius: 0;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tfont-size: 60%;\n\tpadding: 0 1.8em;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n\tmask-size: 10px 10px;\n\t-webkit-mask-size: 10px 10px;\n}\n\n.monaco-menu .action-item {\n\tcursor: default;\n}`;\n    if (isForShadowDom) {\n        // Only define scrollbar styles when used inside shadow dom,\n        // otherwise leave their styling to the global workbench styling.\n        result += `\n\t\t\t/* Arrows */\n\t\t\t.monaco-scrollable-element > .scrollbar > .scra {\n\t\t\t\tcursor: pointer;\n\t\t\t\tfont-size: 11px !important;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .visible {\n\t\t\t\topacity: 1;\n\n\t\t\t\t/* Background rule added for IE9 - to allow clicks on dom node */\n\t\t\t\tbackground:rgba(0,0,0,0);\n\n\t\t\t\ttransition: opacity 100ms linear;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible {\n\t\t\t\topacity: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible.fade {\n\t\t\t\ttransition: opacity 800ms linear;\n\t\t\t}\n\n\t\t\t/* Scrollable Content Inset Shadow */\n\t\t\t.monaco-scrollable-element > .shadow {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 3px;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 3px;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top-left-corner {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t`;\n        // Scrollbars\n        const scrollbarShadowColor = style.scrollbarShadow;\n        if (scrollbarShadowColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 0 6px 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 6px 0 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 6px 6px 6px -6px inset;\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderBackgroundColor = style.scrollbarSliderBackground;\n        if (scrollbarSliderBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\t\tbackground: ${scrollbarSliderBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderHoverBackgroundColor = style.scrollbarSliderHoverBackground;\n        if (scrollbarSliderHoverBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\t\tbackground: ${scrollbarSliderHoverBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderActiveBackgroundColor = style.scrollbarSliderActiveBackground;\n        if (scrollbarSliderActiveBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\t\tbackground: ${scrollbarSliderActiveBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n    }\n    return result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './mouseCursor.css';\nexport const MOUSE_CURSOR_TEXT_CSS_CLASS_NAME = `monaco-mouse-cursor-text`;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { show } from '../../dom.js';\nimport { RunOnceScheduler } from '../../../common/async.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport './progressbar.css';\nconst CSS_DONE = 'done';\nconst CSS_ACTIVE = 'active';\nconst CSS_INFINITE = 'infinite';\nconst CSS_INFINITE_LONG_RUNNING = 'infinite-long-running';\nconst CSS_DISCRETE = 'discrete';\n/**\n * A progress bar with support for infinite or discrete progress.\n */\nexport class ProgressBar extends Disposable {\n    constructor(container, options) {\n        super();\n        this.workedVal = 0;\n        this.showDelayedScheduler = this._register(new RunOnceScheduler(() => show(this.element), 0));\n        this.longRunningScheduler = this._register(new RunOnceScheduler(() => this.infiniteLongRunning(), ProgressBar.LONG_RUNNING_INFINITE_THRESHOLD));\n        this.create(container, options);\n    }\n    create(container, options) {\n        this.element = document.createElement('div');\n        this.element.classList.add('monaco-progress-container');\n        this.element.setAttribute('role', 'progressbar');\n        this.element.setAttribute('aria-valuemin', '0');\n        container.appendChild(this.element);\n        this.bit = document.createElement('div');\n        this.bit.classList.add('progress-bit');\n        this.bit.style.backgroundColor = (options === null || options === void 0 ? void 0 : options.progressBarBackground) || '#0E70C0';\n        this.element.appendChild(this.bit);\n    }\n    off() {\n        this.bit.style.width = 'inherit';\n        this.bit.style.opacity = '1';\n        this.element.classList.remove(CSS_ACTIVE, CSS_INFINITE, CSS_INFINITE_LONG_RUNNING, CSS_DISCRETE);\n        this.workedVal = 0;\n        this.totalWork = undefined;\n        this.longRunningScheduler.cancel();\n    }\n    /**\n     * Stops the progressbar from showing any progress instantly without fading out.\n     */\n    stop() {\n        return this.doDone(false);\n    }\n    doDone(delayed) {\n        this.element.classList.add(CSS_DONE);\n        // discrete: let it grow to 100% width and hide afterwards\n        if (!this.element.classList.contains(CSS_INFINITE)) {\n            this.bit.style.width = 'inherit';\n            if (delayed) {\n                setTimeout(() => this.off(), 200);\n            }\n            else {\n                this.off();\n            }\n        }\n        // infinite: let it fade out and hide afterwards\n        else {\n            this.bit.style.opacity = '0';\n            if (delayed) {\n                setTimeout(() => this.off(), 200);\n            }\n            else {\n                this.off();\n            }\n        }\n        return this;\n    }\n    /**\n     * Use this mode to indicate progress that has no total number of work units.\n     */\n    infinite() {\n        this.bit.style.width = '2%';\n        this.bit.style.opacity = '1';\n        this.element.classList.remove(CSS_DISCRETE, CSS_DONE, CSS_INFINITE_LONG_RUNNING);\n        this.element.classList.add(CSS_ACTIVE, CSS_INFINITE);\n        this.longRunningScheduler.schedule();\n        return this;\n    }\n    infiniteLongRunning() {\n        this.element.classList.add(CSS_INFINITE_LONG_RUNNING);\n    }\n    getContainer() {\n        return this.element;\n    }\n}\n/**\n * After a certain time of showing the progress bar, switch\n * to long-running mode and throttle animations to reduce\n * the pressure on the GPU process.\n *\n * https://github.com/microsoft/vscode/issues/97900\n * https://github.com/microsoft/vscode/issues/138396\n */\nProgressBar.LONG_RUNNING_INFINITE_THRESHOLD = 10000;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Dimension } from '../../dom.js';\nimport { OrthogonalEdge, Sash } from '../sash/sash.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nexport class ResizableHTMLElement {\n    constructor() {\n        this._onDidWillResize = new Emitter();\n        this.onDidWillResize = this._onDidWillResize.event;\n        this._onDidResize = new Emitter();\n        this.onDidResize = this._onDidResize.event;\n        this._sashListener = new DisposableStore();\n        this._size = new Dimension(0, 0);\n        this._minSize = new Dimension(0, 0);\n        this._maxSize = new Dimension(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\n        this.domNode = document.createElement('div');\n        this._eastSash = new Sash(this.domNode, { getVerticalSashLeft: () => this._size.width }, { orientation: 0 /* Orientation.VERTICAL */ });\n        this._westSash = new Sash(this.domNode, { getVerticalSashLeft: () => 0 }, { orientation: 0 /* Orientation.VERTICAL */ });\n        this._northSash = new Sash(this.domNode, { getHorizontalSashTop: () => 0 }, { orientation: 1 /* Orientation.HORIZONTAL */, orthogonalEdge: OrthogonalEdge.North });\n        this._southSash = new Sash(this.domNode, { getHorizontalSashTop: () => this._size.height }, { orientation: 1 /* Orientation.HORIZONTAL */, orthogonalEdge: OrthogonalEdge.South });\n        this._northSash.orthogonalStartSash = this._westSash;\n        this._northSash.orthogonalEndSash = this._eastSash;\n        this._southSash.orthogonalStartSash = this._westSash;\n        this._southSash.orthogonalEndSash = this._eastSash;\n        let currentSize;\n        let deltaY = 0;\n        let deltaX = 0;\n        this._sashListener.add(Event.any(this._northSash.onDidStart, this._eastSash.onDidStart, this._southSash.onDidStart, this._westSash.onDidStart)(() => {\n            if (currentSize === undefined) {\n                this._onDidWillResize.fire();\n                currentSize = this._size;\n                deltaY = 0;\n                deltaX = 0;\n            }\n        }));\n        this._sashListener.add(Event.any(this._northSash.onDidEnd, this._eastSash.onDidEnd, this._southSash.onDidEnd, this._westSash.onDidEnd)(() => {\n            if (currentSize !== undefined) {\n                currentSize = undefined;\n                deltaY = 0;\n                deltaX = 0;\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n        this._sashListener.add(this._eastSash.onDidChange(e => {\n            if (currentSize) {\n                deltaX = e.currentX - e.startX;\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, east: true });\n            }\n        }));\n        this._sashListener.add(this._westSash.onDidChange(e => {\n            if (currentSize) {\n                deltaX = -(e.currentX - e.startX);\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, west: true });\n            }\n        }));\n        this._sashListener.add(this._northSash.onDidChange(e => {\n            if (currentSize) {\n                deltaY = -(e.currentY - e.startY);\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, north: true });\n            }\n        }));\n        this._sashListener.add(this._southSash.onDidChange(e => {\n            if (currentSize) {\n                deltaY = e.currentY - e.startY;\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, south: true });\n            }\n        }));\n        this._sashListener.add(Event.any(this._eastSash.onDidReset, this._westSash.onDidReset)(e => {\n            if (this._preferredSize) {\n                this.layout(this._size.height, this._preferredSize.width);\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n        this._sashListener.add(Event.any(this._northSash.onDidReset, this._southSash.onDidReset)(e => {\n            if (this._preferredSize) {\n                this.layout(this._preferredSize.height, this._size.width);\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n    }\n    dispose() {\n        this._northSash.dispose();\n        this._southSash.dispose();\n        this._eastSash.dispose();\n        this._westSash.dispose();\n        this._sashListener.dispose();\n        this._onDidResize.dispose();\n        this._onDidWillResize.dispose();\n        this.domNode.remove();\n    }\n    enableSashes(north, east, south, west) {\n        this._northSash.state = north ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._eastSash.state = east ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._southSash.state = south ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._westSash.state = west ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n    }\n    layout(height = this.size.height, width = this.size.width) {\n        const { height: minHeight, width: minWidth } = this._minSize;\n        const { height: maxHeight, width: maxWidth } = this._maxSize;\n        height = Math.max(minHeight, Math.min(maxHeight, height));\n        width = Math.max(minWidth, Math.min(maxWidth, width));\n        const newSize = new Dimension(width, height);\n        if (!Dimension.equals(newSize, this._size)) {\n            this.domNode.style.height = height + 'px';\n            this.domNode.style.width = width + 'px';\n            this._size = newSize;\n            this._northSash.layout();\n            this._eastSash.layout();\n            this._southSash.layout();\n            this._westSash.layout();\n        }\n    }\n    clearSashHoverState() {\n        this._eastSash.clearSashHoverState();\n        this._westSash.clearSashHoverState();\n        this._northSash.clearSashHoverState();\n        this._southSash.clearSashHoverState();\n    }\n    get size() {\n        return this._size;\n    }\n    set maxSize(value) {\n        this._maxSize = value;\n    }\n    get maxSize() {\n        return this._maxSize;\n    }\n    set minSize(value) {\n        this._minSize = value;\n    }\n    get minSize() {\n        return this._minSize;\n    }\n    set preferredSize(value) {\n        this._preferredSize = value;\n    }\n    get preferredSize() {\n        return this._preferredSize;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { $, append, createStyleSheet, EventHelper } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { EventType, Gesture } from '../../touch.js';\nimport { Delayer } from '../../../common/async.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../common/lifecycle.js';\nimport { isMacintosh } from '../../../common/platform.js';\nimport './sash.css';\n/**\n * Allow the sashes to be visible at runtime.\n * @remark Use for development purposes only.\n */\nconst DEBUG = false;\nexport var OrthogonalEdge;\n(function (OrthogonalEdge) {\n    OrthogonalEdge[\"North\"] = \"north\";\n    OrthogonalEdge[\"South\"] = \"south\";\n    OrthogonalEdge[\"East\"] = \"east\";\n    OrthogonalEdge[\"West\"] = \"west\";\n})(OrthogonalEdge || (OrthogonalEdge = {}));\nlet globalSize = 4;\nconst onDidChangeGlobalSize = new Emitter();\nlet globalHoverDelay = 300;\nconst onDidChangeHoverDelay = new Emitter();\nclass MouseEventFactory {\n    constructor() {\n        this.disposables = new DisposableStore();\n    }\n    get onPointerMove() {\n        return this.disposables.add(new DomEmitter(window, 'mousemove')).event;\n    }\n    get onPointerUp() {\n        return this.disposables.add(new DomEmitter(window, 'mouseup')).event;\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\n__decorate([\n    memoize\n], MouseEventFactory.prototype, \"onPointerMove\", null);\n__decorate([\n    memoize\n], MouseEventFactory.prototype, \"onPointerUp\", null);\nclass GestureEventFactory {\n    get onPointerMove() {\n        return this.disposables.add(new DomEmitter(this.el, EventType.Change)).event;\n    }\n    get onPointerUp() {\n        return this.disposables.add(new DomEmitter(this.el, EventType.End)).event;\n    }\n    constructor(el) {\n        this.el = el;\n        this.disposables = new DisposableStore();\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\n__decorate([\n    memoize\n], GestureEventFactory.prototype, \"onPointerMove\", null);\n__decorate([\n    memoize\n], GestureEventFactory.prototype, \"onPointerUp\", null);\nclass OrthogonalPointerEventFactory {\n    get onPointerMove() {\n        return this.factory.onPointerMove;\n    }\n    get onPointerUp() {\n        return this.factory.onPointerUp;\n    }\n    constructor(factory) {\n        this.factory = factory;\n    }\n    dispose() {\n        // noop\n    }\n}\n__decorate([\n    memoize\n], OrthogonalPointerEventFactory.prototype, \"onPointerMove\", null);\n__decorate([\n    memoize\n], OrthogonalPointerEventFactory.prototype, \"onPointerUp\", null);\nconst PointerEventsDisabledCssClass = 'pointer-events-disabled';\n/**\n * The {@link Sash} is the UI component which allows the user to resize other\n * components. It's usually an invisible horizontal or vertical line which, when\n * hovered, becomes highlighted and can be dragged along the perpendicular dimension\n * to its direction.\n *\n * Features:\n * - Touch event handling\n * - Corner sash support\n * - Hover with different mouse cursor support\n * - Configurable hover size\n * - Linked sash support, for 2x2 corner sashes\n */\nexport class Sash extends Disposable {\n    get state() { return this._state; }\n    get orthogonalStartSash() { return this._orthogonalStartSash; }\n    get orthogonalEndSash() { return this._orthogonalEndSash; }\n    /**\n     * The state of a sash defines whether it can be interacted with by the user\n     * as well as what mouse cursor to use, when hovered.\n     */\n    set state(state) {\n        if (this._state === state) {\n            return;\n        }\n        this.el.classList.toggle('disabled', state === 0 /* SashState.Disabled */);\n        this.el.classList.toggle('minimum', state === 1 /* SashState.AtMinimum */);\n        this.el.classList.toggle('maximum', state === 2 /* SashState.AtMaximum */);\n        this._state = state;\n        this.onDidEnablementChange.fire(state);\n    }\n    /**\n     * A reference to another sash, perpendicular to this one, which\n     * aligns at the start of this one. A corner sash will be created\n     * automatically at that location.\n     *\n     * The start of a horizontal sash is its left-most position.\n     * The start of a vertical sash is its top-most position.\n     */\n    set orthogonalStartSash(sash) {\n        if (this._orthogonalStartSash === sash) {\n            return;\n        }\n        this.orthogonalStartDragHandleDisposables.clear();\n        this.orthogonalStartSashDisposables.clear();\n        if (sash) {\n            const onChange = (state) => {\n                this.orthogonalStartDragHandleDisposables.clear();\n                if (state !== 0 /* SashState.Disabled */) {\n                    this._orthogonalStartDragHandle = append(this.el, $('.orthogonal-drag-handle.start'));\n                    this.orthogonalStartDragHandleDisposables.add(toDisposable(() => this._orthogonalStartDragHandle.remove()));\n                    this.orthogonalStartDragHandleDisposables.add(new DomEmitter(this._orthogonalStartDragHandle, 'mouseenter')).event(() => Sash.onMouseEnter(sash), undefined, this.orthogonalStartDragHandleDisposables);\n                    this.orthogonalStartDragHandleDisposables.add(new DomEmitter(this._orthogonalStartDragHandle, 'mouseleave')).event(() => Sash.onMouseLeave(sash), undefined, this.orthogonalStartDragHandleDisposables);\n                }\n            };\n            this.orthogonalStartSashDisposables.add(sash.onDidEnablementChange.event(onChange, this));\n            onChange(sash.state);\n        }\n        this._orthogonalStartSash = sash;\n    }\n    /**\n     * A reference to another sash, perpendicular to this one, which\n     * aligns at the end of this one. A corner sash will be created\n     * automatically at that location.\n     *\n     * The end of a horizontal sash is its right-most position.\n     * The end of a vertical sash is its bottom-most position.\n     */\n    set orthogonalEndSash(sash) {\n        if (this._orthogonalEndSash === sash) {\n            return;\n        }\n        this.orthogonalEndDragHandleDisposables.clear();\n        this.orthogonalEndSashDisposables.clear();\n        if (sash) {\n            const onChange = (state) => {\n                this.orthogonalEndDragHandleDisposables.clear();\n                if (state !== 0 /* SashState.Disabled */) {\n                    this._orthogonalEndDragHandle = append(this.el, $('.orthogonal-drag-handle.end'));\n                    this.orthogonalEndDragHandleDisposables.add(toDisposable(() => this._orthogonalEndDragHandle.remove()));\n                    this.orthogonalEndDragHandleDisposables.add(new DomEmitter(this._orthogonalEndDragHandle, 'mouseenter')).event(() => Sash.onMouseEnter(sash), undefined, this.orthogonalEndDragHandleDisposables);\n                    this.orthogonalEndDragHandleDisposables.add(new DomEmitter(this._orthogonalEndDragHandle, 'mouseleave')).event(() => Sash.onMouseLeave(sash), undefined, this.orthogonalEndDragHandleDisposables);\n                }\n            };\n            this.orthogonalEndSashDisposables.add(sash.onDidEnablementChange.event(onChange, this));\n            onChange(sash.state);\n        }\n        this._orthogonalEndSash = sash;\n    }\n    constructor(container, layoutProvider, options) {\n        super();\n        this.hoverDelay = globalHoverDelay;\n        this.hoverDelayer = this._register(new Delayer(this.hoverDelay));\n        this._state = 3 /* SashState.Enabled */;\n        this.onDidEnablementChange = this._register(new Emitter());\n        this._onDidStart = this._register(new Emitter());\n        this._onDidChange = this._register(new Emitter());\n        this._onDidReset = this._register(new Emitter());\n        this._onDidEnd = this._register(new Emitter());\n        this.orthogonalStartSashDisposables = this._register(new DisposableStore());\n        this.orthogonalStartDragHandleDisposables = this._register(new DisposableStore());\n        this.orthogonalEndSashDisposables = this._register(new DisposableStore());\n        this.orthogonalEndDragHandleDisposables = this._register(new DisposableStore());\n        /**\n         * An event which fires whenever the user starts dragging this sash.\n         */\n        this.onDidStart = this._onDidStart.event;\n        /**\n         * An event which fires whenever the user moves the mouse while\n         * dragging this sash.\n         */\n        this.onDidChange = this._onDidChange.event;\n        /**\n         * An event which fires whenever the user double clicks this sash.\n         */\n        this.onDidReset = this._onDidReset.event;\n        /**\n         * An event which fires whenever the user stops dragging this sash.\n         */\n        this.onDidEnd = this._onDidEnd.event;\n        /**\n         * A linked sash will be forwarded the same user interactions and events\n         * so it moves exactly the same way as this sash.\n         *\n         * Useful in 2x2 grids. Not meant for widespread usage.\n         */\n        this.linkedSash = undefined;\n        this.el = append(container, $('.monaco-sash'));\n        if (options.orthogonalEdge) {\n            this.el.classList.add(`orthogonal-edge-${options.orthogonalEdge}`);\n        }\n        if (isMacintosh) {\n            this.el.classList.add('mac');\n        }\n        const onMouseDown = this._register(new DomEmitter(this.el, 'mousedown')).event;\n        this._register(onMouseDown(e => this.onPointerStart(e, new MouseEventFactory()), this));\n        const onMouseDoubleClick = this._register(new DomEmitter(this.el, 'dblclick')).event;\n        this._register(onMouseDoubleClick(this.onPointerDoublePress, this));\n        const onMouseEnter = this._register(new DomEmitter(this.el, 'mouseenter')).event;\n        this._register(onMouseEnter(() => Sash.onMouseEnter(this)));\n        const onMouseLeave = this._register(new DomEmitter(this.el, 'mouseleave')).event;\n        this._register(onMouseLeave(() => Sash.onMouseLeave(this)));\n        this._register(Gesture.addTarget(this.el));\n        const onTouchStart = this._register(new DomEmitter(this.el, EventType.Start)).event;\n        this._register(onTouchStart(e => this.onPointerStart(e, new GestureEventFactory(this.el)), this));\n        const onTap = this._register(new DomEmitter(this.el, EventType.Tap)).event;\n        let doubleTapTimeout = undefined;\n        this._register(onTap(event => {\n            if (doubleTapTimeout) {\n                clearTimeout(doubleTapTimeout);\n                doubleTapTimeout = undefined;\n                this.onPointerDoublePress(event);\n                return;\n            }\n            clearTimeout(doubleTapTimeout);\n            doubleTapTimeout = setTimeout(() => doubleTapTimeout = undefined, 250);\n        }, this));\n        if (typeof options.size === 'number') {\n            this.size = options.size;\n            if (options.orientation === 0 /* Orientation.VERTICAL */) {\n                this.el.style.width = `${this.size}px`;\n            }\n            else {\n                this.el.style.height = `${this.size}px`;\n            }\n        }\n        else {\n            this.size = globalSize;\n            this._register(onDidChangeGlobalSize.event(size => {\n                this.size = size;\n                this.layout();\n            }));\n        }\n        this._register(onDidChangeHoverDelay.event(delay => this.hoverDelay = delay));\n        this.layoutProvider = layoutProvider;\n        this.orthogonalStartSash = options.orthogonalStartSash;\n        this.orthogonalEndSash = options.orthogonalEndSash;\n        this.orientation = options.orientation || 0 /* Orientation.VERTICAL */;\n        if (this.orientation === 1 /* Orientation.HORIZONTAL */) {\n            this.el.classList.add('horizontal');\n            this.el.classList.remove('vertical');\n        }\n        else {\n            this.el.classList.remove('horizontal');\n            this.el.classList.add('vertical');\n        }\n        this.el.classList.toggle('debug', DEBUG);\n        this.layout();\n    }\n    onPointerStart(event, pointerEventFactory) {\n        EventHelper.stop(event);\n        let isMultisashResize = false;\n        if (!event.__orthogonalSashEvent) {\n            const orthogonalSash = this.getOrthogonalSash(event);\n            if (orthogonalSash) {\n                isMultisashResize = true;\n                event.__orthogonalSashEvent = true;\n                orthogonalSash.onPointerStart(event, new OrthogonalPointerEventFactory(pointerEventFactory));\n            }\n        }\n        if (this.linkedSash && !event.__linkedSashEvent) {\n            event.__linkedSashEvent = true;\n            this.linkedSash.onPointerStart(event, new OrthogonalPointerEventFactory(pointerEventFactory));\n        }\n        if (!this.state) {\n            return;\n        }\n        const iframes = document.getElementsByTagName('iframe');\n        for (const iframe of iframes) {\n            iframe.classList.add(PointerEventsDisabledCssClass); // disable mouse events on iframes as long as we drag the sash\n        }\n        const startX = event.pageX;\n        const startY = event.pageY;\n        const altKey = event.altKey;\n        const startEvent = { startX, currentX: startX, startY, currentY: startY, altKey };\n        this.el.classList.add('active');\n        this._onDidStart.fire(startEvent);\n        // fix https://github.com/microsoft/vscode/issues/21675\n        const style = createStyleSheet(this.el);\n        const updateStyle = () => {\n            let cursor = '';\n            if (isMultisashResize) {\n                cursor = 'all-scroll';\n            }\n            else if (this.orientation === 1 /* Orientation.HORIZONTAL */) {\n                if (this.state === 1 /* SashState.AtMinimum */) {\n                    cursor = 's-resize';\n                }\n                else if (this.state === 2 /* SashState.AtMaximum */) {\n                    cursor = 'n-resize';\n                }\n                else {\n                    cursor = isMacintosh ? 'row-resize' : 'ns-resize';\n                }\n            }\n            else {\n                if (this.state === 1 /* SashState.AtMinimum */) {\n                    cursor = 'e-resize';\n                }\n                else if (this.state === 2 /* SashState.AtMaximum */) {\n                    cursor = 'w-resize';\n                }\n                else {\n                    cursor = isMacintosh ? 'col-resize' : 'ew-resize';\n                }\n            }\n            style.textContent = `* { cursor: ${cursor} !important; }`;\n        };\n        const disposables = new DisposableStore();\n        updateStyle();\n        if (!isMultisashResize) {\n            this.onDidEnablementChange.event(updateStyle, null, disposables);\n        }\n        const onPointerMove = (e) => {\n            EventHelper.stop(e, false);\n            const event = { startX, currentX: e.pageX, startY, currentY: e.pageY, altKey };\n            this._onDidChange.fire(event);\n        };\n        const onPointerUp = (e) => {\n            EventHelper.stop(e, false);\n            this.el.removeChild(style);\n            this.el.classList.remove('active');\n            this._onDidEnd.fire();\n            disposables.dispose();\n            for (const iframe of iframes) {\n                iframe.classList.remove(PointerEventsDisabledCssClass);\n            }\n        };\n        pointerEventFactory.onPointerMove(onPointerMove, null, disposables);\n        pointerEventFactory.onPointerUp(onPointerUp, null, disposables);\n        disposables.add(pointerEventFactory);\n    }\n    onPointerDoublePress(e) {\n        const orthogonalSash = this.getOrthogonalSash(e);\n        if (orthogonalSash) {\n            orthogonalSash._onDidReset.fire();\n        }\n        if (this.linkedSash) {\n            this.linkedSash._onDidReset.fire();\n        }\n        this._onDidReset.fire();\n    }\n    static onMouseEnter(sash, fromLinkedSash = false) {\n        if (sash.el.classList.contains('active')) {\n            sash.hoverDelayer.cancel();\n            sash.el.classList.add('hover');\n        }\n        else {\n            sash.hoverDelayer.trigger(() => sash.el.classList.add('hover'), sash.hoverDelay).then(undefined, () => { });\n        }\n        if (!fromLinkedSash && sash.linkedSash) {\n            Sash.onMouseEnter(sash.linkedSash, true);\n        }\n    }\n    static onMouseLeave(sash, fromLinkedSash = false) {\n        sash.hoverDelayer.cancel();\n        sash.el.classList.remove('hover');\n        if (!fromLinkedSash && sash.linkedSash) {\n            Sash.onMouseLeave(sash.linkedSash, true);\n        }\n    }\n    /**\n     * Forcefully stop any user interactions with this sash.\n     * Useful when hiding a parent component, while the user is still\n     * interacting with the sash.\n     */\n    clearSashHoverState() {\n        Sash.onMouseLeave(this);\n    }\n    /**\n     * Layout the sash. The sash will size and position itself\n     * based on its provided {@link ISashLayoutProvider layout provider}.\n     */\n    layout() {\n        if (this.orientation === 0 /* Orientation.VERTICAL */) {\n            const verticalProvider = this.layoutProvider;\n            this.el.style.left = verticalProvider.getVerticalSashLeft(this) - (this.size / 2) + 'px';\n            if (verticalProvider.getVerticalSashTop) {\n                this.el.style.top = verticalProvider.getVerticalSashTop(this) + 'px';\n            }\n            if (verticalProvider.getVerticalSashHeight) {\n                this.el.style.height = verticalProvider.getVerticalSashHeight(this) + 'px';\n            }\n        }\n        else {\n            const horizontalProvider = this.layoutProvider;\n            this.el.style.top = horizontalProvider.getHorizontalSashTop(this) - (this.size / 2) + 'px';\n            if (horizontalProvider.getHorizontalSashLeft) {\n                this.el.style.left = horizontalProvider.getHorizontalSashLeft(this) + 'px';\n            }\n            if (horizontalProvider.getHorizontalSashWidth) {\n                this.el.style.width = horizontalProvider.getHorizontalSashWidth(this) + 'px';\n            }\n        }\n    }\n    getOrthogonalSash(e) {\n        var _a;\n        const target = (_a = e.initialTarget) !== null && _a !== void 0 ? _a : e.target;\n        if (!target || !(target instanceof HTMLElement)) {\n            return undefined;\n        }\n        if (target.classList.contains('orthogonal-drag-handle')) {\n            return target.classList.contains('start') ? this.orthogonalStartSash : this.orthogonalEndSash;\n        }\n        return undefined;\n    }\n    dispose() {\n        super.dispose();\n        this.el.remove();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { GlobalPointerMoveMonitor } from '../../globalPointerMoveMonitor.js';\nimport { Widget } from '../widget.js';\nimport { IntervalTimer, TimeoutTimer } from '../../../common/async.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport * as dom from '../../dom.js';\n/**\n * The arrow image size.\n */\nexport const ARROW_IMG_SIZE = 11;\nexport class ScrollbarArrow extends Widget {\n    constructor(opts) {\n        super();\n        this._onActivate = opts.onActivate;\n        this.bgDomNode = document.createElement('div');\n        this.bgDomNode.className = 'arrow-background';\n        this.bgDomNode.style.position = 'absolute';\n        this.bgDomNode.style.width = opts.bgWidth + 'px';\n        this.bgDomNode.style.height = opts.bgHeight + 'px';\n        if (typeof opts.top !== 'undefined') {\n            this.bgDomNode.style.top = '0px';\n        }\n        if (typeof opts.left !== 'undefined') {\n            this.bgDomNode.style.left = '0px';\n        }\n        if (typeof opts.bottom !== 'undefined') {\n            this.bgDomNode.style.bottom = '0px';\n        }\n        if (typeof opts.right !== 'undefined') {\n            this.bgDomNode.style.right = '0px';\n        }\n        this.domNode = document.createElement('div');\n        this.domNode.className = opts.className;\n        this.domNode.classList.add(...ThemeIcon.asClassNameArray(opts.icon));\n        this.domNode.style.position = 'absolute';\n        this.domNode.style.width = ARROW_IMG_SIZE + 'px';\n        this.domNode.style.height = ARROW_IMG_SIZE + 'px';\n        if (typeof opts.top !== 'undefined') {\n            this.domNode.style.top = opts.top + 'px';\n        }\n        if (typeof opts.left !== 'undefined') {\n            this.domNode.style.left = opts.left + 'px';\n        }\n        if (typeof opts.bottom !== 'undefined') {\n            this.domNode.style.bottom = opts.bottom + 'px';\n        }\n        if (typeof opts.right !== 'undefined') {\n            this.domNode.style.right = opts.right + 'px';\n        }\n        this._pointerMoveMonitor = this._register(new GlobalPointerMoveMonitor());\n        this._register(dom.addStandardDisposableListener(this.bgDomNode, dom.EventType.POINTER_DOWN, (e) => this._arrowPointerDown(e)));\n        this._register(dom.addStandardDisposableListener(this.domNode, dom.EventType.POINTER_DOWN, (e) => this._arrowPointerDown(e)));\n        this._pointerdownRepeatTimer = this._register(new IntervalTimer());\n        this._pointerdownScheduleRepeatTimer = this._register(new TimeoutTimer());\n    }\n    _arrowPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        const scheduleRepeater = () => {\n            this._pointerdownRepeatTimer.cancelAndSet(() => this._onActivate(), 1000 / 24);\n        };\n        this._onActivate();\n        this._pointerdownRepeatTimer.cancel();\n        this._pointerdownScheduleRepeatTimer.cancelAndSet(scheduleRepeater, 200);\n        this._pointerMoveMonitor.startMonitoring(e.target, e.pointerId, e.buttons, (pointerMoveData) => { }, () => {\n            this._pointerdownRepeatTimer.cancel();\n            this._pointerdownScheduleRepeatTimer.cancel();\n        });\n        e.preventDefault();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { TimeoutTimer } from '../../../common/async.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nexport class ScrollbarVisibilityController extends Disposable {\n    constructor(visibility, visibleClassName, invisibleClassName) {\n        super();\n        this._visibility = visibility;\n        this._visibleClassName = visibleClassName;\n        this._invisibleClassName = invisibleClassName;\n        this._domNode = null;\n        this._isVisible = false;\n        this._isNeeded = false;\n        this._rawShouldBeVisible = false;\n        this._shouldBeVisible = false;\n        this._revealTimer = this._register(new TimeoutTimer());\n    }\n    setVisibility(visibility) {\n        if (this._visibility !== visibility) {\n            this._visibility = visibility;\n            this._updateShouldBeVisible();\n        }\n    }\n    // ----------------- Hide / Reveal\n    setShouldBeVisible(rawShouldBeVisible) {\n        this._rawShouldBeVisible = rawShouldBeVisible;\n        this._updateShouldBeVisible();\n    }\n    _applyVisibilitySetting() {\n        if (this._visibility === 2 /* ScrollbarVisibility.Hidden */) {\n            return false;\n        }\n        if (this._visibility === 3 /* ScrollbarVisibility.Visible */) {\n            return true;\n        }\n        return this._rawShouldBeVisible;\n    }\n    _updateShouldBeVisible() {\n        const shouldBeVisible = this._applyVisibilitySetting();\n        if (this._shouldBeVisible !== shouldBeVisible) {\n            this._shouldBeVisible = shouldBeVisible;\n            this.ensureVisibility();\n        }\n    }\n    setIsNeeded(isNeeded) {\n        if (this._isNeeded !== isNeeded) {\n            this._isNeeded = isNeeded;\n            this.ensureVisibility();\n        }\n    }\n    setDomNode(domNode) {\n        this._domNode = domNode;\n        this._domNode.setClassName(this._invisibleClassName);\n        // Now that the flags & the dom node are in a consistent state, ensure the Hidden/Visible configuration\n        this.setShouldBeVisible(false);\n    }\n    ensureVisibility() {\n        if (!this._isNeeded) {\n            // Nothing to be rendered\n            this._hide(false);\n            return;\n        }\n        if (this._shouldBeVisible) {\n            this._reveal();\n        }\n        else {\n            this._hide(true);\n        }\n    }\n    _reveal() {\n        if (this._isVisible) {\n            return;\n        }\n        this._isVisible = true;\n        // The CSS animation doesn't play otherwise\n        this._revealTimer.setIfNotSet(() => {\n            var _a;\n            (_a = this._domNode) === null || _a === void 0 ? void 0 : _a.setClassName(this._visibleClassName);\n        }, 0);\n    }\n    _hide(withFadeAway) {\n        var _a;\n        this._revealTimer.cancel();\n        if (!this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        (_a = this._domNode) === null || _a === void 0 ? void 0 : _a.setClassName(this._invisibleClassName + (withFadeAway ? ' fade' : ''));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { createFastDomNode } from '../../fastDomNode.js';\nimport { GlobalPointerMoveMonitor } from '../../globalPointerMoveMonitor.js';\nimport { ScrollbarArrow } from './scrollbarArrow.js';\nimport { ScrollbarVisibilityController } from './scrollbarVisibilityController.js';\nimport { Widget } from '../widget.js';\nimport * as platform from '../../../common/platform.js';\n/**\n * The orthogonal distance to the slider at which dragging \"resets\". This implements \"snapping\"\n */\nconst POINTER_DRAG_RESET_DISTANCE = 140;\nexport class AbstractScrollbar extends Widget {\n    constructor(opts) {\n        super();\n        this._lazyRender = opts.lazyRender;\n        this._host = opts.host;\n        this._scrollable = opts.scrollable;\n        this._scrollByPage = opts.scrollByPage;\n        this._scrollbarState = opts.scrollbarState;\n        this._visibilityController = this._register(new ScrollbarVisibilityController(opts.visibility, 'visible scrollbar ' + opts.extraScrollbarClassName, 'invisible scrollbar ' + opts.extraScrollbarClassName));\n        this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n        this._pointerMoveMonitor = this._register(new GlobalPointerMoveMonitor());\n        this._shouldRender = true;\n        this.domNode = createFastDomNode(document.createElement('div'));\n        this.domNode.setAttribute('role', 'presentation');\n        this.domNode.setAttribute('aria-hidden', 'true');\n        this._visibilityController.setDomNode(this.domNode);\n        this.domNode.setPosition('absolute');\n        this._register(dom.addDisposableListener(this.domNode.domNode, dom.EventType.POINTER_DOWN, (e) => this._domNodePointerDown(e)));\n    }\n    // ----------------- creation\n    /**\n     * Creates the dom node for an arrow & adds it to the container\n     */\n    _createArrow(opts) {\n        const arrow = this._register(new ScrollbarArrow(opts));\n        this.domNode.domNode.appendChild(arrow.bgDomNode);\n        this.domNode.domNode.appendChild(arrow.domNode);\n    }\n    /**\n     * Creates the slider dom node, adds it to the container & hooks up the events\n     */\n    _createSlider(top, left, width, height) {\n        this.slider = createFastDomNode(document.createElement('div'));\n        this.slider.setClassName('slider');\n        this.slider.setPosition('absolute');\n        this.slider.setTop(top);\n        this.slider.setLeft(left);\n        if (typeof width === 'number') {\n            this.slider.setWidth(width);\n        }\n        if (typeof height === 'number') {\n            this.slider.setHeight(height);\n        }\n        this.slider.setLayerHinting(true);\n        this.slider.setContain('strict');\n        this.domNode.domNode.appendChild(this.slider.domNode);\n        this._register(dom.addDisposableListener(this.slider.domNode, dom.EventType.POINTER_DOWN, (e) => {\n            if (e.button === 0) {\n                e.preventDefault();\n                this._sliderPointerDown(e);\n            }\n        }));\n        this.onclick(this.slider.domNode, e => {\n            if (e.leftButton) {\n                e.stopPropagation();\n            }\n        });\n    }\n    // ----------------- Update state\n    _onElementSize(visibleSize) {\n        if (this._scrollbarState.setVisibleSize(visibleSize)) {\n            this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n            this._shouldRender = true;\n            if (!this._lazyRender) {\n                this.render();\n            }\n        }\n        return this._shouldRender;\n    }\n    _onElementScrollSize(elementScrollSize) {\n        if (this._scrollbarState.setScrollSize(elementScrollSize)) {\n            this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n            this._shouldRender = true;\n            if (!this._lazyRender) {\n                this.render();\n            }\n        }\n        return this._shouldRender;\n    }\n    _onElementScrollPosition(elementScrollPosition) {\n        if (this._scrollbarState.setScrollPosition(elementScrollPosition)) {\n            this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n            this._shouldRender = true;\n            if (!this._lazyRender) {\n                this.render();\n            }\n        }\n        return this._shouldRender;\n    }\n    // ----------------- rendering\n    beginReveal() {\n        this._visibilityController.setShouldBeVisible(true);\n    }\n    beginHide() {\n        this._visibilityController.setShouldBeVisible(false);\n    }\n    render() {\n        if (!this._shouldRender) {\n            return;\n        }\n        this._shouldRender = false;\n        this._renderDomNode(this._scrollbarState.getRectangleLargeSize(), this._scrollbarState.getRectangleSmallSize());\n        this._updateSlider(this._scrollbarState.getSliderSize(), this._scrollbarState.getArrowSize() + this._scrollbarState.getSliderPosition());\n    }\n    // ----------------- DOM events\n    _domNodePointerDown(e) {\n        if (e.target !== this.domNode.domNode) {\n            return;\n        }\n        this._onPointerDown(e);\n    }\n    delegatePointerDown(e) {\n        const domTop = this.domNode.domNode.getClientRects()[0].top;\n        const sliderStart = domTop + this._scrollbarState.getSliderPosition();\n        const sliderStop = domTop + this._scrollbarState.getSliderPosition() + this._scrollbarState.getSliderSize();\n        const pointerPos = this._sliderPointerPosition(e);\n        if (sliderStart <= pointerPos && pointerPos <= sliderStop) {\n            // Act as if it was a pointer down on the slider\n            if (e.button === 0) {\n                e.preventDefault();\n                this._sliderPointerDown(e);\n            }\n        }\n        else {\n            // Act as if it was a pointer down on the scrollbar\n            this._onPointerDown(e);\n        }\n    }\n    _onPointerDown(e) {\n        let offsetX;\n        let offsetY;\n        if (e.target === this.domNode.domNode && typeof e.offsetX === 'number' && typeof e.offsetY === 'number') {\n            offsetX = e.offsetX;\n            offsetY = e.offsetY;\n        }\n        else {\n            const domNodePosition = dom.getDomNodePagePosition(this.domNode.domNode);\n            offsetX = e.pageX - domNodePosition.left;\n            offsetY = e.pageY - domNodePosition.top;\n        }\n        const offset = this._pointerDownRelativePosition(offsetX, offsetY);\n        this._setDesiredScrollPositionNow(this._scrollByPage\n            ? this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(offset)\n            : this._scrollbarState.getDesiredScrollPositionFromOffset(offset));\n        if (e.button === 0) {\n            // left button\n            e.preventDefault();\n            this._sliderPointerDown(e);\n        }\n    }\n    _sliderPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        const initialPointerPosition = this._sliderPointerPosition(e);\n        const initialPointerOrthogonalPosition = this._sliderOrthogonalPointerPosition(e);\n        const initialScrollbarState = this._scrollbarState.clone();\n        this.slider.toggleClassName('active', true);\n        this._pointerMoveMonitor.startMonitoring(e.target, e.pointerId, e.buttons, (pointerMoveData) => {\n            const pointerOrthogonalPosition = this._sliderOrthogonalPointerPosition(pointerMoveData);\n            const pointerOrthogonalDelta = Math.abs(pointerOrthogonalPosition - initialPointerOrthogonalPosition);\n            if (platform.isWindows && pointerOrthogonalDelta > POINTER_DRAG_RESET_DISTANCE) {\n                // The pointer has wondered away from the scrollbar => reset dragging\n                this._setDesiredScrollPositionNow(initialScrollbarState.getScrollPosition());\n                return;\n            }\n            const pointerPosition = this._sliderPointerPosition(pointerMoveData);\n            const pointerDelta = pointerPosition - initialPointerPosition;\n            this._setDesiredScrollPositionNow(initialScrollbarState.getDesiredScrollPositionFromDelta(pointerDelta));\n        }, () => {\n            this.slider.toggleClassName('active', false);\n            this._host.onDragEnd();\n        });\n        this._host.onDragStart();\n    }\n    _setDesiredScrollPositionNow(_desiredScrollPosition) {\n        const desiredScrollPosition = {};\n        this.writeScrollPosition(desiredScrollPosition, _desiredScrollPosition);\n        this._scrollable.setScrollPositionNow(desiredScrollPosition);\n    }\n    updateScrollbarSize(scrollbarSize) {\n        this._updateScrollbarSize(scrollbarSize);\n        this._scrollbarState.setScrollbarSize(scrollbarSize);\n        this._shouldRender = true;\n        if (!this._lazyRender) {\n            this.render();\n        }\n    }\n    isNeeded() {\n        return this._scrollbarState.isNeeded();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { StandardWheelEvent } from '../../mouseEvent.js';\nimport { AbstractScrollbar } from './abstractScrollbar.js';\nimport { ARROW_IMG_SIZE } from './scrollbarArrow.js';\nimport { ScrollbarState } from './scrollbarState.js';\nimport { Codicon } from '../../../common/codicons.js';\nexport class HorizontalScrollbar extends AbstractScrollbar {\n    constructor(scrollable, options, host) {\n        const scrollDimensions = scrollable.getScrollDimensions();\n        const scrollPosition = scrollable.getCurrentScrollPosition();\n        super({\n            lazyRender: options.lazyRender,\n            host: host,\n            scrollbarState: new ScrollbarState((options.horizontalHasArrows ? options.arrowSize : 0), (options.horizontal === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.horizontalScrollbarSize), (options.vertical === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.verticalScrollbarSize), scrollDimensions.width, scrollDimensions.scrollWidth, scrollPosition.scrollLeft),\n            visibility: options.horizontal,\n            extraScrollbarClassName: 'horizontal',\n            scrollable: scrollable,\n            scrollByPage: options.scrollByPage\n        });\n        if (options.horizontalHasArrows) {\n            const arrowDelta = (options.arrowSize - ARROW_IMG_SIZE) / 2;\n            const scrollbarDelta = (options.horizontalScrollbarSize - ARROW_IMG_SIZE) / 2;\n            this._createArrow({\n                className: 'scra',\n                icon: Codicon.scrollbarButtonLeft,\n                top: scrollbarDelta,\n                left: arrowDelta,\n                bottom: undefined,\n                right: undefined,\n                bgWidth: options.arrowSize,\n                bgHeight: options.horizontalScrollbarSize,\n                onActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, 1, 0)),\n            });\n            this._createArrow({\n                className: 'scra',\n                icon: Codicon.scrollbarButtonRight,\n                top: scrollbarDelta,\n                left: undefined,\n                bottom: undefined,\n                right: arrowDelta,\n                bgWidth: options.arrowSize,\n                bgHeight: options.horizontalScrollbarSize,\n                onActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, -1, 0)),\n            });\n        }\n        this._createSlider(Math.floor((options.horizontalScrollbarSize - options.horizontalSliderSize) / 2), 0, undefined, options.horizontalSliderSize);\n    }\n    _updateSlider(sliderSize, sliderPosition) {\n        this.slider.setWidth(sliderSize);\n        this.slider.setLeft(sliderPosition);\n    }\n    _renderDomNode(largeSize, smallSize) {\n        this.domNode.setWidth(largeSize);\n        this.domNode.setHeight(smallSize);\n        this.domNode.setLeft(0);\n        this.domNode.setBottom(0);\n    }\n    onDidScroll(e) {\n        this._shouldRender = this._onElementScrollSize(e.scrollWidth) || this._shouldRender;\n        this._shouldRender = this._onElementScrollPosition(e.scrollLeft) || this._shouldRender;\n        this._shouldRender = this._onElementSize(e.width) || this._shouldRender;\n        return this._shouldRender;\n    }\n    _pointerDownRelativePosition(offsetX, offsetY) {\n        return offsetX;\n    }\n    _sliderPointerPosition(e) {\n        return e.pageX;\n    }\n    _sliderOrthogonalPointerPosition(e) {\n        return e.pageY;\n    }\n    _updateScrollbarSize(size) {\n        this.slider.setHeight(size);\n    }\n    writeScrollPosition(target, scrollPosition) {\n        target.scrollLeft = scrollPosition;\n    }\n    updateOptions(options) {\n        this.updateScrollbarSize(options.horizontal === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.horizontalScrollbarSize);\n        this._scrollbarState.setOppositeScrollbarSize(options.vertical === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.verticalScrollbarSize);\n        this._visibilityController.setVisibility(options.horizontal);\n        this._scrollByPage = options.scrollByPage;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { StandardWheelEvent } from '../../mouseEvent.js';\nimport { AbstractScrollbar } from './abstractScrollbar.js';\nimport { ARROW_IMG_SIZE } from './scrollbarArrow.js';\nimport { ScrollbarState } from './scrollbarState.js';\nimport { Codicon } from '../../../common/codicons.js';\nexport class VerticalScrollbar extends AbstractScrollbar {\n    constructor(scrollable, options, host) {\n        const scrollDimensions = scrollable.getScrollDimensions();\n        const scrollPosition = scrollable.getCurrentScrollPosition();\n        super({\n            lazyRender: options.lazyRender,\n            host: host,\n            scrollbarState: new ScrollbarState((options.verticalHasArrows ? options.arrowSize : 0), (options.vertical === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.verticalScrollbarSize), \n            // give priority to vertical scroll bar over horizontal and let it scroll all the way to the bottom\n            0, scrollDimensions.height, scrollDimensions.scrollHeight, scrollPosition.scrollTop),\n            visibility: options.vertical,\n            extraScrollbarClassName: 'vertical',\n            scrollable: scrollable,\n            scrollByPage: options.scrollByPage\n        });\n        if (options.verticalHasArrows) {\n            const arrowDelta = (options.arrowSize - ARROW_IMG_SIZE) / 2;\n            const scrollbarDelta = (options.verticalScrollbarSize - ARROW_IMG_SIZE) / 2;\n            this._createArrow({\n                className: 'scra',\n                icon: Codicon.scrollbarButtonUp,\n                top: arrowDelta,\n                left: scrollbarDelta,\n                bottom: undefined,\n                right: undefined,\n                bgWidth: options.verticalScrollbarSize,\n                bgHeight: options.arrowSize,\n                onActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, 0, 1)),\n            });\n            this._createArrow({\n                className: 'scra',\n                icon: Codicon.scrollbarButtonDown,\n                top: undefined,\n                left: scrollbarDelta,\n                bottom: arrowDelta,\n                right: undefined,\n                bgWidth: options.verticalScrollbarSize,\n                bgHeight: options.arrowSize,\n                onActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, 0, -1)),\n            });\n        }\n        this._createSlider(0, Math.floor((options.verticalScrollbarSize - options.verticalSliderSize) / 2), options.verticalSliderSize, undefined);\n    }\n    _updateSlider(sliderSize, sliderPosition) {\n        this.slider.setHeight(sliderSize);\n        this.slider.setTop(sliderPosition);\n    }\n    _renderDomNode(largeSize, smallSize) {\n        this.domNode.setWidth(smallSize);\n        this.domNode.setHeight(largeSize);\n        this.domNode.setRight(0);\n        this.domNode.setTop(0);\n    }\n    onDidScroll(e) {\n        this._shouldRender = this._onElementScrollSize(e.scrollHeight) || this._shouldRender;\n        this._shouldRender = this._onElementScrollPosition(e.scrollTop) || this._shouldRender;\n        this._shouldRender = this._onElementSize(e.height) || this._shouldRender;\n        return this._shouldRender;\n    }\n    _pointerDownRelativePosition(offsetX, offsetY) {\n        return offsetY;\n    }\n    _sliderPointerPosition(e) {\n        return e.pageY;\n    }\n    _sliderOrthogonalPointerPosition(e) {\n        return e.pageX;\n    }\n    _updateScrollbarSize(size) {\n        this.slider.setWidth(size);\n    }\n    writeScrollPosition(target, scrollPosition) {\n        target.scrollTop = scrollPosition;\n    }\n    updateOptions(options) {\n        this.updateScrollbarSize(options.vertical === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.verticalScrollbarSize);\n        // give priority to vertical scroll bar over horizontal and let it scroll all the way to the bottom\n        this._scrollbarState.setOppositeScrollbarSize(0);\n        this._visibilityController.setVisibility(options.vertical);\n        this._scrollByPage = options.scrollByPage;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getZoomFactor } from '../../browser.js';\nimport * as dom from '../../dom.js';\nimport { createFastDomNode } from '../../fastDomNode.js';\nimport { StandardWheelEvent } from '../../mouseEvent.js';\nimport { HorizontalScrollbar } from './horizontalScrollbar.js';\nimport { VerticalScrollbar } from './verticalScrollbar.js';\nimport { Widget } from '../widget.js';\nimport { TimeoutTimer } from '../../../common/async.js';\nimport { Emitter } from '../../../common/event.js';\nimport { dispose } from '../../../common/lifecycle.js';\nimport * as platform from '../../../common/platform.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport './media/scrollbars.css';\nconst HIDE_TIMEOUT = 500;\nconst SCROLL_WHEEL_SENSITIVITY = 50;\nconst SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED = true;\nclass MouseWheelClassifierItem {\n    constructor(timestamp, deltaX, deltaY) {\n        this.timestamp = timestamp;\n        this.deltaX = deltaX;\n        this.deltaY = deltaY;\n        this.score = 0;\n    }\n}\nexport class MouseWheelClassifier {\n    constructor() {\n        this._capacity = 5;\n        this._memory = [];\n        this._front = -1;\n        this._rear = -1;\n    }\n    isPhysicalMouseWheel() {\n        if (this._front === -1 && this._rear === -1) {\n            // no elements\n            return false;\n        }\n        // 0.5 * last + 0.25 * 2nd last + 0.125 * 3rd last + ...\n        let remainingInfluence = 1;\n        let score = 0;\n        let iteration = 1;\n        let index = this._rear;\n        do {\n            const influence = (index === this._front ? remainingInfluence : Math.pow(2, -iteration));\n            remainingInfluence -= influence;\n            score += this._memory[index].score * influence;\n            if (index === this._front) {\n                break;\n            }\n            index = (this._capacity + index - 1) % this._capacity;\n            iteration++;\n        } while (true);\n        return (score <= 0.5);\n    }\n    acceptStandardWheelEvent(e) {\n        const osZoomFactor = window.devicePixelRatio / getZoomFactor();\n        if (platform.isWindows || platform.isLinux) {\n            // On Windows and Linux, the incoming delta events are multiplied with the OS zoom factor.\n            // The OS zoom factor can be reverse engineered by using the device pixel ratio and the configured zoom factor into account.\n            this.accept(Date.now(), e.deltaX / osZoomFactor, e.deltaY / osZoomFactor);\n        }\n        else {\n            this.accept(Date.now(), e.deltaX, e.deltaY);\n        }\n    }\n    accept(timestamp, deltaX, deltaY) {\n        const item = new MouseWheelClassifierItem(timestamp, deltaX, deltaY);\n        item.score = this._computeScore(item);\n        if (this._front === -1 && this._rear === -1) {\n            this._memory[0] = item;\n            this._front = 0;\n            this._rear = 0;\n        }\n        else {\n            this._rear = (this._rear + 1) % this._capacity;\n            if (this._rear === this._front) {\n                // Drop oldest\n                this._front = (this._front + 1) % this._capacity;\n            }\n            this._memory[this._rear] = item;\n        }\n    }\n    /**\n     * A score between 0 and 1 for `item`.\n     *  - a score towards 0 indicates that the source appears to be a physical mouse wheel\n     *  - a score towards 1 indicates that the source appears to be a touchpad or magic mouse, etc.\n     */\n    _computeScore(item) {\n        if (Math.abs(item.deltaX) > 0 && Math.abs(item.deltaY) > 0) {\n            // both axes exercised => definitely not a physical mouse wheel\n            return 1;\n        }\n        let score = 0.5;\n        const prev = (this._front === -1 && this._rear === -1 ? null : this._memory[this._rear]);\n        if (prev) {\n            // const deltaT = item.timestamp - prev.timestamp;\n            // if (deltaT < 1000 / 30) {\n            // \t// sooner than X times per second => indicator that this is not a physical mouse wheel\n            // \tscore += 0.25;\n            // }\n            // if (item.deltaX === prev.deltaX && item.deltaY === prev.deltaY) {\n            // \t// equal amplitude => indicator that this is a physical mouse wheel\n            // \tscore -= 0.25;\n            // }\n        }\n        if (!this._isAlmostInt(item.deltaX) || !this._isAlmostInt(item.deltaY)) {\n            // non-integer deltas => indicator that this is not a physical mouse wheel\n            score += 0.25;\n        }\n        return Math.min(Math.max(score, 0), 1);\n    }\n    _isAlmostInt(value) {\n        const delta = Math.abs(Math.round(value) - value);\n        return (delta < 0.01);\n    }\n}\nMouseWheelClassifier.INSTANCE = new MouseWheelClassifier();\nexport class AbstractScrollableElement extends Widget {\n    get options() {\n        return this._options;\n    }\n    constructor(element, options, scrollable) {\n        super();\n        this._onScroll = this._register(new Emitter());\n        this.onScroll = this._onScroll.event;\n        this._onWillScroll = this._register(new Emitter());\n        element.style.overflow = 'hidden';\n        this._options = resolveOptions(options);\n        this._scrollable = scrollable;\n        this._register(this._scrollable.onScroll((e) => {\n            this._onWillScroll.fire(e);\n            this._onDidScroll(e);\n            this._onScroll.fire(e);\n        }));\n        const scrollbarHost = {\n            onMouseWheel: (mouseWheelEvent) => this._onMouseWheel(mouseWheelEvent),\n            onDragStart: () => this._onDragStart(),\n            onDragEnd: () => this._onDragEnd(),\n        };\n        this._verticalScrollbar = this._register(new VerticalScrollbar(this._scrollable, this._options, scrollbarHost));\n        this._horizontalScrollbar = this._register(new HorizontalScrollbar(this._scrollable, this._options, scrollbarHost));\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'monaco-scrollable-element ' + this._options.className;\n        this._domNode.setAttribute('role', 'presentation');\n        this._domNode.style.position = 'relative';\n        this._domNode.style.overflow = 'hidden';\n        this._domNode.appendChild(element);\n        this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode);\n        this._domNode.appendChild(this._verticalScrollbar.domNode.domNode);\n        if (this._options.useShadows) {\n            this._leftShadowDomNode = createFastDomNode(document.createElement('div'));\n            this._leftShadowDomNode.setClassName('shadow');\n            this._domNode.appendChild(this._leftShadowDomNode.domNode);\n            this._topShadowDomNode = createFastDomNode(document.createElement('div'));\n            this._topShadowDomNode.setClassName('shadow');\n            this._domNode.appendChild(this._topShadowDomNode.domNode);\n            this._topLeftShadowDomNode = createFastDomNode(document.createElement('div'));\n            this._topLeftShadowDomNode.setClassName('shadow');\n            this._domNode.appendChild(this._topLeftShadowDomNode.domNode);\n        }\n        else {\n            this._leftShadowDomNode = null;\n            this._topShadowDomNode = null;\n            this._topLeftShadowDomNode = null;\n        }\n        this._listenOnDomNode = this._options.listenOnDomNode || this._domNode;\n        this._mouseWheelToDispose = [];\n        this._setListeningToMouseWheel(this._options.handleMouseWheel);\n        this.onmouseover(this._listenOnDomNode, (e) => this._onMouseOver(e));\n        this.onmouseleave(this._listenOnDomNode, (e) => this._onMouseLeave(e));\n        this._hideTimeout = this._register(new TimeoutTimer());\n        this._isDragging = false;\n        this._mouseIsOver = false;\n        this._shouldRender = true;\n        this._revealOnScroll = true;\n    }\n    dispose() {\n        this._mouseWheelToDispose = dispose(this._mouseWheelToDispose);\n        super.dispose();\n    }\n    /**\n     * Get the generated 'scrollable' dom node\n     */\n    getDomNode() {\n        return this._domNode;\n    }\n    getOverviewRulerLayoutInfo() {\n        return {\n            parent: this._domNode,\n            insertBefore: this._verticalScrollbar.domNode.domNode,\n        };\n    }\n    /**\n     * Delegate a pointer down event to the vertical scrollbar.\n     * This is to help with clicking somewhere else and having the scrollbar react.\n     */\n    delegateVerticalScrollbarPointerDown(browserEvent) {\n        this._verticalScrollbar.delegatePointerDown(browserEvent);\n    }\n    getScrollDimensions() {\n        return this._scrollable.getScrollDimensions();\n    }\n    setScrollDimensions(dimensions) {\n        this._scrollable.setScrollDimensions(dimensions, false);\n    }\n    /**\n     * Update the class name of the scrollable element.\n     */\n    updateClassName(newClassName) {\n        this._options.className = newClassName;\n        // Defaults are different on Macs\n        if (platform.isMacintosh) {\n            this._options.className += ' mac';\n        }\n        this._domNode.className = 'monaco-scrollable-element ' + this._options.className;\n    }\n    /**\n     * Update configuration options for the scrollbar.\n     */\n    updateOptions(newOptions) {\n        if (typeof newOptions.handleMouseWheel !== 'undefined') {\n            this._options.handleMouseWheel = newOptions.handleMouseWheel;\n            this._setListeningToMouseWheel(this._options.handleMouseWheel);\n        }\n        if (typeof newOptions.mouseWheelScrollSensitivity !== 'undefined') {\n            this._options.mouseWheelScrollSensitivity = newOptions.mouseWheelScrollSensitivity;\n        }\n        if (typeof newOptions.fastScrollSensitivity !== 'undefined') {\n            this._options.fastScrollSensitivity = newOptions.fastScrollSensitivity;\n        }\n        if (typeof newOptions.scrollPredominantAxis !== 'undefined') {\n            this._options.scrollPredominantAxis = newOptions.scrollPredominantAxis;\n        }\n        if (typeof newOptions.horizontal !== 'undefined') {\n            this._options.horizontal = newOptions.horizontal;\n        }\n        if (typeof newOptions.vertical !== 'undefined') {\n            this._options.vertical = newOptions.vertical;\n        }\n        if (typeof newOptions.horizontalScrollbarSize !== 'undefined') {\n            this._options.horizontalScrollbarSize = newOptions.horizontalScrollbarSize;\n        }\n        if (typeof newOptions.verticalScrollbarSize !== 'undefined') {\n            this._options.verticalScrollbarSize = newOptions.verticalScrollbarSize;\n        }\n        if (typeof newOptions.scrollByPage !== 'undefined') {\n            this._options.scrollByPage = newOptions.scrollByPage;\n        }\n        this._horizontalScrollbar.updateOptions(this._options);\n        this._verticalScrollbar.updateOptions(this._options);\n        if (!this._options.lazyRender) {\n            this._render();\n        }\n    }\n    delegateScrollFromMouseWheelEvent(browserEvent) {\n        this._onMouseWheel(new StandardWheelEvent(browserEvent));\n    }\n    // -------------------- mouse wheel scrolling --------------------\n    _setListeningToMouseWheel(shouldListen) {\n        const isListening = (this._mouseWheelToDispose.length > 0);\n        if (isListening === shouldListen) {\n            // No change\n            return;\n        }\n        // Stop listening (if necessary)\n        this._mouseWheelToDispose = dispose(this._mouseWheelToDispose);\n        // Start listening (if necessary)\n        if (shouldListen) {\n            const onMouseWheel = (browserEvent) => {\n                this._onMouseWheel(new StandardWheelEvent(browserEvent));\n            };\n            this._mouseWheelToDispose.push(dom.addDisposableListener(this._listenOnDomNode, dom.EventType.MOUSE_WHEEL, onMouseWheel, { passive: false }));\n        }\n    }\n    _onMouseWheel(e) {\n        var _a;\n        if ((_a = e.browserEvent) === null || _a === void 0 ? void 0 : _a.defaultPrevented) {\n            return;\n        }\n        const classifier = MouseWheelClassifier.INSTANCE;\n        if (SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED) {\n            classifier.acceptStandardWheelEvent(e);\n        }\n        // console.log(`${Date.now()}, ${e.deltaY}, ${e.deltaX}`);\n        let didScroll = false;\n        if (e.deltaY || e.deltaX) {\n            let deltaY = e.deltaY * this._options.mouseWheelScrollSensitivity;\n            let deltaX = e.deltaX * this._options.mouseWheelScrollSensitivity;\n            if (this._options.scrollPredominantAxis) {\n                if (this._options.scrollYToX && deltaX + deltaY === 0) {\n                    // when configured to map Y to X and we both see\n                    // no dominant axis and X and Y are competing with\n                    // identical values into opposite directions, we\n                    // ignore the delta as we cannot make a decision then\n                    deltaX = deltaY = 0;\n                }\n                else if (Math.abs(deltaY) >= Math.abs(deltaX)) {\n                    deltaX = 0;\n                }\n                else {\n                    deltaY = 0;\n                }\n            }\n            if (this._options.flipAxes) {\n                [deltaY, deltaX] = [deltaX, deltaY];\n            }\n            // Convert vertical scrolling to horizontal if shift is held, this\n            // is handled at a higher level on Mac\n            const shiftConvert = !platform.isMacintosh && e.browserEvent && e.browserEvent.shiftKey;\n            if ((this._options.scrollYToX || shiftConvert) && !deltaX) {\n                deltaX = deltaY;\n                deltaY = 0;\n            }\n            if (e.browserEvent && e.browserEvent.altKey) {\n                // fastScrolling\n                deltaX = deltaX * this._options.fastScrollSensitivity;\n                deltaY = deltaY * this._options.fastScrollSensitivity;\n            }\n            const futureScrollPosition = this._scrollable.getFutureScrollPosition();\n            let desiredScrollPosition = {};\n            if (deltaY) {\n                const deltaScrollTop = SCROLL_WHEEL_SENSITIVITY * deltaY;\n                // Here we convert values such as -0.3 to -1 or 0.3 to 1, otherwise low speed scrolling will never scroll\n                const desiredScrollTop = futureScrollPosition.scrollTop - (deltaScrollTop < 0 ? Math.floor(deltaScrollTop) : Math.ceil(deltaScrollTop));\n                this._verticalScrollbar.writeScrollPosition(desiredScrollPosition, desiredScrollTop);\n            }\n            if (deltaX) {\n                const deltaScrollLeft = SCROLL_WHEEL_SENSITIVITY * deltaX;\n                // Here we convert values such as -0.3 to -1 or 0.3 to 1, otherwise low speed scrolling will never scroll\n                const desiredScrollLeft = futureScrollPosition.scrollLeft - (deltaScrollLeft < 0 ? Math.floor(deltaScrollLeft) : Math.ceil(deltaScrollLeft));\n                this._horizontalScrollbar.writeScrollPosition(desiredScrollPosition, desiredScrollLeft);\n            }\n            // Check that we are scrolling towards a location which is valid\n            desiredScrollPosition = this._scrollable.validateScrollPosition(desiredScrollPosition);\n            if (futureScrollPosition.scrollLeft !== desiredScrollPosition.scrollLeft || futureScrollPosition.scrollTop !== desiredScrollPosition.scrollTop) {\n                const canPerformSmoothScroll = (SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED\n                    && this._options.mouseWheelSmoothScroll\n                    && classifier.isPhysicalMouseWheel());\n                if (canPerformSmoothScroll) {\n                    this._scrollable.setScrollPositionSmooth(desiredScrollPosition);\n                }\n                else {\n                    this._scrollable.setScrollPositionNow(desiredScrollPosition);\n                }\n                didScroll = true;\n            }\n        }\n        let consumeMouseWheel = didScroll;\n        if (!consumeMouseWheel && this._options.alwaysConsumeMouseWheel) {\n            consumeMouseWheel = true;\n        }\n        if (!consumeMouseWheel && this._options.consumeMouseWheelIfScrollbarIsNeeded && (this._verticalScrollbar.isNeeded() || this._horizontalScrollbar.isNeeded())) {\n            consumeMouseWheel = true;\n        }\n        if (consumeMouseWheel) {\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    }\n    _onDidScroll(e) {\n        this._shouldRender = this._horizontalScrollbar.onDidScroll(e) || this._shouldRender;\n        this._shouldRender = this._verticalScrollbar.onDidScroll(e) || this._shouldRender;\n        if (this._options.useShadows) {\n            this._shouldRender = true;\n        }\n        if (this._revealOnScroll) {\n            this._reveal();\n        }\n        if (!this._options.lazyRender) {\n            this._render();\n        }\n    }\n    /**\n     * Render / mutate the DOM now.\n     * Should be used together with the ctor option `lazyRender`.\n     */\n    renderNow() {\n        if (!this._options.lazyRender) {\n            throw new Error('Please use `lazyRender` together with `renderNow`!');\n        }\n        this._render();\n    }\n    _render() {\n        if (!this._shouldRender) {\n            return;\n        }\n        this._shouldRender = false;\n        this._horizontalScrollbar.render();\n        this._verticalScrollbar.render();\n        if (this._options.useShadows) {\n            const scrollState = this._scrollable.getCurrentScrollPosition();\n            const enableTop = scrollState.scrollTop > 0;\n            const enableLeft = scrollState.scrollLeft > 0;\n            const leftClassName = (enableLeft ? ' left' : '');\n            const topClassName = (enableTop ? ' top' : '');\n            const topLeftClassName = (enableLeft || enableTop ? ' top-left-corner' : '');\n            this._leftShadowDomNode.setClassName(`shadow${leftClassName}`);\n            this._topShadowDomNode.setClassName(`shadow${topClassName}`);\n            this._topLeftShadowDomNode.setClassName(`shadow${topLeftClassName}${topClassName}${leftClassName}`);\n        }\n    }\n    // -------------------- fade in / fade out --------------------\n    _onDragStart() {\n        this._isDragging = true;\n        this._reveal();\n    }\n    _onDragEnd() {\n        this._isDragging = false;\n        this._hide();\n    }\n    _onMouseLeave(e) {\n        this._mouseIsOver = false;\n        this._hide();\n    }\n    _onMouseOver(e) {\n        this._mouseIsOver = true;\n        this._reveal();\n    }\n    _reveal() {\n        this._verticalScrollbar.beginReveal();\n        this._horizontalScrollbar.beginReveal();\n        this._scheduleHide();\n    }\n    _hide() {\n        if (!this._mouseIsOver && !this._isDragging) {\n            this._verticalScrollbar.beginHide();\n            this._horizontalScrollbar.beginHide();\n        }\n    }\n    _scheduleHide() {\n        if (!this._mouseIsOver && !this._isDragging) {\n            this._hideTimeout.cancelAndSet(() => this._hide(), HIDE_TIMEOUT);\n        }\n    }\n}\nexport class ScrollableElement extends AbstractScrollableElement {\n    constructor(element, options) {\n        options = options || {};\n        options.mouseWheelSmoothScroll = false;\n        const scrollable = new Scrollable({\n            forceIntegerValues: true,\n            smoothScrollDuration: 0,\n            scheduleAtNextAnimationFrame: (callback) => dom.scheduleAtNextAnimationFrame(callback)\n        });\n        super(element, options, scrollable);\n        this._register(scrollable);\n    }\n    setScrollPosition(update) {\n        this._scrollable.setScrollPositionNow(update);\n    }\n}\nexport class SmoothScrollableElement extends AbstractScrollableElement {\n    constructor(element, options, scrollable) {\n        super(element, options, scrollable);\n    }\n    setScrollPosition(update) {\n        if (update.reuseAnimation) {\n            this._scrollable.setScrollPositionSmooth(update, update.reuseAnimation);\n        }\n        else {\n            this._scrollable.setScrollPositionNow(update);\n        }\n    }\n    getScrollPosition() {\n        return this._scrollable.getCurrentScrollPosition();\n    }\n}\nexport class DomScrollableElement extends AbstractScrollableElement {\n    constructor(element, options) {\n        options = options || {};\n        options.mouseWheelSmoothScroll = false;\n        const scrollable = new Scrollable({\n            forceIntegerValues: false, // See https://github.com/microsoft/vscode/issues/139877\n            smoothScrollDuration: 0,\n            scheduleAtNextAnimationFrame: (callback) => dom.scheduleAtNextAnimationFrame(callback)\n        });\n        super(element, options, scrollable);\n        this._register(scrollable);\n        this._element = element;\n        this._register(this.onScroll((e) => {\n            if (e.scrollTopChanged) {\n                this._element.scrollTop = e.scrollTop;\n            }\n            if (e.scrollLeftChanged) {\n                this._element.scrollLeft = e.scrollLeft;\n            }\n        }));\n        this.scanDomNode();\n    }\n    setScrollPosition(update) {\n        this._scrollable.setScrollPositionNow(update);\n    }\n    getScrollPosition() {\n        return this._scrollable.getCurrentScrollPosition();\n    }\n    scanDomNode() {\n        // width, scrollLeft, scrollWidth, height, scrollTop, scrollHeight\n        this.setScrollDimensions({\n            width: this._element.clientWidth,\n            scrollWidth: this._element.scrollWidth,\n            height: this._element.clientHeight,\n            scrollHeight: this._element.scrollHeight\n        });\n        this.setScrollPosition({\n            scrollLeft: this._element.scrollLeft,\n            scrollTop: this._element.scrollTop,\n        });\n    }\n}\nfunction resolveOptions(opts) {\n    const result = {\n        lazyRender: (typeof opts.lazyRender !== 'undefined' ? opts.lazyRender : false),\n        className: (typeof opts.className !== 'undefined' ? opts.className : ''),\n        useShadows: (typeof opts.useShadows !== 'undefined' ? opts.useShadows : true),\n        handleMouseWheel: (typeof opts.handleMouseWheel !== 'undefined' ? opts.handleMouseWheel : true),\n        flipAxes: (typeof opts.flipAxes !== 'undefined' ? opts.flipAxes : false),\n        consumeMouseWheelIfScrollbarIsNeeded: (typeof opts.consumeMouseWheelIfScrollbarIsNeeded !== 'undefined' ? opts.consumeMouseWheelIfScrollbarIsNeeded : false),\n        alwaysConsumeMouseWheel: (typeof opts.alwaysConsumeMouseWheel !== 'undefined' ? opts.alwaysConsumeMouseWheel : false),\n        scrollYToX: (typeof opts.scrollYToX !== 'undefined' ? opts.scrollYToX : false),\n        mouseWheelScrollSensitivity: (typeof opts.mouseWheelScrollSensitivity !== 'undefined' ? opts.mouseWheelScrollSensitivity : 1),\n        fastScrollSensitivity: (typeof opts.fastScrollSensitivity !== 'undefined' ? opts.fastScrollSensitivity : 5),\n        scrollPredominantAxis: (typeof opts.scrollPredominantAxis !== 'undefined' ? opts.scrollPredominantAxis : true),\n        mouseWheelSmoothScroll: (typeof opts.mouseWheelSmoothScroll !== 'undefined' ? opts.mouseWheelSmoothScroll : true),\n        arrowSize: (typeof opts.arrowSize !== 'undefined' ? opts.arrowSize : 11),\n        listenOnDomNode: (typeof opts.listenOnDomNode !== 'undefined' ? opts.listenOnDomNode : null),\n        horizontal: (typeof opts.horizontal !== 'undefined' ? opts.horizontal : 1 /* ScrollbarVisibility.Auto */),\n        horizontalScrollbarSize: (typeof opts.horizontalScrollbarSize !== 'undefined' ? opts.horizontalScrollbarSize : 10),\n        horizontalSliderSize: (typeof opts.horizontalSliderSize !== 'undefined' ? opts.horizontalSliderSize : 0),\n        horizontalHasArrows: (typeof opts.horizontalHasArrows !== 'undefined' ? opts.horizontalHasArrows : false),\n        vertical: (typeof opts.vertical !== 'undefined' ? opts.vertical : 1 /* ScrollbarVisibility.Auto */),\n        verticalScrollbarSize: (typeof opts.verticalScrollbarSize !== 'undefined' ? opts.verticalScrollbarSize : 10),\n        verticalHasArrows: (typeof opts.verticalHasArrows !== 'undefined' ? opts.verticalHasArrows : false),\n        verticalSliderSize: (typeof opts.verticalSliderSize !== 'undefined' ? opts.verticalSliderSize : 0),\n        scrollByPage: (typeof opts.scrollByPage !== 'undefined' ? opts.scrollByPage : false)\n    };\n    result.horizontalSliderSize = (typeof opts.horizontalSliderSize !== 'undefined' ? opts.horizontalSliderSize : result.horizontalScrollbarSize);\n    result.verticalSliderSize = (typeof opts.verticalSliderSize !== 'undefined' ? opts.verticalSliderSize : result.verticalScrollbarSize);\n    // Defaults are different on Macs\n    if (platform.isMacintosh) {\n        result.className += ' mac';\n    }\n    return result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * The minimal size of the slider (such that it can still be clickable) -- it is artificially enlarged.\n */\nconst MINIMUM_SLIDER_SIZE = 20;\nexport class ScrollbarState {\n    constructor(arrowSize, scrollbarSize, oppositeScrollbarSize, visibleSize, scrollSize, scrollPosition) {\n        this._scrollbarSize = Math.round(scrollbarSize);\n        this._oppositeScrollbarSize = Math.round(oppositeScrollbarSize);\n        this._arrowSize = Math.round(arrowSize);\n        this._visibleSize = visibleSize;\n        this._scrollSize = scrollSize;\n        this._scrollPosition = scrollPosition;\n        this._computedAvailableSize = 0;\n        this._computedIsNeeded = false;\n        this._computedSliderSize = 0;\n        this._computedSliderRatio = 0;\n        this._computedSliderPosition = 0;\n        this._refreshComputedValues();\n    }\n    clone() {\n        return new ScrollbarState(this._arrowSize, this._scrollbarSize, this._oppositeScrollbarSize, this._visibleSize, this._scrollSize, this._scrollPosition);\n    }\n    setVisibleSize(visibleSize) {\n        const iVisibleSize = Math.round(visibleSize);\n        if (this._visibleSize !== iVisibleSize) {\n            this._visibleSize = iVisibleSize;\n            this._refreshComputedValues();\n            return true;\n        }\n        return false;\n    }\n    setScrollSize(scrollSize) {\n        const iScrollSize = Math.round(scrollSize);\n        if (this._scrollSize !== iScrollSize) {\n            this._scrollSize = iScrollSize;\n            this._refreshComputedValues();\n            return true;\n        }\n        return false;\n    }\n    setScrollPosition(scrollPosition) {\n        const iScrollPosition = Math.round(scrollPosition);\n        if (this._scrollPosition !== iScrollPosition) {\n            this._scrollPosition = iScrollPosition;\n            this._refreshComputedValues();\n            return true;\n        }\n        return false;\n    }\n    setScrollbarSize(scrollbarSize) {\n        this._scrollbarSize = Math.round(scrollbarSize);\n    }\n    setOppositeScrollbarSize(oppositeScrollbarSize) {\n        this._oppositeScrollbarSize = Math.round(oppositeScrollbarSize);\n    }\n    static _computeValues(oppositeScrollbarSize, arrowSize, visibleSize, scrollSize, scrollPosition) {\n        const computedAvailableSize = Math.max(0, visibleSize - oppositeScrollbarSize);\n        const computedRepresentableSize = Math.max(0, computedAvailableSize - 2 * arrowSize);\n        const computedIsNeeded = (scrollSize > 0 && scrollSize > visibleSize);\n        if (!computedIsNeeded) {\n            // There is no need for a slider\n            return {\n                computedAvailableSize: Math.round(computedAvailableSize),\n                computedIsNeeded: computedIsNeeded,\n                computedSliderSize: Math.round(computedRepresentableSize),\n                computedSliderRatio: 0,\n                computedSliderPosition: 0,\n            };\n        }\n        // We must artificially increase the size of the slider if needed, since the slider would be too small to grab with the mouse otherwise\n        const computedSliderSize = Math.round(Math.max(MINIMUM_SLIDER_SIZE, Math.floor(visibleSize * computedRepresentableSize / scrollSize)));\n        // The slider can move from 0 to `computedRepresentableSize` - `computedSliderSize`\n        // in the same way `scrollPosition` can move from 0 to `scrollSize` - `visibleSize`.\n        const computedSliderRatio = (computedRepresentableSize - computedSliderSize) / (scrollSize - visibleSize);\n        const computedSliderPosition = (scrollPosition * computedSliderRatio);\n        return {\n            computedAvailableSize: Math.round(computedAvailableSize),\n            computedIsNeeded: computedIsNeeded,\n            computedSliderSize: Math.round(computedSliderSize),\n            computedSliderRatio: computedSliderRatio,\n            computedSliderPosition: Math.round(computedSliderPosition),\n        };\n    }\n    _refreshComputedValues() {\n        const r = ScrollbarState._computeValues(this._oppositeScrollbarSize, this._arrowSize, this._visibleSize, this._scrollSize, this._scrollPosition);\n        this._computedAvailableSize = r.computedAvailableSize;\n        this._computedIsNeeded = r.computedIsNeeded;\n        this._computedSliderSize = r.computedSliderSize;\n        this._computedSliderRatio = r.computedSliderRatio;\n        this._computedSliderPosition = r.computedSliderPosition;\n    }\n    getArrowSize() {\n        return this._arrowSize;\n    }\n    getScrollPosition() {\n        return this._scrollPosition;\n    }\n    getRectangleLargeSize() {\n        return this._computedAvailableSize;\n    }\n    getRectangleSmallSize() {\n        return this._scrollbarSize;\n    }\n    isNeeded() {\n        return this._computedIsNeeded;\n    }\n    getSliderSize() {\n        return this._computedSliderSize;\n    }\n    getSliderPosition() {\n        return this._computedSliderPosition;\n    }\n    /**\n     * Compute a desired `scrollPosition` such that `offset` ends up in the center of the slider.\n     * `offset` is based on the same coordinate system as the `sliderPosition`.\n     */\n    getDesiredScrollPositionFromOffset(offset) {\n        if (!this._computedIsNeeded) {\n            // no need for a slider\n            return 0;\n        }\n        const desiredSliderPosition = offset - this._arrowSize - this._computedSliderSize / 2;\n        return Math.round(desiredSliderPosition / this._computedSliderRatio);\n    }\n    /**\n     * Compute a desired `scrollPosition` from if offset is before or after the slider position.\n     * If offset is before slider, treat as a page up (or left).  If after, page down (or right).\n     * `offset` and `_computedSliderPosition` are based on the same coordinate system.\n     * `_visibleSize` corresponds to a \"page\" of lines in the returned coordinate system.\n     */\n    getDesiredScrollPositionFromOffsetPaged(offset) {\n        if (!this._computedIsNeeded) {\n            // no need for a slider\n            return 0;\n        }\n        const correctedOffset = offset - this._arrowSize; // compensate if has arrows\n        let desiredScrollPosition = this._scrollPosition;\n        if (correctedOffset < this._computedSliderPosition) {\n            desiredScrollPosition -= this._visibleSize; // page up/left\n        }\n        else {\n            desiredScrollPosition += this._visibleSize; // page down/right\n        }\n        return desiredScrollPosition;\n    }\n    /**\n     * Compute a desired `scrollPosition` such that the slider moves by `delta`.\n     */\n    getDesiredScrollPositionFromDelta(delta) {\n        if (!this._computedIsNeeded) {\n            // no need for a slider\n            return 0;\n        }\n        const desiredSliderPosition = this._computedSliderPosition + delta;\n        return Math.round(desiredSliderPosition / this._computedSliderRatio);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { renderMarkdown } from '../../markdownRenderer.js';\nimport { List } from '../list/listWidget.js';\nimport * as arrays from '../../../common/arrays.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { KeyCodeUtils } from '../../../common/keyCodes.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { isMacintosh } from '../../../common/platform.js';\nimport './selectBoxCustom.css';\nimport { localize } from '../../../../nls.js';\nconst $ = dom.$;\nconst SELECT_OPTION_ENTRY_TEMPLATE_ID = 'selectOption.entry.template';\nclass SelectListRenderer {\n    get templateId() { return SELECT_OPTION_ENTRY_TEMPLATE_ID; }\n    renderTemplate(container) {\n        const data = Object.create(null);\n        data.root = container;\n        data.text = dom.append(container, $('.option-text'));\n        data.detail = dom.append(container, $('.option-detail'));\n        data.decoratorRight = dom.append(container, $('.option-decorator-right'));\n        return data;\n    }\n    renderElement(element, index, templateData) {\n        const data = templateData;\n        const text = element.text;\n        const detail = element.detail;\n        const decoratorRight = element.decoratorRight;\n        const isDisabled = element.isDisabled;\n        data.text.textContent = text;\n        data.detail.textContent = !!detail ? detail : '';\n        data.decoratorRight.innerText = !!decoratorRight ? decoratorRight : '';\n        // pseudo-select disabled option\n        if (isDisabled) {\n            data.root.classList.add('option-disabled');\n        }\n        else {\n            // Make sure we do class removal from prior template rendering\n            data.root.classList.remove('option-disabled');\n        }\n    }\n    disposeTemplate(_templateData) {\n        // noop\n    }\n}\nexport class SelectBoxList extends Disposable {\n    constructor(options, selected, contextViewProvider, styles, selectBoxOptions) {\n        super();\n        this.options = [];\n        this._currentSelection = 0;\n        this._hasDetails = false;\n        this._skipLayout = false;\n        this._sticky = false; // for dev purposes only\n        this._isVisible = false;\n        this.styles = styles;\n        this.selectBoxOptions = selectBoxOptions || Object.create(null);\n        if (typeof this.selectBoxOptions.minBottomMargin !== 'number') {\n            this.selectBoxOptions.minBottomMargin = SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN;\n        }\n        else if (this.selectBoxOptions.minBottomMargin < 0) {\n            this.selectBoxOptions.minBottomMargin = 0;\n        }\n        this.selectElement = document.createElement('select');\n        // Use custom CSS vars for padding calculation\n        this.selectElement.className = 'monaco-select-box monaco-select-box-dropdown-padding';\n        if (typeof this.selectBoxOptions.ariaLabel === 'string') {\n            this.selectElement.setAttribute('aria-label', this.selectBoxOptions.ariaLabel);\n        }\n        if (typeof this.selectBoxOptions.ariaDescription === 'string') {\n            this.selectElement.setAttribute('aria-description', this.selectBoxOptions.ariaDescription);\n        }\n        this._onDidSelect = new Emitter();\n        this._register(this._onDidSelect);\n        this.registerListeners();\n        this.constructSelectDropDown(contextViewProvider);\n        this.selected = selected || 0;\n        if (options) {\n            this.setOptions(options, selected);\n        }\n        this.initStyleSheet();\n    }\n    // IDelegate - List renderer\n    getHeight() {\n        return 22;\n    }\n    getTemplateId() {\n        return SELECT_OPTION_ENTRY_TEMPLATE_ID;\n    }\n    constructSelectDropDown(contextViewProvider) {\n        // SetUp ContextView container to hold select Dropdown\n        this.contextViewProvider = contextViewProvider;\n        this.selectDropDownContainer = dom.$('.monaco-select-box-dropdown-container');\n        // Use custom CSS vars for padding calculation (shared with parent select)\n        this.selectDropDownContainer.classList.add('monaco-select-box-dropdown-padding');\n        // Setup container for select option details\n        this.selectionDetailsPane = dom.append(this.selectDropDownContainer, $('.select-box-details-pane'));\n        // Create span flex box item/div we can measure and control\n        const widthControlOuterDiv = dom.append(this.selectDropDownContainer, $('.select-box-dropdown-container-width-control'));\n        const widthControlInnerDiv = dom.append(widthControlOuterDiv, $('.width-control-div'));\n        this.widthControlElement = document.createElement('span');\n        this.widthControlElement.className = 'option-text-width-control';\n        dom.append(widthControlInnerDiv, this.widthControlElement);\n        // Always default to below position\n        this._dropDownPosition = 0 /* AnchorPosition.BELOW */;\n        // Inline stylesheet for themes\n        this.styleElement = dom.createStyleSheet(this.selectDropDownContainer);\n        // Prevent dragging of dropdown #114329\n        this.selectDropDownContainer.setAttribute('draggable', 'true');\n        this._register(dom.addDisposableListener(this.selectDropDownContainer, dom.EventType.DRAG_START, (e) => {\n            dom.EventHelper.stop(e, true);\n        }));\n    }\n    registerListeners() {\n        // Parent native select keyboard listeners\n        this._register(dom.addStandardDisposableListener(this.selectElement, 'change', (e) => {\n            this.selected = e.target.selectedIndex;\n            this._onDidSelect.fire({\n                index: e.target.selectedIndex,\n                selected: e.target.value\n            });\n            if (!!this.options[this.selected] && !!this.options[this.selected].text) {\n                this.selectElement.title = this.options[this.selected].text;\n            }\n        }));\n        // Have to implement both keyboard and mouse controllers to handle disabled options\n        // Intercept mouse events to override normal select actions on parents\n        this._register(dom.addDisposableListener(this.selectElement, dom.EventType.CLICK, (e) => {\n            dom.EventHelper.stop(e);\n            if (this._isVisible) {\n                this.hideSelectDropDown(true);\n            }\n            else {\n                this.showSelectDropDown();\n            }\n        }));\n        this._register(dom.addDisposableListener(this.selectElement, dom.EventType.MOUSE_DOWN, (e) => {\n            dom.EventHelper.stop(e);\n        }));\n        // Intercept touch events\n        // The following implementation is slightly different from the mouse event handlers above.\n        // Use the following helper variable, otherwise the list flickers.\n        let listIsVisibleOnTouchStart;\n        this._register(dom.addDisposableListener(this.selectElement, 'touchstart', (e) => {\n            listIsVisibleOnTouchStart = this._isVisible;\n        }));\n        this._register(dom.addDisposableListener(this.selectElement, 'touchend', (e) => {\n            dom.EventHelper.stop(e);\n            if (listIsVisibleOnTouchStart) {\n                this.hideSelectDropDown(true);\n            }\n            else {\n                this.showSelectDropDown();\n            }\n        }));\n        // Intercept keyboard handling\n        this._register(dom.addDisposableListener(this.selectElement, dom.EventType.KEY_DOWN, (e) => {\n            const event = new StandardKeyboardEvent(e);\n            let showDropDown = false;\n            // Create and drop down select list on keyboard select\n            if (isMacintosh) {\n                if (event.keyCode === 18 /* KeyCode.DownArrow */ || event.keyCode === 16 /* KeyCode.UpArrow */ || event.keyCode === 10 /* KeyCode.Space */ || event.keyCode === 3 /* KeyCode.Enter */) {\n                    showDropDown = true;\n                }\n            }\n            else {\n                if (event.keyCode === 18 /* KeyCode.DownArrow */ && event.altKey || event.keyCode === 16 /* KeyCode.UpArrow */ && event.altKey || event.keyCode === 10 /* KeyCode.Space */ || event.keyCode === 3 /* KeyCode.Enter */) {\n                    showDropDown = true;\n                }\n            }\n            if (showDropDown) {\n                this.showSelectDropDown();\n                dom.EventHelper.stop(e, true);\n            }\n        }));\n    }\n    get onDidSelect() {\n        return this._onDidSelect.event;\n    }\n    setOptions(options, selected) {\n        if (!arrays.equals(this.options, options)) {\n            this.options = options;\n            this.selectElement.options.length = 0;\n            this._hasDetails = false;\n            this._cachedMaxDetailsHeight = undefined;\n            this.options.forEach((option, index) => {\n                this.selectElement.add(this.createOption(option.text, index, option.isDisabled));\n                if (typeof option.description === 'string') {\n                    this._hasDetails = true;\n                }\n            });\n        }\n        if (selected !== undefined) {\n            this.select(selected);\n            // Set current = selected since this is not necessarily a user exit\n            this._currentSelection = this.selected;\n        }\n    }\n    setOptionsList() {\n        var _a;\n        // Mirror options in drop-down\n        // Populate select list for non-native select mode\n        (_a = this.selectList) === null || _a === void 0 ? void 0 : _a.splice(0, this.selectList.length, this.options);\n    }\n    select(index) {\n        if (index >= 0 && index < this.options.length) {\n            this.selected = index;\n        }\n        else if (index > this.options.length - 1) {\n            // Adjust index to end of list\n            // This could make client out of sync with the select\n            this.select(this.options.length - 1);\n        }\n        else if (this.selected < 0) {\n            this.selected = 0;\n        }\n        this.selectElement.selectedIndex = this.selected;\n        if (!!this.options[this.selected] && !!this.options[this.selected].text) {\n            this.selectElement.title = this.options[this.selected].text;\n        }\n    }\n    focus() {\n        if (this.selectElement) {\n            this.selectElement.tabIndex = 0;\n            this.selectElement.focus();\n        }\n    }\n    blur() {\n        if (this.selectElement) {\n            this.selectElement.tabIndex = -1;\n            this.selectElement.blur();\n        }\n    }\n    setFocusable(focusable) {\n        this.selectElement.tabIndex = focusable ? 0 : -1;\n    }\n    render(container) {\n        this.container = container;\n        container.classList.add('select-container');\n        container.appendChild(this.selectElement);\n        this.styleSelectElement();\n    }\n    initStyleSheet() {\n        const content = [];\n        // Style non-native select mode\n        if (this.styles.listFocusBackground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`);\n        }\n        if (this.styles.listFocusForeground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`);\n        }\n        if (this.styles.decoratorRightForeground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`);\n        }\n        if (this.styles.selectBackground && this.styles.selectBorder && this.styles.selectBorder !== this.styles.selectBackground) {\n            content.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `);\n            content.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `);\n            content.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `);\n        }\n        else if (this.styles.selectListBorder) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `);\n            content.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `);\n        }\n        // Hover foreground - ignore for disabled options\n        if (this.styles.listHoverForeground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`);\n        }\n        // Hover background - ignore for disabled options\n        if (this.styles.listHoverBackground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`);\n        }\n        // Match quick input outline styles - ignore for disabled options\n        if (this.styles.listFocusOutline) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`);\n        }\n        if (this.styles.listHoverOutline) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`);\n        }\n        // Clear list styles on focus and on hover for disabled options\n        content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }`);\n        content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }`);\n        this.styleElement.textContent = content.join('\\n');\n    }\n    styleSelectElement() {\n        var _a, _b, _c;\n        const background = (_a = this.styles.selectBackground) !== null && _a !== void 0 ? _a : '';\n        const foreground = (_b = this.styles.selectForeground) !== null && _b !== void 0 ? _b : '';\n        const border = (_c = this.styles.selectBorder) !== null && _c !== void 0 ? _c : '';\n        this.selectElement.style.backgroundColor = background;\n        this.selectElement.style.color = foreground;\n        this.selectElement.style.borderColor = border;\n    }\n    styleList() {\n        var _a, _b;\n        const background = (_a = this.styles.selectBackground) !== null && _a !== void 0 ? _a : '';\n        const listBackground = dom.asCssValueWithDefault(this.styles.selectListBackground, background);\n        this.selectDropDownListContainer.style.backgroundColor = listBackground;\n        this.selectionDetailsPane.style.backgroundColor = listBackground;\n        const optionsBorder = (_b = this.styles.focusBorder) !== null && _b !== void 0 ? _b : '';\n        this.selectDropDownContainer.style.outlineColor = optionsBorder;\n        this.selectDropDownContainer.style.outlineOffset = '-1px';\n        this.selectList.style(this.styles);\n    }\n    createOption(value, index, disabled) {\n        const option = document.createElement('option');\n        option.value = value;\n        option.text = value;\n        option.disabled = !!disabled;\n        return option;\n    }\n    // ContextView dropdown methods\n    showSelectDropDown() {\n        this.selectionDetailsPane.innerText = '';\n        if (!this.contextViewProvider || this._isVisible) {\n            return;\n        }\n        // Lazily create and populate list only at open, moved from constructor\n        this.createSelectList(this.selectDropDownContainer);\n        this.setOptionsList();\n        // This allows us to flip the position based on measurement\n        // Set drop-down position above/below from required height and margins\n        // If pre-layout cannot fit at least one option do not show drop-down\n        this.contextViewProvider.showContextView({\n            getAnchor: () => this.selectElement,\n            render: (container) => this.renderSelectDropDown(container, true),\n            layout: () => {\n                this.layoutSelectDropDown();\n            },\n            onHide: () => {\n                this.selectDropDownContainer.classList.remove('visible');\n                this.selectElement.classList.remove('synthetic-focus');\n            },\n            anchorPosition: this._dropDownPosition\n        }, this.selectBoxOptions.optionsAsChildren ? this.container : undefined);\n        // Hide so we can relay out\n        this._isVisible = true;\n        this.hideSelectDropDown(false);\n        this.contextViewProvider.showContextView({\n            getAnchor: () => this.selectElement,\n            render: (container) => this.renderSelectDropDown(container),\n            layout: () => this.layoutSelectDropDown(),\n            onHide: () => {\n                this.selectDropDownContainer.classList.remove('visible');\n                this.selectElement.classList.remove('synthetic-focus');\n            },\n            anchorPosition: this._dropDownPosition\n        }, this.selectBoxOptions.optionsAsChildren ? this.container : undefined);\n        // Track initial selection the case user escape, blur\n        this._currentSelection = this.selected;\n        this._isVisible = true;\n        this.selectElement.setAttribute('aria-expanded', 'true');\n    }\n    hideSelectDropDown(focusSelect) {\n        if (!this.contextViewProvider || !this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this.selectElement.setAttribute('aria-expanded', 'false');\n        if (focusSelect) {\n            this.selectElement.focus();\n        }\n        this.contextViewProvider.hideContextView();\n    }\n    renderSelectDropDown(container, preLayoutPosition) {\n        container.appendChild(this.selectDropDownContainer);\n        // Pre-Layout allows us to change position\n        this.layoutSelectDropDown(preLayoutPosition);\n        return {\n            dispose: () => {\n                // contextView will dispose itself if moving from one View to another\n                try {\n                    container.removeChild(this.selectDropDownContainer); // remove to take out the CSS rules we add\n                }\n                catch (error) {\n                    // Ignore, removed already by change of focus\n                }\n            }\n        };\n    }\n    // Iterate over detailed descriptions, find max height\n    measureMaxDetailsHeight() {\n        let maxDetailsPaneHeight = 0;\n        this.options.forEach((_option, index) => {\n            this.updateDetail(index);\n            if (this.selectionDetailsPane.offsetHeight > maxDetailsPaneHeight) {\n                maxDetailsPaneHeight = this.selectionDetailsPane.offsetHeight;\n            }\n        });\n        return maxDetailsPaneHeight;\n    }\n    layoutSelectDropDown(preLayoutPosition) {\n        // Avoid recursion from layout called in onListFocus\n        if (this._skipLayout) {\n            return false;\n        }\n        // Layout ContextView drop down select list and container\n        // Have to manage our vertical overflow, sizing, position below or above\n        // Position has to be determined and set prior to contextView instantiation\n        if (this.selectList) {\n            // Make visible to enable measurements\n            this.selectDropDownContainer.classList.add('visible');\n            const selectPosition = dom.getDomNodePagePosition(this.selectElement);\n            const styles = getComputedStyle(this.selectElement);\n            const verticalPadding = parseFloat(styles.getPropertyValue('--dropdown-padding-top')) + parseFloat(styles.getPropertyValue('--dropdown-padding-bottom'));\n            const maxSelectDropDownHeightBelow = (window.innerHeight - selectPosition.top - selectPosition.height - (this.selectBoxOptions.minBottomMargin || 0));\n            const maxSelectDropDownHeightAbove = (selectPosition.top - SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN);\n            // Determine optimal width - min(longest option), opt(parent select, excluding margins), max(ContextView controlled)\n            const selectWidth = this.selectElement.offsetWidth;\n            const selectMinWidth = this.setWidthControlElement(this.widthControlElement);\n            const selectOptimalWidth = Math.max(selectMinWidth, Math.round(selectWidth)).toString() + 'px';\n            this.selectDropDownContainer.style.width = selectOptimalWidth;\n            // Get initial list height and determine space above and below\n            this.selectList.getHTMLElement().style.height = '';\n            this.selectList.layout();\n            let listHeight = this.selectList.contentHeight;\n            if (this._hasDetails && this._cachedMaxDetailsHeight === undefined) {\n                this._cachedMaxDetailsHeight = this.measureMaxDetailsHeight();\n            }\n            const maxDetailsPaneHeight = this._hasDetails ? this._cachedMaxDetailsHeight : 0;\n            const minRequiredDropDownHeight = listHeight + verticalPadding + maxDetailsPaneHeight;\n            const maxVisibleOptionsBelow = ((Math.floor((maxSelectDropDownHeightBelow - verticalPadding - maxDetailsPaneHeight) / this.getHeight())));\n            const maxVisibleOptionsAbove = ((Math.floor((maxSelectDropDownHeightAbove - verticalPadding - maxDetailsPaneHeight) / this.getHeight())));\n            // If we are only doing pre-layout check/adjust position only\n            // Calculate vertical space available, flip up if insufficient\n            // Use reflected padding on parent select, ContextView style\n            // properties not available before DOM attachment\n            if (preLayoutPosition) {\n                // Check if select moved out of viewport , do not open\n                // If at least one option cannot be shown, don't open the drop-down or hide/remove if open\n                if ((selectPosition.top + selectPosition.height) > (window.innerHeight - 22)\n                    || selectPosition.top < SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN\n                    || ((maxVisibleOptionsBelow < 1) && (maxVisibleOptionsAbove < 1))) {\n                    // Indicate we cannot open\n                    return false;\n                }\n                // Determine if we have to flip up\n                // Always show complete list items - never more than Max available vertical height\n                if (maxVisibleOptionsBelow < SelectBoxList.DEFAULT_MINIMUM_VISIBLE_OPTIONS\n                    && maxVisibleOptionsAbove > maxVisibleOptionsBelow\n                    && this.options.length > maxVisibleOptionsBelow) {\n                    this._dropDownPosition = 1 /* AnchorPosition.ABOVE */;\n                    this.selectDropDownContainer.removeChild(this.selectDropDownListContainer);\n                    this.selectDropDownContainer.removeChild(this.selectionDetailsPane);\n                    this.selectDropDownContainer.appendChild(this.selectionDetailsPane);\n                    this.selectDropDownContainer.appendChild(this.selectDropDownListContainer);\n                    this.selectionDetailsPane.classList.remove('border-top');\n                    this.selectionDetailsPane.classList.add('border-bottom');\n                }\n                else {\n                    this._dropDownPosition = 0 /* AnchorPosition.BELOW */;\n                    this.selectDropDownContainer.removeChild(this.selectDropDownListContainer);\n                    this.selectDropDownContainer.removeChild(this.selectionDetailsPane);\n                    this.selectDropDownContainer.appendChild(this.selectDropDownListContainer);\n                    this.selectDropDownContainer.appendChild(this.selectionDetailsPane);\n                    this.selectionDetailsPane.classList.remove('border-bottom');\n                    this.selectionDetailsPane.classList.add('border-top');\n                }\n                // Do full layout on showSelectDropDown only\n                return true;\n            }\n            // Check if select out of viewport or cutting into status bar\n            if ((selectPosition.top + selectPosition.height) > (window.innerHeight - 22)\n                || selectPosition.top < SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN\n                || (this._dropDownPosition === 0 /* AnchorPosition.BELOW */ && maxVisibleOptionsBelow < 1)\n                || (this._dropDownPosition === 1 /* AnchorPosition.ABOVE */ && maxVisibleOptionsAbove < 1)) {\n                // Cannot properly layout, close and hide\n                this.hideSelectDropDown(true);\n                return false;\n            }\n            // SetUp list dimensions and layout - account for container padding\n            // Use position to check above or below available space\n            if (this._dropDownPosition === 0 /* AnchorPosition.BELOW */) {\n                if (this._isVisible && maxVisibleOptionsBelow + maxVisibleOptionsAbove < 1) {\n                    // If drop-down is visible, must be doing a DOM re-layout, hide since we don't fit\n                    // Hide drop-down, hide contextview, focus on parent select\n                    this.hideSelectDropDown(true);\n                    return false;\n                }\n                // Adjust list height to max from select bottom to margin (default/minBottomMargin)\n                if (minRequiredDropDownHeight > maxSelectDropDownHeightBelow) {\n                    listHeight = (maxVisibleOptionsBelow * this.getHeight());\n                }\n            }\n            else {\n                if (minRequiredDropDownHeight > maxSelectDropDownHeightAbove) {\n                    listHeight = (maxVisibleOptionsAbove * this.getHeight());\n                }\n            }\n            // Set adjusted list height and relayout\n            this.selectList.layout(listHeight);\n            this.selectList.domFocus();\n            // Finally set focus on selected item\n            if (this.selectList.length > 0) {\n                this.selectList.setFocus([this.selected || 0]);\n                this.selectList.reveal(this.selectList.getFocus()[0] || 0);\n            }\n            if (this._hasDetails) {\n                // Leave the selectDropDownContainer to size itself according to children (list + details) - #57447\n                this.selectList.getHTMLElement().style.height = (listHeight + verticalPadding) + 'px';\n                this.selectDropDownContainer.style.height = '';\n            }\n            else {\n                this.selectDropDownContainer.style.height = (listHeight + verticalPadding) + 'px';\n            }\n            this.updateDetail(this.selected);\n            this.selectDropDownContainer.style.width = selectOptimalWidth;\n            // Maintain focus outline on parent select as well as list container - tabindex for focus\n            this.selectDropDownListContainer.setAttribute('tabindex', '0');\n            this.selectElement.classList.add('synthetic-focus');\n            this.selectDropDownContainer.classList.add('synthetic-focus');\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    setWidthControlElement(container) {\n        let elementWidth = 0;\n        if (container) {\n            let longest = 0;\n            let longestLength = 0;\n            this.options.forEach((option, index) => {\n                const detailLength = !!option.detail ? option.detail.length : 0;\n                const rightDecoratorLength = !!option.decoratorRight ? option.decoratorRight.length : 0;\n                const len = option.text.length + detailLength + rightDecoratorLength;\n                if (len > longestLength) {\n                    longest = index;\n                    longestLength = len;\n                }\n            });\n            container.textContent = this.options[longest].text + (!!this.options[longest].decoratorRight ? (this.options[longest].decoratorRight + ' ') : '');\n            elementWidth = dom.getTotalWidth(container);\n        }\n        return elementWidth;\n    }\n    createSelectList(parent) {\n        // If we have already constructive list on open, skip\n        if (this.selectList) {\n            return;\n        }\n        // SetUp container for list\n        this.selectDropDownListContainer = dom.append(parent, $('.select-box-dropdown-list-container'));\n        this.listRenderer = new SelectListRenderer();\n        this.selectList = new List('SelectBoxCustom', this.selectDropDownListContainer, this, [this.listRenderer], {\n            useShadows: false,\n            verticalScrollMode: 3 /* ScrollbarVisibility.Visible */,\n            keyboardSupport: false,\n            mouseSupport: false,\n            accessibilityProvider: {\n                getAriaLabel: element => {\n                    let label = element.text;\n                    if (element.detail) {\n                        label += `. ${element.detail}`;\n                    }\n                    if (element.decoratorRight) {\n                        label += `. ${element.decoratorRight}`;\n                    }\n                    if (element.description) {\n                        label += `. ${element.description}`;\n                    }\n                    return label;\n                },\n                getWidgetAriaLabel: () => localize({ key: 'selectBox', comment: ['Behave like native select dropdown element.'] }, \"Select Box\"),\n                getRole: () => isMacintosh ? '' : 'option',\n                getWidgetRole: () => 'listbox'\n            }\n        });\n        if (this.selectBoxOptions.ariaLabel) {\n            this.selectList.ariaLabel = this.selectBoxOptions.ariaLabel;\n        }\n        // SetUp list keyboard controller - control navigation, disabled items, focus\n        const onKeyDown = this._register(new DomEmitter(this.selectDropDownListContainer, 'keydown'));\n        const onSelectDropDownKeyDown = Event.chain(onKeyDown.event, $ => $.filter(() => this.selectList.length > 0)\n            .map(e => new StandardKeyboardEvent(e)));\n        this._register(Event.chain(onSelectDropDownKeyDown, $ => $.filter(e => e.keyCode === 3 /* KeyCode.Enter */))(this.onEnter, this));\n        this._register(Event.chain(onSelectDropDownKeyDown, $ => $.filter(e => e.keyCode === 2 /* KeyCode.Tab */))(this.onEnter, this)); // Tab should behave the same as enter, #79339\n        this._register(Event.chain(onSelectDropDownKeyDown, $ => $.filter(e => e.keyCode === 9 /* KeyCode.Escape */))(this.onEscape, this));\n        this._register(Event.chain(onSelectDropDownKeyDown, $ => $.filter(e => e.keyCode === 16 /* KeyCode.UpArrow */))(this.onUpArrow, this));\n        this._register(Event.chain(onSelectDropDownKeyDown, $ => $.filter(e => e.keyCode === 18 /* KeyCode.DownArrow */))(this.onDownArrow, this));\n        this._register(Event.chain(onSelectDropDownKeyDown, $ => $.filter(e => e.keyCode === 12 /* KeyCode.PageDown */))(this.onPageDown, this));\n        this._register(Event.chain(onSelectDropDownKeyDown, $ => $.filter(e => e.keyCode === 11 /* KeyCode.PageUp */))(this.onPageUp, this));\n        this._register(Event.chain(onSelectDropDownKeyDown, $ => $.filter(e => e.keyCode === 14 /* KeyCode.Home */))(this.onHome, this));\n        this._register(Event.chain(onSelectDropDownKeyDown, $ => $.filter(e => e.keyCode === 13 /* KeyCode.End */))(this.onEnd, this));\n        this._register(Event.chain(onSelectDropDownKeyDown, $ => $.filter(e => (e.keyCode >= 21 /* KeyCode.Digit0 */ && e.keyCode <= 56 /* KeyCode.KeyZ */) || (e.keyCode >= 85 /* KeyCode.Semicolon */ && e.keyCode <= 113 /* KeyCode.NumpadDivide */)))(this.onCharacter, this));\n        // SetUp list mouse controller - control navigation, disabled items, focus\n        this._register(dom.addDisposableListener(this.selectList.getHTMLElement(), dom.EventType.POINTER_UP, e => this.onPointerUp(e)));\n        this._register(this.selectList.onMouseOver(e => typeof e.index !== 'undefined' && this.selectList.setFocus([e.index])));\n        this._register(this.selectList.onDidChangeFocus(e => this.onListFocus(e)));\n        this._register(dom.addDisposableListener(this.selectDropDownContainer, dom.EventType.FOCUS_OUT, e => {\n            if (!this._isVisible || dom.isAncestor(e.relatedTarget, this.selectDropDownContainer)) {\n                return;\n            }\n            this.onListBlur();\n        }));\n        this.selectList.getHTMLElement().setAttribute('aria-label', this.selectBoxOptions.ariaLabel || '');\n        this.selectList.getHTMLElement().setAttribute('aria-expanded', 'true');\n        this.styleList();\n    }\n    // List methods\n    // List mouse controller - active exit, select option, fire onDidSelect if change, return focus to parent select\n    // Also takes in touchend events\n    onPointerUp(e) {\n        if (!this.selectList.length) {\n            return;\n        }\n        dom.EventHelper.stop(e);\n        const target = e.target;\n        if (!target) {\n            return;\n        }\n        // Check our mouse event is on an option (not scrollbar)\n        if (target.classList.contains('slider')) {\n            return;\n        }\n        const listRowElement = target.closest('.monaco-list-row');\n        if (!listRowElement) {\n            return;\n        }\n        const index = Number(listRowElement.getAttribute('data-index'));\n        const disabled = listRowElement.classList.contains('option-disabled');\n        // Ignore mouse selection of disabled options\n        if (index >= 0 && index < this.options.length && !disabled) {\n            this.selected = index;\n            this.select(this.selected);\n            this.selectList.setFocus([this.selected]);\n            this.selectList.reveal(this.selectList.getFocus()[0]);\n            // Only fire if selection change\n            if (this.selected !== this._currentSelection) {\n                // Set current = selected\n                this._currentSelection = this.selected;\n                this._onDidSelect.fire({\n                    index: this.selectElement.selectedIndex,\n                    selected: this.options[this.selected].text\n                });\n                if (!!this.options[this.selected] && !!this.options[this.selected].text) {\n                    this.selectElement.title = this.options[this.selected].text;\n                }\n            }\n            this.hideSelectDropDown(true);\n        }\n    }\n    // List Exit - passive - implicit no selection change, hide drop-down\n    onListBlur() {\n        if (this._sticky) {\n            return;\n        }\n        if (this.selected !== this._currentSelection) {\n            // Reset selected to current if no change\n            this.select(this._currentSelection);\n        }\n        this.hideSelectDropDown(false);\n    }\n    renderDescriptionMarkdown(text, actionHandler) {\n        const cleanRenderedMarkdown = (element) => {\n            for (let i = 0; i < element.childNodes.length; i++) {\n                const child = element.childNodes.item(i);\n                const tagName = child.tagName && child.tagName.toLowerCase();\n                if (tagName === 'img') {\n                    element.removeChild(child);\n                }\n                else {\n                    cleanRenderedMarkdown(child);\n                }\n            }\n        };\n        const rendered = renderMarkdown({ value: text, supportThemeIcons: true }, { actionHandler });\n        rendered.element.classList.add('select-box-description-markdown');\n        cleanRenderedMarkdown(rendered.element);\n        return rendered.element;\n    }\n    // List Focus Change - passive - update details pane with newly focused element's data\n    onListFocus(e) {\n        // Skip during initial layout\n        if (!this._isVisible || !this._hasDetails) {\n            return;\n        }\n        this.updateDetail(e.indexes[0]);\n    }\n    updateDetail(selectedIndex) {\n        var _a, _b;\n        this.selectionDetailsPane.innerText = '';\n        const option = this.options[selectedIndex];\n        const description = (_a = option === null || option === void 0 ? void 0 : option.description) !== null && _a !== void 0 ? _a : '';\n        const descriptionIsMarkdown = (_b = option === null || option === void 0 ? void 0 : option.descriptionIsMarkdown) !== null && _b !== void 0 ? _b : false;\n        if (description) {\n            if (descriptionIsMarkdown) {\n                const actionHandler = option.descriptionMarkdownActionHandler;\n                this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(description, actionHandler));\n            }\n            else {\n                this.selectionDetailsPane.innerText = description;\n            }\n            this.selectionDetailsPane.style.display = 'block';\n        }\n        else {\n            this.selectionDetailsPane.style.display = 'none';\n        }\n        // Avoid recursion\n        this._skipLayout = true;\n        this.contextViewProvider.layout();\n        this._skipLayout = false;\n    }\n    // List keyboard controller\n    // List exit - active - hide ContextView dropdown, reset selection, return focus to parent select\n    onEscape(e) {\n        dom.EventHelper.stop(e);\n        // Reset selection to value when opened\n        this.select(this._currentSelection);\n        this.hideSelectDropDown(true);\n    }\n    // List exit - active - hide ContextView dropdown, return focus to parent select, fire onDidSelect if change\n    onEnter(e) {\n        dom.EventHelper.stop(e);\n        // Only fire if selection change\n        if (this.selected !== this._currentSelection) {\n            this._currentSelection = this.selected;\n            this._onDidSelect.fire({\n                index: this.selectElement.selectedIndex,\n                selected: this.options[this.selected].text\n            });\n            if (!!this.options[this.selected] && !!this.options[this.selected].text) {\n                this.selectElement.title = this.options[this.selected].text;\n            }\n        }\n        this.hideSelectDropDown(true);\n    }\n    // List navigation - have to handle a disabled option (jump over)\n    onDownArrow(e) {\n        if (this.selected < this.options.length - 1) {\n            dom.EventHelper.stop(e, true);\n            // Skip disabled options\n            const nextOptionDisabled = this.options[this.selected + 1].isDisabled;\n            if (nextOptionDisabled && this.options.length > this.selected + 2) {\n                this.selected += 2;\n            }\n            else if (nextOptionDisabled) {\n                return;\n            }\n            else {\n                this.selected++;\n            }\n            // Set focus/selection - only fire event when closing drop-down or on blur\n            this.select(this.selected);\n            this.selectList.setFocus([this.selected]);\n            this.selectList.reveal(this.selectList.getFocus()[0]);\n        }\n    }\n    onUpArrow(e) {\n        if (this.selected > 0) {\n            dom.EventHelper.stop(e, true);\n            // Skip disabled options\n            const previousOptionDisabled = this.options[this.selected - 1].isDisabled;\n            if (previousOptionDisabled && this.selected > 1) {\n                this.selected -= 2;\n            }\n            else {\n                this.selected--;\n            }\n            // Set focus/selection - only fire event when closing drop-down or on blur\n            this.select(this.selected);\n            this.selectList.setFocus([this.selected]);\n            this.selectList.reveal(this.selectList.getFocus()[0]);\n        }\n    }\n    onPageUp(e) {\n        dom.EventHelper.stop(e);\n        this.selectList.focusPreviousPage();\n        // Allow scrolling to settle\n        setTimeout(() => {\n            this.selected = this.selectList.getFocus()[0];\n            // Shift selection down if we land on a disabled option\n            if (this.options[this.selected].isDisabled && this.selected < this.options.length - 1) {\n                this.selected++;\n                this.selectList.setFocus([this.selected]);\n            }\n            this.selectList.reveal(this.selected);\n            this.select(this.selected);\n        }, 1);\n    }\n    onPageDown(e) {\n        dom.EventHelper.stop(e);\n        this.selectList.focusNextPage();\n        // Allow scrolling to settle\n        setTimeout(() => {\n            this.selected = this.selectList.getFocus()[0];\n            // Shift selection up if we land on a disabled option\n            if (this.options[this.selected].isDisabled && this.selected > 0) {\n                this.selected--;\n                this.selectList.setFocus([this.selected]);\n            }\n            this.selectList.reveal(this.selected);\n            this.select(this.selected);\n        }, 1);\n    }\n    onHome(e) {\n        dom.EventHelper.stop(e);\n        if (this.options.length < 2) {\n            return;\n        }\n        this.selected = 0;\n        if (this.options[this.selected].isDisabled && this.selected > 1) {\n            this.selected++;\n        }\n        this.selectList.setFocus([this.selected]);\n        this.selectList.reveal(this.selected);\n        this.select(this.selected);\n    }\n    onEnd(e) {\n        dom.EventHelper.stop(e);\n        if (this.options.length < 2) {\n            return;\n        }\n        this.selected = this.options.length - 1;\n        if (this.options[this.selected].isDisabled && this.selected > 1) {\n            this.selected--;\n        }\n        this.selectList.setFocus([this.selected]);\n        this.selectList.reveal(this.selected);\n        this.select(this.selected);\n    }\n    // Mimic option first character navigation of native select\n    onCharacter(e) {\n        const ch = KeyCodeUtils.toString(e.keyCode);\n        let optionIndex = -1;\n        for (let i = 0; i < this.options.length - 1; i++) {\n            optionIndex = (i + this.selected + 1) % this.options.length;\n            if (this.options[optionIndex].text.charAt(0).toUpperCase() === ch && !this.options[optionIndex].isDisabled) {\n                this.select(optionIndex);\n                this.selectList.setFocus([optionIndex]);\n                this.selectList.reveal(this.selectList.getFocus()[0]);\n                dom.EventHelper.stop(e);\n                break;\n            }\n        }\n    }\n    dispose() {\n        this.hideSelectDropDown(false);\n        super.dispose();\n    }\n}\nSelectBoxList.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN = 32;\nSelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN = 2;\nSelectBoxList.DEFAULT_MINIMUM_VISIBLE_OPTIONS = 3;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { EventType, Gesture } from '../../touch.js';\nimport * as arrays from '../../../common/arrays.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { isMacintosh } from '../../../common/platform.js';\nexport class SelectBoxNative extends Disposable {\n    constructor(options, selected, styles, selectBoxOptions) {\n        super();\n        this.selected = 0;\n        this.selectBoxOptions = selectBoxOptions || Object.create(null);\n        this.options = [];\n        this.selectElement = document.createElement('select');\n        this.selectElement.className = 'monaco-select-box';\n        if (typeof this.selectBoxOptions.ariaLabel === 'string') {\n            this.selectElement.setAttribute('aria-label', this.selectBoxOptions.ariaLabel);\n        }\n        if (typeof this.selectBoxOptions.ariaDescription === 'string') {\n            this.selectElement.setAttribute('aria-description', this.selectBoxOptions.ariaDescription);\n        }\n        this._onDidSelect = this._register(new Emitter());\n        this.styles = styles;\n        this.registerListeners();\n        this.setOptions(options, selected);\n    }\n    registerListeners() {\n        this._register(Gesture.addTarget(this.selectElement));\n        [EventType.Tap].forEach(eventType => {\n            this._register(dom.addDisposableListener(this.selectElement, eventType, (e) => {\n                this.selectElement.focus();\n            }));\n        });\n        this._register(dom.addStandardDisposableListener(this.selectElement, 'click', (e) => {\n            dom.EventHelper.stop(e, true);\n        }));\n        this._register(dom.addStandardDisposableListener(this.selectElement, 'change', (e) => {\n            this.selectElement.title = e.target.value;\n            this._onDidSelect.fire({\n                index: e.target.selectedIndex,\n                selected: e.target.value\n            });\n        }));\n        this._register(dom.addStandardDisposableListener(this.selectElement, 'keydown', (e) => {\n            let showSelect = false;\n            if (isMacintosh) {\n                if (e.keyCode === 18 /* KeyCode.DownArrow */ || e.keyCode === 16 /* KeyCode.UpArrow */ || e.keyCode === 10 /* KeyCode.Space */) {\n                    showSelect = true;\n                }\n            }\n            else {\n                if (e.keyCode === 18 /* KeyCode.DownArrow */ && e.altKey || e.keyCode === 10 /* KeyCode.Space */ || e.keyCode === 3 /* KeyCode.Enter */) {\n                    showSelect = true;\n                }\n            }\n            if (showSelect) {\n                // Space, Enter, is used to expand select box, do not propagate it (prevent action bar action run)\n                e.stopPropagation();\n            }\n        }));\n    }\n    get onDidSelect() {\n        return this._onDidSelect.event;\n    }\n    setOptions(options, selected) {\n        if (!this.options || !arrays.equals(this.options, options)) {\n            this.options = options;\n            this.selectElement.options.length = 0;\n            this.options.forEach((option, index) => {\n                this.selectElement.add(this.createOption(option.text, index, option.isDisabled));\n            });\n        }\n        if (selected !== undefined) {\n            this.select(selected);\n        }\n    }\n    select(index) {\n        if (this.options.length === 0) {\n            this.selected = 0;\n        }\n        else if (index >= 0 && index < this.options.length) {\n            this.selected = index;\n        }\n        else if (index > this.options.length - 1) {\n            // Adjust index to end of list\n            // This could make client out of sync with the select\n            this.select(this.options.length - 1);\n        }\n        else if (this.selected < 0) {\n            this.selected = 0;\n        }\n        this.selectElement.selectedIndex = this.selected;\n        if ((this.selected < this.options.length) && typeof this.options[this.selected].text === 'string') {\n            this.selectElement.title = this.options[this.selected].text;\n        }\n        else {\n            this.selectElement.title = '';\n        }\n    }\n    focus() {\n        if (this.selectElement) {\n            this.selectElement.tabIndex = 0;\n            this.selectElement.focus();\n        }\n    }\n    blur() {\n        if (this.selectElement) {\n            this.selectElement.tabIndex = -1;\n            this.selectElement.blur();\n        }\n    }\n    setFocusable(focusable) {\n        this.selectElement.tabIndex = focusable ? 0 : -1;\n    }\n    render(container) {\n        container.classList.add('select-container');\n        container.appendChild(this.selectElement);\n        this.setOptions(this.options, this.selected);\n        this.applyStyles();\n    }\n    applyStyles() {\n        var _a, _b, _c;\n        // Style native select\n        if (this.selectElement) {\n            this.selectElement.style.backgroundColor = (_a = this.styles.selectBackground) !== null && _a !== void 0 ? _a : '';\n            this.selectElement.style.color = (_b = this.styles.selectForeground) !== null && _b !== void 0 ? _b : '';\n            this.selectElement.style.borderColor = (_c = this.styles.selectBorder) !== null && _c !== void 0 ? _c : '';\n        }\n    }\n    createOption(value, index, disabled) {\n        const option = document.createElement('option');\n        option.value = value;\n        option.text = value;\n        option.disabled = !!disabled;\n        return option;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { SelectBoxList } from './selectBoxCustom.js';\nimport { SelectBoxNative } from './selectBoxNative.js';\nimport { Widget } from '../widget.js';\nimport { isMacintosh } from '../../../common/platform.js';\nimport './selectBox.css';\nexport class SelectBox extends Widget {\n    constructor(options, selected, contextViewProvider, styles, selectBoxOptions) {\n        super();\n        // Default to native SelectBox for OSX unless overridden\n        if (isMacintosh && !(selectBoxOptions === null || selectBoxOptions === void 0 ? void 0 : selectBoxOptions.useCustomDrawn)) {\n            this.selectBoxDelegate = new SelectBoxNative(options, selected, styles, selectBoxOptions);\n        }\n        else {\n            this.selectBoxDelegate = new SelectBoxList(options, selected, contextViewProvider, styles, selectBoxOptions);\n        }\n        this._register(this.selectBoxDelegate);\n    }\n    // Public SelectBox Methods - routed through delegate interface\n    get onDidSelect() {\n        return this.selectBoxDelegate.onDidSelect;\n    }\n    setOptions(options, selected) {\n        this.selectBoxDelegate.setOptions(options, selected);\n    }\n    select(index) {\n        this.selectBoxDelegate.select(index);\n    }\n    focus() {\n        this.selectBoxDelegate.focus();\n    }\n    blur() {\n        this.selectBoxDelegate.blur();\n    }\n    setFocusable(focusable) {\n        this.selectBoxDelegate.setFocusable(focusable);\n    }\n    render(container) {\n        this.selectBoxDelegate.render(container);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, append, scheduleAtNextAnimationFrame } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { Sash } from '../sash/sash.js';\nimport { SmoothScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { pushToEnd, pushToStart, range } from '../../../common/arrays.js';\nimport { Color } from '../../../common/color.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { combinedDisposable, Disposable, dispose, toDisposable } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport * as types from '../../../common/types.js';\nimport './splitview.css';\nconst defaultStyles = {\n    separatorBorder: Color.transparent\n};\nclass ViewItem {\n    set size(size) {\n        this._size = size;\n    }\n    get size() {\n        return this._size;\n    }\n    get visible() {\n        return typeof this._cachedVisibleSize === 'undefined';\n    }\n    setVisible(visible, size) {\n        var _a, _b;\n        if (visible === this.visible) {\n            return;\n        }\n        if (visible) {\n            this.size = clamp(this._cachedVisibleSize, this.viewMinimumSize, this.viewMaximumSize);\n            this._cachedVisibleSize = undefined;\n        }\n        else {\n            this._cachedVisibleSize = typeof size === 'number' ? size : this.size;\n            this.size = 0;\n        }\n        this.container.classList.toggle('visible', visible);\n        (_b = (_a = this.view).setVisible) === null || _b === void 0 ? void 0 : _b.call(_a, visible);\n    }\n    get minimumSize() { return this.visible ? this.view.minimumSize : 0; }\n    get viewMinimumSize() { return this.view.minimumSize; }\n    get maximumSize() { return this.visible ? this.view.maximumSize : 0; }\n    get viewMaximumSize() { return this.view.maximumSize; }\n    get priority() { return this.view.priority; }\n    get proportionalLayout() { var _a; return (_a = this.view.proportionalLayout) !== null && _a !== void 0 ? _a : true; }\n    get snap() { return !!this.view.snap; }\n    set enabled(enabled) {\n        this.container.style.pointerEvents = enabled ? '' : 'none';\n    }\n    constructor(container, view, size, disposable) {\n        this.container = container;\n        this.view = view;\n        this.disposable = disposable;\n        this._cachedVisibleSize = undefined;\n        if (typeof size === 'number') {\n            this._size = size;\n            this._cachedVisibleSize = undefined;\n            container.classList.add('visible');\n        }\n        else {\n            this._size = 0;\n            this._cachedVisibleSize = size.cachedVisibleSize;\n        }\n    }\n    layout(offset, layoutContext) {\n        this.layoutContainer(offset);\n        this.view.layout(this.size, offset, layoutContext);\n    }\n    dispose() {\n        this.disposable.dispose();\n    }\n}\nclass VerticalViewItem extends ViewItem {\n    layoutContainer(offset) {\n        this.container.style.top = `${offset}px`;\n        this.container.style.height = `${this.size}px`;\n    }\n}\nclass HorizontalViewItem extends ViewItem {\n    layoutContainer(offset) {\n        this.container.style.left = `${offset}px`;\n        this.container.style.width = `${this.size}px`;\n    }\n}\nvar State;\n(function (State) {\n    State[State[\"Idle\"] = 0] = \"Idle\";\n    State[State[\"Busy\"] = 1] = \"Busy\";\n})(State || (State = {}));\nexport var Sizing;\n(function (Sizing) {\n    /**\n     * When adding or removing views, distribute the delta space among\n     * all other views.\n     */\n    Sizing.Distribute = { type: 'distribute' };\n    /**\n     * When adding or removing views, split the delta space with another\n     * specific view, indexed by the provided `index`.\n     */\n    function Split(index) { return { type: 'split', index }; }\n    Sizing.Split = Split;\n    /**\n     * When adding a view, use DistributeSizing when all pre-existing views are\n     * distributed evenly, otherwise use SplitSizing.\n     */\n    function Auto(index) { return { type: 'auto', index }; }\n    Sizing.Auto = Auto;\n    /**\n     * When adding or removing views, assume the view is invisible.\n     */\n    function Invisible(cachedVisibleSize) { return { type: 'invisible', cachedVisibleSize }; }\n    Sizing.Invisible = Invisible;\n})(Sizing || (Sizing = {}));\n/**\n * The {@link SplitView} is the UI component which implements a one dimensional\n * flex-like layout algorithm for a collection of {@link IView} instances, which\n * are essentially HTMLElement instances with the following size constraints:\n *\n * - {@link IView.minimumSize}\n * - {@link IView.maximumSize}\n * - {@link IView.priority}\n * - {@link IView.snap}\n *\n * In case the SplitView doesn't have enough size to fit all views, it will overflow\n * its content with a scrollbar.\n *\n * In between each pair of views there will be a {@link Sash} allowing the user\n * to resize the views, making sure the constraints are respected.\n *\n * An optional {@link TLayoutContext layout context type} may be used in order to\n * pass along layout contextual data from the {@link SplitView.layout} method down\n * to each view's {@link IView.layout} calls.\n *\n * Features:\n * - Flex-like layout algorithm\n * - Snap support\n * - Orthogonal sash support, for corner sashes\n * - View hide/show support\n * - View swap/move support\n * - Alt key modifier behavior, macOS style\n */\nexport class SplitView extends Disposable {\n    get orthogonalStartSash() { return this._orthogonalStartSash; }\n    get orthogonalEndSash() { return this._orthogonalEndSash; }\n    get startSnappingEnabled() { return this._startSnappingEnabled; }\n    get endSnappingEnabled() { return this._endSnappingEnabled; }\n    /**\n     * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n     * located at the left- or top-most side of the SplitView.\n     * Corner sashes will be created automatically at the intersections.\n     */\n    set orthogonalStartSash(sash) {\n        for (const sashItem of this.sashItems) {\n            sashItem.sash.orthogonalStartSash = sash;\n        }\n        this._orthogonalStartSash = sash;\n    }\n    /**\n     * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n     * located at the right- or bottom-most side of the SplitView.\n     * Corner sashes will be created automatically at the intersections.\n     */\n    set orthogonalEndSash(sash) {\n        for (const sashItem of this.sashItems) {\n            sashItem.sash.orthogonalEndSash = sash;\n        }\n        this._orthogonalEndSash = sash;\n    }\n    /**\n     * Enable/disable snapping at the beginning of this {@link SplitView}.\n     */\n    set startSnappingEnabled(startSnappingEnabled) {\n        if (this._startSnappingEnabled === startSnappingEnabled) {\n            return;\n        }\n        this._startSnappingEnabled = startSnappingEnabled;\n        this.updateSashEnablement();\n    }\n    /**\n     * Enable/disable snapping at the end of this {@link SplitView}.\n     */\n    set endSnappingEnabled(endSnappingEnabled) {\n        if (this._endSnappingEnabled === endSnappingEnabled) {\n            return;\n        }\n        this._endSnappingEnabled = endSnappingEnabled;\n        this.updateSashEnablement();\n    }\n    /**\n     * Create a new {@link SplitView} instance.\n     */\n    constructor(container, options = {}) {\n        var _a, _b, _c, _d, _e;\n        super();\n        this.size = 0;\n        this.contentSize = 0;\n        this.proportions = undefined;\n        this.viewItems = [];\n        this.sashItems = []; // used in tests\n        this.state = State.Idle;\n        this._onDidSashChange = this._register(new Emitter());\n        this._onDidSashReset = this._register(new Emitter());\n        this._startSnappingEnabled = true;\n        this._endSnappingEnabled = true;\n        /**\n         * Fires whenever the user resizes a {@link Sash sash}.\n         */\n        this.onDidSashChange = this._onDidSashChange.event;\n        /**\n         * Fires whenever the user double clicks a {@link Sash sash}.\n         */\n        this.onDidSashReset = this._onDidSashReset.event;\n        this.orientation = (_a = options.orientation) !== null && _a !== void 0 ? _a : 0 /* Orientation.VERTICAL */;\n        this.inverseAltBehavior = (_b = options.inverseAltBehavior) !== null && _b !== void 0 ? _b : false;\n        this.proportionalLayout = (_c = options.proportionalLayout) !== null && _c !== void 0 ? _c : true;\n        this.getSashOrthogonalSize = options.getSashOrthogonalSize;\n        this.el = document.createElement('div');\n        this.el.classList.add('monaco-split-view2');\n        this.el.classList.add(this.orientation === 0 /* Orientation.VERTICAL */ ? 'vertical' : 'horizontal');\n        container.appendChild(this.el);\n        this.sashContainer = append(this.el, $('.sash-container'));\n        this.viewContainer = $('.split-view-container');\n        this.scrollable = this._register(new Scrollable({\n            forceIntegerValues: true,\n            smoothScrollDuration: 125,\n            scheduleAtNextAnimationFrame\n        }));\n        this.scrollableElement = this._register(new SmoothScrollableElement(this.viewContainer, {\n            vertical: this.orientation === 0 /* Orientation.VERTICAL */ ? ((_d = options.scrollbarVisibility) !== null && _d !== void 0 ? _d : 1 /* ScrollbarVisibility.Auto */) : 2 /* ScrollbarVisibility.Hidden */,\n            horizontal: this.orientation === 1 /* Orientation.HORIZONTAL */ ? ((_e = options.scrollbarVisibility) !== null && _e !== void 0 ? _e : 1 /* ScrollbarVisibility.Auto */) : 2 /* ScrollbarVisibility.Hidden */\n        }, this.scrollable));\n        // https://github.com/microsoft/vscode/issues/157737\n        const onDidScrollViewContainer = this._register(new DomEmitter(this.viewContainer, 'scroll')).event;\n        this._register(onDidScrollViewContainer(_ => {\n            const position = this.scrollableElement.getScrollPosition();\n            const scrollLeft = Math.abs(this.viewContainer.scrollLeft - position.scrollLeft) <= 1 ? undefined : this.viewContainer.scrollLeft;\n            const scrollTop = Math.abs(this.viewContainer.scrollTop - position.scrollTop) <= 1 ? undefined : this.viewContainer.scrollTop;\n            if (scrollLeft !== undefined || scrollTop !== undefined) {\n                this.scrollableElement.setScrollPosition({ scrollLeft, scrollTop });\n            }\n        }));\n        this.onDidScroll = this.scrollableElement.onScroll;\n        this._register(this.onDidScroll(e => {\n            if (e.scrollTopChanged) {\n                this.viewContainer.scrollTop = e.scrollTop;\n            }\n            if (e.scrollLeftChanged) {\n                this.viewContainer.scrollLeft = e.scrollLeft;\n            }\n        }));\n        append(this.el, this.scrollableElement.getDomNode());\n        this.style(options.styles || defaultStyles);\n        // We have an existing set of view, add them now\n        if (options.descriptor) {\n            this.size = options.descriptor.size;\n            options.descriptor.views.forEach((viewDescriptor, index) => {\n                const sizing = types.isUndefined(viewDescriptor.visible) || viewDescriptor.visible ? viewDescriptor.size : { type: 'invisible', cachedVisibleSize: viewDescriptor.size };\n                const view = viewDescriptor.view;\n                this.doAddView(view, sizing, index, true);\n            });\n            // Initialize content size and proportions for first layout\n            this.contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n            this.saveProportions();\n        }\n    }\n    style(styles) {\n        if (styles.separatorBorder.isTransparent()) {\n            this.el.classList.remove('separator-border');\n            this.el.style.removeProperty('--separator-border');\n        }\n        else {\n            this.el.classList.add('separator-border');\n            this.el.style.setProperty('--separator-border', styles.separatorBorder.toString());\n        }\n    }\n    /**\n     * Add a {@link IView view} to this {@link SplitView}.\n     *\n     * @param view The view to add.\n     * @param size Either a fixed size, or a dynamic {@link Sizing} strategy.\n     * @param index The index to insert the view on.\n     * @param skipLayout Whether layout should be skipped.\n     */\n    addView(view, size, index = this.viewItems.length, skipLayout) {\n        this.doAddView(view, size, index, skipLayout);\n    }\n    /**\n     * Layout the {@link SplitView}.\n     *\n     * @param size The entire size of the {@link SplitView}.\n     * @param layoutContext An optional layout context to pass along to {@link IView views}.\n     */\n    layout(size, layoutContext) {\n        const previousSize = Math.max(this.size, this.contentSize);\n        this.size = size;\n        this.layoutContext = layoutContext;\n        if (!this.proportions) {\n            const indexes = range(this.viewItems.length);\n            const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n            const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n            this.resize(this.viewItems.length - 1, size - previousSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n        }\n        else {\n            let total = 0;\n            for (let i = 0; i < this.viewItems.length; i++) {\n                const item = this.viewItems[i];\n                const proportion = this.proportions[i];\n                if (typeof proportion === 'number') {\n                    total += proportion;\n                }\n                else {\n                    size -= item.size;\n                }\n            }\n            for (let i = 0; i < this.viewItems.length; i++) {\n                const item = this.viewItems[i];\n                const proportion = this.proportions[i];\n                if (typeof proportion === 'number') {\n                    item.size = clamp(Math.round(proportion * size / total), item.minimumSize, item.maximumSize);\n                }\n            }\n        }\n        this.distributeEmptySpace();\n        this.layoutViews();\n    }\n    saveProportions() {\n        if (this.proportionalLayout && this.contentSize > 0) {\n            this.proportions = this.viewItems.map(i => i.proportionalLayout ? i.size / this.contentSize : undefined);\n        }\n    }\n    onSashStart({ sash, start, alt }) {\n        for (const item of this.viewItems) {\n            item.enabled = false;\n        }\n        const index = this.sashItems.findIndex(item => item.sash === sash);\n        // This way, we can press Alt while we resize a sash, macOS style!\n        const disposable = combinedDisposable(addDisposableListener(document.body, 'keydown', e => resetSashDragState(this.sashDragState.current, e.altKey)), addDisposableListener(document.body, 'keyup', () => resetSashDragState(this.sashDragState.current, false)));\n        const resetSashDragState = (start, alt) => {\n            const sizes = this.viewItems.map(i => i.size);\n            let minDelta = Number.NEGATIVE_INFINITY;\n            let maxDelta = Number.POSITIVE_INFINITY;\n            if (this.inverseAltBehavior) {\n                alt = !alt;\n            }\n            if (alt) {\n                // When we're using the last sash with Alt, we're resizing\n                // the view to the left/up, instead of right/down as usual\n                // Thus, we must do the inverse of the usual\n                const isLastSash = index === this.sashItems.length - 1;\n                if (isLastSash) {\n                    const viewItem = this.viewItems[index];\n                    minDelta = (viewItem.minimumSize - viewItem.size) / 2;\n                    maxDelta = (viewItem.maximumSize - viewItem.size) / 2;\n                }\n                else {\n                    const viewItem = this.viewItems[index + 1];\n                    minDelta = (viewItem.size - viewItem.maximumSize) / 2;\n                    maxDelta = (viewItem.size - viewItem.minimumSize) / 2;\n                }\n            }\n            let snapBefore;\n            let snapAfter;\n            if (!alt) {\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n                const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].viewMaximumSize - sizes[i]), 0);\n                const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n                const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].viewMaximumSize), 0);\n                const minDelta = Math.max(minDeltaUp, minDeltaDown);\n                const maxDelta = Math.min(maxDeltaDown, maxDeltaUp);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                if (typeof snapBeforeIndex === 'number') {\n                    const viewItem = this.viewItems[snapBeforeIndex];\n                    const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n                    snapBefore = {\n                        index: snapBeforeIndex,\n                        limitDelta: viewItem.visible ? minDelta - halfSize : minDelta + halfSize,\n                        size: viewItem.size\n                    };\n                }\n                if (typeof snapAfterIndex === 'number') {\n                    const viewItem = this.viewItems[snapAfterIndex];\n                    const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n                    snapAfter = {\n                        index: snapAfterIndex,\n                        limitDelta: viewItem.visible ? maxDelta + halfSize : maxDelta - halfSize,\n                        size: viewItem.size\n                    };\n                }\n            }\n            this.sashDragState = { start, current: start, index, sizes, minDelta, maxDelta, alt, snapBefore, snapAfter, disposable };\n        };\n        resetSashDragState(start, alt);\n    }\n    onSashChange({ current }) {\n        const { index, start, sizes, alt, minDelta, maxDelta, snapBefore, snapAfter } = this.sashDragState;\n        this.sashDragState.current = current;\n        const delta = current - start;\n        const newDelta = this.resize(index, delta, sizes, undefined, undefined, minDelta, maxDelta, snapBefore, snapAfter);\n        if (alt) {\n            const isLastSash = index === this.sashItems.length - 1;\n            const newSizes = this.viewItems.map(i => i.size);\n            const viewItemIndex = isLastSash ? index : index + 1;\n            const viewItem = this.viewItems[viewItemIndex];\n            const newMinDelta = viewItem.size - viewItem.maximumSize;\n            const newMaxDelta = viewItem.size - viewItem.minimumSize;\n            const resizeIndex = isLastSash ? index - 1 : index + 1;\n            this.resize(resizeIndex, -newDelta, newSizes, undefined, undefined, newMinDelta, newMaxDelta);\n        }\n        this.distributeEmptySpace();\n        this.layoutViews();\n    }\n    onSashEnd(index) {\n        this._onDidSashChange.fire(index);\n        this.sashDragState.disposable.dispose();\n        this.saveProportions();\n        for (const item of this.viewItems) {\n            item.enabled = true;\n        }\n    }\n    onViewChange(item, size) {\n        const index = this.viewItems.indexOf(item);\n        if (index < 0 || index >= this.viewItems.length) {\n            return;\n        }\n        size = typeof size === 'number' ? size : item.size;\n        size = clamp(size, item.minimumSize, item.maximumSize);\n        if (this.inverseAltBehavior && index > 0) {\n            // In this case, we want the view to grow or shrink both sides equally\n            // so we just resize the \"left\" side by half and let `resize` do the clamping magic\n            this.resize(index - 1, Math.floor((item.size - size) / 2));\n            this.distributeEmptySpace();\n            this.layoutViews();\n        }\n        else {\n            item.size = size;\n            this.relayout([index], undefined);\n        }\n    }\n    /**\n     * Resize a {@link IView view} within the {@link SplitView}.\n     *\n     * @param index The {@link IView view} index.\n     * @param size The {@link IView view} size.\n     */\n    resizeView(index, size) {\n        if (this.state !== State.Idle) {\n            throw new Error('Cant modify splitview');\n        }\n        this.state = State.Busy;\n        if (index < 0 || index >= this.viewItems.length) {\n            return;\n        }\n        const indexes = range(this.viewItems.length).filter(i => i !== index);\n        const lowPriorityIndexes = [...indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */), index];\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        const item = this.viewItems[index];\n        size = Math.round(size);\n        size = clamp(size, item.minimumSize, Math.min(item.maximumSize, this.size));\n        item.size = size;\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\n        this.state = State.Idle;\n    }\n    /**\n     * Distribute the entire {@link SplitView} size among all {@link IView views}.\n     */\n    distributeViewSizes() {\n        const flexibleViewItems = [];\n        let flexibleSize = 0;\n        for (const item of this.viewItems) {\n            if (item.maximumSize - item.minimumSize > 0) {\n                flexibleViewItems.push(item);\n                flexibleSize += item.size;\n            }\n        }\n        const size = Math.floor(flexibleSize / flexibleViewItems.length);\n        for (const item of flexibleViewItems) {\n            item.size = clamp(size, item.minimumSize, item.maximumSize);\n        }\n        const indexes = range(this.viewItems.length);\n        const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\n    }\n    /**\n     * Returns the size of a {@link IView view}.\n     */\n    getViewSize(index) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return -1;\n        }\n        return this.viewItems[index].size;\n    }\n    doAddView(view, size, index = this.viewItems.length, skipLayout) {\n        if (this.state !== State.Idle) {\n            throw new Error('Cant modify splitview');\n        }\n        this.state = State.Busy;\n        // Add view\n        const container = $('.split-view-view');\n        if (index === this.viewItems.length) {\n            this.viewContainer.appendChild(container);\n        }\n        else {\n            this.viewContainer.insertBefore(container, this.viewContainer.children.item(index));\n        }\n        const onChangeDisposable = view.onDidChange(size => this.onViewChange(item, size));\n        const containerDisposable = toDisposable(() => this.viewContainer.removeChild(container));\n        const disposable = combinedDisposable(onChangeDisposable, containerDisposable);\n        let viewSize;\n        if (typeof size === 'number') {\n            viewSize = size;\n        }\n        else {\n            if (size.type === 'auto') {\n                if (this.areViewsDistributed()) {\n                    size = { type: 'distribute' };\n                }\n                else {\n                    size = { type: 'split', index: size.index };\n                }\n            }\n            if (size.type === 'split') {\n                viewSize = this.getViewSize(size.index) / 2;\n            }\n            else if (size.type === 'invisible') {\n                viewSize = { cachedVisibleSize: size.cachedVisibleSize };\n            }\n            else {\n                viewSize = view.minimumSize;\n            }\n        }\n        const item = this.orientation === 0 /* Orientation.VERTICAL */\n            ? new VerticalViewItem(container, view, viewSize, disposable)\n            : new HorizontalViewItem(container, view, viewSize, disposable);\n        this.viewItems.splice(index, 0, item);\n        // Add sash\n        if (this.viewItems.length > 1) {\n            const opts = { orthogonalStartSash: this.orthogonalStartSash, orthogonalEndSash: this.orthogonalEndSash };\n            const sash = this.orientation === 0 /* Orientation.VERTICAL */\n                ? new Sash(this.sashContainer, { getHorizontalSashTop: s => this.getSashPosition(s), getHorizontalSashWidth: this.getSashOrthogonalSize }, Object.assign(Object.assign({}, opts), { orientation: 1 /* Orientation.HORIZONTAL */ }))\n                : new Sash(this.sashContainer, { getVerticalSashLeft: s => this.getSashPosition(s), getVerticalSashHeight: this.getSashOrthogonalSize }, Object.assign(Object.assign({}, opts), { orientation: 0 /* Orientation.VERTICAL */ }));\n            const sashEventMapper = this.orientation === 0 /* Orientation.VERTICAL */\n                ? (e) => ({ sash, start: e.startY, current: e.currentY, alt: e.altKey })\n                : (e) => ({ sash, start: e.startX, current: e.currentX, alt: e.altKey });\n            const onStart = Event.map(sash.onDidStart, sashEventMapper);\n            const onStartDisposable = onStart(this.onSashStart, this);\n            const onChange = Event.map(sash.onDidChange, sashEventMapper);\n            const onChangeDisposable = onChange(this.onSashChange, this);\n            const onEnd = Event.map(sash.onDidEnd, () => this.sashItems.findIndex(item => item.sash === sash));\n            const onEndDisposable = onEnd(this.onSashEnd, this);\n            const onDidResetDisposable = sash.onDidReset(() => {\n                const index = this.sashItems.findIndex(item => item.sash === sash);\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                if (typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible) {\n                    return;\n                }\n                if (typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible) {\n                    return;\n                }\n                this._onDidSashReset.fire(index);\n            });\n            const disposable = combinedDisposable(onStartDisposable, onChangeDisposable, onEndDisposable, onDidResetDisposable, sash);\n            const sashItem = { sash, disposable };\n            this.sashItems.splice(index - 1, 0, sashItem);\n        }\n        container.appendChild(view.element);\n        let highPriorityIndexes;\n        if (typeof size !== 'number' && size.type === 'split') {\n            highPriorityIndexes = [size.index];\n        }\n        if (!skipLayout) {\n            this.relayout([index], highPriorityIndexes);\n        }\n        this.state = State.Idle;\n        if (!skipLayout && typeof size !== 'number' && size.type === 'distribute') {\n            this.distributeViewSizes();\n        }\n    }\n    relayout(lowPriorityIndexes, highPriorityIndexes) {\n        const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        this.resize(this.viewItems.length - 1, this.size - contentSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n        this.distributeEmptySpace();\n        this.layoutViews();\n        this.saveProportions();\n    }\n    resize(index, delta, sizes = this.viewItems.map(i => i.size), lowPriorityIndexes, highPriorityIndexes, overloadMinDelta = Number.NEGATIVE_INFINITY, overloadMaxDelta = Number.POSITIVE_INFINITY, snapBefore, snapAfter) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return 0;\n        }\n        const upIndexes = range(index, -1);\n        const downIndexes = range(index + 1, this.viewItems.length);\n        if (highPriorityIndexes) {\n            for (const index of highPriorityIndexes) {\n                pushToStart(upIndexes, index);\n                pushToStart(downIndexes, index);\n            }\n        }\n        if (lowPriorityIndexes) {\n            for (const index of lowPriorityIndexes) {\n                pushToEnd(upIndexes, index);\n                pushToEnd(downIndexes, index);\n            }\n        }\n        const upItems = upIndexes.map(i => this.viewItems[i]);\n        const upSizes = upIndexes.map(i => sizes[i]);\n        const downItems = downIndexes.map(i => this.viewItems[i]);\n        const downSizes = downIndexes.map(i => sizes[i]);\n        const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n        const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].maximumSize - sizes[i]), 0);\n        const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n        const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].maximumSize), 0);\n        const minDelta = Math.max(minDeltaUp, minDeltaDown, overloadMinDelta);\n        const maxDelta = Math.min(maxDeltaDown, maxDeltaUp, overloadMaxDelta);\n        let snapped = false;\n        if (snapBefore) {\n            const snapView = this.viewItems[snapBefore.index];\n            const visible = delta >= snapBefore.limitDelta;\n            snapped = visible !== snapView.visible;\n            snapView.setVisible(visible, snapBefore.size);\n        }\n        if (!snapped && snapAfter) {\n            const snapView = this.viewItems[snapAfter.index];\n            const visible = delta < snapAfter.limitDelta;\n            snapped = visible !== snapView.visible;\n            snapView.setVisible(visible, snapAfter.size);\n        }\n        if (snapped) {\n            return this.resize(index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta);\n        }\n        delta = clamp(delta, minDelta, maxDelta);\n        for (let i = 0, deltaUp = delta; i < upItems.length; i++) {\n            const item = upItems[i];\n            const size = clamp(upSizes[i] + deltaUp, item.minimumSize, item.maximumSize);\n            const viewDelta = size - upSizes[i];\n            deltaUp -= viewDelta;\n            item.size = size;\n        }\n        for (let i = 0, deltaDown = delta; i < downItems.length; i++) {\n            const item = downItems[i];\n            const size = clamp(downSizes[i] - deltaDown, item.minimumSize, item.maximumSize);\n            const viewDelta = size - downSizes[i];\n            deltaDown += viewDelta;\n            item.size = size;\n        }\n        return delta;\n    }\n    distributeEmptySpace(lowPriorityIndex) {\n        const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        let emptyDelta = this.size - contentSize;\n        const indexes = range(this.viewItems.length - 1, -1);\n        const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        for (const index of highPriorityIndexes) {\n            pushToStart(indexes, index);\n        }\n        for (const index of lowPriorityIndexes) {\n            pushToEnd(indexes, index);\n        }\n        if (typeof lowPriorityIndex === 'number') {\n            pushToEnd(indexes, lowPriorityIndex);\n        }\n        for (let i = 0; emptyDelta !== 0 && i < indexes.length; i++) {\n            const item = this.viewItems[indexes[i]];\n            const size = clamp(item.size + emptyDelta, item.minimumSize, item.maximumSize);\n            const viewDelta = size - item.size;\n            emptyDelta -= viewDelta;\n            item.size = size;\n        }\n    }\n    layoutViews() {\n        // Save new content size\n        this.contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        // Layout views\n        let offset = 0;\n        for (const viewItem of this.viewItems) {\n            viewItem.layout(offset, this.layoutContext);\n            offset += viewItem.size;\n        }\n        // Layout sashes\n        this.sashItems.forEach(item => item.sash.layout());\n        this.updateSashEnablement();\n        this.updateScrollableElement();\n    }\n    updateScrollableElement() {\n        if (this.orientation === 0 /* Orientation.VERTICAL */) {\n            this.scrollableElement.setScrollDimensions({\n                height: this.size,\n                scrollHeight: this.contentSize\n            });\n        }\n        else {\n            this.scrollableElement.setScrollDimensions({\n                width: this.size,\n                scrollWidth: this.contentSize\n            });\n        }\n    }\n    updateSashEnablement() {\n        let previous = false;\n        const collapsesDown = this.viewItems.map(i => previous = (i.size - i.minimumSize > 0) || previous);\n        previous = false;\n        const expandsDown = this.viewItems.map(i => previous = (i.maximumSize - i.size > 0) || previous);\n        const reverseViews = [...this.viewItems].reverse();\n        previous = false;\n        const collapsesUp = reverseViews.map(i => previous = (i.size - i.minimumSize > 0) || previous).reverse();\n        previous = false;\n        const expandsUp = reverseViews.map(i => previous = (i.maximumSize - i.size > 0) || previous).reverse();\n        let position = 0;\n        for (let index = 0; index < this.sashItems.length; index++) {\n            const { sash } = this.sashItems[index];\n            const viewItem = this.viewItems[index];\n            position += viewItem.size;\n            const min = !(collapsesDown[index] && expandsUp[index + 1]);\n            const max = !(expandsDown[index] && collapsesUp[index + 1]);\n            if (min && max) {\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                const snappedBefore = typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible;\n                const snappedAfter = typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible;\n                if (snappedBefore && collapsesUp[index] && (position > 0 || this.startSnappingEnabled)) {\n                    sash.state = 1 /* SashState.AtMinimum */;\n                }\n                else if (snappedAfter && collapsesDown[index] && (position < this.contentSize || this.endSnappingEnabled)) {\n                    sash.state = 2 /* SashState.AtMaximum */;\n                }\n                else {\n                    sash.state = 0 /* SashState.Disabled */;\n                }\n            }\n            else if (min && !max) {\n                sash.state = 1 /* SashState.AtMinimum */;\n            }\n            else if (!min && max) {\n                sash.state = 2 /* SashState.AtMaximum */;\n            }\n            else {\n                sash.state = 3 /* SashState.Enabled */;\n            }\n        }\n    }\n    getSashPosition(sash) {\n        let position = 0;\n        for (let i = 0; i < this.sashItems.length; i++) {\n            position += this.viewItems[i].size;\n            if (this.sashItems[i].sash === sash) {\n                return position;\n            }\n        }\n        return 0;\n    }\n    findFirstSnapIndex(indexes) {\n        // visible views first\n        for (const index of indexes) {\n            const viewItem = this.viewItems[index];\n            if (!viewItem.visible) {\n                continue;\n            }\n            if (viewItem.snap) {\n                return index;\n            }\n        }\n        // then, hidden views\n        for (const index of indexes) {\n            const viewItem = this.viewItems[index];\n            if (viewItem.visible && viewItem.maximumSize - viewItem.minimumSize > 0) {\n                return undefined;\n            }\n            if (!viewItem.visible && viewItem.snap) {\n                return index;\n            }\n        }\n        return undefined;\n    }\n    areViewsDistributed() {\n        let min = undefined, max = undefined;\n        for (const view of this.viewItems) {\n            min = min === undefined ? view.size : Math.min(min, view.size);\n            max = max === undefined ? view.size : Math.max(max, view.size);\n            if (max - min > 2) {\n                return false;\n            }\n        }\n        return true;\n    }\n    dispose() {\n        var _a;\n        (_a = this.sashDragState) === null || _a === void 0 ? void 0 : _a.disposable.dispose();\n        dispose(this.viewItems);\n        this.viewItems = [];\n        this.sashItems.forEach(i => i.disposable.dispose());\n        this.sashItems = [];\n        super.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, append, clearNode, createStyleSheet } from '../../dom.js';\nimport { List, unthemedListStyles } from '../list/listWidget.js';\nimport { SplitView } from '../splitview/splitview.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nimport './table.css';\nclass TableListRenderer {\n    constructor(columns, renderers, getColumnSize) {\n        this.columns = columns;\n        this.getColumnSize = getColumnSize;\n        this.templateId = TableListRenderer.TemplateId;\n        this.renderedTemplates = new Set();\n        const rendererMap = new Map(renderers.map(r => [r.templateId, r]));\n        this.renderers = [];\n        for (const column of columns) {\n            const renderer = rendererMap.get(column.templateId);\n            if (!renderer) {\n                throw new Error(`Table cell renderer for template id ${column.templateId} not found.`);\n            }\n            this.renderers.push(renderer);\n        }\n    }\n    renderTemplate(container) {\n        const rowContainer = append(container, $('.monaco-table-tr'));\n        const cellContainers = [];\n        const cellTemplateData = [];\n        for (let i = 0; i < this.columns.length; i++) {\n            const renderer = this.renderers[i];\n            const cellContainer = append(rowContainer, $('.monaco-table-td', { 'data-col-index': i }));\n            cellContainer.style.width = `${this.getColumnSize(i)}px`;\n            cellContainers.push(cellContainer);\n            cellTemplateData.push(renderer.renderTemplate(cellContainer));\n        }\n        const result = { container, cellContainers, cellTemplateData };\n        this.renderedTemplates.add(result);\n        return result;\n    }\n    renderElement(element, index, templateData, height) {\n        for (let i = 0; i < this.columns.length; i++) {\n            const column = this.columns[i];\n            const cell = column.project(element);\n            const renderer = this.renderers[i];\n            renderer.renderElement(cell, index, templateData.cellTemplateData[i], height);\n        }\n    }\n    disposeElement(element, index, templateData, height) {\n        for (let i = 0; i < this.columns.length; i++) {\n            const renderer = this.renderers[i];\n            if (renderer.disposeElement) {\n                const column = this.columns[i];\n                const cell = column.project(element);\n                renderer.disposeElement(cell, index, templateData.cellTemplateData[i], height);\n            }\n        }\n    }\n    disposeTemplate(templateData) {\n        for (let i = 0; i < this.columns.length; i++) {\n            const renderer = this.renderers[i];\n            renderer.disposeTemplate(templateData.cellTemplateData[i]);\n        }\n        clearNode(templateData.container);\n        this.renderedTemplates.delete(templateData);\n    }\n    layoutColumn(index, size) {\n        for (const { cellContainers } of this.renderedTemplates) {\n            cellContainers[index].style.width = `${size}px`;\n        }\n    }\n}\nTableListRenderer.TemplateId = 'row';\nfunction asListVirtualDelegate(delegate) {\n    return {\n        getHeight(row) { return delegate.getHeight(row); },\n        getTemplateId() { return TableListRenderer.TemplateId; },\n    };\n}\nclass ColumnHeader {\n    get minimumSize() { var _a; return (_a = this.column.minimumWidth) !== null && _a !== void 0 ? _a : 120; }\n    get maximumSize() { var _a; return (_a = this.column.maximumWidth) !== null && _a !== void 0 ? _a : Number.POSITIVE_INFINITY; }\n    get onDidChange() { var _a; return (_a = this.column.onDidChangeWidthConstraints) !== null && _a !== void 0 ? _a : Event.None; }\n    constructor(column, index) {\n        this.column = column;\n        this.index = index;\n        this._onDidLayout = new Emitter();\n        this.onDidLayout = this._onDidLayout.event;\n        this.element = $('.monaco-table-th', { 'data-col-index': index, title: column.tooltip }, column.label);\n    }\n    layout(size) {\n        this._onDidLayout.fire([this.index, size]);\n    }\n}\nexport class Table {\n    get onDidChangeFocus() { return this.list.onDidChangeFocus; }\n    get onDidChangeSelection() { return this.list.onDidChangeSelection; }\n    get onDidScroll() { return this.list.onDidScroll; }\n    get onMouseDblClick() { return this.list.onMouseDblClick; }\n    get onPointer() { return this.list.onPointer; }\n    get onDidFocus() { return this.list.onDidFocus; }\n    get scrollTop() { return this.list.scrollTop; }\n    set scrollTop(scrollTop) { this.list.scrollTop = scrollTop; }\n    get scrollHeight() { return this.list.scrollHeight; }\n    get renderHeight() { return this.list.renderHeight; }\n    get onDidDispose() { return this.list.onDidDispose; }\n    constructor(user, container, virtualDelegate, columns, renderers, _options) {\n        this.virtualDelegate = virtualDelegate;\n        this.domId = `table_id_${++Table.InstanceCount}`;\n        this.disposables = new DisposableStore();\n        this.cachedWidth = 0;\n        this.cachedHeight = 0;\n        this.domNode = append(container, $(`.monaco-table.${this.domId}`));\n        const headers = columns.map((c, i) => new ColumnHeader(c, i));\n        const descriptor = {\n            size: headers.reduce((a, b) => a + b.column.weight, 0),\n            views: headers.map(view => ({ size: view.column.weight, view }))\n        };\n        this.splitview = this.disposables.add(new SplitView(this.domNode, {\n            orientation: 1 /* Orientation.HORIZONTAL */,\n            scrollbarVisibility: 2 /* ScrollbarVisibility.Hidden */,\n            getSashOrthogonalSize: () => this.cachedHeight,\n            descriptor\n        }));\n        this.splitview.el.style.height = `${virtualDelegate.headerRowHeight}px`;\n        this.splitview.el.style.lineHeight = `${virtualDelegate.headerRowHeight}px`;\n        const renderer = new TableListRenderer(columns, renderers, i => this.splitview.getViewSize(i));\n        this.list = this.disposables.add(new List(user, this.domNode, asListVirtualDelegate(virtualDelegate), [renderer], _options));\n        Event.any(...headers.map(h => h.onDidLayout))(([index, size]) => renderer.layoutColumn(index, size), null, this.disposables);\n        this.splitview.onDidSashReset(index => {\n            const totalWeight = columns.reduce((r, c) => r + c.weight, 0);\n            const size = columns[index].weight / totalWeight * this.cachedWidth;\n            this.splitview.resizeView(index, size);\n        }, null, this.disposables);\n        this.styleElement = createStyleSheet(this.domNode);\n        this.style(unthemedListStyles);\n    }\n    updateOptions(options) {\n        this.list.updateOptions(options);\n    }\n    splice(start, deleteCount, elements = []) {\n        this.list.splice(start, deleteCount, elements);\n    }\n    getHTMLElement() {\n        return this.domNode;\n    }\n    style(styles) {\n        const content = [];\n        content.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\ttop: ${this.virtualDelegate.headerRowHeight + 1}px;\n\t\t\theight: calc(100% - ${this.virtualDelegate.headerRowHeight}px);\n\t\t}`);\n        this.styleElement.textContent = content.join('\\n');\n        this.list.style(styles);\n    }\n    getSelectedElements() {\n        return this.list.getSelectedElements();\n    }\n    getSelection() {\n        return this.list.getSelection();\n    }\n    getFocus() {\n        return this.list.getFocus();\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nTable.InstanceCount = 0;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Widget } from '../widget.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { Emitter } from '../../../common/event.js';\nimport './toggle.css';\nexport const unthemedToggleStyles = {\n    inputActiveOptionBorder: '#007ACC00',\n    inputActiveOptionForeground: '#FFFFFF',\n    inputActiveOptionBackground: '#0E639C50'\n};\nexport class Toggle extends Widget {\n    constructor(opts) {\n        super();\n        this._onChange = this._register(new Emitter());\n        this.onChange = this._onChange.event;\n        this._onKeyDown = this._register(new Emitter());\n        this.onKeyDown = this._onKeyDown.event;\n        this._opts = opts;\n        this._checked = this._opts.isChecked;\n        const classes = ['monaco-custom-toggle'];\n        if (this._opts.icon) {\n            this._icon = this._opts.icon;\n            classes.push(...ThemeIcon.asClassNameArray(this._icon));\n        }\n        if (this._opts.actionClassName) {\n            classes.push(...this._opts.actionClassName.split(' '));\n        }\n        if (this._checked) {\n            classes.push('checked');\n        }\n        this.domNode = document.createElement('div');\n        this.domNode.title = this._opts.title;\n        this.domNode.classList.add(...classes);\n        if (!this._opts.notFocusable) {\n            this.domNode.tabIndex = 0;\n        }\n        this.domNode.setAttribute('role', 'checkbox');\n        this.domNode.setAttribute('aria-checked', String(this._checked));\n        this.domNode.setAttribute('aria-label', this._opts.title);\n        this.applyStyles();\n        this.onclick(this.domNode, (ev) => {\n            if (this.enabled) {\n                this.checked = !this._checked;\n                this._onChange.fire(false);\n                ev.preventDefault();\n            }\n        });\n        this._register(this.ignoreGesture(this.domNode));\n        this.onkeydown(this.domNode, (keyboardEvent) => {\n            if (keyboardEvent.keyCode === 10 /* KeyCode.Space */ || keyboardEvent.keyCode === 3 /* KeyCode.Enter */) {\n                this.checked = !this._checked;\n                this._onChange.fire(true);\n                keyboardEvent.preventDefault();\n                keyboardEvent.stopPropagation();\n                return;\n            }\n            this._onKeyDown.fire(keyboardEvent);\n        });\n    }\n    get enabled() {\n        return this.domNode.getAttribute('aria-disabled') !== 'true';\n    }\n    focus() {\n        this.domNode.focus();\n    }\n    get checked() {\n        return this._checked;\n    }\n    set checked(newIsChecked) {\n        this._checked = newIsChecked;\n        this.domNode.setAttribute('aria-checked', String(this._checked));\n        this.domNode.classList.toggle('checked', this._checked);\n        this.applyStyles();\n    }\n    width() {\n        return 2 /*margin left*/ + 2 /*border*/ + 2 /*padding*/ + 16 /* icon width */;\n    }\n    applyStyles() {\n        if (this.domNode) {\n            this.domNode.style.borderColor = (this._checked && this._opts.inputActiveOptionBorder) || '';\n            this.domNode.style.color = (this._checked && this._opts.inputActiveOptionForeground) || 'inherit';\n            this.domNode.style.backgroundColor = (this._checked && this._opts.inputActiveOptionBackground) || '';\n        }\n    }\n    enable() {\n        this.domNode.setAttribute('aria-disabled', String(false));\n    }\n    disable() {\n        this.domNode.setAttribute('aria-disabled', String(true));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport { DropdownMenuActionViewItem } from '../dropdown/dropdownActionViewItem.js';\nimport { Action, SubmenuAction } from '../../../common/actions.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { EventMultiplexer } from '../../../common/event.js';\nimport { Disposable, DisposableStore } from '../../../common/lifecycle.js';\nimport './toolbar.css';\nimport * as nls from '../../../../nls.js';\n/**\n * A widget that combines an action bar for primary actions and a dropdown for secondary actions.\n */\nexport class ToolBar extends Disposable {\n    constructor(container, contextMenuProvider, options = { orientation: 0 /* ActionsOrientation.HORIZONTAL */ }) {\n        super();\n        this.submenuActionViewItems = [];\n        this.hasSecondaryActions = false;\n        this._onDidChangeDropdownVisibility = this._register(new EventMultiplexer());\n        this.onDidChangeDropdownVisibility = this._onDidChangeDropdownVisibility.event;\n        this.disposables = this._register(new DisposableStore());\n        this.options = options;\n        this.lookupKeybindings = typeof this.options.getKeyBinding === 'function';\n        this.toggleMenuAction = this._register(new ToggleMenuAction(() => { var _a; return (_a = this.toggleMenuActionViewItem) === null || _a === void 0 ? void 0 : _a.show(); }, options.toggleMenuTitle));\n        this.element = document.createElement('div');\n        this.element.className = 'monaco-toolbar';\n        container.appendChild(this.element);\n        this.actionBar = this._register(new ActionBar(this.element, {\n            orientation: options.orientation,\n            ariaLabel: options.ariaLabel,\n            actionRunner: options.actionRunner,\n            allowContextMenu: options.allowContextMenu,\n            highlightToggledItems: options.highlightToggledItems,\n            actionViewItemProvider: (action, viewItemOptions) => {\n                var _a;\n                if (action.id === ToggleMenuAction.ID) {\n                    this.toggleMenuActionViewItem = new DropdownMenuActionViewItem(action, action.menuActions, contextMenuProvider, {\n                        actionViewItemProvider: this.options.actionViewItemProvider,\n                        actionRunner: this.actionRunner,\n                        keybindingProvider: this.options.getKeyBinding,\n                        classNames: ThemeIcon.asClassNameArray((_a = options.moreIcon) !== null && _a !== void 0 ? _a : Codicon.toolBarMore),\n                        anchorAlignmentProvider: this.options.anchorAlignmentProvider,\n                        menuAsChild: !!this.options.renderDropdownAsChildElement,\n                        skipTelemetry: this.options.skipTelemetry\n                    });\n                    this.toggleMenuActionViewItem.setActionContext(this.actionBar.context);\n                    this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility));\n                    return this.toggleMenuActionViewItem;\n                }\n                if (options.actionViewItemProvider) {\n                    const result = options.actionViewItemProvider(action, viewItemOptions);\n                    if (result) {\n                        return result;\n                    }\n                }\n                if (action instanceof SubmenuAction) {\n                    const result = new DropdownMenuActionViewItem(action, action.actions, contextMenuProvider, {\n                        actionViewItemProvider: this.options.actionViewItemProvider,\n                        actionRunner: this.actionRunner,\n                        keybindingProvider: this.options.getKeyBinding,\n                        classNames: action.class,\n                        anchorAlignmentProvider: this.options.anchorAlignmentProvider,\n                        menuAsChild: !!this.options.renderDropdownAsChildElement,\n                        skipTelemetry: this.options.skipTelemetry\n                    });\n                    result.setActionContext(this.actionBar.context);\n                    this.submenuActionViewItems.push(result);\n                    this.disposables.add(this._onDidChangeDropdownVisibility.add(result.onDidChangeVisibility));\n                    return result;\n                }\n                return undefined;\n            }\n        }));\n    }\n    set actionRunner(actionRunner) {\n        this.actionBar.actionRunner = actionRunner;\n    }\n    get actionRunner() {\n        return this.actionBar.actionRunner;\n    }\n    getElement() {\n        return this.element;\n    }\n    getItemAction(indexOrElement) {\n        return this.actionBar.getAction(indexOrElement);\n    }\n    setActions(primaryActions, secondaryActions) {\n        this.clear();\n        const primaryActionsToSet = primaryActions ? primaryActions.slice(0) : [];\n        // Inject additional action to open secondary actions if present\n        this.hasSecondaryActions = !!(secondaryActions && secondaryActions.length > 0);\n        if (this.hasSecondaryActions && secondaryActions) {\n            this.toggleMenuAction.menuActions = secondaryActions.slice(0);\n            primaryActionsToSet.push(this.toggleMenuAction);\n        }\n        primaryActionsToSet.forEach(action => {\n            this.actionBar.push(action, { icon: true, label: false, keybinding: this.getKeybindingLabel(action) });\n        });\n    }\n    getKeybindingLabel(action) {\n        var _a, _b, _c;\n        const key = this.lookupKeybindings ? (_b = (_a = this.options).getKeyBinding) === null || _b === void 0 ? void 0 : _b.call(_a, action) : undefined;\n        return (_c = key === null || key === void 0 ? void 0 : key.getLabel()) !== null && _c !== void 0 ? _c : undefined;\n    }\n    clear() {\n        this.submenuActionViewItems = [];\n        this.disposables.clear();\n        this.actionBar.clear();\n    }\n    dispose() {\n        this.clear();\n        this.disposables.dispose();\n        super.dispose();\n    }\n}\nexport class ToggleMenuAction extends Action {\n    constructor(toggleDropdownMenu, title) {\n        title = title || nls.localize('moreActions', \"More Actions...\");\n        super(ToggleMenuAction.ID, title, undefined, true);\n        this._menuActions = [];\n        this.toggleDropdownMenu = toggleDropdownMenu;\n    }\n    run() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.toggleDropdownMenu();\n        });\n    }\n    get menuActions() {\n        return this._menuActions;\n    }\n    set menuActions(actions) {\n        this._menuActions = actions;\n    }\n}\nToggleMenuAction.ID = 'toolbar.toggle.more';\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { $, append, clearNode, createStyleSheet, h, hasParentWithClass } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport { FindInput } from '../findinput/findInput.js';\nimport { unthemedInboxStyles } from '../inputbox/inputBox.js';\nimport { ElementsDragAndDropData } from '../list/listView.js';\nimport { isButton, isInputElement, isMonacoEditor, List, MouseController } from '../list/listWidget.js';\nimport { Toggle, unthemedToggleStyles } from '../toggle/toggle.js';\nimport { getVisibleState, isFilterResult } from './indexTreeModel.js';\nimport { TreeMouseEventTarget } from './tree.js';\nimport { Action } from '../../../common/actions.js';\nimport { distinct, equals, range } from '../../../common/arrays.js';\nimport { Delayer, disposableTimeout, timeout } from '../../../common/async.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { SetMap } from '../../../common/map.js';\nimport { Emitter, Event, EventBufferer, Relay } from '../../../common/event.js';\nimport { fuzzyScore, FuzzyScore } from '../../../common/filters.js';\nimport { Disposable, DisposableStore, dispose, toDisposable } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { isNumber } from '../../../common/types.js';\nimport './media/tree.css';\nimport { localize } from '../../../../nls.js';\nclass TreeElementsDragAndDropData extends ElementsDragAndDropData {\n    constructor(data) {\n        super(data.elements.map(node => node.element));\n        this.data = data;\n    }\n}\nfunction asTreeDragAndDropData(data) {\n    if (data instanceof ElementsDragAndDropData) {\n        return new TreeElementsDragAndDropData(data);\n    }\n    return data;\n}\nclass TreeNodeListDragAndDrop {\n    constructor(modelProvider, dnd) {\n        this.modelProvider = modelProvider;\n        this.dnd = dnd;\n        this.autoExpandDisposable = Disposable.None;\n        this.disposables = new DisposableStore();\n    }\n    getDragURI(node) {\n        return this.dnd.getDragURI(node.element);\n    }\n    getDragLabel(nodes, originalEvent) {\n        if (this.dnd.getDragLabel) {\n            return this.dnd.getDragLabel(nodes.map(node => node.element), originalEvent);\n        }\n        return undefined;\n    }\n    onDragStart(data, originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, asTreeDragAndDropData(data), originalEvent);\n    }\n    onDragOver(data, targetNode, targetIndex, originalEvent, raw = true) {\n        const result = this.dnd.onDragOver(asTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\n        const didChangeAutoExpandNode = this.autoExpandNode !== targetNode;\n        if (didChangeAutoExpandNode) {\n            this.autoExpandDisposable.dispose();\n            this.autoExpandNode = targetNode;\n        }\n        if (typeof targetNode === 'undefined') {\n            return result;\n        }\n        if (didChangeAutoExpandNode && typeof result !== 'boolean' && result.autoExpand) {\n            this.autoExpandDisposable = disposableTimeout(() => {\n                const model = this.modelProvider();\n                const ref = model.getNodeLocation(targetNode);\n                if (model.isCollapsed(ref)) {\n                    model.setCollapsed(ref, false);\n                }\n                this.autoExpandNode = undefined;\n            }, 500, this.disposables);\n        }\n        if (typeof result === 'boolean' || !result.accept || typeof result.bubble === 'undefined' || result.feedback) {\n            if (!raw) {\n                const accept = typeof result === 'boolean' ? result : result.accept;\n                const effect = typeof result === 'boolean' ? undefined : result.effect;\n                return { accept, effect, feedback: [targetIndex] };\n            }\n            return result;\n        }\n        if (result.bubble === 1 /* TreeDragOverBubble.Up */) {\n            const model = this.modelProvider();\n            const ref = model.getNodeLocation(targetNode);\n            const parentRef = model.getParentNodeLocation(ref);\n            const parentNode = model.getNode(parentRef);\n            const parentIndex = parentRef && model.getListIndex(parentRef);\n            return this.onDragOver(data, parentNode, parentIndex, originalEvent, false);\n        }\n        const model = this.modelProvider();\n        const ref = model.getNodeLocation(targetNode);\n        const start = model.getListIndex(ref);\n        const length = model.getListRenderCount(ref);\n        return Object.assign(Object.assign({}, result), { feedback: range(start, start + length) });\n    }\n    drop(data, targetNode, targetIndex, originalEvent) {\n        this.autoExpandDisposable.dispose();\n        this.autoExpandNode = undefined;\n        this.dnd.drop(asTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\n    }\n    onDragEnd(originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, originalEvent);\n    }\n    dispose() {\n        this.disposables.dispose();\n        this.dnd.dispose();\n    }\n}\nfunction asListOptions(modelProvider, options) {\n    return options && Object.assign(Object.assign({}, options), { identityProvider: options.identityProvider && {\n            getId(el) {\n                return options.identityProvider.getId(el.element);\n            }\n        }, dnd: options.dnd && new TreeNodeListDragAndDrop(modelProvider, options.dnd), multipleSelectionController: options.multipleSelectionController && {\n            isSelectionSingleChangeEvent(e) {\n                return options.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({}, e), { element: e.element }));\n            },\n            isSelectionRangeChangeEvent(e) {\n                return options.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({}, e), { element: e.element }));\n            }\n        }, accessibilityProvider: options.accessibilityProvider && Object.assign(Object.assign({}, options.accessibilityProvider), { getSetSize(node) {\n                const model = modelProvider();\n                const ref = model.getNodeLocation(node);\n                const parentRef = model.getParentNodeLocation(ref);\n                const parentNode = model.getNode(parentRef);\n                return parentNode.visibleChildrenCount;\n            },\n            getPosInSet(node) {\n                return node.visibleChildIndex + 1;\n            }, isChecked: options.accessibilityProvider && options.accessibilityProvider.isChecked ? (node) => {\n                return options.accessibilityProvider.isChecked(node.element);\n            } : undefined, getRole: options.accessibilityProvider && options.accessibilityProvider.getRole ? (node) => {\n                return options.accessibilityProvider.getRole(node.element);\n            } : () => 'treeitem', getAriaLabel(e) {\n                return options.accessibilityProvider.getAriaLabel(e.element);\n            },\n            getWidgetAriaLabel() {\n                return options.accessibilityProvider.getWidgetAriaLabel();\n            }, getWidgetRole: options.accessibilityProvider && options.accessibilityProvider.getWidgetRole ? () => options.accessibilityProvider.getWidgetRole() : () => 'tree', getAriaLevel: options.accessibilityProvider && options.accessibilityProvider.getAriaLevel ? (node) => options.accessibilityProvider.getAriaLevel(node.element) : (node) => {\n                return node.depth;\n            }, getActiveDescendantId: options.accessibilityProvider.getActiveDescendantId && (node => {\n                return options.accessibilityProvider.getActiveDescendantId(node.element);\n            }) }), keyboardNavigationLabelProvider: options.keyboardNavigationLabelProvider && Object.assign(Object.assign({}, options.keyboardNavigationLabelProvider), { getKeyboardNavigationLabel(node) {\n                return options.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(node.element);\n            } }) });\n}\nexport class ComposedTreeDelegate {\n    constructor(delegate) {\n        this.delegate = delegate;\n    }\n    getHeight(element) {\n        return this.delegate.getHeight(element.element);\n    }\n    getTemplateId(element) {\n        return this.delegate.getTemplateId(element.element);\n    }\n    hasDynamicHeight(element) {\n        return !!this.delegate.hasDynamicHeight && this.delegate.hasDynamicHeight(element.element);\n    }\n    setDynamicHeight(element, height) {\n        var _a, _b;\n        (_b = (_a = this.delegate).setDynamicHeight) === null || _b === void 0 ? void 0 : _b.call(_a, element.element, height);\n    }\n}\nexport var RenderIndentGuides;\n(function (RenderIndentGuides) {\n    RenderIndentGuides[\"None\"] = \"none\";\n    RenderIndentGuides[\"OnHover\"] = \"onHover\";\n    RenderIndentGuides[\"Always\"] = \"always\";\n})(RenderIndentGuides || (RenderIndentGuides = {}));\nclass EventCollection {\n    get elements() {\n        return this._elements;\n    }\n    constructor(onDidChange, _elements = []) {\n        this._elements = _elements;\n        this.disposables = new DisposableStore();\n        this.onDidChange = Event.forEach(onDidChange, elements => this._elements = elements, this.disposables);\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nclass TreeRenderer {\n    constructor(renderer, modelProvider, onDidChangeCollapseState, activeNodes, renderedIndentGuides, options = {}) {\n        var _a;\n        this.renderer = renderer;\n        this.modelProvider = modelProvider;\n        this.activeNodes = activeNodes;\n        this.renderedIndentGuides = renderedIndentGuides;\n        this.renderedElements = new Map();\n        this.renderedNodes = new Map();\n        this.indent = TreeRenderer.DefaultIndent;\n        this.hideTwistiesOfChildlessElements = false;\n        this.shouldRenderIndentGuides = false;\n        this.activeIndentNodes = new Set();\n        this.indentGuidesDisposable = Disposable.None;\n        this.disposables = new DisposableStore();\n        this.templateId = renderer.templateId;\n        this.updateOptions(options);\n        Event.map(onDidChangeCollapseState, e => e.node)(this.onDidChangeNodeTwistieState, this, this.disposables);\n        (_a = renderer.onDidChangeTwistieState) === null || _a === void 0 ? void 0 : _a.call(renderer, this.onDidChangeTwistieState, this, this.disposables);\n    }\n    updateOptions(options = {}) {\n        if (typeof options.indent !== 'undefined') {\n            const indent = clamp(options.indent, 0, 40);\n            if (indent !== this.indent) {\n                this.indent = indent;\n                for (const [node, templateData] of this.renderedNodes) {\n                    this.renderTreeElement(node, templateData);\n                }\n            }\n        }\n        if (typeof options.renderIndentGuides !== 'undefined') {\n            const shouldRenderIndentGuides = options.renderIndentGuides !== RenderIndentGuides.None;\n            if (shouldRenderIndentGuides !== this.shouldRenderIndentGuides) {\n                this.shouldRenderIndentGuides = shouldRenderIndentGuides;\n                for (const [node, templateData] of this.renderedNodes) {\n                    this._renderIndentGuides(node, templateData);\n                }\n                this.indentGuidesDisposable.dispose();\n                if (shouldRenderIndentGuides) {\n                    const disposables = new DisposableStore();\n                    this.activeNodes.onDidChange(this._onDidChangeActiveNodes, this, disposables);\n                    this.indentGuidesDisposable = disposables;\n                    this._onDidChangeActiveNodes(this.activeNodes.elements);\n                }\n            }\n        }\n        if (typeof options.hideTwistiesOfChildlessElements !== 'undefined') {\n            this.hideTwistiesOfChildlessElements = options.hideTwistiesOfChildlessElements;\n        }\n    }\n    renderTemplate(container) {\n        const el = append(container, $('.monaco-tl-row'));\n        const indent = append(el, $('.monaco-tl-indent'));\n        const twistie = append(el, $('.monaco-tl-twistie'));\n        const contents = append(el, $('.monaco-tl-contents'));\n        const templateData = this.renderer.renderTemplate(contents);\n        return { container, indent, twistie, indentGuidesDisposable: Disposable.None, templateData };\n    }\n    renderElement(node, index, templateData, height) {\n        this.renderedNodes.set(node, templateData);\n        this.renderedElements.set(node.element, node);\n        this.renderTreeElement(node, templateData);\n        this.renderer.renderElement(node, index, templateData.templateData, height);\n    }\n    disposeElement(node, index, templateData, height) {\n        var _a, _b;\n        templateData.indentGuidesDisposable.dispose();\n        (_b = (_a = this.renderer).disposeElement) === null || _b === void 0 ? void 0 : _b.call(_a, node, index, templateData.templateData, height);\n        if (typeof height === 'number') {\n            this.renderedNodes.delete(node);\n            this.renderedElements.delete(node.element);\n        }\n    }\n    disposeTemplate(templateData) {\n        this.renderer.disposeTemplate(templateData.templateData);\n    }\n    onDidChangeTwistieState(element) {\n        const node = this.renderedElements.get(element);\n        if (!node) {\n            return;\n        }\n        this.onDidChangeNodeTwistieState(node);\n    }\n    onDidChangeNodeTwistieState(node) {\n        const templateData = this.renderedNodes.get(node);\n        if (!templateData) {\n            return;\n        }\n        this._onDidChangeActiveNodes(this.activeNodes.elements);\n        this.renderTreeElement(node, templateData);\n    }\n    renderTreeElement(node, templateData) {\n        const indent = TreeRenderer.DefaultIndent + (node.depth - 1) * this.indent;\n        templateData.twistie.style.paddingLeft = `${indent}px`;\n        templateData.indent.style.width = `${indent + this.indent - 16}px`;\n        if (node.collapsible) {\n            templateData.container.setAttribute('aria-expanded', String(!node.collapsed));\n        }\n        else {\n            templateData.container.removeAttribute('aria-expanded');\n        }\n        templateData.twistie.classList.remove(...ThemeIcon.asClassNameArray(Codicon.treeItemExpanded));\n        let twistieRendered = false;\n        if (this.renderer.renderTwistie) {\n            twistieRendered = this.renderer.renderTwistie(node.element, templateData.twistie);\n        }\n        if (node.collapsible && (!this.hideTwistiesOfChildlessElements || node.visibleChildrenCount > 0)) {\n            if (!twistieRendered) {\n                templateData.twistie.classList.add(...ThemeIcon.asClassNameArray(Codicon.treeItemExpanded));\n            }\n            templateData.twistie.classList.add('collapsible');\n            templateData.twistie.classList.toggle('collapsed', node.collapsed);\n        }\n        else {\n            templateData.twistie.classList.remove('collapsible', 'collapsed');\n        }\n        this._renderIndentGuides(node, templateData);\n    }\n    _renderIndentGuides(node, templateData) {\n        clearNode(templateData.indent);\n        templateData.indentGuidesDisposable.dispose();\n        if (!this.shouldRenderIndentGuides) {\n            return;\n        }\n        const disposableStore = new DisposableStore();\n        const model = this.modelProvider();\n        while (true) {\n            const ref = model.getNodeLocation(node);\n            const parentRef = model.getParentNodeLocation(ref);\n            if (!parentRef) {\n                break;\n            }\n            const parent = model.getNode(parentRef);\n            const guide = $('.indent-guide', { style: `width: ${this.indent}px` });\n            if (this.activeIndentNodes.has(parent)) {\n                guide.classList.add('active');\n            }\n            if (templateData.indent.childElementCount === 0) {\n                templateData.indent.appendChild(guide);\n            }\n            else {\n                templateData.indent.insertBefore(guide, templateData.indent.firstElementChild);\n            }\n            this.renderedIndentGuides.add(parent, guide);\n            disposableStore.add(toDisposable(() => this.renderedIndentGuides.delete(parent, guide)));\n            node = parent;\n        }\n        templateData.indentGuidesDisposable = disposableStore;\n    }\n    _onDidChangeActiveNodes(nodes) {\n        if (!this.shouldRenderIndentGuides) {\n            return;\n        }\n        const set = new Set();\n        const model = this.modelProvider();\n        nodes.forEach(node => {\n            const ref = model.getNodeLocation(node);\n            try {\n                const parentRef = model.getParentNodeLocation(ref);\n                if (node.collapsible && node.children.length > 0 && !node.collapsed) {\n                    set.add(node);\n                }\n                else if (parentRef) {\n                    set.add(model.getNode(parentRef));\n                }\n            }\n            catch (_a) {\n                // noop\n            }\n        });\n        this.activeIndentNodes.forEach(node => {\n            if (!set.has(node)) {\n                this.renderedIndentGuides.forEach(node, line => line.classList.remove('active'));\n            }\n        });\n        set.forEach(node => {\n            if (!this.activeIndentNodes.has(node)) {\n                this.renderedIndentGuides.forEach(node, line => line.classList.add('active'));\n            }\n        });\n        this.activeIndentNodes = set;\n    }\n    dispose() {\n        this.renderedNodes.clear();\n        this.renderedElements.clear();\n        this.indentGuidesDisposable.dispose();\n        dispose(this.disposables);\n    }\n}\nTreeRenderer.DefaultIndent = 8;\nclass FindFilter {\n    get totalCount() { return this._totalCount; }\n    get matchCount() { return this._matchCount; }\n    constructor(tree, keyboardNavigationLabelProvider, _filter) {\n        this.tree = tree;\n        this.keyboardNavigationLabelProvider = keyboardNavigationLabelProvider;\n        this._filter = _filter;\n        this._totalCount = 0;\n        this._matchCount = 0;\n        this._pattern = '';\n        this._lowercasePattern = '';\n        this.disposables = new DisposableStore();\n        tree.onWillRefilter(this.reset, this, this.disposables);\n    }\n    filter(element, parentVisibility) {\n        let visibility = 1 /* TreeVisibility.Visible */;\n        if (this._filter) {\n            const result = this._filter.filter(element, parentVisibility);\n            if (typeof result === 'boolean') {\n                visibility = result ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */;\n            }\n            else if (isFilterResult(result)) {\n                visibility = getVisibleState(result.visibility);\n            }\n            else {\n                visibility = result;\n            }\n            if (visibility === 0 /* TreeVisibility.Hidden */) {\n                return false;\n            }\n        }\n        this._totalCount++;\n        if (!this._pattern) {\n            this._matchCount++;\n            return { data: FuzzyScore.Default, visibility };\n        }\n        const label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(element);\n        const labels = Array.isArray(label) ? label : [label];\n        for (const l of labels) {\n            const labelStr = l && l.toString();\n            if (typeof labelStr === 'undefined') {\n                return { data: FuzzyScore.Default, visibility };\n            }\n            let score;\n            if (this.tree.findMatchType === TreeFindMatchType.Contiguous) {\n                const index = labelStr.toLowerCase().indexOf(this._lowercasePattern);\n                if (index > -1) {\n                    score = [Number.MAX_SAFE_INTEGER, 0];\n                    for (let i = this._lowercasePattern.length; i > 0; i--) {\n                        score.push(index + i - 1);\n                    }\n                }\n            }\n            else {\n                score = fuzzyScore(this._pattern, this._lowercasePattern, 0, labelStr, labelStr.toLowerCase(), 0, { firstMatchCanBeWeak: true, boostFullMatch: true });\n            }\n            if (score) {\n                this._matchCount++;\n                return labels.length === 1 ?\n                    { data: score, visibility } :\n                    { data: { label: labelStr, score: score }, visibility };\n            }\n        }\n        if (this.tree.findMode === TreeFindMode.Filter) {\n            if (typeof this.tree.options.defaultFindVisibility === 'number') {\n                return this.tree.options.defaultFindVisibility;\n            }\n            else if (this.tree.options.defaultFindVisibility) {\n                return this.tree.options.defaultFindVisibility(element);\n            }\n            else {\n                return 2 /* TreeVisibility.Recurse */;\n            }\n        }\n        else {\n            return { data: FuzzyScore.Default, visibility };\n        }\n    }\n    reset() {\n        this._totalCount = 0;\n        this._matchCount = 0;\n    }\n    dispose() {\n        dispose(this.disposables);\n    }\n}\nexport class ModeToggle extends Toggle {\n    constructor(opts) {\n        var _a;\n        super({\n            icon: Codicon.listFilter,\n            title: localize('filter', \"Filter\"),\n            isChecked: (_a = opts.isChecked) !== null && _a !== void 0 ? _a : false,\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nexport class FuzzyToggle extends Toggle {\n    constructor(opts) {\n        var _a;\n        super({\n            icon: Codicon.searchFuzzy,\n            title: localize('fuzzySearch', \"Fuzzy Match\"),\n            isChecked: (_a = opts.isChecked) !== null && _a !== void 0 ? _a : false,\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nconst unthemedFindWidgetStyles = {\n    inputBoxStyles: unthemedInboxStyles,\n    toggleStyles: unthemedToggleStyles,\n    listFilterWidgetBackground: undefined,\n    listFilterWidgetNoMatchesOutline: undefined,\n    listFilterWidgetOutline: undefined,\n    listFilterWidgetShadow: undefined\n};\nexport var TreeFindMode;\n(function (TreeFindMode) {\n    TreeFindMode[TreeFindMode[\"Highlight\"] = 0] = \"Highlight\";\n    TreeFindMode[TreeFindMode[\"Filter\"] = 1] = \"Filter\";\n})(TreeFindMode || (TreeFindMode = {}));\nexport var TreeFindMatchType;\n(function (TreeFindMatchType) {\n    TreeFindMatchType[TreeFindMatchType[\"Fuzzy\"] = 0] = \"Fuzzy\";\n    TreeFindMatchType[TreeFindMatchType[\"Contiguous\"] = 1] = \"Contiguous\";\n})(TreeFindMatchType || (TreeFindMatchType = {}));\nclass FindWidget extends Disposable {\n    set mode(mode) {\n        this.modeToggle.checked = mode === TreeFindMode.Filter;\n        this.findInput.inputBox.setPlaceHolder(mode === TreeFindMode.Filter ? localize('type to filter', \"Type to filter\") : localize('type to search', \"Type to search\"));\n    }\n    set matchType(matchType) {\n        this.matchTypeToggle.checked = matchType === TreeFindMatchType.Fuzzy;\n    }\n    constructor(container, tree, contextViewProvider, mode, matchType, options) {\n        var _a;\n        super();\n        this.tree = tree;\n        this.elements = h('.monaco-tree-type-filter', [\n            h('.monaco-tree-type-filter-grab.codicon.codicon-debug-gripper@grab', { tabIndex: 0 }),\n            h('.monaco-tree-type-filter-input@findInput'),\n            h('.monaco-tree-type-filter-actionbar@actionbar'),\n        ]);\n        this.width = 0;\n        this.right = 0;\n        this.top = 0;\n        this._onDidDisable = new Emitter();\n        container.appendChild(this.elements.root);\n        this._register(toDisposable(() => container.removeChild(this.elements.root)));\n        const styles = (_a = options === null || options === void 0 ? void 0 : options.styles) !== null && _a !== void 0 ? _a : unthemedFindWidgetStyles;\n        if (styles.listFilterWidgetBackground) {\n            this.elements.root.style.backgroundColor = styles.listFilterWidgetBackground;\n        }\n        if (styles.listFilterWidgetShadow) {\n            this.elements.root.style.boxShadow = `0 0 8px 2px ${styles.listFilterWidgetShadow}`;\n        }\n        this.modeToggle = this._register(new ModeToggle(Object.assign(Object.assign({}, styles.toggleStyles), { isChecked: mode === TreeFindMode.Filter })));\n        this.matchTypeToggle = this._register(new FuzzyToggle(Object.assign(Object.assign({}, styles.toggleStyles), { isChecked: matchType === TreeFindMatchType.Fuzzy })));\n        this.onDidChangeMode = Event.map(this.modeToggle.onChange, () => this.modeToggle.checked ? TreeFindMode.Filter : TreeFindMode.Highlight, this._store);\n        this.onDidChangeMatchType = Event.map(this.matchTypeToggle.onChange, () => this.matchTypeToggle.checked ? TreeFindMatchType.Fuzzy : TreeFindMatchType.Contiguous, this._store);\n        this.findInput = this._register(new FindInput(this.elements.findInput, contextViewProvider, {\n            label: localize('type to search', \"Type to search\"),\n            additionalToggles: [this.modeToggle, this.matchTypeToggle],\n            showCommonFindToggles: false,\n            inputBoxStyles: styles.inputBoxStyles,\n            toggleStyles: styles.toggleStyles,\n            history: options === null || options === void 0 ? void 0 : options.history\n        }));\n        this.actionbar = this._register(new ActionBar(this.elements.actionbar));\n        this.mode = mode;\n        const emitter = this._register(new DomEmitter(this.findInput.inputBox.inputElement, 'keydown'));\n        const onKeyDown = Event.chain(emitter.event, $ => $.map(e => new StandardKeyboardEvent(e)));\n        this._register(onKeyDown((e) => {\n            // Using equals() so we reserve modified keys for future use\n            if (e.equals(3 /* KeyCode.Enter */)) {\n                // This is the only keyboard way to return to the tree from a history item that isn't the last one\n                e.preventDefault();\n                e.stopPropagation();\n                this.findInput.inputBox.addToHistory();\n                this.tree.domFocus();\n                return;\n            }\n            if (e.equals(18 /* KeyCode.DownArrow */)) {\n                e.preventDefault();\n                e.stopPropagation();\n                if (this.findInput.inputBox.isAtLastInHistory() || this.findInput.inputBox.isNowhereInHistory()) {\n                    // Retain original pre-history DownArrow behavior\n                    this.findInput.inputBox.addToHistory();\n                    this.tree.domFocus();\n                }\n                else {\n                    // Downward through history\n                    this.findInput.inputBox.showNextValue();\n                }\n                return;\n            }\n            if (e.equals(16 /* KeyCode.UpArrow */)) {\n                e.preventDefault();\n                e.stopPropagation();\n                // Upward through history\n                this.findInput.inputBox.showPreviousValue();\n                return;\n            }\n        }));\n        const closeAction = this._register(new Action('close', localize('close', \"Close\"), 'codicon codicon-close', true, () => this.dispose()));\n        this.actionbar.push(closeAction, { icon: true, label: false });\n        const onGrabMouseDown = this._register(new DomEmitter(this.elements.grab, 'mousedown'));\n        this._register(onGrabMouseDown.event(e => {\n            const disposables = new DisposableStore();\n            const onWindowMouseMove = disposables.add(new DomEmitter(window, 'mousemove'));\n            const onWindowMouseUp = disposables.add(new DomEmitter(window, 'mouseup'));\n            const startRight = this.right;\n            const startX = e.pageX;\n            const startTop = this.top;\n            const startY = e.pageY;\n            this.elements.grab.classList.add('grabbing');\n            const transition = this.elements.root.style.transition;\n            this.elements.root.style.transition = 'unset';\n            const update = (e) => {\n                const deltaX = e.pageX - startX;\n                this.right = startRight - deltaX;\n                const deltaY = e.pageY - startY;\n                this.top = startTop + deltaY;\n                this.layout();\n            };\n            disposables.add(onWindowMouseMove.event(update));\n            disposables.add(onWindowMouseUp.event(e => {\n                update(e);\n                this.elements.grab.classList.remove('grabbing');\n                this.elements.root.style.transition = transition;\n                disposables.dispose();\n            }));\n        }));\n        const onGrabKeyDown = Event.chain(this._register(new DomEmitter(this.elements.grab, 'keydown')).event, $ => $.map(e => new StandardKeyboardEvent(e)));\n        this._register(onGrabKeyDown((e) => {\n            let right;\n            let top;\n            if (e.keyCode === 15 /* KeyCode.LeftArrow */) {\n                right = Number.POSITIVE_INFINITY;\n            }\n            else if (e.keyCode === 17 /* KeyCode.RightArrow */) {\n                right = 0;\n            }\n            else if (e.keyCode === 10 /* KeyCode.Space */) {\n                right = this.right === 0 ? Number.POSITIVE_INFINITY : 0;\n            }\n            if (e.keyCode === 16 /* KeyCode.UpArrow */) {\n                top = 0;\n            }\n            else if (e.keyCode === 18 /* KeyCode.DownArrow */) {\n                top = Number.POSITIVE_INFINITY;\n            }\n            if (right !== undefined) {\n                e.preventDefault();\n                e.stopPropagation();\n                this.right = right;\n                this.layout();\n            }\n            if (top !== undefined) {\n                e.preventDefault();\n                e.stopPropagation();\n                this.top = top;\n                const transition = this.elements.root.style.transition;\n                this.elements.root.style.transition = 'unset';\n                this.layout();\n                setTimeout(() => {\n                    this.elements.root.style.transition = transition;\n                }, 0);\n            }\n        }));\n        this.onDidChangeValue = this.findInput.onDidChange;\n    }\n    layout(width = this.width) {\n        this.width = width;\n        this.right = clamp(this.right, 0, Math.max(0, width - 212));\n        this.elements.root.style.right = `${this.right}px`;\n        this.top = clamp(this.top, 0, 24);\n        this.elements.root.style.top = `${this.top}px`;\n    }\n    showMessage(message) {\n        this.findInput.showMessage(message);\n    }\n    clearMessage() {\n        this.findInput.clearMessage();\n    }\n    dispose() {\n        const _super = Object.create(null, {\n            dispose: { get: () => super.dispose }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            this._onDidDisable.fire();\n            this.elements.root.classList.add('disabled');\n            yield timeout(300);\n            _super.dispose.call(this);\n        });\n    }\n}\nclass FindController {\n    get pattern() { return this._pattern; }\n    get mode() { return this._mode; }\n    set mode(mode) {\n        if (mode === this._mode) {\n            return;\n        }\n        this._mode = mode;\n        if (this.widget) {\n            this.widget.mode = this._mode;\n        }\n        this.tree.refilter();\n        this.render();\n        this._onDidChangeMode.fire(mode);\n    }\n    get matchType() { return this._matchType; }\n    set matchType(matchType) {\n        if (matchType === this._matchType) {\n            return;\n        }\n        this._matchType = matchType;\n        if (this.widget) {\n            this.widget.matchType = this._matchType;\n        }\n        this.tree.refilter();\n        this.render();\n        this._onDidChangeMatchType.fire(matchType);\n    }\n    constructor(tree, model, view, filter, contextViewProvider, options = {}) {\n        var _a, _b;\n        this.tree = tree;\n        this.view = view;\n        this.filter = filter;\n        this.contextViewProvider = contextViewProvider;\n        this.options = options;\n        this._pattern = '';\n        this.width = 0;\n        this._onDidChangeMode = new Emitter();\n        this.onDidChangeMode = this._onDidChangeMode.event;\n        this._onDidChangeMatchType = new Emitter();\n        this.onDidChangeMatchType = this._onDidChangeMatchType.event;\n        this._onDidChangePattern = new Emitter();\n        this._onDidChangeOpenState = new Emitter();\n        this.onDidChangeOpenState = this._onDidChangeOpenState.event;\n        this.enabledDisposables = new DisposableStore();\n        this.disposables = new DisposableStore();\n        this._mode = (_a = tree.options.defaultFindMode) !== null && _a !== void 0 ? _a : TreeFindMode.Highlight;\n        this._matchType = (_b = tree.options.defaultFindMatchType) !== null && _b !== void 0 ? _b : TreeFindMatchType.Fuzzy;\n        model.onDidSplice(this.onDidSpliceModel, this, this.disposables);\n    }\n    updateOptions(optionsUpdate = {}) {\n        if (optionsUpdate.defaultFindMode !== undefined) {\n            this.mode = optionsUpdate.defaultFindMode;\n        }\n        if (optionsUpdate.defaultFindMatchType !== undefined) {\n            this.matchType = optionsUpdate.defaultFindMatchType;\n        }\n    }\n    onDidSpliceModel() {\n        if (!this.widget || this.pattern.length === 0) {\n            return;\n        }\n        this.tree.refilter();\n        this.render();\n    }\n    render() {\n        var _a, _b, _c, _d;\n        const noMatches = this.filter.totalCount > 0 && this.filter.matchCount === 0;\n        if (this.pattern && noMatches) {\n            if ((_a = this.tree.options.showNotFoundMessage) !== null && _a !== void 0 ? _a : true) {\n                (_b = this.widget) === null || _b === void 0 ? void 0 : _b.showMessage({ type: 2 /* MessageType.WARNING */, content: localize('not found', \"No elements found.\") });\n            }\n            else {\n                (_c = this.widget) === null || _c === void 0 ? void 0 : _c.showMessage({ type: 2 /* MessageType.WARNING */ });\n            }\n        }\n        else {\n            (_d = this.widget) === null || _d === void 0 ? void 0 : _d.clearMessage();\n        }\n    }\n    shouldAllowFocus(node) {\n        if (!this.widget || !this.pattern || this._mode === TreeFindMode.Filter) {\n            return true;\n        }\n        if (this.filter.totalCount > 0 && this.filter.matchCount <= 1) {\n            return true;\n        }\n        return !FuzzyScore.isDefault(node.filterData);\n    }\n    layout(width) {\n        var _a;\n        this.width = width;\n        (_a = this.widget) === null || _a === void 0 ? void 0 : _a.layout(width);\n    }\n    dispose() {\n        this._history = undefined;\n        this._onDidChangePattern.dispose();\n        this.enabledDisposables.dispose();\n        this.disposables.dispose();\n    }\n}\nfunction asTreeMouseEvent(event) {\n    let target = TreeMouseEventTarget.Unknown;\n    if (hasParentWithClass(event.browserEvent.target, 'monaco-tl-twistie', 'monaco-tl-row')) {\n        target = TreeMouseEventTarget.Twistie;\n    }\n    else if (hasParentWithClass(event.browserEvent.target, 'monaco-tl-contents', 'monaco-tl-row')) {\n        target = TreeMouseEventTarget.Element;\n    }\n    else if (hasParentWithClass(event.browserEvent.target, 'monaco-tree-type-filter', 'monaco-list')) {\n        target = TreeMouseEventTarget.Filter;\n    }\n    return {\n        browserEvent: event.browserEvent,\n        element: event.element ? event.element.element : null,\n        target\n    };\n}\nfunction dfs(node, fn) {\n    fn(node);\n    node.children.forEach(child => dfs(child, fn));\n}\n/**\n * The trait concept needs to exist at the tree level, because collapsed\n * tree nodes will not be known by the list.\n */\nclass Trait {\n    get nodeSet() {\n        if (!this._nodeSet) {\n            this._nodeSet = this.createNodeSet();\n        }\n        return this._nodeSet;\n    }\n    constructor(getFirstViewElementWithTrait, identityProvider) {\n        this.getFirstViewElementWithTrait = getFirstViewElementWithTrait;\n        this.identityProvider = identityProvider;\n        this.nodes = [];\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n    }\n    set(nodes, browserEvent) {\n        if (!(browserEvent === null || browserEvent === void 0 ? void 0 : browserEvent.__forceEvent) && equals(this.nodes, nodes)) {\n            return;\n        }\n        this._set(nodes, false, browserEvent);\n    }\n    _set(nodes, silent, browserEvent) {\n        this.nodes = [...nodes];\n        this.elements = undefined;\n        this._nodeSet = undefined;\n        if (!silent) {\n            const that = this;\n            this._onDidChange.fire({ get elements() { return that.get(); }, browserEvent });\n        }\n    }\n    get() {\n        if (!this.elements) {\n            this.elements = this.nodes.map(node => node.element);\n        }\n        return [...this.elements];\n    }\n    getNodes() {\n        return this.nodes;\n    }\n    has(node) {\n        return this.nodeSet.has(node);\n    }\n    onDidModelSplice({ insertedNodes, deletedNodes }) {\n        if (!this.identityProvider) {\n            const set = this.createNodeSet();\n            const visit = (node) => set.delete(node);\n            deletedNodes.forEach(node => dfs(node, visit));\n            this.set([...set.values()]);\n            return;\n        }\n        const deletedNodesIdSet = new Set();\n        const deletedNodesVisitor = (node) => deletedNodesIdSet.add(this.identityProvider.getId(node.element).toString());\n        deletedNodes.forEach(node => dfs(node, deletedNodesVisitor));\n        const insertedNodesMap = new Map();\n        const insertedNodesVisitor = (node) => insertedNodesMap.set(this.identityProvider.getId(node.element).toString(), node);\n        insertedNodes.forEach(node => dfs(node, insertedNodesVisitor));\n        const nodes = [];\n        for (const node of this.nodes) {\n            const id = this.identityProvider.getId(node.element).toString();\n            const wasDeleted = deletedNodesIdSet.has(id);\n            if (!wasDeleted) {\n                nodes.push(node);\n            }\n            else {\n                const insertedNode = insertedNodesMap.get(id);\n                if (insertedNode && insertedNode.visible) {\n                    nodes.push(insertedNode);\n                }\n            }\n        }\n        if (this.nodes.length > 0 && nodes.length === 0) {\n            const node = this.getFirstViewElementWithTrait();\n            if (node) {\n                nodes.push(node);\n            }\n        }\n        this._set(nodes, true);\n    }\n    createNodeSet() {\n        const set = new Set();\n        for (const node of this.nodes) {\n            set.add(node);\n        }\n        return set;\n    }\n}\nclass TreeNodeListMouseController extends MouseController {\n    constructor(list, tree) {\n        super(list);\n        this.tree = tree;\n    }\n    onViewPointer(e) {\n        if (isButton(e.browserEvent.target) ||\n            isInputElement(e.browserEvent.target) ||\n            isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (e.browserEvent.isHandledByList) {\n            return;\n        }\n        const node = e.element;\n        if (!node) {\n            return super.onViewPointer(e);\n        }\n        if (this.isSelectionRangeChangeEvent(e) || this.isSelectionSingleChangeEvent(e)) {\n            return super.onViewPointer(e);\n        }\n        const target = e.browserEvent.target;\n        const onTwistie = target.classList.contains('monaco-tl-twistie')\n            || (target.classList.contains('monaco-icon-label') && target.classList.contains('folder-icon') && e.browserEvent.offsetX < 16);\n        let expandOnlyOnTwistieClick = false;\n        if (typeof this.tree.expandOnlyOnTwistieClick === 'function') {\n            expandOnlyOnTwistieClick = this.tree.expandOnlyOnTwistieClick(node.element);\n        }\n        else {\n            expandOnlyOnTwistieClick = !!this.tree.expandOnlyOnTwistieClick;\n        }\n        if (expandOnlyOnTwistieClick && !onTwistie && e.browserEvent.detail !== 2) {\n            return super.onViewPointer(e);\n        }\n        if (!this.tree.expandOnDoubleClick && e.browserEvent.detail === 2) {\n            return super.onViewPointer(e);\n        }\n        if (node.collapsible) {\n            const location = this.tree.getNodeLocation(node);\n            const recursive = e.browserEvent.altKey;\n            this.tree.setFocus([location]);\n            this.tree.toggleCollapsed(location, recursive);\n            if (expandOnlyOnTwistieClick && onTwistie) {\n                // Do not set this before calling a handler on the super class, because it will reject it as handled\n                e.browserEvent.isHandledByList = true;\n                return;\n            }\n        }\n        super.onViewPointer(e);\n    }\n    onDoubleClick(e) {\n        const onTwistie = e.browserEvent.target.classList.contains('monaco-tl-twistie');\n        if (onTwistie || !this.tree.expandOnDoubleClick) {\n            return;\n        }\n        if (e.browserEvent.isHandledByList) {\n            return;\n        }\n        super.onDoubleClick(e);\n    }\n}\n/**\n * We use this List subclass to restore selection and focus as nodes\n * get rendered in the list, possibly due to a node expand() call.\n */\nclass TreeNodeList extends List {\n    constructor(user, container, virtualDelegate, renderers, focusTrait, selectionTrait, anchorTrait, options) {\n        super(user, container, virtualDelegate, renderers, options);\n        this.focusTrait = focusTrait;\n        this.selectionTrait = selectionTrait;\n        this.anchorTrait = anchorTrait;\n    }\n    createMouseController(options) {\n        return new TreeNodeListMouseController(this, options.tree);\n    }\n    splice(start, deleteCount, elements = []) {\n        super.splice(start, deleteCount, elements);\n        if (elements.length === 0) {\n            return;\n        }\n        const additionalFocus = [];\n        const additionalSelection = [];\n        let anchor;\n        elements.forEach((node, index) => {\n            if (this.focusTrait.has(node)) {\n                additionalFocus.push(start + index);\n            }\n            if (this.selectionTrait.has(node)) {\n                additionalSelection.push(start + index);\n            }\n            if (this.anchorTrait.has(node)) {\n                anchor = start + index;\n            }\n        });\n        if (additionalFocus.length > 0) {\n            super.setFocus(distinct([...super.getFocus(), ...additionalFocus]));\n        }\n        if (additionalSelection.length > 0) {\n            super.setSelection(distinct([...super.getSelection(), ...additionalSelection]));\n        }\n        if (typeof anchor === 'number') {\n            super.setAnchor(anchor);\n        }\n    }\n    setFocus(indexes, browserEvent, fromAPI = false) {\n        super.setFocus(indexes, browserEvent);\n        if (!fromAPI) {\n            this.focusTrait.set(indexes.map(i => this.element(i)), browserEvent);\n        }\n    }\n    setSelection(indexes, browserEvent, fromAPI = false) {\n        super.setSelection(indexes, browserEvent);\n        if (!fromAPI) {\n            this.selectionTrait.set(indexes.map(i => this.element(i)), browserEvent);\n        }\n    }\n    setAnchor(index, fromAPI = false) {\n        super.setAnchor(index);\n        if (!fromAPI) {\n            if (typeof index === 'undefined') {\n                this.anchorTrait.set([]);\n            }\n            else {\n                this.anchorTrait.set([this.element(index)]);\n            }\n        }\n    }\n}\nexport class AbstractTree {\n    get onDidScroll() { return this.view.onDidScroll; }\n    get onDidChangeFocus() { return this.eventBufferer.wrapEvent(this.focus.onDidChange); }\n    get onDidChangeSelection() { return this.eventBufferer.wrapEvent(this.selection.onDidChange); }\n    get onMouseDblClick() { return Event.filter(Event.map(this.view.onMouseDblClick, asTreeMouseEvent), e => e.target !== TreeMouseEventTarget.Filter); }\n    get onPointer() { return Event.map(this.view.onPointer, asTreeMouseEvent); }\n    get onDidFocus() { return this.view.onDidFocus; }\n    get onDidChangeModel() { return Event.signal(this.model.onDidSplice); }\n    get onDidChangeCollapseState() { return this.model.onDidChangeCollapseState; }\n    get findMode() { var _a, _b; return (_b = (_a = this.findController) === null || _a === void 0 ? void 0 : _a.mode) !== null && _b !== void 0 ? _b : TreeFindMode.Highlight; }\n    set findMode(findMode) { if (this.findController) {\n        this.findController.mode = findMode;\n    } }\n    get findMatchType() { var _a, _b; return (_b = (_a = this.findController) === null || _a === void 0 ? void 0 : _a.matchType) !== null && _b !== void 0 ? _b : TreeFindMatchType.Fuzzy; }\n    set findMatchType(findFuzzy) { if (this.findController) {\n        this.findController.matchType = findFuzzy;\n    } }\n    get expandOnDoubleClick() { return typeof this._options.expandOnDoubleClick === 'undefined' ? true : this._options.expandOnDoubleClick; }\n    get expandOnlyOnTwistieClick() { return typeof this._options.expandOnlyOnTwistieClick === 'undefined' ? true : this._options.expandOnlyOnTwistieClick; }\n    get onDidDispose() { return this.view.onDidDispose; }\n    constructor(_user, container, delegate, renderers, _options = {}) {\n        var _a;\n        this._user = _user;\n        this._options = _options;\n        this.eventBufferer = new EventBufferer();\n        this.onDidChangeFindOpenState = Event.None;\n        this.disposables = new DisposableStore();\n        this._onWillRefilter = new Emitter();\n        this.onWillRefilter = this._onWillRefilter.event;\n        this._onDidUpdateOptions = new Emitter();\n        const treeDelegate = new ComposedTreeDelegate(delegate);\n        const onDidChangeCollapseStateRelay = new Relay();\n        const onDidChangeActiveNodes = new Relay();\n        const activeNodes = this.disposables.add(new EventCollection(onDidChangeActiveNodes.event));\n        const renderedIndentGuides = new SetMap();\n        this.renderers = renderers.map(r => new TreeRenderer(r, () => this.model, onDidChangeCollapseStateRelay.event, activeNodes, renderedIndentGuides, _options));\n        for (const r of this.renderers) {\n            this.disposables.add(r);\n        }\n        let filter;\n        if (_options.keyboardNavigationLabelProvider) {\n            filter = new FindFilter(this, _options.keyboardNavigationLabelProvider, _options.filter);\n            _options = Object.assign(Object.assign({}, _options), { filter: filter }); // TODO need typescript help here\n            this.disposables.add(filter);\n        }\n        this.focus = new Trait(() => this.view.getFocusedElements()[0], _options.identityProvider);\n        this.selection = new Trait(() => this.view.getSelectedElements()[0], _options.identityProvider);\n        this.anchor = new Trait(() => this.view.getAnchorElement(), _options.identityProvider);\n        this.view = new TreeNodeList(_user, container, treeDelegate, this.renderers, this.focus, this.selection, this.anchor, Object.assign(Object.assign({}, asListOptions(() => this.model, _options)), { tree: this }));\n        this.model = this.createModel(_user, this.view, _options);\n        onDidChangeCollapseStateRelay.input = this.model.onDidChangeCollapseState;\n        const onDidModelSplice = Event.forEach(this.model.onDidSplice, e => {\n            this.eventBufferer.bufferEvents(() => {\n                this.focus.onDidModelSplice(e);\n                this.selection.onDidModelSplice(e);\n            });\n        }, this.disposables);\n        // Make sure the `forEach` always runs\n        onDidModelSplice(() => null, null, this.disposables);\n        // Active nodes can change when the model changes or when focus or selection change.\n        // We debounce it with 0 delay since these events may fire in the same stack and we only\n        // want to run this once. It also doesn't matter if it runs on the next tick since it's only\n        // a nice to have UI feature.\n        const activeNodesEmitter = this.disposables.add(new Emitter());\n        const activeNodesDebounce = this.disposables.add(new Delayer(0));\n        this.disposables.add(Event.any(onDidModelSplice, this.focus.onDidChange, this.selection.onDidChange)(() => {\n            activeNodesDebounce.trigger(() => {\n                const set = new Set();\n                for (const node of this.focus.getNodes()) {\n                    set.add(node);\n                }\n                for (const node of this.selection.getNodes()) {\n                    set.add(node);\n                }\n                activeNodesEmitter.fire([...set.values()]);\n            });\n        }));\n        onDidChangeActiveNodes.input = activeNodesEmitter.event;\n        if (_options.keyboardSupport !== false) {\n            const onKeyDown = Event.chain(this.view.onKeyDown, $ => $.filter(e => !isInputElement(e.target))\n                .map(e => new StandardKeyboardEvent(e)));\n            Event.chain(onKeyDown, $ => $.filter(e => e.keyCode === 15 /* KeyCode.LeftArrow */))(this.onLeftArrow, this, this.disposables);\n            Event.chain(onKeyDown, $ => $.filter(e => e.keyCode === 17 /* KeyCode.RightArrow */))(this.onRightArrow, this, this.disposables);\n            Event.chain(onKeyDown, $ => $.filter(e => e.keyCode === 10 /* KeyCode.Space */))(this.onSpace, this, this.disposables);\n        }\n        if (((_a = _options.findWidgetEnabled) !== null && _a !== void 0 ? _a : true) && _options.keyboardNavigationLabelProvider && _options.contextViewProvider) {\n            const opts = this.options.findWidgetStyles ? { styles: this.options.findWidgetStyles } : undefined;\n            this.findController = new FindController(this, this.model, this.view, filter, _options.contextViewProvider, opts);\n            this.focusNavigationFilter = node => this.findController.shouldAllowFocus(node);\n            this.onDidChangeFindOpenState = this.findController.onDidChangeOpenState;\n            this.disposables.add(this.findController);\n            this.onDidChangeFindMode = this.findController.onDidChangeMode;\n            this.onDidChangeFindMatchType = this.findController.onDidChangeMatchType;\n        }\n        else {\n            this.onDidChangeFindMode = Event.None;\n            this.onDidChangeFindMatchType = Event.None;\n        }\n        this.styleElement = createStyleSheet(this.view.getHTMLElement());\n        this.getHTMLElement().classList.toggle('always', this._options.renderIndentGuides === RenderIndentGuides.Always);\n    }\n    updateOptions(optionsUpdate = {}) {\n        var _a;\n        this._options = Object.assign(Object.assign({}, this._options), optionsUpdate);\n        for (const renderer of this.renderers) {\n            renderer.updateOptions(optionsUpdate);\n        }\n        this.view.updateOptions(this._options);\n        (_a = this.findController) === null || _a === void 0 ? void 0 : _a.updateOptions(optionsUpdate);\n        this._onDidUpdateOptions.fire(this._options);\n        this.getHTMLElement().classList.toggle('always', this._options.renderIndentGuides === RenderIndentGuides.Always);\n    }\n    get options() {\n        return this._options;\n    }\n    // Widget\n    getHTMLElement() {\n        return this.view.getHTMLElement();\n    }\n    get scrollTop() {\n        return this.view.scrollTop;\n    }\n    set scrollTop(scrollTop) {\n        this.view.scrollTop = scrollTop;\n    }\n    get scrollHeight() {\n        return this.view.scrollHeight;\n    }\n    get renderHeight() {\n        return this.view.renderHeight;\n    }\n    domFocus() {\n        this.view.domFocus();\n    }\n    layout(height, width) {\n        var _a;\n        this.view.layout(height, width);\n        if (isNumber(width)) {\n            (_a = this.findController) === null || _a === void 0 ? void 0 : _a.layout(width);\n        }\n    }\n    style(styles) {\n        const suffix = `.${this.view.domId}`;\n        const content = [];\n        if (styles.treeIndentGuidesStroke) {\n            content.push(`.monaco-list${suffix}:hover .monaco-tl-indent > .indent-guide, .monaco-list${suffix}.always .monaco-tl-indent > .indent-guide  { border-color: ${styles.treeInactiveIndentGuidesStroke}; }`);\n            content.push(`.monaco-list${suffix} .monaco-tl-indent > .indent-guide.active { border-color: ${styles.treeIndentGuidesStroke}; }`);\n        }\n        this.styleElement.textContent = content.join('\\n');\n        this.view.style(styles);\n    }\n    // Tree navigation\n    getParentElement(location) {\n        const parentRef = this.model.getParentNodeLocation(location);\n        const parentNode = this.model.getNode(parentRef);\n        return parentNode.element;\n    }\n    getFirstElementChild(location) {\n        return this.model.getFirstElementChild(location);\n    }\n    // Tree\n    getNode(location) {\n        return this.model.getNode(location);\n    }\n    getNodeLocation(node) {\n        return this.model.getNodeLocation(node);\n    }\n    collapse(location, recursive = false) {\n        return this.model.setCollapsed(location, true, recursive);\n    }\n    expand(location, recursive = false) {\n        return this.model.setCollapsed(location, false, recursive);\n    }\n    toggleCollapsed(location, recursive = false) {\n        return this.model.setCollapsed(location, undefined, recursive);\n    }\n    isCollapsible(location) {\n        return this.model.isCollapsible(location);\n    }\n    setCollapsible(location, collapsible) {\n        return this.model.setCollapsible(location, collapsible);\n    }\n    isCollapsed(location) {\n        return this.model.isCollapsed(location);\n    }\n    refilter() {\n        this._onWillRefilter.fire(undefined);\n        this.model.refilter();\n    }\n    setSelection(elements, browserEvent) {\n        const nodes = elements.map(e => this.model.getNode(e));\n        this.selection.set(nodes, browserEvent);\n        const indexes = elements.map(e => this.model.getListIndex(e)).filter(i => i > -1);\n        this.view.setSelection(indexes, browserEvent, true);\n    }\n    getSelection() {\n        return this.selection.get();\n    }\n    setFocus(elements, browserEvent) {\n        const nodes = elements.map(e => this.model.getNode(e));\n        this.focus.set(nodes, browserEvent);\n        const indexes = elements.map(e => this.model.getListIndex(e)).filter(i => i > -1);\n        this.view.setFocus(indexes, browserEvent, true);\n    }\n    getFocus() {\n        return this.focus.get();\n    }\n    reveal(location, relativeTop) {\n        this.model.expandTo(location);\n        const index = this.model.getListIndex(location);\n        if (index === -1) {\n            return;\n        }\n        this.view.reveal(index, relativeTop);\n    }\n    // List\n    onLeftArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        const nodes = this.view.getFocusedElements();\n        if (nodes.length === 0) {\n            return;\n        }\n        const node = nodes[0];\n        const location = this.model.getNodeLocation(node);\n        const didChange = this.model.setCollapsed(location, true);\n        if (!didChange) {\n            const parentLocation = this.model.getParentNodeLocation(location);\n            if (!parentLocation) {\n                return;\n            }\n            const parentListIndex = this.model.getListIndex(parentLocation);\n            this.view.reveal(parentListIndex);\n            this.view.setFocus([parentListIndex]);\n        }\n    }\n    onRightArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        const nodes = this.view.getFocusedElements();\n        if (nodes.length === 0) {\n            return;\n        }\n        const node = nodes[0];\n        const location = this.model.getNodeLocation(node);\n        const didChange = this.model.setCollapsed(location, false);\n        if (!didChange) {\n            if (!node.children.some(child => child.visible)) {\n                return;\n            }\n            const [focusedIndex] = this.view.getFocus();\n            const firstChildIndex = focusedIndex + 1;\n            this.view.reveal(firstChildIndex);\n            this.view.setFocus([firstChildIndex]);\n        }\n    }\n    onSpace(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        const nodes = this.view.getFocusedElements();\n        if (nodes.length === 0) {\n            return;\n        }\n        const node = nodes[0];\n        const location = this.model.getNodeLocation(node);\n        const recursive = e.browserEvent.altKey;\n        this.model.setCollapsed(location, undefined, recursive);\n    }\n    dispose() {\n        dispose(this.disposables);\n        this.view.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ElementsDragAndDropData } from '../list/listView.js';\nimport { ComposedTreeDelegate } from './abstractTree.js';\nimport { getVisibleState, isFilterResult } from './indexTreeModel.js';\nimport { CompressibleObjectTree, ObjectTree } from './objectTree.js';\nimport { TreeError, WeakMapper } from './tree.js';\nimport { createCancelablePromise, Promises, timeout } from '../../../common/async.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { isCancellationError, onUnexpectedError } from '../../../common/errors.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { Iterable } from '../../../common/iterator.js';\nimport { DisposableStore, dispose } from '../../../common/lifecycle.js';\nimport { isIterable } from '../../../common/types.js';\nfunction createAsyncDataTreeNode(props) {\n    return Object.assign(Object.assign({}, props), { children: [], refreshPromise: undefined, stale: true, slow: false, collapsedByDefault: undefined });\n}\nfunction isAncestor(ancestor, descendant) {\n    if (!descendant.parent) {\n        return false;\n    }\n    else if (descendant.parent === ancestor) {\n        return true;\n    }\n    else {\n        return isAncestor(ancestor, descendant.parent);\n    }\n}\nfunction intersects(node, other) {\n    return node === other || isAncestor(node, other) || isAncestor(other, node);\n}\nclass AsyncDataTreeNodeWrapper {\n    get element() { return this.node.element.element; }\n    get children() { return this.node.children.map(node => new AsyncDataTreeNodeWrapper(node)); }\n    get depth() { return this.node.depth; }\n    get visibleChildrenCount() { return this.node.visibleChildrenCount; }\n    get visibleChildIndex() { return this.node.visibleChildIndex; }\n    get collapsible() { return this.node.collapsible; }\n    get collapsed() { return this.node.collapsed; }\n    get visible() { return this.node.visible; }\n    get filterData() { return this.node.filterData; }\n    constructor(node) {\n        this.node = node;\n    }\n}\nclass AsyncDataTreeRenderer {\n    constructor(renderer, nodeMapper, onDidChangeTwistieState) {\n        this.renderer = renderer;\n        this.nodeMapper = nodeMapper;\n        this.onDidChangeTwistieState = onDidChangeTwistieState;\n        this.renderedNodes = new Map();\n        this.templateId = renderer.templateId;\n    }\n    renderTemplate(container) {\n        const templateData = this.renderer.renderTemplate(container);\n        return { templateData };\n    }\n    renderElement(node, index, templateData, height) {\n        this.renderer.renderElement(this.nodeMapper.map(node), index, templateData.templateData, height);\n    }\n    renderTwistie(element, twistieElement) {\n        if (element.slow) {\n            twistieElement.classList.add(...ThemeIcon.asClassNameArray(Codicon.treeItemLoading));\n            return true;\n        }\n        else {\n            twistieElement.classList.remove(...ThemeIcon.asClassNameArray(Codicon.treeItemLoading));\n            return false;\n        }\n    }\n    disposeElement(node, index, templateData, height) {\n        var _a, _b;\n        (_b = (_a = this.renderer).disposeElement) === null || _b === void 0 ? void 0 : _b.call(_a, this.nodeMapper.map(node), index, templateData.templateData, height);\n    }\n    disposeTemplate(templateData) {\n        this.renderer.disposeTemplate(templateData.templateData);\n    }\n    dispose() {\n        this.renderedNodes.clear();\n    }\n}\nfunction asTreeEvent(e) {\n    return {\n        browserEvent: e.browserEvent,\n        elements: e.elements.map(e => e.element)\n    };\n}\nfunction asTreeMouseEvent(e) {\n    return {\n        browserEvent: e.browserEvent,\n        element: e.element && e.element.element,\n        target: e.target\n    };\n}\nclass AsyncDataTreeElementsDragAndDropData extends ElementsDragAndDropData {\n    constructor(data) {\n        super(data.elements.map(node => node.element));\n        this.data = data;\n    }\n}\nfunction asAsyncDataTreeDragAndDropData(data) {\n    if (data instanceof ElementsDragAndDropData) {\n        return new AsyncDataTreeElementsDragAndDropData(data);\n    }\n    return data;\n}\nclass AsyncDataTreeNodeListDragAndDrop {\n    constructor(dnd) {\n        this.dnd = dnd;\n    }\n    getDragURI(node) {\n        return this.dnd.getDragURI(node.element);\n    }\n    getDragLabel(nodes, originalEvent) {\n        if (this.dnd.getDragLabel) {\n            return this.dnd.getDragLabel(nodes.map(node => node.element), originalEvent);\n        }\n        return undefined;\n    }\n    onDragStart(data, originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, asAsyncDataTreeDragAndDropData(data), originalEvent);\n    }\n    onDragOver(data, targetNode, targetIndex, originalEvent, raw = true) {\n        return this.dnd.onDragOver(asAsyncDataTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\n    }\n    drop(data, targetNode, targetIndex, originalEvent) {\n        this.dnd.drop(asAsyncDataTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\n    }\n    onDragEnd(originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, originalEvent);\n    }\n    dispose() {\n        this.dnd.dispose();\n    }\n}\nfunction asObjectTreeOptions(options) {\n    return options && Object.assign(Object.assign({}, options), { collapseByDefault: true, identityProvider: options.identityProvider && {\n            getId(el) {\n                return options.identityProvider.getId(el.element);\n            }\n        }, dnd: options.dnd && new AsyncDataTreeNodeListDragAndDrop(options.dnd), multipleSelectionController: options.multipleSelectionController && {\n            isSelectionSingleChangeEvent(e) {\n                return options.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({}, e), { element: e.element }));\n            },\n            isSelectionRangeChangeEvent(e) {\n                return options.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({}, e), { element: e.element }));\n            }\n        }, accessibilityProvider: options.accessibilityProvider && Object.assign(Object.assign({}, options.accessibilityProvider), { getPosInSet: undefined, getSetSize: undefined, getRole: options.accessibilityProvider.getRole ? (el) => {\n                return options.accessibilityProvider.getRole(el.element);\n            } : () => 'treeitem', isChecked: options.accessibilityProvider.isChecked ? (e) => {\n                var _a;\n                return !!((_a = options.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.isChecked(e.element));\n            } : undefined, getAriaLabel(e) {\n                return options.accessibilityProvider.getAriaLabel(e.element);\n            },\n            getWidgetAriaLabel() {\n                return options.accessibilityProvider.getWidgetAriaLabel();\n            }, getWidgetRole: options.accessibilityProvider.getWidgetRole ? () => options.accessibilityProvider.getWidgetRole() : () => 'tree', getAriaLevel: options.accessibilityProvider.getAriaLevel && (node => {\n                return options.accessibilityProvider.getAriaLevel(node.element);\n            }), getActiveDescendantId: options.accessibilityProvider.getActiveDescendantId && (node => {\n                return options.accessibilityProvider.getActiveDescendantId(node.element);\n            }) }), filter: options.filter && {\n            filter(e, parentVisibility) {\n                return options.filter.filter(e.element, parentVisibility);\n            }\n        }, keyboardNavigationLabelProvider: options.keyboardNavigationLabelProvider && Object.assign(Object.assign({}, options.keyboardNavigationLabelProvider), { getKeyboardNavigationLabel(e) {\n                return options.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element);\n            } }), sorter: undefined, expandOnlyOnTwistieClick: typeof options.expandOnlyOnTwistieClick === 'undefined' ? undefined : (typeof options.expandOnlyOnTwistieClick !== 'function' ? options.expandOnlyOnTwistieClick : (e => options.expandOnlyOnTwistieClick(e.element))), defaultFindVisibility: e => {\n            if (e.hasChildren && e.stale) {\n                return 1 /* TreeVisibility.Visible */;\n            }\n            else if (typeof options.defaultFindVisibility === 'number') {\n                return options.defaultFindVisibility;\n            }\n            else if (typeof options.defaultFindVisibility === 'undefined') {\n                return 2 /* TreeVisibility.Recurse */;\n            }\n            else {\n                return options.defaultFindVisibility(e.element);\n            }\n        } });\n}\nfunction dfs(node, fn) {\n    fn(node);\n    node.children.forEach(child => dfs(child, fn));\n}\nexport class AsyncDataTree {\n    get onDidScroll() { return this.tree.onDidScroll; }\n    get onDidChangeFocus() { return Event.map(this.tree.onDidChangeFocus, asTreeEvent); }\n    get onDidChangeSelection() { return Event.map(this.tree.onDidChangeSelection, asTreeEvent); }\n    get onMouseDblClick() { return Event.map(this.tree.onMouseDblClick, asTreeMouseEvent); }\n    get onPointer() { return Event.map(this.tree.onPointer, asTreeMouseEvent); }\n    get onDidFocus() { return this.tree.onDidFocus; }\n    /**\n     * To be used internally only!\n     * @deprecated\n     */\n    get onDidChangeModel() { return this.tree.onDidChangeModel; }\n    get onDidChangeCollapseState() { return this.tree.onDidChangeCollapseState; }\n    get onDidChangeFindOpenState() { return this.tree.onDidChangeFindOpenState; }\n    get onDidDispose() { return this.tree.onDidDispose; }\n    constructor(user, container, delegate, renderers, dataSource, options = {}) {\n        this.user = user;\n        this.dataSource = dataSource;\n        this.nodes = new Map();\n        this.subTreeRefreshPromises = new Map();\n        this.refreshPromises = new Map();\n        this._onDidRender = new Emitter();\n        this._onDidChangeNodeSlowState = new Emitter();\n        this.nodeMapper = new WeakMapper(node => new AsyncDataTreeNodeWrapper(node));\n        this.disposables = new DisposableStore();\n        this.identityProvider = options.identityProvider;\n        this.autoExpandSingleChildren = typeof options.autoExpandSingleChildren === 'undefined' ? false : options.autoExpandSingleChildren;\n        this.sorter = options.sorter;\n        this.collapseByDefault = options.collapseByDefault;\n        this.tree = this.createTree(user, container, delegate, renderers, options);\n        this.onDidChangeFindMode = this.tree.onDidChangeFindMode;\n        this.root = createAsyncDataTreeNode({\n            element: undefined,\n            parent: null,\n            hasChildren: true\n        });\n        if (this.identityProvider) {\n            this.root = Object.assign(Object.assign({}, this.root), { id: null });\n        }\n        this.nodes.set(null, this.root);\n        this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState, this, this.disposables);\n    }\n    createTree(user, container, delegate, renderers, options) {\n        const objectTreeDelegate = new ComposedTreeDelegate(delegate);\n        const objectTreeRenderers = renderers.map(r => new AsyncDataTreeRenderer(r, this.nodeMapper, this._onDidChangeNodeSlowState.event));\n        const objectTreeOptions = asObjectTreeOptions(options) || {};\n        return new ObjectTree(user, container, objectTreeDelegate, objectTreeRenderers, objectTreeOptions);\n    }\n    updateOptions(options = {}) {\n        this.tree.updateOptions(options);\n    }\n    // Widget\n    getHTMLElement() {\n        return this.tree.getHTMLElement();\n    }\n    get scrollTop() {\n        return this.tree.scrollTop;\n    }\n    set scrollTop(scrollTop) {\n        this.tree.scrollTop = scrollTop;\n    }\n    get scrollHeight() {\n        return this.tree.scrollHeight;\n    }\n    get renderHeight() {\n        return this.tree.renderHeight;\n    }\n    domFocus() {\n        this.tree.domFocus();\n    }\n    layout(height, width) {\n        this.tree.layout(height, width);\n    }\n    style(styles) {\n        this.tree.style(styles);\n    }\n    // Model\n    getInput() {\n        return this.root.element;\n    }\n    setInput(input, viewState) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.refreshPromises.forEach(promise => promise.cancel());\n            this.refreshPromises.clear();\n            this.root.element = input;\n            const viewStateContext = viewState && { viewState, focus: [], selection: [] };\n            yield this._updateChildren(input, true, false, viewStateContext);\n            if (viewStateContext) {\n                this.tree.setFocus(viewStateContext.focus);\n                this.tree.setSelection(viewStateContext.selection);\n            }\n            if (viewState && typeof viewState.scrollTop === 'number') {\n                this.scrollTop = viewState.scrollTop;\n            }\n        });\n    }\n    _updateChildren(element = this.root.element, recursive = true, rerender = false, viewStateContext, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof this.root.element === 'undefined') {\n                throw new TreeError(this.user, 'Tree input not set');\n            }\n            if (this.root.refreshPromise) {\n                yield this.root.refreshPromise;\n                yield Event.toPromise(this._onDidRender.event);\n            }\n            const node = this.getDataNode(element);\n            yield this.refreshAndRenderNode(node, recursive, viewStateContext, options);\n            if (rerender) {\n                try {\n                    this.tree.rerender(node);\n                }\n                catch (_a) {\n                    // missing nodes are fine, this could've resulted from\n                    // parallel refresh calls, removing `node` altogether\n                }\n            }\n        });\n    }\n    // View\n    rerender(element) {\n        if (element === undefined || element === this.root.element) {\n            this.tree.rerender();\n            return;\n        }\n        const node = this.getDataNode(element);\n        this.tree.rerender(node);\n    }\n    // Tree\n    getNode(element = this.root.element) {\n        const dataNode = this.getDataNode(element);\n        const node = this.tree.getNode(dataNode === this.root ? null : dataNode);\n        return this.nodeMapper.map(node);\n    }\n    collapse(element, recursive = false) {\n        const node = this.getDataNode(element);\n        return this.tree.collapse(node === this.root ? null : node, recursive);\n    }\n    expand(element, recursive = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof this.root.element === 'undefined') {\n                throw new TreeError(this.user, 'Tree input not set');\n            }\n            if (this.root.refreshPromise) {\n                yield this.root.refreshPromise;\n                yield Event.toPromise(this._onDidRender.event);\n            }\n            const node = this.getDataNode(element);\n            if (this.tree.hasElement(node) && !this.tree.isCollapsible(node)) {\n                return false;\n            }\n            if (node.refreshPromise) {\n                yield this.root.refreshPromise;\n                yield Event.toPromise(this._onDidRender.event);\n            }\n            if (node !== this.root && !node.refreshPromise && !this.tree.isCollapsed(node)) {\n                return false;\n            }\n            const result = this.tree.expand(node === this.root ? null : node, recursive);\n            if (node.refreshPromise) {\n                yield this.root.refreshPromise;\n                yield Event.toPromise(this._onDidRender.event);\n            }\n            return result;\n        });\n    }\n    setSelection(elements, browserEvent) {\n        const nodes = elements.map(e => this.getDataNode(e));\n        this.tree.setSelection(nodes, browserEvent);\n    }\n    getSelection() {\n        const nodes = this.tree.getSelection();\n        return nodes.map(n => n.element);\n    }\n    setFocus(elements, browserEvent) {\n        const nodes = elements.map(e => this.getDataNode(e));\n        this.tree.setFocus(nodes, browserEvent);\n    }\n    getFocus() {\n        const nodes = this.tree.getFocus();\n        return nodes.map(n => n.element);\n    }\n    reveal(element, relativeTop) {\n        this.tree.reveal(this.getDataNode(element), relativeTop);\n    }\n    // Tree navigation\n    getParentElement(element) {\n        const node = this.tree.getParentElement(this.getDataNode(element));\n        return (node && node.element);\n    }\n    getFirstElementChild(element = this.root.element) {\n        const dataNode = this.getDataNode(element);\n        const node = this.tree.getFirstElementChild(dataNode === this.root ? null : dataNode);\n        return (node && node.element);\n    }\n    // Implementation\n    getDataNode(element) {\n        const node = this.nodes.get((element === this.root.element ? null : element));\n        if (!node) {\n            throw new TreeError(this.user, `Data tree node not found: ${element}`);\n        }\n        return node;\n    }\n    refreshAndRenderNode(node, recursive, viewStateContext, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.refreshNode(node, recursive, viewStateContext);\n            this.render(node, viewStateContext, options);\n        });\n    }\n    refreshNode(node, recursive, viewStateContext) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let result;\n            this.subTreeRefreshPromises.forEach((refreshPromise, refreshNode) => {\n                if (!result && intersects(refreshNode, node)) {\n                    result = refreshPromise.then(() => this.refreshNode(node, recursive, viewStateContext));\n                }\n            });\n            if (result) {\n                return result;\n            }\n            if (node !== this.root) {\n                const treeNode = this.tree.getNode(node);\n                if (treeNode.collapsed) {\n                    node.hasChildren = !!this.dataSource.hasChildren(node.element);\n                    node.stale = true;\n                    return;\n                }\n            }\n            return this.doRefreshSubTree(node, recursive, viewStateContext);\n        });\n    }\n    doRefreshSubTree(node, recursive, viewStateContext) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let done;\n            node.refreshPromise = new Promise(c => done = c);\n            this.subTreeRefreshPromises.set(node, node.refreshPromise);\n            node.refreshPromise.finally(() => {\n                node.refreshPromise = undefined;\n                this.subTreeRefreshPromises.delete(node);\n            });\n            try {\n                const childrenToRefresh = yield this.doRefreshNode(node, recursive, viewStateContext);\n                node.stale = false;\n                yield Promises.settled(childrenToRefresh.map(child => this.doRefreshSubTree(child, recursive, viewStateContext)));\n            }\n            finally {\n                done();\n            }\n        });\n    }\n    doRefreshNode(node, recursive, viewStateContext) {\n        return __awaiter(this, void 0, void 0, function* () {\n            node.hasChildren = !!this.dataSource.hasChildren(node.element);\n            let childrenPromise;\n            if (!node.hasChildren) {\n                childrenPromise = Promise.resolve(Iterable.empty());\n            }\n            else {\n                const children = this.doGetChildren(node);\n                if (isIterable(children)) {\n                    childrenPromise = Promise.resolve(children);\n                }\n                else {\n                    const slowTimeout = timeout(800);\n                    slowTimeout.then(() => {\n                        node.slow = true;\n                        this._onDidChangeNodeSlowState.fire(node);\n                    }, _ => null);\n                    childrenPromise = children.finally(() => slowTimeout.cancel());\n                }\n            }\n            try {\n                const children = yield childrenPromise;\n                return this.setChildren(node, children, recursive, viewStateContext);\n            }\n            catch (err) {\n                if (node !== this.root && this.tree.hasElement(node)) {\n                    this.tree.collapse(node);\n                }\n                if (isCancellationError(err)) {\n                    return [];\n                }\n                throw err;\n            }\n            finally {\n                if (node.slow) {\n                    node.slow = false;\n                    this._onDidChangeNodeSlowState.fire(node);\n                }\n            }\n        });\n    }\n    doGetChildren(node) {\n        let result = this.refreshPromises.get(node);\n        if (result) {\n            return result;\n        }\n        const children = this.dataSource.getChildren(node.element);\n        if (isIterable(children)) {\n            return this.processChildren(children);\n        }\n        else {\n            result = createCancelablePromise(() => __awaiter(this, void 0, void 0, function* () { return this.processChildren(yield children); }));\n            this.refreshPromises.set(node, result);\n            return result.finally(() => { this.refreshPromises.delete(node); });\n        }\n    }\n    _onDidChangeCollapseState({ node, deep }) {\n        if (node.element === null) {\n            return;\n        }\n        if (!node.collapsed && node.element.stale) {\n            if (deep) {\n                this.collapse(node.element.element);\n            }\n            else {\n                this.refreshAndRenderNode(node.element, false)\n                    .catch(onUnexpectedError);\n            }\n        }\n    }\n    setChildren(node, childrenElementsIterable, recursive, viewStateContext) {\n        const childrenElements = [...childrenElementsIterable];\n        // perf: if the node was and still is a leaf, avoid all this hassle\n        if (node.children.length === 0 && childrenElements.length === 0) {\n            return [];\n        }\n        const nodesToForget = new Map();\n        const childrenTreeNodesById = new Map();\n        for (const child of node.children) {\n            nodesToForget.set(child.element, child);\n            if (this.identityProvider) {\n                const collapsed = this.tree.isCollapsed(child);\n                childrenTreeNodesById.set(child.id, { node: child, collapsed });\n            }\n        }\n        const childrenToRefresh = [];\n        const children = childrenElements.map(element => {\n            const hasChildren = !!this.dataSource.hasChildren(element);\n            if (!this.identityProvider) {\n                const asyncDataTreeNode = createAsyncDataTreeNode({ element, parent: node, hasChildren });\n                if (hasChildren && this.collapseByDefault && !this.collapseByDefault(element)) {\n                    asyncDataTreeNode.collapsedByDefault = false;\n                    childrenToRefresh.push(asyncDataTreeNode);\n                }\n                return asyncDataTreeNode;\n            }\n            const id = this.identityProvider.getId(element).toString();\n            const result = childrenTreeNodesById.get(id);\n            if (result) {\n                const asyncDataTreeNode = result.node;\n                nodesToForget.delete(asyncDataTreeNode.element);\n                this.nodes.delete(asyncDataTreeNode.element);\n                this.nodes.set(element, asyncDataTreeNode);\n                asyncDataTreeNode.element = element;\n                asyncDataTreeNode.hasChildren = hasChildren;\n                if (recursive) {\n                    if (result.collapsed) {\n                        asyncDataTreeNode.children.forEach(node => dfs(node, node => this.nodes.delete(node.element)));\n                        asyncDataTreeNode.children.splice(0, asyncDataTreeNode.children.length);\n                        asyncDataTreeNode.stale = true;\n                    }\n                    else {\n                        childrenToRefresh.push(asyncDataTreeNode);\n                    }\n                }\n                else if (hasChildren && this.collapseByDefault && !this.collapseByDefault(element)) {\n                    asyncDataTreeNode.collapsedByDefault = false;\n                    childrenToRefresh.push(asyncDataTreeNode);\n                }\n                return asyncDataTreeNode;\n            }\n            const childAsyncDataTreeNode = createAsyncDataTreeNode({ element, parent: node, id, hasChildren });\n            if (viewStateContext && viewStateContext.viewState.focus && viewStateContext.viewState.focus.indexOf(id) > -1) {\n                viewStateContext.focus.push(childAsyncDataTreeNode);\n            }\n            if (viewStateContext && viewStateContext.viewState.selection && viewStateContext.viewState.selection.indexOf(id) > -1) {\n                viewStateContext.selection.push(childAsyncDataTreeNode);\n            }\n            if (viewStateContext && viewStateContext.viewState.expanded && viewStateContext.viewState.expanded.indexOf(id) > -1) {\n                childrenToRefresh.push(childAsyncDataTreeNode);\n            }\n            else if (hasChildren && this.collapseByDefault && !this.collapseByDefault(element)) {\n                childAsyncDataTreeNode.collapsedByDefault = false;\n                childrenToRefresh.push(childAsyncDataTreeNode);\n            }\n            return childAsyncDataTreeNode;\n        });\n        for (const node of nodesToForget.values()) {\n            dfs(node, node => this.nodes.delete(node.element));\n        }\n        for (const child of children) {\n            this.nodes.set(child.element, child);\n        }\n        node.children.splice(0, node.children.length, ...children);\n        // TODO@joao this doesn't take filter into account\n        if (node !== this.root && this.autoExpandSingleChildren && children.length === 1 && childrenToRefresh.length === 0) {\n            children[0].collapsedByDefault = false;\n            childrenToRefresh.push(children[0]);\n        }\n        return childrenToRefresh;\n    }\n    render(node, viewStateContext, options) {\n        const children = node.children.map(node => this.asTreeElement(node, viewStateContext));\n        const objectTreeOptions = options && Object.assign(Object.assign({}, options), { diffIdentityProvider: options.diffIdentityProvider && {\n                getId(node) {\n                    return options.diffIdentityProvider.getId(node.element);\n                }\n            } });\n        this.tree.setChildren(node === this.root ? null : node, children, objectTreeOptions);\n        if (node !== this.root) {\n            this.tree.setCollapsible(node, node.hasChildren);\n        }\n        this._onDidRender.fire();\n    }\n    asTreeElement(node, viewStateContext) {\n        if (node.stale) {\n            return {\n                element: node,\n                collapsible: node.hasChildren,\n                collapsed: true\n            };\n        }\n        let collapsed;\n        if (viewStateContext && viewStateContext.viewState.expanded && node.id && viewStateContext.viewState.expanded.indexOf(node.id) > -1) {\n            collapsed = false;\n        }\n        else {\n            collapsed = node.collapsedByDefault;\n        }\n        node.collapsedByDefault = undefined;\n        return {\n            element: node,\n            children: node.hasChildren ? Iterable.map(node.children, child => this.asTreeElement(child, viewStateContext)) : [],\n            collapsible: node.hasChildren,\n            collapsed\n        };\n    }\n    processChildren(children) {\n        if (this.sorter) {\n            children = [...children].sort(this.sorter.compare.bind(this.sorter));\n        }\n        return children;\n    }\n    dispose() {\n        this.disposables.dispose();\n        this.tree.dispose();\n    }\n}\nclass CompressibleAsyncDataTreeNodeWrapper {\n    get element() {\n        return {\n            elements: this.node.element.elements.map(e => e.element),\n            incompressible: this.node.element.incompressible\n        };\n    }\n    get children() { return this.node.children.map(node => new CompressibleAsyncDataTreeNodeWrapper(node)); }\n    get depth() { return this.node.depth; }\n    get visibleChildrenCount() { return this.node.visibleChildrenCount; }\n    get visibleChildIndex() { return this.node.visibleChildIndex; }\n    get collapsible() { return this.node.collapsible; }\n    get collapsed() { return this.node.collapsed; }\n    get visible() { return this.node.visible; }\n    get filterData() { return this.node.filterData; }\n    constructor(node) {\n        this.node = node;\n    }\n}\nclass CompressibleAsyncDataTreeRenderer {\n    constructor(renderer, nodeMapper, compressibleNodeMapperProvider, onDidChangeTwistieState) {\n        this.renderer = renderer;\n        this.nodeMapper = nodeMapper;\n        this.compressibleNodeMapperProvider = compressibleNodeMapperProvider;\n        this.onDidChangeTwistieState = onDidChangeTwistieState;\n        this.renderedNodes = new Map();\n        this.disposables = [];\n        this.templateId = renderer.templateId;\n    }\n    renderTemplate(container) {\n        const templateData = this.renderer.renderTemplate(container);\n        return { templateData };\n    }\n    renderElement(node, index, templateData, height) {\n        this.renderer.renderElement(this.nodeMapper.map(node), index, templateData.templateData, height);\n    }\n    renderCompressedElements(node, index, templateData, height) {\n        this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(node), index, templateData.templateData, height);\n    }\n    renderTwistie(element, twistieElement) {\n        if (element.slow) {\n            twistieElement.classList.add(...ThemeIcon.asClassNameArray(Codicon.treeItemLoading));\n            return true;\n        }\n        else {\n            twistieElement.classList.remove(...ThemeIcon.asClassNameArray(Codicon.treeItemLoading));\n            return false;\n        }\n    }\n    disposeElement(node, index, templateData, height) {\n        var _a, _b;\n        (_b = (_a = this.renderer).disposeElement) === null || _b === void 0 ? void 0 : _b.call(_a, this.nodeMapper.map(node), index, templateData.templateData, height);\n    }\n    disposeCompressedElements(node, index, templateData, height) {\n        var _a, _b;\n        (_b = (_a = this.renderer).disposeCompressedElements) === null || _b === void 0 ? void 0 : _b.call(_a, this.compressibleNodeMapperProvider().map(node), index, templateData.templateData, height);\n    }\n    disposeTemplate(templateData) {\n        this.renderer.disposeTemplate(templateData.templateData);\n    }\n    dispose() {\n        this.renderedNodes.clear();\n        this.disposables = dispose(this.disposables);\n    }\n}\nfunction asCompressibleObjectTreeOptions(options) {\n    const objectTreeOptions = options && asObjectTreeOptions(options);\n    return objectTreeOptions && Object.assign(Object.assign({}, objectTreeOptions), { keyboardNavigationLabelProvider: objectTreeOptions.keyboardNavigationLabelProvider && Object.assign(Object.assign({}, objectTreeOptions.keyboardNavigationLabelProvider), { getCompressedNodeKeyboardNavigationLabel(els) {\n                return options.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(els.map(e => e.element));\n            } }) });\n}\nexport class CompressibleAsyncDataTree extends AsyncDataTree {\n    constructor(user, container, virtualDelegate, compressionDelegate, renderers, dataSource, options = {}) {\n        super(user, container, virtualDelegate, renderers, dataSource, options);\n        this.compressionDelegate = compressionDelegate;\n        this.compressibleNodeMapper = new WeakMapper(node => new CompressibleAsyncDataTreeNodeWrapper(node));\n        this.filter = options.filter;\n    }\n    createTree(user, container, delegate, renderers, options) {\n        const objectTreeDelegate = new ComposedTreeDelegate(delegate);\n        const objectTreeRenderers = renderers.map(r => new CompressibleAsyncDataTreeRenderer(r, this.nodeMapper, () => this.compressibleNodeMapper, this._onDidChangeNodeSlowState.event));\n        const objectTreeOptions = asCompressibleObjectTreeOptions(options) || {};\n        return new CompressibleObjectTree(user, container, objectTreeDelegate, objectTreeRenderers, objectTreeOptions);\n    }\n    asTreeElement(node, viewStateContext) {\n        return Object.assign({ incompressible: this.compressionDelegate.isIncompressible(node.element) }, super.asTreeElement(node, viewStateContext));\n    }\n    updateOptions(options = {}) {\n        this.tree.updateOptions(options);\n    }\n    render(node, viewStateContext) {\n        if (!this.identityProvider) {\n            return super.render(node, viewStateContext);\n        }\n        // Preserve traits across compressions. Hacky but does the trick.\n        // This is hard to fix properly since it requires rewriting the traits\n        // across trees and lists. Let's just keep it this way for now.\n        const getId = (element) => this.identityProvider.getId(element).toString();\n        const getUncompressedIds = (nodes) => {\n            const result = new Set();\n            for (const node of nodes) {\n                const compressedNode = this.tree.getCompressedTreeNode(node === this.root ? null : node);\n                if (!compressedNode.element) {\n                    continue;\n                }\n                for (const node of compressedNode.element.elements) {\n                    result.add(getId(node.element));\n                }\n            }\n            return result;\n        };\n        const oldSelection = getUncompressedIds(this.tree.getSelection());\n        const oldFocus = getUncompressedIds(this.tree.getFocus());\n        super.render(node, viewStateContext);\n        const selection = this.getSelection();\n        let didChangeSelection = false;\n        const focus = this.getFocus();\n        let didChangeFocus = false;\n        const visit = (node) => {\n            const compressedNode = node.element;\n            if (compressedNode) {\n                for (let i = 0; i < compressedNode.elements.length; i++) {\n                    const id = getId(compressedNode.elements[i].element);\n                    const element = compressedNode.elements[compressedNode.elements.length - 1].element;\n                    // github.com/microsoft/vscode/issues/85938\n                    if (oldSelection.has(id) && selection.indexOf(element) === -1) {\n                        selection.push(element);\n                        didChangeSelection = true;\n                    }\n                    if (oldFocus.has(id) && focus.indexOf(element) === -1) {\n                        focus.push(element);\n                        didChangeFocus = true;\n                    }\n                }\n            }\n            node.children.forEach(visit);\n        };\n        visit(this.tree.getCompressedTreeNode(node === this.root ? null : node));\n        if (didChangeSelection) {\n            this.setSelection(selection);\n        }\n        if (didChangeFocus) {\n            this.setFocus(focus);\n        }\n    }\n    // For compressed async data trees, `TreeVisibility.Recurse` doesn't currently work\n    // and we have to filter everything beforehand\n    // Related to #85193 and #85835\n    processChildren(children) {\n        if (this.filter) {\n            children = Iterable.filter(children, e => {\n                const result = this.filter.filter(e, 1 /* TreeVisibility.Visible */);\n                const visibility = getVisibility(result);\n                if (visibility === 2 /* TreeVisibility.Recurse */) {\n                    throw new Error('Recursive tree visibility not supported in async data compressed trees');\n                }\n                return visibility === 1 /* TreeVisibility.Visible */;\n            });\n        }\n        return super.processChildren(children);\n    }\n}\nfunction getVisibility(filterResult) {\n    if (typeof filterResult === 'boolean') {\n        return filterResult ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */;\n    }\n    else if (isFilterResult(filterResult)) {\n        return getVisibleState(filterResult.visibility);\n    }\n    else {\n        return getVisibleState(filterResult);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { AbstractTree } from './abstractTree.js';\nimport { ObjectTreeModel } from './objectTreeModel.js';\nexport class DataTree extends AbstractTree {\n    constructor(user, container, delegate, renderers, dataSource, options = {}) {\n        super(user, container, delegate, renderers, options);\n        this.user = user;\n        this.dataSource = dataSource;\n        this.identityProvider = options.identityProvider;\n    }\n    createModel(user, view, options) {\n        return new ObjectTreeModel(user, view, options);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { TreeError } from './tree.js';\nimport { splice, tail2 } from '../../../common/arrays.js';\nimport { Delayer } from '../../../common/async.js';\nimport { MicrotaskDelay } from '../../../common/symbols.js';\nimport { LcsDiff } from '../../../common/diff/diff.js';\nimport { Emitter, EventBufferer } from '../../../common/event.js';\nimport { Iterable } from '../../../common/iterator.js';\nexport function isFilterResult(obj) {\n    return typeof obj === 'object' && 'visibility' in obj && 'data' in obj;\n}\nexport function getVisibleState(visibility) {\n    switch (visibility) {\n        case true: return 1 /* TreeVisibility.Visible */;\n        case false: return 0 /* TreeVisibility.Hidden */;\n        default: return visibility;\n    }\n}\nfunction isCollapsibleStateUpdate(update) {\n    return typeof update.collapsible === 'boolean';\n}\nexport class IndexTreeModel {\n    constructor(user, list, rootElement, options = {}) {\n        this.user = user;\n        this.list = list;\n        this.rootRef = [];\n        this.eventBufferer = new EventBufferer();\n        this._onDidChangeCollapseState = new Emitter();\n        this.onDidChangeCollapseState = this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event);\n        this._onDidChangeRenderNodeCount = new Emitter();\n        this.onDidChangeRenderNodeCount = this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event);\n        this._onDidSplice = new Emitter();\n        this.onDidSplice = this._onDidSplice.event;\n        this.refilterDelayer = new Delayer(MicrotaskDelay);\n        this.collapseByDefault = typeof options.collapseByDefault === 'undefined' ? false : options.collapseByDefault;\n        this.filter = options.filter;\n        this.autoExpandSingleChildren = typeof options.autoExpandSingleChildren === 'undefined' ? false : options.autoExpandSingleChildren;\n        this.root = {\n            parent: undefined,\n            element: rootElement,\n            children: [],\n            depth: 0,\n            visibleChildrenCount: 0,\n            visibleChildIndex: -1,\n            collapsible: false,\n            collapsed: false,\n            renderNodeCount: 0,\n            visibility: 1 /* TreeVisibility.Visible */,\n            visible: true,\n            filterData: undefined\n        };\n    }\n    splice(location, deleteCount, toInsert = Iterable.empty(), options = {}) {\n        if (location.length === 0) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        if (options.diffIdentityProvider) {\n            this.spliceSmart(options.diffIdentityProvider, location, deleteCount, toInsert, options);\n        }\n        else {\n            this.spliceSimple(location, deleteCount, toInsert, options);\n        }\n    }\n    spliceSmart(identity, location, deleteCount, toInsertIterable, options, recurseLevels) {\n        var _a;\n        if (toInsertIterable === void 0) { toInsertIterable = Iterable.empty(); }\n        if (recurseLevels === void 0) { recurseLevels = (_a = options.diffDepth) !== null && _a !== void 0 ? _a : 0; }\n        const { parentNode } = this.getParentNodeWithListIndex(location);\n        if (!parentNode.lastDiffIds) {\n            return this.spliceSimple(location, deleteCount, toInsertIterable, options);\n        }\n        const toInsert = [...toInsertIterable];\n        const index = location[location.length - 1];\n        const diff = new LcsDiff({ getElements: () => parentNode.lastDiffIds }, {\n            getElements: () => [\n                ...parentNode.children.slice(0, index),\n                ...toInsert,\n                ...parentNode.children.slice(index + deleteCount),\n            ].map(e => identity.getId(e.element).toString())\n        }).ComputeDiff(false);\n        // if we were given a 'best effort' diff, use default behavior\n        if (diff.quitEarly) {\n            parentNode.lastDiffIds = undefined;\n            return this.spliceSimple(location, deleteCount, toInsert, options);\n        }\n        const locationPrefix = location.slice(0, -1);\n        const recurseSplice = (fromOriginal, fromModified, count) => {\n            if (recurseLevels > 0) {\n                for (let i = 0; i < count; i++) {\n                    fromOriginal--;\n                    fromModified--;\n                    this.spliceSmart(identity, [...locationPrefix, fromOriginal, 0], Number.MAX_SAFE_INTEGER, toInsert[fromModified].children, options, recurseLevels - 1);\n                }\n            }\n        };\n        let lastStartO = Math.min(parentNode.children.length, index + deleteCount);\n        let lastStartM = toInsert.length;\n        for (const change of diff.changes.sort((a, b) => b.originalStart - a.originalStart)) {\n            recurseSplice(lastStartO, lastStartM, lastStartO - (change.originalStart + change.originalLength));\n            lastStartO = change.originalStart;\n            lastStartM = change.modifiedStart - index;\n            this.spliceSimple([...locationPrefix, lastStartO], change.originalLength, Iterable.slice(toInsert, lastStartM, lastStartM + change.modifiedLength), options);\n        }\n        // at this point, startO === startM === count since any remaining prefix should match\n        recurseSplice(lastStartO, lastStartM, lastStartO);\n    }\n    spliceSimple(location, deleteCount, toInsert = Iterable.empty(), { onDidCreateNode, onDidDeleteNode, diffIdentityProvider }) {\n        const { parentNode, listIndex, revealed, visible } = this.getParentNodeWithListIndex(location);\n        const treeListElementsToInsert = [];\n        const nodesToInsertIterator = Iterable.map(toInsert, el => this.createTreeNode(el, parentNode, parentNode.visible ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */, revealed, treeListElementsToInsert, onDidCreateNode));\n        const lastIndex = location[location.length - 1];\n        const lastHadChildren = parentNode.children.length > 0;\n        // figure out what's the visible child start index right before the\n        // splice point\n        let visibleChildStartIndex = 0;\n        for (let i = lastIndex; i >= 0 && i < parentNode.children.length; i--) {\n            const child = parentNode.children[i];\n            if (child.visible) {\n                visibleChildStartIndex = child.visibleChildIndex;\n                break;\n            }\n        }\n        const nodesToInsert = [];\n        let insertedVisibleChildrenCount = 0;\n        let renderNodeCount = 0;\n        for (const child of nodesToInsertIterator) {\n            nodesToInsert.push(child);\n            renderNodeCount += child.renderNodeCount;\n            if (child.visible) {\n                child.visibleChildIndex = visibleChildStartIndex + insertedVisibleChildrenCount++;\n            }\n        }\n        const deletedNodes = splice(parentNode.children, lastIndex, deleteCount, nodesToInsert);\n        if (!diffIdentityProvider) {\n            parentNode.lastDiffIds = undefined;\n        }\n        else if (parentNode.lastDiffIds) {\n            splice(parentNode.lastDiffIds, lastIndex, deleteCount, nodesToInsert.map(n => diffIdentityProvider.getId(n.element).toString()));\n        }\n        else {\n            parentNode.lastDiffIds = parentNode.children.map(n => diffIdentityProvider.getId(n.element).toString());\n        }\n        // figure out what is the count of deleted visible children\n        let deletedVisibleChildrenCount = 0;\n        for (const child of deletedNodes) {\n            if (child.visible) {\n                deletedVisibleChildrenCount++;\n            }\n        }\n        // and adjust for all visible children after the splice point\n        if (deletedVisibleChildrenCount !== 0) {\n            for (let i = lastIndex + nodesToInsert.length; i < parentNode.children.length; i++) {\n                const child = parentNode.children[i];\n                if (child.visible) {\n                    child.visibleChildIndex -= deletedVisibleChildrenCount;\n                }\n            }\n        }\n        // update parent's visible children count\n        parentNode.visibleChildrenCount += insertedVisibleChildrenCount - deletedVisibleChildrenCount;\n        if (revealed && visible) {\n            const visibleDeleteCount = deletedNodes.reduce((r, node) => r + (node.visible ? node.renderNodeCount : 0), 0);\n            this._updateAncestorsRenderNodeCount(parentNode, renderNodeCount - visibleDeleteCount);\n            this.list.splice(listIndex, visibleDeleteCount, treeListElementsToInsert);\n        }\n        if (deletedNodes.length > 0 && onDidDeleteNode) {\n            const visit = (node) => {\n                onDidDeleteNode(node);\n                node.children.forEach(visit);\n            };\n            deletedNodes.forEach(visit);\n        }\n        this._onDidSplice.fire({ insertedNodes: nodesToInsert, deletedNodes });\n        const currentlyHasChildren = parentNode.children.length > 0;\n        if (lastHadChildren !== currentlyHasChildren) {\n            this.setCollapsible(location.slice(0, -1), currentlyHasChildren);\n        }\n        let node = parentNode;\n        while (node) {\n            if (node.visibility === 2 /* TreeVisibility.Recurse */) {\n                // delayed to avoid excessive refiltering, see #135941\n                this.refilterDelayer.trigger(() => this.refilter());\n                break;\n            }\n            node = node.parent;\n        }\n    }\n    rerender(location) {\n        if (location.length === 0) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        const { node, listIndex, revealed } = this.getTreeNodeWithListIndex(location);\n        if (node.visible && revealed) {\n            this.list.splice(listIndex, 1, [node]);\n        }\n    }\n    has(location) {\n        return this.hasTreeNode(location);\n    }\n    getListIndex(location) {\n        const { listIndex, visible, revealed } = this.getTreeNodeWithListIndex(location);\n        return visible && revealed ? listIndex : -1;\n    }\n    getListRenderCount(location) {\n        return this.getTreeNode(location).renderNodeCount;\n    }\n    isCollapsible(location) {\n        return this.getTreeNode(location).collapsible;\n    }\n    setCollapsible(location, collapsible) {\n        const node = this.getTreeNode(location);\n        if (typeof collapsible === 'undefined') {\n            collapsible = !node.collapsible;\n        }\n        const update = { collapsible };\n        return this.eventBufferer.bufferEvents(() => this._setCollapseState(location, update));\n    }\n    isCollapsed(location) {\n        return this.getTreeNode(location).collapsed;\n    }\n    setCollapsed(location, collapsed, recursive) {\n        const node = this.getTreeNode(location);\n        if (typeof collapsed === 'undefined') {\n            collapsed = !node.collapsed;\n        }\n        const update = { collapsed, recursive: recursive || false };\n        return this.eventBufferer.bufferEvents(() => this._setCollapseState(location, update));\n    }\n    _setCollapseState(location, update) {\n        const { node, listIndex, revealed } = this.getTreeNodeWithListIndex(location);\n        const result = this._setListNodeCollapseState(node, listIndex, revealed, update);\n        if (node !== this.root && this.autoExpandSingleChildren && result && !isCollapsibleStateUpdate(update) && node.collapsible && !node.collapsed && !update.recursive) {\n            let onlyVisibleChildIndex = -1;\n            for (let i = 0; i < node.children.length; i++) {\n                const child = node.children[i];\n                if (child.visible) {\n                    if (onlyVisibleChildIndex > -1) {\n                        onlyVisibleChildIndex = -1;\n                        break;\n                    }\n                    else {\n                        onlyVisibleChildIndex = i;\n                    }\n                }\n            }\n            if (onlyVisibleChildIndex > -1) {\n                this._setCollapseState([...location, onlyVisibleChildIndex], update);\n            }\n        }\n        return result;\n    }\n    _setListNodeCollapseState(node, listIndex, revealed, update) {\n        const result = this._setNodeCollapseState(node, update, false);\n        if (!revealed || !node.visible || !result) {\n            return result;\n        }\n        const previousRenderNodeCount = node.renderNodeCount;\n        const toInsert = this.updateNodeAfterCollapseChange(node);\n        const deleteCount = previousRenderNodeCount - (listIndex === -1 ? 0 : 1);\n        this.list.splice(listIndex + 1, deleteCount, toInsert.slice(1));\n        return result;\n    }\n    _setNodeCollapseState(node, update, deep) {\n        let result;\n        if (node === this.root) {\n            result = false;\n        }\n        else {\n            if (isCollapsibleStateUpdate(update)) {\n                result = node.collapsible !== update.collapsible;\n                node.collapsible = update.collapsible;\n            }\n            else if (!node.collapsible) {\n                result = false;\n            }\n            else {\n                result = node.collapsed !== update.collapsed;\n                node.collapsed = update.collapsed;\n            }\n            if (result) {\n                this._onDidChangeCollapseState.fire({ node, deep });\n            }\n        }\n        if (!isCollapsibleStateUpdate(update) && update.recursive) {\n            for (const child of node.children) {\n                result = this._setNodeCollapseState(child, update, true) || result;\n            }\n        }\n        return result;\n    }\n    expandTo(location) {\n        this.eventBufferer.bufferEvents(() => {\n            let node = this.getTreeNode(location);\n            while (node.parent) {\n                node = node.parent;\n                location = location.slice(0, location.length - 1);\n                if (node.collapsed) {\n                    this._setCollapseState(location, { collapsed: false, recursive: false });\n                }\n            }\n        });\n    }\n    refilter() {\n        const previousRenderNodeCount = this.root.renderNodeCount;\n        const toInsert = this.updateNodeAfterFilterChange(this.root);\n        this.list.splice(0, previousRenderNodeCount, toInsert);\n        this.refilterDelayer.cancel();\n    }\n    createTreeNode(treeElement, parent, parentVisibility, revealed, treeListElements, onDidCreateNode) {\n        const node = {\n            parent,\n            element: treeElement.element,\n            children: [],\n            depth: parent.depth + 1,\n            visibleChildrenCount: 0,\n            visibleChildIndex: -1,\n            collapsible: typeof treeElement.collapsible === 'boolean' ? treeElement.collapsible : (typeof treeElement.collapsed !== 'undefined'),\n            collapsed: typeof treeElement.collapsed === 'undefined' ? this.collapseByDefault : treeElement.collapsed,\n            renderNodeCount: 1,\n            visibility: 1 /* TreeVisibility.Visible */,\n            visible: true,\n            filterData: undefined\n        };\n        const visibility = this._filterNode(node, parentVisibility);\n        node.visibility = visibility;\n        if (revealed) {\n            treeListElements.push(node);\n        }\n        const childElements = treeElement.children || Iterable.empty();\n        const childRevealed = revealed && visibility !== 0 /* TreeVisibility.Hidden */ && !node.collapsed;\n        let visibleChildrenCount = 0;\n        let renderNodeCount = 1;\n        for (const el of childElements) {\n            const child = this.createTreeNode(el, node, visibility, childRevealed, treeListElements, onDidCreateNode);\n            node.children.push(child);\n            renderNodeCount += child.renderNodeCount;\n            if (child.visible) {\n                child.visibleChildIndex = visibleChildrenCount++;\n            }\n        }\n        node.collapsible = node.collapsible || node.children.length > 0;\n        node.visibleChildrenCount = visibleChildrenCount;\n        node.visible = visibility === 2 /* TreeVisibility.Recurse */ ? visibleChildrenCount > 0 : (visibility === 1 /* TreeVisibility.Visible */);\n        if (!node.visible) {\n            node.renderNodeCount = 0;\n            if (revealed) {\n                treeListElements.pop();\n            }\n        }\n        else if (!node.collapsed) {\n            node.renderNodeCount = renderNodeCount;\n        }\n        onDidCreateNode === null || onDidCreateNode === void 0 ? void 0 : onDidCreateNode(node);\n        return node;\n    }\n    updateNodeAfterCollapseChange(node) {\n        const previousRenderNodeCount = node.renderNodeCount;\n        const result = [];\n        this._updateNodeAfterCollapseChange(node, result);\n        this._updateAncestorsRenderNodeCount(node.parent, result.length - previousRenderNodeCount);\n        return result;\n    }\n    _updateNodeAfterCollapseChange(node, result) {\n        if (node.visible === false) {\n            return 0;\n        }\n        result.push(node);\n        node.renderNodeCount = 1;\n        if (!node.collapsed) {\n            for (const child of node.children) {\n                node.renderNodeCount += this._updateNodeAfterCollapseChange(child, result);\n            }\n        }\n        this._onDidChangeRenderNodeCount.fire(node);\n        return node.renderNodeCount;\n    }\n    updateNodeAfterFilterChange(node) {\n        const previousRenderNodeCount = node.renderNodeCount;\n        const result = [];\n        this._updateNodeAfterFilterChange(node, node.visible ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */, result);\n        this._updateAncestorsRenderNodeCount(node.parent, result.length - previousRenderNodeCount);\n        return result;\n    }\n    _updateNodeAfterFilterChange(node, parentVisibility, result, revealed = true) {\n        let visibility;\n        if (node !== this.root) {\n            visibility = this._filterNode(node, parentVisibility);\n            if (visibility === 0 /* TreeVisibility.Hidden */) {\n                node.visible = false;\n                node.renderNodeCount = 0;\n                return false;\n            }\n            if (revealed) {\n                result.push(node);\n            }\n        }\n        const resultStartLength = result.length;\n        node.renderNodeCount = node === this.root ? 0 : 1;\n        let hasVisibleDescendants = false;\n        if (!node.collapsed || visibility !== 0 /* TreeVisibility.Hidden */) {\n            let visibleChildIndex = 0;\n            for (const child of node.children) {\n                hasVisibleDescendants = this._updateNodeAfterFilterChange(child, visibility, result, revealed && !node.collapsed) || hasVisibleDescendants;\n                if (child.visible) {\n                    child.visibleChildIndex = visibleChildIndex++;\n                }\n            }\n            node.visibleChildrenCount = visibleChildIndex;\n        }\n        else {\n            node.visibleChildrenCount = 0;\n        }\n        if (node !== this.root) {\n            node.visible = visibility === 2 /* TreeVisibility.Recurse */ ? hasVisibleDescendants : (visibility === 1 /* TreeVisibility.Visible */);\n            node.visibility = visibility;\n        }\n        if (!node.visible) {\n            node.renderNodeCount = 0;\n            if (revealed) {\n                result.pop();\n            }\n        }\n        else if (!node.collapsed) {\n            node.renderNodeCount += result.length - resultStartLength;\n        }\n        this._onDidChangeRenderNodeCount.fire(node);\n        return node.visible;\n    }\n    _updateAncestorsRenderNodeCount(node, diff) {\n        if (diff === 0) {\n            return;\n        }\n        while (node) {\n            node.renderNodeCount += diff;\n            this._onDidChangeRenderNodeCount.fire(node);\n            node = node.parent;\n        }\n    }\n    _filterNode(node, parentVisibility) {\n        const result = this.filter ? this.filter.filter(node.element, parentVisibility) : 1 /* TreeVisibility.Visible */;\n        if (typeof result === 'boolean') {\n            node.filterData = undefined;\n            return result ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */;\n        }\n        else if (isFilterResult(result)) {\n            node.filterData = result.data;\n            return getVisibleState(result.visibility);\n        }\n        else {\n            node.filterData = undefined;\n            return getVisibleState(result);\n        }\n    }\n    // cheap\n    hasTreeNode(location, node = this.root) {\n        if (!location || location.length === 0) {\n            return true;\n        }\n        const [index, ...rest] = location;\n        if (index < 0 || index > node.children.length) {\n            return false;\n        }\n        return this.hasTreeNode(rest, node.children[index]);\n    }\n    // cheap\n    getTreeNode(location, node = this.root) {\n        if (!location || location.length === 0) {\n            return node;\n        }\n        const [index, ...rest] = location;\n        if (index < 0 || index > node.children.length) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        return this.getTreeNode(rest, node.children[index]);\n    }\n    // expensive\n    getTreeNodeWithListIndex(location) {\n        if (location.length === 0) {\n            return { node: this.root, listIndex: -1, revealed: true, visible: false };\n        }\n        const { parentNode, listIndex, revealed, visible } = this.getParentNodeWithListIndex(location);\n        const index = location[location.length - 1];\n        if (index < 0 || index > parentNode.children.length) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        const node = parentNode.children[index];\n        return { node, listIndex, revealed, visible: visible && node.visible };\n    }\n    getParentNodeWithListIndex(location, node = this.root, listIndex = 0, revealed = true, visible = true) {\n        const [index, ...rest] = location;\n        if (index < 0 || index > node.children.length) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        // TODO@joao perf!\n        for (let i = 0; i < index; i++) {\n            listIndex += node.children[i].renderNodeCount;\n        }\n        revealed = revealed && !node.collapsed;\n        visible = visible && node.visible;\n        if (rest.length === 0) {\n            return { parentNode: node, listIndex, revealed, visible };\n        }\n        return this.getParentNodeWithListIndex(rest, node.children[index], listIndex + 1, revealed, visible);\n    }\n    getNode(location = []) {\n        return this.getTreeNode(location);\n    }\n    // TODO@joao perf!\n    getNodeLocation(node) {\n        const location = [];\n        let indexTreeNode = node; // typing woes\n        while (indexTreeNode.parent) {\n            location.push(indexTreeNode.parent.children.indexOf(indexTreeNode));\n            indexTreeNode = indexTreeNode.parent;\n        }\n        return location.reverse();\n    }\n    getParentNodeLocation(location) {\n        if (location.length === 0) {\n            return undefined;\n        }\n        else if (location.length === 1) {\n            return [];\n        }\n        else {\n            return tail2(location)[0];\n        }\n    }\n    getFirstElementChild(location) {\n        const node = this.getTreeNode(location);\n        if (node.children.length === 0) {\n            return undefined;\n        }\n        return node.children[0].element;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ObjectTreeModel } from './objectTreeModel.js';\nimport { TreeError, WeakMapper } from './tree.js';\nimport { equals } from '../../../common/arrays.js';\nimport { Event } from '../../../common/event.js';\nimport { Iterable } from '../../../common/iterator.js';\nfunction noCompress(element) {\n    const elements = [element.element];\n    const incompressible = element.incompressible || false;\n    return {\n        element: { elements, incompressible },\n        children: Iterable.map(Iterable.from(element.children), noCompress),\n        collapsible: element.collapsible,\n        collapsed: element.collapsed\n    };\n}\n// Exported only for test reasons, do not use directly\nexport function compress(element) {\n    const elements = [element.element];\n    const incompressible = element.incompressible || false;\n    let childrenIterator;\n    let children;\n    while (true) {\n        [children, childrenIterator] = Iterable.consume(Iterable.from(element.children), 2);\n        if (children.length !== 1) {\n            break;\n        }\n        if (children[0].incompressible) {\n            break;\n        }\n        element = children[0];\n        elements.push(element.element);\n    }\n    return {\n        element: { elements, incompressible },\n        children: Iterable.map(Iterable.concat(children, childrenIterator), compress),\n        collapsible: element.collapsible,\n        collapsed: element.collapsed\n    };\n}\nfunction _decompress(element, index = 0) {\n    let children;\n    if (index < element.element.elements.length - 1) {\n        children = [_decompress(element, index + 1)];\n    }\n    else {\n        children = Iterable.map(Iterable.from(element.children), el => _decompress(el, 0));\n    }\n    if (index === 0 && element.element.incompressible) {\n        return {\n            element: element.element.elements[index],\n            children,\n            incompressible: true,\n            collapsible: element.collapsible,\n            collapsed: element.collapsed\n        };\n    }\n    return {\n        element: element.element.elements[index],\n        children,\n        collapsible: element.collapsible,\n        collapsed: element.collapsed\n    };\n}\n// Exported only for test reasons, do not use directly\nexport function decompress(element) {\n    return _decompress(element, 0);\n}\nfunction splice(treeElement, element, children) {\n    if (treeElement.element === element) {\n        return Object.assign(Object.assign({}, treeElement), { children });\n    }\n    return Object.assign(Object.assign({}, treeElement), { children: Iterable.map(Iterable.from(treeElement.children), e => splice(e, element, children)) });\n}\nconst wrapIdentityProvider = (base) => ({\n    getId(node) {\n        return node.elements.map(e => base.getId(e).toString()).join('\\0');\n    }\n});\n// Exported only for test reasons, do not use directly\nexport class CompressedObjectTreeModel {\n    get onDidSplice() { return this.model.onDidSplice; }\n    get onDidChangeCollapseState() { return this.model.onDidChangeCollapseState; }\n    get onDidChangeRenderNodeCount() { return this.model.onDidChangeRenderNodeCount; }\n    constructor(user, list, options = {}) {\n        this.user = user;\n        this.rootRef = null;\n        this.nodes = new Map();\n        this.model = new ObjectTreeModel(user, list, options);\n        this.enabled = typeof options.compressionEnabled === 'undefined' ? true : options.compressionEnabled;\n        this.identityProvider = options.identityProvider;\n    }\n    setChildren(element, children = Iterable.empty(), options) {\n        // Diffs must be deep, since the compression can affect nested elements.\n        // @see https://github.com/microsoft/vscode/pull/114237#issuecomment-759425034\n        const diffIdentityProvider = options.diffIdentityProvider && wrapIdentityProvider(options.diffIdentityProvider);\n        if (element === null) {\n            const compressedChildren = Iterable.map(children, this.enabled ? compress : noCompress);\n            this._setChildren(null, compressedChildren, { diffIdentityProvider, diffDepth: Infinity });\n            return;\n        }\n        const compressedNode = this.nodes.get(element);\n        if (!compressedNode) {\n            throw new TreeError(this.user, 'Unknown compressed tree node');\n        }\n        const node = this.model.getNode(compressedNode);\n        const compressedParentNode = this.model.getParentNodeLocation(compressedNode);\n        const parent = this.model.getNode(compressedParentNode);\n        const decompressedElement = decompress(node);\n        const splicedElement = splice(decompressedElement, element, children);\n        const recompressedElement = (this.enabled ? compress : noCompress)(splicedElement);\n        // If the recompressed node is identical to the original, just set its children.\n        // Saves work and churn diffing the parent element.\n        const elementComparator = options.diffIdentityProvider\n            ? ((a, b) => options.diffIdentityProvider.getId(a) === options.diffIdentityProvider.getId(b))\n            : undefined;\n        if (equals(recompressedElement.element.elements, node.element.elements, elementComparator)) {\n            this._setChildren(compressedNode, recompressedElement.children || Iterable.empty(), { diffIdentityProvider, diffDepth: 1 });\n            return;\n        }\n        const parentChildren = parent.children\n            .map(child => child === node ? recompressedElement : child);\n        this._setChildren(parent.element, parentChildren, {\n            diffIdentityProvider,\n            diffDepth: node.depth - parent.depth,\n        });\n    }\n    setCompressionEnabled(enabled) {\n        if (enabled === this.enabled) {\n            return;\n        }\n        this.enabled = enabled;\n        const root = this.model.getNode();\n        const rootChildren = root.children;\n        const decompressedRootChildren = Iterable.map(rootChildren, decompress);\n        const recompressedRootChildren = Iterable.map(decompressedRootChildren, enabled ? compress : noCompress);\n        // it should be safe to always use deep diff mode here if an identity\n        // provider is available, since we know the raw nodes are unchanged.\n        this._setChildren(null, recompressedRootChildren, {\n            diffIdentityProvider: this.identityProvider,\n            diffDepth: Infinity,\n        });\n    }\n    _setChildren(node, children, options) {\n        const insertedElements = new Set();\n        const onDidCreateNode = (node) => {\n            for (const element of node.element.elements) {\n                insertedElements.add(element);\n                this.nodes.set(element, node.element);\n            }\n        };\n        const onDidDeleteNode = (node) => {\n            for (const element of node.element.elements) {\n                if (!insertedElements.has(element)) {\n                    this.nodes.delete(element);\n                }\n            }\n        };\n        this.model.setChildren(node, children, Object.assign(Object.assign({}, options), { onDidCreateNode, onDidDeleteNode }));\n    }\n    has(element) {\n        return this.nodes.has(element);\n    }\n    getListIndex(location) {\n        const node = this.getCompressedNode(location);\n        return this.model.getListIndex(node);\n    }\n    getListRenderCount(location) {\n        const node = this.getCompressedNode(location);\n        return this.model.getListRenderCount(node);\n    }\n    getNode(location) {\n        if (typeof location === 'undefined') {\n            return this.model.getNode();\n        }\n        const node = this.getCompressedNode(location);\n        return this.model.getNode(node);\n    }\n    // TODO: review this\n    getNodeLocation(node) {\n        const compressedNode = this.model.getNodeLocation(node);\n        if (compressedNode === null) {\n            return null;\n        }\n        return compressedNode.elements[compressedNode.elements.length - 1];\n    }\n    // TODO: review this\n    getParentNodeLocation(location) {\n        const compressedNode = this.getCompressedNode(location);\n        const parentNode = this.model.getParentNodeLocation(compressedNode);\n        if (parentNode === null) {\n            return null;\n        }\n        return parentNode.elements[parentNode.elements.length - 1];\n    }\n    getFirstElementChild(location) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.getFirstElementChild(compressedNode);\n    }\n    isCollapsible(location) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.isCollapsible(compressedNode);\n    }\n    setCollapsible(location, collapsible) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.setCollapsible(compressedNode, collapsible);\n    }\n    isCollapsed(location) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.isCollapsed(compressedNode);\n    }\n    setCollapsed(location, collapsed, recursive) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.setCollapsed(compressedNode, collapsed, recursive);\n    }\n    expandTo(location) {\n        const compressedNode = this.getCompressedNode(location);\n        this.model.expandTo(compressedNode);\n    }\n    rerender(location) {\n        const compressedNode = this.getCompressedNode(location);\n        this.model.rerender(compressedNode);\n    }\n    refilter() {\n        this.model.refilter();\n    }\n    getCompressedNode(element) {\n        if (element === null) {\n            return null;\n        }\n        const node = this.nodes.get(element);\n        if (!node) {\n            throw new TreeError(this.user, `Tree element not found: ${element}`);\n        }\n        return node;\n    }\n}\nexport const DefaultElementMapper = elements => elements[elements.length - 1];\nclass CompressedTreeNodeWrapper {\n    get element() { return this.node.element === null ? null : this.unwrapper(this.node.element); }\n    get children() { return this.node.children.map(node => new CompressedTreeNodeWrapper(this.unwrapper, node)); }\n    get depth() { return this.node.depth; }\n    get visibleChildrenCount() { return this.node.visibleChildrenCount; }\n    get visibleChildIndex() { return this.node.visibleChildIndex; }\n    get collapsible() { return this.node.collapsible; }\n    get collapsed() { return this.node.collapsed; }\n    get visible() { return this.node.visible; }\n    get filterData() { return this.node.filterData; }\n    constructor(unwrapper, node) {\n        this.unwrapper = unwrapper;\n        this.node = node;\n    }\n}\nfunction mapList(nodeMapper, list) {\n    return {\n        splice(start, deleteCount, toInsert) {\n            list.splice(start, deleteCount, toInsert.map(node => nodeMapper.map(node)));\n        },\n        updateElementHeight(index, height) {\n            list.updateElementHeight(index, height);\n        }\n    };\n}\nfunction mapOptions(compressedNodeUnwrapper, options) {\n    return Object.assign(Object.assign({}, options), { identityProvider: options.identityProvider && {\n            getId(node) {\n                return options.identityProvider.getId(compressedNodeUnwrapper(node));\n            }\n        }, sorter: options.sorter && {\n            compare(node, otherNode) {\n                return options.sorter.compare(node.elements[0], otherNode.elements[0]);\n            }\n        }, filter: options.filter && {\n            filter(node, parentVisibility) {\n                return options.filter.filter(compressedNodeUnwrapper(node), parentVisibility);\n            }\n        } });\n}\nexport class CompressibleObjectTreeModel {\n    get onDidSplice() {\n        return Event.map(this.model.onDidSplice, ({ insertedNodes, deletedNodes }) => ({\n            insertedNodes: insertedNodes.map(node => this.nodeMapper.map(node)),\n            deletedNodes: deletedNodes.map(node => this.nodeMapper.map(node)),\n        }));\n    }\n    get onDidChangeCollapseState() {\n        return Event.map(this.model.onDidChangeCollapseState, ({ node, deep }) => ({\n            node: this.nodeMapper.map(node),\n            deep\n        }));\n    }\n    get onDidChangeRenderNodeCount() {\n        return Event.map(this.model.onDidChangeRenderNodeCount, node => this.nodeMapper.map(node));\n    }\n    constructor(user, list, options = {}) {\n        this.rootRef = null;\n        this.elementMapper = options.elementMapper || DefaultElementMapper;\n        const compressedNodeUnwrapper = node => this.elementMapper(node.elements);\n        this.nodeMapper = new WeakMapper(node => new CompressedTreeNodeWrapper(compressedNodeUnwrapper, node));\n        this.model = new CompressedObjectTreeModel(user, mapList(this.nodeMapper, list), mapOptions(compressedNodeUnwrapper, options));\n    }\n    setChildren(element, children = Iterable.empty(), options = {}) {\n        this.model.setChildren(element, children, options);\n    }\n    setCompressionEnabled(enabled) {\n        this.model.setCompressionEnabled(enabled);\n    }\n    has(location) {\n        return this.model.has(location);\n    }\n    getListIndex(location) {\n        return this.model.getListIndex(location);\n    }\n    getListRenderCount(location) {\n        return this.model.getListRenderCount(location);\n    }\n    getNode(location) {\n        return this.nodeMapper.map(this.model.getNode(location));\n    }\n    getNodeLocation(node) {\n        return node.element;\n    }\n    getParentNodeLocation(location) {\n        return this.model.getParentNodeLocation(location);\n    }\n    getFirstElementChild(location) {\n        const result = this.model.getFirstElementChild(location);\n        if (result === null || typeof result === 'undefined') {\n            return result;\n        }\n        return this.elementMapper(result.elements);\n    }\n    isCollapsible(location) {\n        return this.model.isCollapsible(location);\n    }\n    setCollapsible(location, collapsed) {\n        return this.model.setCollapsible(location, collapsed);\n    }\n    isCollapsed(location) {\n        return this.model.isCollapsed(location);\n    }\n    setCollapsed(location, collapsed, recursive) {\n        return this.model.setCollapsed(location, collapsed, recursive);\n    }\n    expandTo(location) {\n        return this.model.expandTo(location);\n    }\n    rerender(location) {\n        return this.model.rerender(location);\n    }\n    refilter() {\n        return this.model.refilter();\n    }\n    getCompressedTreeNode(location = null) {\n        return this.model.getNode(location);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { AbstractTree } from './abstractTree.js';\nimport { CompressibleObjectTreeModel } from './compressedObjectTreeModel.js';\nimport { ObjectTreeModel } from './objectTreeModel.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Iterable } from '../../../common/iterator.js';\nexport class ObjectTree extends AbstractTree {\n    get onDidChangeCollapseState() { return this.model.onDidChangeCollapseState; }\n    constructor(user, container, delegate, renderers, options = {}) {\n        super(user, container, delegate, renderers, options);\n        this.user = user;\n    }\n    setChildren(element, children = Iterable.empty(), options) {\n        this.model.setChildren(element, children, options);\n    }\n    rerender(element) {\n        if (element === undefined) {\n            this.view.rerender();\n            return;\n        }\n        this.model.rerender(element);\n    }\n    hasElement(element) {\n        return this.model.has(element);\n    }\n    createModel(user, view, options) {\n        return new ObjectTreeModel(user, view, options);\n    }\n}\nclass CompressibleRenderer {\n    get compressedTreeNodeProvider() {\n        return this._compressedTreeNodeProvider();\n    }\n    constructor(_compressedTreeNodeProvider, renderer) {\n        this._compressedTreeNodeProvider = _compressedTreeNodeProvider;\n        this.renderer = renderer;\n        this.templateId = renderer.templateId;\n        if (renderer.onDidChangeTwistieState) {\n            this.onDidChangeTwistieState = renderer.onDidChangeTwistieState;\n        }\n    }\n    renderTemplate(container) {\n        const data = this.renderer.renderTemplate(container);\n        return { compressedTreeNode: undefined, data };\n    }\n    renderElement(node, index, templateData, height) {\n        const compressedTreeNode = this.compressedTreeNodeProvider.getCompressedTreeNode(node.element);\n        if (compressedTreeNode.element.elements.length === 1) {\n            templateData.compressedTreeNode = undefined;\n            this.renderer.renderElement(node, index, templateData.data, height);\n        }\n        else {\n            templateData.compressedTreeNode = compressedTreeNode;\n            this.renderer.renderCompressedElements(compressedTreeNode, index, templateData.data, height);\n        }\n    }\n    disposeElement(node, index, templateData, height) {\n        var _a, _b, _c, _d;\n        if (templateData.compressedTreeNode) {\n            (_b = (_a = this.renderer).disposeCompressedElements) === null || _b === void 0 ? void 0 : _b.call(_a, templateData.compressedTreeNode, index, templateData.data, height);\n        }\n        else {\n            (_d = (_c = this.renderer).disposeElement) === null || _d === void 0 ? void 0 : _d.call(_c, node, index, templateData.data, height);\n        }\n    }\n    disposeTemplate(templateData) {\n        this.renderer.disposeTemplate(templateData.data);\n    }\n    renderTwistie(element, twistieElement) {\n        if (this.renderer.renderTwistie) {\n            return this.renderer.renderTwistie(element, twistieElement);\n        }\n        return false;\n    }\n}\n__decorate([\n    memoize\n], CompressibleRenderer.prototype, \"compressedTreeNodeProvider\", null);\nfunction asObjectTreeOptions(compressedTreeNodeProvider, options) {\n    return options && Object.assign(Object.assign({}, options), { keyboardNavigationLabelProvider: options.keyboardNavigationLabelProvider && {\n            getKeyboardNavigationLabel(e) {\n                let compressedTreeNode;\n                try {\n                    compressedTreeNode = compressedTreeNodeProvider().getCompressedTreeNode(e);\n                }\n                catch (_a) {\n                    return options.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e);\n                }\n                if (compressedTreeNode.element.elements.length === 1) {\n                    return options.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e);\n                }\n                else {\n                    return options.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(compressedTreeNode.element.elements);\n                }\n            }\n        } });\n}\nexport class CompressibleObjectTree extends ObjectTree {\n    constructor(user, container, delegate, renderers, options = {}) {\n        const compressedTreeNodeProvider = () => this;\n        const compressibleRenderers = renderers.map(r => new CompressibleRenderer(compressedTreeNodeProvider, r));\n        super(user, container, delegate, compressibleRenderers, asObjectTreeOptions(compressedTreeNodeProvider, options));\n    }\n    setChildren(element, children = Iterable.empty(), options) {\n        this.model.setChildren(element, children, options);\n    }\n    createModel(user, view, options) {\n        return new CompressibleObjectTreeModel(user, view, options);\n    }\n    updateOptions(optionsUpdate = {}) {\n        super.updateOptions(optionsUpdate);\n        if (typeof optionsUpdate.compressionEnabled !== 'undefined') {\n            this.model.setCompressionEnabled(optionsUpdate.compressionEnabled);\n        }\n    }\n    getCompressedTreeNode(element = null) {\n        return this.model.getCompressedTreeNode(element);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { IndexTreeModel } from './indexTreeModel.js';\nimport { ObjectTreeElementCollapseState, TreeError } from './tree.js';\nimport { Iterable } from '../../../common/iterator.js';\nexport class ObjectTreeModel {\n    constructor(user, list, options = {}) {\n        this.user = user;\n        this.rootRef = null;\n        this.nodes = new Map();\n        this.nodesByIdentity = new Map();\n        this.model = new IndexTreeModel(user, list, null, options);\n        this.onDidSplice = this.model.onDidSplice;\n        this.onDidChangeCollapseState = this.model.onDidChangeCollapseState;\n        this.onDidChangeRenderNodeCount = this.model.onDidChangeRenderNodeCount;\n        if (options.sorter) {\n            this.sorter = {\n                compare(a, b) {\n                    return options.sorter.compare(a.element, b.element);\n                }\n            };\n        }\n        this.identityProvider = options.identityProvider;\n    }\n    setChildren(element, children = Iterable.empty(), options = {}) {\n        const location = this.getElementLocation(element);\n        this._setChildren(location, this.preserveCollapseState(children), options);\n    }\n    _setChildren(location, children = Iterable.empty(), options) {\n        const insertedElements = new Set();\n        const insertedElementIds = new Set();\n        const onDidCreateNode = (node) => {\n            var _a;\n            if (node.element === null) {\n                return;\n            }\n            const tnode = node;\n            insertedElements.add(tnode.element);\n            this.nodes.set(tnode.element, tnode);\n            if (this.identityProvider) {\n                const id = this.identityProvider.getId(tnode.element).toString();\n                insertedElementIds.add(id);\n                this.nodesByIdentity.set(id, tnode);\n            }\n            (_a = options.onDidCreateNode) === null || _a === void 0 ? void 0 : _a.call(options, tnode);\n        };\n        const onDidDeleteNode = (node) => {\n            var _a;\n            if (node.element === null) {\n                return;\n            }\n            const tnode = node;\n            if (!insertedElements.has(tnode.element)) {\n                this.nodes.delete(tnode.element);\n            }\n            if (this.identityProvider) {\n                const id = this.identityProvider.getId(tnode.element).toString();\n                if (!insertedElementIds.has(id)) {\n                    this.nodesByIdentity.delete(id);\n                }\n            }\n            (_a = options.onDidDeleteNode) === null || _a === void 0 ? void 0 : _a.call(options, tnode);\n        };\n        this.model.splice([...location, 0], Number.MAX_VALUE, children, Object.assign(Object.assign({}, options), { onDidCreateNode, onDidDeleteNode }));\n    }\n    preserveCollapseState(elements = Iterable.empty()) {\n        if (this.sorter) {\n            elements = [...elements].sort(this.sorter.compare.bind(this.sorter));\n        }\n        return Iterable.map(elements, treeElement => {\n            let node = this.nodes.get(treeElement.element);\n            if (!node && this.identityProvider) {\n                const id = this.identityProvider.getId(treeElement.element).toString();\n                node = this.nodesByIdentity.get(id);\n            }\n            if (!node) {\n                let collapsed;\n                if (typeof treeElement.collapsed === 'undefined') {\n                    collapsed = undefined;\n                }\n                else if (treeElement.collapsed === ObjectTreeElementCollapseState.Collapsed || treeElement.collapsed === ObjectTreeElementCollapseState.PreserveOrCollapsed) {\n                    collapsed = true;\n                }\n                else if (treeElement.collapsed === ObjectTreeElementCollapseState.Expanded || treeElement.collapsed === ObjectTreeElementCollapseState.PreserveOrExpanded) {\n                    collapsed = false;\n                }\n                else {\n                    collapsed = Boolean(treeElement.collapsed);\n                }\n                return Object.assign(Object.assign({}, treeElement), { children: this.preserveCollapseState(treeElement.children), collapsed });\n            }\n            const collapsible = typeof treeElement.collapsible === 'boolean' ? treeElement.collapsible : node.collapsible;\n            let collapsed;\n            if (typeof treeElement.collapsed === 'undefined' || treeElement.collapsed === ObjectTreeElementCollapseState.PreserveOrCollapsed || treeElement.collapsed === ObjectTreeElementCollapseState.PreserveOrExpanded) {\n                collapsed = node.collapsed;\n            }\n            else if (treeElement.collapsed === ObjectTreeElementCollapseState.Collapsed) {\n                collapsed = true;\n            }\n            else if (treeElement.collapsed === ObjectTreeElementCollapseState.Expanded) {\n                collapsed = false;\n            }\n            else {\n                collapsed = Boolean(treeElement.collapsed);\n            }\n            return Object.assign(Object.assign({}, treeElement), { collapsible,\n                collapsed, children: this.preserveCollapseState(treeElement.children) });\n        });\n    }\n    rerender(element) {\n        const location = this.getElementLocation(element);\n        this.model.rerender(location);\n    }\n    getFirstElementChild(ref = null) {\n        const location = this.getElementLocation(ref);\n        return this.model.getFirstElementChild(location);\n    }\n    has(element) {\n        return this.nodes.has(element);\n    }\n    getListIndex(element) {\n        const location = this.getElementLocation(element);\n        return this.model.getListIndex(location);\n    }\n    getListRenderCount(element) {\n        const location = this.getElementLocation(element);\n        return this.model.getListRenderCount(location);\n    }\n    isCollapsible(element) {\n        const location = this.getElementLocation(element);\n        return this.model.isCollapsible(location);\n    }\n    setCollapsible(element, collapsible) {\n        const location = this.getElementLocation(element);\n        return this.model.setCollapsible(location, collapsible);\n    }\n    isCollapsed(element) {\n        const location = this.getElementLocation(element);\n        return this.model.isCollapsed(location);\n    }\n    setCollapsed(element, collapsed, recursive) {\n        const location = this.getElementLocation(element);\n        return this.model.setCollapsed(location, collapsed, recursive);\n    }\n    expandTo(element) {\n        const location = this.getElementLocation(element);\n        this.model.expandTo(location);\n    }\n    refilter() {\n        this.model.refilter();\n    }\n    getNode(element = null) {\n        if (element === null) {\n            return this.model.getNode(this.model.rootRef);\n        }\n        const node = this.nodes.get(element);\n        if (!node) {\n            throw new TreeError(this.user, `Tree element not found: ${element}`);\n        }\n        return node;\n    }\n    getNodeLocation(node) {\n        return node.element;\n    }\n    getParentNodeLocation(element) {\n        if (element === null) {\n            throw new TreeError(this.user, `Invalid getParentNodeLocation call`);\n        }\n        const node = this.nodes.get(element);\n        if (!node) {\n            throw new TreeError(this.user, `Tree element not found: ${element}`);\n        }\n        const location = this.model.getNodeLocation(node);\n        const parentLocation = this.model.getParentNodeLocation(location);\n        const parent = this.model.getNode(parentLocation);\n        return parent.element;\n    }\n    getElementLocation(element) {\n        if (element === null) {\n            return [];\n        }\n        const node = this.nodes.get(element);\n        if (!node) {\n            throw new TreeError(this.user, `Tree element not found: ${element}`);\n        }\n        return this.model.getNodeLocation(node);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport var ObjectTreeElementCollapseState;\n(function (ObjectTreeElementCollapseState) {\n    ObjectTreeElementCollapseState[ObjectTreeElementCollapseState[\"Expanded\"] = 0] = \"Expanded\";\n    ObjectTreeElementCollapseState[ObjectTreeElementCollapseState[\"Collapsed\"] = 1] = \"Collapsed\";\n    /**\n     * If the element is already in the tree, preserve its current state. Else, expand it.\n     */\n    ObjectTreeElementCollapseState[ObjectTreeElementCollapseState[\"PreserveOrExpanded\"] = 2] = \"PreserveOrExpanded\";\n    /**\n     * If the element is already in the tree, preserve its current state. Else, collapse it.\n     */\n    ObjectTreeElementCollapseState[ObjectTreeElementCollapseState[\"PreserveOrCollapsed\"] = 3] = \"PreserveOrCollapsed\";\n})(ObjectTreeElementCollapseState || (ObjectTreeElementCollapseState = {}));\nexport var TreeMouseEventTarget;\n(function (TreeMouseEventTarget) {\n    TreeMouseEventTarget[TreeMouseEventTarget[\"Unknown\"] = 0] = \"Unknown\";\n    TreeMouseEventTarget[TreeMouseEventTarget[\"Twistie\"] = 1] = \"Twistie\";\n    TreeMouseEventTarget[TreeMouseEventTarget[\"Element\"] = 2] = \"Element\";\n    TreeMouseEventTarget[TreeMouseEventTarget[\"Filter\"] = 3] = \"Filter\";\n})(TreeMouseEventTarget || (TreeMouseEventTarget = {}));\nexport class TreeError extends Error {\n    constructor(user, message) {\n        super(`TreeError [${user}] ${message}`);\n    }\n}\nexport class WeakMapper {\n    constructor(fn) {\n        this.fn = fn;\n        this._map = new WeakMap();\n    }\n    map(key) {\n        let result = this._map.get(key);\n        if (!result) {\n            result = this.fn(key);\n            this._map.set(key, result);\n        }\n        return result;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../dom.js';\nimport { StandardKeyboardEvent } from '../keyboardEvent.js';\nimport { StandardMouseEvent } from '../mouseEvent.js';\nimport { Gesture } from '../touch.js';\nimport { Disposable } from '../../common/lifecycle.js';\nexport class Widget extends Disposable {\n    onclick(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.CLICK, (e) => listener(new StandardMouseEvent(e))));\n    }\n    onmousedown(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.MOUSE_DOWN, (e) => listener(new StandardMouseEvent(e))));\n    }\n    onmouseover(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.MOUSE_OVER, (e) => listener(new StandardMouseEvent(e))));\n    }\n    onmouseleave(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.MOUSE_LEAVE, (e) => listener(new StandardMouseEvent(e))));\n    }\n    onkeydown(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.KEY_DOWN, (e) => listener(new StandardKeyboardEvent(e))));\n    }\n    onkeyup(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.KEY_UP, (e) => listener(new StandardKeyboardEvent(e))));\n    }\n    oninput(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.INPUT, listener));\n    }\n    onblur(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.BLUR, listener));\n    }\n    onfocus(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.FOCUS, listener));\n    }\n    ignoreGesture(domNode) {\n        return Gesture.ignoreTarget(domNode);\n    }\n}\n"],"names":["$","dom","unthemedKeybindingLabelOptions","keybindingLabelBackground","undefined","keybindingLabelForeground","keybindingLabelBorder","keybindingLabelBottomBorder","keybindingLabelShadow","KeybindingLabel","constructor","container","os","options","this","keyElements","Set","Object","create","labelForeground","domNode","style","color","didEverRender","appendChild","element","set","keybinding","matches","areSame","render","_a","clear","chords","getChords","renderChord","firstPart","i","length","chordPart","title","disableTitle","getAriaLabel","removeAttribute","renderUnboundKeybindings","renderUnbound","parent","chord","match","modifierLabels","UILabelProvider","ctrlKey","renderKey","Boolean","separator","shiftKey","altKey","metaKey","keyLabel","keyCode","label","highlight","createKeyElement","localize","keyElement","arguments","add","backgroundColor","borderColor","borderBottomColor","boxShadow","concat","a","b","equals","PagedRenderer","templateId","renderer","modelProvider","renderTemplate","data","disposable","Disposable","None","renderElement","index","_","height","dispose","model","isResolved","get","cts","CancellationTokenSource","promise","resolve","token","cancel","renderPlaceholder","then","entry","disposeTemplate","PagedAccessibilityProvider","accessibilityProvider","getWidgetAriaLabel","PagedList","user","virtualDelegate","renderers","pagedRenderers","map","r","list","List","assign","fromPagedListOptions","updateOptions","getHTMLElement","onDidFocus","widget","onDidDispose","onMouseDblClick","Event","_ref","browserEvent","_model","onPointer","_ref2","onDidChangeSelection","_ref3","elements","indexes","e","splice","range","getFocus","getSelection","getSelectedElements","styles","groupIntersect","groups","result","start","end","intersection","Range","intersect","isEmpty","push","size","shift","much","RangeMap","paddingTop","_paddingTop","_size","topPadding","deleteCount","items","diff","before","after","Number","POSITIVE_INFINITY","g","middle","item","_len","Array","_key","previousGroup","group","consolidate","reduce","t","count","len","indexAt","position","newSize","Math","floor","indexAfter","min","positionAt","groupCount","newCount","RowCache","cache","Map","transactionNodesPendingRemoval","inTransaction","alloc","getTemplateCache","pop","isStale","has","delete","templateData","getRenderer","row","isReusingConnectedDomNode","release","releaseRow","transact","makeChanges","Error","doRemoveNode","classList","remove","parentElement","removeChild","removeFromParent","forEach","cachedRows","cachedRow","__decorate","decorators","target","key","desc","d","c","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","StaticDND","CurrentDragAndDropData","DefaultOptions","useShadows","verticalScrollMode","setRowLineHeight","setRowHeight","supportDynamicHeights","dnd","getDragElements","getDragURI","onDragStart","onDragOver","drop","horizontalScrolling","transformOptimization","alwaysConsumeMouseWheel","ElementsDragAndDropData","update","getData","ExternalElementsDragAndDropData","NativeDragAndDropData","types","files","dataTransfer","file","type","ListViewAccessibilityProvider","getSetSize","bind","l","getPosInSet","getRole","isChecked","ListView","contentHeight","rangeMap","onDidScroll","scrollableElement","onScroll","_horizontalScrolling","value","toggle","measureItemWidth","updateScrollWidth","setScrollDimensions","width","getContentWidth","rowsContainer","max","scrollWidth","renderWidth","scrollableElementWidthDelayer","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","domId","InstanceCount","_scrollHeight","scrollableElementUpdateDisposable","Delayer","splicing","dragOverAnimationStopDisposable","dragOverMouseY","canDrop","currentDragFeedbackDisposable","onDragLeaveTimeout","disposables","DisposableStore","_onDidChangeContentHeight","Emitter","_onDidChangeContentWidth","itemId","lastRenderTop","lastRenderHeight","document","createElement","className","tabIndex","mouseSupport","paddingBottom","transform","overflow","contain","Gesture","addTarget","scrollable","Scrollable","forceIntegerValues","smoothScrollDuration","smoothScrolling","scheduleAtNextAnimationFrame","cb","SmoothScrollableElement","horizontal","vertical","mouseWheelScrollSensitivity","fastScrollSensitivity","scrollByPage","getDomNode","addDisposableListener","TouchEventType","Change","onTouchChange","scrollTop","toDragEvent","onDrop","onDragLeave","onDragEnd","layout","initialSize","scrollableOptions","scrollHeight","setSmoothScrollDuration","lastRenderRange","getRenderRange","offset","setScrollTop","eventuallyUpdateScrollDimensions","_rerender","_splice","fire","previousRenderRange","deleteRange","removeRange","rowsToDispose","dragStartDisposable","checkedDisposable","rows","disposeElement","previousRestRange","previousRenderedRestRange","previousUnrenderedRestRanges","relativeComplement","inserted","id","String","getTemplateId","getHeight","hasDynamicHeight","lastDynamicHeightWidth","uri","dropTarget","deleted","delta","renderRange","renderedRestRange","updateRange","updateItemInDOM","removeRanges","removeItemFromDOM","unrenderedRestRanges","insertRanges","beforeElement","getNextToLastElement","insertItemInDOM","values","renderHeight","eventuallyUpdateScrollWidth","trigger","rerender","getScrollDimensions","firstVisibleIndex","firstElTop","nextElTop","domElement","elementHeight","elementTop","scrollDimensions","getContentHeight","renderTop","renderLeft","updateItemsInDOM","rangesToInsert","rangesToRemove","rangesToUpdate","left","top","role","setAttribute","checked","onDidChange","insertBefore","draggable","event","window","getComputedStyle","paddingLeft","parseFloat","paddingRight","lineHeight","getElementDomId","getScrollTop","getScrollPosition","reuseAnimation","setScrollPosition","onMouseClick","DomEmitter","toMouseEvent","onMouseMiddleClick","filter","button","onMouseDown","onMouseOver","onMouseOut","onContextMenu","any","Contextmenu","toGestureEvent","onTouchStart","toTouchEvent","onTap","Tap","getItemIndexFromEventTarget","initialTarget","scrollLeft","inSmoothScrolling","err","console","error","preventDefault","stopPropagation","translationY","effectAllowed","setData","DataTransfers","TEXT","setDragImage","getDragLabel","dragImage","textContent","contains","body","getDragImageContainer","setTimeout","currentDragData","call","setupDragAndDropScrollTopAnimation","accept","currentDragFeedback","feedback","dropEffect","effect","distinct","sort","f1","f2","isArray","toDisposable","disposableTimeout","clearDragOverFeedback","dragData","teardownDragAndDropScrollTopAnimation","dragOverAnimationDisposable","viewTop","getTopLeftOffset","animate","animateDragAndDropScrollTop","pageY","upperLimit","HTMLElement","rawIndex","getAttribute","isNaN","anchorElementIndex","anchorElementTopDelta","heightDiff","didChange","probeDynamicHeight","unrenderRanges","renderRanges","afterIndex","beforeRow","deltaScrollTop","getFutureScrollPosition","newScrollTop","getDynamicHeight","offsetHeight","BugIndicatingError","setDynamicHeight","ranges","lastRange","nextToLastItem","parentNode","memoize","prototype","CombinedSpliceable","spliceables","s","ListError","message","super","TypeNavigationMode","TypeNavigationControllerState","__awaiter","thisArg","_arguments","P","generator","Promise","reject","fulfilled","step","next","rejected","done","apply","TraitRenderer","trait","renderedElements","name","renderedElementIndex","findIndex","el","rendered","unrender","renderIndex","insertCount","renderedElement","renderIndexes","indexOf","Trait","_trait","sortedIndexes","_onChange","onChange","j","first","find","_set","numericSort","sortedResult","toRender","disjunction","binarySearch","SelectionTrait","setAriaSelected","TraitSpliceable","view","identityProvider","fill","pastElementsWithTrait","getId","toString","pastElementsWithTraitSet","elementsWithTrait","isInputElement","tagName","isMonacoEditor","isButton","KeyboardController","onKeyDown","chain","StandardKeyboardEvent","multipleSelectionDisposables","multipleSelectionSupport","onEnter","onUpArrow","onDownArrow","onPageUpArrow","onPageDownArrow","onEscape","platform","onCtrlA","optionsUpdate","setSelection","focusPrevious","setAnchor","reveal","focus","focusNext","focusPreviousPage","focusNextPage","DefaultKeyboardNavigationDelegate","mightProducePrintableCharacter","TypeNavigationController","keyboardNavigationLabelProvider","keyboardNavigationEventFilter","delegate","enabled","state","Idle","mode","Automatic","triggered","previouslyFocused","enabledDisposables","typeNavigationEnabled","enable","disable","typeNavigationMode","typing","onChar","EventHelper","stop","onClear","debounce","onInput","ariaLabel","alert","word","Typing","getKeyboardNavigationLabel","labelStr","matchesPrefix","setFocus","fuzzy","matchesFuzzy2","DOMFocusController","onTab","focusedDomElement","tabIndexElement","querySelector","visibility","display","isSelectionSingleChangeEvent","isSelectionRangeChangeEvent","DefaultMultipleSelectionController","MouseController","_onPointer","multipleSelectionController","onDoubleClick","onViewPointer","isSelectionChangeEvent","activeElement","domFocus","isHandledByList","changeSelection","MouseEvent","anchor","getAnchor","currentFocus","rangeSelection","selection","contiguousRange","reverse","getContiguousRangeContaining","newSelection","one","other","DefaultStyleController","styleElement","selectorSuffix","suffix","content","listBackground","listFocusBackground","listFocusForeground","listActiveSelectionBackground","listActiveSelectionForeground","listActiveSelectionIconForeground","listFocusAndSelectionBackground","listFocusAndSelectionForeground","listInactiveFocusForeground","listInactiveSelectionIconForeground","listInactiveFocusBackground","listInactiveSelectionBackground","listInactiveSelectionForeground","listHoverBackground","listHoverForeground","focusAndSelectionOutline","asCssValueWithDefault","listFocusAndSelectionOutline","listSelectionOutline","listFocusOutline","inactiveFocusAndSelectionOutline","listInactiveFocusOutline","listHoverOutline","listDropBackground","tableColumnsBorder","tableOddRowsBackgroundColor","join","unthemedListStyles","treeIndentGuidesStroke","treeInactiveIndentGuidesStroke","Color","fromHex","transparent","keyboardSupport","PipelineRenderer","_templateId","AccessibiltyRenderer","ariaLevel","getAriaLevel","ListViewDragAndDrop","originalEvent","targetElement","targetIndex","onDidChangeFocus","eventBufferer","wrapEvent","toListEvent","mouseController","didJustPressContextMenuKey","fromKeyDown","fromKeyUp","fromMouse","StandardMouseEvent","signal","_options","EventBufferer","_ariaLabel","_onDidDispose","getWidgetRole","baseRenderers","onDidChangeActiveDescendant","viewOptions","createListView","styleController","createStyleSheet","spliceable","keyboardController","keyboardNavigationDelegate","typeNavigationController","createMouseController","_onFocusChange","_onSelectionChange","bufferEvents","preventScroll","firstOrDefault","getAnchorElement","n","loop","findNextIndex","findPreviousIndex","lastPageIndex","currentlyFocusedElementIndex","lastGoodPageIndex","previousScrollTop","nextpageScrollTop","timeout","firstPageIndex","firstGoodPageIndex","focusLast","focusFirst","focusNth","getFocusedElements","relativeTop","isNumber","m","clamp","viewItemBottom","scrollBottom","getElementID","getActiveDescendantId","MENU_MNEMONIC_REGEX","MENU_ESCAPED_MNEMONIC_REGEX","Direction","Menu","ActionBar","actions","menuStyles","menuElement","orientation","actionViewItemProvider","action","doGetActionViewItem","parentData","context","actionRunner","ariaRole","focusOnlyEnabledItems","triggerKeys","keys","isMacintosh","isLinux","keyDown","actionsList","menuDisposables","_register","initializeOrUpdateStyleSheet","EventType","KEY_DOWN","enableMnemonics","toLocaleLowerCase","mnemonics","SubmenuMenuActionViewItem","focusItemByElement","onClick","focusedItem","viewItems","MOUSE_OUT","relatedTarget","isAncestor","updateFocus","MOUSE_OVER","lastFocusedItem","setFocusedItem","DomScrollableElement","verticalScrollbarSize","handleMouseWheel","scrollElement","styleScrollElement","MOUSE_UP","maxHeight","innerHeight","getBoundingClientRect","submenuIds","warn","icon","isMenu","scanDomNode","MenuSeparatorActionViewItem","array","updatePositionInSet","styleSheet","isInShadowDOM","globalStyleSheet","isForShadowDom","formatRule","Codicon","menuSelection","menuSubmenu","scrollbarShadowColor","scrollbarShadow","scrollbarSliderBackgroundColor","scrollbarSliderBackground","scrollbarSliderHoverBackgroundColor","scrollbarSliderHoverBackground","scrollbarSliderActiveBackgroundColor","scrollbarSliderActiveBackground","getMenuWidgetCSS","fgColor","foregroundColor","bgColor","border","shadow","shadowColor","outline","borderRadius","getContainer","children","fromRight","round","Separator","SubmenuAction","menuActionViewItem","mnemonic","getMnemonic","isEnabled","actionViewItems","menuItemOptions","useEventAsContext","getKeyBinding","keybindingLabel","getLabel","BaseMenuActionViewItem","BaseActionViewItem","ctx","menuStyle","cssClass","exec","runOnceToEnableMouseUp","RunOnceScheduler","isFirefox","rightButton","CONTEXT_MENU","append","_action","ID","check","ThemeIcon","asCSSSelector","schedule","updateClass","updateLabel","updateTooltip","updateEnabled","updateChecked","applyStyle","blur","pos","setSize","clearNode","stripIcons","cleanLabel","regex","mnemonicInText","replace","trim","cleanMnemonic","strings","lastIndex","escMatch","replaceDoubleEscapes","str","substr","innerText","split","class","isSelected","selectionForegroundColor","selectionBackgroundColor","selectionBorderColor","outlineOffset","submenuActions","submenuOptions","mysubmenu","submenuDisposables","mouseOver","expandDirection","Right","showScheduler","cleanupExistingSubmenu","createSubmenu","hideScheduler","getActiveElement","submenu","updateAriaExpanded","submenuIndicator","KEY_UP","MOUSE_LEAVE","FOCUS_OUT","force","submenuContainer","calculateSubmenuMenuLayout","windowDimensions","ret","selectFirstItem","computedStyles","zIndex","EmptySubmenuAction","entryBox","entryBoxUpdated","viewBox","Dimension","innerWidth","lift","onDidCancel","ActionViewItem","separatorColor","fontCharacter","getCodiconFontCharacters","MOUSE_CURSOR_TEXT_CSS_CLASS_NAME","CSS_DONE","CSS_ACTIVE","CSS_INFINITE","CSS_INFINITE_LONG_RUNNING","CSS_DISCRETE","ProgressBar","workedVal","showDelayedScheduler","show","longRunningScheduler","infiniteLongRunning","LONG_RUNNING_INFINITE_THRESHOLD","bit","progressBarBackground","off","opacity","totalWork","doDone","delayed","infinite","ResizableHTMLElement","currentSize","_onDidWillResize","onDidWillResize","_onDidResize","onDidResize","_sashListener","_minSize","_maxSize","MAX_SAFE_INTEGER","_eastSash","Sash","getVerticalSashLeft","_westSash","_northSash","getHorizontalSashTop","orthogonalEdge","OrthogonalEdge","North","_southSash","South","orthogonalStartSash","orthogonalEndSash","deltaY","deltaX","onDidStart","onDidEnd","dimension","currentX","startX","east","west","currentY","startY","north","south","onDidReset","_preferredSize","enableSashes","minHeight","minWidth","maxWidth","clearSashHoverState","maxSize","minSize","preferredSize","onDidChangeGlobalSize","onDidChangeHoverDelay","MouseEventFactory","onPointerMove","onPointerUp","GestureEventFactory","End","OrthogonalPointerEventFactory","factory","PointerEventsDisabledCssClass","_state","_orthogonalStartSash","_orthogonalEndSash","onDidEnablementChange","sash","orthogonalStartDragHandleDisposables","orthogonalStartSashDisposables","_orthogonalStartDragHandle","onMouseEnter","onMouseLeave","orthogonalEndDragHandleDisposables","orthogonalEndSashDisposables","_orthogonalEndDragHandle","layoutProvider","hoverDelay","hoverDelayer","_onDidStart","_onDidChange","_onDidReset","_onDidEnd","linkedSash","onPointerStart","onMouseDoubleClick","onPointerDoublePress","Start","doubleTapTimeout","clearTimeout","delay","pointerEventFactory","isMultisashResize","__orthogonalSashEvent","orthogonalSash","getOrthogonalSash","__linkedSashEvent","iframes","getElementsByTagName","iframe","pageX","startEvent","updateStyle","cursor","fromLinkedSash","verticalProvider","getVerticalSashTop","getVerticalSashHeight","horizontalProvider","getHorizontalSashLeft","getHorizontalSashWidth","ARROW_IMG_SIZE","ScrollbarArrow","Widget","opts","_onActivate","onActivate","bgDomNode","bgWidth","bgHeight","bottom","right","asClassNameArray","_pointerMoveMonitor","GlobalPointerMoveMonitor","POINTER_DOWN","_arrowPointerDown","_pointerdownRepeatTimer","IntervalTimer","_pointerdownScheduleRepeatTimer","TimeoutTimer","Element","cancelAndSet","scheduleRepeater","startMonitoring","pointerId","buttons","pointerMoveData","ScrollbarVisibilityController","visibleClassName","invisibleClassName","_visibility","_visibleClassName","_invisibleClassName","_domNode","_isVisible","_isNeeded","_rawShouldBeVisible","_shouldBeVisible","_revealTimer","setVisibility","_updateShouldBeVisible","setShouldBeVisible","rawShouldBeVisible","_applyVisibilitySetting","shouldBeVisible","ensureVisibility","setIsNeeded","isNeeded","setDomNode","setClassName","_reveal","_hide","setIfNotSet","withFadeAway","AbstractScrollbar","_lazyRender","lazyRender","_host","host","_scrollable","_scrollByPage","_scrollbarState","scrollbarState","_visibilityController","extraScrollbarClassName","_shouldRender","createFastDomNode","setPosition","_domNodePointerDown","_createArrow","arrow","_createSlider","slider","setTop","setLeft","setWidth","setHeight","setLayerHinting","setContain","_sliderPointerDown","onclick","leftButton","_onElementSize","visibleSize","setVisibleSize","_onElementScrollSize","elementScrollSize","setScrollSize","_onElementScrollPosition","elementScrollPosition","beginReveal","beginHide","_renderDomNode","getRectangleLargeSize","getRectangleSmallSize","_updateSlider","getSliderSize","getArrowSize","getSliderPosition","_onPointerDown","delegatePointerDown","domTop","getClientRects","sliderStart","sliderStop","pointerPos","_sliderPointerPosition","offsetX","offsetY","domNodePosition","_pointerDownRelativePosition","_setDesiredScrollPositionNow","getDesiredScrollPositionFromOffsetPaged","getDesiredScrollPositionFromOffset","initialPointerPosition","initialPointerOrthogonalPosition","_sliderOrthogonalPointerPosition","initialScrollbarState","clone","toggleClassName","pointerOrthogonalPosition","pointerOrthogonalDelta","abs","pointerDelta","getDesiredScrollPositionFromDelta","_desiredScrollPosition","desiredScrollPosition","writeScrollPosition","setScrollPositionNow","updateScrollbarSize","scrollbarSize","_updateScrollbarSize","setScrollbarSize","HorizontalScrollbar","scrollPosition","getCurrentScrollPosition","ScrollbarState","horizontalHasArrows","arrowSize","horizontalScrollbarSize","arrowDelta","scrollbarDelta","scrollbarButtonLeft","onMouseWheel","StandardWheelEvent","scrollbarButtonRight","horizontalSliderSize","sliderSize","sliderPosition","largeSize","smallSize","setBottom","setOppositeScrollbarSize","VerticalScrollbar","verticalHasArrows","scrollbarButtonUp","scrollbarButtonDown","verticalSliderSize","setRight","MouseWheelClassifierItem","timestamp","score","MouseWheelClassifier","_capacity","_memory","_front","_rear","isPhysicalMouseWheel","remainingInfluence","iteration","influence","pow","acceptStandardWheelEvent","osZoomFactor","devicePixelRatio","getZoomFactor","Date","now","_computeScore","_isAlmostInt","INSTANCE","AbstractScrollableElement","_onScroll","_onWillScroll","flipAxes","consumeMouseWheelIfScrollbarIsNeeded","scrollYToX","scrollPredominantAxis","mouseWheelSmoothScroll","listenOnDomNode","resolveOptions","_onDidScroll","scrollbarHost","mouseWheelEvent","_onMouseWheel","_onDragStart","_onDragEnd","_verticalScrollbar","_horizontalScrollbar","_leftShadowDomNode","_topShadowDomNode","_topLeftShadowDomNode","_listenOnDomNode","_mouseWheelToDispose","_setListeningToMouseWheel","onmouseover","_onMouseOver","onmouseleave","_onMouseLeave","_hideTimeout","_isDragging","_mouseIsOver","_revealOnScroll","getOverviewRulerLayoutInfo","delegateVerticalScrollbarPointerDown","dimensions","updateClassName","newClassName","newOptions","_render","delegateScrollFromMouseWheelEvent","shouldListen","MOUSE_WHEEL","passive","defaultPrevented","classifier","didScroll","shiftConvert","futureScrollPosition","desiredScrollTop","ceil","deltaScrollLeft","desiredScrollLeft","validateScrollPosition","setScrollPositionSmooth","consumeMouseWheel","renderNow","scrollState","enableTop","enableLeft","leftClassName","topClassName","topLeftClassName","_scheduleHide","ScrollableElement","callback","_element","scrollTopChanged","scrollLeftChanged","clientWidth","clientHeight","oppositeScrollbarSize","scrollSize","_scrollbarSize","_oppositeScrollbarSize","_arrowSize","_visibleSize","_scrollSize","_scrollPosition","_computedAvailableSize","_computedIsNeeded","_computedSliderSize","_computedSliderRatio","_computedSliderPosition","_refreshComputedValues","iVisibleSize","iScrollSize","iScrollPosition","_computeValues","computedAvailableSize","computedRepresentableSize","computedIsNeeded","computedSliderSize","computedSliderRatio","computedSliderPosition","desiredSliderPosition","correctedOffset","SELECT_OPTION_ENTRY_TEMPLATE_ID","SelectListRenderer","root","text","detail","decoratorRight","isDisabled","_templateData","SelectBoxList","selected","contextViewProvider","selectBoxOptions","_currentSelection","_hasDetails","_skipLayout","_sticky","minBottomMargin","DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN","selectElement","ariaDescription","_onDidSelect","registerListeners","constructSelectDropDown","setOptions","initStyleSheet","selectDropDownContainer","selectionDetailsPane","widthControlOuterDiv","widthControlInnerDiv","widthControlElement","_dropDownPosition","DRAG_START","listIsVisibleOnTouchStart","selectedIndex","CLICK","hideSelectDropDown","showSelectDropDown","MOUSE_DOWN","showDropDown","onDidSelect","arrays","_cachedMaxDetailsHeight","option","createOption","description","select","setOptionsList","selectList","setFocusable","focusable","styleSelectElement","decoratorRightForeground","selectBackground","selectBorder","selectListBorder","background","foreground","selectForeground","styleList","selectListBackground","selectDropDownListContainer","optionsBorder","focusBorder","outlineColor","disabled","createSelectList","showContextView","renderSelectDropDown","layoutSelectDropDown","onHide","anchorPosition","optionsAsChildren","focusSelect","hideContextView","preLayoutPosition","measureMaxDetailsHeight","maxDetailsPaneHeight","_option","updateDetail","selectPosition","verticalPadding","getPropertyValue","maxSelectDropDownHeightBelow","maxSelectDropDownHeightAbove","DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN","selectWidth","offsetWidth","selectMinWidth","setWidthControlElement","selectOptimalWidth","listHeight","minRequiredDropDownHeight","maxVisibleOptionsBelow","maxVisibleOptionsAbove","DEFAULT_MINIMUM_VISIBLE_OPTIONS","elementWidth","longest","longestLength","detailLength","rightDecoratorLength","listRenderer","comment","onSelectDropDownKeyDown","onPageDown","onPageUp","onHome","onEnd","onCharacter","POINTER_UP","onListFocus","onListBlur","listRowElement","closest","renderDescriptionMarkdown","actionHandler","cleanRenderedMarkdown","childNodes","child","toLowerCase","renderMarkdown","supportThemeIcons","descriptionIsMarkdown","descriptionMarkdownActionHandler","nextOptionDisabled","ch","KeyCodeUtils","optionIndex","charAt","toUpperCase","SelectBoxNative","eventType","showSelect","applyStyles","SelectBox","useCustomDrawn","selectBoxDelegate","defaultStyles","separatorBorder","ViewItem","visible","_cachedVisibleSize","setVisible","viewMinimumSize","viewMaximumSize","minimumSize","maximumSize","priority","proportionalLayout","snap","pointerEvents","cachedVisibleSize","layoutContext","layoutContainer","VerticalViewItem","HorizontalViewItem","State","Sizing","Distribute","Split","Auto","Invisible","SplitView","startSnappingEnabled","_startSnappingEnabled","endSnappingEnabled","_endSnappingEnabled","sashItem","sashItems","updateSashEnablement","contentSize","proportions","_onDidSashChange","_onDidSashReset","onDidSashChange","onDidSashReset","inverseAltBehavior","getSashOrthogonalSize","sashContainer","viewContainer","scrollbarVisibility","onDidScrollViewContainer","descriptor","views","viewDescriptor","sizing","doAddView","saveProportions","isTransparent","removeProperty","setProperty","addView","skipLayout","previousSize","total","proportion","lowPriorityIndexes","highPriorityIndexes","resize","distributeEmptySpace","layoutViews","onSashStart","alt","combinedDisposable","resetSashDragState","sashDragState","current","sizes","snapBefore","snapAfter","minDelta","NEGATIVE_INFINITY","maxDelta","viewItem","upIndexes","downIndexes","minDeltaUp","maxDeltaUp","maxDeltaDown","minDeltaDown","snapBeforeIndex","findFirstSnapIndex","snapAfterIndex","halfSize","limitDelta","onSashChange","newDelta","isLastSash","newSizes","viewItemIndex","newMinDelta","newMaxDelta","resizeIndex","onSashEnd","onViewChange","relayout","resizeView","Busy","distributeViewSizes","flexibleViewItems","flexibleSize","getViewSize","onChangeDisposable","containerDisposable","viewSize","areViewsDistributed","getSashPosition","sashEventMapper","onStartDisposable","onStart","onEndDisposable","onDidResetDisposable","overloadMinDelta","overloadMaxDelta","pushToStart","pushToEnd","upItems","upSizes","downItems","downSizes","snapped","snapView","deltaUp","deltaDown","lowPriorityIndex","emptyDelta","updateScrollableElement","previous","collapsesDown","expandsDown","reverseViews","collapsesUp","expandsUp","snappedBefore","snappedAfter","TableListRenderer","columns","getColumnSize","TemplateId","renderedTemplates","rendererMap","column","rowContainer","cellContainers","cellTemplateData","cellContainer","cell","project","layoutColumn","ColumnHeader","minimumWidth","maximumWidth","onDidChangeWidthConstraints","_onDidLayout","onDidLayout","tooltip","Table","cachedWidth","cachedHeight","headers","weight","splitview","headerRowHeight","h","totalWeight","unthemedToggleStyles","inputActiveOptionBorder","inputActiveOptionForeground","inputActiveOptionBackground","Toggle","_onKeyDown","_opts","_checked","classes","_icon","actionClassName","notFocusable","ev","ignoreGesture","onkeydown","keyboardEvent","newIsChecked","ToolBar","contextMenuProvider","submenuActionViewItems","hasSecondaryActions","_onDidChangeDropdownVisibility","EventMultiplexer","onDidChangeDropdownVisibility","lookupKeybindings","toggleMenuAction","ToggleMenuAction","toggleMenuActionViewItem","toggleMenuTitle","actionBar","allowContextMenu","highlightToggledItems","viewItemOptions","DropdownMenuActionViewItem","menuActions","keybindingProvider","classNames","moreIcon","toolBarMore","anchorAlignmentProvider","menuAsChild","renderDropdownAsChildElement","skipTelemetry","setActionContext","onDidChangeVisibility","getElement","getItemAction","indexOrElement","getAction","setActions","primaryActions","secondaryActions","primaryActionsToSet","slice","getKeybindingLabel","Action","toggleDropdownMenu","nls","_menuActions","run","RenderIndentGuides","TreeElementsDragAndDropData","node","asTreeDragAndDropData","TreeNodeListDragAndDrop","autoExpandDisposable","nodes","targetNode","raw","didChangeAutoExpandNode","autoExpandNode","autoExpand","ref","getNodeLocation","isCollapsed","setCollapsed","bubble","parentRef","getParentNodeLocation","getNode","parentIndex","getListIndex","getListRenderCount","ComposedTreeDelegate","EventCollection","_elements","TreeRenderer","onDidChangeCollapseState","activeNodes","renderedIndentGuides","renderedNodes","indent","DefaultIndent","hideTwistiesOfChildlessElements","shouldRenderIndentGuides","activeIndentNodes","indentGuidesDisposable","onDidChangeNodeTwistieState","onDidChangeTwistieState","renderTreeElement","renderIndentGuides","_renderIndentGuides","_onDidChangeActiveNodes","twistie","contents","depth","collapsible","collapsed","treeItemExpanded","twistieRendered","renderTwistie","visibleChildrenCount","disposableStore","guide","childElementCount","firstElementChild","line","FindFilter","totalCount","_totalCount","matchCount","_matchCount","tree","_filter","_pattern","_lowercasePattern","onWillRefilter","reset","parentVisibility","isFilterResult","getVisibleState","FuzzyScore","Default","labels","findMatchType","TreeFindMatchType","Contiguous","fuzzyScore","firstMatchCanBeWeak","boostFullMatch","findMode","TreeFindMode","Filter","defaultFindVisibility","unthemedInboxStyles","FindController","pattern","_mode","refilter","_onDidChangeMode","matchType","_matchType","_onDidChangeMatchType","onDidChangeMode","onDidChangeMatchType","_onDidChangePattern","_onDidChangeOpenState","onDidChangeOpenState","defaultFindMode","Highlight","defaultFindMatchType","Fuzzy","onDidSplice","onDidSpliceModel","noMatches","showNotFoundMessage","showMessage","clearMessage","shouldAllowFocus","isDefault","filterData","_history","asTreeMouseEvent","TreeMouseEventTarget","Unknown","hasParentWithClass","Twistie","dfs","fn","nodeSet","_nodeSet","createNodeSet","getFirstViewElementWithTrait","__forceEvent","silent","that","getNodes","onDidModelSplice","insertedNodes","deletedNodes","visit","deletedNodesIdSet","deletedNodesVisitor","insertedNodesMap","insertedNodesVisitor","insertedNode","TreeNodeListMouseController","onTwistie","expandOnlyOnTwistieClick","expandOnDoubleClick","location","recursive","toggleCollapsed","TreeNodeList","focusTrait","selectionTrait","anchorTrait","additionalFocus","additionalSelection","fromAPI","AbstractTree","onDidChangeModel","findController","findFuzzy","_user","onDidChangeFindOpenState","_onWillRefilter","_onDidUpdateOptions","treeDelegate","onDidChangeCollapseStateRelay","Relay","onDidChangeActiveNodes","SetMap","visibleChildIndex","createModel","input","activeNodesEmitter","activeNodesDebounce","onLeftArrow","onRightArrow","onSpace","findWidgetEnabled","findWidgetStyles","focusNavigationFilter","onDidChangeFindMode","onDidChangeFindMatchType","Always","getParentElement","getFirstElementChild","collapse","expand","isCollapsible","setCollapsible","expandTo","parentLocation","parentListIndex","some","focusedIndex","firstChildIndex","createAsyncDataTreeNode","props","refreshPromise","stale","slow","collapsedByDefault","ancestor","descendant","AsyncDataTreeNodeWrapper","AsyncDataTreeRenderer","nodeMapper","twistieElement","treeItemLoading","asTreeEvent","AsyncDataTreeElementsDragAndDropData","asAsyncDataTreeDragAndDropData","AsyncDataTreeNodeListDragAndDrop","asObjectTreeOptions","collapseByDefault","sorter","hasChildren","AsyncDataTree","dataSource","subTreeRefreshPromises","refreshPromises","_onDidRender","_onDidChangeNodeSlowState","WeakMapper","autoExpandSingleChildren","createTree","_onDidChangeCollapseState","objectTreeDelegate","objectTreeRenderers","objectTreeOptions","ObjectTree","getInput","setInput","viewState","viewStateContext","_updateChildren","TreeError","toPromise","getDataNode","refreshAndRenderNode","dataNode","hasElement","refreshNode","intersects","doRefreshSubTree","finally","childrenToRefresh","doRefreshNode","Promises","settled","childrenPromise","doGetChildren","isIterable","slowTimeout","Iterable","empty","setChildren","isCancellationError","getChildren","processChildren","createCancelablePromise","deep","catch","onUnexpectedError","childrenElementsIterable","childrenElements","nodesToForget","childrenTreeNodesById","asyncDataTreeNode","childAsyncDataTreeNode","expanded","asTreeElement","diffIdentityProvider","compare","CompressibleAsyncDataTreeNodeWrapper","incompressible","CompressibleAsyncDataTreeRenderer","compressibleNodeMapperProvider","renderCompressedElements","disposeCompressedElements","CompressibleAsyncDataTree","compressionDelegate","compressibleNodeMapper","getCompressedNodeKeyboardNavigationLabel","els","asCompressibleObjectTreeOptions","CompressibleObjectTree","isIncompressible","getUncompressedIds","compressedNode","getCompressedTreeNode","oldSelection","oldFocus","didChangeSelection","didChangeFocus","filterResult","DataTree","ObjectTreeModel","obj","isCollapsibleStateUpdate","IndexTreeModel","rootElement","rootRef","_onDidChangeRenderNodeCount","onDidChangeRenderNodeCount","_onDidSplice","refilterDelayer","MicrotaskDelay","renderNodeCount","toInsert","spliceSmart","spliceSimple","identity","toInsertIterable","recurseLevels","diffDepth","getParentNodeWithListIndex","lastDiffIds","LcsDiff","getElements","ComputeDiff","quitEarly","locationPrefix","recurseSplice","fromOriginal","fromModified","lastStartO","lastStartM","change","changes","originalStart","originalLength","modifiedStart","modifiedLength","onDidCreateNode","onDidDeleteNode","listIndex","revealed","treeListElementsToInsert","nodesToInsertIterator","createTreeNode","lastHadChildren","visibleChildStartIndex","nodesToInsert","insertedVisibleChildrenCount","deletedVisibleChildrenCount","visibleDeleteCount","_updateAncestorsRenderNodeCount","currentlyHasChildren","getTreeNodeWithListIndex","hasTreeNode","getTreeNode","_setCollapseState","_setListNodeCollapseState","onlyVisibleChildIndex","_setNodeCollapseState","previousRenderNodeCount","updateNodeAfterCollapseChange","updateNodeAfterFilterChange","treeElement","treeListElements","_filterNode","childElements","childRevealed","_updateNodeAfterCollapseChange","_updateNodeAfterFilterChange","resultStartLength","hasVisibleDescendants","rest","indexTreeNode","tail2","noCompress","from","compress","childrenIterator","consume","_decompress","decompress","CompressedObjectTreeModel","compressionEnabled","base","compressedChildren","_setChildren","Infinity","compressedParentNode","splicedElement","recompressedElement","elementComparator","parentChildren","setCompressionEnabled","rootChildren","decompressedRootChildren","recompressedRootChildren","insertedElements","getCompressedNode","DefaultElementMapper","CompressedTreeNodeWrapper","unwrapper","CompressibleObjectTreeModel","elementMapper","compressedNodeUnwrapper","updateElementHeight","mapList","otherNode","mapOptions","CompressibleRenderer","compressedTreeNodeProvider","_compressedTreeNodeProvider","compressedTreeNode","nodesByIdentity","getElementLocation","preserveCollapseState","insertedElementIds","MAX_VALUE","tnode","ObjectTreeElementCollapseState","Collapsed","PreserveOrCollapsed","Expanded","PreserveOrExpanded","_map","WeakMap","listener","onmousedown","onkeyup","oninput","INPUT","onblur","BLUR","onfocus","FOCUS","ignoreTarget"],"sourceRoot":""}