{"version":3,"file":"static/js/monaco-editor-vendor.a3a53265.bd0fe4fb.js","mappings":"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","sources":["../../node_modules/monaco-editor/esm/vs/base/browser/formattedTextRenderer.js","../../node_modules/monaco-editor/esm/vs/base/browser/globalPointerMoveMonitor.js","../../node_modules/monaco-editor/esm/vs/base/browser/keyboardEvent.js","../../node_modules/monaco-editor/esm/vs/base/browser/markdownRenderer.js","../../node_modules/monaco-editor/esm/vs/base/browser/iframe.js","../../node_modules/monaco-editor/esm/vs/base/browser/mouseEvent.js","../../node_modules/monaco-editor/esm/vs/base/browser/performance.js","../../node_modules/monaco-editor/esm/vs/base/browser/pixelRatio.js","../../node_modules/monaco-editor/esm/vs/base/browser/touch.js","../../node_modules/monaco-editor/esm/vs/base/browser/trustedTypes.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/actionbar/actionViewItems.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/actionbar/actionbar.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/aria/aria.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/button/button.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/contextview/contextview.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/countBadge/countBadge.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/dropdown/dropdown.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/dropdown/dropdownActionViewItem.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/findinput/findInput.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/findinput/findInputToggles.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/findinput/replaceInput.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/highlightedlabel/highlightedLabel.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/hover/hoverDelegate2.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/hover/hoverDelegateFactory.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/hover/hoverWidget.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/iconLabel/iconLabel.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/iconLabel/iconLabels.js","../../node_modules/monaco-editor/esm/vs/base/browser/ui/inputbox/inputBox.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as DOM from './dom.js';\nexport function renderText(text, options = {}) {\n    const element = createElement(options);\n    element.textContent = text;\n    return element;\n}\nexport function renderFormattedText(formattedText, options = {}) {\n    const element = createElement(options);\n    _renderFormattedText(element, parseFormattedText(formattedText, !!options.renderCodeSegments), options.actionHandler, options.renderCodeSegments);\n    return element;\n}\nexport function createElement(options) {\n    const tagName = options.inline ? 'span' : 'div';\n    const element = document.createElement(tagName);\n    if (options.className) {\n        element.className = options.className;\n    }\n    return element;\n}\nclass StringStream {\n    constructor(source) {\n        this.source = source;\n        this.index = 0;\n    }\n    eos() {\n        return this.index >= this.source.length;\n    }\n    next() {\n        const next = this.peek();\n        this.advance();\n        return next;\n    }\n    peek() {\n        return this.source[this.index];\n    }\n    advance() {\n        this.index++;\n    }\n}\nfunction _renderFormattedText(element, treeNode, actionHandler, renderCodeSegments) {\n    let child;\n    if (treeNode.type === 2 /* FormatType.Text */) {\n        child = document.createTextNode(treeNode.content || '');\n    }\n    else if (treeNode.type === 3 /* FormatType.Bold */) {\n        child = document.createElement('b');\n    }\n    else if (treeNode.type === 4 /* FormatType.Italics */) {\n        child = document.createElement('i');\n    }\n    else if (treeNode.type === 7 /* FormatType.Code */ && renderCodeSegments) {\n        child = document.createElement('code');\n    }\n    else if (treeNode.type === 5 /* FormatType.Action */ && actionHandler) {\n        const a = document.createElement('a');\n        actionHandler.disposables.add(DOM.addStandardDisposableListener(a, 'click', (event) => {\n            actionHandler.callback(String(treeNode.index), event);\n        }));\n        child = a;\n    }\n    else if (treeNode.type === 8 /* FormatType.NewLine */) {\n        child = document.createElement('br');\n    }\n    else if (treeNode.type === 1 /* FormatType.Root */) {\n        child = element;\n    }\n    if (child && element !== child) {\n        element.appendChild(child);\n    }\n    if (child && Array.isArray(treeNode.children)) {\n        treeNode.children.forEach((nodeChild) => {\n            _renderFormattedText(child, nodeChild, actionHandler, renderCodeSegments);\n        });\n    }\n}\nfunction parseFormattedText(content, parseCodeSegments) {\n    const root = {\n        type: 1 /* FormatType.Root */,\n        children: []\n    };\n    let actionViewItemIndex = 0;\n    let current = root;\n    const stack = [];\n    const stream = new StringStream(content);\n    while (!stream.eos()) {\n        let next = stream.next();\n        const isEscapedFormatType = (next === '\\\\' && formatTagType(stream.peek(), parseCodeSegments) !== 0 /* FormatType.Invalid */);\n        if (isEscapedFormatType) {\n            next = stream.next(); // unread the backslash if it escapes a format tag type\n        }\n        if (!isEscapedFormatType && isFormatTag(next, parseCodeSegments) && next === stream.peek()) {\n            stream.advance();\n            if (current.type === 2 /* FormatType.Text */) {\n                current = stack.pop();\n            }\n            const type = formatTagType(next, parseCodeSegments);\n            if (current.type === type || (current.type === 5 /* FormatType.Action */ && type === 6 /* FormatType.ActionClose */)) {\n                current = stack.pop();\n            }\n            else {\n                const newCurrent = {\n                    type: type,\n                    children: []\n                };\n                if (type === 5 /* FormatType.Action */) {\n                    newCurrent.index = actionViewItemIndex;\n                    actionViewItemIndex++;\n                }\n                current.children.push(newCurrent);\n                stack.push(current);\n                current = newCurrent;\n            }\n        }\n        else if (next === '\\n') {\n            if (current.type === 2 /* FormatType.Text */) {\n                current = stack.pop();\n            }\n            current.children.push({\n                type: 8 /* FormatType.NewLine */\n            });\n        }\n        else {\n            if (current.type !== 2 /* FormatType.Text */) {\n                const textCurrent = {\n                    type: 2 /* FormatType.Text */,\n                    content: next\n                };\n                current.children.push(textCurrent);\n                stack.push(current);\n                current = textCurrent;\n            }\n            else {\n                current.content += next;\n            }\n        }\n    }\n    if (current.type === 2 /* FormatType.Text */) {\n        current = stack.pop();\n    }\n    if (stack.length) {\n        // incorrectly formatted string literal\n    }\n    return root;\n}\nfunction isFormatTag(char, supportCodeSegments) {\n    return formatTagType(char, supportCodeSegments) !== 0 /* FormatType.Invalid */;\n}\nfunction formatTagType(char, supportCodeSegments) {\n    switch (char) {\n        case '*':\n            return 3 /* FormatType.Bold */;\n        case '_':\n            return 4 /* FormatType.Italics */;\n        case '[':\n            return 5 /* FormatType.Action */;\n        case ']':\n            return 6 /* FormatType.ActionClose */;\n        case '`':\n            return supportCodeSegments ? 7 /* FormatType.Code */ : 0 /* FormatType.Invalid */;\n        default:\n            return 0 /* FormatType.Invalid */;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from './dom.js';\nimport { DisposableStore, toDisposable } from '../common/lifecycle.js';\nexport class GlobalPointerMoveMonitor {\n    constructor() {\n        this._hooks = new DisposableStore();\n        this._pointerMoveCallback = null;\n        this._onStopCallback = null;\n    }\n    dispose() {\n        this.stopMonitoring(false);\n        this._hooks.dispose();\n    }\n    stopMonitoring(invokeStopCallback, browserEvent) {\n        if (!this.isMonitoring()) {\n            // Not monitoring\n            return;\n        }\n        // Unhook\n        this._hooks.clear();\n        this._pointerMoveCallback = null;\n        const onStopCallback = this._onStopCallback;\n        this._onStopCallback = null;\n        if (invokeStopCallback && onStopCallback) {\n            onStopCallback(browserEvent);\n        }\n    }\n    isMonitoring() {\n        return !!this._pointerMoveCallback;\n    }\n    startMonitoring(initialElement, pointerId, initialButtons, pointerMoveCallback, onStopCallback) {\n        if (this.isMonitoring()) {\n            this.stopMonitoring(false);\n        }\n        this._pointerMoveCallback = pointerMoveCallback;\n        this._onStopCallback = onStopCallback;\n        let eventSource = initialElement;\n        try {\n            initialElement.setPointerCapture(pointerId);\n            this._hooks.add(toDisposable(() => {\n                try {\n                    initialElement.releasePointerCapture(pointerId);\n                }\n                catch (err) {\n                    // See https://github.com/microsoft/vscode/issues/161731\n                    //\n                    // `releasePointerCapture` sometimes fails when being invoked with the exception:\n                    //     DOMException: Failed to execute 'releasePointerCapture' on 'Element':\n                    //     No active pointer with the given id is found.\n                    //\n                    // There's no need to do anything in case of failure\n                }\n            }));\n        }\n        catch (err) {\n            // See https://github.com/microsoft/vscode/issues/144584\n            // See https://github.com/microsoft/vscode/issues/146947\n            // `setPointerCapture` sometimes fails when being invoked\n            // from a `mousedown` listener on macOS and Windows\n            // and it always fails on Linux with the exception:\n            //     DOMException: Failed to execute 'setPointerCapture' on 'Element':\n            //     No active pointer with the given id is found.\n            // In case of failure, we bind the listeners on the window\n            eventSource = dom.getWindow(initialElement);\n        }\n        this._hooks.add(dom.addDisposableListener(eventSource, dom.EventType.POINTER_MOVE, (e) => {\n            if (e.buttons !== initialButtons) {\n                // Buttons state has changed in the meantime\n                this.stopMonitoring(true);\n                return;\n            }\n            e.preventDefault();\n            this._pointerMoveCallback(e);\n        }));\n        this._hooks.add(dom.addDisposableListener(eventSource, dom.EventType.POINTER_UP, (e) => this.stopMonitoring(true)));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as browser from './browser.js';\nimport { EVENT_KEY_CODE_MAP, KeyCodeUtils } from '../common/keyCodes.js';\nimport { KeyCodeChord } from '../common/keybindings.js';\nimport * as platform from '../common/platform.js';\nfunction extractKeyCode(e) {\n    if (e.charCode) {\n        // \"keypress\" events mostly\n        const char = String.fromCharCode(e.charCode).toUpperCase();\n        return KeyCodeUtils.fromString(char);\n    }\n    const keyCode = e.keyCode;\n    // browser quirks\n    if (keyCode === 3) {\n        return 7 /* KeyCode.PauseBreak */;\n    }\n    else if (browser.isFirefox) {\n        switch (keyCode) {\n            case 59: return 85 /* KeyCode.Semicolon */;\n            case 60:\n                if (platform.isLinux) {\n                    return 97 /* KeyCode.IntlBackslash */;\n                }\n                break;\n            case 61: return 86 /* KeyCode.Equal */;\n            // based on: https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode#numpad_keys\n            case 107: return 109 /* KeyCode.NumpadAdd */;\n            case 109: return 111 /* KeyCode.NumpadSubtract */;\n            case 173: return 88 /* KeyCode.Minus */;\n            case 224:\n                if (platform.isMacintosh) {\n                    return 57 /* KeyCode.Meta */;\n                }\n                break;\n        }\n    }\n    else if (browser.isWebKit) {\n        if (platform.isMacintosh && keyCode === 93) {\n            // the two meta keys in the Mac have different key codes (91 and 93)\n            return 57 /* KeyCode.Meta */;\n        }\n        else if (!platform.isMacintosh && keyCode === 92) {\n            return 57 /* KeyCode.Meta */;\n        }\n    }\n    // cross browser keycodes:\n    return EVENT_KEY_CODE_MAP[keyCode] || 0 /* KeyCode.Unknown */;\n}\nconst ctrlKeyMod = (platform.isMacintosh ? 256 /* KeyMod.WinCtrl */ : 2048 /* KeyMod.CtrlCmd */);\nconst altKeyMod = 512 /* KeyMod.Alt */;\nconst shiftKeyMod = 1024 /* KeyMod.Shift */;\nconst metaKeyMod = (platform.isMacintosh ? 2048 /* KeyMod.CtrlCmd */ : 256 /* KeyMod.WinCtrl */);\nexport class StandardKeyboardEvent {\n    constructor(source) {\n        var _a;\n        this._standardKeyboardEventBrand = true;\n        const e = source;\n        this.browserEvent = e;\n        this.target = e.target;\n        this.ctrlKey = e.ctrlKey;\n        this.shiftKey = e.shiftKey;\n        this.altKey = e.altKey;\n        this.metaKey = e.metaKey;\n        this.altGraphKey = (_a = e.getModifierState) === null || _a === void 0 ? void 0 : _a.call(e, 'AltGraph');\n        this.keyCode = extractKeyCode(e);\n        this.code = e.code;\n        // console.info(e.type + \": keyCode: \" + e.keyCode + \", which: \" + e.which + \", charCode: \" + e.charCode + \", detail: \" + e.detail + \" ====> \" + this.keyCode + ' -- ' + KeyCode[this.keyCode]);\n        this.ctrlKey = this.ctrlKey || this.keyCode === 5 /* KeyCode.Ctrl */;\n        this.altKey = this.altKey || this.keyCode === 6 /* KeyCode.Alt */;\n        this.shiftKey = this.shiftKey || this.keyCode === 4 /* KeyCode.Shift */;\n        this.metaKey = this.metaKey || this.keyCode === 57 /* KeyCode.Meta */;\n        this._asKeybinding = this._computeKeybinding();\n        this._asKeyCodeChord = this._computeKeyCodeChord();\n        // console.log(`code: ${e.code}, keyCode: ${e.keyCode}, key: ${e.key}`);\n    }\n    preventDefault() {\n        if (this.browserEvent && this.browserEvent.preventDefault) {\n            this.browserEvent.preventDefault();\n        }\n    }\n    stopPropagation() {\n        if (this.browserEvent && this.browserEvent.stopPropagation) {\n            this.browserEvent.stopPropagation();\n        }\n    }\n    toKeyCodeChord() {\n        return this._asKeyCodeChord;\n    }\n    equals(other) {\n        return this._asKeybinding === other;\n    }\n    _computeKeybinding() {\n        let key = 0 /* KeyCode.Unknown */;\n        if (this.keyCode !== 5 /* KeyCode.Ctrl */ && this.keyCode !== 4 /* KeyCode.Shift */ && this.keyCode !== 6 /* KeyCode.Alt */ && this.keyCode !== 57 /* KeyCode.Meta */) {\n            key = this.keyCode;\n        }\n        let result = 0;\n        if (this.ctrlKey) {\n            result |= ctrlKeyMod;\n        }\n        if (this.altKey) {\n            result |= altKeyMod;\n        }\n        if (this.shiftKey) {\n            result |= shiftKeyMod;\n        }\n        if (this.metaKey) {\n            result |= metaKeyMod;\n        }\n        result |= key;\n        return result;\n    }\n    _computeKeyCodeChord() {\n        let key = 0 /* KeyCode.Unknown */;\n        if (this.keyCode !== 5 /* KeyCode.Ctrl */ && this.keyCode !== 4 /* KeyCode.Shift */ && this.keyCode !== 6 /* KeyCode.Alt */ && this.keyCode !== 57 /* KeyCode.Meta */) {\n            key = this.keyCode;\n        }\n        return new KeyCodeChord(this.ctrlKey, this.shiftKey, this.altKey, this.metaKey, key);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as DOM from './dom.js';\nimport * as dompurify from './dompurify/dompurify.js';\nimport { DomEmitter } from './event.js';\nimport { createElement } from './formattedTextRenderer.js';\nimport { StandardKeyboardEvent } from './keyboardEvent.js';\nimport { StandardMouseEvent } from './mouseEvent.js';\nimport { renderLabelWithIcons } from './ui/iconLabel/iconLabels.js';\nimport { onUnexpectedError } from '../common/errors.js';\nimport { Event } from '../common/event.js';\nimport { escapeDoubleQuotes, parseHrefAndDimensions, removeMarkdownEscapes } from '../common/htmlContent.js';\nimport { markdownEscapeEscapedIcons } from '../common/iconLabels.js';\nimport { defaultGenerator } from '../common/idGenerator.js';\nimport { Lazy } from '../common/lazy.js';\nimport { DisposableStore } from '../common/lifecycle.js';\nimport { marked } from '../common/marked/marked.js';\nimport { parse } from '../common/marshalling.js';\nimport { FileAccess, Schemas } from '../common/network.js';\nimport { cloneAndChange } from '../common/objects.js';\nimport { dirname, resolvePath } from '../common/resources.js';\nimport { escape } from '../common/strings.js';\nimport { URI } from '../common/uri.js';\nconst defaultMarkedRenderers = Object.freeze({\n    image: (href, title, text) => {\n        let dimensions = [];\n        let attributes = [];\n        if (href) {\n            ({ href, dimensions } = parseHrefAndDimensions(href));\n            attributes.push(`src=\"${escapeDoubleQuotes(href)}\"`);\n        }\n        if (text) {\n            attributes.push(`alt=\"${escapeDoubleQuotes(text)}\"`);\n        }\n        if (title) {\n            attributes.push(`title=\"${escapeDoubleQuotes(title)}\"`);\n        }\n        if (dimensions.length) {\n            attributes = attributes.concat(dimensions);\n        }\n        return '<img ' + attributes.join(' ') + '>';\n    },\n    paragraph: (text) => {\n        return `<p>${text}</p>`;\n    },\n    link: (href, title, text) => {\n        if (typeof href !== 'string') {\n            return '';\n        }\n        // Remove markdown escapes. Workaround for https://github.com/chjj/marked/issues/829\n        if (href === text) { // raw link case\n            text = removeMarkdownEscapes(text);\n        }\n        title = typeof title === 'string' ? escapeDoubleQuotes(removeMarkdownEscapes(title)) : '';\n        href = removeMarkdownEscapes(href);\n        // HTML Encode href\n        href = href.replace(/&/g, '&amp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')\n            .replace(/\"/g, '&quot;')\n            .replace(/'/g, '&#39;');\n        return `<a href=\"${href}\" title=\"${title || href}\" draggable=\"false\">${text}</a>`;\n    },\n});\n/**\n * Low-level way create a html element from a markdown string.\n *\n * **Note** that for most cases you should be using [`MarkdownRenderer`](./src/vs/editor/contrib/markdownRenderer/browser/markdownRenderer.ts)\n * which comes with support for pretty code block rendering and which uses the default way of handling links.\n */\nexport function renderMarkdown(markdown, options = {}, markedOptions = {}) {\n    var _a, _b;\n    const disposables = new DisposableStore();\n    let isDisposed = false;\n    const element = createElement(options);\n    const _uriMassage = function (part) {\n        let data;\n        try {\n            data = parse(decodeURIComponent(part));\n        }\n        catch (e) {\n            // ignore\n        }\n        if (!data) {\n            return part;\n        }\n        data = cloneAndChange(data, value => {\n            if (markdown.uris && markdown.uris[value]) {\n                return URI.revive(markdown.uris[value]);\n            }\n            else {\n                return undefined;\n            }\n        });\n        return encodeURIComponent(JSON.stringify(data));\n    };\n    const _href = function (href, isDomUri) {\n        const data = markdown.uris && markdown.uris[href];\n        let uri = URI.revive(data);\n        if (isDomUri) {\n            if (href.startsWith(Schemas.data + ':')) {\n                return href;\n            }\n            if (!uri) {\n                uri = URI.parse(href);\n            }\n            // this URI will end up as \"src\"-attribute of a dom node\n            // and because of that special rewriting needs to be done\n            // so that the URI uses a protocol that's understood by\n            // browsers (like http or https)\n            return FileAccess.uriToBrowserUri(uri).toString(true);\n        }\n        if (!uri) {\n            return href;\n        }\n        if (URI.parse(href).toString() === uri.toString()) {\n            return href; // no transformation performed\n        }\n        if (uri.query) {\n            uri = uri.with({ query: _uriMassage(uri.query) });\n        }\n        return uri.toString();\n    };\n    const renderer = new marked.Renderer();\n    renderer.image = defaultMarkedRenderers.image;\n    renderer.link = defaultMarkedRenderers.link;\n    renderer.paragraph = defaultMarkedRenderers.paragraph;\n    // Will collect [id, renderedElement] tuples\n    const codeBlocks = [];\n    const syncCodeBlocks = [];\n    if (options.codeBlockRendererSync) {\n        renderer.code = (code, lang) => {\n            const id = defaultGenerator.nextId();\n            const value = options.codeBlockRendererSync(postProcessCodeBlockLanguageId(lang), code);\n            syncCodeBlocks.push([id, value]);\n            return `<div class=\"code\" data-code=\"${id}\">${escape(code)}</div>`;\n        };\n    }\n    else if (options.codeBlockRenderer) {\n        renderer.code = (code, lang) => {\n            const id = defaultGenerator.nextId();\n            const value = options.codeBlockRenderer(postProcessCodeBlockLanguageId(lang), code);\n            codeBlocks.push(value.then(element => [id, element]));\n            return `<div class=\"code\" data-code=\"${id}\">${escape(code)}</div>`;\n        };\n    }\n    if (options.actionHandler) {\n        const _activateLink = function (event) {\n            let target = event.target;\n            if (target.tagName !== 'A') {\n                target = target.parentElement;\n                if (!target || target.tagName !== 'A') {\n                    return;\n                }\n            }\n            try {\n                let href = target.dataset['href'];\n                if (href) {\n                    if (markdown.baseUri) {\n                        href = resolveWithBaseUri(URI.from(markdown.baseUri), href);\n                    }\n                    options.actionHandler.callback(href, event);\n                }\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n            finally {\n                event.preventDefault();\n            }\n        };\n        const onClick = options.actionHandler.disposables.add(new DomEmitter(element, 'click'));\n        const onAuxClick = options.actionHandler.disposables.add(new DomEmitter(element, 'auxclick'));\n        options.actionHandler.disposables.add(Event.any(onClick.event, onAuxClick.event)(e => {\n            const mouseEvent = new StandardMouseEvent(DOM.getWindow(element), e);\n            if (!mouseEvent.leftButton && !mouseEvent.middleButton) {\n                return;\n            }\n            _activateLink(mouseEvent);\n        }));\n        options.actionHandler.disposables.add(DOM.addDisposableListener(element, 'keydown', (e) => {\n            const keyboardEvent = new StandardKeyboardEvent(e);\n            if (!keyboardEvent.equals(10 /* KeyCode.Space */) && !keyboardEvent.equals(3 /* KeyCode.Enter */)) {\n                return;\n            }\n            _activateLink(keyboardEvent);\n        }));\n    }\n    if (!markdown.supportHtml) {\n        // TODO: Can we deprecated this in favor of 'supportHtml'?\n        // Use our own sanitizer so that we can let through only spans.\n        // Otherwise, we'd be letting all html be rendered.\n        // If we want to allow markdown permitted tags, then we can delete sanitizer and sanitize.\n        // We always pass the output through dompurify after this so that we don't rely on\n        // marked for sanitization.\n        markedOptions.sanitizer = (html) => {\n            const match = markdown.isTrusted ? html.match(/^(<span[^>]+>)|(<\\/\\s*span>)$/) : undefined;\n            return match ? html : '';\n        };\n        markedOptions.sanitize = true;\n        markedOptions.silent = true;\n    }\n    markedOptions.renderer = renderer;\n    // values that are too long will freeze the UI\n    let value = (_a = markdown.value) !== null && _a !== void 0 ? _a : '';\n    if (value.length > 100000) {\n        value = `${value.substr(0, 100000)}…`;\n    }\n    // escape theme icons\n    if (markdown.supportThemeIcons) {\n        value = markdownEscapeEscapedIcons(value);\n    }\n    let renderedMarkdown;\n    if (options.fillInIncompleteTokens) {\n        // The defaults are applied by parse but not lexer()/parser(), and they need to be present\n        const opts = {\n            ...marked.defaults,\n            ...markedOptions\n        };\n        const tokens = marked.lexer(value, opts);\n        const newTokens = fillInIncompleteTokens(tokens);\n        renderedMarkdown = marked.parser(newTokens, opts);\n    }\n    else {\n        renderedMarkdown = marked.parse(value, markedOptions);\n    }\n    // Rewrite theme icons\n    if (markdown.supportThemeIcons) {\n        const elements = renderLabelWithIcons(renderedMarkdown);\n        renderedMarkdown = elements.map(e => typeof e === 'string' ? e : e.outerHTML).join('');\n    }\n    const htmlParser = new DOMParser();\n    const markdownHtmlDoc = htmlParser.parseFromString(sanitizeRenderedMarkdown(markdown, renderedMarkdown), 'text/html');\n    markdownHtmlDoc.body.querySelectorAll('img, audio, video, source')\n        .forEach(img => {\n        const src = img.getAttribute('src'); // Get the raw 'src' attribute value as text, not the resolved 'src'\n        if (src) {\n            let href = src;\n            try {\n                if (markdown.baseUri) { // absolute or relative local path, or file: uri\n                    href = resolveWithBaseUri(URI.from(markdown.baseUri), href);\n                }\n            }\n            catch (err) { }\n            img.setAttribute('src', _href(href, true));\n            if (options.disallowRemoteImages) {\n                const uriScheme = URI.parse(href).scheme;\n                if (uriScheme !== Schemas.file && uriScheme !== Schemas.data) {\n                    img.replaceWith(DOM.$('', undefined, img.outerHTML));\n                }\n            }\n        }\n    });\n    markdownHtmlDoc.body.querySelectorAll('a')\n        .forEach(a => {\n        const href = a.getAttribute('href'); // Get the raw 'href' attribute value as text, not the resolved 'href'\n        a.setAttribute('href', ''); // Clear out href. We use the `data-href` for handling clicks instead\n        if (!href\n            || /^data:|javascript:/i.test(href)\n            || (/^command:/i.test(href) && !markdown.isTrusted)\n            || /^command:(\\/\\/\\/)?_workbench\\.downloadResource/i.test(href)) {\n            // drop the link\n            a.replaceWith(...a.childNodes);\n        }\n        else {\n            let resolvedHref = _href(href, false);\n            if (markdown.baseUri) {\n                resolvedHref = resolveWithBaseUri(URI.from(markdown.baseUri), href);\n            }\n            a.dataset.href = resolvedHref;\n        }\n    });\n    element.innerHTML = sanitizeRenderedMarkdown(markdown, markdownHtmlDoc.body.innerHTML);\n    if (codeBlocks.length > 0) {\n        Promise.all(codeBlocks).then((tuples) => {\n            var _a, _b;\n            if (isDisposed) {\n                return;\n            }\n            const renderedElements = new Map(tuples);\n            const placeholderElements = element.querySelectorAll(`div[data-code]`);\n            for (const placeholderElement of placeholderElements) {\n                const renderedElement = renderedElements.get((_a = placeholderElement.dataset['code']) !== null && _a !== void 0 ? _a : '');\n                if (renderedElement) {\n                    DOM.reset(placeholderElement, renderedElement);\n                }\n            }\n            (_b = options.asyncRenderCallback) === null || _b === void 0 ? void 0 : _b.call(options);\n        });\n    }\n    else if (syncCodeBlocks.length > 0) {\n        const renderedElements = new Map(syncCodeBlocks);\n        const placeholderElements = element.querySelectorAll(`div[data-code]`);\n        for (const placeholderElement of placeholderElements) {\n            const renderedElement = renderedElements.get((_b = placeholderElement.dataset['code']) !== null && _b !== void 0 ? _b : '');\n            if (renderedElement) {\n                DOM.reset(placeholderElement, renderedElement);\n            }\n        }\n    }\n    // signal size changes for image tags\n    if (options.asyncRenderCallback) {\n        for (const img of element.getElementsByTagName('img')) {\n            const listener = disposables.add(DOM.addDisposableListener(img, 'load', () => {\n                listener.dispose();\n                options.asyncRenderCallback();\n            }));\n        }\n    }\n    return {\n        element,\n        dispose: () => {\n            isDisposed = true;\n            disposables.dispose();\n        }\n    };\n}\nfunction postProcessCodeBlockLanguageId(lang) {\n    if (!lang) {\n        return '';\n    }\n    const parts = lang.split(/[\\s+|:|,|\\{|\\?]/, 1);\n    if (parts.length) {\n        return parts[0];\n    }\n    return lang;\n}\nfunction resolveWithBaseUri(baseUri, href) {\n    const hasScheme = /^\\w[\\w\\d+.-]*:/.test(href);\n    if (hasScheme) {\n        return href;\n    }\n    if (baseUri.path.endsWith('/')) {\n        return resolvePath(baseUri, href).toString();\n    }\n    else {\n        return resolvePath(dirname(baseUri), href).toString();\n    }\n}\nfunction sanitizeRenderedMarkdown(options, renderedMarkdown) {\n    const { config, allowedSchemes } = getSanitizerOptions(options);\n    dompurify.addHook('uponSanitizeAttribute', (element, e) => {\n        var _a;\n        if (e.attrName === 'style' || e.attrName === 'class') {\n            if (element.tagName === 'SPAN') {\n                if (e.attrName === 'style') {\n                    e.keepAttr = /^(color\\:(#[0-9a-fA-F]+|var\\(--vscode(-[a-zA-Z]+)+\\));)?(background-color\\:(#[0-9a-fA-F]+|var\\(--vscode(-[a-zA-Z]+)+\\));)?$/.test(e.attrValue);\n                    return;\n                }\n                else if (e.attrName === 'class') {\n                    e.keepAttr = /^codicon codicon-[a-z\\-]+( codicon-modifier-[a-z\\-]+)?$/.test(e.attrValue);\n                    return;\n                }\n            }\n            e.keepAttr = false;\n            return;\n        }\n        else if (element.tagName === 'INPUT' && ((_a = element.attributes.getNamedItem('type')) === null || _a === void 0 ? void 0 : _a.value) === 'checkbox') {\n            if ((e.attrName === 'type' && e.attrValue === 'checkbox') || e.attrName === 'disabled' || e.attrName === 'checked') {\n                e.keepAttr = true;\n                return;\n            }\n            e.keepAttr = false;\n        }\n    });\n    dompurify.addHook('uponSanitizeElement', (element, e) => {\n        var _a, _b;\n        if (e.tagName === 'input') {\n            if (((_a = element.attributes.getNamedItem('type')) === null || _a === void 0 ? void 0 : _a.value) === 'checkbox') {\n                element.setAttribute('disabled', '');\n            }\n            else {\n                (_b = element.parentElement) === null || _b === void 0 ? void 0 : _b.removeChild(element);\n            }\n        }\n    });\n    const hook = DOM.hookDomPurifyHrefAndSrcSanitizer(allowedSchemes);\n    try {\n        return dompurify.sanitize(renderedMarkdown, { ...config, RETURN_TRUSTED_TYPE: true });\n    }\n    finally {\n        dompurify.removeHook('uponSanitizeAttribute');\n        hook.dispose();\n    }\n}\nexport const allowedMarkdownAttr = [\n    'align',\n    'autoplay',\n    'alt',\n    'checked',\n    'class',\n    'controls',\n    'data-code',\n    'data-href',\n    'disabled',\n    'draggable',\n    'height',\n    'href',\n    'loop',\n    'muted',\n    'playsinline',\n    'poster',\n    'src',\n    'style',\n    'target',\n    'title',\n    'type',\n    'width',\n    'start',\n];\nfunction getSanitizerOptions(options) {\n    const allowedSchemes = [\n        Schemas.http,\n        Schemas.https,\n        Schemas.mailto,\n        Schemas.data,\n        Schemas.file,\n        Schemas.vscodeFileResource,\n        Schemas.vscodeRemote,\n        Schemas.vscodeRemoteResource,\n    ];\n    if (options.isTrusted) {\n        allowedSchemes.push(Schemas.command);\n    }\n    return {\n        config: {\n            // allowedTags should included everything that markdown renders to.\n            // Since we have our own sanitize function for marked, it's possible we missed some tag so let dompurify make sure.\n            // HTML tags that can result from markdown are from reading https://spec.commonmark.org/0.29/\n            // HTML table tags that can result from markdown are from https://github.github.com/gfm/#tables-extension-\n            ALLOWED_TAGS: [...DOM.basicMarkupHtmlTags],\n            ALLOWED_ATTR: allowedMarkdownAttr,\n            ALLOW_UNKNOWN_PROTOCOLS: true,\n        },\n        allowedSchemes\n    };\n}\n/**\n * Strips all markdown from `string`, if it's an IMarkdownString. For example\n * `# Header` would be output as `Header`. If it's not, the string is returned.\n */\nexport function renderStringAsPlaintext(string) {\n    return typeof string === 'string' ? string : renderMarkdownAsPlaintext(string);\n}\n/**\n * Strips all markdown from `markdown`. For example `# Header` would be output as `Header`.\n */\nexport function renderMarkdownAsPlaintext(markdown) {\n    var _a;\n    // values that are too long will freeze the UI\n    let value = (_a = markdown.value) !== null && _a !== void 0 ? _a : '';\n    if (value.length > 100000) {\n        value = `${value.substr(0, 100000)}…`;\n    }\n    const html = marked.parse(value, { renderer: plainTextRenderer.value }).replace(/&(#\\d+|[a-zA-Z]+);/g, m => { var _a; return (_a = unescapeInfo.get(m)) !== null && _a !== void 0 ? _a : m; });\n    return sanitizeRenderedMarkdown({ isTrusted: false }, html).toString();\n}\nconst unescapeInfo = new Map([\n    ['&quot;', '\"'],\n    ['&nbsp;', ' '],\n    ['&amp;', '&'],\n    ['&#39;', '\\''],\n    ['&lt;', '<'],\n    ['&gt;', '>'],\n]);\nconst plainTextRenderer = new Lazy(() => {\n    const renderer = new marked.Renderer();\n    renderer.code = (code) => {\n        return code;\n    };\n    renderer.blockquote = (quote) => {\n        return quote;\n    };\n    renderer.html = (_html) => {\n        return '';\n    };\n    renderer.heading = (text, _level, _raw) => {\n        return text + '\\n';\n    };\n    renderer.hr = () => {\n        return '';\n    };\n    renderer.list = (body, _ordered) => {\n        return body;\n    };\n    renderer.listitem = (text) => {\n        return text + '\\n';\n    };\n    renderer.paragraph = (text) => {\n        return text + '\\n';\n    };\n    renderer.table = (header, body) => {\n        return header + body + '\\n';\n    };\n    renderer.tablerow = (content) => {\n        return content;\n    };\n    renderer.tablecell = (content, _flags) => {\n        return content + ' ';\n    };\n    renderer.strong = (text) => {\n        return text;\n    };\n    renderer.em = (text) => {\n        return text;\n    };\n    renderer.codespan = (code) => {\n        return code;\n    };\n    renderer.br = () => {\n        return '\\n';\n    };\n    renderer.del = (text) => {\n        return text;\n    };\n    renderer.image = (_href, _title, _text) => {\n        return '';\n    };\n    renderer.text = (text) => {\n        return text;\n    };\n    renderer.link = (_href, _title, text) => {\n        return text;\n    };\n    return renderer;\n});\nfunction mergeRawTokenText(tokens) {\n    let mergedTokenText = '';\n    tokens.forEach(token => {\n        mergedTokenText += token.raw;\n    });\n    return mergedTokenText;\n}\nfunction completeSingleLinePattern(token) {\n    var _a, _b;\n    for (let i = 0; i < token.tokens.length; i++) {\n        const subtoken = token.tokens[i];\n        if (subtoken.type === 'text') {\n            const lines = subtoken.raw.split('\\n');\n            const lastLine = lines[lines.length - 1];\n            if (lastLine.includes('`')) {\n                return completeCodespan(token);\n            }\n            else if (lastLine.includes('**')) {\n                return completeDoublestar(token);\n            }\n            else if (lastLine.match(/\\*\\w/)) {\n                return completeStar(token);\n            }\n            else if (lastLine.match(/(^|\\s)__\\w/)) {\n                return completeDoubleUnderscore(token);\n            }\n            else if (lastLine.match(/(^|\\s)_\\w/)) {\n                return completeUnderscore(token);\n            }\n            else if (lastLine.match(/(^|\\s)\\[.*\\]\\(\\w*/)) {\n                const nextTwoSubTokens = token.tokens.slice(i + 1);\n                if (((_a = nextTwoSubTokens[0]) === null || _a === void 0 ? void 0 : _a.type) === 'link' && ((_b = nextTwoSubTokens[1]) === null || _b === void 0 ? void 0 : _b.type) === 'text' && nextTwoSubTokens[1].raw.match(/^ *\"[^\"]*$/)) {\n                    // A markdown link can look like\n                    // [link text](https://microsoft.com \"more text\")\n                    // Where \"more text\" is a title for the link or an argument to a vscode command link\n                    return completeLinkTargetArg(token);\n                }\n                return completeLinkTarget(token);\n            }\n            else if (hasStartOfLinkTarget(lastLine)) {\n                return completeLinkTarget(token);\n            }\n            else if (lastLine.match(/(^|\\s)\\[\\w/) && !token.tokens.slice(i + 1).some(t => hasStartOfLinkTarget(t.raw))) {\n                return completeLinkText(token);\n            }\n        }\n    }\n    return undefined;\n}\nfunction hasStartOfLinkTarget(str) {\n    return !!str.match(/^[^\\[]*\\]\\([^\\)]*$/);\n}\n// function completeListItemPattern(token: marked.Tokens.List): marked.Tokens.List | undefined {\n// \t// Patch up this one list item\n// \tconst lastItem = token.items[token.items.length - 1];\n// \tconst newList = completeSingleLinePattern(lastItem);\n// \tif (!newList || newList.type !== 'list') {\n// \t\t// Nothing to fix, or not a pattern we were expecting\n// \t\treturn;\n// \t}\n// \t// Re-parse the whole list with the last item replaced\n// \tconst completeList = marked.lexer(mergeRawTokenText(token.items.slice(0, token.items.length - 1)) + newList.items[0].raw);\n// \tif (completeList.length === 1 && completeList[0].type === 'list') {\n// \t\treturn completeList[0];\n// \t}\n// \t// Not a pattern we were expecting\n// \treturn undefined;\n// }\nexport function fillInIncompleteTokens(tokens) {\n    let i;\n    let newTokens;\n    for (i = 0; i < tokens.length; i++) {\n        const token = tokens[i];\n        let codeblockStart;\n        if (token.type === 'paragraph' && (codeblockStart = token.raw.match(/(\\n|^)(````*)/))) {\n            const codeblockLead = codeblockStart[2];\n            // If the code block was complete, it would be in a type='code'\n            newTokens = completeCodeBlock(tokens.slice(i), codeblockLead);\n            break;\n        }\n        if (token.type === 'paragraph' && token.raw.match(/(\\n|^)\\|/)) {\n            newTokens = completeTable(tokens.slice(i));\n            break;\n        }\n        // if (i === tokens.length - 1 && token.type === 'list') {\n        // \tconst newListToken = completeListItemPattern(token);\n        // \tif (newListToken) {\n        // \t\tnewTokens = [newListToken];\n        // \t\tbreak;\n        // \t}\n        // }\n        if (i === tokens.length - 1 && token.type === 'paragraph') {\n            // Only operates on a single token, because any newline that follows this should break these patterns\n            const newToken = completeSingleLinePattern(token);\n            if (newToken) {\n                newTokens = [newToken];\n                break;\n            }\n        }\n    }\n    if (newTokens) {\n        const newTokensList = [\n            ...tokens.slice(0, i),\n            ...newTokens\n        ];\n        newTokensList.links = tokens.links;\n        return newTokensList;\n    }\n    return tokens;\n}\nfunction completeCodeBlock(tokens, leader) {\n    const mergedRawText = mergeRawTokenText(tokens);\n    return marked.lexer(mergedRawText + `\\n${leader}`);\n}\nfunction completeCodespan(token) {\n    return completeWithString(token, '`');\n}\nfunction completeStar(tokens) {\n    return completeWithString(tokens, '*');\n}\nfunction completeUnderscore(tokens) {\n    return completeWithString(tokens, '_');\n}\nfunction completeLinkTarget(tokens) {\n    return completeWithString(tokens, ')');\n}\nfunction completeLinkTargetArg(tokens) {\n    return completeWithString(tokens, '\")');\n}\nfunction completeLinkText(tokens) {\n    return completeWithString(tokens, '](about:blank)');\n}\nfunction completeDoublestar(tokens) {\n    return completeWithString(tokens, '**');\n}\nfunction completeDoubleUnderscore(tokens) {\n    return completeWithString(tokens, '__');\n}\nfunction completeWithString(tokens, closingString) {\n    const mergedRawText = mergeRawTokenText(Array.isArray(tokens) ? tokens : [tokens]);\n    // If it was completed correctly, this should be a single token.\n    // Expecting either a Paragraph or a List\n    return marked.lexer(mergedRawText + closingString)[0];\n}\nfunction completeTable(tokens) {\n    const mergedRawText = mergeRawTokenText(tokens);\n    const lines = mergedRawText.split('\\n');\n    let numCols; // The number of line1 col headers\n    let hasSeparatorRow = false;\n    for (let i = 0; i < lines.length; i++) {\n        const line = lines[i].trim();\n        if (typeof numCols === 'undefined' && line.match(/^\\s*\\|/)) {\n            const line1Matches = line.match(/(\\|[^\\|]+)(?=\\||$)/g);\n            if (line1Matches) {\n                numCols = line1Matches.length;\n            }\n        }\n        else if (typeof numCols === 'number') {\n            if (line.match(/^\\s*\\|/)) {\n                if (i !== lines.length - 1) {\n                    // We got the line1 header row, and the line2 separator row, but there are more lines, and it wasn't parsed as a table!\n                    // That's strange and means that the table is probably malformed in the source, so I won't try to patch it up.\n                    return undefined;\n                }\n                // Got a line2 separator row- partial or complete, doesn't matter, we'll replace it with a correct one\n                hasSeparatorRow = true;\n            }\n            else {\n                // The line after the header row isn't a valid separator row, so the table is malformed, don't fix it up\n                return undefined;\n            }\n        }\n    }\n    if (typeof numCols === 'number' && numCols > 0) {\n        const prefixText = hasSeparatorRow ? lines.slice(0, -1).join('\\n') : mergedRawText;\n        const line1EndsInPipe = !!prefixText.match(/\\|\\s*$/);\n        const newRawText = prefixText + (line1EndsInPipe ? '' : '|') + `\\n|${' --- |'.repeat(numCols)}`;\n        return marked.lexer(newRawText);\n    }\n    return undefined;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nconst sameOriginWindowChainCache = new WeakMap();\nfunction getParentWindowIfSameOrigin(w) {\n    if (!w.parent || w.parent === w) {\n        return null;\n    }\n    // Cannot really tell if we have access to the parent window unless we try to access something in it\n    try {\n        const location = w.location;\n        const parentLocation = w.parent.location;\n        if (location.origin !== 'null' && parentLocation.origin !== 'null' && location.origin !== parentLocation.origin) {\n            return null;\n        }\n    }\n    catch (e) {\n        return null;\n    }\n    return w.parent;\n}\nexport class IframeUtils {\n    /**\n     * Returns a chain of embedded windows with the same origin (which can be accessed programmatically).\n     * Having a chain of length 1 might mean that the current execution environment is running outside of an iframe or inside an iframe embedded in a window with a different origin.\n     */\n    static getSameOriginWindowChain(targetWindow) {\n        let windowChainCache = sameOriginWindowChainCache.get(targetWindow);\n        if (!windowChainCache) {\n            windowChainCache = [];\n            sameOriginWindowChainCache.set(targetWindow, windowChainCache);\n            let w = targetWindow;\n            let parent;\n            do {\n                parent = getParentWindowIfSameOrigin(w);\n                if (parent) {\n                    windowChainCache.push({\n                        window: new WeakRef(w),\n                        iframeElement: w.frameElement || null\n                    });\n                }\n                else {\n                    windowChainCache.push({\n                        window: new WeakRef(w),\n                        iframeElement: null\n                    });\n                }\n                w = parent;\n            } while (w);\n        }\n        return windowChainCache.slice(0);\n    }\n    /**\n     * Returns the position of `childWindow` relative to `ancestorWindow`\n     */\n    static getPositionOfChildWindowRelativeToAncestorWindow(childWindow, ancestorWindow) {\n        var _a, _b;\n        if (!ancestorWindow || childWindow === ancestorWindow) {\n            return {\n                top: 0,\n                left: 0\n            };\n        }\n        let top = 0, left = 0;\n        const windowChain = this.getSameOriginWindowChain(childWindow);\n        for (const windowChainEl of windowChain) {\n            const windowInChain = windowChainEl.window.deref();\n            top += (_a = windowInChain === null || windowInChain === void 0 ? void 0 : windowInChain.scrollY) !== null && _a !== void 0 ? _a : 0;\n            left += (_b = windowInChain === null || windowInChain === void 0 ? void 0 : windowInChain.scrollX) !== null && _b !== void 0 ? _b : 0;\n            if (windowInChain === ancestorWindow) {\n                break;\n            }\n            if (!windowChainEl.iframeElement) {\n                break;\n            }\n            const boundingRect = windowChainEl.iframeElement.getBoundingClientRect();\n            top += boundingRect.top;\n            left += boundingRect.left;\n        }\n        return {\n            top: top,\n            left: left\n        };\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as browser from './browser.js';\nimport { IframeUtils } from './iframe.js';\nimport * as platform from '../common/platform.js';\nexport class StandardMouseEvent {\n    constructor(targetWindow, e) {\n        this.timestamp = Date.now();\n        this.browserEvent = e;\n        this.leftButton = e.button === 0;\n        this.middleButton = e.button === 1;\n        this.rightButton = e.button === 2;\n        this.buttons = e.buttons;\n        this.target = e.target;\n        this.detail = e.detail || 1;\n        if (e.type === 'dblclick') {\n            this.detail = 2;\n        }\n        this.ctrlKey = e.ctrlKey;\n        this.shiftKey = e.shiftKey;\n        this.altKey = e.altKey;\n        this.metaKey = e.metaKey;\n        if (typeof e.pageX === 'number') {\n            this.posx = e.pageX;\n            this.posy = e.pageY;\n        }\n        else {\n            // Probably hit by MSGestureEvent\n            this.posx = e.clientX + this.target.ownerDocument.body.scrollLeft + this.target.ownerDocument.documentElement.scrollLeft;\n            this.posy = e.clientY + this.target.ownerDocument.body.scrollTop + this.target.ownerDocument.documentElement.scrollTop;\n        }\n        // Find the position of the iframe this code is executing in relative to the iframe where the event was captured.\n        const iframeOffsets = IframeUtils.getPositionOfChildWindowRelativeToAncestorWindow(targetWindow, e.view);\n        this.posx -= iframeOffsets.left;\n        this.posy -= iframeOffsets.top;\n    }\n    preventDefault() {\n        this.browserEvent.preventDefault();\n    }\n    stopPropagation() {\n        this.browserEvent.stopPropagation();\n    }\n}\nexport class StandardWheelEvent {\n    constructor(e, deltaX = 0, deltaY = 0) {\n        var _a;\n        this.browserEvent = e || null;\n        this.target = e ? (e.target || e.targetNode || e.srcElement) : null;\n        this.deltaY = deltaY;\n        this.deltaX = deltaX;\n        let shouldFactorDPR = false;\n        if (browser.isChrome) {\n            // Chrome version >= 123 contains the fix to factor devicePixelRatio into the wheel event.\n            // See https://chromium.googlesource.com/chromium/src.git/+/be51b448441ff0c9d1f17e0f25c4bf1ab3f11f61\n            const chromeVersionMatch = navigator.userAgent.match(/Chrome\\/(\\d+)/);\n            const chromeMajorVersion = chromeVersionMatch ? parseInt(chromeVersionMatch[1]) : 123;\n            shouldFactorDPR = chromeMajorVersion <= 122;\n        }\n        if (e) {\n            // Old (deprecated) wheel events\n            const e1 = e;\n            const e2 = e;\n            const devicePixelRatio = ((_a = e.view) === null || _a === void 0 ? void 0 : _a.devicePixelRatio) || 1;\n            // vertical delta scroll\n            if (typeof e1.wheelDeltaY !== 'undefined') {\n                if (shouldFactorDPR) {\n                    // Refs https://github.com/microsoft/vscode/issues/146403#issuecomment-1854538928\n                    this.deltaY = e1.wheelDeltaY / (120 * devicePixelRatio);\n                }\n                else {\n                    this.deltaY = e1.wheelDeltaY / 120;\n                }\n            }\n            else if (typeof e2.VERTICAL_AXIS !== 'undefined' && e2.axis === e2.VERTICAL_AXIS) {\n                this.deltaY = -e2.detail / 3;\n            }\n            else if (e.type === 'wheel') {\n                // Modern wheel event\n                // https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent\n                const ev = e;\n                if (ev.deltaMode === ev.DOM_DELTA_LINE) {\n                    // the deltas are expressed in lines\n                    if (browser.isFirefox && !platform.isMacintosh) {\n                        this.deltaY = -e.deltaY / 3;\n                    }\n                    else {\n                        this.deltaY = -e.deltaY;\n                    }\n                }\n                else {\n                    this.deltaY = -e.deltaY / 40;\n                }\n            }\n            // horizontal delta scroll\n            if (typeof e1.wheelDeltaX !== 'undefined') {\n                if (browser.isSafari && platform.isWindows) {\n                    this.deltaX = -(e1.wheelDeltaX / 120);\n                }\n                else if (shouldFactorDPR) {\n                    // Refs https://github.com/microsoft/vscode/issues/146403#issuecomment-1854538928\n                    this.deltaX = e1.wheelDeltaX / (120 * devicePixelRatio);\n                }\n                else {\n                    this.deltaX = e1.wheelDeltaX / 120;\n                }\n            }\n            else if (typeof e2.HORIZONTAL_AXIS !== 'undefined' && e2.axis === e2.HORIZONTAL_AXIS) {\n                this.deltaX = -e.detail / 3;\n            }\n            else if (e.type === 'wheel') {\n                // Modern wheel event\n                // https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent\n                const ev = e;\n                if (ev.deltaMode === ev.DOM_DELTA_LINE) {\n                    // the deltas are expressed in lines\n                    if (browser.isFirefox && !platform.isMacintosh) {\n                        this.deltaX = -e.deltaX / 3;\n                    }\n                    else {\n                        this.deltaX = -e.deltaX;\n                    }\n                }\n                else {\n                    this.deltaX = -e.deltaX / 40;\n                }\n            }\n            // Assume a vertical scroll if nothing else worked\n            if (this.deltaY === 0 && this.deltaX === 0 && e.wheelDelta) {\n                if (shouldFactorDPR) {\n                    // Refs https://github.com/microsoft/vscode/issues/146403#issuecomment-1854538928\n                    this.deltaY = e.wheelDelta / (120 * devicePixelRatio);\n                }\n                else {\n                    this.deltaY = e.wheelDelta / 120;\n                }\n            }\n        }\n    }\n    preventDefault() {\n        var _a;\n        (_a = this.browserEvent) === null || _a === void 0 ? void 0 : _a.preventDefault();\n    }\n    stopPropagation() {\n        var _a;\n        (_a = this.browserEvent) === null || _a === void 0 ? void 0 : _a.stopPropagation();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport var inputLatency;\n(function (inputLatency) {\n    const totalKeydownTime = { total: 0, min: Number.MAX_VALUE, max: 0 };\n    const totalInputTime = { ...totalKeydownTime };\n    const totalRenderTime = { ...totalKeydownTime };\n    const totalInputLatencyTime = { ...totalKeydownTime };\n    let measurementsCount = 0;\n    const state = {\n        keydown: 0 /* EventPhase.Before */,\n        input: 0 /* EventPhase.Before */,\n        render: 0 /* EventPhase.Before */,\n    };\n    /**\n     * Record the start of the keydown event.\n     */\n    function onKeyDown() {\n        /** Direct Check C. See explanation in {@link recordIfFinished} */\n        recordIfFinished();\n        performance.mark('inputlatency/start');\n        performance.mark('keydown/start');\n        state.keydown = 1 /* EventPhase.InProgress */;\n        queueMicrotask(markKeyDownEnd);\n    }\n    inputLatency.onKeyDown = onKeyDown;\n    /**\n     * Mark the end of the keydown event.\n     */\n    function markKeyDownEnd() {\n        if (state.keydown === 1 /* EventPhase.InProgress */) {\n            performance.mark('keydown/end');\n            state.keydown = 2 /* EventPhase.Finished */;\n        }\n    }\n    /**\n     * Record the start of the beforeinput event.\n     */\n    function onBeforeInput() {\n        performance.mark('input/start');\n        state.input = 1 /* EventPhase.InProgress */;\n        /** Schedule Task A. See explanation in {@link recordIfFinished} */\n        scheduleRecordIfFinishedTask();\n    }\n    inputLatency.onBeforeInput = onBeforeInput;\n    /**\n     * Record the start of the input event.\n     */\n    function onInput() {\n        if (state.input === 0 /* EventPhase.Before */) {\n            // it looks like we didn't receive a `beforeinput`\n            onBeforeInput();\n        }\n        queueMicrotask(markInputEnd);\n    }\n    inputLatency.onInput = onInput;\n    function markInputEnd() {\n        if (state.input === 1 /* EventPhase.InProgress */) {\n            performance.mark('input/end');\n            state.input = 2 /* EventPhase.Finished */;\n        }\n    }\n    /**\n     * Record the start of the keyup event.\n     */\n    function onKeyUp() {\n        /** Direct Check D. See explanation in {@link recordIfFinished} */\n        recordIfFinished();\n    }\n    inputLatency.onKeyUp = onKeyUp;\n    /**\n     * Record the start of the selectionchange event.\n     */\n    function onSelectionChange() {\n        /** Direct Check E. See explanation in {@link recordIfFinished} */\n        recordIfFinished();\n    }\n    inputLatency.onSelectionChange = onSelectionChange;\n    /**\n     * Record the start of the animation frame performing the rendering.\n     */\n    function onRenderStart() {\n        // Render may be triggered during input, but we only measure the following animation frame\n        if (state.keydown === 2 /* EventPhase.Finished */ && state.input === 2 /* EventPhase.Finished */ && state.render === 0 /* EventPhase.Before */) {\n            // Only measure the first render after keyboard input\n            performance.mark('render/start');\n            state.render = 1 /* EventPhase.InProgress */;\n            queueMicrotask(markRenderEnd);\n            /** Schedule Task B. See explanation in {@link recordIfFinished} */\n            scheduleRecordIfFinishedTask();\n        }\n    }\n    inputLatency.onRenderStart = onRenderStart;\n    /**\n     * Mark the end of the animation frame performing the rendering.\n     */\n    function markRenderEnd() {\n        if (state.render === 1 /* EventPhase.InProgress */) {\n            performance.mark('render/end');\n            state.render = 2 /* EventPhase.Finished */;\n        }\n    }\n    function scheduleRecordIfFinishedTask() {\n        // Here we can safely assume that the `setTimeout` will not be\n        // artificially delayed by 4ms because we schedule it from\n        // event handlers\n        setTimeout(recordIfFinished);\n    }\n    /**\n     * Record the input latency sample if input handling and rendering are finished.\n     *\n     * The challenge here is that we want to record the latency in such a way that it includes\n     * also the layout and painting work the browser does during the animation frame task.\n     *\n     * Simply scheduling a new task (via `setTimeout`) from the animation frame task would\n     * schedule the new task at the end of the task queue (after other code that uses `setTimeout`),\n     * so we need to use multiple strategies to make sure our task runs before others:\n     *\n     * We schedule tasks (A and B):\n     *    - we schedule a task A (via a `setTimeout` call) when the input starts in `markInputStart`.\n     *      If the animation frame task is scheduled quickly by the browser, then task A has a very good\n     *      chance of being the very first task after the animation frame and thus will record the input latency.\n     *    - however, if the animation frame task is scheduled a bit later, then task A might execute\n     *      before the animation frame task. We therefore schedule another task B from `markRenderStart`.\n     *\n     * We do direct checks in browser event handlers (C, D, E):\n     *    - if the browser has multiple keydown events queued up, they will be scheduled before the `setTimeout` tasks,\n     *      so we do a direct check in the keydown event handler (C).\n     *    - depending on timing, sometimes the animation frame is scheduled even before the `keyup` event, so we\n     *      do a direct check there too (E).\n     *    - the browser oftentimes emits a `selectionchange` event after an `input`, so we do a direct check there (D).\n     */\n    function recordIfFinished() {\n        if (state.keydown === 2 /* EventPhase.Finished */ && state.input === 2 /* EventPhase.Finished */ && state.render === 2 /* EventPhase.Finished */) {\n            performance.mark('inputlatency/end');\n            performance.measure('keydown', 'keydown/start', 'keydown/end');\n            performance.measure('input', 'input/start', 'input/end');\n            performance.measure('render', 'render/start', 'render/end');\n            performance.measure('inputlatency', 'inputlatency/start', 'inputlatency/end');\n            addMeasure('keydown', totalKeydownTime);\n            addMeasure('input', totalInputTime);\n            addMeasure('render', totalRenderTime);\n            addMeasure('inputlatency', totalInputLatencyTime);\n            // console.info(\n            // \t`input latency=${performance.getEntriesByName('inputlatency')[0].duration.toFixed(1)} [` +\n            // \t`keydown=${performance.getEntriesByName('keydown')[0].duration.toFixed(1)}, ` +\n            // \t`input=${performance.getEntriesByName('input')[0].duration.toFixed(1)}, ` +\n            // \t`render=${performance.getEntriesByName('render')[0].duration.toFixed(1)}` +\n            // \t`]`\n            // );\n            measurementsCount++;\n            reset();\n        }\n    }\n    function addMeasure(entryName, cumulativeMeasurement) {\n        const duration = performance.getEntriesByName(entryName)[0].duration;\n        cumulativeMeasurement.total += duration;\n        cumulativeMeasurement.min = Math.min(cumulativeMeasurement.min, duration);\n        cumulativeMeasurement.max = Math.max(cumulativeMeasurement.max, duration);\n    }\n    /**\n     * Clear the current sample.\n     */\n    function reset() {\n        performance.clearMarks('keydown/start');\n        performance.clearMarks('keydown/end');\n        performance.clearMarks('input/start');\n        performance.clearMarks('input/end');\n        performance.clearMarks('render/start');\n        performance.clearMarks('render/end');\n        performance.clearMarks('inputlatency/start');\n        performance.clearMarks('inputlatency/end');\n        performance.clearMeasures('keydown');\n        performance.clearMeasures('input');\n        performance.clearMeasures('render');\n        performance.clearMeasures('inputlatency');\n        state.keydown = 0 /* EventPhase.Before */;\n        state.input = 0 /* EventPhase.Before */;\n        state.render = 0 /* EventPhase.Before */;\n    }\n    /**\n     * Gets all input latency samples and clears the internal buffers to start recording a new set\n     * of samples.\n     */\n    function getAndClearMeasurements() {\n        if (measurementsCount === 0) {\n            return undefined;\n        }\n        // Assemble the result\n        const result = {\n            keydown: cumulativeToFinalMeasurement(totalKeydownTime),\n            input: cumulativeToFinalMeasurement(totalInputTime),\n            render: cumulativeToFinalMeasurement(totalRenderTime),\n            total: cumulativeToFinalMeasurement(totalInputLatencyTime),\n            sampleCount: measurementsCount\n        };\n        // Clear the cumulative measurements\n        clearCumulativeMeasurement(totalKeydownTime);\n        clearCumulativeMeasurement(totalInputTime);\n        clearCumulativeMeasurement(totalRenderTime);\n        clearCumulativeMeasurement(totalInputLatencyTime);\n        measurementsCount = 0;\n        return result;\n    }\n    inputLatency.getAndClearMeasurements = getAndClearMeasurements;\n    function cumulativeToFinalMeasurement(cumulative) {\n        return {\n            average: cumulative.total / measurementsCount,\n            max: cumulative.max,\n            min: cumulative.min,\n        };\n    }\n    function clearCumulativeMeasurement(cumulative) {\n        cumulative.total = 0;\n        cumulative.min = Number.MAX_VALUE;\n        cumulative.max = 0;\n    }\n})(inputLatency || (inputLatency = {}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getWindowId, onDidUnregisterWindow } from './dom.js';\nimport { Emitter, Event } from '../common/event.js';\nimport { Disposable, markAsSingleton } from '../common/lifecycle.js';\n/**\n * See https://developer.mozilla.org/en-US/docs/Web/API/Window/devicePixelRatio#monitoring_screen_resolution_or_zoom_level_changes\n */\nclass DevicePixelRatioMonitor extends Disposable {\n    constructor(targetWindow) {\n        super();\n        this._onDidChange = this._register(new Emitter());\n        this.onDidChange = this._onDidChange.event;\n        this._listener = () => this._handleChange(targetWindow, true);\n        this._mediaQueryList = null;\n        this._handleChange(targetWindow, false);\n    }\n    _handleChange(targetWindow, fireEvent) {\n        var _a;\n        (_a = this._mediaQueryList) === null || _a === void 0 ? void 0 : _a.removeEventListener('change', this._listener);\n        this._mediaQueryList = targetWindow.matchMedia(`(resolution: ${targetWindow.devicePixelRatio}dppx)`);\n        this._mediaQueryList.addEventListener('change', this._listener);\n        if (fireEvent) {\n            this._onDidChange.fire();\n        }\n    }\n}\nclass PixelRatioMonitorImpl extends Disposable {\n    get value() {\n        return this._value;\n    }\n    constructor(targetWindow) {\n        super();\n        this._onDidChange = this._register(new Emitter());\n        this.onDidChange = this._onDidChange.event;\n        this._value = this._getPixelRatio(targetWindow);\n        const dprMonitor = this._register(new DevicePixelRatioMonitor(targetWindow));\n        this._register(dprMonitor.onDidChange(() => {\n            this._value = this._getPixelRatio(targetWindow);\n            this._onDidChange.fire(this._value);\n        }));\n    }\n    _getPixelRatio(targetWindow) {\n        const ctx = document.createElement('canvas').getContext('2d');\n        const dpr = targetWindow.devicePixelRatio || 1;\n        const bsr = ctx.webkitBackingStorePixelRatio ||\n            ctx.mozBackingStorePixelRatio ||\n            ctx.msBackingStorePixelRatio ||\n            ctx.oBackingStorePixelRatio ||\n            ctx.backingStorePixelRatio || 1;\n        return dpr / bsr;\n    }\n}\nclass PixelRatioMonitorFacade {\n    constructor() {\n        this.mapWindowIdToPixelRatioMonitor = new Map();\n    }\n    _getOrCreatePixelRatioMonitor(targetWindow) {\n        const targetWindowId = getWindowId(targetWindow);\n        let pixelRatioMonitor = this.mapWindowIdToPixelRatioMonitor.get(targetWindowId);\n        if (!pixelRatioMonitor) {\n            pixelRatioMonitor = markAsSingleton(new PixelRatioMonitorImpl(targetWindow));\n            this.mapWindowIdToPixelRatioMonitor.set(targetWindowId, pixelRatioMonitor);\n            markAsSingleton(Event.once(onDidUnregisterWindow)(({ vscodeWindowId }) => {\n                if (vscodeWindowId === targetWindowId) {\n                    pixelRatioMonitor === null || pixelRatioMonitor === void 0 ? void 0 : pixelRatioMonitor.dispose();\n                    this.mapWindowIdToPixelRatioMonitor.delete(targetWindowId);\n                }\n            }));\n        }\n        return pixelRatioMonitor;\n    }\n    getInstance(targetWindow) {\n        return this._getOrCreatePixelRatioMonitor(targetWindow);\n    }\n}\n/**\n * Returns the pixel ratio.\n *\n * This is useful for rendering <canvas> elements at native screen resolution or for being used as\n * a cache key when storing font measurements. Fonts might render differently depending on resolution\n * and any measurements need to be discarded for example when a window is moved from a monitor to another.\n */\nexport const PixelRatio = new PixelRatioMonitorFacade();\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport * as DomUtils from './dom.js';\nimport { mainWindow } from './window.js';\nimport * as arrays from '../common/arrays.js';\nimport { memoize } from '../common/decorators.js';\nimport { Event as EventUtils } from '../common/event.js';\nimport { Disposable, markAsSingleton, toDisposable } from '../common/lifecycle.js';\nimport { LinkedList } from '../common/linkedList.js';\nexport var EventType;\n(function (EventType) {\n    EventType.Tap = '-monaco-gesturetap';\n    EventType.Change = '-monaco-gesturechange';\n    EventType.Start = '-monaco-gesturestart';\n    EventType.End = '-monaco-gesturesend';\n    EventType.Contextmenu = '-monaco-gesturecontextmenu';\n})(EventType || (EventType = {}));\nexport class Gesture extends Disposable {\n    constructor() {\n        super();\n        this.dispatched = false;\n        this.targets = new LinkedList();\n        this.ignoreTargets = new LinkedList();\n        this.activeTouches = {};\n        this.handle = null;\n        this._lastSetTapCountTime = 0;\n        this._register(EventUtils.runAndSubscribe(DomUtils.onDidRegisterWindow, ({ window, disposables }) => {\n            disposables.add(DomUtils.addDisposableListener(window.document, 'touchstart', (e) => this.onTouchStart(e), { passive: false }));\n            disposables.add(DomUtils.addDisposableListener(window.document, 'touchend', (e) => this.onTouchEnd(window, e)));\n            disposables.add(DomUtils.addDisposableListener(window.document, 'touchmove', (e) => this.onTouchMove(e), { passive: false }));\n        }, { window: mainWindow, disposables: this._store }));\n    }\n    static addTarget(element) {\n        if (!Gesture.isTouchDevice()) {\n            return Disposable.None;\n        }\n        if (!Gesture.INSTANCE) {\n            Gesture.INSTANCE = markAsSingleton(new Gesture());\n        }\n        const remove = Gesture.INSTANCE.targets.push(element);\n        return toDisposable(remove);\n    }\n    static ignoreTarget(element) {\n        if (!Gesture.isTouchDevice()) {\n            return Disposable.None;\n        }\n        if (!Gesture.INSTANCE) {\n            Gesture.INSTANCE = markAsSingleton(new Gesture());\n        }\n        const remove = Gesture.INSTANCE.ignoreTargets.push(element);\n        return toDisposable(remove);\n    }\n    static isTouchDevice() {\n        // `'ontouchstart' in window` always evaluates to true with typescript's modern typings. This causes `window` to be\n        // `never` later in `window.navigator`. That's why we need the explicit `window as Window` cast\n        return 'ontouchstart' in mainWindow || navigator.maxTouchPoints > 0;\n    }\n    dispose() {\n        if (this.handle) {\n            this.handle.dispose();\n            this.handle = null;\n        }\n        super.dispose();\n    }\n    onTouchStart(e) {\n        const timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.\n        if (this.handle) {\n            this.handle.dispose();\n            this.handle = null;\n        }\n        for (let i = 0, len = e.targetTouches.length; i < len; i++) {\n            const touch = e.targetTouches.item(i);\n            this.activeTouches[touch.identifier] = {\n                id: touch.identifier,\n                initialTarget: touch.target,\n                initialTimeStamp: timestamp,\n                initialPageX: touch.pageX,\n                initialPageY: touch.pageY,\n                rollingTimestamps: [timestamp],\n                rollingPageX: [touch.pageX],\n                rollingPageY: [touch.pageY]\n            };\n            const evt = this.newGestureEvent(EventType.Start, touch.target);\n            evt.pageX = touch.pageX;\n            evt.pageY = touch.pageY;\n            this.dispatchEvent(evt);\n        }\n        if (this.dispatched) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.dispatched = false;\n        }\n    }\n    onTouchEnd(targetWindow, e) {\n        const timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.\n        const activeTouchCount = Object.keys(this.activeTouches).length;\n        for (let i = 0, len = e.changedTouches.length; i < len; i++) {\n            const touch = e.changedTouches.item(i);\n            if (!this.activeTouches.hasOwnProperty(String(touch.identifier))) {\n                console.warn('move of an UNKNOWN touch', touch);\n                continue;\n            }\n            const data = this.activeTouches[touch.identifier], holdTime = Date.now() - data.initialTimeStamp;\n            if (holdTime < Gesture.HOLD_DELAY\n                && Math.abs(data.initialPageX - arrays.tail(data.rollingPageX)) < 30\n                && Math.abs(data.initialPageY - arrays.tail(data.rollingPageY)) < 30) {\n                const evt = this.newGestureEvent(EventType.Tap, data.initialTarget);\n                evt.pageX = arrays.tail(data.rollingPageX);\n                evt.pageY = arrays.tail(data.rollingPageY);\n                this.dispatchEvent(evt);\n            }\n            else if (holdTime >= Gesture.HOLD_DELAY\n                && Math.abs(data.initialPageX - arrays.tail(data.rollingPageX)) < 30\n                && Math.abs(data.initialPageY - arrays.tail(data.rollingPageY)) < 30) {\n                const evt = this.newGestureEvent(EventType.Contextmenu, data.initialTarget);\n                evt.pageX = arrays.tail(data.rollingPageX);\n                evt.pageY = arrays.tail(data.rollingPageY);\n                this.dispatchEvent(evt);\n            }\n            else if (activeTouchCount === 1) {\n                const finalX = arrays.tail(data.rollingPageX);\n                const finalY = arrays.tail(data.rollingPageY);\n                const deltaT = arrays.tail(data.rollingTimestamps) - data.rollingTimestamps[0];\n                const deltaX = finalX - data.rollingPageX[0];\n                const deltaY = finalY - data.rollingPageY[0];\n                // We need to get all the dispatch targets on the start of the inertia event\n                const dispatchTo = [...this.targets].filter(t => data.initialTarget instanceof Node && t.contains(data.initialTarget));\n                this.inertia(targetWindow, dispatchTo, timestamp, // time now\n                Math.abs(deltaX) / deltaT, // speed\n                deltaX > 0 ? 1 : -1, // x direction\n                finalX, // x now\n                Math.abs(deltaY) / deltaT, // y speed\n                deltaY > 0 ? 1 : -1, // y direction\n                finalY // y now\n                );\n            }\n            this.dispatchEvent(this.newGestureEvent(EventType.End, data.initialTarget));\n            // forget about this touch\n            delete this.activeTouches[touch.identifier];\n        }\n        if (this.dispatched) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.dispatched = false;\n        }\n    }\n    newGestureEvent(type, initialTarget) {\n        const event = document.createEvent('CustomEvent');\n        event.initEvent(type, false, true);\n        event.initialTarget = initialTarget;\n        event.tapCount = 0;\n        return event;\n    }\n    dispatchEvent(event) {\n        if (event.type === EventType.Tap) {\n            const currentTime = (new Date()).getTime();\n            let setTapCount = 0;\n            if (currentTime - this._lastSetTapCountTime > Gesture.CLEAR_TAP_COUNT_TIME) {\n                setTapCount = 1;\n            }\n            else {\n                setTapCount = 2;\n            }\n            this._lastSetTapCountTime = currentTime;\n            event.tapCount = setTapCount;\n        }\n        else if (event.type === EventType.Change || event.type === EventType.Contextmenu) {\n            // tap is canceled by scrolling or context menu\n            this._lastSetTapCountTime = 0;\n        }\n        if (event.initialTarget instanceof Node) {\n            for (const ignoreTarget of this.ignoreTargets) {\n                if (ignoreTarget.contains(event.initialTarget)) {\n                    return;\n                }\n            }\n            const targets = [];\n            for (const target of this.targets) {\n                if (target.contains(event.initialTarget)) {\n                    let depth = 0;\n                    let now = event.initialTarget;\n                    while (now && now !== target) {\n                        depth++;\n                        now = now.parentElement;\n                    }\n                    targets.push([depth, target]);\n                }\n            }\n            targets.sort((a, b) => a[0] - b[0]);\n            for (const [_, target] of targets) {\n                target.dispatchEvent(event);\n                this.dispatched = true;\n            }\n        }\n    }\n    inertia(targetWindow, dispatchTo, t1, vX, dirX, x, vY, dirY, y) {\n        this.handle = DomUtils.scheduleAtNextAnimationFrame(targetWindow, () => {\n            const now = Date.now();\n            // velocity: old speed + accel_over_time\n            const deltaT = now - t1;\n            let delta_pos_x = 0, delta_pos_y = 0;\n            let stopped = true;\n            vX += Gesture.SCROLL_FRICTION * deltaT;\n            vY += Gesture.SCROLL_FRICTION * deltaT;\n            if (vX > 0) {\n                stopped = false;\n                delta_pos_x = dirX * vX * deltaT;\n            }\n            if (vY > 0) {\n                stopped = false;\n                delta_pos_y = dirY * vY * deltaT;\n            }\n            // dispatch translation event\n            const evt = this.newGestureEvent(EventType.Change);\n            evt.translationX = delta_pos_x;\n            evt.translationY = delta_pos_y;\n            dispatchTo.forEach(d => d.dispatchEvent(evt));\n            if (!stopped) {\n                this.inertia(targetWindow, dispatchTo, now, vX, dirX, x + delta_pos_x, vY, dirY, y + delta_pos_y);\n            }\n        });\n    }\n    onTouchMove(e) {\n        const timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.\n        for (let i = 0, len = e.changedTouches.length; i < len; i++) {\n            const touch = e.changedTouches.item(i);\n            if (!this.activeTouches.hasOwnProperty(String(touch.identifier))) {\n                console.warn('end of an UNKNOWN touch', touch);\n                continue;\n            }\n            const data = this.activeTouches[touch.identifier];\n            const evt = this.newGestureEvent(EventType.Change, data.initialTarget);\n            evt.translationX = touch.pageX - arrays.tail(data.rollingPageX);\n            evt.translationY = touch.pageY - arrays.tail(data.rollingPageY);\n            evt.pageX = touch.pageX;\n            evt.pageY = touch.pageY;\n            this.dispatchEvent(evt);\n            // only keep a few data points, to average the final speed\n            if (data.rollingPageX.length > 3) {\n                data.rollingPageX.shift();\n                data.rollingPageY.shift();\n                data.rollingTimestamps.shift();\n            }\n            data.rollingPageX.push(touch.pageX);\n            data.rollingPageY.push(touch.pageY);\n            data.rollingTimestamps.push(timestamp);\n        }\n        if (this.dispatched) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.dispatched = false;\n        }\n    }\n}\nGesture.SCROLL_FRICTION = -0.005;\nGesture.HOLD_DELAY = 700;\nGesture.CLEAR_TAP_COUNT_TIME = 400; // ms\n__decorate([\n    memoize\n], Gesture, \"isTouchDevice\", null);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { mainWindow } from './window.js';\nimport { onUnexpectedError } from '../common/errors.js';\nexport function createTrustedTypesPolicy(policyName, policyOptions) {\n    var _a;\n    const monacoEnvironment = globalThis.MonacoEnvironment;\n    if (monacoEnvironment === null || monacoEnvironment === void 0 ? void 0 : monacoEnvironment.createTrustedTypesPolicy) {\n        try {\n            return monacoEnvironment.createTrustedTypesPolicy(policyName, policyOptions);\n        }\n        catch (err) {\n            onUnexpectedError(err);\n            return undefined;\n        }\n    }\n    try {\n        return (_a = mainWindow.trustedTypes) === null || _a === void 0 ? void 0 : _a.createPolicy(policyName, policyOptions);\n    }\n    catch (err) {\n        onUnexpectedError(err);\n        return undefined;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isFirefox } from '../../browser.js';\nimport { DataTransfers } from '../../dnd.js';\nimport { addDisposableListener, EventHelper, EventType } from '../../dom.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { SelectBox } from '../selectBox/selectBox.js';\nimport { Action, ActionRunner, Separator } from '../../../common/actions.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport * as platform from '../../../common/platform.js';\nimport * as types from '../../../common/types.js';\nimport './actionbar.css';\nimport * as nls from '../../../../nls.js';\nimport { getBaseLayerHoverDelegate } from '../hover/hoverDelegate2.js';\nexport class BaseActionViewItem extends Disposable {\n    get action() {\n        return this._action;\n    }\n    constructor(context, action, options = {}) {\n        super();\n        this.options = options;\n        this._context = context || this;\n        this._action = action;\n        if (action instanceof Action) {\n            this._register(action.onDidChange(event => {\n                if (!this.element) {\n                    // we have not been rendered yet, so there\n                    // is no point in updating the UI\n                    return;\n                }\n                this.handleActionChangeEvent(event);\n            }));\n        }\n    }\n    handleActionChangeEvent(event) {\n        if (event.enabled !== undefined) {\n            this.updateEnabled();\n        }\n        if (event.checked !== undefined) {\n            this.updateChecked();\n        }\n        if (event.class !== undefined) {\n            this.updateClass();\n        }\n        if (event.label !== undefined) {\n            this.updateLabel();\n            this.updateTooltip();\n        }\n        if (event.tooltip !== undefined) {\n            this.updateTooltip();\n        }\n    }\n    get actionRunner() {\n        if (!this._actionRunner) {\n            this._actionRunner = this._register(new ActionRunner());\n        }\n        return this._actionRunner;\n    }\n    set actionRunner(actionRunner) {\n        this._actionRunner = actionRunner;\n    }\n    isEnabled() {\n        return this._action.enabled;\n    }\n    setActionContext(newContext) {\n        this._context = newContext;\n    }\n    render(container) {\n        const element = this.element = container;\n        this._register(Gesture.addTarget(container));\n        const enableDragging = this.options && this.options.draggable;\n        if (enableDragging) {\n            container.draggable = true;\n            if (isFirefox) {\n                // Firefox: requires to set a text data transfer to get going\n                this._register(addDisposableListener(container, EventType.DRAG_START, e => { var _a; return (_a = e.dataTransfer) === null || _a === void 0 ? void 0 : _a.setData(DataTransfers.TEXT, this._action.label); }));\n            }\n        }\n        this._register(addDisposableListener(element, TouchEventType.Tap, e => this.onClick(e, true))); // Preserve focus on tap #125470\n        this._register(addDisposableListener(element, EventType.MOUSE_DOWN, e => {\n            if (!enableDragging) {\n                EventHelper.stop(e, true); // do not run when dragging is on because that would disable it\n            }\n            if (this._action.enabled && e.button === 0) {\n                element.classList.add('active');\n            }\n        }));\n        if (platform.isMacintosh) {\n            // macOS: allow to trigger the button when holding Ctrl+key and pressing the\n            // main mouse button. This is for scenarios where e.g. some interaction forces\n            // the Ctrl+key to be pressed and hold but the user still wants to interact\n            // with the actions (for example quick access in quick navigation mode).\n            this._register(addDisposableListener(element, EventType.CONTEXT_MENU, e => {\n                if (e.button === 0 && e.ctrlKey === true) {\n                    this.onClick(e);\n                }\n            }));\n        }\n        this._register(addDisposableListener(element, EventType.CLICK, e => {\n            EventHelper.stop(e, true);\n            // menus do not use the click event\n            if (!(this.options && this.options.isMenu)) {\n                this.onClick(e);\n            }\n        }));\n        this._register(addDisposableListener(element, EventType.DBLCLICK, e => {\n            EventHelper.stop(e, true);\n        }));\n        [EventType.MOUSE_UP, EventType.MOUSE_OUT].forEach(event => {\n            this._register(addDisposableListener(element, event, e => {\n                EventHelper.stop(e);\n                element.classList.remove('active');\n            }));\n        });\n    }\n    onClick(event, preserveFocus = false) {\n        var _a;\n        EventHelper.stop(event, true);\n        const context = types.isUndefinedOrNull(this._context) ? ((_a = this.options) === null || _a === void 0 ? void 0 : _a.useEventAsContext) ? event : { preserveFocus } : this._context;\n        this.actionRunner.run(this._action, context);\n    }\n    // Only set the tabIndex on the element once it is about to get focused\n    // That way this element wont be a tab stop when it is not needed #106441\n    focus() {\n        if (this.element) {\n            this.element.tabIndex = 0;\n            this.element.focus();\n            this.element.classList.add('focused');\n        }\n    }\n    blur() {\n        if (this.element) {\n            this.element.blur();\n            this.element.tabIndex = -1;\n            this.element.classList.remove('focused');\n        }\n    }\n    setFocusable(focusable) {\n        if (this.element) {\n            this.element.tabIndex = focusable ? 0 : -1;\n        }\n    }\n    get trapsArrowNavigation() {\n        return false;\n    }\n    updateEnabled() {\n        // implement in subclass\n    }\n    updateLabel() {\n        // implement in subclass\n    }\n    getClass() {\n        return this.action.class;\n    }\n    getTooltip() {\n        return this.action.tooltip;\n    }\n    updateTooltip() {\n        var _a, _b, _c;\n        if (!this.element) {\n            return;\n        }\n        const title = (_a = this.getTooltip()) !== null && _a !== void 0 ? _a : '';\n        this.updateAriaLabel();\n        if ((_b = this.options.hoverDelegate) === null || _b === void 0 ? void 0 : _b.showNativeHover) {\n            /* While custom hover is not inside custom hover */\n            this.element.title = title;\n        }\n        else {\n            if (!this.customHover && title !== '') {\n                const hoverDelegate = (_c = this.options.hoverDelegate) !== null && _c !== void 0 ? _c : getDefaultHoverDelegate('element');\n                this.customHover = this._store.add(getBaseLayerHoverDelegate().setupUpdatableHover(hoverDelegate, this.element, title));\n            }\n            else if (this.customHover) {\n                this.customHover.update(title);\n            }\n        }\n    }\n    updateAriaLabel() {\n        var _a;\n        if (this.element) {\n            const title = (_a = this.getTooltip()) !== null && _a !== void 0 ? _a : '';\n            this.element.setAttribute('aria-label', title);\n        }\n    }\n    updateClass() {\n        // implement in subclass\n    }\n    updateChecked() {\n        // implement in subclass\n    }\n    dispose() {\n        if (this.element) {\n            this.element.remove();\n            this.element = undefined;\n        }\n        this._context = undefined;\n        super.dispose();\n    }\n}\nexport class ActionViewItem extends BaseActionViewItem {\n    constructor(context, action, options) {\n        super(context, action, options);\n        this.options = options;\n        this.options.icon = options.icon !== undefined ? options.icon : false;\n        this.options.label = options.label !== undefined ? options.label : true;\n        this.cssClass = '';\n    }\n    render(container) {\n        super.render(container);\n        types.assertType(this.element);\n        const label = document.createElement('a');\n        label.classList.add('action-label');\n        label.setAttribute('role', this.getDefaultAriaRole());\n        this.label = label;\n        this.element.appendChild(label);\n        if (this.options.label && this.options.keybinding) {\n            const kbLabel = document.createElement('span');\n            kbLabel.classList.add('keybinding');\n            kbLabel.textContent = this.options.keybinding;\n            this.element.appendChild(kbLabel);\n        }\n        this.updateClass();\n        this.updateLabel();\n        this.updateTooltip();\n        this.updateEnabled();\n        this.updateChecked();\n    }\n    getDefaultAriaRole() {\n        if (this._action.id === Separator.ID) {\n            return 'presentation'; // A separator is a presentation item\n        }\n        else {\n            if (this.options.isMenu) {\n                return 'menuitem';\n            }\n            else {\n                return 'button';\n            }\n        }\n    }\n    // Only set the tabIndex on the element once it is about to get focused\n    // That way this element wont be a tab stop when it is not needed #106441\n    focus() {\n        if (this.label) {\n            this.label.tabIndex = 0;\n            this.label.focus();\n        }\n    }\n    blur() {\n        if (this.label) {\n            this.label.tabIndex = -1;\n        }\n    }\n    setFocusable(focusable) {\n        if (this.label) {\n            this.label.tabIndex = focusable ? 0 : -1;\n        }\n    }\n    updateLabel() {\n        if (this.options.label && this.label) {\n            this.label.textContent = this.action.label;\n        }\n    }\n    getTooltip() {\n        let title = null;\n        if (this.action.tooltip) {\n            title = this.action.tooltip;\n        }\n        else if (!this.options.label && this.action.label && this.options.icon) {\n            title = this.action.label;\n            if (this.options.keybinding) {\n                title = nls.localize({ key: 'titleLabel', comment: ['action title', 'action keybinding'] }, \"{0} ({1})\", title, this.options.keybinding);\n            }\n        }\n        return title !== null && title !== void 0 ? title : undefined;\n    }\n    updateClass() {\n        var _a;\n        if (this.cssClass && this.label) {\n            this.label.classList.remove(...this.cssClass.split(' '));\n        }\n        if (this.options.icon) {\n            this.cssClass = this.getClass();\n            if (this.label) {\n                this.label.classList.add('codicon');\n                if (this.cssClass) {\n                    this.label.classList.add(...this.cssClass.split(' '));\n                }\n            }\n            this.updateEnabled();\n        }\n        else {\n            (_a = this.label) === null || _a === void 0 ? void 0 : _a.classList.remove('codicon');\n        }\n    }\n    updateEnabled() {\n        var _a, _b;\n        if (this.action.enabled) {\n            if (this.label) {\n                this.label.removeAttribute('aria-disabled');\n                this.label.classList.remove('disabled');\n            }\n            (_a = this.element) === null || _a === void 0 ? void 0 : _a.classList.remove('disabled');\n        }\n        else {\n            if (this.label) {\n                this.label.setAttribute('aria-disabled', 'true');\n                this.label.classList.add('disabled');\n            }\n            (_b = this.element) === null || _b === void 0 ? void 0 : _b.classList.add('disabled');\n        }\n    }\n    updateAriaLabel() {\n        var _a;\n        if (this.label) {\n            const title = (_a = this.getTooltip()) !== null && _a !== void 0 ? _a : '';\n            this.label.setAttribute('aria-label', title);\n        }\n    }\n    updateChecked() {\n        if (this.label) {\n            if (this.action.checked !== undefined) {\n                this.label.classList.toggle('checked', this.action.checked);\n                this.label.setAttribute('aria-checked', this.action.checked ? 'true' : 'false');\n                this.label.setAttribute('role', 'checkbox');\n            }\n            else {\n                this.label.classList.remove('checked');\n                this.label.removeAttribute('aria-checked');\n                this.label.setAttribute('role', this.getDefaultAriaRole());\n            }\n        }\n    }\n}\nexport class SelectActionViewItem extends BaseActionViewItem {\n    constructor(ctx, action, options, selected, contextViewProvider, styles, selectBoxOptions) {\n        super(ctx, action);\n        this.selectBox = new SelectBox(options, selected, contextViewProvider, styles, selectBoxOptions);\n        this.selectBox.setFocusable(false);\n        this._register(this.selectBox);\n        this.registerListeners();\n    }\n    select(index) {\n        this.selectBox.select(index);\n    }\n    registerListeners() {\n        this._register(this.selectBox.onDidSelect(e => this.runAction(e.selected, e.index)));\n    }\n    runAction(option, index) {\n        this.actionRunner.run(this._action, this.getActionContext(option, index));\n    }\n    getActionContext(option, index) {\n        return option;\n    }\n    setFocusable(focusable) {\n        this.selectBox.setFocusable(focusable);\n    }\n    focus() {\n        var _a;\n        (_a = this.selectBox) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n    blur() {\n        var _a;\n        (_a = this.selectBox) === null || _a === void 0 ? void 0 : _a.blur();\n    }\n    render(container) {\n        this.selectBox.render(container);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as DOM from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { ActionViewItem, BaseActionViewItem } from './actionViewItems.js';\nimport { createInstantHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { ActionRunner, Separator } from '../../../common/actions.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Disposable, DisposableMap, DisposableStore, dispose } from '../../../common/lifecycle.js';\nimport * as types from '../../../common/types.js';\nimport './actionbar.css';\nexport class ActionBar extends Disposable {\n    constructor(container, options = {}) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        super();\n        this._actionRunnerDisposables = this._register(new DisposableStore());\n        this.viewItemDisposables = this._register(new DisposableMap());\n        // Trigger Key Tracking\n        this.triggerKeyDown = false;\n        this.focusable = true;\n        this._onDidBlur = this._register(new Emitter());\n        this.onDidBlur = this._onDidBlur.event;\n        this._onDidCancel = this._register(new Emitter({ onWillAddFirstListener: () => this.cancelHasListener = true }));\n        this.onDidCancel = this._onDidCancel.event;\n        this.cancelHasListener = false;\n        this._onDidRun = this._register(new Emitter());\n        this.onDidRun = this._onDidRun.event;\n        this._onWillRun = this._register(new Emitter());\n        this.onWillRun = this._onWillRun.event;\n        this.options = options;\n        this._context = (_a = options.context) !== null && _a !== void 0 ? _a : null;\n        this._orientation = (_b = this.options.orientation) !== null && _b !== void 0 ? _b : 0 /* ActionsOrientation.HORIZONTAL */;\n        this._triggerKeys = {\n            keyDown: (_d = (_c = this.options.triggerKeys) === null || _c === void 0 ? void 0 : _c.keyDown) !== null && _d !== void 0 ? _d : false,\n            keys: (_f = (_e = this.options.triggerKeys) === null || _e === void 0 ? void 0 : _e.keys) !== null && _f !== void 0 ? _f : [3 /* KeyCode.Enter */, 10 /* KeyCode.Space */]\n        };\n        this._hoverDelegate = (_g = options.hoverDelegate) !== null && _g !== void 0 ? _g : this._register(createInstantHoverDelegate());\n        if (this.options.actionRunner) {\n            this._actionRunner = this.options.actionRunner;\n        }\n        else {\n            this._actionRunner = new ActionRunner();\n            this._actionRunnerDisposables.add(this._actionRunner);\n        }\n        this._actionRunnerDisposables.add(this._actionRunner.onDidRun(e => this._onDidRun.fire(e)));\n        this._actionRunnerDisposables.add(this._actionRunner.onWillRun(e => this._onWillRun.fire(e)));\n        this.viewItems = [];\n        this.focusedItem = undefined;\n        this.domNode = document.createElement('div');\n        this.domNode.className = 'monaco-action-bar';\n        let previousKeys;\n        let nextKeys;\n        switch (this._orientation) {\n            case 0 /* ActionsOrientation.HORIZONTAL */:\n                previousKeys = [15 /* KeyCode.LeftArrow */];\n                nextKeys = [17 /* KeyCode.RightArrow */];\n                break;\n            case 1 /* ActionsOrientation.VERTICAL */:\n                previousKeys = [16 /* KeyCode.UpArrow */];\n                nextKeys = [18 /* KeyCode.DownArrow */];\n                this.domNode.className += ' vertical';\n                break;\n        }\n        this._register(DOM.addDisposableListener(this.domNode, DOM.EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            let eventHandled = true;\n            const focusedItem = typeof this.focusedItem === 'number' ? this.viewItems[this.focusedItem] : undefined;\n            if (previousKeys && (event.equals(previousKeys[0]) || event.equals(previousKeys[1]))) {\n                eventHandled = this.focusPrevious();\n            }\n            else if (nextKeys && (event.equals(nextKeys[0]) || event.equals(nextKeys[1]))) {\n                eventHandled = this.focusNext();\n            }\n            else if (event.equals(9 /* KeyCode.Escape */) && this.cancelHasListener) {\n                this._onDidCancel.fire();\n            }\n            else if (event.equals(14 /* KeyCode.Home */)) {\n                eventHandled = this.focusFirst();\n            }\n            else if (event.equals(13 /* KeyCode.End */)) {\n                eventHandled = this.focusLast();\n            }\n            else if (event.equals(2 /* KeyCode.Tab */) && focusedItem instanceof BaseActionViewItem && focusedItem.trapsArrowNavigation) {\n                eventHandled = this.focusNext();\n            }\n            else if (this.isTriggerKeyEvent(event)) {\n                // Staying out of the else branch even if not triggered\n                if (this._triggerKeys.keyDown) {\n                    this.doTrigger(event);\n                }\n                else {\n                    this.triggerKeyDown = true;\n                }\n            }\n            else {\n                eventHandled = false;\n            }\n            if (eventHandled) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        }));\n        this._register(DOM.addDisposableListener(this.domNode, DOM.EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            // Run action on Enter/Space\n            if (this.isTriggerKeyEvent(event)) {\n                if (!this._triggerKeys.keyDown && this.triggerKeyDown) {\n                    this.triggerKeyDown = false;\n                    this.doTrigger(event);\n                }\n                event.preventDefault();\n                event.stopPropagation();\n            }\n            // Recompute focused item\n            else if (event.equals(2 /* KeyCode.Tab */) || event.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */) || event.equals(16 /* KeyCode.UpArrow */) || event.equals(18 /* KeyCode.DownArrow */) || event.equals(15 /* KeyCode.LeftArrow */) || event.equals(17 /* KeyCode.RightArrow */)) {\n                this.updateFocusedItem();\n            }\n        }));\n        this.focusTracker = this._register(DOM.trackFocus(this.domNode));\n        this._register(this.focusTracker.onDidBlur(() => {\n            if (DOM.getActiveElement() === this.domNode || !DOM.isAncestor(DOM.getActiveElement(), this.domNode)) {\n                this._onDidBlur.fire();\n                this.previouslyFocusedItem = this.focusedItem;\n                this.focusedItem = undefined;\n                this.triggerKeyDown = false;\n            }\n        }));\n        this._register(this.focusTracker.onDidFocus(() => this.updateFocusedItem()));\n        this.actionsList = document.createElement('ul');\n        this.actionsList.className = 'actions-container';\n        if (this.options.highlightToggledItems) {\n            this.actionsList.classList.add('highlight-toggled');\n        }\n        this.actionsList.setAttribute('role', this.options.ariaRole || 'toolbar');\n        if (this.options.ariaLabel) {\n            this.actionsList.setAttribute('aria-label', this.options.ariaLabel);\n        }\n        this.domNode.appendChild(this.actionsList);\n        container.appendChild(this.domNode);\n    }\n    refreshRole() {\n        if (this.length() >= 1) {\n            this.actionsList.setAttribute('role', this.options.ariaRole || 'toolbar');\n        }\n        else {\n            this.actionsList.setAttribute('role', 'presentation');\n        }\n    }\n    // Some action bars should not be focusable at times\n    // When an action bar is not focusable make sure to make all the elements inside it not focusable\n    // When an action bar is focusable again, make sure the first item can be focused\n    setFocusable(focusable) {\n        this.focusable = focusable;\n        if (this.focusable) {\n            const firstEnabled = this.viewItems.find(vi => vi instanceof BaseActionViewItem && vi.isEnabled());\n            if (firstEnabled instanceof BaseActionViewItem) {\n                firstEnabled.setFocusable(true);\n            }\n        }\n        else {\n            this.viewItems.forEach(vi => {\n                if (vi instanceof BaseActionViewItem) {\n                    vi.setFocusable(false);\n                }\n            });\n        }\n    }\n    isTriggerKeyEvent(event) {\n        let ret = false;\n        this._triggerKeys.keys.forEach(keyCode => {\n            ret = ret || event.equals(keyCode);\n        });\n        return ret;\n    }\n    updateFocusedItem() {\n        var _a, _b;\n        for (let i = 0; i < this.actionsList.children.length; i++) {\n            const elem = this.actionsList.children[i];\n            if (DOM.isAncestor(DOM.getActiveElement(), elem)) {\n                this.focusedItem = i;\n                (_b = (_a = this.viewItems[this.focusedItem]) === null || _a === void 0 ? void 0 : _a.showHover) === null || _b === void 0 ? void 0 : _b.call(_a);\n                break;\n            }\n        }\n    }\n    get context() {\n        return this._context;\n    }\n    set context(context) {\n        this._context = context;\n        this.viewItems.forEach(i => i.setActionContext(context));\n    }\n    get actionRunner() {\n        return this._actionRunner;\n    }\n    set actionRunner(actionRunner) {\n        this._actionRunner = actionRunner;\n        // when setting a new `IActionRunner` make sure to dispose old listeners and\n        // start to forward events from the new listener\n        this._actionRunnerDisposables.clear();\n        this._actionRunnerDisposables.add(this._actionRunner.onDidRun(e => this._onDidRun.fire(e)));\n        this._actionRunnerDisposables.add(this._actionRunner.onWillRun(e => this._onWillRun.fire(e)));\n        this.viewItems.forEach(item => item.actionRunner = actionRunner);\n    }\n    getContainer() {\n        return this.domNode;\n    }\n    getAction(indexOrElement) {\n        var _a;\n        // by index\n        if (typeof indexOrElement === 'number') {\n            return (_a = this.viewItems[indexOrElement]) === null || _a === void 0 ? void 0 : _a.action;\n        }\n        // by element\n        if (indexOrElement instanceof HTMLElement) {\n            while (indexOrElement.parentElement !== this.actionsList) {\n                if (!indexOrElement.parentElement) {\n                    return undefined;\n                }\n                indexOrElement = indexOrElement.parentElement;\n            }\n            for (let i = 0; i < this.actionsList.childNodes.length; i++) {\n                if (this.actionsList.childNodes[i] === indexOrElement) {\n                    return this.viewItems[i].action;\n                }\n            }\n        }\n        return undefined;\n    }\n    push(arg, options = {}) {\n        const actions = Array.isArray(arg) ? arg : [arg];\n        let index = types.isNumber(options.index) ? options.index : null;\n        actions.forEach((action) => {\n            const actionViewItemElement = document.createElement('li');\n            actionViewItemElement.className = 'action-item';\n            actionViewItemElement.setAttribute('role', 'presentation');\n            let item;\n            const viewItemOptions = { hoverDelegate: this._hoverDelegate, ...options };\n            if (this.options.actionViewItemProvider) {\n                item = this.options.actionViewItemProvider(action, viewItemOptions);\n            }\n            if (!item) {\n                item = new ActionViewItem(this.context, action, viewItemOptions);\n            }\n            // Prevent native context menu on actions\n            if (!this.options.allowContextMenu) {\n                this.viewItemDisposables.set(item, DOM.addDisposableListener(actionViewItemElement, DOM.EventType.CONTEXT_MENU, (e) => {\n                    DOM.EventHelper.stop(e, true);\n                }));\n            }\n            item.actionRunner = this._actionRunner;\n            item.setActionContext(this.context);\n            item.render(actionViewItemElement);\n            if (this.focusable && item instanceof BaseActionViewItem && this.viewItems.length === 0) {\n                // We need to allow for the first enabled item to be focused on using tab navigation #106441\n                item.setFocusable(true);\n            }\n            if (index === null || index < 0 || index >= this.actionsList.children.length) {\n                this.actionsList.appendChild(actionViewItemElement);\n                this.viewItems.push(item);\n            }\n            else {\n                this.actionsList.insertBefore(actionViewItemElement, this.actionsList.children[index]);\n                this.viewItems.splice(index, 0, item);\n                index++;\n            }\n        });\n        if (typeof this.focusedItem === 'number') {\n            // After a clear actions might be re-added to simply toggle some actions. We should preserve focus #97128\n            this.focus(this.focusedItem);\n        }\n        this.refreshRole();\n    }\n    clear() {\n        if (this.isEmpty()) {\n            return;\n        }\n        this.viewItems = dispose(this.viewItems);\n        this.viewItemDisposables.clearAndDisposeAll();\n        DOM.clearNode(this.actionsList);\n        this.refreshRole();\n    }\n    length() {\n        return this.viewItems.length;\n    }\n    isEmpty() {\n        return this.viewItems.length === 0;\n    }\n    focus(arg) {\n        let selectFirst = false;\n        let index = undefined;\n        if (arg === undefined) {\n            selectFirst = true;\n        }\n        else if (typeof arg === 'number') {\n            index = arg;\n        }\n        else if (typeof arg === 'boolean') {\n            selectFirst = arg;\n        }\n        if (selectFirst && typeof this.focusedItem === 'undefined') {\n            const firstEnabled = this.viewItems.findIndex(item => item.isEnabled());\n            // Focus the first enabled item\n            this.focusedItem = firstEnabled === -1 ? undefined : firstEnabled;\n            this.updateFocus(undefined, undefined, true);\n        }\n        else {\n            if (index !== undefined) {\n                this.focusedItem = index;\n            }\n            this.updateFocus(undefined, undefined, true);\n        }\n    }\n    focusFirst() {\n        this.focusedItem = this.length() - 1;\n        return this.focusNext(true);\n    }\n    focusLast() {\n        this.focusedItem = 0;\n        return this.focusPrevious(true);\n    }\n    focusNext(forceLoop) {\n        if (typeof this.focusedItem === 'undefined') {\n            this.focusedItem = this.viewItems.length - 1;\n        }\n        else if (this.viewItems.length <= 1) {\n            return false;\n        }\n        const startIndex = this.focusedItem;\n        let item;\n        do {\n            if (!forceLoop && this.options.preventLoopNavigation && this.focusedItem + 1 >= this.viewItems.length) {\n                this.focusedItem = startIndex;\n                return false;\n            }\n            this.focusedItem = (this.focusedItem + 1) % this.viewItems.length;\n            item = this.viewItems[this.focusedItem];\n        } while (this.focusedItem !== startIndex && ((this.options.focusOnlyEnabledItems && !item.isEnabled()) || item.action.id === Separator.ID));\n        this.updateFocus();\n        return true;\n    }\n    focusPrevious(forceLoop) {\n        if (typeof this.focusedItem === 'undefined') {\n            this.focusedItem = 0;\n        }\n        else if (this.viewItems.length <= 1) {\n            return false;\n        }\n        const startIndex = this.focusedItem;\n        let item;\n        do {\n            this.focusedItem = this.focusedItem - 1;\n            if (this.focusedItem < 0) {\n                if (!forceLoop && this.options.preventLoopNavigation) {\n                    this.focusedItem = startIndex;\n                    return false;\n                }\n                this.focusedItem = this.viewItems.length - 1;\n            }\n            item = this.viewItems[this.focusedItem];\n        } while (this.focusedItem !== startIndex && ((this.options.focusOnlyEnabledItems && !item.isEnabled()) || item.action.id === Separator.ID));\n        this.updateFocus(true);\n        return true;\n    }\n    updateFocus(fromRight, preventScroll, forceFocus = false) {\n        var _a, _b;\n        if (typeof this.focusedItem === 'undefined') {\n            this.actionsList.focus({ preventScroll });\n        }\n        if (this.previouslyFocusedItem !== undefined && this.previouslyFocusedItem !== this.focusedItem) {\n            (_a = this.viewItems[this.previouslyFocusedItem]) === null || _a === void 0 ? void 0 : _a.blur();\n        }\n        const actionViewItem = this.focusedItem !== undefined ? this.viewItems[this.focusedItem] : undefined;\n        if (actionViewItem) {\n            let focusItem = true;\n            if (!types.isFunction(actionViewItem.focus)) {\n                focusItem = false;\n            }\n            if (this.options.focusOnlyEnabledItems && types.isFunction(actionViewItem.isEnabled) && !actionViewItem.isEnabled()) {\n                focusItem = false;\n            }\n            if (actionViewItem.action.id === Separator.ID) {\n                focusItem = false;\n            }\n            if (!focusItem) {\n                this.actionsList.focus({ preventScroll });\n                this.previouslyFocusedItem = undefined;\n            }\n            else if (forceFocus || this.previouslyFocusedItem !== this.focusedItem) {\n                actionViewItem.focus(fromRight);\n                this.previouslyFocusedItem = this.focusedItem;\n            }\n            if (focusItem) {\n                (_b = actionViewItem.showHover) === null || _b === void 0 ? void 0 : _b.call(actionViewItem);\n            }\n        }\n    }\n    doTrigger(event) {\n        if (typeof this.focusedItem === 'undefined') {\n            return; //nothing to focus\n        }\n        // trigger action\n        const actionViewItem = this.viewItems[this.focusedItem];\n        if (actionViewItem instanceof BaseActionViewItem) {\n            const context = (actionViewItem._context === null || actionViewItem._context === undefined) ? event : actionViewItem._context;\n            this.run(actionViewItem._action, context);\n        }\n    }\n    async run(action, context) {\n        await this._actionRunner.run(action, context);\n    }\n    dispose() {\n        this._context = undefined;\n        this.viewItems = dispose(this.viewItems);\n        this.getContainer().remove();\n        super.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport './aria.css';\n// Use a max length since we are inserting the whole msg in the DOM and that can cause browsers to freeze for long messages #94233\nconst MAX_MESSAGE_LENGTH = 20000;\nlet ariaContainer;\nlet alertContainer;\nlet alertContainer2;\nlet statusContainer;\nlet statusContainer2;\nexport function setARIAContainer(parent) {\n    ariaContainer = document.createElement('div');\n    ariaContainer.className = 'monaco-aria-container';\n    const createAlertContainer = () => {\n        const element = document.createElement('div');\n        element.className = 'monaco-alert';\n        element.setAttribute('role', 'alert');\n        element.setAttribute('aria-atomic', 'true');\n        ariaContainer.appendChild(element);\n        return element;\n    };\n    alertContainer = createAlertContainer();\n    alertContainer2 = createAlertContainer();\n    const createStatusContainer = () => {\n        const element = document.createElement('div');\n        element.className = 'monaco-status';\n        element.setAttribute('aria-live', 'polite');\n        element.setAttribute('aria-atomic', 'true');\n        ariaContainer.appendChild(element);\n        return element;\n    };\n    statusContainer = createStatusContainer();\n    statusContainer2 = createStatusContainer();\n    parent.appendChild(ariaContainer);\n}\n/**\n * Given the provided message, will make sure that it is read as alert to screen readers.\n */\nexport function alert(msg) {\n    if (!ariaContainer) {\n        return;\n    }\n    // Use alternate containers such that duplicated messages get read out by screen readers #99466\n    if (alertContainer.textContent !== msg) {\n        dom.clearNode(alertContainer2);\n        insertMessage(alertContainer, msg);\n    }\n    else {\n        dom.clearNode(alertContainer);\n        insertMessage(alertContainer2, msg);\n    }\n}\n/**\n * Given the provided message, will make sure that it is read as status to screen readers.\n */\nexport function status(msg) {\n    if (!ariaContainer) {\n        return;\n    }\n    if (statusContainer.textContent !== msg) {\n        dom.clearNode(statusContainer2);\n        insertMessage(statusContainer, msg);\n    }\n    else {\n        dom.clearNode(statusContainer);\n        insertMessage(statusContainer2, msg);\n    }\n}\nfunction insertMessage(target, msg) {\n    dom.clearNode(target);\n    if (msg.length > MAX_MESSAGE_LENGTH) {\n        msg = msg.substr(0, MAX_MESSAGE_LENGTH);\n    }\n    target.textContent = msg;\n    // See https://www.paciellogroup.com/blog/2012/06/html5-accessibility-chops-aria-rolealert-browser-support/\n    target.style.visibility = 'hidden';\n    target.style.visibility = 'visible';\n}\n","import { addDisposableListener, EventHelper, EventType, reset, trackFocus } from '../../dom.js';\nimport { sanitize } from '../../dompurify/dompurify.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { renderMarkdown, renderStringAsPlaintext } from '../../markdownRenderer.js';\nimport { Gesture, EventType as TouchEventType } from '../../touch.js';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { renderLabelWithIcons } from '../iconLabel/iconLabels.js';\nimport { Color } from '../../../common/color.js';\nimport { Emitter } from '../../../common/event.js';\nimport { isMarkdownString, markdownStringEqual } from '../../../common/htmlContent.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport './button.css';\nimport { getBaseLayerHoverDelegate } from '../hover/hoverDelegate2.js';\nexport const unthemedButtonStyles = {\n    buttonBackground: '#0E639C',\n    buttonHoverBackground: '#006BB3',\n    buttonSeparator: Color.white.toString(),\n    buttonForeground: Color.white.toString(),\n    buttonBorder: undefined,\n    buttonSecondaryBackground: undefined,\n    buttonSecondaryForeground: undefined,\n    buttonSecondaryHoverBackground: undefined\n};\nexport class Button extends Disposable {\n    get onDidClick() { return this._onDidClick.event; }\n    constructor(container, options) {\n        super();\n        this._label = '';\n        this._onDidClick = this._register(new Emitter());\n        this._onDidEscape = this._register(new Emitter());\n        this.options = options;\n        this._element = document.createElement('a');\n        this._element.classList.add('monaco-button');\n        this._element.tabIndex = 0;\n        this._element.setAttribute('role', 'button');\n        this._element.classList.toggle('secondary', !!options.secondary);\n        const background = options.secondary ? options.buttonSecondaryBackground : options.buttonBackground;\n        const foreground = options.secondary ? options.buttonSecondaryForeground : options.buttonForeground;\n        this._element.style.color = foreground || '';\n        this._element.style.backgroundColor = background || '';\n        if (options.supportShortLabel) {\n            this._labelShortElement = document.createElement('div');\n            this._labelShortElement.classList.add('monaco-button-label-short');\n            this._element.appendChild(this._labelShortElement);\n            this._labelElement = document.createElement('div');\n            this._labelElement.classList.add('monaco-button-label');\n            this._element.appendChild(this._labelElement);\n            this._element.classList.add('monaco-text-button-with-short-label');\n        }\n        if (typeof options.title === 'string') {\n            this.setTitle(options.title);\n        }\n        if (typeof options.ariaLabel === 'string') {\n            this._element.setAttribute('aria-label', options.ariaLabel);\n        }\n        container.appendChild(this._element);\n        this._register(Gesture.addTarget(this._element));\n        [EventType.CLICK, TouchEventType.Tap].forEach(eventType => {\n            this._register(addDisposableListener(this._element, eventType, e => {\n                if (!this.enabled) {\n                    EventHelper.stop(e);\n                    return;\n                }\n                this._onDidClick.fire(e);\n            }));\n        });\n        this._register(addDisposableListener(this._element, EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            let eventHandled = false;\n            if (this.enabled && (event.equals(3 /* KeyCode.Enter */) || event.equals(10 /* KeyCode.Space */))) {\n                this._onDidClick.fire(e);\n                eventHandled = true;\n            }\n            else if (event.equals(9 /* KeyCode.Escape */)) {\n                this._onDidEscape.fire(e);\n                this._element.blur();\n                eventHandled = true;\n            }\n            if (eventHandled) {\n                EventHelper.stop(event, true);\n            }\n        }));\n        this._register(addDisposableListener(this._element, EventType.MOUSE_OVER, e => {\n            if (!this._element.classList.contains('disabled')) {\n                this.updateBackground(true);\n            }\n        }));\n        this._register(addDisposableListener(this._element, EventType.MOUSE_OUT, e => {\n            this.updateBackground(false); // restore standard styles\n        }));\n        // Also set hover background when button is focused for feedback\n        this.focusTracker = this._register(trackFocus(this._element));\n        this._register(this.focusTracker.onDidFocus(() => { if (this.enabled) {\n            this.updateBackground(true);\n        } }));\n        this._register(this.focusTracker.onDidBlur(() => { if (this.enabled) {\n            this.updateBackground(false);\n        } }));\n    }\n    dispose() {\n        super.dispose();\n        this._element.remove();\n    }\n    getContentElements(content) {\n        const elements = [];\n        for (let segment of renderLabelWithIcons(content)) {\n            if (typeof (segment) === 'string') {\n                segment = segment.trim();\n                // Ignore empty segment\n                if (segment === '') {\n                    continue;\n                }\n                // Convert string segments to <span> nodes\n                const node = document.createElement('span');\n                node.textContent = segment;\n                elements.push(node);\n            }\n            else {\n                elements.push(segment);\n            }\n        }\n        return elements;\n    }\n    updateBackground(hover) {\n        let background;\n        if (this.options.secondary) {\n            background = hover ? this.options.buttonSecondaryHoverBackground : this.options.buttonSecondaryBackground;\n        }\n        else {\n            background = hover ? this.options.buttonHoverBackground : this.options.buttonBackground;\n        }\n        if (background) {\n            this._element.style.backgroundColor = background;\n        }\n    }\n    get element() {\n        return this._element;\n    }\n    set label(value) {\n        var _a;\n        if (this._label === value) {\n            return;\n        }\n        if (isMarkdownString(this._label) && isMarkdownString(value) && markdownStringEqual(this._label, value)) {\n            return;\n        }\n        this._element.classList.add('monaco-text-button');\n        const labelElement = this.options.supportShortLabel ? this._labelElement : this._element;\n        if (isMarkdownString(value)) {\n            const rendered = renderMarkdown(value, { inline: true });\n            rendered.dispose();\n            // Don't include outer `<p>`\n            const root = (_a = rendered.element.querySelector('p')) === null || _a === void 0 ? void 0 : _a.innerHTML;\n            if (root) {\n                // Only allow a very limited set of inline html tags\n                const sanitized = sanitize(root, { ADD_TAGS: ['b', 'i', 'u', 'code', 'span'], ALLOWED_ATTR: ['class'], RETURN_TRUSTED_TYPE: true });\n                labelElement.innerHTML = sanitized;\n            }\n            else {\n                reset(labelElement);\n            }\n        }\n        else {\n            if (this.options.supportIcons) {\n                reset(labelElement, ...this.getContentElements(value));\n            }\n            else {\n                labelElement.textContent = value;\n            }\n        }\n        let title = '';\n        if (typeof this.options.title === 'string') {\n            title = this.options.title;\n        }\n        else if (this.options.title) {\n            title = renderStringAsPlaintext(value);\n        }\n        this.setTitle(title);\n        if (typeof this.options.ariaLabel === 'string') {\n            this._element.setAttribute('aria-label', this.options.ariaLabel);\n        }\n        else if (this.options.ariaLabel) {\n            this._element.setAttribute('aria-label', title);\n        }\n        this._label = value;\n    }\n    get label() {\n        return this._label;\n    }\n    set icon(icon) {\n        this._element.classList.add(...ThemeIcon.asClassNameArray(icon));\n    }\n    set enabled(value) {\n        if (value) {\n            this._element.classList.remove('disabled');\n            this._element.setAttribute('aria-disabled', String(false));\n            this._element.tabIndex = 0;\n        }\n        else {\n            this._element.classList.add('disabled');\n            this._element.setAttribute('aria-disabled', String(true));\n        }\n    }\n    get enabled() {\n        return !this._element.classList.contains('disabled');\n    }\n    setTitle(title) {\n        var _a;\n        if (!this._hover && title !== '') {\n            this._hover = this._register(getBaseLayerHoverDelegate().setupUpdatableHover((_a = this.options.hoverDelegate) !== null && _a !== void 0 ? _a : getDefaultHoverDelegate('mouse'), this._element, title));\n        }\n        else if (this._hover) {\n            this._hover.update(title);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { BrowserFeatures } from '../../canIUse.js';\nimport * as DOM from '../../dom.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../common/lifecycle.js';\nimport * as platform from '../../../common/platform.js';\nimport { Range } from '../../../common/range.js';\nimport './contextview.css';\nexport function isAnchor(obj) {\n    const anchor = obj;\n    return !!anchor && typeof anchor.x === 'number' && typeof anchor.y === 'number';\n}\nexport var LayoutAnchorMode;\n(function (LayoutAnchorMode) {\n    LayoutAnchorMode[LayoutAnchorMode[\"AVOID\"] = 0] = \"AVOID\";\n    LayoutAnchorMode[LayoutAnchorMode[\"ALIGN\"] = 1] = \"ALIGN\";\n})(LayoutAnchorMode || (LayoutAnchorMode = {}));\n/**\n * Lays out a one dimensional view next to an anchor in a viewport.\n *\n * @returns The view offset within the viewport.\n */\nexport function layout(viewportSize, viewSize, anchor) {\n    const layoutAfterAnchorBoundary = anchor.mode === LayoutAnchorMode.ALIGN ? anchor.offset : anchor.offset + anchor.size;\n    const layoutBeforeAnchorBoundary = anchor.mode === LayoutAnchorMode.ALIGN ? anchor.offset + anchor.size : anchor.offset;\n    if (anchor.position === 0 /* LayoutAnchorPosition.Before */) {\n        if (viewSize <= viewportSize - layoutAfterAnchorBoundary) {\n            return layoutAfterAnchorBoundary; // happy case, lay it out after the anchor\n        }\n        if (viewSize <= layoutBeforeAnchorBoundary) {\n            return layoutBeforeAnchorBoundary - viewSize; // ok case, lay it out before the anchor\n        }\n        return Math.max(viewportSize - viewSize, 0); // sad case, lay it over the anchor\n    }\n    else {\n        if (viewSize <= layoutBeforeAnchorBoundary) {\n            return layoutBeforeAnchorBoundary - viewSize; // happy case, lay it out before the anchor\n        }\n        if (viewSize <= viewportSize - layoutAfterAnchorBoundary) {\n            return layoutAfterAnchorBoundary; // ok case, lay it out after the anchor\n        }\n        return 0; // sad case, lay it over the anchor\n    }\n}\nexport class ContextView extends Disposable {\n    constructor(container, domPosition) {\n        super();\n        this.container = null;\n        this.useFixedPosition = false;\n        this.useShadowDOM = false;\n        this.delegate = null;\n        this.toDisposeOnClean = Disposable.None;\n        this.toDisposeOnSetContainer = Disposable.None;\n        this.shadowRoot = null;\n        this.shadowRootHostElement = null;\n        this.view = DOM.$('.context-view');\n        DOM.hide(this.view);\n        this.setContainer(container, domPosition);\n        this._register(toDisposable(() => this.setContainer(null, 1 /* ContextViewDOMPosition.ABSOLUTE */)));\n    }\n    setContainer(container, domPosition) {\n        var _a;\n        this.useFixedPosition = domPosition !== 1 /* ContextViewDOMPosition.ABSOLUTE */;\n        const usedShadowDOM = this.useShadowDOM;\n        this.useShadowDOM = domPosition === 3 /* ContextViewDOMPosition.FIXED_SHADOW */;\n        if (container === this.container && usedShadowDOM === this.useShadowDOM) {\n            return; // container is the same and no shadow DOM usage has changed\n        }\n        if (this.container) {\n            this.toDisposeOnSetContainer.dispose();\n            if (this.shadowRoot) {\n                this.shadowRoot.removeChild(this.view);\n                this.shadowRoot = null;\n                (_a = this.shadowRootHostElement) === null || _a === void 0 ? void 0 : _a.remove();\n                this.shadowRootHostElement = null;\n            }\n            else {\n                this.container.removeChild(this.view);\n            }\n            this.container = null;\n        }\n        if (container) {\n            this.container = container;\n            if (this.useShadowDOM) {\n                this.shadowRootHostElement = DOM.$('.shadow-root-host');\n                this.container.appendChild(this.shadowRootHostElement);\n                this.shadowRoot = this.shadowRootHostElement.attachShadow({ mode: 'open' });\n                const style = document.createElement('style');\n                style.textContent = SHADOW_ROOT_CSS;\n                this.shadowRoot.appendChild(style);\n                this.shadowRoot.appendChild(this.view);\n                this.shadowRoot.appendChild(DOM.$('slot'));\n            }\n            else {\n                this.container.appendChild(this.view);\n            }\n            const toDisposeOnSetContainer = new DisposableStore();\n            ContextView.BUBBLE_UP_EVENTS.forEach(event => {\n                toDisposeOnSetContainer.add(DOM.addStandardDisposableListener(this.container, event, e => {\n                    this.onDOMEvent(e, false);\n                }));\n            });\n            ContextView.BUBBLE_DOWN_EVENTS.forEach(event => {\n                toDisposeOnSetContainer.add(DOM.addStandardDisposableListener(this.container, event, e => {\n                    this.onDOMEvent(e, true);\n                }, true));\n            });\n            this.toDisposeOnSetContainer = toDisposeOnSetContainer;\n        }\n    }\n    show(delegate) {\n        var _a, _b, _c;\n        if (this.isVisible()) {\n            this.hide();\n        }\n        // Show static box\n        DOM.clearNode(this.view);\n        this.view.className = 'context-view monaco-component';\n        this.view.style.top = '0px';\n        this.view.style.left = '0px';\n        this.view.style.zIndex = `${2575 + ((_a = delegate.layer) !== null && _a !== void 0 ? _a : 0)}`;\n        this.view.style.position = this.useFixedPosition ? 'fixed' : 'absolute';\n        DOM.show(this.view);\n        // Render content\n        this.toDisposeOnClean = delegate.render(this.view) || Disposable.None;\n        // Set active delegate\n        this.delegate = delegate;\n        // Layout\n        this.doLayout();\n        // Focus\n        (_c = (_b = this.delegate).focus) === null || _c === void 0 ? void 0 : _c.call(_b);\n    }\n    getViewElement() {\n        return this.view;\n    }\n    layout() {\n        var _a, _b;\n        if (!this.isVisible()) {\n            return;\n        }\n        if (this.delegate.canRelayout === false && !(platform.isIOS && BrowserFeatures.pointerEvents)) {\n            this.hide();\n            return;\n        }\n        (_b = (_a = this.delegate) === null || _a === void 0 ? void 0 : _a.layout) === null || _b === void 0 ? void 0 : _b.call(_a);\n        this.doLayout();\n    }\n    doLayout() {\n        // Check that we still have a delegate - this.delegate.layout may have hidden\n        if (!this.isVisible()) {\n            return;\n        }\n        // Get anchor\n        const anchor = this.delegate.getAnchor();\n        // Compute around\n        let around;\n        // Get the element's position and size (to anchor the view)\n        if (anchor instanceof HTMLElement) {\n            const elementPosition = DOM.getDomNodePagePosition(anchor);\n            // In areas where zoom is applied to the element or its ancestors, we need to adjust the size of the element\n            // e.g. The title bar has counter zoom behavior meaning it applies the inverse of zoom level.\n            // Window Zoom Level: 1.5, Title Bar Zoom: 1/1.5, Size Multiplier: 1.5\n            const zoom = DOM.getDomNodeZoomLevel(anchor);\n            around = {\n                top: elementPosition.top * zoom,\n                left: elementPosition.left * zoom,\n                width: elementPosition.width * zoom,\n                height: elementPosition.height * zoom\n            };\n        }\n        else if (isAnchor(anchor)) {\n            around = {\n                top: anchor.y,\n                left: anchor.x,\n                width: anchor.width || 1,\n                height: anchor.height || 2\n            };\n        }\n        else {\n            around = {\n                top: anchor.posy,\n                left: anchor.posx,\n                // We are about to position the context view where the mouse\n                // cursor is. To prevent the view being exactly under the mouse\n                // when showing and thus potentially triggering an action within,\n                // we treat the mouse location like a small sized block element.\n                width: 2,\n                height: 2\n            };\n        }\n        const viewSizeWidth = DOM.getTotalWidth(this.view);\n        const viewSizeHeight = DOM.getTotalHeight(this.view);\n        const anchorPosition = this.delegate.anchorPosition || 0 /* AnchorPosition.BELOW */;\n        const anchorAlignment = this.delegate.anchorAlignment || 0 /* AnchorAlignment.LEFT */;\n        const anchorAxisAlignment = this.delegate.anchorAxisAlignment || 0 /* AnchorAxisAlignment.VERTICAL */;\n        let top;\n        let left;\n        const activeWindow = DOM.getActiveWindow();\n        if (anchorAxisAlignment === 0 /* AnchorAxisAlignment.VERTICAL */) {\n            const verticalAnchor = { offset: around.top - activeWindow.pageYOffset, size: around.height, position: anchorPosition === 0 /* AnchorPosition.BELOW */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */ };\n            const horizontalAnchor = { offset: around.left, size: around.width, position: anchorAlignment === 0 /* AnchorAlignment.LEFT */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */, mode: LayoutAnchorMode.ALIGN };\n            top = layout(activeWindow.innerHeight, viewSizeHeight, verticalAnchor) + activeWindow.pageYOffset;\n            // if view intersects vertically with anchor,  we must avoid the anchor\n            if (Range.intersects({ start: top, end: top + viewSizeHeight }, { start: verticalAnchor.offset, end: verticalAnchor.offset + verticalAnchor.size })) {\n                horizontalAnchor.mode = LayoutAnchorMode.AVOID;\n            }\n            left = layout(activeWindow.innerWidth, viewSizeWidth, horizontalAnchor);\n        }\n        else {\n            const horizontalAnchor = { offset: around.left, size: around.width, position: anchorAlignment === 0 /* AnchorAlignment.LEFT */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */ };\n            const verticalAnchor = { offset: around.top, size: around.height, position: anchorPosition === 0 /* AnchorPosition.BELOW */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */, mode: LayoutAnchorMode.ALIGN };\n            left = layout(activeWindow.innerWidth, viewSizeWidth, horizontalAnchor);\n            // if view intersects horizontally with anchor, we must avoid the anchor\n            if (Range.intersects({ start: left, end: left + viewSizeWidth }, { start: horizontalAnchor.offset, end: horizontalAnchor.offset + horizontalAnchor.size })) {\n                verticalAnchor.mode = LayoutAnchorMode.AVOID;\n            }\n            top = layout(activeWindow.innerHeight, viewSizeHeight, verticalAnchor) + activeWindow.pageYOffset;\n        }\n        this.view.classList.remove('top', 'bottom', 'left', 'right');\n        this.view.classList.add(anchorPosition === 0 /* AnchorPosition.BELOW */ ? 'bottom' : 'top');\n        this.view.classList.add(anchorAlignment === 0 /* AnchorAlignment.LEFT */ ? 'left' : 'right');\n        this.view.classList.toggle('fixed', this.useFixedPosition);\n        const containerPosition = DOM.getDomNodePagePosition(this.container);\n        this.view.style.top = `${top - (this.useFixedPosition ? DOM.getDomNodePagePosition(this.view).top : containerPosition.top)}px`;\n        this.view.style.left = `${left - (this.useFixedPosition ? DOM.getDomNodePagePosition(this.view).left : containerPosition.left)}px`;\n        this.view.style.width = 'initial';\n    }\n    hide(data) {\n        const delegate = this.delegate;\n        this.delegate = null;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.onHide) {\n            delegate.onHide(data);\n        }\n        this.toDisposeOnClean.dispose();\n        DOM.hide(this.view);\n    }\n    isVisible() {\n        return !!this.delegate;\n    }\n    onDOMEvent(e, onCapture) {\n        if (this.delegate) {\n            if (this.delegate.onDOMEvent) {\n                this.delegate.onDOMEvent(e, DOM.getWindow(e).document.activeElement);\n            }\n            else if (onCapture && !DOM.isAncestor(e.target, this.container)) {\n                this.hide();\n            }\n        }\n    }\n    dispose() {\n        this.hide();\n        super.dispose();\n    }\n}\nContextView.BUBBLE_UP_EVENTS = ['click', 'keydown', 'focus', 'blur'];\nContextView.BUBBLE_DOWN_EVENTS = ['click'];\nconst SHADOW_ROOT_CSS = /* css */ `\n\t:host {\n\t\tall: initial; /* 1st rule so subsequent properties are reset. */\n\t}\n\n\t.codicon[class*='codicon-'] {\n\t\tfont: normal normal normal 16px/1 codicon;\n\t\tdisplay: inline-block;\n\t\ttext-decoration: none;\n\t\ttext-rendering: auto;\n\t\ttext-align: center;\n\t\t-webkit-font-smoothing: antialiased;\n\t\t-moz-osx-font-smoothing: grayscale;\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t\t-ms-user-select: none;\n\t}\n\n\t:host {\n\t\tfont-family: -apple-system, BlinkMacSystemFont, \"Segoe WPC\", \"Segoe UI\", \"HelveticaNeue-Light\", system-ui, \"Ubuntu\", \"Droid Sans\", sans-serif;\n\t}\n\n\t:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }\n\t:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, \"PingFang SC\", \"Hiragino Sans GB\", sans-serif; }\n\t:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, \"PingFang TC\", sans-serif; }\n\t:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, \"Hiragino Kaku Gothic Pro\", sans-serif; }\n\t:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, \"Nanum Gothic\", \"Apple SD Gothic Neo\", \"AppleGothic\", sans-serif; }\n\n\t:host-context(.windows) { font-family: \"Segoe WPC\", \"Segoe UI\", sans-serif; }\n\t:host-context(.windows:lang(zh-Hans)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Microsoft YaHei\", sans-serif; }\n\t:host-context(.windows:lang(zh-Hant)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Microsoft Jhenghei\", sans-serif; }\n\t:host-context(.windows:lang(ja)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Yu Gothic UI\", \"Meiryo UI\", sans-serif; }\n\t:host-context(.windows:lang(ko)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Malgun Gothic\", \"Dotom\", sans-serif; }\n\n\t:host-context(.linux) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", sans-serif; }\n\t:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans SC\", \"Source Han Sans CN\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans TC\", \"Source Han Sans TW\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(ja)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans J\", \"Source Han Sans JP\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(ko)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans K\", \"Source Han Sans JR\", \"Source Han Sans\", \"UnDotum\", \"FBaekmuk Gulim\", sans-serif; }\n`;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, append } from '../../dom.js';\nimport { format } from '../../../common/strings.js';\nimport './countBadge.css';\nexport class CountBadge {\n    constructor(container, options, styles) {\n        this.options = options;\n        this.styles = styles;\n        this.count = 0;\n        this.element = append(container, $('.monaco-count-badge'));\n        this.countFormat = this.options.countFormat || '{0}';\n        this.titleFormat = this.options.titleFormat || '';\n        this.setCount(this.options.count || 0);\n    }\n    setCount(count) {\n        this.count = count;\n        this.render();\n    }\n    setTitleFormat(titleFormat) {\n        this.titleFormat = titleFormat;\n        this.render();\n    }\n    render() {\n        var _a, _b;\n        this.element.textContent = format(this.countFormat, this.count);\n        this.element.title = format(this.titleFormat, this.count);\n        this.element.style.backgroundColor = (_a = this.styles.badgeBackground) !== null && _a !== void 0 ? _a : '';\n        this.element.style.color = (_b = this.styles.badgeForeground) !== null && _b !== void 0 ? _b : '';\n        if (this.styles.badgeBorder) {\n            this.element.style.border = `1px solid ${this.styles.badgeBorder}`;\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, append, EventHelper, EventType, isMouseEvent } from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { EventType as GestureEventType, Gesture } from '../../touch.js';\nimport { ActionRunner } from '../../../common/actions.js';\nimport { Emitter } from '../../../common/event.js';\nimport './dropdown.css';\nclass BaseDropdown extends ActionRunner {\n    constructor(container, options) {\n        super();\n        this._onDidChangeVisibility = this._register(new Emitter());\n        this.onDidChangeVisibility = this._onDidChangeVisibility.event;\n        this._element = append(container, $('.monaco-dropdown'));\n        this._label = append(this._element, $('.dropdown-label'));\n        let labelRenderer = options.labelRenderer;\n        if (!labelRenderer) {\n            labelRenderer = (container) => {\n                container.textContent = options.label || '';\n                return null;\n            };\n        }\n        for (const event of [EventType.CLICK, EventType.MOUSE_DOWN, GestureEventType.Tap]) {\n            this._register(addDisposableListener(this.element, event, e => EventHelper.stop(e, true))); // prevent default click behaviour to trigger\n        }\n        for (const event of [EventType.MOUSE_DOWN, GestureEventType.Tap]) {\n            this._register(addDisposableListener(this._label, event, e => {\n                if (isMouseEvent(e) && (e.detail > 1 || e.button !== 0)) {\n                    // prevent right click trigger to allow separate context menu (https://github.com/microsoft/vscode/issues/151064)\n                    // prevent multiple clicks to open multiple context menus (https://github.com/microsoft/vscode/issues/41363)\n                    return;\n                }\n                if (this.visible) {\n                    this.hide();\n                }\n                else {\n                    this.show();\n                }\n            }));\n        }\n        this._register(addDisposableListener(this._label, EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(3 /* KeyCode.Enter */) || event.equals(10 /* KeyCode.Space */)) {\n                EventHelper.stop(e, true); // https://github.com/microsoft/vscode/issues/57997\n                if (this.visible) {\n                    this.hide();\n                }\n                else {\n                    this.show();\n                }\n            }\n        }));\n        const cleanupFn = labelRenderer(this._label);\n        if (cleanupFn) {\n            this._register(cleanupFn);\n        }\n        this._register(Gesture.addTarget(this._label));\n    }\n    get element() {\n        return this._element;\n    }\n    show() {\n        if (!this.visible) {\n            this.visible = true;\n            this._onDidChangeVisibility.fire(true);\n        }\n    }\n    hide() {\n        if (this.visible) {\n            this.visible = false;\n            this._onDidChangeVisibility.fire(false);\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.hide();\n        if (this.boxContainer) {\n            this.boxContainer.remove();\n            this.boxContainer = undefined;\n        }\n        if (this.contents) {\n            this.contents.remove();\n            this.contents = undefined;\n        }\n        if (this._label) {\n            this._label.remove();\n            this._label = undefined;\n        }\n    }\n}\nexport class DropdownMenu extends BaseDropdown {\n    constructor(container, _options) {\n        super(container, _options);\n        this._options = _options;\n        this._actions = [];\n        this.actions = _options.actions || [];\n    }\n    set menuOptions(options) {\n        this._menuOptions = options;\n    }\n    get menuOptions() {\n        return this._menuOptions;\n    }\n    get actions() {\n        if (this._options.actionProvider) {\n            return this._options.actionProvider.getActions();\n        }\n        return this._actions;\n    }\n    set actions(actions) {\n        this._actions = actions;\n    }\n    show() {\n        super.show();\n        this.element.classList.add('active');\n        this._options.contextMenuProvider.showContextMenu({\n            getAnchor: () => this.element,\n            getActions: () => this.actions,\n            getActionsContext: () => this.menuOptions ? this.menuOptions.context : null,\n            getActionViewItem: (action, options) => this.menuOptions && this.menuOptions.actionViewItemProvider ? this.menuOptions.actionViewItemProvider(action, options) : undefined,\n            getKeyBinding: action => this.menuOptions && this.menuOptions.getKeyBinding ? this.menuOptions.getKeyBinding(action) : undefined,\n            getMenuClassName: () => this._options.menuClassName || '',\n            onHide: () => this.onHide(),\n            actionRunner: this.menuOptions ? this.menuOptions.actionRunner : undefined,\n            anchorAlignment: this.menuOptions ? this.menuOptions.anchorAlignment : 0 /* AnchorAlignment.LEFT */,\n            domForShadowRoot: this._options.menuAsChild ? this.element : undefined,\n            skipTelemetry: this._options.skipTelemetry\n        });\n    }\n    hide() {\n        super.hide();\n    }\n    onHide() {\n        this.hide();\n        this.element.classList.remove('active');\n    }\n}\n","import { $, append } from '../../dom.js';\nimport { BaseActionViewItem } from '../actionbar/actionViewItems.js';\nimport { DropdownMenu } from './dropdown.js';\nimport { Emitter } from '../../../common/event.js';\nimport './dropdown.css';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { getBaseLayerHoverDelegate } from '../hover/hoverDelegate2.js';\nexport class DropdownMenuActionViewItem extends BaseActionViewItem {\n    constructor(action, menuActionsOrProvider, contextMenuProvider, options = Object.create(null)) {\n        super(null, action, options);\n        this.actionItem = null;\n        this._onDidChangeVisibility = this._register(new Emitter());\n        this.onDidChangeVisibility = this._onDidChangeVisibility.event;\n        this.menuActionsOrProvider = menuActionsOrProvider;\n        this.contextMenuProvider = contextMenuProvider;\n        this.options = options;\n        if (this.options.actionRunner) {\n            this.actionRunner = this.options.actionRunner;\n        }\n    }\n    render(container) {\n        this.actionItem = container;\n        const labelRenderer = (el) => {\n            var _a;\n            this.element = append(el, $('a.action-label'));\n            let classNames = [];\n            if (typeof this.options.classNames === 'string') {\n                classNames = this.options.classNames.split(/\\s+/g).filter(s => !!s);\n            }\n            else if (this.options.classNames) {\n                classNames = this.options.classNames;\n            }\n            // todo@aeschli: remove codicon, should come through `this.options.classNames`\n            if (!classNames.find(c => c === 'icon')) {\n                classNames.push('codicon');\n            }\n            this.element.classList.add(...classNames);\n            this.element.setAttribute('role', 'button');\n            this.element.setAttribute('aria-haspopup', 'true');\n            this.element.setAttribute('aria-expanded', 'false');\n            if (this._action.label) {\n                this._register(getBaseLayerHoverDelegate().setupUpdatableHover((_a = this.options.hoverDelegate) !== null && _a !== void 0 ? _a : getDefaultHoverDelegate('mouse'), this.element, this._action.label));\n            }\n            this.element.ariaLabel = this._action.label || '';\n            return null;\n        };\n        const isActionsArray = Array.isArray(this.menuActionsOrProvider);\n        const options = {\n            contextMenuProvider: this.contextMenuProvider,\n            labelRenderer: labelRenderer,\n            menuAsChild: this.options.menuAsChild,\n            actions: isActionsArray ? this.menuActionsOrProvider : undefined,\n            actionProvider: isActionsArray ? undefined : this.menuActionsOrProvider,\n            skipTelemetry: this.options.skipTelemetry\n        };\n        this.dropdownMenu = this._register(new DropdownMenu(container, options));\n        this._register(this.dropdownMenu.onDidChangeVisibility(visible => {\n            var _a;\n            (_a = this.element) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-expanded', `${visible}`);\n            this._onDidChangeVisibility.fire(visible);\n        }));\n        this.dropdownMenu.menuOptions = {\n            actionViewItemProvider: this.options.actionViewItemProvider,\n            actionRunner: this.actionRunner,\n            getKeyBinding: this.options.keybindingProvider,\n            context: this._context\n        };\n        if (this.options.anchorAlignmentProvider) {\n            const that = this;\n            this.dropdownMenu.menuOptions = {\n                ...this.dropdownMenu.menuOptions,\n                get anchorAlignment() {\n                    return that.options.anchorAlignmentProvider();\n                }\n            };\n        }\n        this.updateTooltip();\n        this.updateEnabled();\n    }\n    getTooltip() {\n        let title = null;\n        if (this.action.tooltip) {\n            title = this.action.tooltip;\n        }\n        else if (this.action.label) {\n            title = this.action.label;\n        }\n        return title !== null && title !== void 0 ? title : undefined;\n    }\n    setActionContext(newContext) {\n        super.setActionContext(newContext);\n        if (this.dropdownMenu) {\n            if (this.dropdownMenu.menuOptions) {\n                this.dropdownMenu.menuOptions.context = newContext;\n            }\n            else {\n                this.dropdownMenu.menuOptions = { context: newContext };\n            }\n        }\n    }\n    show() {\n        var _a;\n        (_a = this.dropdownMenu) === null || _a === void 0 ? void 0 : _a.show();\n    }\n    updateEnabled() {\n        var _a, _b;\n        const disabled = !this.action.enabled;\n        (_a = this.actionItem) === null || _a === void 0 ? void 0 : _a.classList.toggle('disabled', disabled);\n        (_b = this.element) === null || _b === void 0 ? void 0 : _b.classList.toggle('disabled', disabled);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { CaseSensitiveToggle, RegexToggle, WholeWordsToggle } from './findInputToggles.js';\nimport { HistoryInputBox } from '../inputbox/inputBox.js';\nimport { Widget } from '../widget.js';\nimport { Emitter } from '../../../common/event.js';\nimport './findInput.css';\nimport * as nls from '../../../../nls.js';\nimport { DisposableStore, MutableDisposable } from '../../../common/lifecycle.js';\nimport { createInstantHoverDelegate } from '../hover/hoverDelegateFactory.js';\nconst NLS_DEFAULT_LABEL = nls.localize('defaultLabel', \"input\");\nexport class FindInput extends Widget {\n    constructor(parent, contextViewProvider, options) {\n        super();\n        this.fixFocusOnOptionClickEnabled = true;\n        this.imeSessionInProgress = false;\n        this.additionalTogglesDisposables = this._register(new MutableDisposable());\n        this.additionalToggles = [];\n        this._onDidOptionChange = this._register(new Emitter());\n        this.onDidOptionChange = this._onDidOptionChange.event;\n        this._onKeyDown = this._register(new Emitter());\n        this.onKeyDown = this._onKeyDown.event;\n        this._onMouseDown = this._register(new Emitter());\n        this.onMouseDown = this._onMouseDown.event;\n        this._onInput = this._register(new Emitter());\n        this._onKeyUp = this._register(new Emitter());\n        this._onCaseSensitiveKeyDown = this._register(new Emitter());\n        this.onCaseSensitiveKeyDown = this._onCaseSensitiveKeyDown.event;\n        this._onRegexKeyDown = this._register(new Emitter());\n        this.onRegexKeyDown = this._onRegexKeyDown.event;\n        this._lastHighlightFindOptions = 0;\n        this.placeholder = options.placeholder || '';\n        this.validation = options.validation;\n        this.label = options.label || NLS_DEFAULT_LABEL;\n        this.showCommonFindToggles = !!options.showCommonFindToggles;\n        const appendCaseSensitiveLabel = options.appendCaseSensitiveLabel || '';\n        const appendWholeWordsLabel = options.appendWholeWordsLabel || '';\n        const appendRegexLabel = options.appendRegexLabel || '';\n        const history = options.history || [];\n        const flexibleHeight = !!options.flexibleHeight;\n        const flexibleWidth = !!options.flexibleWidth;\n        const flexibleMaxHeight = options.flexibleMaxHeight;\n        this.domNode = document.createElement('div');\n        this.domNode.classList.add('monaco-findInput');\n        this.inputBox = this._register(new HistoryInputBox(this.domNode, contextViewProvider, {\n            placeholder: this.placeholder || '',\n            ariaLabel: this.label || '',\n            validationOptions: {\n                validation: this.validation\n            },\n            history,\n            showHistoryHint: options.showHistoryHint,\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight,\n            inputBoxStyles: options.inputBoxStyles,\n        }));\n        const hoverDelegate = this._register(createInstantHoverDelegate());\n        if (this.showCommonFindToggles) {\n            this.regex = this._register(new RegexToggle({\n                appendTitle: appendRegexLabel,\n                isChecked: false,\n                hoverDelegate,\n                ...options.toggleStyles\n            }));\n            this._register(this.regex.onChange(viaKeyboard => {\n                this._onDidOptionChange.fire(viaKeyboard);\n                if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n                    this.inputBox.focus();\n                }\n                this.validate();\n            }));\n            this._register(this.regex.onKeyDown(e => {\n                this._onRegexKeyDown.fire(e);\n            }));\n            this.wholeWords = this._register(new WholeWordsToggle({\n                appendTitle: appendWholeWordsLabel,\n                isChecked: false,\n                hoverDelegate,\n                ...options.toggleStyles\n            }));\n            this._register(this.wholeWords.onChange(viaKeyboard => {\n                this._onDidOptionChange.fire(viaKeyboard);\n                if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n                    this.inputBox.focus();\n                }\n                this.validate();\n            }));\n            this.caseSensitive = this._register(new CaseSensitiveToggle({\n                appendTitle: appendCaseSensitiveLabel,\n                isChecked: false,\n                hoverDelegate,\n                ...options.toggleStyles\n            }));\n            this._register(this.caseSensitive.onChange(viaKeyboard => {\n                this._onDidOptionChange.fire(viaKeyboard);\n                if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n                    this.inputBox.focus();\n                }\n                this.validate();\n            }));\n            this._register(this.caseSensitive.onKeyDown(e => {\n                this._onCaseSensitiveKeyDown.fire(e);\n            }));\n            // Arrow-Key support to navigate between options\n            const indexes = [this.caseSensitive.domNode, this.wholeWords.domNode, this.regex.domNode];\n            this.onkeydown(this.domNode, (event) => {\n                if (event.equals(15 /* KeyCode.LeftArrow */) || event.equals(17 /* KeyCode.RightArrow */) || event.equals(9 /* KeyCode.Escape */)) {\n                    const index = indexes.indexOf(this.domNode.ownerDocument.activeElement);\n                    if (index >= 0) {\n                        let newIndex = -1;\n                        if (event.equals(17 /* KeyCode.RightArrow */)) {\n                            newIndex = (index + 1) % indexes.length;\n                        }\n                        else if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                            if (index === 0) {\n                                newIndex = indexes.length - 1;\n                            }\n                            else {\n                                newIndex = index - 1;\n                            }\n                        }\n                        if (event.equals(9 /* KeyCode.Escape */)) {\n                            indexes[index].blur();\n                            this.inputBox.focus();\n                        }\n                        else if (newIndex >= 0) {\n                            indexes[newIndex].focus();\n                        }\n                        dom.EventHelper.stop(event, true);\n                    }\n                }\n            });\n        }\n        this.controls = document.createElement('div');\n        this.controls.className = 'controls';\n        this.controls.style.display = this.showCommonFindToggles ? '' : 'none';\n        if (this.caseSensitive) {\n            this.controls.append(this.caseSensitive.domNode);\n        }\n        if (this.wholeWords) {\n            this.controls.appendChild(this.wholeWords.domNode);\n        }\n        if (this.regex) {\n            this.controls.appendChild(this.regex.domNode);\n        }\n        this.setAdditionalToggles(options === null || options === void 0 ? void 0 : options.additionalToggles);\n        if (this.controls) {\n            this.domNode.appendChild(this.controls);\n        }\n        parent === null || parent === void 0 ? void 0 : parent.appendChild(this.domNode);\n        this._register(dom.addDisposableListener(this.inputBox.inputElement, 'compositionstart', (e) => {\n            this.imeSessionInProgress = true;\n        }));\n        this._register(dom.addDisposableListener(this.inputBox.inputElement, 'compositionend', (e) => {\n            this.imeSessionInProgress = false;\n            this._onInput.fire();\n        }));\n        this.onkeydown(this.inputBox.inputElement, (e) => this._onKeyDown.fire(e));\n        this.onkeyup(this.inputBox.inputElement, (e) => this._onKeyUp.fire(e));\n        this.oninput(this.inputBox.inputElement, (e) => this._onInput.fire());\n        this.onmousedown(this.inputBox.inputElement, (e) => this._onMouseDown.fire(e));\n    }\n    get onDidChange() {\n        return this.inputBox.onDidChange;\n    }\n    layout(style) {\n        this.inputBox.layout();\n        this.updateInputBoxPadding(style.collapsedFindWidget);\n    }\n    enable() {\n        var _a, _b, _c;\n        this.domNode.classList.remove('disabled');\n        this.inputBox.enable();\n        (_a = this.regex) === null || _a === void 0 ? void 0 : _a.enable();\n        (_b = this.wholeWords) === null || _b === void 0 ? void 0 : _b.enable();\n        (_c = this.caseSensitive) === null || _c === void 0 ? void 0 : _c.enable();\n        for (const toggle of this.additionalToggles) {\n            toggle.enable();\n        }\n    }\n    disable() {\n        var _a, _b, _c;\n        this.domNode.classList.add('disabled');\n        this.inputBox.disable();\n        (_a = this.regex) === null || _a === void 0 ? void 0 : _a.disable();\n        (_b = this.wholeWords) === null || _b === void 0 ? void 0 : _b.disable();\n        (_c = this.caseSensitive) === null || _c === void 0 ? void 0 : _c.disable();\n        for (const toggle of this.additionalToggles) {\n            toggle.disable();\n        }\n    }\n    setFocusInputOnOptionClick(value) {\n        this.fixFocusOnOptionClickEnabled = value;\n    }\n    setEnabled(enabled) {\n        if (enabled) {\n            this.enable();\n        }\n        else {\n            this.disable();\n        }\n    }\n    setAdditionalToggles(toggles) {\n        for (const currentToggle of this.additionalToggles) {\n            currentToggle.domNode.remove();\n        }\n        this.additionalToggles = [];\n        this.additionalTogglesDisposables.value = new DisposableStore();\n        for (const toggle of toggles !== null && toggles !== void 0 ? toggles : []) {\n            this.additionalTogglesDisposables.value.add(toggle);\n            this.controls.appendChild(toggle.domNode);\n            this.additionalTogglesDisposables.value.add(toggle.onChange(viaKeyboard => {\n                this._onDidOptionChange.fire(viaKeyboard);\n                if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n                    this.inputBox.focus();\n                }\n            }));\n            this.additionalToggles.push(toggle);\n        }\n        if (this.additionalToggles.length > 0) {\n            this.controls.style.display = '';\n        }\n        this.updateInputBoxPadding();\n    }\n    updateInputBoxPadding(controlsHidden = false) {\n        var _a, _b, _c, _d, _e, _f;\n        if (controlsHidden) {\n            this.inputBox.paddingRight = 0;\n        }\n        else {\n            this.inputBox.paddingRight =\n                (((_b = (_a = this.caseSensitive) === null || _a === void 0 ? void 0 : _a.width()) !== null && _b !== void 0 ? _b : 0) + ((_d = (_c = this.wholeWords) === null || _c === void 0 ? void 0 : _c.width()) !== null && _d !== void 0 ? _d : 0) + ((_f = (_e = this.regex) === null || _e === void 0 ? void 0 : _e.width()) !== null && _f !== void 0 ? _f : 0))\n                    + this.additionalToggles.reduce((r, t) => r + t.width(), 0);\n        }\n    }\n    getValue() {\n        return this.inputBox.value;\n    }\n    setValue(value) {\n        if (this.inputBox.value !== value) {\n            this.inputBox.value = value;\n        }\n    }\n    select() {\n        this.inputBox.select();\n    }\n    focus() {\n        this.inputBox.focus();\n    }\n    getCaseSensitive() {\n        var _a, _b;\n        return (_b = (_a = this.caseSensitive) === null || _a === void 0 ? void 0 : _a.checked) !== null && _b !== void 0 ? _b : false;\n    }\n    setCaseSensitive(value) {\n        if (this.caseSensitive) {\n            this.caseSensitive.checked = value;\n        }\n    }\n    getWholeWords() {\n        var _a, _b;\n        return (_b = (_a = this.wholeWords) === null || _a === void 0 ? void 0 : _a.checked) !== null && _b !== void 0 ? _b : false;\n    }\n    setWholeWords(value) {\n        if (this.wholeWords) {\n            this.wholeWords.checked = value;\n        }\n    }\n    getRegex() {\n        var _a, _b;\n        return (_b = (_a = this.regex) === null || _a === void 0 ? void 0 : _a.checked) !== null && _b !== void 0 ? _b : false;\n    }\n    setRegex(value) {\n        if (this.regex) {\n            this.regex.checked = value;\n            this.validate();\n        }\n    }\n    focusOnCaseSensitive() {\n        var _a;\n        (_a = this.caseSensitive) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n    highlightFindOptions() {\n        this.domNode.classList.remove('highlight-' + (this._lastHighlightFindOptions));\n        this._lastHighlightFindOptions = 1 - this._lastHighlightFindOptions;\n        this.domNode.classList.add('highlight-' + (this._lastHighlightFindOptions));\n    }\n    validate() {\n        this.inputBox.validate();\n    }\n    showMessage(message) {\n        this.inputBox.showMessage(message);\n    }\n    clearMessage() {\n        this.inputBox.hideMessage();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { Toggle } from '../toggle/toggle.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport * as nls from '../../../../nls.js';\nconst NLS_CASE_SENSITIVE_TOGGLE_LABEL = nls.localize('caseDescription', \"Match Case\");\nconst NLS_WHOLE_WORD_TOGGLE_LABEL = nls.localize('wordsDescription', \"Match Whole Word\");\nconst NLS_REGEX_TOGGLE_LABEL = nls.localize('regexDescription', \"Use Regular Expression\");\nexport class CaseSensitiveToggle extends Toggle {\n    constructor(opts) {\n        var _a;\n        super({\n            icon: Codicon.caseSensitive,\n            title: NLS_CASE_SENSITIVE_TOGGLE_LABEL + opts.appendTitle,\n            isChecked: opts.isChecked,\n            hoverDelegate: (_a = opts.hoverDelegate) !== null && _a !== void 0 ? _a : getDefaultHoverDelegate('element'),\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nexport class WholeWordsToggle extends Toggle {\n    constructor(opts) {\n        var _a;\n        super({\n            icon: Codicon.wholeWord,\n            title: NLS_WHOLE_WORD_TOGGLE_LABEL + opts.appendTitle,\n            isChecked: opts.isChecked,\n            hoverDelegate: (_a = opts.hoverDelegate) !== null && _a !== void 0 ? _a : getDefaultHoverDelegate('element'),\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nexport class RegexToggle extends Toggle {\n    constructor(opts) {\n        var _a;\n        super({\n            icon: Codicon.regex,\n            title: NLS_REGEX_TOGGLE_LABEL + opts.appendTitle,\n            isChecked: opts.isChecked,\n            hoverDelegate: (_a = opts.hoverDelegate) !== null && _a !== void 0 ? _a : getDefaultHoverDelegate('element'),\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { Toggle } from '../toggle/toggle.js';\nimport { HistoryInputBox } from '../inputbox/inputBox.js';\nimport { Widget } from '../widget.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { Emitter } from '../../../common/event.js';\nimport './findInput.css';\nimport * as nls from '../../../../nls.js';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nconst NLS_DEFAULT_LABEL = nls.localize('defaultLabel', \"input\");\nconst NLS_PRESERVE_CASE_LABEL = nls.localize('label.preserveCaseToggle', \"Preserve Case\");\nclass PreserveCaseToggle extends Toggle {\n    constructor(opts) {\n        var _a;\n        super({\n            // TODO: does this need its own icon?\n            icon: Codicon.preserveCase,\n            title: NLS_PRESERVE_CASE_LABEL + opts.appendTitle,\n            isChecked: opts.isChecked,\n            hoverDelegate: (_a = opts.hoverDelegate) !== null && _a !== void 0 ? _a : getDefaultHoverDelegate('element'),\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground,\n        });\n    }\n}\nexport class ReplaceInput extends Widget {\n    constructor(parent, contextViewProvider, _showOptionButtons, options) {\n        super();\n        this._showOptionButtons = _showOptionButtons;\n        this.fixFocusOnOptionClickEnabled = true;\n        this.cachedOptionsWidth = 0;\n        this._onDidOptionChange = this._register(new Emitter());\n        this.onDidOptionChange = this._onDidOptionChange.event;\n        this._onKeyDown = this._register(new Emitter());\n        this.onKeyDown = this._onKeyDown.event;\n        this._onMouseDown = this._register(new Emitter());\n        this._onInput = this._register(new Emitter());\n        this._onKeyUp = this._register(new Emitter());\n        this._onPreserveCaseKeyDown = this._register(new Emitter());\n        this.onPreserveCaseKeyDown = this._onPreserveCaseKeyDown.event;\n        this.contextViewProvider = contextViewProvider;\n        this.placeholder = options.placeholder || '';\n        this.validation = options.validation;\n        this.label = options.label || NLS_DEFAULT_LABEL;\n        const appendPreserveCaseLabel = options.appendPreserveCaseLabel || '';\n        const history = options.history || [];\n        const flexibleHeight = !!options.flexibleHeight;\n        const flexibleWidth = !!options.flexibleWidth;\n        const flexibleMaxHeight = options.flexibleMaxHeight;\n        this.domNode = document.createElement('div');\n        this.domNode.classList.add('monaco-findInput');\n        this.inputBox = this._register(new HistoryInputBox(this.domNode, this.contextViewProvider, {\n            ariaLabel: this.label || '',\n            placeholder: this.placeholder || '',\n            validationOptions: {\n                validation: this.validation\n            },\n            history,\n            showHistoryHint: options.showHistoryHint,\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight,\n            inputBoxStyles: options.inputBoxStyles\n        }));\n        this.preserveCase = this._register(new PreserveCaseToggle({\n            appendTitle: appendPreserveCaseLabel,\n            isChecked: false,\n            ...options.toggleStyles\n        }));\n        this._register(this.preserveCase.onChange(viaKeyboard => {\n            this._onDidOptionChange.fire(viaKeyboard);\n            if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n                this.inputBox.focus();\n            }\n            this.validate();\n        }));\n        this._register(this.preserveCase.onKeyDown(e => {\n            this._onPreserveCaseKeyDown.fire(e);\n        }));\n        if (this._showOptionButtons) {\n            this.cachedOptionsWidth = this.preserveCase.width();\n        }\n        else {\n            this.cachedOptionsWidth = 0;\n        }\n        // Arrow-Key support to navigate between options\n        const indexes = [this.preserveCase.domNode];\n        this.onkeydown(this.domNode, (event) => {\n            if (event.equals(15 /* KeyCode.LeftArrow */) || event.equals(17 /* KeyCode.RightArrow */) || event.equals(9 /* KeyCode.Escape */)) {\n                const index = indexes.indexOf(this.domNode.ownerDocument.activeElement);\n                if (index >= 0) {\n                    let newIndex = -1;\n                    if (event.equals(17 /* KeyCode.RightArrow */)) {\n                        newIndex = (index + 1) % indexes.length;\n                    }\n                    else if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                        if (index === 0) {\n                            newIndex = indexes.length - 1;\n                        }\n                        else {\n                            newIndex = index - 1;\n                        }\n                    }\n                    if (event.equals(9 /* KeyCode.Escape */)) {\n                        indexes[index].blur();\n                        this.inputBox.focus();\n                    }\n                    else if (newIndex >= 0) {\n                        indexes[newIndex].focus();\n                    }\n                    dom.EventHelper.stop(event, true);\n                }\n            }\n        });\n        const controls = document.createElement('div');\n        controls.className = 'controls';\n        controls.style.display = this._showOptionButtons ? 'block' : 'none';\n        controls.appendChild(this.preserveCase.domNode);\n        this.domNode.appendChild(controls);\n        parent === null || parent === void 0 ? void 0 : parent.appendChild(this.domNode);\n        this.onkeydown(this.inputBox.inputElement, (e) => this._onKeyDown.fire(e));\n        this.onkeyup(this.inputBox.inputElement, (e) => this._onKeyUp.fire(e));\n        this.oninput(this.inputBox.inputElement, (e) => this._onInput.fire());\n        this.onmousedown(this.inputBox.inputElement, (e) => this._onMouseDown.fire(e));\n    }\n    enable() {\n        this.domNode.classList.remove('disabled');\n        this.inputBox.enable();\n        this.preserveCase.enable();\n    }\n    disable() {\n        this.domNode.classList.add('disabled');\n        this.inputBox.disable();\n        this.preserveCase.disable();\n    }\n    setEnabled(enabled) {\n        if (enabled) {\n            this.enable();\n        }\n        else {\n            this.disable();\n        }\n    }\n    select() {\n        this.inputBox.select();\n    }\n    focus() {\n        this.inputBox.focus();\n    }\n    getPreserveCase() {\n        return this.preserveCase.checked;\n    }\n    setPreserveCase(value) {\n        this.preserveCase.checked = value;\n    }\n    focusOnPreserve() {\n        this.preserveCase.focus();\n    }\n    validate() {\n        var _a;\n        (_a = this.inputBox) === null || _a === void 0 ? void 0 : _a.validate();\n    }\n    set width(newWidth) {\n        this.inputBox.paddingRight = this.cachedOptionsWidth;\n        this.domNode.style.width = newWidth + 'px';\n    }\n    dispose() {\n        super.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { getBaseLayerHoverDelegate } from '../hover/hoverDelegate2.js';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { renderLabelWithIcons } from '../iconLabel/iconLabels.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport * as objects from '../../../common/objects.js';\n/**\n * A widget which can render a label with substring highlights, often\n * originating from a filter function like the fuzzy matcher.\n */\nexport class HighlightedLabel extends Disposable {\n    /**\n     * Create a new {@link HighlightedLabel}.\n     *\n     * @param container The parent container to append to.\n     */\n    constructor(container, options) {\n        var _a;\n        super();\n        this.options = options;\n        this.text = '';\n        this.title = '';\n        this.highlights = [];\n        this.didEverRender = false;\n        this.supportIcons = (_a = options === null || options === void 0 ? void 0 : options.supportIcons) !== null && _a !== void 0 ? _a : false;\n        this.domNode = dom.append(container, dom.$('span.monaco-highlighted-label'));\n    }\n    /**\n     * The label's DOM node.\n     */\n    get element() {\n        return this.domNode;\n    }\n    /**\n     * Set the label and highlights.\n     *\n     * @param text The label to display.\n     * @param highlights The ranges to highlight.\n     * @param title An optional title for the hover tooltip.\n     * @param escapeNewLines Whether to escape new lines.\n     * @returns\n     */\n    set(text, highlights = [], title = '', escapeNewLines) {\n        if (!text) {\n            text = '';\n        }\n        if (escapeNewLines) {\n            // adjusts highlights inplace\n            text = HighlightedLabel.escapeNewLines(text, highlights);\n        }\n        if (this.didEverRender && this.text === text && this.title === title && objects.equals(this.highlights, highlights)) {\n            return;\n        }\n        this.text = text;\n        this.title = title;\n        this.highlights = highlights;\n        this.render();\n    }\n    render() {\n        var _a, _b, _c, _d;\n        const children = [];\n        let pos = 0;\n        for (const highlight of this.highlights) {\n            if (highlight.end === highlight.start) {\n                continue;\n            }\n            if (pos < highlight.start) {\n                const substring = this.text.substring(pos, highlight.start);\n                if (this.supportIcons) {\n                    children.push(...renderLabelWithIcons(substring));\n                }\n                else {\n                    children.push(substring);\n                }\n                pos = highlight.start;\n            }\n            const substring = this.text.substring(pos, highlight.end);\n            const element = dom.$('span.highlight', undefined, ...this.supportIcons ? renderLabelWithIcons(substring) : [substring]);\n            if (highlight.extraClasses) {\n                element.classList.add(...highlight.extraClasses);\n            }\n            children.push(element);\n            pos = highlight.end;\n        }\n        if (pos < this.text.length) {\n            const substring = this.text.substring(pos);\n            if (this.supportIcons) {\n                children.push(...renderLabelWithIcons(substring));\n            }\n            else {\n                children.push(substring);\n            }\n        }\n        dom.reset(this.domNode, ...children);\n        if ((_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.hoverDelegate) === null || _b === void 0 ? void 0 : _b.showNativeHover) {\n            /* While custom hover is not inside custom hover */\n            this.domNode.title = this.title;\n        }\n        else {\n            if (!this.customHover && this.title !== '') {\n                const hoverDelegate = (_d = (_c = this.options) === null || _c === void 0 ? void 0 : _c.hoverDelegate) !== null && _d !== void 0 ? _d : getDefaultHoverDelegate('mouse');\n                this.customHover = this._register(getBaseLayerHoverDelegate().setupUpdatableHover(hoverDelegate, this.domNode, this.title));\n            }\n            else if (this.customHover) {\n                this.customHover.update(this.title);\n            }\n        }\n        this.didEverRender = true;\n    }\n    static escapeNewLines(text, highlights) {\n        let total = 0;\n        let extra = 0;\n        return text.replace(/\\r\\n|\\r|\\n/g, (match, offset) => {\n            extra = match === '\\r\\n' ? -1 : 0;\n            offset += total;\n            for (const highlight of highlights) {\n                if (highlight.end <= offset) {\n                    continue;\n                }\n                if (highlight.start >= offset) {\n                    highlight.start += extra;\n                }\n                if (highlight.end >= offset) {\n                    highlight.end += extra;\n                }\n            }\n            total += extra;\n            return '\\u23CE';\n        });\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nlet baseHoverDelegate = {\n    showHover: () => undefined,\n    hideHover: () => undefined,\n    showAndFocusLastHover: () => undefined,\n    setupUpdatableHover: () => null,\n};\n/**\n * Sets the hover delegate for use **only in the `base/` layer**.\n */\nexport function setBaseLayerHoverDelegate(hoverDelegate) {\n    baseHoverDelegate = hoverDelegate;\n}\n/**\n * Gets the hover delegate for use **only in the `base/` layer**.\n *\n * Since the hover service depends on various platform services, this delegate essentially bypasses\n * the standard dependency injection mechanism by injecting a global hover service at start up. The\n * only reason this should be used is if `IHoverService` is not available.\n */\nexport function getBaseLayerHoverDelegate() {\n    return baseHoverDelegate;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Lazy } from '../../../common/lazy.js';\nconst nullHoverDelegateFactory = () => ({\n    get delay() { return -1; },\n    dispose: () => { },\n    showHover: () => { return undefined; },\n});\nlet hoverDelegateFactory = nullHoverDelegateFactory;\nconst defaultHoverDelegateMouse = new Lazy(() => hoverDelegateFactory('mouse', false));\nconst defaultHoverDelegateElement = new Lazy(() => hoverDelegateFactory('element', false));\n// TODO: Remove when getDefaultHoverDelegate is no longer used\nexport function setHoverDelegateFactory(hoverDelegateProvider) {\n    hoverDelegateFactory = hoverDelegateProvider;\n}\n// TODO: Refine type for use in new IHoverService interface\nexport function getDefaultHoverDelegate(placement) {\n    if (placement === 'element') {\n        return defaultHoverDelegateElement.value;\n    }\n    return defaultHoverDelegateMouse.value;\n}\n// TODO: Create equivalent in IHoverService\nexport function createInstantHoverDelegate() {\n    // Creates a hover delegate with instant hover enabled.\n    // This hover belongs to the consumer and requires the them to dispose it.\n    // Instant hover only makes sense for 'element' placement.\n    return hoverDelegateFactory('element', true);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport './hoverWidget.css';\nimport { localize } from '../../../../nls.js';\nconst $ = dom.$;\nexport class HoverWidget extends Disposable {\n    constructor() {\n        super();\n        this.containerDomNode = document.createElement('div');\n        this.containerDomNode.className = 'monaco-hover';\n        this.containerDomNode.tabIndex = 0;\n        this.containerDomNode.setAttribute('role', 'tooltip');\n        this.contentsDomNode = document.createElement('div');\n        this.contentsDomNode.className = 'monaco-hover-content';\n        this.scrollbar = this._register(new DomScrollableElement(this.contentsDomNode, {\n            consumeMouseWheelIfScrollbarIsNeeded: true\n        }));\n        this.containerDomNode.appendChild(this.scrollbar.getDomNode());\n    }\n    onContentsChanged() {\n        this.scrollbar.scanDomNode();\n    }\n}\nexport class HoverAction extends Disposable {\n    static render(parent, actionOptions, keybindingLabel) {\n        return new HoverAction(parent, actionOptions, keybindingLabel);\n    }\n    constructor(parent, actionOptions, keybindingLabel) {\n        super();\n        this.actionContainer = dom.append(parent, $('div.action-container'));\n        this.actionContainer.setAttribute('tabindex', '0');\n        this.action = dom.append(this.actionContainer, $('a.action'));\n        this.action.setAttribute('role', 'button');\n        if (actionOptions.iconClass) {\n            dom.append(this.action, $(`span.icon.${actionOptions.iconClass}`));\n        }\n        const label = dom.append(this.action, $('span'));\n        label.textContent = keybindingLabel ? `${actionOptions.label} (${keybindingLabel})` : actionOptions.label;\n        this._store.add(new ClickAction(this.actionContainer, actionOptions.run));\n        this._store.add(new KeyDownAction(this.actionContainer, actionOptions.run, [3 /* KeyCode.Enter */, 10 /* KeyCode.Space */]));\n        this.setEnabled(true);\n    }\n    setEnabled(enabled) {\n        if (enabled) {\n            this.actionContainer.classList.remove('disabled');\n            this.actionContainer.removeAttribute('aria-disabled');\n        }\n        else {\n            this.actionContainer.classList.add('disabled');\n            this.actionContainer.setAttribute('aria-disabled', 'true');\n        }\n    }\n}\nexport function getHoverAccessibleViewHint(shouldHaveHint, keybinding) {\n    return shouldHaveHint && keybinding ? localize('acessibleViewHint', \"Inspect this in the accessible view with {0}.\", keybinding) : shouldHaveHint ? localize('acessibleViewHintNoKbOpen', \"Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding.\") : '';\n}\nexport class ClickAction extends Disposable {\n    constructor(container, run) {\n        super();\n        this._register(dom.addDisposableListener(container, dom.EventType.CLICK, e => {\n            e.stopPropagation();\n            e.preventDefault();\n            run(container);\n        }));\n    }\n}\nexport class KeyDownAction extends Disposable {\n    constructor(container, run, keyCodes) {\n        super();\n        this._register(dom.addDisposableListener(container, dom.EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (keyCodes.some(keyCode => event.equals(keyCode))) {\n                e.stopPropagation();\n                e.preventDefault();\n                run(container);\n            }\n        }));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './iconlabel.css';\nimport * as dom from '../../dom.js';\nimport { HighlightedLabel } from '../highlightedlabel/highlightedLabel.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { equals } from '../../../common/objects.js';\nimport { Range } from '../../../common/range.js';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { getBaseLayerHoverDelegate } from '../hover/hoverDelegate2.js';\nimport { isString } from '../../../common/types.js';\nimport { stripIcons } from '../../../common/iconLabels.js';\nclass FastLabelNode {\n    constructor(_element) {\n        this._element = _element;\n    }\n    get element() {\n        return this._element;\n    }\n    set textContent(content) {\n        if (this.disposed || content === this._textContent) {\n            return;\n        }\n        this._textContent = content;\n        this._element.textContent = content;\n    }\n    set className(className) {\n        if (this.disposed || className === this._className) {\n            return;\n        }\n        this._className = className;\n        this._element.className = className;\n    }\n    set empty(empty) {\n        if (this.disposed || empty === this._empty) {\n            return;\n        }\n        this._empty = empty;\n        this._element.style.marginLeft = empty ? '0' : '';\n    }\n    dispose() {\n        this.disposed = true;\n    }\n}\nexport class IconLabel extends Disposable {\n    constructor(container, options) {\n        var _a;\n        super();\n        this.customHovers = new Map();\n        this.creationOptions = options;\n        this.domNode = this._register(new FastLabelNode(dom.append(container, dom.$('.monaco-icon-label'))));\n        this.labelContainer = dom.append(this.domNode.element, dom.$('.monaco-icon-label-container'));\n        this.nameContainer = dom.append(this.labelContainer, dom.$('span.monaco-icon-name-container'));\n        if ((options === null || options === void 0 ? void 0 : options.supportHighlights) || (options === null || options === void 0 ? void 0 : options.supportIcons)) {\n            this.nameNode = this._register(new LabelWithHighlights(this.nameContainer, !!options.supportIcons));\n        }\n        else {\n            this.nameNode = new Label(this.nameContainer);\n        }\n        this.hoverDelegate = (_a = options === null || options === void 0 ? void 0 : options.hoverDelegate) !== null && _a !== void 0 ? _a : getDefaultHoverDelegate('mouse');\n    }\n    get element() {\n        return this.domNode.element;\n    }\n    setLabel(label, description, options) {\n        var _a;\n        const labelClasses = ['monaco-icon-label'];\n        const containerClasses = ['monaco-icon-label-container'];\n        let ariaLabel = '';\n        if (options) {\n            if (options.extraClasses) {\n                labelClasses.push(...options.extraClasses);\n            }\n            if (options.italic) {\n                labelClasses.push('italic');\n            }\n            if (options.strikethrough) {\n                labelClasses.push('strikethrough');\n            }\n            if (options.disabledCommand) {\n                containerClasses.push('disabled');\n            }\n            if (options.title) {\n                if (typeof options.title === 'string') {\n                    ariaLabel += options.title;\n                }\n                else {\n                    ariaLabel += label;\n                }\n            }\n        }\n        this.domNode.className = labelClasses.join(' ');\n        this.domNode.element.setAttribute('aria-label', ariaLabel);\n        this.labelContainer.className = containerClasses.join(' ');\n        this.setupHover((options === null || options === void 0 ? void 0 : options.descriptionTitle) ? this.labelContainer : this.element, options === null || options === void 0 ? void 0 : options.title);\n        this.nameNode.setLabel(label, options);\n        if (description || this.descriptionNode) {\n            const descriptionNode = this.getOrCreateDescriptionNode();\n            if (descriptionNode instanceof HighlightedLabel) {\n                descriptionNode.set(description || '', options ? options.descriptionMatches : undefined, undefined, options === null || options === void 0 ? void 0 : options.labelEscapeNewLines);\n                this.setupHover(descriptionNode.element, options === null || options === void 0 ? void 0 : options.descriptionTitle);\n            }\n            else {\n                descriptionNode.textContent = description && (options === null || options === void 0 ? void 0 : options.labelEscapeNewLines) ? HighlightedLabel.escapeNewLines(description, []) : (description || '');\n                this.setupHover(descriptionNode.element, (options === null || options === void 0 ? void 0 : options.descriptionTitle) || '');\n                descriptionNode.empty = !description;\n            }\n        }\n        if ((options === null || options === void 0 ? void 0 : options.suffix) || this.suffixNode) {\n            const suffixNode = this.getOrCreateSuffixNode();\n            suffixNode.textContent = (_a = options === null || options === void 0 ? void 0 : options.suffix) !== null && _a !== void 0 ? _a : '';\n        }\n    }\n    setupHover(htmlElement, tooltip) {\n        const previousCustomHover = this.customHovers.get(htmlElement);\n        if (previousCustomHover) {\n            previousCustomHover.dispose();\n            this.customHovers.delete(htmlElement);\n        }\n        if (!tooltip) {\n            htmlElement.removeAttribute('title');\n            return;\n        }\n        if (this.hoverDelegate.showNativeHover) {\n            function setupNativeHover(htmlElement, tooltip) {\n                if (isString(tooltip)) {\n                    // Icons don't render in the native hover so we strip them out\n                    htmlElement.title = stripIcons(tooltip);\n                }\n                else if (tooltip === null || tooltip === void 0 ? void 0 : tooltip.markdownNotSupportedFallback) {\n                    htmlElement.title = tooltip.markdownNotSupportedFallback;\n                }\n                else {\n                    htmlElement.removeAttribute('title');\n                }\n            }\n            setupNativeHover(htmlElement, tooltip);\n        }\n        else {\n            const hoverDisposable = getBaseLayerHoverDelegate().setupUpdatableHover(this.hoverDelegate, htmlElement, tooltip);\n            if (hoverDisposable) {\n                this.customHovers.set(htmlElement, hoverDisposable);\n            }\n        }\n    }\n    dispose() {\n        super.dispose();\n        for (const disposable of this.customHovers.values()) {\n            disposable.dispose();\n        }\n        this.customHovers.clear();\n    }\n    getOrCreateSuffixNode() {\n        if (!this.suffixNode) {\n            const suffixContainer = this._register(new FastLabelNode(dom.after(this.nameContainer, dom.$('span.monaco-icon-suffix-container'))));\n            this.suffixNode = this._register(new FastLabelNode(dom.append(suffixContainer.element, dom.$('span.label-suffix'))));\n        }\n        return this.suffixNode;\n    }\n    getOrCreateDescriptionNode() {\n        var _a;\n        if (!this.descriptionNode) {\n            const descriptionContainer = this._register(new FastLabelNode(dom.append(this.labelContainer, dom.$('span.monaco-icon-description-container'))));\n            if ((_a = this.creationOptions) === null || _a === void 0 ? void 0 : _a.supportDescriptionHighlights) {\n                this.descriptionNode = this._register(new HighlightedLabel(dom.append(descriptionContainer.element, dom.$('span.label-description')), { supportIcons: !!this.creationOptions.supportIcons }));\n            }\n            else {\n                this.descriptionNode = this._register(new FastLabelNode(dom.append(descriptionContainer.element, dom.$('span.label-description'))));\n            }\n        }\n        return this.descriptionNode;\n    }\n}\nclass Label {\n    constructor(container) {\n        this.container = container;\n        this.label = undefined;\n        this.singleLabel = undefined;\n    }\n    setLabel(label, options) {\n        if (this.label === label && equals(this.options, options)) {\n            return;\n        }\n        this.label = label;\n        this.options = options;\n        if (typeof label === 'string') {\n            if (!this.singleLabel) {\n                this.container.innerText = '';\n                this.container.classList.remove('multiple');\n                this.singleLabel = dom.append(this.container, dom.$('a.label-name', { id: options === null || options === void 0 ? void 0 : options.domId }));\n            }\n            this.singleLabel.textContent = label;\n        }\n        else {\n            this.container.innerText = '';\n            this.container.classList.add('multiple');\n            this.singleLabel = undefined;\n            for (let i = 0; i < label.length; i++) {\n                const l = label[i];\n                const id = (options === null || options === void 0 ? void 0 : options.domId) && `${options === null || options === void 0 ? void 0 : options.domId}_${i}`;\n                dom.append(this.container, dom.$('a.label-name', { id, 'data-icon-label-count': label.length, 'data-icon-label-index': i, 'role': 'treeitem' }, l));\n                if (i < label.length - 1) {\n                    dom.append(this.container, dom.$('span.label-separator', undefined, (options === null || options === void 0 ? void 0 : options.separator) || '/'));\n                }\n            }\n        }\n    }\n}\nfunction splitMatches(labels, separator, matches) {\n    if (!matches) {\n        return undefined;\n    }\n    let labelStart = 0;\n    return labels.map(label => {\n        const labelRange = { start: labelStart, end: labelStart + label.length };\n        const result = matches\n            .map(match => Range.intersect(labelRange, match))\n            .filter(range => !Range.isEmpty(range))\n            .map(({ start, end }) => ({ start: start - labelStart, end: end - labelStart }));\n        labelStart = labelRange.end + separator.length;\n        return result;\n    });\n}\nclass LabelWithHighlights extends Disposable {\n    constructor(container, supportIcons) {\n        super();\n        this.container = container;\n        this.supportIcons = supportIcons;\n        this.label = undefined;\n        this.singleLabel = undefined;\n    }\n    setLabel(label, options) {\n        if (this.label === label && equals(this.options, options)) {\n            return;\n        }\n        this.label = label;\n        this.options = options;\n        if (typeof label === 'string') {\n            if (!this.singleLabel) {\n                this.container.innerText = '';\n                this.container.classList.remove('multiple');\n                this.singleLabel = this._register(new HighlightedLabel(dom.append(this.container, dom.$('a.label-name', { id: options === null || options === void 0 ? void 0 : options.domId })), { supportIcons: this.supportIcons }));\n            }\n            this.singleLabel.set(label, options === null || options === void 0 ? void 0 : options.matches, undefined, options === null || options === void 0 ? void 0 : options.labelEscapeNewLines);\n        }\n        else {\n            this.container.innerText = '';\n            this.container.classList.add('multiple');\n            this.singleLabel = undefined;\n            const separator = (options === null || options === void 0 ? void 0 : options.separator) || '/';\n            const matches = splitMatches(label, separator, options === null || options === void 0 ? void 0 : options.matches);\n            for (let i = 0; i < label.length; i++) {\n                const l = label[i];\n                const m = matches ? matches[i] : undefined;\n                const id = (options === null || options === void 0 ? void 0 : options.domId) && `${options === null || options === void 0 ? void 0 : options.domId}_${i}`;\n                const name = dom.$('a.label-name', { id, 'data-icon-label-count': label.length, 'data-icon-label-index': i, 'role': 'treeitem' });\n                const highlightedLabel = this._register(new HighlightedLabel(dom.append(this.container, name), { supportIcons: this.supportIcons }));\n                highlightedLabel.set(l, m, undefined, options === null || options === void 0 ? void 0 : options.labelEscapeNewLines);\n                if (i < label.length - 1) {\n                    dom.append(name, dom.$('span.label-separator', undefined, separator));\n                }\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nconst labelWithIconsRegex = new RegExp(`(\\\\\\\\)?\\\\$\\\\((${ThemeIcon.iconNameExpression}(?:${ThemeIcon.iconModifierExpression})?)\\\\)`, 'g');\nexport function renderLabelWithIcons(text) {\n    const elements = new Array();\n    let match;\n    let textStart = 0, textStop = 0;\n    while ((match = labelWithIconsRegex.exec(text)) !== null) {\n        textStop = match.index || 0;\n        if (textStart < textStop) {\n            elements.push(text.substring(textStart, textStop));\n        }\n        textStart = (match.index || 0) + match[0].length;\n        const [, escaped, codicon] = match;\n        elements.push(escaped ? `$(${codicon})` : renderIcon({ id: codicon }));\n    }\n    if (textStart < text.length) {\n        elements.push(text.substring(textStart));\n    }\n    return elements;\n}\nexport function renderIcon(icon) {\n    const node = dom.$(`span`);\n    node.classList.add(...ThemeIcon.asClassNameArray(icon));\n    return node;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { renderFormattedText, renderText } from '../../formattedTextRenderer.js';\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport * as aria from '../aria/aria.js';\nimport { getBaseLayerHoverDelegate } from '../hover/hoverDelegate2.js';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { ScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { Widget } from '../widget.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { HistoryNavigator } from '../../../common/history.js';\nimport { equals } from '../../../common/objects.js';\nimport './inputBox.css';\nimport * as nls from '../../../../nls.js';\nconst $ = dom.$;\nexport const unthemedInboxStyles = {\n    inputBackground: '#3C3C3C',\n    inputForeground: '#CCCCCC',\n    inputValidationInfoBorder: '#55AAFF',\n    inputValidationInfoBackground: '#063B49',\n    inputValidationWarningBorder: '#B89500',\n    inputValidationWarningBackground: '#352A05',\n    inputValidationErrorBorder: '#BE1100',\n    inputValidationErrorBackground: '#5A1D1D',\n    inputBorder: undefined,\n    inputValidationErrorForeground: undefined,\n    inputValidationInfoForeground: undefined,\n    inputValidationWarningForeground: undefined\n};\nexport class InputBox extends Widget {\n    constructor(container, contextViewProvider, options) {\n        var _a;\n        super();\n        this.state = 'idle';\n        this.maxHeight = Number.POSITIVE_INFINITY;\n        this._onDidChange = this._register(new Emitter());\n        this.onDidChange = this._onDidChange.event;\n        this._onDidHeightChange = this._register(new Emitter());\n        this.onDidHeightChange = this._onDidHeightChange.event;\n        this.contextViewProvider = contextViewProvider;\n        this.options = options;\n        this.message = null;\n        this.placeholder = this.options.placeholder || '';\n        this.tooltip = (_a = this.options.tooltip) !== null && _a !== void 0 ? _a : (this.placeholder || '');\n        this.ariaLabel = this.options.ariaLabel || '';\n        if (this.options.validationOptions) {\n            this.validation = this.options.validationOptions.validation;\n        }\n        this.element = dom.append(container, $('.monaco-inputbox.idle'));\n        const tagName = this.options.flexibleHeight ? 'textarea' : 'input';\n        const wrapper = dom.append(this.element, $('.ibwrapper'));\n        this.input = dom.append(wrapper, $(tagName + '.input.empty'));\n        this.input.setAttribute('autocorrect', 'off');\n        this.input.setAttribute('autocapitalize', 'off');\n        this.input.setAttribute('spellcheck', 'false');\n        this.onfocus(this.input, () => this.element.classList.add('synthetic-focus'));\n        this.onblur(this.input, () => this.element.classList.remove('synthetic-focus'));\n        if (this.options.flexibleHeight) {\n            this.maxHeight = typeof this.options.flexibleMaxHeight === 'number' ? this.options.flexibleMaxHeight : Number.POSITIVE_INFINITY;\n            this.mirror = dom.append(wrapper, $('div.mirror'));\n            this.mirror.innerText = '\\u00a0';\n            this.scrollableElement = new ScrollableElement(this.element, { vertical: 1 /* ScrollbarVisibility.Auto */ });\n            if (this.options.flexibleWidth) {\n                this.input.setAttribute('wrap', 'off');\n                this.mirror.style.whiteSpace = 'pre';\n                this.mirror.style.wordWrap = 'initial';\n            }\n            dom.append(container, this.scrollableElement.getDomNode());\n            this._register(this.scrollableElement);\n            // from ScrollableElement to DOM\n            this._register(this.scrollableElement.onScroll(e => this.input.scrollTop = e.scrollTop));\n            const onSelectionChange = this._register(new DomEmitter(container.ownerDocument, 'selectionchange'));\n            const onAnchoredSelectionChange = Event.filter(onSelectionChange.event, () => {\n                const selection = container.ownerDocument.getSelection();\n                return (selection === null || selection === void 0 ? void 0 : selection.anchorNode) === wrapper;\n            });\n            // from DOM to ScrollableElement\n            this._register(onAnchoredSelectionChange(this.updateScrollDimensions, this));\n            this._register(this.onDidHeightChange(this.updateScrollDimensions, this));\n        }\n        else {\n            this.input.type = this.options.type || 'text';\n            this.input.setAttribute('wrap', 'off');\n        }\n        if (this.ariaLabel) {\n            this.input.setAttribute('aria-label', this.ariaLabel);\n        }\n        if (this.placeholder && !this.options.showPlaceholderOnFocus) {\n            this.setPlaceHolder(this.placeholder);\n        }\n        if (this.tooltip) {\n            this.setTooltip(this.tooltip);\n        }\n        this.oninput(this.input, () => this.onValueChange());\n        this.onblur(this.input, () => this.onBlur());\n        this.onfocus(this.input, () => this.onFocus());\n        this._register(this.ignoreGesture(this.input));\n        setTimeout(() => this.updateMirror(), 0);\n        // Support actions\n        if (this.options.actions) {\n            this.actionbar = this._register(new ActionBar(this.element));\n            this.actionbar.push(this.options.actions, { icon: true, label: false });\n        }\n        this.applyStyles();\n    }\n    onBlur() {\n        this._hideMessage();\n        if (this.options.showPlaceholderOnFocus) {\n            this.input.setAttribute('placeholder', '');\n        }\n    }\n    onFocus() {\n        this._showMessage();\n        if (this.options.showPlaceholderOnFocus) {\n            this.input.setAttribute('placeholder', this.placeholder || '');\n        }\n    }\n    setPlaceHolder(placeHolder) {\n        this.placeholder = placeHolder;\n        this.input.setAttribute('placeholder', placeHolder);\n    }\n    setTooltip(tooltip) {\n        this.tooltip = tooltip;\n        if (!this.hover) {\n            this.hover = this._register(getBaseLayerHoverDelegate().setupUpdatableHover(getDefaultHoverDelegate('mouse'), this.input, tooltip));\n        }\n        else {\n            this.hover.update(tooltip);\n        }\n    }\n    get inputElement() {\n        return this.input;\n    }\n    get value() {\n        return this.input.value;\n    }\n    set value(newValue) {\n        if (this.input.value !== newValue) {\n            this.input.value = newValue;\n            this.onValueChange();\n        }\n    }\n    get height() {\n        return typeof this.cachedHeight === 'number' ? this.cachedHeight : dom.getTotalHeight(this.element);\n    }\n    focus() {\n        this.input.focus();\n    }\n    blur() {\n        this.input.blur();\n    }\n    hasFocus() {\n        return dom.isActiveElement(this.input);\n    }\n    select(range = null) {\n        this.input.select();\n        if (range) {\n            this.input.setSelectionRange(range.start, range.end);\n            if (range.end === this.input.value.length) {\n                this.input.scrollLeft = this.input.scrollWidth;\n            }\n        }\n    }\n    isSelectionAtEnd() {\n        return this.input.selectionEnd === this.input.value.length && this.input.selectionStart === this.input.selectionEnd;\n    }\n    getSelection() {\n        var _a;\n        const selectionStart = this.input.selectionStart;\n        if (selectionStart === null) {\n            return null;\n        }\n        const selectionEnd = (_a = this.input.selectionEnd) !== null && _a !== void 0 ? _a : selectionStart;\n        return {\n            start: selectionStart,\n            end: selectionEnd,\n        };\n    }\n    enable() {\n        this.input.removeAttribute('disabled');\n    }\n    disable() {\n        this.blur();\n        this.input.disabled = true;\n        this._hideMessage();\n    }\n    set paddingRight(paddingRight) {\n        // Set width to avoid hint text overlapping buttons\n        this.input.style.width = `calc(100% - ${paddingRight}px)`;\n        if (this.mirror) {\n            this.mirror.style.paddingRight = paddingRight + 'px';\n        }\n    }\n    updateScrollDimensions() {\n        if (typeof this.cachedContentHeight !== 'number' || typeof this.cachedHeight !== 'number' || !this.scrollableElement) {\n            return;\n        }\n        const scrollHeight = this.cachedContentHeight;\n        const height = this.cachedHeight;\n        const scrollTop = this.input.scrollTop;\n        this.scrollableElement.setScrollDimensions({ scrollHeight, height });\n        this.scrollableElement.setScrollPosition({ scrollTop });\n    }\n    showMessage(message, force) {\n        if (this.state === 'open' && equals(this.message, message)) {\n            // Already showing\n            return;\n        }\n        this.message = message;\n        this.element.classList.remove('idle');\n        this.element.classList.remove('info');\n        this.element.classList.remove('warning');\n        this.element.classList.remove('error');\n        this.element.classList.add(this.classForType(message.type));\n        const styles = this.stylesForType(this.message.type);\n        this.element.style.border = `1px solid ${dom.asCssValueWithDefault(styles.border, 'transparent')}`;\n        if (this.message.content && (this.hasFocus() || force)) {\n            this._showMessage();\n        }\n    }\n    hideMessage() {\n        this.message = null;\n        this.element.classList.remove('info');\n        this.element.classList.remove('warning');\n        this.element.classList.remove('error');\n        this.element.classList.add('idle');\n        this._hideMessage();\n        this.applyStyles();\n    }\n    validate() {\n        let errorMsg = null;\n        if (this.validation) {\n            errorMsg = this.validation(this.value);\n            if (errorMsg) {\n                this.inputElement.setAttribute('aria-invalid', 'true');\n                this.showMessage(errorMsg);\n            }\n            else if (this.inputElement.hasAttribute('aria-invalid')) {\n                this.inputElement.removeAttribute('aria-invalid');\n                this.hideMessage();\n            }\n        }\n        return errorMsg === null || errorMsg === void 0 ? void 0 : errorMsg.type;\n    }\n    stylesForType(type) {\n        const styles = this.options.inputBoxStyles;\n        switch (type) {\n            case 1 /* MessageType.INFO */: return { border: styles.inputValidationInfoBorder, background: styles.inputValidationInfoBackground, foreground: styles.inputValidationInfoForeground };\n            case 2 /* MessageType.WARNING */: return { border: styles.inputValidationWarningBorder, background: styles.inputValidationWarningBackground, foreground: styles.inputValidationWarningForeground };\n            default: return { border: styles.inputValidationErrorBorder, background: styles.inputValidationErrorBackground, foreground: styles.inputValidationErrorForeground };\n        }\n    }\n    classForType(type) {\n        switch (type) {\n            case 1 /* MessageType.INFO */: return 'info';\n            case 2 /* MessageType.WARNING */: return 'warning';\n            default: return 'error';\n        }\n    }\n    _showMessage() {\n        if (!this.contextViewProvider || !this.message) {\n            return;\n        }\n        let div;\n        const layout = () => div.style.width = dom.getTotalWidth(this.element) + 'px';\n        this.contextViewProvider.showContextView({\n            getAnchor: () => this.element,\n            anchorAlignment: 1 /* AnchorAlignment.RIGHT */,\n            render: (container) => {\n                var _a, _b;\n                if (!this.message) {\n                    return null;\n                }\n                div = dom.append(container, $('.monaco-inputbox-container'));\n                layout();\n                const renderOptions = {\n                    inline: true,\n                    className: 'monaco-inputbox-message'\n                };\n                const spanElement = (this.message.formatContent\n                    ? renderFormattedText(this.message.content, renderOptions)\n                    : renderText(this.message.content, renderOptions));\n                spanElement.classList.add(this.classForType(this.message.type));\n                const styles = this.stylesForType(this.message.type);\n                spanElement.style.backgroundColor = (_a = styles.background) !== null && _a !== void 0 ? _a : '';\n                spanElement.style.color = (_b = styles.foreground) !== null && _b !== void 0 ? _b : '';\n                spanElement.style.border = styles.border ? `1px solid ${styles.border}` : '';\n                dom.append(div, spanElement);\n                return null;\n            },\n            onHide: () => {\n                this.state = 'closed';\n            },\n            layout: layout\n        });\n        // ARIA Support\n        let alertText;\n        if (this.message.type === 3 /* MessageType.ERROR */) {\n            alertText = nls.localize('alertErrorMessage', \"Error: {0}\", this.message.content);\n        }\n        else if (this.message.type === 2 /* MessageType.WARNING */) {\n            alertText = nls.localize('alertWarningMessage', \"Warning: {0}\", this.message.content);\n        }\n        else {\n            alertText = nls.localize('alertInfoMessage', \"Info: {0}\", this.message.content);\n        }\n        aria.alert(alertText);\n        this.state = 'open';\n    }\n    _hideMessage() {\n        if (!this.contextViewProvider) {\n            return;\n        }\n        if (this.state === 'open') {\n            this.contextViewProvider.hideContextView();\n        }\n        this.state = 'idle';\n    }\n    onValueChange() {\n        this._onDidChange.fire(this.value);\n        this.validate();\n        this.updateMirror();\n        this.input.classList.toggle('empty', !this.value);\n        if (this.state === 'open' && this.contextViewProvider) {\n            this.contextViewProvider.layout();\n        }\n    }\n    updateMirror() {\n        if (!this.mirror) {\n            return;\n        }\n        const value = this.value;\n        const lastCharCode = value.charCodeAt(value.length - 1);\n        const suffix = lastCharCode === 10 ? ' ' : '';\n        const mirrorTextContent = (value + suffix)\n            .replace(/\\u000c/g, ''); // Don't measure with the form feed character, which messes up sizing\n        if (mirrorTextContent) {\n            this.mirror.textContent = value + suffix;\n        }\n        else {\n            this.mirror.innerText = '\\u00a0';\n        }\n        this.layout();\n    }\n    applyStyles() {\n        var _a, _b, _c;\n        const styles = this.options.inputBoxStyles;\n        const background = (_a = styles.inputBackground) !== null && _a !== void 0 ? _a : '';\n        const foreground = (_b = styles.inputForeground) !== null && _b !== void 0 ? _b : '';\n        const border = (_c = styles.inputBorder) !== null && _c !== void 0 ? _c : '';\n        this.element.style.backgroundColor = background;\n        this.element.style.color = foreground;\n        this.input.style.backgroundColor = 'inherit';\n        this.input.style.color = foreground;\n        // there's always a border, even if the color is not set.\n        this.element.style.border = `1px solid ${dom.asCssValueWithDefault(border, 'transparent')}`;\n    }\n    layout() {\n        if (!this.mirror) {\n            return;\n        }\n        const previousHeight = this.cachedContentHeight;\n        this.cachedContentHeight = dom.getTotalHeight(this.mirror);\n        if (previousHeight !== this.cachedContentHeight) {\n            this.cachedHeight = Math.min(this.cachedContentHeight, this.maxHeight);\n            this.input.style.height = this.cachedHeight + 'px';\n            this._onDidHeightChange.fire(this.cachedContentHeight);\n        }\n    }\n    insertAtCursor(text) {\n        const inputElement = this.inputElement;\n        const start = inputElement.selectionStart;\n        const end = inputElement.selectionEnd;\n        const content = inputElement.value;\n        if (start !== null && end !== null) {\n            this.value = content.substr(0, start) + text + content.substr(end);\n            inputElement.setSelectionRange(start + 1, start + 1);\n            this.layout();\n        }\n    }\n    dispose() {\n        var _a;\n        this._hideMessage();\n        this.message = null;\n        (_a = this.actionbar) === null || _a === void 0 ? void 0 : _a.dispose();\n        super.dispose();\n    }\n}\nexport class HistoryInputBox extends InputBox {\n    constructor(container, contextViewProvider, options) {\n        const NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_NO_PARENS = nls.localize({\n            key: 'history.inputbox.hint.suffix.noparens',\n            comment: ['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis \")\", for example \"Filter (e.g. text, !exclude)\". The character inserted into the final string is \\u21C5 to represent the up and down arrow keys.']\n        }, ' or {0} for history', `\\u21C5`);\n        const NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_IN_PARENS = nls.localize({\n            key: 'history.inputbox.hint.suffix.inparens',\n            comment: ['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. \"Find\"). The character inserted into the final string is \\u21C5 to represent the up and down arrow keys.']\n        }, ' ({0} for history)', `\\u21C5`);\n        super(container, contextViewProvider, options);\n        this._onDidFocus = this._register(new Emitter());\n        this.onDidFocus = this._onDidFocus.event;\n        this._onDidBlur = this._register(new Emitter());\n        this.onDidBlur = this._onDidBlur.event;\n        this.history = new HistoryNavigator(options.history, 100);\n        // Function to append the history suffix to the placeholder if necessary\n        const addSuffix = () => {\n            if (options.showHistoryHint && options.showHistoryHint() && !this.placeholder.endsWith(NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_NO_PARENS) && !this.placeholder.endsWith(NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_IN_PARENS) && this.history.getHistory().length) {\n                const suffix = this.placeholder.endsWith(')') ? NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_NO_PARENS : NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_IN_PARENS;\n                const suffixedPlaceholder = this.placeholder + suffix;\n                if (options.showPlaceholderOnFocus && !dom.isActiveElement(this.input)) {\n                    this.placeholder = suffixedPlaceholder;\n                }\n                else {\n                    this.setPlaceHolder(suffixedPlaceholder);\n                }\n            }\n        };\n        // Spot the change to the textarea class attribute which occurs when it changes between non-empty and empty,\n        // and add the history suffix to the placeholder if not yet present\n        this.observer = new MutationObserver((mutationList, observer) => {\n            mutationList.forEach((mutation) => {\n                if (!mutation.target.textContent) {\n                    addSuffix();\n                }\n            });\n        });\n        this.observer.observe(this.input, { attributeFilter: ['class'] });\n        this.onfocus(this.input, () => addSuffix());\n        this.onblur(this.input, () => {\n            const resetPlaceholder = (historyHint) => {\n                if (!this.placeholder.endsWith(historyHint)) {\n                    return false;\n                }\n                else {\n                    const revertedPlaceholder = this.placeholder.slice(0, this.placeholder.length - historyHint.length);\n                    if (options.showPlaceholderOnFocus) {\n                        this.placeholder = revertedPlaceholder;\n                    }\n                    else {\n                        this.setPlaceHolder(revertedPlaceholder);\n                    }\n                    return true;\n                }\n            };\n            if (!resetPlaceholder(NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_IN_PARENS)) {\n                resetPlaceholder(NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_NO_PARENS);\n            }\n        });\n    }\n    dispose() {\n        super.dispose();\n        if (this.observer) {\n            this.observer.disconnect();\n            this.observer = undefined;\n        }\n    }\n    addToHistory(always) {\n        if (this.value && (always || this.value !== this.getCurrentValue())) {\n            this.history.add(this.value);\n        }\n    }\n    isAtLastInHistory() {\n        return this.history.isLast();\n    }\n    isNowhereInHistory() {\n        return this.history.isNowhere();\n    }\n    showNextValue() {\n        if (!this.history.has(this.value)) {\n            this.addToHistory();\n        }\n        let next = this.getNextValue();\n        if (next) {\n            next = next === this.value ? this.getNextValue() : next;\n        }\n        this.value = next !== null && next !== void 0 ? next : '';\n        aria.status(this.value ? this.value : nls.localize('clearedInput', \"Cleared Input\"));\n    }\n    showPreviousValue() {\n        if (!this.history.has(this.value)) {\n            this.addToHistory();\n        }\n        let previous = this.getPreviousValue();\n        if (previous) {\n            previous = previous === this.value ? this.getPreviousValue() : previous;\n        }\n        if (previous) {\n            this.value = previous;\n            aria.status(this.value);\n        }\n    }\n    setPlaceHolder(placeHolder) {\n        super.setPlaceHolder(placeHolder);\n        this.setTooltip(placeHolder);\n    }\n    onBlur() {\n        super.onBlur();\n        this._onDidBlur.fire();\n    }\n    onFocus() {\n        super.onFocus();\n        this._onDidFocus.fire();\n    }\n    getCurrentValue() {\n        let currentValue = this.history.current();\n        if (!currentValue) {\n            currentValue = this.history.last();\n            this.history.next();\n        }\n        return currentValue;\n    }\n    getPreviousValue() {\n        return this.history.previous() || this.history.first();\n    }\n    getNextValue() {\n        return this.history.next();\n    }\n}\n"],"names":["renderText","text","element","createElement","arguments","length","undefined","textContent","renderFormattedText","formattedText","options","_renderFormattedText","content","parseCodeSegments","root","type","children","actionViewItemIndex","current","stack","stream","StringStream","eos","next","isEscapedFormatType","formatTagType","peek","isFormatTag","advance","pop","newCurrent","index","push","textCurrent","parseFormattedText","renderCodeSegments","actionHandler","tagName","inline","document","className","constructor","source","this","treeNode","child","createTextNode","a","disposables","add","DOM","event","callback","String","appendChild","Array","isArray","forEach","nodeChild","char","supportCodeSegments","GlobalPointerMoveMonitor","_hooks","DisposableStore","_pointerMoveCallback","_onStopCallback","dispose","stopMonitoring","invokeStopCallback","browserEvent","isMonitoring","clear","onStopCallback","startMonitoring","initialElement","pointerId","initialButtons","pointerMoveCallback","eventSource","setPointerCapture","toDisposable","releasePointerCapture","err","dom","POINTER_MOVE","e","buttons","preventDefault","POINTER_UP","ctrlKeyMod","platform","metaKeyMod","StandardKeyboardEvent","_a","_standardKeyboardEventBrand","target","ctrlKey","shiftKey","altKey","metaKey","altGraphKey","getModifierState","call","keyCode","charCode","fromCharCode","toUpperCase","KeyCodeUtils","fromString","browser","EVENT_KEY_CODE_MAP","extractKeyCode","code","_asKeybinding","_computeKeybinding","_asKeyCodeChord","_computeKeyCodeChord","stopPropagation","toKeyCodeChord","equals","other","key","result","KeyCodeChord","defaultMarkedRenderers","Object","freeze","image","href","title","dimensions","attributes","parseHrefAndDimensions","concat","escapeDoubleQuotes","join","paragraph","link","removeMarkdownEscapes","replace","renderMarkdown","markdown","markedOptions","_b","isDisposed","_uriMassage","part","data","parse","decodeURIComponent","cloneAndChange","value","uris","URI","revive","encodeURIComponent","JSON","stringify","_href","isDomUri","uri","startsWith","Schemas","FileAccess","uriToBrowserUri","toString","query","with","renderer","marked","Renderer","codeBlocks","syncCodeBlocks","codeBlockRendererSync","lang","id","defaultGenerator","nextId","postProcessCodeBlockLanguageId","escape","codeBlockRenderer","then","_activateLink","parentElement","dataset","baseUri","resolveWithBaseUri","from","onUnexpectedError","onClick","DomEmitter","onAuxClick","Event","any","mouseEvent","StandardMouseEvent","leftButton","middleButton","keyboardEvent","supportHtml","sanitizer","html","isTrusted","match","sanitize","silent","renderedMarkdown","substr","supportThemeIcons","markdownEscapeEscapedIcons","fillInIncompleteTokens","opts","defaults","newTokens","tokens","i","token","codeblockStart","raw","codeblockLead","completeCodeBlock","slice","completeTable","newToken","completeSingleLinePattern","newTokensList","links","lexer","parser","renderLabelWithIcons","map","outerHTML","markdownHtmlDoc","DOMParser","parseFromString","sanitizeRenderedMarkdown","body","querySelectorAll","img","src","getAttribute","setAttribute","disallowRemoteImages","uriScheme","scheme","file","replaceWith","test","childNodes","resolvedHref","innerHTML","Promise","all","tuples","renderedElements","Map","placeholderElements","placeholderElement","renderedElement","get","asyncRenderCallback","getElementsByTagName","listener","parts","split","path","endsWith","resolvePath","dirname","config","allowedSchemes","http","https","mailto","vscodeFileResource","vscodeRemote","vscodeRemoteResource","command","ALLOWED_TAGS","ALLOWED_ATTR","allowedMarkdownAttr","ALLOW_UNKNOWN_PROTOCOLS","getSanitizerOptions","dompurify","attrName","getNamedItem","attrValue","keepAttr","removeChild","hook","RETURN_TRUSTED_TYPE","renderStringAsPlaintext","string","plainTextRenderer","m","unescapeInfo","renderMarkdownAsPlaintext","Lazy","blockquote","quote","_html","heading","_level","_raw","hr","list","_ordered","listitem","table","header","tablerow","tablecell","_flags","strong","em","codespan","br","del","_title","_text","mergeRawTokenText","mergedTokenText","subtoken","lines","lastLine","includes","completeCodespan","completeWithString","completeStar","completeDoubleUnderscore","completeUnderscore","nextTwoSubTokens","completeLinkTargetArg","completeLinkTarget","hasStartOfLinkTarget","some","t","completeLinkText","str","leader","mergedRawText","closingString","numCols","hasSeparatorRow","line","trim","line1Matches","prefixText","line1EndsInPipe","newRawText","repeat","sameOriginWindowChainCache","WeakMap","getParentWindowIfSameOrigin","w","parent","location","parentLocation","origin","IframeUtils","getSameOriginWindowChain","targetWindow","windowChainCache","set","window","WeakRef","iframeElement","frameElement","getPositionOfChildWindowRelativeToAncestorWindow","childWindow","ancestorWindow","top","left","windowChain","windowChainEl","windowInChain","deref","scrollY","scrollX","boundingRect","getBoundingClientRect","timestamp","Date","now","button","rightButton","detail","pageX","posx","posy","pageY","clientX","ownerDocument","scrollLeft","documentElement","clientY","scrollTop","iframeOffsets","view","StandardWheelEvent","deltaX","deltaY","targetNode","srcElement","shouldFactorDPR","chromeVersionMatch","navigator","userAgent","parseInt","e1","e2","devicePixelRatio","wheelDeltaY","VERTICAL_AXIS","axis","ev","deltaMode","DOM_DELTA_LINE","wheelDeltaX","HORIZONTAL_AXIS","wheelDelta","inputLatency","totalKeydownTime","total","min","Number","MAX_VALUE","max","totalInputTime","totalRenderTime","totalInputLatencyTime","measurementsCount","state","keydown","input","render","markKeyDownEnd","performance","mark","onBeforeInput","scheduleRecordIfFinishedTask","markInputEnd","markRenderEnd","setTimeout","recordIfFinished","measure","addMeasure","clearMarks","clearMeasures","entryName","cumulativeMeasurement","duration","getEntriesByName","Math","cumulativeToFinalMeasurement","cumulative","average","clearCumulativeMeasurement","onKeyDown","queueMicrotask","onInput","onKeyUp","onSelectionChange","onRenderStart","getAndClearMeasurements","sampleCount","DevicePixelRatioMonitor","Disposable","super","_onDidChange","_register","Emitter","onDidChange","_listener","_handleChange","_mediaQueryList","fireEvent","removeEventListener","matchMedia","addEventListener","fire","PixelRatioMonitorImpl","_value","_getPixelRatio","dprMonitor","ctx","getContext","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","PixelRatio","mapWindowIdToPixelRatioMonitor","_getOrCreatePixelRatioMonitor","targetWindowId","getWindowId","pixelRatioMonitor","markAsSingleton","once","onDidUnregisterWindow","_ref","vscodeWindowId","delete","getInstance","EventType","__decorate","decorators","desc","d","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","Tap","Change","Start","End","Contextmenu","Gesture","dispatched","targets","LinkedList","ignoreTargets","activeTouches","handle","_lastSetTapCountTime","EventUtils","runAndSubscribe","DomUtils","onTouchStart","passive","onTouchEnd","onTouchMove","mainWindow","_store","addTarget","isTouchDevice","None","INSTANCE","remove","ignoreTarget","maxTouchPoints","len","targetTouches","touch","item","identifier","initialTarget","initialTimeStamp","initialPageX","initialPageY","rollingTimestamps","rollingPageX","rollingPageY","evt","newGestureEvent","dispatchEvent","activeTouchCount","keys","changedTouches","hasOwnProperty","console","warn","holdTime","HOLD_DELAY","abs","arrays","finalX","finalY","deltaT","dispatchTo","filter","Node","contains","inertia","createEvent","initEvent","tapCount","currentTime","getTime","setTapCount","CLEAR_TAP_COUNT_TIME","depth","sort","b","_","t1","vX","dirX","x","vY","dirY","y","delta_pos_x","delta_pos_y","stopped","SCROLL_FRICTION","translationX","translationY","shift","memoize","createTrustedTypesPolicy","policyName","policyOptions","monacoEnvironment","globalThis","MonacoEnvironment","trustedTypes","createPolicy","BaseActionViewItem","action","_action","context","_context","Action","handleActionChangeEvent","enabled","updateEnabled","checked","updateChecked","class","updateClass","label","updateLabel","updateTooltip","tooltip","actionRunner","_actionRunner","ActionRunner","isEnabled","setActionContext","newContext","container","enableDragging","draggable","isFirefox","addDisposableListener","DRAG_START","dataTransfer","setData","DataTransfers","TEXT","TouchEventType","MOUSE_DOWN","EventHelper","stop","classList","CONTEXT_MENU","CLICK","isMenu","DBLCLICK","MOUSE_UP","MOUSE_OUT","preserveFocus","types","useEventAsContext","run","focus","tabIndex","blur","setFocusable","focusable","trapsArrowNavigation","getClass","getTooltip","_c","updateAriaLabel","hoverDelegate","showNativeHover","customHover","update","getDefaultHoverDelegate","getBaseLayerHoverDelegate","setupUpdatableHover","ActionViewItem","icon","cssClass","getDefaultAriaRole","keybinding","kbLabel","Separator","ID","nls","comment","removeAttribute","toggle","SelectActionViewItem","selected","contextViewProvider","styles","selectBoxOptions","selectBox","SelectBox","registerListeners","select","onDidSelect","runAction","option","getActionContext","ActionBar","_d","_e","_f","_g","previousKeys","nextKeys","_actionRunnerDisposables","viewItemDisposables","DisposableMap","triggerKeyDown","_onDidBlur","onDidBlur","_onDidCancel","onWillAddFirstListener","cancelHasListener","onDidCancel","_onDidRun","onDidRun","_onWillRun","onWillRun","_orientation","orientation","_triggerKeys","keyDown","triggerKeys","_hoverDelegate","createInstantHoverDelegate","viewItems","focusedItem","domNode","KEY_DOWN","eventHandled","focusPrevious","focusNext","focusFirst","focusLast","isTriggerKeyEvent","doTrigger","KEY_UP","updateFocusedItem","focusTracker","previouslyFocusedItem","onDidFocus","actionsList","highlightToggledItems","ariaRole","ariaLabel","refreshRole","firstEnabled","find","vi","ret","elem","showHover","getContainer","getAction","indexOrElement","HTMLElement","arg","actions","actionViewItemElement","viewItemOptions","actionViewItemProvider","allowContextMenu","insertBefore","splice","isEmpty","clearAndDisposeAll","selectFirst","findIndex","updateFocus","forceLoop","startIndex","preventLoopNavigation","focusOnlyEnabledItems","fromRight","preventScroll","forceFocus","actionViewItem","focusItem","MAX_MESSAGE_LENGTH","ariaContainer","alertContainer","alertContainer2","statusContainer","statusContainer2","setARIAContainer","createAlertContainer","createStatusContainer","alert","msg","insertMessage","status","style","visibility","Color","white","Button","onDidClick","_onDidClick","_label","_onDidEscape","_element","secondary","background","buttonSecondaryBackground","buttonBackground","foreground","buttonSecondaryForeground","buttonForeground","color","backgroundColor","supportShortLabel","_labelShortElement","_labelElement","setTitle","eventType","MOUSE_OVER","updateBackground","trackFocus","getContentElements","elements","segment","node","hover","buttonSecondaryHoverBackground","buttonHoverBackground","isMarkdownString","markdownStringEqual","labelElement","rendered","querySelector","sanitized","ADD_TAGS","reset","supportIcons","ThemeIcon","asClassNameArray","_hover","LayoutAnchorMode","layout","viewportSize","viewSize","anchor","layoutAfterAnchorBoundary","mode","ALIGN","offset","size","layoutBeforeAnchorBoundary","position","ContextView","domPosition","useFixedPosition","useShadowDOM","delegate","toDisposeOnClean","toDisposeOnSetContainer","shadowRoot","shadowRootHostElement","setContainer","usedShadowDOM","attachShadow","SHADOW_ROOT_CSS","BUBBLE_UP_EVENTS","onDOMEvent","BUBBLE_DOWN_EVENTS","show","isVisible","hide","zIndex","layer","doLayout","getViewElement","canRelayout","BrowserFeatures","pointerEvents","getAnchor","around","elementPosition","zoom","width","height","obj","isAnchor","viewSizeWidth","viewSizeHeight","anchorPosition","anchorAlignment","anchorAxisAlignment","activeWindow","verticalAnchor","pageYOffset","horizontalAnchor","innerHeight","Range","intersects","start","end","AVOID","innerWidth","containerPosition","onHide","onCapture","activeElement","CountBadge","count","append","$","countFormat","titleFormat","setCount","setTitleFormat","format","badgeBackground","badgeForeground","badgeBorder","border","BaseDropdown","_onDidChangeVisibility","onDidChangeVisibility","labelRenderer","GestureEventType","isMouseEvent","visible","cleanupFn","boxContainer","contents","DropdownMenu","_options","_actions","menuOptions","_menuOptions","actionProvider","getActions","contextMenuProvider","showContextMenu","getActionsContext","getActionViewItem","getKeyBinding","getMenuClassName","menuClassName","domForShadowRoot","menuAsChild","skipTelemetry","DropdownMenuActionViewItem","menuActionsOrProvider","create","actionItem","isActionsArray","el","classNames","s","dropdownMenu","keybindingProvider","anchorAlignmentProvider","that","disabled","NLS_DEFAULT_LABEL","FindInput","Widget","fixFocusOnOptionClickEnabled","imeSessionInProgress","additionalTogglesDisposables","MutableDisposable","additionalToggles","_onDidOptionChange","onDidOptionChange","_onKeyDown","_onMouseDown","onMouseDown","_onInput","_onKeyUp","_onCaseSensitiveKeyDown","onCaseSensitiveKeyDown","_onRegexKeyDown","onRegexKeyDown","_lastHighlightFindOptions","placeholder","validation","showCommonFindToggles","appendCaseSensitiveLabel","appendWholeWordsLabel","appendRegexLabel","history","flexibleHeight","flexibleWidth","flexibleMaxHeight","inputBox","HistoryInputBox","validationOptions","showHistoryHint","inputBoxStyles","regex","RegexToggle","appendTitle","isChecked","toggleStyles","onChange","viaKeyboard","validate","wholeWords","WholeWordsToggle","caseSensitive","CaseSensitiveToggle","indexes","onkeydown","indexOf","newIndex","controls","display","setAdditionalToggles","inputElement","onkeyup","oninput","onmousedown","updateInputBoxPadding","collapsedFindWidget","enable","disable","setFocusInputOnOptionClick","setEnabled","toggles","currentToggle","controlsHidden","paddingRight","reduce","getValue","setValue","getCaseSensitive","setCaseSensitive","getWholeWords","setWholeWords","getRegex","setRegex","focusOnCaseSensitive","highlightFindOptions","showMessage","message","clearMessage","hideMessage","NLS_CASE_SENSITIVE_TOGGLE_LABEL","NLS_WHOLE_WORD_TOGGLE_LABEL","NLS_REGEX_TOGGLE_LABEL","Toggle","Codicon","inputActiveOptionBorder","inputActiveOptionForeground","inputActiveOptionBackground","wholeWord","NLS_PRESERVE_CASE_LABEL","PreserveCaseToggle","preserveCase","ReplaceInput","_showOptionButtons","cachedOptionsWidth","_onPreserveCaseKeyDown","onPreserveCaseKeyDown","appendPreserveCaseLabel","getPreserveCase","setPreserveCase","focusOnPreserve","newWidth","HighlightedLabel","highlights","didEverRender","escapeNewLines","objects","pos","highlight","substring","extraClasses","extra","baseHoverDelegate","hideHover","showAndFocusLastHover","setBaseLayerHoverDelegate","hoverDelegateFactory","nullHoverDelegateFactory","delay","defaultHoverDelegateMouse","defaultHoverDelegateElement","setHoverDelegateFactory","hoverDelegateProvider","placement","HoverWidget","containerDomNode","contentsDomNode","scrollbar","DomScrollableElement","consumeMouseWheelIfScrollbarIsNeeded","getDomNode","onContentsChanged","scanDomNode","HoverAction","actionOptions","keybindingLabel","actionContainer","iconClass","ClickAction","KeyDownAction","getHoverAccessibleViewHint","shouldHaveHint","localize","keyCodes","FastLabelNode","disposed","_textContent","_className","empty","_empty","marginLeft","IconLabel","customHovers","creationOptions","labelContainer","nameContainer","supportHighlights","nameNode","LabelWithHighlights","Label","setLabel","description","labelClasses","containerClasses","italic","strikethrough","disabledCommand","setupHover","descriptionTitle","descriptionNode","getOrCreateDescriptionNode","descriptionMatches","labelEscapeNewLines","suffix","suffixNode","getOrCreateSuffixNode","htmlElement","previousCustomHover","setupNativeHover","isString","stripIcons","markdownNotSupportedFallback","hoverDisposable","disposable","values","suffixContainer","descriptionContainer","supportDescriptionHighlights","singleLabel","innerText","domId","l","separator","matches","labels","labelStart","labelRange","intersect","range","splitMatches","name","labelWithIconsRegex","RegExp","iconNameExpression","iconModifierExpression","textStart","textStop","exec","escaped","codicon","renderIcon","unthemedInboxStyles","inputBackground","inputForeground","inputValidationInfoBorder","inputValidationInfoBackground","inputValidationWarningBorder","inputValidationWarningBackground","inputValidationErrorBorder","inputValidationErrorBackground","inputBorder","inputValidationErrorForeground","inputValidationInfoForeground","inputValidationWarningForeground","InputBox","maxHeight","POSITIVE_INFINITY","_onDidHeightChange","onDidHeightChange","wrapper","onfocus","onblur","mirror","scrollableElement","ScrollableElement","vertical","whiteSpace","wordWrap","onScroll","onAnchoredSelectionChange","selection","getSelection","anchorNode","updateScrollDimensions","showPlaceholderOnFocus","setPlaceHolder","setTooltip","onValueChange","onBlur","onFocus","ignoreGesture","updateMirror","actionbar","applyStyles","_hideMessage","_showMessage","placeHolder","newValue","cachedHeight","hasFocus","setSelectionRange","scrollWidth","isSelectionAtEnd","selectionEnd","selectionStart","cachedContentHeight","scrollHeight","setScrollDimensions","setScrollPosition","force","classForType","stylesForType","errorMsg","hasAttribute","div","alertText","showContextView","renderOptions","spanElement","formatContent","aria","hideContextView","charCodeAt","previousHeight","insertAtCursor","NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_NO_PARENS","NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_IN_PARENS","_onDidFocus","HistoryNavigator","addSuffix","getHistory","suffixedPlaceholder","observer","MutationObserver","mutationList","mutation","observe","attributeFilter","resetPlaceholder","historyHint","revertedPlaceholder","disconnect","addToHistory","always","getCurrentValue","isAtLastInHistory","isLast","isNowhereInHistory","isNowhere","showNextValue","has","getNextValue","showPreviousValue","previous","getPreviousValue","currentValue","last","first"],"sourceRoot":""}