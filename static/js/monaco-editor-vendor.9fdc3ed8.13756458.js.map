{"version":3,"file":"static/js/monaco-editor-vendor.9fdc3ed8.13756458.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/contrib/anchorSelect/browser/anchorSelect.js","../node_modules/monaco-editor/esm/vs/editor/contrib/bracketMatching/browser/bracketMatching.js","../node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/moveCaretCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/caretOperations.js","../node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/transpose.js","../node_modules/monaco-editor/esm/vs/editor/contrib/clipboard/browser/clipboard.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeAction.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionCommands.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionContributions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionKeybindingResolver.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionMenu.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/lightBulbWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/common/types.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelens.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codeLensCache.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/color.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorContributions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorDetector.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorHoverParticipant.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/defaultDocumentColorProvider.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/standaloneColorPickerWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/standaloneColorPickerActions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/blockCommentCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/lineCommentCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/comment.js","../node_modules/monaco-editor/esm/vs/editor/contrib/contextmenu/browser/contextmenu.js","../node_modules/monaco-editor/esm/vs/editor/contrib/cursorUndo/browser/cursorUndo.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar SelectionAnchorController_1;\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport './anchorSelect.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const SelectionAnchorSet = new RawContextKey('selectionAnchorSet', false);\nlet SelectionAnchorController = SelectionAnchorController_1 = class SelectionAnchorController {\n    static get(editor) {\n        return editor.getContribution(SelectionAnchorController_1.ID);\n    }\n    constructor(editor, contextKeyService) {\n        this.editor = editor;\n        this.selectionAnchorSetContextKey = SelectionAnchorSet.bindTo(contextKeyService);\n        this.modelChangeListener = editor.onDidChangeModel(() => this.selectionAnchorSetContextKey.reset());\n    }\n    setSelectionAnchor() {\n        if (this.editor.hasModel()) {\n            const position = this.editor.getPosition();\n            this.editor.changeDecorations((accessor) => {\n                if (this.decorationId) {\n                    accessor.removeDecoration(this.decorationId);\n                }\n                this.decorationId = accessor.addDecoration(Selection.fromPositions(position, position), {\n                    description: 'selection-anchor',\n                    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n                    hoverMessage: new MarkdownString().appendText(localize('selectionAnchor', \"Selection Anchor\")),\n                    className: 'selection-anchor'\n                });\n            });\n            this.selectionAnchorSetContextKey.set(!!this.decorationId);\n            alert(localize('anchorSet', \"Anchor set at {0}:{1}\", position.lineNumber, position.column));\n        }\n    }\n    goToSelectionAnchor() {\n        if (this.editor.hasModel() && this.decorationId) {\n            const anchorPosition = this.editor.getModel().getDecorationRange(this.decorationId);\n            if (anchorPosition) {\n                this.editor.setPosition(anchorPosition.getStartPosition());\n            }\n        }\n    }\n    selectFromAnchorToCursor() {\n        if (this.editor.hasModel() && this.decorationId) {\n            const start = this.editor.getModel().getDecorationRange(this.decorationId);\n            if (start) {\n                const end = this.editor.getPosition();\n                this.editor.setSelection(Selection.fromPositions(start.getStartPosition(), end));\n                this.cancelSelectionAnchor();\n            }\n        }\n    }\n    cancelSelectionAnchor() {\n        if (this.decorationId) {\n            const decorationId = this.decorationId;\n            this.editor.changeDecorations((accessor) => {\n                accessor.removeDecoration(decorationId);\n                this.decorationId = undefined;\n            });\n            this.selectionAnchorSetContextKey.set(false);\n        }\n    }\n    dispose() {\n        this.cancelSelectionAnchor();\n        this.modelChangeListener.dispose();\n    }\n};\nSelectionAnchorController.ID = 'editor.contrib.selectionAnchorController';\nSelectionAnchorController = SelectionAnchorController_1 = __decorate([\n    __param(1, IContextKeyService)\n], SelectionAnchorController);\nclass SetSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.setSelectionAnchor',\n            label: localize('setSelectionAnchor', \"Set Selection Anchor\"),\n            alias: 'Set Selection Anchor',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 32 /* KeyCode.KeyB */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.setSelectionAnchor();\n        });\n    }\n}\nclass GoToSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.goToSelectionAnchor',\n            label: localize('goToSelectionAnchor', \"Go to Selection Anchor\"),\n            alias: 'Go to Selection Anchor',\n            precondition: SelectionAnchorSet,\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.goToSelectionAnchor();\n        });\n    }\n}\nclass SelectFromAnchorToCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectFromAnchorToCursor',\n            label: localize('selectFromAnchorToCursor', \"Select from Anchor to Cursor\"),\n            alias: 'Select from Anchor to Cursor',\n            precondition: SelectionAnchorSet,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectFromAnchorToCursor();\n        });\n    }\n}\nclass CancelSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.cancelSelectionAnchor',\n            label: localize('cancelSelectionAnchor', \"Cancel Selection Anchor\"),\n            alias: 'Cancel Selection Anchor',\n            precondition: SelectionAnchorSet,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 9 /* KeyCode.Escape */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.cancelSelectionAnchor();\n        });\n    }\n}\nregisterEditorContribution(SelectionAnchorController.ID, SelectionAnchorController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(SetSelectionAnchor);\nregisterEditorAction(GoToSelectionAnchor);\nregisterEditorAction(SelectFromAnchorToCursor);\nregisterEditorAction(CancelSelectionAnchor);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './bracketMatching.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nconst overviewRulerBracketMatchForeground = registerColor('editorOverviewRuler.bracketMatchForeground', { dark: '#A0A0A0', light: '#A0A0A0', hcDark: '#A0A0A0', hcLight: '#A0A0A0' }, nls.localize('overviewRulerBracketMatchForeground', 'Overview ruler marker color for matching brackets.'));\nclass JumpToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.jumpToBracket',\n            label: nls.localize('smartSelect.jumpBracket', \"Go to Bracket\"),\n            alias: 'Go to Bracket',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 93 /* KeyCode.Backslash */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.jumpToBracket();\n    }\n}\nclass SelectToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectToBracket',\n            label: nls.localize('smartSelect.selectToBracket', \"Select to Bracket\"),\n            alias: 'Select to Bracket',\n            precondition: undefined,\n            description: {\n                description: `Select to Bracket`,\n                args: [{\n                        name: 'args',\n                        schema: {\n                            type: 'object',\n                            properties: {\n                                'selectBrackets': {\n                                    type: 'boolean',\n                                    default: true\n                                }\n                            },\n                        }\n                    }]\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        let selectBrackets = true;\n        if (args && args.selectBrackets === false) {\n            selectBrackets = false;\n        }\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectToBracket(selectBrackets);\n    }\n}\nclass RemoveBracketsAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.removeBrackets',\n            label: nls.localize('smartSelect.removeBrackets', \"Remove Brackets\"),\n            alias: 'Remove Brackets',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1 /* KeyCode.Backspace */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.removeBrackets(this.id);\n    }\n}\nclass BracketsData {\n    constructor(position, brackets, options) {\n        this.position = position;\n        this.brackets = brackets;\n        this.options = options;\n    }\n}\nexport class BracketMatchingController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(BracketMatchingController.ID);\n    }\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._lastBracketsData = [];\n        this._lastVersionId = 0;\n        this._decorations = this._editor.createDecorationsCollection();\n        this._updateBracketsSoon = this._register(new RunOnceScheduler(() => this._updateBrackets(), 50));\n        this._matchBrackets = this._editor.getOption(71 /* EditorOption.matchBrackets */);\n        this._updateBracketsSoon.schedule();\n        this._register(editor.onDidChangeCursorPosition((e) => {\n            if (this._matchBrackets === 'never') {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this._lastBracketsData = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelLanguageConfiguration((e) => {\n            this._lastBracketsData = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(71 /* EditorOption.matchBrackets */)) {\n                this._matchBrackets = this._editor.getOption(71 /* EditorOption.matchBrackets */);\n                this._decorations.clear();\n                this._lastBracketsData = [];\n                this._lastVersionId = 0;\n                this._updateBracketsSoon.schedule();\n            }\n        }));\n        this._register(editor.onDidBlurEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidFocusEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n    }\n    jumpToBracket() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = this._editor.getSelections().map(selection => {\n            const position = selection.getStartPosition();\n            // find matching brackets if position is on a bracket\n            const brackets = model.bracketPairs.matchBracket(position);\n            let newCursorPosition = null;\n            if (brackets) {\n                if (brackets[0].containsPosition(position) && !brackets[1].containsPosition(position)) {\n                    newCursorPosition = brackets[1].getStartPosition();\n                }\n                else if (brackets[1].containsPosition(position)) {\n                    newCursorPosition = brackets[0].getStartPosition();\n                }\n            }\n            else {\n                // find the enclosing brackets if the position isn't on a matching bracket\n                const enclosingBrackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (enclosingBrackets) {\n                    newCursorPosition = enclosingBrackets[1].getStartPosition();\n                }\n                else {\n                    // no enclosing brackets, try the very first next bracket\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        newCursorPosition = nextBracket.range.getStartPosition();\n                    }\n                }\n            }\n            if (newCursorPosition) {\n                return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\n            }\n            return new Selection(position.lineNumber, position.column, position.lineNumber, position.column);\n        });\n        this._editor.setSelections(newSelections);\n        this._editor.revealRange(newSelections[0]);\n    }\n    selectToBracket(selectBrackets) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = [];\n        this._editor.getSelections().forEach(selection => {\n            const position = selection.getStartPosition();\n            let brackets = model.bracketPairs.matchBracket(position);\n            if (!brackets) {\n                brackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (!brackets) {\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        brackets = model.bracketPairs.matchBracket(nextBracket.range.getStartPosition());\n                    }\n                }\n            }\n            let selectFrom = null;\n            let selectTo = null;\n            if (brackets) {\n                brackets.sort(Range.compareRangesUsingStarts);\n                const [open, close] = brackets;\n                selectFrom = selectBrackets ? open.getStartPosition() : open.getEndPosition();\n                selectTo = selectBrackets ? close.getEndPosition() : close.getStartPosition();\n                if (close.containsPosition(position)) {\n                    // select backwards if the cursor was on the closing bracket\n                    const tmp = selectFrom;\n                    selectFrom = selectTo;\n                    selectTo = tmp;\n                }\n            }\n            if (selectFrom && selectTo) {\n                newSelections.push(new Selection(selectFrom.lineNumber, selectFrom.column, selectTo.lineNumber, selectTo.column));\n            }\n        });\n        if (newSelections.length > 0) {\n            this._editor.setSelections(newSelections);\n            this._editor.revealRange(newSelections[0]);\n        }\n    }\n    removeBrackets(editSource) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        this._editor.getSelections().forEach((selection) => {\n            const position = selection.getPosition();\n            let brackets = model.bracketPairs.matchBracket(position);\n            if (!brackets) {\n                brackets = model.bracketPairs.findEnclosingBrackets(position);\n            }\n            if (brackets) {\n                this._editor.pushUndoStop();\n                this._editor.executeEdits(editSource, [\n                    { range: brackets[0], text: '' },\n                    { range: brackets[1], text: '' }\n                ]);\n                this._editor.pushUndoStop();\n            }\n        });\n    }\n    _updateBrackets() {\n        if (this._matchBrackets === 'never') {\n            return;\n        }\n        this._recomputeBrackets();\n        const newDecorations = [];\n        let newDecorationsLen = 0;\n        for (const bracketData of this._lastBracketsData) {\n            const brackets = bracketData.brackets;\n            if (brackets) {\n                newDecorations[newDecorationsLen++] = { range: brackets[0], options: bracketData.options };\n                newDecorations[newDecorationsLen++] = { range: brackets[1], options: bracketData.options };\n            }\n        }\n        this._decorations.set(newDecorations);\n    }\n    _recomputeBrackets() {\n        if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n            // no model or no focus => no brackets!\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const selections = this._editor.getSelections();\n        if (selections.length > 100) {\n            // no bracket matching for high numbers of selections\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const model = this._editor.getModel();\n        const versionId = model.getVersionId();\n        let previousData = [];\n        if (this._lastVersionId === versionId) {\n            // use the previous data only if the model is at the same version id\n            previousData = this._lastBracketsData;\n        }\n        const positions = [];\n        let positionsLen = 0;\n        for (let i = 0, len = selections.length; i < len; i++) {\n            const selection = selections[i];\n            if (selection.isEmpty()) {\n                // will bracket match a cursor only if the selection is collapsed\n                positions[positionsLen++] = selection.getStartPosition();\n            }\n        }\n        // sort positions for `previousData` cache hits\n        if (positions.length > 1) {\n            positions.sort(Position.compare);\n        }\n        const newData = [];\n        let newDataLen = 0;\n        let previousIndex = 0;\n        const previousLen = previousData.length;\n        for (let i = 0, len = positions.length; i < len; i++) {\n            const position = positions[i];\n            while (previousIndex < previousLen && previousData[previousIndex].position.isBefore(position)) {\n                previousIndex++;\n            }\n            if (previousIndex < previousLen && previousData[previousIndex].position.equals(position)) {\n                newData[newDataLen++] = previousData[previousIndex];\n            }\n            else {\n                let brackets = model.bracketPairs.matchBracket(position, 20 /* give at most 20ms to compute */);\n                let options = BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;\n                if (!brackets && this._matchBrackets === 'always') {\n                    brackets = model.bracketPairs.findEnclosingBrackets(position, 20 /* give at most 20ms to compute */);\n                    options = BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER;\n                }\n                newData[newDataLen++] = new BracketsData(position, brackets, options);\n            }\n        }\n        this._lastBracketsData = newData;\n        this._lastVersionId = versionId;\n    }\n}\nBracketMatchingController.ID = 'editor.contrib.bracketMatchingController';\nBracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerBracketMatchForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nBracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-no-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match'\n});\nregisterEditorContribution(BracketMatchingController.ID, BracketMatchingController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(SelectToBracketAction);\nregisterEditorAction(JumpToBracketAction);\nregisterEditorAction(RemoveBracketsAction);\n// Go to menu\nMenuRegistry.appendMenuItem(MenuId.MenubarGoMenu, {\n    group: '5_infile_nav',\n    command: {\n        id: 'editor.action.jumpToBracket',\n        title: nls.localize({ key: 'miGoToBracket', comment: ['&& denotes a mnemonic'] }, \"Go to &&Bracket\")\n    },\n    order: 2\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class MoveCaretCommand {\n    constructor(selection, isMovingLeft) {\n        this._selection = selection;\n        this._isMovingLeft = isMovingLeft;\n    }\n    getEditOperations(model, builder) {\n        if (this._selection.startLineNumber !== this._selection.endLineNumber || this._selection.isEmpty()) {\n            return;\n        }\n        const lineNumber = this._selection.startLineNumber;\n        const startColumn = this._selection.startColumn;\n        const endColumn = this._selection.endColumn;\n        if (this._isMovingLeft && startColumn === 1) {\n            return;\n        }\n        if (!this._isMovingLeft && endColumn === model.getLineMaxColumn(lineNumber)) {\n            return;\n        }\n        if (this._isMovingLeft) {\n            const rangeBefore = new Range(lineNumber, startColumn - 1, lineNumber, startColumn);\n            const charBefore = model.getValueInRange(rangeBefore);\n            builder.addEditOperation(rangeBefore, null);\n            builder.addEditOperation(new Range(lineNumber, endColumn, lineNumber, endColumn), charBefore);\n        }\n        else {\n            const rangeAfter = new Range(lineNumber, endColumn, lineNumber, endColumn + 1);\n            const charAfter = model.getValueInRange(rangeAfter);\n            builder.addEditOperation(rangeAfter, null);\n            builder.addEditOperation(new Range(lineNumber, startColumn, lineNumber, startColumn), charAfter);\n        }\n    }\n    computeCursorState(model, helper) {\n        if (this._isMovingLeft) {\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn - 1, this._selection.endLineNumber, this._selection.endColumn - 1);\n        }\n        else {\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn + 1, this._selection.endLineNumber, this._selection.endColumn + 1);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { MoveCaretCommand } from './moveCaretCommand.js';\nimport * as nls from '../../../../nls.js';\nclass MoveCaretAction extends EditorAction {\n    constructor(left, opts) {\n        super(opts);\n        this.left = left;\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            commands.push(new MoveCaretCommand(selection, this.left));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass MoveCaretLeftAction extends MoveCaretAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.moveCarretLeftAction',\n            label: nls.localize('caret.moveLeft', \"Move Selected Text Left\"),\n            alias: 'Move Selected Text Left',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nclass MoveCaretRightAction extends MoveCaretAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.moveCarretRightAction',\n            label: nls.localize('caret.moveRight', \"Move Selected Text Right\"),\n            alias: 'Move Selected Text Right',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nregisterEditorAction(MoveCaretLeftAction);\nregisterEditorAction(MoveCaretRightAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand } from '../../../common/commands/replaceCommand.js';\nimport { MoveOperations } from '../../../common/cursor/cursorMoveOperations.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass TransposeLettersAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.transposeLetters',\n            label: nls.localize('transposeLetters.label', \"Transpose Letters\"),\n            alias: 'Transpose Letters',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: {\n                    primary: 256 /* KeyMod.WinCtrl */ | 50 /* KeyCode.KeyT */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            if (!selection.isEmpty()) {\n                continue;\n            }\n            const lineNumber = selection.startLineNumber;\n            const column = selection.startColumn;\n            const lastColumn = model.getLineMaxColumn(lineNumber);\n            if (lineNumber === 1 && (column === 1 || (column === 2 && lastColumn === 2))) {\n                // at beginning of file, nothing to do\n                continue;\n            }\n            // handle special case: when at end of line, transpose left two chars\n            // otherwise, transpose left and right chars\n            const endPosition = (column === lastColumn) ?\n                selection.getPosition() :\n                MoveOperations.rightPosition(model, selection.getPosition().lineNumber, selection.getPosition().column);\n            const middlePosition = MoveOperations.leftPosition(model, endPosition);\n            const beginPosition = MoveOperations.leftPosition(model, middlePosition);\n            const leftChar = model.getValueInRange(Range.fromPositions(beginPosition, middlePosition));\n            const rightChar = model.getValueInRange(Range.fromPositions(middlePosition, endPosition));\n            const replaceRange = Range.fromPositions(beginPosition, endPosition);\n            commands.push(new ReplaceCommand(replaceRange, rightChar + leftChar));\n        }\n        if (commands.length > 0) {\n            editor.pushUndoStop();\n            editor.executeCommands(this.id, commands);\n            editor.pushUndoStop();\n        }\n    }\n}\nregisterEditorAction(TransposeLettersAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as browser from '../../../../base/browser/browser.js';\nimport { getActiveDocument } from '../../../../base/browser/dom.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { CopyOptions, InMemoryClipboardMetadataManager } from '../../../browser/controller/textAreaInput.js';\nimport { EditorAction, MultiCommand, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nconst CLIPBOARD_CONTEXT_MENU_GROUP = '9_cutcopypaste';\nconst supportsCut = (platform.isNative || document.queryCommandSupported('cut'));\nconst supportsCopy = (platform.isNative || document.queryCommandSupported('copy'));\n// Firefox only supports navigator.clipboard.readText() in browser extensions.\n// See https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/readText#Browser_compatibility\n// When loading over http, navigator.clipboard can be undefined. See https://github.com/microsoft/monaco-editor/issues/2313\nconst supportsPaste = (typeof navigator.clipboard === 'undefined' || browser.isFirefox) ? document.queryCommandSupported('paste') : true;\nfunction registerCommand(command) {\n    command.register();\n    return command;\n}\nexport const CutAction = supportsCut ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardCutAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind cut keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */, secondary: [1024 /* KeyMod.Shift */ | 20 /* KeyCode.Delete */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miCut', comment: ['&& denotes a mnemonic'] }, \"Cu&&t\"),\n            order: 1\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            when: EditorContextKeys.writable,\n            order: 1,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            when: EditorContextKeys.writable,\n            order: 1,\n        }]\n})) : undefined;\nexport const CopyAction = supportsCopy ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardCopyAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind copy keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */, secondary: [2048 /* KeyMod.CtrlCmd */ | 19 /* KeyCode.Insert */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miCopy', comment: ['&& denotes a mnemonic'] }, \"&&Copy\"),\n            order: 2\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 2,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 2,\n        }]\n})) : undefined;\nMenuRegistry.appendMenuItem(MenuId.MenubarEditMenu, { submenu: MenuId.MenubarCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: '2_ccp', order: 3 });\nMenuRegistry.appendMenuItem(MenuId.EditorContext, { submenu: MenuId.EditorContextCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: CLIPBOARD_CONTEXT_MENU_GROUP, order: 3 });\nMenuRegistry.appendMenuItem(MenuId.EditorContext, { submenu: MenuId.EditorContextShare, title: { value: nls.localize('share', \"Share\"), original: 'Share', }, group: '11_share', order: -1, when: ContextKeyExpr.and(ContextKeyExpr.notEquals('resourceScheme', 'output'), EditorContextKeys.editorTextFocus) });\nMenuRegistry.appendMenuItem(MenuId.EditorTitleContext, { submenu: MenuId.EditorTitleContextShare, title: { value: nls.localize('share', \"Share\"), original: 'Share', }, group: '11_share', order: -1 });\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, { submenu: MenuId.ExplorerContextShare, title: { value: nls.localize('share', \"Share\"), original: 'Share', }, group: '11_share', order: -1 });\nexport const PasteAction = supportsPaste ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardPasteAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind paste keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */, secondary: [1024 /* KeyMod.Shift */ | 19 /* KeyCode.Insert */] },\n        linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */, secondary: [1024 /* KeyMod.Shift */ | 19 /* KeyCode.Insert */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miPaste', comment: ['&& denotes a mnemonic'] }, \"&&Paste\"),\n            order: 4\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            when: EditorContextKeys.writable,\n            order: 4,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            when: EditorContextKeys.writable,\n            order: 4,\n        }]\n})) : undefined;\nclass ExecCommandCopyWithSyntaxHighlightingAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.clipboardCopyWithSyntaxHighlightingAction',\n            label: nls.localize('actions.clipboard.copyWithSyntaxHighlightingLabel', \"Copy With Syntax Highlighting\"),\n            alias: 'Copy With Syntax Highlighting',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const emptySelectionClipboard = editor.getOption(37 /* EditorOption.emptySelectionClipboard */);\n        if (!emptySelectionClipboard && editor.getSelection().isEmpty()) {\n            return;\n        }\n        CopyOptions.forceCopyWithSyntaxHighlighting = true;\n        editor.focus();\n        editor.getContainerDomNode().ownerDocument.execCommand('copy');\n        CopyOptions.forceCopyWithSyntaxHighlighting = false;\n    }\n}\nfunction registerExecCommandImpl(target, browserCommand) {\n    if (!target) {\n        return;\n    }\n    // 1. handle case when focus is in editor.\n    target.addImplementation(10000, 'code-editor', (accessor, args) => {\n        // Only if editor text focus (i.e. not if editor has widget focus).\n        const focusedEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\n            // Do not execute if there is no selection and empty selection clipboard is off\n            const emptySelectionClipboard = focusedEditor.getOption(37 /* EditorOption.emptySelectionClipboard */);\n            const selection = focusedEditor.getSelection();\n            if (selection && selection.isEmpty() && !emptySelectionClipboard) {\n                return true;\n            }\n            focusedEditor.getContainerDomNode().ownerDocument.execCommand(browserCommand);\n            return true;\n        }\n        return false;\n    });\n    // 2. (default) handle case when focus is somewhere else.\n    target.addImplementation(0, 'generic-dom', (accessor, args) => {\n        getActiveDocument().execCommand(browserCommand);\n        return true;\n    });\n}\nregisterExecCommandImpl(CutAction, 'cut');\nregisterExecCommandImpl(CopyAction, 'copy');\nif (PasteAction) {\n    // 1. Paste: handle case when focus is in editor.\n    PasteAction.addImplementation(10000, 'code-editor', (accessor, args) => {\n        const codeEditorService = accessor.get(ICodeEditorService);\n        const clipboardService = accessor.get(IClipboardService);\n        // Only if editor text focus (i.e. not if editor has widget focus).\n        const focusedEditor = codeEditorService.getFocusedCodeEditor();\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\n            const result = focusedEditor.getContainerDomNode().ownerDocument.execCommand('paste');\n            // Use the clipboard service if document.execCommand('paste') was not successful\n            if (!result && platform.isWeb) {\n                return (() => __awaiter(void 0, void 0, void 0, function* () {\n                    const clipboardText = yield clipboardService.readText();\n                    if (clipboardText !== '') {\n                        const metadata = InMemoryClipboardMetadataManager.INSTANCE.get(clipboardText);\n                        let pasteOnNewLine = false;\n                        let multicursorText = null;\n                        let mode = null;\n                        if (metadata) {\n                            pasteOnNewLine = (focusedEditor.getOption(37 /* EditorOption.emptySelectionClipboard */) && !!metadata.isFromEmptySelection);\n                            multicursorText = (typeof metadata.multicursorText !== 'undefined' ? metadata.multicursorText : null);\n                            mode = metadata.mode;\n                        }\n                        focusedEditor.trigger('keyboard', \"paste\" /* Handler.Paste */, {\n                            text: clipboardText,\n                            pasteOnNewLine,\n                            multicursorText,\n                            mode\n                        });\n                    }\n                }))();\n            }\n            return true;\n        }\n        return false;\n    });\n    // 2. Paste: (default) handle case when focus is somewhere else.\n    PasteAction.addImplementation(0, 'generic-dom', (accessor, args) => {\n        getActiveDocument().execCommand('paste');\n        return true;\n    });\n}\nif (supportsCopy) {\n    registerEditorAction(ExecCommandCopyWithSyntaxHighlightingAction);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { coalesce, equals, isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IBulkEditService } from '../../../browser/services/bulkEditService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { TextModelCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CodeActionItem, CodeActionKind, CodeActionTriggerSource, filtersAction, mayIncludeActionsOfKind } from '../common/types.js';\nexport const codeActionCommandId = 'editor.action.codeAction';\nexport const quickFixCommandId = 'editor.action.quickFix';\nexport const autoFixCommandId = 'editor.action.autoFix';\nexport const refactorCommandId = 'editor.action.refactor';\nexport const sourceActionCommandId = 'editor.action.sourceAction';\nexport const organizeImportsCommandId = 'editor.action.organizeImports';\nexport const fixAllCommandId = 'editor.action.fixAll';\nclass ManagedCodeActionSet extends Disposable {\n    static codeActionsPreferredComparator(a, b) {\n        if (a.isPreferred && !b.isPreferred) {\n            return -1;\n        }\n        else if (!a.isPreferred && b.isPreferred) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    static codeActionsComparator({ action: a }, { action: b }) {\n        if (isNonEmptyArray(a.diagnostics)) {\n            return isNonEmptyArray(b.diagnostics) ? ManagedCodeActionSet.codeActionsPreferredComparator(a, b) : -1;\n        }\n        else if (isNonEmptyArray(b.diagnostics)) {\n            return 1;\n        }\n        else {\n            return ManagedCodeActionSet.codeActionsPreferredComparator(a, b); // both have no diagnostics\n        }\n    }\n    constructor(actions, documentation, disposables) {\n        super();\n        this.documentation = documentation;\n        this._register(disposables);\n        this.allActions = [...actions].sort(ManagedCodeActionSet.codeActionsComparator);\n        this.validActions = this.allActions.filter(({ action }) => !action.disabled);\n    }\n    get hasAutoFix() {\n        return this.validActions.some(({ action: fix }) => !!fix.kind && CodeActionKind.QuickFix.contains(new CodeActionKind(fix.kind)) && !!fix.isPreferred);\n    }\n}\nconst emptyCodeActionsResponse = { actions: [], documentation: undefined };\nexport function getCodeActions(registry, model, rangeOrSelection, trigger, progress, token) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const filter = trigger.filter || {};\n        const notebookFilter = Object.assign(Object.assign({}, filter), { excludes: [...(filter.excludes || []), CodeActionKind.Notebook] });\n        const codeActionContext = {\n            only: (_a = filter.include) === null || _a === void 0 ? void 0 : _a.value,\n            trigger: trigger.type,\n        };\n        const cts = new TextModelCancellationTokenSource(model, token);\n        // if the trigger is auto (autosave, lightbulb, etc), we should exclude notebook codeActions\n        const excludeNotebookCodeActions = (trigger.type === 2 /* languages.CodeActionTriggerType.Auto */);\n        const providers = getCodeActionProviders(registry, model, (excludeNotebookCodeActions) ? notebookFilter : filter);\n        const disposables = new DisposableStore();\n        const promises = providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n            try {\n                progress.report(provider);\n                const providedCodeActions = yield provider.provideCodeActions(model, rangeOrSelection, codeActionContext, cts.token);\n                if (providedCodeActions) {\n                    disposables.add(providedCodeActions);\n                }\n                if (cts.token.isCancellationRequested) {\n                    return emptyCodeActionsResponse;\n                }\n                const filteredActions = ((providedCodeActions === null || providedCodeActions === void 0 ? void 0 : providedCodeActions.actions) || []).filter(action => action && filtersAction(filter, action));\n                const documentation = getDocumentationFromProvider(provider, filteredActions, filter.include);\n                return {\n                    actions: filteredActions.map(action => new CodeActionItem(action, provider)),\n                    documentation\n                };\n            }\n            catch (err) {\n                if (isCancellationError(err)) {\n                    throw err;\n                }\n                onUnexpectedExternalError(err);\n                return emptyCodeActionsResponse;\n            }\n        }));\n        const listener = registry.onDidChange(() => {\n            const newProviders = registry.all(model);\n            if (!equals(newProviders, providers)) {\n                cts.cancel();\n            }\n        });\n        try {\n            const actions = yield Promise.all(promises);\n            const allActions = actions.map(x => x.actions).flat();\n            const allDocumentation = [\n                ...coalesce(actions.map(x => x.documentation)),\n                ...getAdditionalDocumentationForShowingActions(registry, model, trigger, allActions)\n            ];\n            return new ManagedCodeActionSet(allActions, allDocumentation, disposables);\n        }\n        finally {\n            listener.dispose();\n            cts.dispose();\n        }\n    });\n}\nfunction getCodeActionProviders(registry, model, filter) {\n    return registry.all(model)\n        // Don't include providers that we know will not return code actions of interest\n        .filter(provider => {\n        if (!provider.providedCodeActionKinds) {\n            // We don't know what type of actions this provider will return.\n            return true;\n        }\n        return provider.providedCodeActionKinds.some(kind => mayIncludeActionsOfKind(filter, new CodeActionKind(kind)));\n    });\n}\nfunction* getAdditionalDocumentationForShowingActions(registry, model, trigger, actionsToShow) {\n    var _a, _b, _c;\n    if (model && actionsToShow.length) {\n        for (const provider of registry.all(model)) {\n            if (provider._getAdditionalMenuItems) {\n                yield* (_a = provider._getAdditionalMenuItems) === null || _a === void 0 ? void 0 : _a.call(provider, { trigger: trigger.type, only: (_c = (_b = trigger.filter) === null || _b === void 0 ? void 0 : _b.include) === null || _c === void 0 ? void 0 : _c.value }, actionsToShow.map(item => item.action));\n            }\n        }\n    }\n}\nfunction getDocumentationFromProvider(provider, providedCodeActions, only) {\n    if (!provider.documentation) {\n        return undefined;\n    }\n    const documentation = provider.documentation.map(entry => ({ kind: new CodeActionKind(entry.kind), command: entry.command }));\n    if (only) {\n        let currentBest;\n        for (const entry of documentation) {\n            if (entry.kind.contains(only)) {\n                if (!currentBest) {\n                    currentBest = entry;\n                }\n                else {\n                    // Take best match\n                    if (currentBest.kind.contains(entry.kind)) {\n                        currentBest = entry;\n                    }\n                }\n            }\n        }\n        if (currentBest) {\n            return currentBest === null || currentBest === void 0 ? void 0 : currentBest.command;\n        }\n    }\n    // Otherwise, check to see if any of the provided actions match.\n    for (const action of providedCodeActions) {\n        if (!action.kind) {\n            continue;\n        }\n        for (const entry of documentation) {\n            if (entry.kind.contains(new CodeActionKind(action.kind))) {\n                return entry.command;\n            }\n        }\n    }\n    return undefined;\n}\nexport var ApplyCodeActionReason;\n(function (ApplyCodeActionReason) {\n    ApplyCodeActionReason[\"OnSave\"] = \"onSave\";\n    ApplyCodeActionReason[\"FromProblemsView\"] = \"fromProblemsView\";\n    ApplyCodeActionReason[\"FromCodeActions\"] = \"fromCodeActions\";\n})(ApplyCodeActionReason || (ApplyCodeActionReason = {}));\nexport function applyCodeAction(accessor, item, codeActionReason, options, token = CancellationToken.None) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const bulkEditService = accessor.get(IBulkEditService);\n        const commandService = accessor.get(ICommandService);\n        const telemetryService = accessor.get(ITelemetryService);\n        const notificationService = accessor.get(INotificationService);\n        telemetryService.publicLog2('codeAction.applyCodeAction', {\n            codeActionTitle: item.action.title,\n            codeActionKind: item.action.kind,\n            codeActionIsPreferred: !!item.action.isPreferred,\n            reason: codeActionReason,\n        });\n        yield item.resolve(token);\n        if (token.isCancellationRequested) {\n            return;\n        }\n        if ((_a = item.action.edit) === null || _a === void 0 ? void 0 : _a.edits.length) {\n            const result = yield bulkEditService.apply(item.action.edit, {\n                editor: options === null || options === void 0 ? void 0 : options.editor,\n                label: item.action.title,\n                quotableLabel: item.action.title,\n                code: 'undoredo.codeAction',\n                respectAutoSaveConfig: codeActionReason !== ApplyCodeActionReason.OnSave,\n                showPreview: options === null || options === void 0 ? void 0 : options.preview,\n            });\n            if (!result.isApplied) {\n                return;\n            }\n        }\n        if (item.action.command) {\n            try {\n                yield commandService.executeCommand(item.action.command.id, ...(item.action.command.arguments || []));\n            }\n            catch (err) {\n                const message = asMessage(err);\n                notificationService.error(typeof message === 'string'\n                    ? message\n                    : nls.localize('applyCodeActionFailed', \"An unknown error occurred while applying the code action\"));\n            }\n        }\n    });\n}\nfunction asMessage(err) {\n    if (typeof err === 'string') {\n        return err;\n    }\n    else if (err instanceof Error && typeof err.message === 'string') {\n        return err.message;\n    }\n    else {\n        return undefined;\n    }\n}\nCommandsRegistry.registerCommand('_executeCodeActionProvider', function (accessor, resource, rangeOrSelection, kind, itemResolveCount) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!(resource instanceof URI)) {\n            throw illegalArgument();\n        }\n        const { codeActionProvider } = accessor.get(ILanguageFeaturesService);\n        const model = accessor.get(IModelService).getModel(resource);\n        if (!model) {\n            throw illegalArgument();\n        }\n        const validatedRangeOrSelection = Selection.isISelection(rangeOrSelection)\n            ? Selection.liftSelection(rangeOrSelection)\n            : Range.isIRange(rangeOrSelection)\n                ? model.validateRange(rangeOrSelection)\n                : undefined;\n        if (!validatedRangeOrSelection) {\n            throw illegalArgument();\n        }\n        const include = typeof kind === 'string' ? new CodeActionKind(kind) : undefined;\n        const codeActionSet = yield getCodeActions(codeActionProvider, model, validatedRangeOrSelection, { type: 1 /* languages.CodeActionTriggerType.Invoke */, triggerAction: CodeActionTriggerSource.Default, filter: { includeSourceActions: true, include } }, Progress.None, CancellationToken.None);\n        const resolving = [];\n        const resolveCount = Math.min(codeActionSet.validActions.length, typeof itemResolveCount === 'number' ? itemResolveCount : 0);\n        for (let i = 0; i < resolveCount; i++) {\n            resolving.push(codeActionSet.validActions[i].resolve(CancellationToken.None));\n        }\n        try {\n            yield Promise.all(resolving);\n            return codeActionSet.validActions.map(item => item.action);\n        }\n        finally {\n            setTimeout(() => codeActionSet.dispose(), 100);\n        }\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { EditorAction, EditorCommand } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { autoFixCommandId, codeActionCommandId, fixAllCommandId, organizeImportsCommandId, quickFixCommandId, refactorCommandId, sourceActionCommandId } from './codeAction.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { CodeActionCommandArgs, CodeActionKind, CodeActionTriggerSource } from '../common/types.js';\nimport { CodeActionController } from './codeActionController.js';\nimport { SUPPORTED_CODE_ACTIONS } from './codeActionModel.js';\nfunction contextKeyForSupportedActions(kind) {\n    return ContextKeyExpr.regex(SUPPORTED_CODE_ACTIONS.keys()[0], new RegExp('(\\\\s|^)' + escapeRegExpCharacters(kind.value) + '\\\\b'));\n}\nconst argsSchema = {\n    type: 'object',\n    defaultSnippets: [{ body: { kind: '' } }],\n    properties: {\n        'kind': {\n            type: 'string',\n            description: nls.localize('args.schema.kind', \"Kind of the code action to run.\"),\n        },\n        'apply': {\n            type: 'string',\n            description: nls.localize('args.schema.apply', \"Controls when the returned actions are applied.\"),\n            default: \"ifSingle\" /* CodeActionAutoApply.IfSingle */,\n            enum: [\"first\" /* CodeActionAutoApply.First */, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, \"never\" /* CodeActionAutoApply.Never */],\n            enumDescriptions: [\n                nls.localize('args.schema.apply.first', \"Always apply the first returned code action.\"),\n                nls.localize('args.schema.apply.ifSingle', \"Apply the first returned code action if it is the only one.\"),\n                nls.localize('args.schema.apply.never', \"Do not apply the returned code actions.\"),\n            ]\n        },\n        'preferred': {\n            type: 'boolean',\n            default: false,\n            description: nls.localize('args.schema.preferred', \"Controls if only preferred code actions should be returned.\"),\n        }\n    }\n};\nfunction triggerCodeActionsForEditorSelection(editor, notAvailableMessage, filter, autoApply, triggerAction = CodeActionTriggerSource.Default) {\n    if (editor.hasModel()) {\n        const controller = CodeActionController.get(editor);\n        controller === null || controller === void 0 ? void 0 : controller.manualTriggerAtCurrentPosition(notAvailableMessage, triggerAction, filter, autoApply);\n    }\n}\nexport class QuickFixAction extends EditorAction {\n    constructor() {\n        super({\n            id: quickFixCommandId,\n            label: nls.localize('quickfix.trigger.label', \"Quick Fix...\"),\n            alias: 'Quick Fix...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.Period */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.quickFix.noneMessage', \"No code actions available\"), undefined, undefined, CodeActionTriggerSource.QuickFix);\n    }\n}\nexport class CodeActionCommand extends EditorCommand {\n    constructor() {\n        super({\n            id: codeActionCommandId,\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            description: {\n                description: 'Trigger a code action',\n                args: [{ name: 'args', schema: argsSchema, }]\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Empty,\n            apply: \"ifSingle\" /* CodeActionAutoApply.IfSingle */,\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred.kind', \"No preferred code actions for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.codeAction.noneMessage.kind', \"No code actions for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred', \"No preferred code actions available\")\n                : nls.localize('editor.action.codeAction.noneMessage', \"No code actions available\"), {\n            include: args.kind,\n            includeSourceActions: true,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply);\n    }\n}\nexport class RefactorAction extends EditorAction {\n    constructor() {\n        super({\n            id: refactorCommandId,\n            label: nls.localize('refactor.label', \"Refactor...\"),\n            alias: 'Refactor...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 48 /* KeyCode.KeyR */,\n                mac: {\n                    primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 48 /* KeyCode.KeyR */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 2,\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Refactor)),\n            },\n            description: {\n                description: 'Refactor...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Refactor,\n            apply: \"never\" /* CodeActionAutoApply.Never */\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.refactor.noneMessage.preferred.kind', \"No preferred refactorings for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.refactor.noneMessage.kind', \"No refactorings for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.refactor.noneMessage.preferred', \"No preferred refactorings available\")\n                : nls.localize('editor.action.refactor.noneMessage', \"No refactorings available\"), {\n            include: CodeActionKind.Refactor.contains(args.kind) ? args.kind : CodeActionKind.None,\n            onlyIncludePreferredActions: args.preferred\n        }, args.apply, CodeActionTriggerSource.Refactor);\n    }\n}\nexport class SourceAction extends EditorAction {\n    constructor() {\n        super({\n            id: sourceActionCommandId,\n            label: nls.localize('source.label', \"Source Action...\"),\n            alias: 'Source Action...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 2.1,\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Source)),\n            },\n            description: {\n                description: 'Source Action...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Source,\n            apply: \"never\" /* CodeActionAutoApply.Never */\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.source.noneMessage.preferred.kind', \"No preferred source actions for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.source.noneMessage.kind', \"No source actions for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.source.noneMessage.preferred', \"No preferred source actions available\")\n                : nls.localize('editor.action.source.noneMessage', \"No source actions available\"), {\n            include: CodeActionKind.Source.contains(args.kind) ? args.kind : CodeActionKind.None,\n            includeSourceActions: true,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply, CodeActionTriggerSource.SourceAction);\n    }\n}\nexport class OrganizeImportsAction extends EditorAction {\n    constructor() {\n        super({\n            id: organizeImportsCommandId,\n            label: nls.localize('organizeImports.label', \"Organize Imports\"),\n            alias: 'Organize Imports',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceOrganizeImports)),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 45 /* KeyCode.KeyO */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.organize.noneMessage', \"No organize imports action available\"), { include: CodeActionKind.SourceOrganizeImports, includeSourceActions: true }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, CodeActionTriggerSource.OrganizeImports);\n    }\n}\nexport class FixAllAction extends EditorAction {\n    constructor() {\n        super({\n            id: fixAllCommandId,\n            label: nls.localize('fixAll.label', \"Fix All\"),\n            alias: 'Fix All',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceFixAll))\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('fixAll.noneMessage', \"No fix all action available\"), { include: CodeActionKind.SourceFixAll, includeSourceActions: true }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, CodeActionTriggerSource.FixAll);\n    }\n}\nexport class AutoFixAction extends EditorAction {\n    constructor() {\n        super({\n            id: autoFixCommandId,\n            label: nls.localize('autoFix.label', \"Auto Fix...\"),\n            alias: 'Auto Fix...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.QuickFix)),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 89 /* KeyCode.Period */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 89 /* KeyCode.Period */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.autoFix.noneMessage', \"No auto fixes available\"), {\n            include: CodeActionKind.QuickFix,\n            onlyIncludePreferredActions: true\n        }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, CodeActionTriggerSource.AutoFix);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { editorConfigurationBaseNode } from '../../../common/config/editorConfigurationSchema.js';\nimport { AutoFixAction, CodeActionCommand, FixAllAction, OrganizeImportsAction, QuickFixAction, RefactorAction, SourceAction } from './codeActionCommands.js';\nimport { CodeActionController } from './codeActionController.js';\nimport { LightBulbWidget } from './lightBulbWidget.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nregisterEditorContribution(CodeActionController.ID, CodeActionController, 3 /* EditorContributionInstantiation.Eventually */);\nregisterEditorContribution(LightBulbWidget.ID, LightBulbWidget, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(QuickFixAction);\nregisterEditorAction(RefactorAction);\nregisterEditorAction(SourceAction);\nregisterEditorAction(OrganizeImportsAction);\nregisterEditorAction(AutoFixAction);\nregisterEditorAction(FixAllAction);\nregisterEditorCommand(new CodeActionCommand());\nRegistry.as(Extensions.Configuration).registerConfiguration(Object.assign(Object.assign({}, editorConfigurationBaseNode), { properties: {\n        'editor.codeActionWidget.showHeaders': {\n            type: 'boolean',\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('showCodeActionHeaders', \"Enable/disable showing group headers in the Code Action menu.\"),\n            default: true,\n        },\n    } }));\nRegistry.as(Extensions.Configuration).registerConfiguration(Object.assign(Object.assign({}, editorConfigurationBaseNode), { properties: {\n        'editor.codeActionWidget.includeNearbyQuickfixes': {\n            type: 'boolean',\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('includeNearbyQuickfixes', \"Enable/disable showing nearest quickfix within a line when not currently on a diagnostic.\"),\n            default: false,\n        },\n    } }));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar CodeActionKeybindingResolver_1;\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { codeActionCommandId, fixAllCommandId, organizeImportsCommandId, refactorCommandId, sourceActionCommandId } from './codeAction.js';\nimport { CodeActionCommandArgs, CodeActionKind } from '../common/types.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nlet CodeActionKeybindingResolver = CodeActionKeybindingResolver_1 = class CodeActionKeybindingResolver {\n    constructor(keybindingService) {\n        this.keybindingService = keybindingService;\n    }\n    getResolver() {\n        // Lazy since we may not actually ever read the value\n        const allCodeActionBindings = new Lazy(() => this.keybindingService.getKeybindings()\n            .filter(item => CodeActionKeybindingResolver_1.codeActionCommands.indexOf(item.command) >= 0)\n            .filter(item => item.resolvedKeybinding)\n            .map((item) => {\n            // Special case these commands since they come built-in with VS Code and don't use 'commandArgs'\n            let commandArgs = item.commandArgs;\n            if (item.command === organizeImportsCommandId) {\n                commandArgs = { kind: CodeActionKind.SourceOrganizeImports.value };\n            }\n            else if (item.command === fixAllCommandId) {\n                commandArgs = { kind: CodeActionKind.SourceFixAll.value };\n            }\n            return Object.assign({ resolvedKeybinding: item.resolvedKeybinding }, CodeActionCommandArgs.fromUser(commandArgs, {\n                kind: CodeActionKind.None,\n                apply: \"never\" /* CodeActionAutoApply.Never */\n            }));\n        }));\n        return (action) => {\n            if (action.kind) {\n                const binding = this.bestKeybindingForCodeAction(action, allCodeActionBindings.value);\n                return binding === null || binding === void 0 ? void 0 : binding.resolvedKeybinding;\n            }\n            return undefined;\n        };\n    }\n    bestKeybindingForCodeAction(action, candidates) {\n        if (!action.kind) {\n            return undefined;\n        }\n        const kind = new CodeActionKind(action.kind);\n        return candidates\n            .filter(candidate => candidate.kind.contains(kind))\n            .filter(candidate => {\n            if (candidate.preferred) {\n                // If the candidate keybinding only applies to preferred actions, the this action must also be preferred\n                return action.isPreferred;\n            }\n            return true;\n        })\n            .reduceRight((currentBest, candidate) => {\n            if (!currentBest) {\n                return candidate;\n            }\n            // Select the more specific binding\n            return currentBest.kind.contains(candidate.kind) ? candidate : currentBest;\n        }, undefined);\n    }\n};\nCodeActionKeybindingResolver.codeActionCommands = [\n    refactorCommandId,\n    codeActionCommandId,\n    sourceActionCommandId,\n    organizeImportsCommandId,\n    fixAllCommandId\n];\nCodeActionKeybindingResolver = CodeActionKeybindingResolver_1 = __decorate([\n    __param(0, IKeybindingService)\n], CodeActionKeybindingResolver);\nexport { CodeActionKeybindingResolver };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { CodeActionKind } from '../common/types.js';\nimport '../../symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport { localize } from '../../../../nls.js';\nconst uncategorizedCodeActionGroup = Object.freeze({ kind: CodeActionKind.Empty, title: localize('codeAction.widget.id.more', 'More Actions...') });\nconst codeActionGroups = Object.freeze([\n    { kind: CodeActionKind.QuickFix, title: localize('codeAction.widget.id.quickfix', 'Quick Fix') },\n    { kind: CodeActionKind.RefactorExtract, title: localize('codeAction.widget.id.extract', 'Extract'), icon: Codicon.wrench },\n    { kind: CodeActionKind.RefactorInline, title: localize('codeAction.widget.id.inline', 'Inline'), icon: Codicon.wrench },\n    { kind: CodeActionKind.RefactorRewrite, title: localize('codeAction.widget.id.convert', 'Rewrite'), icon: Codicon.wrench },\n    { kind: CodeActionKind.RefactorMove, title: localize('codeAction.widget.id.move', 'Move'), icon: Codicon.wrench },\n    { kind: CodeActionKind.SurroundWith, title: localize('codeAction.widget.id.surround', 'Surround With'), icon: Codicon.symbolSnippet },\n    { kind: CodeActionKind.Source, title: localize('codeAction.widget.id.source', 'Source Action'), icon: Codicon.symbolFile },\n    uncategorizedCodeActionGroup,\n]);\nexport function toMenuItems(inputCodeActions, showHeaders, keybindingResolver) {\n    if (!showHeaders) {\n        return inputCodeActions.map((action) => {\n            var _a;\n            return {\n                kind: \"action\" /* ActionListItemKind.Action */,\n                item: action,\n                group: uncategorizedCodeActionGroup,\n                disabled: !!action.action.disabled,\n                label: action.action.disabled || action.action.title,\n                canPreview: !!((_a = action.action.edit) === null || _a === void 0 ? void 0 : _a.edits.length),\n            };\n        });\n    }\n    // Group code actions\n    const menuEntries = codeActionGroups.map(group => ({ group, actions: [] }));\n    for (const action of inputCodeActions) {\n        const kind = action.action.kind ? new CodeActionKind(action.action.kind) : CodeActionKind.None;\n        for (const menuEntry of menuEntries) {\n            if (menuEntry.group.kind.contains(kind)) {\n                menuEntry.actions.push(action);\n                break;\n            }\n        }\n    }\n    const allMenuItems = [];\n    for (const menuEntry of menuEntries) {\n        if (menuEntry.actions.length) {\n            allMenuItems.push({ kind: \"header\" /* ActionListItemKind.Header */, group: menuEntry.group });\n            for (const action of menuEntry.actions) {\n                allMenuItems.push({\n                    kind: \"action\" /* ActionListItemKind.Action */,\n                    item: action,\n                    group: menuEntry.group,\n                    label: action.action.title,\n                    disabled: !!action.action.disabled,\n                    keybinding: keybindingResolver(action.action),\n                });\n            }\n        }\n    }\n    return allMenuItems;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar CodeActionController_1;\nimport { getDomNodePagePosition } from '../../../../base/browser/dom.js';\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ApplyCodeActionReason, applyCodeAction } from './codeAction.js';\nimport { CodeActionKeybindingResolver } from './codeActionKeybindingResolver.js';\nimport { toMenuItems } from './codeActionMenu.js';\nimport { LightBulbWidget } from './lightBulbWidget.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport { localize } from '../../../../nls.js';\nimport { IActionWidgetService } from '../../../../platform/actionWidget/browser/actionWidget.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService } from '../../../../platform/markers/common/markers.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { editorFindMatchHighlight, editorFindMatchHighlightBorder } from '../../../../platform/theme/common/colorRegistry.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { CodeActionTriggerSource } from '../common/types.js';\nimport { CodeActionModel } from './codeActionModel.js';\nconst DECORATION_CLASS_NAME = 'quickfix-edit-highlight';\nlet CodeActionController = CodeActionController_1 = class CodeActionController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(CodeActionController_1.ID);\n    }\n    constructor(editor, markerService, contextKeyService, instantiationService, languageFeaturesService, progressService, _commandService, _configurationService, _actionWidgetService, _instantiationService) {\n        super();\n        this._commandService = _commandService;\n        this._configurationService = _configurationService;\n        this._actionWidgetService = _actionWidgetService;\n        this._instantiationService = _instantiationService;\n        this._activeCodeActions = this._register(new MutableDisposable());\n        this._showDisabled = false;\n        this._disposed = false;\n        this._editor = editor;\n        this._model = this._register(new CodeActionModel(this._editor, languageFeaturesService.codeActionProvider, markerService, contextKeyService, progressService, _configurationService));\n        this._register(this._model.onDidChangeState(newState => this.update(newState)));\n        this._lightBulbWidget = new Lazy(() => {\n            const widget = this._editor.getContribution(LightBulbWidget.ID);\n            if (widget) {\n                this._register(widget.onClick(e => this.showCodeActionList(e.actions, e, { includeDisabledActions: false, fromLightbulb: true })));\n            }\n            return widget;\n        });\n        this._resolver = instantiationService.createInstance(CodeActionKeybindingResolver);\n        this._register(this._editor.onDidLayoutChange(() => this._actionWidgetService.hide()));\n    }\n    dispose() {\n        this._disposed = true;\n        super.dispose();\n    }\n    showCodeActions(_trigger, actions, at) {\n        return this.showCodeActionList(actions, at, { includeDisabledActions: false, fromLightbulb: false });\n    }\n    manualTriggerAtCurrentPosition(notAvailableMessage, triggerAction, filter, autoApply) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        (_a = MessageController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.closeMessage();\n        const triggerPosition = this._editor.getPosition();\n        this._trigger({ type: 1 /* CodeActionTriggerType.Invoke */, triggerAction, filter, autoApply, context: { notAvailableMessage, position: triggerPosition } });\n    }\n    _trigger(trigger) {\n        return this._model.trigger(trigger);\n    }\n    _applyCodeAction(action, retrigger, preview) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._instantiationService.invokeFunction(applyCodeAction, action, ApplyCodeActionReason.FromCodeActions, { preview, editor: this._editor });\n            }\n            finally {\n                if (retrigger) {\n                    this._trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.QuickFix, filter: {} });\n                }\n            }\n        });\n    }\n    update(newState) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (newState.type !== 1 /* CodeActionsState.Type.Triggered */) {\n                (_a = this._lightBulbWidget.rawValue) === null || _a === void 0 ? void 0 : _a.hide();\n                return;\n            }\n            let actions;\n            try {\n                actions = yield newState.actions;\n            }\n            catch (e) {\n                onUnexpectedError(e);\n                return;\n            }\n            if (this._disposed) {\n                return;\n            }\n            (_b = this._lightBulbWidget.value) === null || _b === void 0 ? void 0 : _b.update(actions, newState.trigger, newState.position);\n            if (newState.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\n                if ((_c = newState.trigger.filter) === null || _c === void 0 ? void 0 : _c.include) { // Triggered for specific scope\n                    // Check to see if we want to auto apply.\n                    const validActionToApply = this.tryGetValidActionToApply(newState.trigger, actions);\n                    if (validActionToApply) {\n                        try {\n                            (_d = this._lightBulbWidget.value) === null || _d === void 0 ? void 0 : _d.hide();\n                            yield this._applyCodeAction(validActionToApply, false, false);\n                        }\n                        finally {\n                            actions.dispose();\n                        }\n                        return;\n                    }\n                    // Check to see if there is an action that we would have applied were it not invalid\n                    if (newState.trigger.context) {\n                        const invalidAction = this.getInvalidActionThatWouldHaveBeenApplied(newState.trigger, actions);\n                        if (invalidAction && invalidAction.action.disabled) {\n                            (_e = MessageController.get(this._editor)) === null || _e === void 0 ? void 0 : _e.showMessage(invalidAction.action.disabled, newState.trigger.context.position);\n                            actions.dispose();\n                            return;\n                        }\n                    }\n                }\n                const includeDisabledActions = !!((_f = newState.trigger.filter) === null || _f === void 0 ? void 0 : _f.include);\n                if (newState.trigger.context) {\n                    if (!actions.allActions.length || !includeDisabledActions && !actions.validActions.length) {\n                        (_g = MessageController.get(this._editor)) === null || _g === void 0 ? void 0 : _g.showMessage(newState.trigger.context.notAvailableMessage, newState.trigger.context.position);\n                        this._activeCodeActions.value = actions;\n                        actions.dispose();\n                        return;\n                    }\n                }\n                this._activeCodeActions.value = actions;\n                this.showCodeActionList(actions, this.toCoords(newState.position), { includeDisabledActions, fromLightbulb: false });\n            }\n            else {\n                // auto magically triggered\n                if (this._actionWidgetService.isVisible) {\n                    // TODO: Figure out if we should update the showing menu?\n                    actions.dispose();\n                }\n                else {\n                    this._activeCodeActions.value = actions;\n                }\n            }\n        });\n    }\n    getInvalidActionThatWouldHaveBeenApplied(trigger, actions) {\n        if (!actions.allActions.length) {\n            return undefined;\n        }\n        if ((trigger.autoApply === \"first\" /* CodeActionAutoApply.First */ && actions.validActions.length === 0)\n            || (trigger.autoApply === \"ifSingle\" /* CodeActionAutoApply.IfSingle */ && actions.allActions.length === 1)) {\n            return actions.allActions.find(({ action }) => action.disabled);\n        }\n        return undefined;\n    }\n    tryGetValidActionToApply(trigger, actions) {\n        if (!actions.validActions.length) {\n            return undefined;\n        }\n        if ((trigger.autoApply === \"first\" /* CodeActionAutoApply.First */ && actions.validActions.length > 0)\n            || (trigger.autoApply === \"ifSingle\" /* CodeActionAutoApply.IfSingle */ && actions.validActions.length === 1)) {\n            return actions.validActions[0];\n        }\n        return undefined;\n    }\n    showCodeActionList(actions, at, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const currentDecorations = this._editor.createDecorationsCollection();\n            const editorDom = this._editor.getDomNode();\n            if (!editorDom) {\n                return;\n            }\n            const actionsToShow = options.includeDisabledActions && (this._showDisabled || actions.validActions.length === 0) ? actions.allActions : actions.validActions;\n            if (!actionsToShow.length) {\n                return;\n            }\n            const anchor = Position.isIPosition(at) ? this.toCoords(at) : at;\n            const delegate = {\n                onSelect: (action, preview) => __awaiter(this, void 0, void 0, function* () {\n                    this._applyCodeAction(action, /* retrigger */ true, !!preview);\n                    this._actionWidgetService.hide();\n                    currentDecorations.clear();\n                }),\n                onHide: () => {\n                    var _a;\n                    (_a = this._editor) === null || _a === void 0 ? void 0 : _a.focus();\n                    currentDecorations.clear();\n                },\n                onHover: (action, token) => __awaiter(this, void 0, void 0, function* () {\n                    var _a;\n                    yield action.resolve(token);\n                    if (token.isCancellationRequested) {\n                        return;\n                    }\n                    return { canPreview: !!((_a = action.action.edit) === null || _a === void 0 ? void 0 : _a.edits.length) };\n                }),\n                onFocus: (action) => {\n                    var _a, _b;\n                    if (action && action.highlightRange && action.action.diagnostics) {\n                        const decorations = [{ range: action.action.diagnostics[0], options: CodeActionController_1.DECORATION }];\n                        currentDecorations.set(decorations);\n                        const diagnostic = action.action.diagnostics[0];\n                        const selectionText = (_b = (_a = this._editor.getModel()) === null || _a === void 0 ? void 0 : _a.getWordAtPosition({ lineNumber: diagnostic.startLineNumber, column: diagnostic.startColumn })) === null || _b === void 0 ? void 0 : _b.word;\n                        aria.status(localize('editingNewSelection', \"Context: {0} at line {1} and column {2}.\", selectionText, diagnostic.startLineNumber, diagnostic.startColumn));\n                    }\n                    else {\n                        currentDecorations.clear();\n                    }\n                }\n            };\n            this._actionWidgetService.show('codeActionWidget', true, toMenuItems(actionsToShow, this._shouldShowHeaders(), this._resolver.getResolver()), delegate, anchor, editorDom, this._getActionBarActions(actions, at, options));\n        });\n    }\n    toCoords(position) {\n        if (!this._editor.hasModel()) {\n            return { x: 0, y: 0 };\n        }\n        this._editor.revealPosition(position, 1 /* ScrollType.Immediate */);\n        this._editor.render();\n        // Translate to absolute editor position\n        const cursorCoords = this._editor.getScrolledVisiblePosition(position);\n        const editorCoords = getDomNodePagePosition(this._editor.getDomNode());\n        const x = editorCoords.left + cursorCoords.left;\n        const y = editorCoords.top + cursorCoords.top + cursorCoords.height;\n        return { x, y };\n    }\n    _shouldShowHeaders() {\n        var _a;\n        const model = (_a = this._editor) === null || _a === void 0 ? void 0 : _a.getModel();\n        return this._configurationService.getValue('editor.codeActionWidget.showHeaders', { resource: model === null || model === void 0 ? void 0 : model.uri });\n    }\n    _getActionBarActions(actions, at, options) {\n        if (options.fromLightbulb) {\n            return [];\n        }\n        const resultActions = actions.documentation.map((command) => {\n            var _a;\n            return ({\n                id: command.id,\n                label: command.title,\n                tooltip: (_a = command.tooltip) !== null && _a !== void 0 ? _a : '',\n                class: undefined,\n                enabled: true,\n                run: () => { var _a; return this._commandService.executeCommand(command.id, ...((_a = command.arguments) !== null && _a !== void 0 ? _a : [])); },\n            });\n        });\n        if (options.includeDisabledActions && actions.validActions.length > 0 && actions.allActions.length !== actions.validActions.length) {\n            resultActions.push(this._showDisabled ? {\n                id: 'hideMoreActions',\n                label: localize('hideMoreActions', 'Hide Disabled'),\n                enabled: true,\n                tooltip: '',\n                class: undefined,\n                run: () => {\n                    this._showDisabled = false;\n                    return this.showCodeActionList(actions, at, options);\n                }\n            } : {\n                id: 'showMoreActions',\n                label: localize('showMoreActions', 'Show Disabled'),\n                enabled: true,\n                tooltip: '',\n                class: undefined,\n                run: () => {\n                    this._showDisabled = true;\n                    return this.showCodeActionList(actions, at, options);\n                }\n            });\n        }\n        return resultActions;\n    }\n};\nCodeActionController.ID = 'editor.contrib.codeActionController';\nCodeActionController.DECORATION = ModelDecorationOptions.register({\n    description: 'quickfix-highlight',\n    className: DECORATION_CLASS_NAME\n});\nCodeActionController = CodeActionController_1 = __decorate([\n    __param(1, IMarkerService),\n    __param(2, IContextKeyService),\n    __param(3, IInstantiationService),\n    __param(4, ILanguageFeaturesService),\n    __param(5, IEditorProgressService),\n    __param(6, ICommandService),\n    __param(7, IConfigurationService),\n    __param(8, IActionWidgetService),\n    __param(9, IInstantiationService)\n], CodeActionController);\nexport { CodeActionController };\nregisterThemingParticipant((theme, collector) => {\n    const addBackgroundColorRule = (selector, color) => {\n        if (color) {\n            collector.addRule(`.monaco-editor ${selector} { background-color: ${color}; }`);\n        }\n    };\n    addBackgroundColorRule('.quickfix-edit-highlight', theme.getColor(editorFindMatchHighlight));\n    const findMatchHighlightBorder = theme.getColor(editorFindMatchHighlightBorder);\n    if (findMatchHighlightBorder) {\n        collector.addRule(`.monaco-editor .quickfix-edit-highlight { border: 1px ${isHighContrast(theme.type) ? 'dotted' : 'solid'} ${findMatchHighlightBorder}; box-sizing: border-box; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { isCancellationError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { CodeActionKind, CodeActionTriggerSource } from '../common/types.js';\nimport { getCodeActions } from './codeAction.js';\nexport const SUPPORTED_CODE_ACTIONS = new RawContextKey('supportedCodeAction', '');\nclass CodeActionOracle extends Disposable {\n    constructor(_editor, _markerService, _signalChange, _delay = 250) {\n        super();\n        this._editor = _editor;\n        this._markerService = _markerService;\n        this._signalChange = _signalChange;\n        this._delay = _delay;\n        this._autoTriggerTimer = this._register(new TimeoutTimer());\n        this._register(this._markerService.onMarkerChanged(e => this._onMarkerChanges(e)));\n        this._register(this._editor.onDidChangeCursorPosition(() => this._tryAutoTrigger()));\n    }\n    trigger(trigger) {\n        const selection = this._getRangeOfSelectionUnlessWhitespaceEnclosed(trigger);\n        this._signalChange(selection ? { trigger, selection } : undefined);\n    }\n    _onMarkerChanges(resources) {\n        const model = this._editor.getModel();\n        if (model && resources.some(resource => isEqual(resource, model.uri))) {\n            this._tryAutoTrigger();\n        }\n    }\n    _tryAutoTrigger() {\n        this._autoTriggerTimer.cancelAndSet(() => {\n            this.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\n        }, this._delay);\n    }\n    _getRangeOfSelectionUnlessWhitespaceEnclosed(trigger) {\n        if (!this._editor.hasModel()) {\n            return undefined;\n        }\n        const model = this._editor.getModel();\n        const selection = this._editor.getSelection();\n        if (selection.isEmpty() && trigger.type === 2 /* CodeActionTriggerType.Auto */) {\n            const { lineNumber, column } = selection.getPosition();\n            const line = model.getLineContent(lineNumber);\n            if (line.length === 0) {\n                // empty line\n                return undefined;\n            }\n            else if (column === 1) {\n                // look only right\n                if (/\\s/.test(line[0])) {\n                    return undefined;\n                }\n            }\n            else if (column === model.getLineMaxColumn(lineNumber)) {\n                // look only left\n                if (/\\s/.test(line[line.length - 1])) {\n                    return undefined;\n                }\n            }\n            else {\n                // look left and right\n                if (/\\s/.test(line[column - 2]) && /\\s/.test(line[column - 1])) {\n                    return undefined;\n                }\n            }\n        }\n        return selection;\n    }\n}\nexport var CodeActionsState;\n(function (CodeActionsState) {\n    CodeActionsState.Empty = { type: 0 /* Type.Empty */ };\n    class Triggered {\n        constructor(trigger, position, _cancellablePromise) {\n            this.trigger = trigger;\n            this.position = position;\n            this._cancellablePromise = _cancellablePromise;\n            this.type = 1 /* Type.Triggered */;\n            this.actions = _cancellablePromise.catch((e) => {\n                if (isCancellationError(e)) {\n                    return emptyCodeActionSet;\n                }\n                throw e;\n            });\n        }\n        cancel() {\n            this._cancellablePromise.cancel();\n        }\n    }\n    CodeActionsState.Triggered = Triggered;\n})(CodeActionsState || (CodeActionsState = {}));\nconst emptyCodeActionSet = Object.freeze({\n    allActions: [],\n    validActions: [],\n    dispose: () => { },\n    documentation: [],\n    hasAutoFix: false\n});\nexport class CodeActionModel extends Disposable {\n    constructor(_editor, _registry, _markerService, contextKeyService, _progressService, _configurationService) {\n        super();\n        this._editor = _editor;\n        this._registry = _registry;\n        this._markerService = _markerService;\n        this._progressService = _progressService;\n        this._configurationService = _configurationService;\n        this._codeActionOracle = this._register(new MutableDisposable());\n        this._state = CodeActionsState.Empty;\n        this._onDidChangeState = this._register(new Emitter());\n        this.onDidChangeState = this._onDidChangeState.event;\n        this._disposed = false;\n        this._supportedCodeActions = SUPPORTED_CODE_ACTIONS.bindTo(contextKeyService);\n        this._register(this._editor.onDidChangeModel(() => this._update()));\n        this._register(this._editor.onDidChangeModelLanguage(() => this._update()));\n        this._register(this._registry.onDidChange(() => this._update()));\n        this._update();\n    }\n    dispose() {\n        if (this._disposed) {\n            return;\n        }\n        this._disposed = true;\n        super.dispose();\n        this.setState(CodeActionsState.Empty, true);\n    }\n    _settingEnabledNearbyQuickfixes() {\n        var _a;\n        const model = (_a = this._editor) === null || _a === void 0 ? void 0 : _a.getModel();\n        return this._configurationService ? this._configurationService.getValue('editor.codeActionWidget.includeNearbyQuickfixes', { resource: model === null || model === void 0 ? void 0 : model.uri }) : false;\n    }\n    _update() {\n        if (this._disposed) {\n            return;\n        }\n        this._codeActionOracle.value = undefined;\n        this.setState(CodeActionsState.Empty);\n        const model = this._editor.getModel();\n        if (model\n            && this._registry.has(model)\n            && !this._editor.getOption(90 /* EditorOption.readOnly */)) {\n            const supportedActions = this._registry.all(model).flatMap(provider => { var _a; return (_a = provider.providedCodeActionKinds) !== null && _a !== void 0 ? _a : []; });\n            this._supportedCodeActions.set(supportedActions.join(' '));\n            this._codeActionOracle.value = new CodeActionOracle(this._editor, this._markerService, trigger => {\n                var _a;\n                if (!trigger) {\n                    this.setState(CodeActionsState.Empty);\n                    return;\n                }\n                const startPosition = trigger.selection.getStartPosition();\n                const actions = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                    var _b, _c, _d, _e, _f, _g;\n                    if (this._settingEnabledNearbyQuickfixes() && trigger.trigger.type === 1 /* CodeActionTriggerType.Invoke */ && (trigger.trigger.triggerAction === CodeActionTriggerSource.QuickFix || ((_c = (_b = trigger.trigger.filter) === null || _b === void 0 ? void 0 : _b.include) === null || _c === void 0 ? void 0 : _c.contains(CodeActionKind.QuickFix)))) {\n                        const codeActionSet = yield getCodeActions(this._registry, model, trigger.selection, trigger.trigger, Progress.None, token);\n                        if (token.isCancellationRequested) {\n                            return emptyCodeActionSet;\n                        }\n                        // Search for quickfixes in the curret code action set.\n                        const foundQuickfix = (_d = codeActionSet.validActions) === null || _d === void 0 ? void 0 : _d.some(action => action.action.kind ? CodeActionKind.QuickFix.contains(new CodeActionKind(action.action.kind)) : false);\n                        if (!foundQuickfix) {\n                            const allMarkers = this._markerService.read({ resource: model.uri });\n                            // If markers exists, and there are no quickfixes found or length is zero, check for quickfixes on that line.\n                            if (allMarkers.length > 0) {\n                                const currPosition = trigger.selection.getPosition();\n                                let trackedPosition = currPosition;\n                                let distance = Number.MAX_VALUE;\n                                let toBeModified = false;\n                                for (const marker of allMarkers) {\n                                    const col = marker.endColumn;\n                                    const row = marker.endLineNumber;\n                                    const startRow = marker.startLineNumber;\n                                    // Found quickfix on the same line and check relative distance to other markers\n                                    if ((row === currPosition.lineNumber || startRow === currPosition.lineNumber) && Math.abs(currPosition.column - col) < distance) {\n                                        distance = Math.abs(currPosition.column - col);\n                                        toBeModified = true;\n                                        trackedPosition = new Position(row, col);\n                                    }\n                                }\n                                // Only retriggers if actually found quickfix on the same line as cursor\n                                if (toBeModified) {\n                                    const newCodeActionTrigger = {\n                                        type: trigger.trigger.type,\n                                        triggerAction: trigger.trigger.triggerAction,\n                                        filter: { include: ((_e = trigger.trigger.filter) === null || _e === void 0 ? void 0 : _e.include) ? (_f = trigger.trigger.filter) === null || _f === void 0 ? void 0 : _f.include : CodeActionKind.QuickFix },\n                                        autoApply: trigger.trigger.autoApply,\n                                        context: { notAvailableMessage: ((_g = trigger.trigger.context) === null || _g === void 0 ? void 0 : _g.notAvailableMessage) || '', position: trackedPosition }\n                                    };\n                                    const selectionAsPosition = new Selection(trackedPosition.lineNumber, trackedPosition.column, trackedPosition.lineNumber, trackedPosition.column);\n                                    const actionsAtMarker = yield getCodeActions(this._registry, model, selectionAsPosition, newCodeActionTrigger, Progress.None, token);\n                                    const currentActions = [...codeActionSet.validActions];\n                                    if (actionsAtMarker.validActions.length !== 0) {\n                                        actionsAtMarker.validActions.forEach(action => {\n                                            action.highlightRange = action.action.isPreferred;\n                                        });\n                                        // Already filtered through to only get quickfixes, so no need to filter again.\n                                        currentActions.push(...actionsAtMarker.validActions);\n                                    }\n                                    return { validActions: currentActions, allActions: codeActionSet.allActions, documentation: codeActionSet.documentation, hasAutoFix: codeActionSet.hasAutoFix, dispose: () => { codeActionSet.dispose(); } };\n                                }\n                            }\n                        }\n                    }\n                    // temporarilly hiding here as this is enabled/disabled behind a setting.\n                    return getCodeActions(this._registry, model, trigger.selection, trigger.trigger, Progress.None, token);\n                }));\n                if (trigger.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\n                    (_a = this._progressService) === null || _a === void 0 ? void 0 : _a.showWhile(actions, 250);\n                }\n                this.setState(new CodeActionsState.Triggered(trigger.trigger, startPosition, actions));\n            }, undefined);\n            this._codeActionOracle.value.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\n        }\n        else {\n            this._supportedCodeActions.reset();\n        }\n    }\n    trigger(trigger) {\n        var _a;\n        (_a = this._codeActionOracle.value) === null || _a === void 0 ? void 0 : _a.trigger(trigger);\n    }\n    setState(newState, skipNotify) {\n        if (newState === this._state) {\n            return;\n        }\n        // Cancel old request\n        if (this._state.type === 1 /* CodeActionsState.Type.Triggered */) {\n            this._state.cancel();\n        }\n        this._state = newState;\n        if (!skipNotify && !this._disposed) {\n            this._onDidChangeState.fire(newState);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar LightBulbWidget_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Gesture } from '../../../../base/browser/touch.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport './lightBulbWidget.css';\nimport { computeIndentLevel } from '../../../common/model/utils.js';\nimport { autoFixCommandId, quickFixCommandId } from './codeAction.js';\nimport * as nls from '../../../../nls.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nvar LightBulbState;\n(function (LightBulbState) {\n    LightBulbState.Hidden = { type: 0 /* Type.Hidden */ };\n    class Showing {\n        constructor(actions, trigger, editorPosition, widgetPosition) {\n            this.actions = actions;\n            this.trigger = trigger;\n            this.editorPosition = editorPosition;\n            this.widgetPosition = widgetPosition;\n            this.type = 1 /* Type.Showing */;\n        }\n    }\n    LightBulbState.Showing = Showing;\n})(LightBulbState || (LightBulbState = {}));\nlet LightBulbWidget = LightBulbWidget_1 = class LightBulbWidget extends Disposable {\n    constructor(_editor, keybindingService) {\n        super();\n        this._editor = _editor;\n        this._onClick = this._register(new Emitter());\n        this.onClick = this._onClick.event;\n        this._state = LightBulbState.Hidden;\n        this._domNode = dom.$('div.lightBulbWidget');\n        this._register(Gesture.ignoreTarget(this._domNode));\n        this._editor.addContentWidget(this);\n        this._register(this._editor.onDidChangeModelContent(_ => {\n            // cancel when the line in question has been removed\n            const editorModel = this._editor.getModel();\n            if (this.state.type !== 1 /* LightBulbState.Type.Showing */ || !editorModel || this.state.editorPosition.lineNumber >= editorModel.getLineCount()) {\n                this.hide();\n            }\n        }));\n        this._register(dom.addStandardDisposableGenericMouseDownListener(this._domNode, e => {\n            if (this.state.type !== 1 /* LightBulbState.Type.Showing */) {\n                return;\n            }\n            // Make sure that focus / cursor location is not lost when clicking widget icon\n            this._editor.focus();\n            e.preventDefault();\n            // a bit of extra work to make sure the menu\n            // doesn't cover the line-text\n            const { top, height } = dom.getDomNodePagePosition(this._domNode);\n            const lineHeight = this._editor.getOption(66 /* EditorOption.lineHeight */);\n            let pad = Math.floor(lineHeight / 3);\n            if (this.state.widgetPosition.position !== null && this.state.widgetPosition.position.lineNumber < this.state.editorPosition.lineNumber) {\n                pad += lineHeight;\n            }\n            this._onClick.fire({\n                x: e.posx,\n                y: top + height + pad,\n                actions: this.state.actions,\n                trigger: this.state.trigger,\n            });\n        }));\n        this._register(dom.addDisposableListener(this._domNode, 'mouseenter', (e) => {\n            if ((e.buttons & 1) !== 1) {\n                return;\n            }\n            // mouse enters lightbulb while the primary/left button\n            // is being pressed -> hide the lightbulb\n            this.hide();\n        }));\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            // hide when told to do so\n            if (e.hasChanged(64 /* EditorOption.lightbulb */) && !this._editor.getOption(64 /* EditorOption.lightbulb */).enabled) {\n                this.hide();\n            }\n        }));\n        this._register(Event.runAndSubscribe(keybindingService.onDidUpdateKeybindings, () => {\n            var _a, _b, _c, _d;\n            this._preferredKbLabel = (_b = (_a = keybindingService.lookupKeybinding(autoFixCommandId)) === null || _a === void 0 ? void 0 : _a.getLabel()) !== null && _b !== void 0 ? _b : undefined;\n            this._quickFixKbLabel = (_d = (_c = keybindingService.lookupKeybinding(quickFixCommandId)) === null || _c === void 0 ? void 0 : _c.getLabel()) !== null && _d !== void 0 ? _d : undefined;\n            this._updateLightBulbTitleAndIcon();\n        }));\n    }\n    dispose() {\n        super.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return 'LightBulbWidget';\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return this._state.type === 1 /* LightBulbState.Type.Showing */ ? this._state.widgetPosition : null;\n    }\n    update(actions, trigger, atPosition) {\n        if (actions.validActions.length <= 0) {\n            return this.hide();\n        }\n        const options = this._editor.getOptions();\n        if (!options.get(64 /* EditorOption.lightbulb */).enabled) {\n            return this.hide();\n        }\n        const model = this._editor.getModel();\n        if (!model) {\n            return this.hide();\n        }\n        const { lineNumber, column } = model.validatePosition(atPosition);\n        const tabSize = model.getOptions().tabSize;\n        const fontInfo = options.get(50 /* EditorOption.fontInfo */);\n        const lineContent = model.getLineContent(lineNumber);\n        const indent = computeIndentLevel(lineContent, tabSize);\n        const lineHasSpace = fontInfo.spaceWidth * indent > 22;\n        const isFolded = (lineNumber) => {\n            return lineNumber > 2 && this._editor.getTopForLineNumber(lineNumber) === this._editor.getTopForLineNumber(lineNumber - 1);\n        };\n        let effectiveLineNumber = lineNumber;\n        if (!lineHasSpace) {\n            if (lineNumber > 1 && !isFolded(lineNumber - 1)) {\n                effectiveLineNumber -= 1;\n            }\n            else if (!isFolded(lineNumber + 1)) {\n                effectiveLineNumber += 1;\n            }\n            else if (column * fontInfo.spaceWidth < 22) {\n                // cannot show lightbulb above/below and showing\n                // it inline would overlay the cursor...\n                return this.hide();\n            }\n        }\n        this.state = new LightBulbState.Showing(actions, trigger, atPosition, {\n            position: { lineNumber: effectiveLineNumber, column: 1 },\n            preference: LightBulbWidget_1._posPref\n        });\n        this._editor.layoutContentWidget(this);\n    }\n    hide() {\n        if (this.state === LightBulbState.Hidden) {\n            return;\n        }\n        this.state = LightBulbState.Hidden;\n        this._editor.layoutContentWidget(this);\n    }\n    get state() { return this._state; }\n    set state(value) {\n        this._state = value;\n        this._updateLightBulbTitleAndIcon();\n    }\n    _updateLightBulbTitleAndIcon() {\n        if (this.state.type === 1 /* LightBulbState.Type.Showing */ && this.state.actions.hasAutoFix) {\n            // update icon\n            this._domNode.classList.remove(...ThemeIcon.asClassNameArray(Codicon.lightBulb));\n            this._domNode.classList.add(...ThemeIcon.asClassNameArray(Codicon.lightbulbAutofix));\n            if (this._preferredKbLabel) {\n                this.title = nls.localize('preferredcodeActionWithKb', \"Show Code Actions. Preferred Quick Fix Available ({0})\", this._preferredKbLabel);\n                return;\n            }\n        }\n        // update icon\n        this._domNode.classList.remove(...ThemeIcon.asClassNameArray(Codicon.lightbulbAutofix));\n        this._domNode.classList.add(...ThemeIcon.asClassNameArray(Codicon.lightBulb));\n        if (this._quickFixKbLabel) {\n            this.title = nls.localize('codeActionWithKb', \"Show Code Actions ({0})\", this._quickFixKbLabel);\n        }\n        else {\n            this.title = nls.localize('codeAction', \"Show Code Actions\");\n        }\n    }\n    set title(value) {\n        this._domNode.title = value;\n    }\n};\nLightBulbWidget.ID = 'editor.contrib.lightbulbWidget';\nLightBulbWidget._posPref = [0 /* ContentWidgetPositionPreference.EXACT */];\nLightBulbWidget = LightBulbWidget_1 = __decorate([\n    __param(1, IKeybindingService)\n], LightBulbWidget);\nexport { LightBulbWidget };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nexport class CodeActionKind {\n    constructor(value) {\n        this.value = value;\n    }\n    equals(other) {\n        return this.value === other.value;\n    }\n    contains(other) {\n        return this.equals(other) || this.value === '' || other.value.startsWith(this.value + CodeActionKind.sep);\n    }\n    intersects(other) {\n        return this.contains(other) || other.contains(this);\n    }\n    append(part) {\n        return new CodeActionKind(this.value + CodeActionKind.sep + part);\n    }\n}\nCodeActionKind.sep = '.';\nCodeActionKind.None = new CodeActionKind('@@none@@'); // Special code action that contains nothing\nCodeActionKind.Empty = new CodeActionKind('');\nCodeActionKind.QuickFix = new CodeActionKind('quickfix');\nCodeActionKind.Refactor = new CodeActionKind('refactor');\nCodeActionKind.RefactorExtract = CodeActionKind.Refactor.append('extract');\nCodeActionKind.RefactorInline = CodeActionKind.Refactor.append('inline');\nCodeActionKind.RefactorMove = CodeActionKind.Refactor.append('move');\nCodeActionKind.RefactorRewrite = CodeActionKind.Refactor.append('rewrite');\nCodeActionKind.Notebook = new CodeActionKind('notebook');\nCodeActionKind.Source = new CodeActionKind('source');\nCodeActionKind.SourceOrganizeImports = CodeActionKind.Source.append('organizeImports');\nCodeActionKind.SourceFixAll = CodeActionKind.Source.append('fixAll');\nCodeActionKind.SurroundWith = CodeActionKind.Refactor.append('surround');\nexport var CodeActionTriggerSource;\n(function (CodeActionTriggerSource) {\n    CodeActionTriggerSource[\"Refactor\"] = \"refactor\";\n    CodeActionTriggerSource[\"RefactorPreview\"] = \"refactor preview\";\n    CodeActionTriggerSource[\"Lightbulb\"] = \"lightbulb\";\n    CodeActionTriggerSource[\"Default\"] = \"other (default)\";\n    CodeActionTriggerSource[\"SourceAction\"] = \"source action\";\n    CodeActionTriggerSource[\"QuickFix\"] = \"quick fix action\";\n    CodeActionTriggerSource[\"FixAll\"] = \"fix all\";\n    CodeActionTriggerSource[\"OrganizeImports\"] = \"organize imports\";\n    CodeActionTriggerSource[\"AutoFix\"] = \"auto fix\";\n    CodeActionTriggerSource[\"QuickFixHover\"] = \"quick fix hover window\";\n    CodeActionTriggerSource[\"OnSave\"] = \"save participants\";\n    CodeActionTriggerSource[\"ProblemsView\"] = \"problems view\";\n})(CodeActionTriggerSource || (CodeActionTriggerSource = {}));\nexport function mayIncludeActionsOfKind(filter, providedKind) {\n    // A provided kind may be a subset or superset of our filtered kind.\n    if (filter.include && !filter.include.intersects(providedKind)) {\n        return false;\n    }\n    if (filter.excludes) {\n        if (filter.excludes.some(exclude => excludesAction(providedKind, exclude, filter.include))) {\n            return false;\n        }\n    }\n    // Don't return source actions unless they are explicitly requested\n    if (!filter.includeSourceActions && CodeActionKind.Source.contains(providedKind)) {\n        return false;\n    }\n    return true;\n}\nexport function filtersAction(filter, action) {\n    const actionKind = action.kind ? new CodeActionKind(action.kind) : undefined;\n    // Filter out actions by kind\n    if (filter.include) {\n        if (!actionKind || !filter.include.contains(actionKind)) {\n            return false;\n        }\n    }\n    if (filter.excludes) {\n        if (actionKind && filter.excludes.some(exclude => excludesAction(actionKind, exclude, filter.include))) {\n            return false;\n        }\n    }\n    // Don't return source actions unless they are explicitly requested\n    if (!filter.includeSourceActions) {\n        if (actionKind && CodeActionKind.Source.contains(actionKind)) {\n            return false;\n        }\n    }\n    if (filter.onlyIncludePreferredActions) {\n        if (!action.isPreferred) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction excludesAction(providedKind, exclude, include) {\n    if (!exclude.contains(providedKind)) {\n        return false;\n    }\n    if (include && exclude.contains(include)) {\n        // The include is more specific, don't filter out\n        return false;\n    }\n    return true;\n}\nexport class CodeActionCommandArgs {\n    static fromUser(arg, defaults) {\n        if (!arg || typeof arg !== 'object') {\n            return new CodeActionCommandArgs(defaults.kind, defaults.apply, false);\n        }\n        return new CodeActionCommandArgs(CodeActionCommandArgs.getKindFromUser(arg, defaults.kind), CodeActionCommandArgs.getApplyFromUser(arg, defaults.apply), CodeActionCommandArgs.getPreferredUser(arg));\n    }\n    static getApplyFromUser(arg, defaultAutoApply) {\n        switch (typeof arg.apply === 'string' ? arg.apply.toLowerCase() : '') {\n            case 'first': return \"first\" /* CodeActionAutoApply.First */;\n            case 'never': return \"never\" /* CodeActionAutoApply.Never */;\n            case 'ifsingle': return \"ifSingle\" /* CodeActionAutoApply.IfSingle */;\n            default: return defaultAutoApply;\n        }\n    }\n    static getKindFromUser(arg, defaultKind) {\n        return typeof arg.kind === 'string'\n            ? new CodeActionKind(arg.kind)\n            : defaultKind;\n    }\n    static getPreferredUser(arg) {\n        return typeof arg.preferred === 'boolean'\n            ? arg.preferred\n            : false;\n    }\n    constructor(kind, apply, preferred) {\n        this.kind = kind;\n        this.apply = apply;\n        this.preferred = preferred;\n    }\n}\nexport class CodeActionItem {\n    constructor(action, provider, highlightRange) {\n        this.action = action;\n        this.provider = provider;\n        this.highlightRange = highlightRange;\n    }\n    resolve(token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (((_a = this.provider) === null || _a === void 0 ? void 0 : _a.resolveCodeAction) && !this.action.edit) {\n                let action;\n                try {\n                    action = yield this.provider.resolveCodeAction(this.action, token);\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n                if (action) {\n                    this.action.edit = action.edit;\n                }\n            }\n            return this;\n        });\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class CodeLensModel {\n    constructor() {\n        this.lenses = [];\n        this._disposables = new DisposableStore();\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    get isDisposed() {\n        return this._disposables.isDisposed;\n    }\n    add(list, provider) {\n        this._disposables.add(list);\n        for (const symbol of list.lenses) {\n            this.lenses.push({ symbol, provider });\n        }\n    }\n}\nexport function getCodeLensModel(registry, model, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const provider = registry.ordered(model);\n        const providerRanks = new Map();\n        const result = new CodeLensModel();\n        const promises = provider.map((provider, i) => __awaiter(this, void 0, void 0, function* () {\n            providerRanks.set(provider, i);\n            try {\n                const list = yield Promise.resolve(provider.provideCodeLenses(model, token));\n                if (list) {\n                    result.add(list, provider);\n                }\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n            }\n        }));\n        yield Promise.all(promises);\n        result.lenses = result.lenses.sort((a, b) => {\n            // sort by lineNumber, provider-rank, and column\n            if (a.symbol.range.startLineNumber < b.symbol.range.startLineNumber) {\n                return -1;\n            }\n            else if (a.symbol.range.startLineNumber > b.symbol.range.startLineNumber) {\n                return 1;\n            }\n            else if ((providerRanks.get(a.provider)) < (providerRanks.get(b.provider))) {\n                return -1;\n            }\n            else if ((providerRanks.get(a.provider)) > (providerRanks.get(b.provider))) {\n                return 1;\n            }\n            else if (a.symbol.range.startColumn < b.symbol.range.startColumn) {\n                return -1;\n            }\n            else if (a.symbol.range.startColumn > b.symbol.range.startColumn) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        });\n        return result;\n    });\n}\nCommandsRegistry.registerCommand('_executeCodeLensProvider', function (accessor, ...args) {\n    let [uri, itemResolveCount] = args;\n    assertType(URI.isUri(uri));\n    assertType(typeof itemResolveCount === 'number' || !itemResolveCount);\n    const { codeLensProvider } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const result = [];\n    const disposables = new DisposableStore();\n    return getCodeLensModel(codeLensProvider, model, CancellationToken.None).then(value => {\n        disposables.add(value);\n        const resolve = [];\n        for (const item of value.lenses) {\n            if (itemResolveCount === undefined || itemResolveCount === null || Boolean(item.symbol.command)) {\n                result.push(item.symbol);\n            }\n            else if (itemResolveCount-- > 0 && item.provider.resolveCodeLens) {\n                resolve.push(Promise.resolve(item.provider.resolveCodeLens(model, item.symbol, CancellationToken.None)).then(symbol => result.push(symbol || item.symbol)));\n            }\n        }\n        return Promise.all(resolve);\n    }).then(() => {\n        return result;\n    }).finally(() => {\n        // make sure to return results, then (on next tick)\n        // dispose the results\n        setTimeout(() => disposables.dispose(), 100);\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { runWhenIdle } from '../../../../base/common/async.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { Range } from '../../../common/core/range.js';\nimport { CodeLensModel } from './codelens.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport const ICodeLensCache = createDecorator('ICodeLensCache');\nclass CacheItem {\n    constructor(lineCount, data) {\n        this.lineCount = lineCount;\n        this.data = data;\n    }\n}\nlet CodeLensCache = class CodeLensCache {\n    constructor(storageService) {\n        this._fakeProvider = new class {\n            provideCodeLenses() {\n                throw new Error('not supported');\n            }\n        };\n        this._cache = new LRUCache(20, 0.75);\n        // remove old data\n        const oldkey = 'codelens/cache';\n        runWhenIdle(() => storageService.remove(oldkey, 1 /* StorageScope.WORKSPACE */));\n        // restore lens data on start\n        const key = 'codelens/cache2';\n        const raw = storageService.get(key, 1 /* StorageScope.WORKSPACE */, '{}');\n        this._deserialize(raw);\n        // store lens data on shutdown\n        Event.once(storageService.onWillSaveState)(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                storageService.store(key, this._serialize(), 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\n            }\n        });\n    }\n    put(model, data) {\n        // create a copy of the model that is without command-ids\n        // but with comand-labels\n        const copyItems = data.lenses.map(item => {\n            var _a;\n            return {\n                range: item.symbol.range,\n                command: item.symbol.command && { id: '', title: (_a = item.symbol.command) === null || _a === void 0 ? void 0 : _a.title },\n            };\n        });\n        const copyModel = new CodeLensModel();\n        copyModel.add({ lenses: copyItems, dispose: () => { } }, this._fakeProvider);\n        const item = new CacheItem(model.getLineCount(), copyModel);\n        this._cache.set(model.uri.toString(), item);\n    }\n    get(model) {\n        const item = this._cache.get(model.uri.toString());\n        return item && item.lineCount === model.getLineCount() ? item.data : undefined;\n    }\n    delete(model) {\n        this._cache.delete(model.uri.toString());\n    }\n    // --- persistence\n    _serialize() {\n        const data = Object.create(null);\n        for (const [key, value] of this._cache) {\n            const lines = new Set();\n            for (const d of value.data.lenses) {\n                lines.add(d.symbol.range.startLineNumber);\n            }\n            data[key] = {\n                lineCount: value.lineCount,\n                lines: [...lines.values()]\n            };\n        }\n        return JSON.stringify(data);\n    }\n    _deserialize(raw) {\n        try {\n            const data = JSON.parse(raw);\n            for (const key in data) {\n                const element = data[key];\n                const lenses = [];\n                for (const line of element.lines) {\n                    lenses.push({ range: new Range(line, 1, line, 11) });\n                }\n                const model = new CodeLensModel();\n                model.add({ lenses, dispose() { } }, this._fakeProvider);\n                this._cache.set(key, new CacheItem(element.lineCount, model));\n            }\n        }\n        catch (_a) {\n            // ignore...\n        }\n    }\n};\nCodeLensCache = __decorate([\n    __param(0, IStorageService)\n], CodeLensCache);\nexport { CodeLensCache };\nregisterSingleton(ICodeLensCache, CodeLensCache, 1 /* InstantiationType.Delayed */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport './codelensWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nclass CodeLensViewZone {\n    constructor(afterLineNumber, heightInPx, onHeight) {\n        /**\n         * We want that this view zone, which reserves space for a code lens appears\n         * as close as possible to the next line, so we use a very large value here.\n         */\n        this.afterColumn = 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */;\n        this.afterLineNumber = afterLineNumber;\n        this.heightInPx = heightInPx;\n        this._onHeight = onHeight;\n        this.suppressMouseDown = true;\n        this.domNode = document.createElement('div');\n    }\n    onComputedHeight(height) {\n        if (this._lastHeight === undefined) {\n            this._lastHeight = height;\n        }\n        else if (this._lastHeight !== height) {\n            this._lastHeight = height;\n            this._onHeight();\n        }\n    }\n    isVisible() {\n        return this._lastHeight !== 0\n            && this.domNode.hasAttribute('monaco-visible-view-zone');\n    }\n}\nclass CodeLensContentWidget {\n    constructor(editor, line) {\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = false;\n        this.suppressMouseDown = true;\n        this._commands = new Map();\n        this._isEmpty = true;\n        this._editor = editor;\n        this._id = `codelens.widget-${(CodeLensContentWidget._idPool++)}`;\n        this.updatePosition(line);\n        this._domNode = document.createElement('span');\n        this._domNode.className = `codelens-decoration`;\n    }\n    withCommands(lenses, animate) {\n        this._commands.clear();\n        const children = [];\n        let hasSymbol = false;\n        for (let i = 0; i < lenses.length; i++) {\n            const lens = lenses[i];\n            if (!lens) {\n                continue;\n            }\n            hasSymbol = true;\n            if (lens.command) {\n                const title = renderLabelWithIcons(lens.command.title.trim());\n                if (lens.command.id) {\n                    children.push(dom.$('a', { id: String(i), title: lens.command.tooltip, role: 'button' }, ...title));\n                    this._commands.set(String(i), lens.command);\n                }\n                else {\n                    children.push(dom.$('span', { title: lens.command.tooltip }, ...title));\n                }\n                if (i + 1 < lenses.length) {\n                    children.push(dom.$('span', undefined, '\\u00a0|\\u00a0'));\n                }\n            }\n        }\n        if (!hasSymbol) {\n            // symbols but no commands\n            dom.reset(this._domNode, dom.$('span', undefined, 'no commands'));\n        }\n        else {\n            // symbols and commands\n            dom.reset(this._domNode, ...children);\n            if (this._isEmpty && animate) {\n                this._domNode.classList.add('fadein');\n            }\n            this._isEmpty = false;\n        }\n    }\n    getCommand(link) {\n        return link.parentElement === this._domNode\n            ? this._commands.get(link.id)\n            : undefined;\n    }\n    getId() {\n        return this._id;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    updatePosition(line) {\n        const column = this._editor.getModel().getLineFirstNonWhitespaceColumn(line);\n        this._widgetPosition = {\n            position: { lineNumber: line, column: column },\n            preference: [1 /* ContentWidgetPositionPreference.ABOVE */]\n        };\n    }\n    getPosition() {\n        return this._widgetPosition || null;\n    }\n}\nCodeLensContentWidget._idPool = 0;\nexport class CodeLensHelper {\n    constructor() {\n        this._removeDecorations = [];\n        this._addDecorations = [];\n        this._addDecorationsCallbacks = [];\n    }\n    addDecoration(decoration, callback) {\n        this._addDecorations.push(decoration);\n        this._addDecorationsCallbacks.push(callback);\n    }\n    removeDecoration(decorationId) {\n        this._removeDecorations.push(decorationId);\n    }\n    commit(changeAccessor) {\n        const resultingDecorations = changeAccessor.deltaDecorations(this._removeDecorations, this._addDecorations);\n        for (let i = 0, len = resultingDecorations.length; i < len; i++) {\n            this._addDecorationsCallbacks[i](resultingDecorations[i]);\n        }\n    }\n}\nconst codeLensDecorationOptions = ModelDecorationOptions.register({\n    collapseOnReplaceEdit: true,\n    description: 'codelens'\n});\nexport class CodeLensWidget {\n    constructor(data, editor, helper, viewZoneChangeAccessor, heightInPx, updateCallback) {\n        this._isDisposed = false;\n        this._editor = editor;\n        this._data = data;\n        // create combined range, track all ranges with decorations,\n        // check if there is already something to render\n        this._decorationIds = [];\n        let range;\n        const lenses = [];\n        this._data.forEach((codeLensData, i) => {\n            if (codeLensData.symbol.command) {\n                lenses.push(codeLensData.symbol);\n            }\n            helper.addDecoration({\n                range: codeLensData.symbol.range,\n                options: codeLensDecorationOptions\n            }, id => this._decorationIds[i] = id);\n            // the range contains all lenses on this line\n            if (!range) {\n                range = Range.lift(codeLensData.symbol.range);\n            }\n            else {\n                range = Range.plusRange(range, codeLensData.symbol.range);\n            }\n        });\n        this._viewZone = new CodeLensViewZone(range.startLineNumber - 1, heightInPx, updateCallback);\n        this._viewZoneId = viewZoneChangeAccessor.addZone(this._viewZone);\n        if (lenses.length > 0) {\n            this._createContentWidgetIfNecessary();\n            this._contentWidget.withCommands(lenses, false);\n        }\n    }\n    _createContentWidgetIfNecessary() {\n        if (!this._contentWidget) {\n            this._contentWidget = new CodeLensContentWidget(this._editor, this._viewZone.afterLineNumber + 1);\n            this._editor.addContentWidget(this._contentWidget);\n        }\n        else {\n            this._editor.layoutContentWidget(this._contentWidget);\n        }\n    }\n    dispose(helper, viewZoneChangeAccessor) {\n        this._decorationIds.forEach(helper.removeDecoration, helper);\n        this._decorationIds = [];\n        viewZoneChangeAccessor === null || viewZoneChangeAccessor === void 0 ? void 0 : viewZoneChangeAccessor.removeZone(this._viewZoneId);\n        if (this._contentWidget) {\n            this._editor.removeContentWidget(this._contentWidget);\n            this._contentWidget = undefined;\n        }\n        this._isDisposed = true;\n    }\n    isDisposed() {\n        return this._isDisposed;\n    }\n    isValid() {\n        return this._decorationIds.some((id, i) => {\n            const range = this._editor.getModel().getDecorationRange(id);\n            const symbol = this._data[i].symbol;\n            return !!(range && Range.isEmpty(symbol.range) === range.isEmpty());\n        });\n    }\n    updateCodeLensSymbols(data, helper) {\n        this._decorationIds.forEach(helper.removeDecoration, helper);\n        this._decorationIds = [];\n        this._data = data;\n        this._data.forEach((codeLensData, i) => {\n            helper.addDecoration({\n                range: codeLensData.symbol.range,\n                options: codeLensDecorationOptions\n            }, id => this._decorationIds[i] = id);\n        });\n    }\n    updateHeight(height, viewZoneChangeAccessor) {\n        this._viewZone.heightInPx = height;\n        viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n        if (this._contentWidget) {\n            this._editor.layoutContentWidget(this._contentWidget);\n        }\n    }\n    computeIfNecessary(model) {\n        if (!this._viewZone.isVisible()) {\n            return null;\n        }\n        // Read editor current state\n        for (let i = 0; i < this._decorationIds.length; i++) {\n            const range = model.getDecorationRange(this._decorationIds[i]);\n            if (range) {\n                this._data[i].symbol.range = range;\n            }\n        }\n        return this._data;\n    }\n    updateCommands(symbols) {\n        this._createContentWidgetIfNecessary();\n        this._contentWidget.withCommands(symbols, true);\n        for (let i = 0; i < this._data.length; i++) {\n            const resolved = symbols[i];\n            if (resolved) {\n                const { symbol } = this._data[i];\n                symbol.command = resolved.command || symbol.command;\n            }\n        }\n    }\n    getCommand(link) {\n        var _a;\n        return (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.getCommand(link);\n    }\n    getLineNumber() {\n        const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n        if (range) {\n            return range.startLineNumber;\n        }\n        return -1;\n    }\n    update(viewZoneChangeAccessor) {\n        if (this.isValid()) {\n            const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n            if (range) {\n                this._viewZone.afterLineNumber = range.startLineNumber - 1;\n                viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n                if (this._contentWidget) {\n                    this._contentWidget.updatePosition(range.startLineNumber);\n                    this._editor.layoutContentWidget(this._contentWidget);\n                }\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, disposableTimeout, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { getCodeLensModel } from './codelens.js';\nimport { ICodeLensCache } from './codeLensCache.js';\nimport { CodeLensHelper, CodeLensWidget } from './codelensWidget.js';\nimport { localize } from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet CodeLensContribution = class CodeLensContribution {\n    constructor(_editor, _languageFeaturesService, debounceService, _commandService, _notificationService, _codeLensCache) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._commandService = _commandService;\n        this._notificationService = _notificationService;\n        this._codeLensCache = _codeLensCache;\n        this._disposables = new DisposableStore();\n        this._localToDispose = new DisposableStore();\n        this._lenses = [];\n        this._oldCodeLensModels = new DisposableStore();\n        this._provideCodeLensDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensProvide', { min: 250 });\n        this._resolveCodeLensesDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensResolve', { min: 250, salt: 'resolve' });\n        this._resolveCodeLensesScheduler = new RunOnceScheduler(() => this._resolveCodeLensesInViewport(), this._resolveCodeLensesDebounce.default());\n        this._disposables.add(this._editor.onDidChangeModel(() => this._onModelChange()));\n        this._disposables.add(this._editor.onDidChangeModelLanguage(() => this._onModelChange()));\n        this._disposables.add(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(50 /* EditorOption.fontInfo */) || e.hasChanged(19 /* EditorOption.codeLensFontSize */) || e.hasChanged(18 /* EditorOption.codeLensFontFamily */)) {\n                this._updateLensStyle();\n            }\n            if (e.hasChanged(17 /* EditorOption.codeLens */)) {\n                this._onModelChange();\n            }\n        }));\n        this._disposables.add(_languageFeaturesService.codeLensProvider.onDidChange(this._onModelChange, this));\n        this._onModelChange();\n        this._updateLensStyle();\n    }\n    dispose() {\n        var _a;\n        this._localDispose();\n        this._disposables.dispose();\n        this._oldCodeLensModels.dispose();\n        (_a = this._currentCodeLensModel) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    _getLayoutInfo() {\n        const lineHeightFactor = Math.max(1.3, this._editor.getOption(66 /* EditorOption.lineHeight */) / this._editor.getOption(52 /* EditorOption.fontSize */));\n        let fontSize = this._editor.getOption(19 /* EditorOption.codeLensFontSize */);\n        if (!fontSize || fontSize < 5) {\n            fontSize = (this._editor.getOption(52 /* EditorOption.fontSize */) * .9) | 0;\n        }\n        return {\n            fontSize,\n            codeLensHeight: (fontSize * lineHeightFactor) | 0,\n        };\n    }\n    _updateLensStyle() {\n        const { codeLensHeight, fontSize } = this._getLayoutInfo();\n        const fontFamily = this._editor.getOption(18 /* EditorOption.codeLensFontFamily */);\n        const editorFontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\n        const { style } = this._editor.getContainerDomNode();\n        style.setProperty('--vscode-editorCodeLens-lineHeight', `${codeLensHeight}px`);\n        style.setProperty('--vscode-editorCodeLens-fontSize', `${fontSize}px`);\n        style.setProperty('--vscode-editorCodeLens-fontFeatureSettings', editorFontInfo.fontFeatureSettings);\n        if (fontFamily) {\n            style.setProperty('--vscode-editorCodeLens-fontFamily', fontFamily);\n            style.setProperty('--vscode-editorCodeLens-fontFamilyDefault', EDITOR_FONT_DEFAULTS.fontFamily);\n        }\n        //\n        this._editor.changeViewZones(accessor => {\n            for (const lens of this._lenses) {\n                lens.updateHeight(codeLensHeight, accessor);\n            }\n        });\n    }\n    _localDispose() {\n        var _a, _b, _c;\n        (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n        this._getCodeLensModelPromise = undefined;\n        (_b = this._resolveCodeLensesPromise) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._resolveCodeLensesPromise = undefined;\n        this._localToDispose.clear();\n        this._oldCodeLensModels.clear();\n        (_c = this._currentCodeLensModel) === null || _c === void 0 ? void 0 : _c.dispose();\n    }\n    _onModelChange() {\n        this._localDispose();\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (!this._editor.getOption(17 /* EditorOption.codeLens */) || model.isTooLargeForTokenization()) {\n            return;\n        }\n        const cachedLenses = this._codeLensCache.get(model);\n        if (cachedLenses) {\n            this._renderCodeLensSymbols(cachedLenses);\n        }\n        if (!this._languageFeaturesService.codeLensProvider.has(model)) {\n            // no provider -> return but check with\n            // cached lenses. they expire after 30 seconds\n            if (cachedLenses) {\n                this._localToDispose.add(disposableTimeout(() => {\n                    const cachedLensesNow = this._codeLensCache.get(model);\n                    if (cachedLenses === cachedLensesNow) {\n                        this._codeLensCache.delete(model);\n                        this._onModelChange();\n                    }\n                }, 30 * 1000));\n            }\n            return;\n        }\n        for (const provider of this._languageFeaturesService.codeLensProvider.all(model)) {\n            if (typeof provider.onDidChange === 'function') {\n                const registration = provider.onDidChange(() => scheduler.schedule());\n                this._localToDispose.add(registration);\n            }\n        }\n        const scheduler = new RunOnceScheduler(() => {\n            var _a;\n            const t1 = Date.now();\n            (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._getCodeLensModelPromise = createCancelablePromise(token => getCodeLensModel(this._languageFeaturesService.codeLensProvider, model, token));\n            this._getCodeLensModelPromise.then(result => {\n                if (this._currentCodeLensModel) {\n                    this._oldCodeLensModels.add(this._currentCodeLensModel);\n                }\n                this._currentCodeLensModel = result;\n                // cache model to reduce flicker\n                this._codeLensCache.put(model, result);\n                // update moving average\n                const newDelay = this._provideCodeLensDebounce.update(model, Date.now() - t1);\n                scheduler.delay = newDelay;\n                // render lenses\n                this._renderCodeLensSymbols(result);\n                // dom.scheduleAtNextAnimationFrame(() => this._resolveCodeLensesInViewport());\n                this._resolveCodeLensesInViewportSoon();\n            }, onUnexpectedError);\n        }, this._provideCodeLensDebounce.get(model));\n        this._localToDispose.add(scheduler);\n        this._localToDispose.add(toDisposable(() => this._resolveCodeLensesScheduler.cancel()));\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n            var _a;\n            this._editor.changeDecorations(decorationsAccessor => {\n                this._editor.changeViewZones(viewZonesAccessor => {\n                    const toDispose = [];\n                    let lastLensLineNumber = -1;\n                    this._lenses.forEach((lens) => {\n                        if (!lens.isValid() || lastLensLineNumber === lens.getLineNumber()) {\n                            // invalid -> lens collapsed, attach range doesn't exist anymore\n                            // line_number -> lenses should never be on the same line\n                            toDispose.push(lens);\n                        }\n                        else {\n                            lens.update(viewZonesAccessor);\n                            lastLensLineNumber = lens.getLineNumber();\n                        }\n                    });\n                    const helper = new CodeLensHelper();\n                    toDispose.forEach((l) => {\n                        l.dispose(helper, viewZonesAccessor);\n                        this._lenses.splice(this._lenses.indexOf(l), 1);\n                    });\n                    helper.commit(decorationsAccessor);\n                });\n            });\n            // Ask for all references again\n            scheduler.schedule();\n            // Cancel pending and active resolve requests\n            this._resolveCodeLensesScheduler.cancel();\n            (_a = this._resolveCodeLensesPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._resolveCodeLensesPromise = undefined;\n        }));\n        this._localToDispose.add(this._editor.onDidFocusEditorWidget(() => {\n            scheduler.schedule();\n        }));\n        this._localToDispose.add(this._editor.onDidBlurEditorText(() => {\n            scheduler.cancel();\n        }));\n        this._localToDispose.add(this._editor.onDidScrollChange(e => {\n            if (e.scrollTopChanged && this._lenses.length > 0) {\n                this._resolveCodeLensesInViewportSoon();\n            }\n        }));\n        this._localToDispose.add(this._editor.onDidLayoutChange(() => {\n            this._resolveCodeLensesInViewportSoon();\n        }));\n        this._localToDispose.add(toDisposable(() => {\n            if (this._editor.getModel()) {\n                const scrollState = StableEditorScrollState.capture(this._editor);\n                this._editor.changeDecorations(decorationsAccessor => {\n                    this._editor.changeViewZones(viewZonesAccessor => {\n                        this._disposeAllLenses(decorationsAccessor, viewZonesAccessor);\n                    });\n                });\n                scrollState.restore(this._editor);\n            }\n            else {\n                // No accessors available\n                this._disposeAllLenses(undefined, undefined);\n            }\n        }));\n        this._localToDispose.add(this._editor.onMouseDown(e => {\n            if (e.target.type !== 9 /* MouseTargetType.CONTENT_WIDGET */) {\n                return;\n            }\n            let target = e.target.element;\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'SPAN') {\n                target = target.parentElement;\n            }\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'A') {\n                for (const lens of this._lenses) {\n                    const command = lens.getCommand(target);\n                    if (command) {\n                        this._commandService.executeCommand(command.id, ...(command.arguments || [])).catch(err => this._notificationService.error(err));\n                        break;\n                    }\n                }\n            }\n        }));\n        scheduler.schedule();\n    }\n    _disposeAllLenses(decChangeAccessor, viewZoneChangeAccessor) {\n        const helper = new CodeLensHelper();\n        for (const lens of this._lenses) {\n            lens.dispose(helper, viewZoneChangeAccessor);\n        }\n        if (decChangeAccessor) {\n            helper.commit(decChangeAccessor);\n        }\n        this._lenses.length = 0;\n    }\n    _renderCodeLensSymbols(symbols) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const maxLineNumber = this._editor.getModel().getLineCount();\n        const groups = [];\n        let lastGroup;\n        for (const symbol of symbols.lenses) {\n            const line = symbol.symbol.range.startLineNumber;\n            if (line < 1 || line > maxLineNumber) {\n                // invalid code lens\n                continue;\n            }\n            else if (lastGroup && lastGroup[lastGroup.length - 1].symbol.range.startLineNumber === line) {\n                // on same line as previous\n                lastGroup.push(symbol);\n            }\n            else {\n                // on later line as previous\n                lastGroup = [symbol];\n                groups.push(lastGroup);\n            }\n        }\n        if (!groups.length && !this._lenses.length) {\n            // Nothing to change\n            return;\n        }\n        const scrollState = StableEditorScrollState.capture(this._editor);\n        const layoutInfo = this._getLayoutInfo();\n        this._editor.changeDecorations(decorationsAccessor => {\n            this._editor.changeViewZones(viewZoneAccessor => {\n                const helper = new CodeLensHelper();\n                let codeLensIndex = 0;\n                let groupsIndex = 0;\n                while (groupsIndex < groups.length && codeLensIndex < this._lenses.length) {\n                    const symbolsLineNumber = groups[groupsIndex][0].symbol.range.startLineNumber;\n                    const codeLensLineNumber = this._lenses[codeLensIndex].getLineNumber();\n                    if (codeLensLineNumber < symbolsLineNumber) {\n                        this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n                        this._lenses.splice(codeLensIndex, 1);\n                    }\n                    else if (codeLensLineNumber === symbolsLineNumber) {\n                        this._lenses[codeLensIndex].updateCodeLensSymbols(groups[groupsIndex], helper);\n                        groupsIndex++;\n                        codeLensIndex++;\n                    }\n                    else {\n                        this._lenses.splice(codeLensIndex, 0, new CodeLensWidget(groups[groupsIndex], this._editor, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n                        codeLensIndex++;\n                        groupsIndex++;\n                    }\n                }\n                // Delete extra code lenses\n                while (codeLensIndex < this._lenses.length) {\n                    this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n                    this._lenses.splice(codeLensIndex, 1);\n                }\n                // Create extra symbols\n                while (groupsIndex < groups.length) {\n                    this._lenses.push(new CodeLensWidget(groups[groupsIndex], this._editor, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n                    groupsIndex++;\n                }\n                helper.commit(decorationsAccessor);\n            });\n        });\n        scrollState.restore(this._editor);\n    }\n    _resolveCodeLensesInViewportSoon() {\n        const model = this._editor.getModel();\n        if (model) {\n            this._resolveCodeLensesScheduler.schedule();\n        }\n    }\n    _resolveCodeLensesInViewport() {\n        var _a;\n        (_a = this._resolveCodeLensesPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n        this._resolveCodeLensesPromise = undefined;\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        const toResolve = [];\n        const lenses = [];\n        this._lenses.forEach((lens) => {\n            const request = lens.computeIfNecessary(model);\n            if (request) {\n                toResolve.push(request);\n                lenses.push(lens);\n            }\n        });\n        if (toResolve.length === 0) {\n            return;\n        }\n        const t1 = Date.now();\n        const resolvePromise = createCancelablePromise(token => {\n            const promises = toResolve.map((request, i) => {\n                const resolvedSymbols = new Array(request.length);\n                const promises = request.map((request, i) => {\n                    if (!request.symbol.command && typeof request.provider.resolveCodeLens === 'function') {\n                        return Promise.resolve(request.provider.resolveCodeLens(model, request.symbol, token)).then(symbol => {\n                            resolvedSymbols[i] = symbol;\n                        }, onUnexpectedExternalError);\n                    }\n                    else {\n                        resolvedSymbols[i] = request.symbol;\n                        return Promise.resolve(undefined);\n                    }\n                });\n                return Promise.all(promises).then(() => {\n                    if (!token.isCancellationRequested && !lenses[i].isDisposed()) {\n                        lenses[i].updateCommands(resolvedSymbols);\n                    }\n                });\n            });\n            return Promise.all(promises);\n        });\n        this._resolveCodeLensesPromise = resolvePromise;\n        this._resolveCodeLensesPromise.then(() => {\n            // update moving average\n            const newDelay = this._resolveCodeLensesDebounce.update(model, Date.now() - t1);\n            this._resolveCodeLensesScheduler.delay = newDelay;\n            if (this._currentCodeLensModel) { // update the cached state with new resolved items\n                this._codeLensCache.put(model, this._currentCodeLensModel);\n            }\n            this._oldCodeLensModels.clear(); // dispose old models once we have updated the UI with the current model\n            if (resolvePromise === this._resolveCodeLensesPromise) {\n                this._resolveCodeLensesPromise = undefined;\n            }\n        }, err => {\n            onUnexpectedError(err); // can also be cancellation!\n            if (resolvePromise === this._resolveCodeLensesPromise) {\n                this._resolveCodeLensesPromise = undefined;\n            }\n        });\n    }\n    getModel() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._getCodeLensModelPromise;\n            yield this._resolveCodeLensesPromise;\n            return !((_a = this._currentCodeLensModel) === null || _a === void 0 ? void 0 : _a.isDisposed)\n                ? this._currentCodeLensModel\n                : undefined;\n        });\n    }\n};\nCodeLensContribution.ID = 'css.editor.codeLens';\nCodeLensContribution = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ILanguageFeatureDebounceService),\n    __param(3, ICommandService),\n    __param(4, INotificationService),\n    __param(5, ICodeLensCache)\n], CodeLensContribution);\nexport { CodeLensContribution };\nregisterEditorContribution(CodeLensContribution.ID, CodeLensContribution, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(class ShowLensesInCurrentLine extends EditorAction {\n    constructor() {\n        super({\n            id: 'codelens.showLensesInCurrentLine',\n            precondition: EditorContextKeys.hasCodeLensProvider,\n            label: localize('showLensOnLine', \"Show CodeLens Commands For Current Line\"),\n            alias: 'Show CodeLens Commands For Current Line',\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.hasModel()) {\n                return;\n            }\n            const quickInputService = accessor.get(IQuickInputService);\n            const commandService = accessor.get(ICommandService);\n            const notificationService = accessor.get(INotificationService);\n            const lineNumber = editor.getSelection().positionLineNumber;\n            const codelensController = editor.getContribution(CodeLensContribution.ID);\n            if (!codelensController) {\n                return;\n            }\n            const model = yield codelensController.getModel();\n            if (!model) {\n                // nothing\n                return;\n            }\n            const items = [];\n            for (const lens of model.lenses) {\n                if (lens.symbol.command && lens.symbol.range.startLineNumber === lineNumber) {\n                    items.push({\n                        label: lens.symbol.command.title,\n                        command: lens.symbol.command\n                    });\n                }\n            }\n            if (items.length === 0) {\n                // We dont want an empty picker\n                return;\n            }\n            const item = yield quickInputService.pick(items, {\n                canPickMany: false,\n                placeHolder: localize('placeHolder', \"Select a command\")\n            });\n            if (!item) {\n                // Nothing picked\n                return;\n            }\n            let command = item.command;\n            if (model.isDisposed) {\n                // try to find the same command again in-case the model has been re-created in the meantime\n                // this is a best attempt approach which shouldn't be needed because eager model re-creates\n                // shouldn't happen due to focus in/out anymore\n                const newModel = yield codelensController.getModel();\n                const newLens = newModel === null || newModel === void 0 ? void 0 : newModel.lenses.find(lens => { var _a; return lens.symbol.range.startLineNumber === lineNumber && ((_a = lens.symbol.command) === null || _a === void 0 ? void 0 : _a.title) === command.title; });\n                if (!newLens || !newLens.symbol.command) {\n                    return;\n                }\n                command = newLens.symbol.command;\n            }\n            try {\n                yield commandService.executeCommand(command.id, ...(command.arguments || []));\n            }\n            catch (err) {\n                notificationService.error(err);\n            }\n        });\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { DefaultDocumentColorProvider } from './defaultDocumentColorProvider.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport function getColors(colorProviderRegistry, model, token, isDefaultColorDecoratorsEnabled = true) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _findColorData(new ColorDataCollector(), colorProviderRegistry, model, token, isDefaultColorDecoratorsEnabled);\n    });\n}\nexport function getColorPresentations(model, colorInfo, provider, token) {\n    return Promise.resolve(provider.provideColorPresentations(model, colorInfo, token));\n}\nclass ColorDataCollector {\n    constructor() { }\n    compute(provider, model, token, colors) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const documentColors = yield provider.provideDocumentColors(model, token);\n            if (Array.isArray(documentColors)) {\n                for (const colorInfo of documentColors) {\n                    colors.push({ colorInfo, provider });\n                }\n            }\n            return Array.isArray(documentColors);\n        });\n    }\n}\nclass ExtColorDataCollector {\n    constructor() { }\n    compute(provider, model, token, colors) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const documentColors = yield provider.provideDocumentColors(model, token);\n            if (Array.isArray(documentColors)) {\n                for (const colorInfo of documentColors) {\n                    colors.push({ range: colorInfo.range, color: [colorInfo.color.red, colorInfo.color.green, colorInfo.color.blue, colorInfo.color.alpha] });\n                }\n            }\n            return Array.isArray(documentColors);\n        });\n    }\n}\nclass ColorPresentationsCollector {\n    constructor(colorInfo) {\n        this.colorInfo = colorInfo;\n    }\n    compute(provider, model, _token, colors) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const documentColors = yield provider.provideColorPresentations(model, this.colorInfo, CancellationToken.None);\n            if (Array.isArray(documentColors)) {\n                colors.push(...documentColors);\n            }\n            return Array.isArray(documentColors);\n        });\n    }\n}\nfunction _findColorData(collector, colorProviderRegistry, model, token, isDefaultColorDecoratorsEnabled) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let validDocumentColorProviderFound = false;\n        let defaultProvider;\n        const colorData = [];\n        const documentColorProviders = colorProviderRegistry.ordered(model);\n        for (let i = documentColorProviders.length - 1; i >= 0; i--) {\n            const provider = documentColorProviders[i];\n            if (provider instanceof DefaultDocumentColorProvider) {\n                defaultProvider = provider;\n            }\n            else {\n                try {\n                    if (yield collector.compute(provider, model, token, colorData)) {\n                        validDocumentColorProviderFound = true;\n                    }\n                }\n                catch (e) {\n                    onUnexpectedExternalError(e);\n                }\n            }\n        }\n        if (validDocumentColorProviderFound) {\n            return colorData;\n        }\n        if (defaultProvider && isDefaultColorDecoratorsEnabled) {\n            yield collector.compute(defaultProvider, model, token, colorData);\n            return colorData;\n        }\n        return [];\n    });\n}\nfunction _setupColorCommand(accessor, resource) {\n    const { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(resource);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const isDefaultColorDecoratorsEnabled = accessor.get(IConfigurationService).getValue('editor.defaultColorDecorators', { resource });\n    return { model, colorProviderRegistry, isDefaultColorDecoratorsEnabled };\n}\nCommandsRegistry.registerCommand('_executeDocumentColorProvider', function (accessor, ...args) {\n    const [resource] = args;\n    if (!(resource instanceof URI)) {\n        throw illegalArgument();\n    }\n    const { model, colorProviderRegistry, isDefaultColorDecoratorsEnabled } = _setupColorCommand(accessor, resource);\n    return _findColorData(new ExtColorDataCollector(), colorProviderRegistry, model, CancellationToken.None, isDefaultColorDecoratorsEnabled);\n});\nCommandsRegistry.registerCommand('_executeColorPresentationProvider', function (accessor, ...args) {\n    const [color, context] = args;\n    const { uri, range } = context;\n    if (!(uri instanceof URI) || !Array.isArray(color) || color.length !== 4 || !Range.isIRange(range)) {\n        throw illegalArgument();\n    }\n    const { model, colorProviderRegistry, isDefaultColorDecoratorsEnabled } = _setupColorCommand(accessor, uri);\n    const [red, green, blue, alpha] = color;\n    return _findColorData(new ColorPresentationsCollector({ range: range, color: { red, green, blue, alpha } }), colorProviderRegistry, model, CancellationToken.None, isDefaultColorDecoratorsEnabled);\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ColorDecorationInjectedTextMarker } from './colorDetector.js';\nimport { ColorHoverParticipant } from './colorHoverParticipant.js';\nimport { ModesHoverController } from '../../hover/browser/hover.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nexport class ColorContribution extends Disposable {\n    constructor(_editor) {\n        super();\n        this._editor = _editor;\n        this._register(_editor.onMouseDown((e) => this.onMouseDown(e)));\n    }\n    dispose() {\n        super.dispose();\n    }\n    onMouseDown(mouseEvent) {\n        const colorDecoratorsActivatedOn = this._editor.getOption(146 /* EditorOption.colorDecoratorsActivatedOn */);\n        if (colorDecoratorsActivatedOn !== 'click' && colorDecoratorsActivatedOn !== 'clickAndHover') {\n            return;\n        }\n        const target = mouseEvent.target;\n        if (target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n            return;\n        }\n        if (!target.detail.injectedText) {\n            return;\n        }\n        if (target.detail.injectedText.options.attachedData !== ColorDecorationInjectedTextMarker) {\n            return;\n        }\n        if (!target.range) {\n            return;\n        }\n        const hoverController = this._editor.getContribution(ModesHoverController.ID);\n        if (!hoverController) {\n            return;\n        }\n        if (!hoverController.isColorPickerVisible) {\n            const range = new Range(target.range.startLineNumber, target.range.startColumn + 1, target.range.endLineNumber, target.range.endColumn + 1);\n            hoverController.showContentHover(range, 1 /* HoverStartMode.Immediate */, 0 /* HoverStartSource.Mouse */, false, true);\n        }\n    }\n}\nColorContribution.ID = 'editor.contrib.colorContribution'; // ms\nregisterEditorContribution(ColorContribution.ID, ColorContribution, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nHoverParticipantRegistry.register(ColorHoverParticipant);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar ColorDetector_1;\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { RGBA } from '../../../../base/common/color.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { noBreakWhitespace } from '../../../../base/common/strings.js';\nimport { DynamicCssRules } from '../../../browser/editorDom.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { getColors } from './color.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport const ColorDecorationInjectedTextMarker = Object.create({});\nlet ColorDetector = ColorDetector_1 = class ColorDetector extends Disposable {\n    constructor(_editor, _configurationService, _languageFeaturesService, languageFeatureDebounceService) {\n        super();\n        this._editor = _editor;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._localToDispose = this._register(new DisposableStore());\n        this._decorationsIds = [];\n        this._colorDatas = new Map();\n        this._colorDecoratorIds = this._editor.createDecorationsCollection();\n        this._ruleFactory = new DynamicCssRules(this._editor);\n        this._decoratorLimitReporter = new DecoratorLimitReporter();\n        this._colorDecorationClassRefs = this._register(new DisposableStore());\n        this._debounceInformation = languageFeatureDebounceService.for(_languageFeaturesService.colorProvider, 'Document Colors', { min: ColorDetector_1.RECOMPUTE_TIME });\n        this._register(_editor.onDidChangeModel(() => {\n            this._isColorDecoratorsEnabled = this.isEnabled();\n            this.updateColors();\n        }));\n        this._register(_editor.onDidChangeModelLanguage(() => this.updateColors()));\n        this._register(_languageFeaturesService.colorProvider.onDidChange(() => this.updateColors()));\n        this._register(_editor.onDidChangeConfiguration((e) => {\n            const prevIsEnabled = this._isColorDecoratorsEnabled;\n            this._isColorDecoratorsEnabled = this.isEnabled();\n            this._isDefaultColorDecoratorsEnabled = this._editor.getOption(145 /* EditorOption.defaultColorDecorators */);\n            const updatedColorDecoratorsSetting = prevIsEnabled !== this._isColorDecoratorsEnabled || e.hasChanged(21 /* EditorOption.colorDecoratorsLimit */);\n            const updatedDefaultColorDecoratorsSetting = e.hasChanged(145 /* EditorOption.defaultColorDecorators */);\n            if (updatedColorDecoratorsSetting || updatedDefaultColorDecoratorsSetting) {\n                if (this._isColorDecoratorsEnabled) {\n                    this.updateColors();\n                }\n                else {\n                    this.removeAllDecorations();\n                }\n            }\n        }));\n        this._timeoutTimer = null;\n        this._computePromise = null;\n        this._isColorDecoratorsEnabled = this.isEnabled();\n        this._isDefaultColorDecoratorsEnabled = this._editor.getOption(145 /* EditorOption.defaultColorDecorators */);\n        this.updateColors();\n    }\n    isEnabled() {\n        const model = this._editor.getModel();\n        if (!model) {\n            return false;\n        }\n        const languageId = model.getLanguageId();\n        // handle deprecated settings. [languageId].colorDecorators.enable\n        const deprecatedConfig = this._configurationService.getValue(languageId);\n        if (deprecatedConfig && typeof deprecatedConfig === 'object') {\n            const colorDecorators = deprecatedConfig['colorDecorators']; // deprecatedConfig.valueOf('.colorDecorators.enable');\n            if (colorDecorators && colorDecorators['enable'] !== undefined && !colorDecorators['enable']) {\n                return colorDecorators['enable'];\n            }\n        }\n        return this._editor.getOption(20 /* EditorOption.colorDecorators */);\n    }\n    static get(editor) {\n        return editor.getContribution(this.ID);\n    }\n    dispose() {\n        this.stop();\n        this.removeAllDecorations();\n        super.dispose();\n    }\n    updateColors() {\n        this.stop();\n        if (!this._isColorDecoratorsEnabled) {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (!model || !this._languageFeaturesService.colorProvider.has(model)) {\n            return;\n        }\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n            if (!this._timeoutTimer) {\n                this._timeoutTimer = new TimeoutTimer();\n                this._timeoutTimer.cancelAndSet(() => {\n                    this._timeoutTimer = null;\n                    this.beginCompute();\n                }, this._debounceInformation.get(model));\n            }\n        }));\n        this.beginCompute();\n    }\n    beginCompute() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._computePromise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                const model = this._editor.getModel();\n                if (!model) {\n                    return [];\n                }\n                const sw = new StopWatch(false);\n                const colors = yield getColors(this._languageFeaturesService.colorProvider, model, token, this._isDefaultColorDecoratorsEnabled);\n                this._debounceInformation.update(model, sw.elapsed());\n                return colors;\n            }));\n            try {\n                const colors = yield this._computePromise;\n                this.updateDecorations(colors);\n                this.updateColorDecorators(colors);\n                this._computePromise = null;\n            }\n            catch (e) {\n                onUnexpectedError(e);\n            }\n        });\n    }\n    stop() {\n        if (this._timeoutTimer) {\n            this._timeoutTimer.cancel();\n            this._timeoutTimer = null;\n        }\n        if (this._computePromise) {\n            this._computePromise.cancel();\n            this._computePromise = null;\n        }\n        this._localToDispose.clear();\n    }\n    updateDecorations(colorDatas) {\n        const decorations = colorDatas.map(c => ({\n            range: {\n                startLineNumber: c.colorInfo.range.startLineNumber,\n                startColumn: c.colorInfo.range.startColumn,\n                endLineNumber: c.colorInfo.range.endLineNumber,\n                endColumn: c.colorInfo.range.endColumn\n            },\n            options: ModelDecorationOptions.EMPTY\n        }));\n        this._editor.changeDecorations((changeAccessor) => {\n            this._decorationsIds = changeAccessor.deltaDecorations(this._decorationsIds, decorations);\n            this._colorDatas = new Map();\n            this._decorationsIds.forEach((id, i) => this._colorDatas.set(id, colorDatas[i]));\n        });\n    }\n    updateColorDecorators(colorData) {\n        this._colorDecorationClassRefs.clear();\n        const decorations = [];\n        const limit = this._editor.getOption(21 /* EditorOption.colorDecoratorsLimit */);\n        for (let i = 0; i < colorData.length && decorations.length < limit; i++) {\n            const { red, green, blue, alpha } = colorData[i].colorInfo.color;\n            const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n            const color = `rgba(${rgba.r}, ${rgba.g}, ${rgba.b}, ${rgba.a})`;\n            const ref = this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({\n                backgroundColor: color\n            }));\n            decorations.push({\n                range: {\n                    startLineNumber: colorData[i].colorInfo.range.startLineNumber,\n                    startColumn: colorData[i].colorInfo.range.startColumn,\n                    endLineNumber: colorData[i].colorInfo.range.endLineNumber,\n                    endColumn: colorData[i].colorInfo.range.endColumn\n                },\n                options: {\n                    description: 'colorDetector',\n                    before: {\n                        content: noBreakWhitespace,\n                        inlineClassName: `${ref.className} colorpicker-color-decoration`,\n                        inlineClassNameAffectsLetterSpacing: true,\n                        attachedData: ColorDecorationInjectedTextMarker\n                    }\n                }\n            });\n        }\n        const limited = limit < colorData.length ? limit : false;\n        this._decoratorLimitReporter.update(colorData.length, limited);\n        this._colorDecoratorIds.set(decorations);\n    }\n    removeAllDecorations() {\n        this._editor.removeDecorations(this._decorationsIds);\n        this._decorationsIds = [];\n        this._colorDecoratorIds.clear();\n        this._colorDecorationClassRefs.clear();\n    }\n    getColorData(position) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return null;\n        }\n        const decorations = model\n            .getDecorationsInRange(Range.fromPositions(position, position))\n            .filter(d => this._colorDatas.has(d.id));\n        if (decorations.length === 0) {\n            return null;\n        }\n        return this._colorDatas.get(decorations[0].id);\n    }\n    isColorDecoration(decoration) {\n        return this._colorDecoratorIds.has(decoration);\n    }\n};\nColorDetector.ID = 'editor.contrib.colorDetector';\nColorDetector.RECOMPUTE_TIME = 1000; // ms\nColorDetector = ColorDetector_1 = __decorate([\n    __param(1, IConfigurationService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, ILanguageFeatureDebounceService)\n], ColorDetector);\nexport { ColorDetector };\nexport class DecoratorLimitReporter {\n    constructor() {\n        this._onDidChange = new Emitter();\n        this._computed = 0;\n        this._limited = false;\n    }\n    update(computed, limited) {\n        if (computed !== this._computed || limited !== this._limited) {\n            this._computed = computed;\n            this._limited = limited;\n            this._onDidChange.fire();\n        }\n    }\n}\nregisterEditorContribution(ColorDetector.ID, ColorDetector, 1 /* EditorContributionInstantiation.AfterFirstRender */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nexport class ColorPickerModel {\n    get color() {\n        return this._color;\n    }\n    set color(color) {\n        if (this._color.equals(color)) {\n            return;\n        }\n        this._color = color;\n        this._onDidChangeColor.fire(color);\n    }\n    get presentation() { return this.colorPresentations[this.presentationIndex]; }\n    get colorPresentations() {\n        return this._colorPresentations;\n    }\n    set colorPresentations(colorPresentations) {\n        this._colorPresentations = colorPresentations;\n        if (this.presentationIndex > colorPresentations.length - 1) {\n            this.presentationIndex = 0;\n        }\n        this._onDidChangePresentation.fire(this.presentation);\n    }\n    constructor(color, availableColorPresentations, presentationIndex) {\n        this.presentationIndex = presentationIndex;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this._onDidChangeColor = new Emitter();\n        this.onDidChangeColor = this._onDidChangeColor.event;\n        this._onDidChangePresentation = new Emitter();\n        this.onDidChangePresentation = this._onDidChangePresentation.event;\n        this.originalColor = color;\n        this._color = color;\n        this._colorPresentations = availableColorPresentations;\n    }\n    selectNextColorPresentation() {\n        this.presentationIndex = (this.presentationIndex + 1) % this.colorPresentations.length;\n        this.flushColor();\n        this._onDidChangePresentation.fire(this.presentation);\n    }\n    guessColorPresentation(color, originalText) {\n        let presentationIndex = -1;\n        for (let i = 0; i < this.colorPresentations.length; i++) {\n            if (originalText.toLowerCase() === this.colorPresentations[i].label) {\n                presentationIndex = i;\n                break;\n            }\n        }\n        if (presentationIndex === -1) {\n            // check which color presentation text has same prefix as original text's prefix\n            const originalTextPrefix = originalText.split('(')[0].toLowerCase();\n            for (let i = 0; i < this.colorPresentations.length; i++) {\n                if (this.colorPresentations[i].label.toLowerCase().startsWith(originalTextPrefix)) {\n                    presentationIndex = i;\n                    break;\n                }\n            }\n        }\n        if (presentationIndex !== -1 && presentationIndex !== this.presentationIndex) {\n            this.presentationIndex = presentationIndex;\n            this._onDidChangePresentation.fire(this.presentation);\n        }\n    }\n    flushColor() {\n        this._onColorFlushed.fire(this._color);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { PixelRatio } from '../../../../base/browser/browser.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { GlobalPointerMoveMonitor } from '../../../../base/browser/globalPointerMoveMonitor.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Color, HSVA, RGBA } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport './colorPicker.css';\nimport { localize } from '../../../../nls.js';\nimport { editorHoverBackground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nconst $ = dom.$;\nexport class ColorPickerHeader extends Disposable {\n    constructor(container, model, themeService, showingStandaloneColorPicker = false) {\n        super();\n        this.model = model;\n        this.showingStandaloneColorPicker = showingStandaloneColorPicker;\n        this._closeButton = null;\n        this._domNode = $('.colorpicker-header');\n        dom.append(container, this._domNode);\n        this._pickedColorNode = dom.append(this._domNode, $('.picked-color'));\n        dom.append(this._pickedColorNode, $('span.codicon.codicon-color-mode'));\n        this._pickedColorPresentation = dom.append(this._pickedColorNode, document.createElement('span'));\n        this._pickedColorPresentation.classList.add('picked-color-presentation');\n        const tooltip = localize('clickToToggleColorOptions', \"Click to toggle color options (rgb/hsl/hex)\");\n        this._pickedColorNode.setAttribute('title', tooltip);\n        this._originalColorNode = dom.append(this._domNode, $('.original-color'));\n        this._originalColorNode.style.backgroundColor = Color.Format.CSS.format(this.model.originalColor) || '';\n        this.backgroundColor = themeService.getColorTheme().getColor(editorHoverBackground) || Color.white;\n        this._register(themeService.onDidColorThemeChange(theme => {\n            this.backgroundColor = theme.getColor(editorHoverBackground) || Color.white;\n        }));\n        this._register(dom.addDisposableListener(this._pickedColorNode, dom.EventType.CLICK, () => this.model.selectNextColorPresentation()));\n        this._register(dom.addDisposableListener(this._originalColorNode, dom.EventType.CLICK, () => {\n            this.model.color = this.model.originalColor;\n            this.model.flushColor();\n        }));\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n        this._register(model.onDidChangePresentation(this.onDidChangePresentation, this));\n        this._pickedColorNode.style.backgroundColor = Color.Format.CSS.format(model.color) || '';\n        this._pickedColorNode.classList.toggle('light', model.color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : model.color.isLighter());\n        this.onDidChangeColor(this.model.color);\n        // When the color picker widget is a standalone color picker widget, then add a close button\n        if (this.showingStandaloneColorPicker) {\n            this._domNode.classList.add('standalone-colorpicker');\n            this._closeButton = this._register(new CloseButton(this._domNode));\n        }\n    }\n    get closeButton() {\n        return this._closeButton;\n    }\n    get pickedColorNode() {\n        return this._pickedColorNode;\n    }\n    get originalColorNode() {\n        return this._originalColorNode;\n    }\n    onDidChangeColor(color) {\n        this._pickedColorNode.style.backgroundColor = Color.Format.CSS.format(color) || '';\n        this._pickedColorNode.classList.toggle('light', color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : color.isLighter());\n        this.onDidChangePresentation();\n    }\n    onDidChangePresentation() {\n        this._pickedColorPresentation.textContent = this.model.presentation ? this.model.presentation.label : '';\n    }\n}\nclass CloseButton extends Disposable {\n    constructor(container) {\n        super();\n        this._onClicked = this._register(new Emitter());\n        this.onClicked = this._onClicked.event;\n        this._button = document.createElement('div');\n        this._button.classList.add('close-button');\n        dom.append(container, this._button);\n        const innerDiv = document.createElement('div');\n        innerDiv.classList.add('close-button-inner-div');\n        dom.append(this._button, innerDiv);\n        const closeButton = dom.append(innerDiv, $('.button' + ThemeIcon.asCSSSelector(registerIcon('color-picker-close', Codicon.close, localize('closeIcon', 'Icon to close the color picker')))));\n        closeButton.classList.add('close-icon');\n        this._button.onclick = () => {\n            this._onClicked.fire();\n        };\n    }\n}\nexport class ColorPickerBody extends Disposable {\n    constructor(container, model, pixelRatio, isStandaloneColorPicker = false) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._insertButton = null;\n        this._domNode = $('.colorpicker-body');\n        dom.append(container, this._domNode);\n        this._saturationBox = new SaturationBox(this._domNode, this.model, this.pixelRatio);\n        this._register(this._saturationBox);\n        this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange, this));\n        this._register(this._saturationBox.onColorFlushed(this.flushColor, this));\n        this._opacityStrip = new OpacityStrip(this._domNode, this.model, isStandaloneColorPicker);\n        this._register(this._opacityStrip);\n        this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange, this));\n        this._register(this._opacityStrip.onColorFlushed(this.flushColor, this));\n        this._hueStrip = new HueStrip(this._domNode, this.model, isStandaloneColorPicker);\n        this._register(this._hueStrip);\n        this._register(this._hueStrip.onDidChange(this.onDidHueChange, this));\n        this._register(this._hueStrip.onColorFlushed(this.flushColor, this));\n        if (isStandaloneColorPicker) {\n            this._insertButton = this._register(new InsertButton(this._domNode));\n            this._domNode.classList.add('standalone-colorpicker');\n        }\n    }\n    flushColor() {\n        this.model.flushColor();\n    }\n    onDidSaturationValueChange({ s, v }) {\n        const hsva = this.model.color.hsva;\n        this.model.color = new Color(new HSVA(hsva.h, s, v, hsva.a));\n    }\n    onDidOpacityChange(a) {\n        const hsva = this.model.color.hsva;\n        this.model.color = new Color(new HSVA(hsva.h, hsva.s, hsva.v, a));\n    }\n    onDidHueChange(value) {\n        const hsva = this.model.color.hsva;\n        const h = (1 - value) * 360;\n        this.model.color = new Color(new HSVA(h === 360 ? 0 : h, hsva.s, hsva.v, hsva.a));\n    }\n    get domNode() {\n        return this._domNode;\n    }\n    get saturationBox() {\n        return this._saturationBox;\n    }\n    get enterButton() {\n        return this._insertButton;\n    }\n    layout() {\n        this._saturationBox.layout();\n        this._opacityStrip.layout();\n        this._hueStrip.layout();\n    }\n}\nclass SaturationBox extends Disposable {\n    constructor(container, model, pixelRatio) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this._domNode = $('.saturation-wrap');\n        dom.append(container, this._domNode);\n        // Create canvas, draw selected color\n        this._canvas = document.createElement('canvas');\n        this._canvas.className = 'saturation-box';\n        dom.append(this._domNode, this._canvas);\n        // Add selection circle\n        this.selection = $('.saturation-selection');\n        dom.append(this._domNode, this.selection);\n        this.layout();\n        this._register(dom.addDisposableListener(this._domNode, dom.EventType.POINTER_DOWN, e => this.onPointerDown(e)));\n        this._register(this.model.onDidChangeColor(this.onDidChangeColor, this));\n        this.monitor = null;\n    }\n    get domNode() {\n        return this._domNode;\n    }\n    onPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        this.monitor = this._register(new GlobalPointerMoveMonitor());\n        const origin = dom.getDomNodePagePosition(this._domNode);\n        if (e.target !== this.selection) {\n            this.onDidChangePosition(e.offsetX, e.offsetY);\n        }\n        this.monitor.startMonitoring(e.target, e.pointerId, e.buttons, event => this.onDidChangePosition(event.pageX - origin.left, event.pageY - origin.top), () => null);\n        const pointerUpListener = dom.addDisposableListener(e.target.ownerDocument, dom.EventType.POINTER_UP, () => {\n            this._onColorFlushed.fire();\n            pointerUpListener.dispose();\n            if (this.monitor) {\n                this.monitor.stopMonitoring(true);\n                this.monitor = null;\n            }\n        }, true);\n    }\n    onDidChangePosition(left, top) {\n        const s = Math.max(0, Math.min(1, left / this.width));\n        const v = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.paintSelection(s, v);\n        this._onDidChange.fire({ s, v });\n    }\n    layout() {\n        this.width = this._domNode.offsetWidth;\n        this.height = this._domNode.offsetHeight;\n        this._canvas.width = this.width * this.pixelRatio;\n        this._canvas.height = this.height * this.pixelRatio;\n        this.paint();\n        const hsva = this.model.color.hsva;\n        this.paintSelection(hsva.s, hsva.v);\n    }\n    paint() {\n        const hsva = this.model.color.hsva;\n        const saturatedColor = new Color(new HSVA(hsva.h, 1, 1, 1));\n        const ctx = this._canvas.getContext('2d');\n        const whiteGradient = ctx.createLinearGradient(0, 0, this._canvas.width, 0);\n        whiteGradient.addColorStop(0, 'rgba(255, 255, 255, 1)');\n        whiteGradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');\n        whiteGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n        const blackGradient = ctx.createLinearGradient(0, 0, 0, this._canvas.height);\n        blackGradient.addColorStop(0, 'rgba(0, 0, 0, 0)');\n        blackGradient.addColorStop(1, 'rgba(0, 0, 0, 1)');\n        ctx.rect(0, 0, this._canvas.width, this._canvas.height);\n        ctx.fillStyle = Color.Format.CSS.format(saturatedColor);\n        ctx.fill();\n        ctx.fillStyle = whiteGradient;\n        ctx.fill();\n        ctx.fillStyle = blackGradient;\n        ctx.fill();\n    }\n    paintSelection(s, v) {\n        this.selection.style.left = `${s * this.width}px`;\n        this.selection.style.top = `${this.height - v * this.height}px`;\n    }\n    onDidChangeColor(color) {\n        if (this.monitor && this.monitor.isMonitoring()) {\n            return;\n        }\n        this.paint();\n        const hsva = color.hsva;\n        this.paintSelection(hsva.s, hsva.v);\n    }\n}\nclass Strip extends Disposable {\n    constructor(container, model, showingStandaloneColorPicker = false) {\n        super();\n        this.model = model;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        if (showingStandaloneColorPicker) {\n            this.domNode = dom.append(container, $('.standalone-strip'));\n            this.overlay = dom.append(this.domNode, $('.standalone-overlay'));\n        }\n        else {\n            this.domNode = dom.append(container, $('.strip'));\n            this.overlay = dom.append(this.domNode, $('.overlay'));\n        }\n        this.slider = dom.append(this.domNode, $('.slider'));\n        this.slider.style.top = `0px`;\n        this._register(dom.addDisposableListener(this.domNode, dom.EventType.POINTER_DOWN, e => this.onPointerDown(e)));\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n        this.layout();\n    }\n    layout() {\n        this.height = this.domNode.offsetHeight - this.slider.offsetHeight;\n        const value = this.getValue(this.model.color);\n        this.updateSliderPosition(value);\n    }\n    onDidChangeColor(color) {\n        const value = this.getValue(color);\n        this.updateSliderPosition(value);\n    }\n    onPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        const monitor = this._register(new GlobalPointerMoveMonitor());\n        const origin = dom.getDomNodePagePosition(this.domNode);\n        this.domNode.classList.add('grabbing');\n        if (e.target !== this.slider) {\n            this.onDidChangeTop(e.offsetY);\n        }\n        monitor.startMonitoring(e.target, e.pointerId, e.buttons, event => this.onDidChangeTop(event.pageY - origin.top), () => null);\n        const pointerUpListener = dom.addDisposableListener(e.target.ownerDocument, dom.EventType.POINTER_UP, () => {\n            this._onColorFlushed.fire();\n            pointerUpListener.dispose();\n            monitor.stopMonitoring(true);\n            this.domNode.classList.remove('grabbing');\n        }, true);\n    }\n    onDidChangeTop(top) {\n        const value = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.updateSliderPosition(value);\n        this._onDidChange.fire(value);\n    }\n    updateSliderPosition(value) {\n        this.slider.style.top = `${(1 - value) * this.height}px`;\n    }\n}\nclass OpacityStrip extends Strip {\n    constructor(container, model, showingStandaloneColorPicker = false) {\n        super(container, model, showingStandaloneColorPicker);\n        this.domNode.classList.add('opacity-strip');\n        this.onDidChangeColor(this.model.color);\n    }\n    onDidChangeColor(color) {\n        super.onDidChangeColor(color);\n        const { r, g, b } = color.rgba;\n        const opaque = new Color(new RGBA(r, g, b, 1));\n        const transparent = new Color(new RGBA(r, g, b, 0));\n        this.overlay.style.background = `linear-gradient(to bottom, ${opaque} 0%, ${transparent} 100%)`;\n    }\n    getValue(color) {\n        return color.hsva.a;\n    }\n}\nclass HueStrip extends Strip {\n    constructor(container, model, showingStandaloneColorPicker = false) {\n        super(container, model, showingStandaloneColorPicker);\n        this.domNode.classList.add('hue-strip');\n    }\n    getValue(color) {\n        return 1 - (color.hsva.h / 360);\n    }\n}\nexport class InsertButton extends Disposable {\n    constructor(container) {\n        super();\n        this._onClicked = this._register(new Emitter());\n        this.onClicked = this._onClicked.event;\n        this._button = dom.append(container, document.createElement('button'));\n        this._button.classList.add('insert-button');\n        this._button.textContent = 'Insert';\n        this._button.onclick = e => {\n            this._onClicked.fire();\n        };\n    }\n    get button() {\n        return this._button;\n    }\n}\nexport class ColorPickerWidget extends Widget {\n    constructor(container, model, pixelRatio, themeService, standaloneColorPicker = false) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._register(PixelRatio.onDidChange(() => this.layout()));\n        const element = $('.colorpicker-widget');\n        container.appendChild(element);\n        this.header = this._register(new ColorPickerHeader(element, this.model, themeService, standaloneColorPicker));\n        this.body = this._register(new ColorPickerBody(element, this.model, this.pixelRatio, standaloneColorPicker));\n    }\n    layout() {\n        this.body.layout();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../common/core/range.js';\nimport { getColorPresentations, getColors } from './color.js';\nimport { ColorDetector } from './colorDetector.js';\nimport { ColorPickerModel } from './colorPickerModel.js';\nimport { ColorPickerWidget } from './colorPickerWidget.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { Dimension } from '../../../../base/browser/dom.js';\nexport class ColorHover {\n    constructor(owner, range, model, provider) {\n        this.owner = owner;\n        this.range = range;\n        this.model = model;\n        this.provider = provider;\n        /**\n         * Force the hover to always be rendered at this specific range,\n         * even in the case of multiple hover parts.\n         */\n        this.forceShowAtRange = true;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nlet ColorHoverParticipant = class ColorHoverParticipant {\n    constructor(_editor, _themeService) {\n        this._editor = _editor;\n        this._themeService = _themeService;\n        this.hoverOrdinal = 2;\n    }\n    computeSync(_anchor, _lineDecorations) {\n        return [];\n    }\n    computeAsync(anchor, lineDecorations, token) {\n        return AsyncIterableObject.fromPromise(this._computeAsync(anchor, lineDecorations, token));\n    }\n    _computeAsync(_anchor, lineDecorations, _token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return [];\n            }\n            const colorDetector = ColorDetector.get(this._editor);\n            if (!colorDetector) {\n                return [];\n            }\n            for (const d of lineDecorations) {\n                if (!colorDetector.isColorDecoration(d)) {\n                    continue;\n                }\n                const colorData = colorDetector.getColorData(d.range.getStartPosition());\n                if (colorData) {\n                    const colorHover = yield _createColorHover(this, this._editor.getModel(), colorData.colorInfo, colorData.provider);\n                    return [colorHover];\n                }\n            }\n            return [];\n        });\n    }\n    renderHoverParts(context, hoverParts) {\n        return renderHoverParts(this, this._editor, this._themeService, hoverParts, context);\n    }\n};\nColorHoverParticipant = __decorate([\n    __param(1, IThemeService)\n], ColorHoverParticipant);\nexport { ColorHoverParticipant };\nexport class StandaloneColorPickerHover {\n    constructor(owner, range, model, provider) {\n        this.owner = owner;\n        this.range = range;\n        this.model = model;\n        this.provider = provider;\n    }\n}\nlet StandaloneColorPickerParticipant = class StandaloneColorPickerParticipant {\n    constructor(_editor, _themeService) {\n        this._editor = _editor;\n        this._themeService = _themeService;\n        this._color = null;\n    }\n    createColorHover(defaultColorInfo, defaultColorProvider, colorProviderRegistry) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return null;\n            }\n            const colorDetector = ColorDetector.get(this._editor);\n            if (!colorDetector) {\n                return null;\n            }\n            const colors = yield getColors(colorProviderRegistry, this._editor.getModel(), CancellationToken.None);\n            let foundColorInfo = null;\n            let foundColorProvider = null;\n            for (const colorData of colors) {\n                const colorInfo = colorData.colorInfo;\n                if (Range.containsRange(colorInfo.range, defaultColorInfo.range)) {\n                    foundColorInfo = colorInfo;\n                    foundColorProvider = colorData.provider;\n                }\n            }\n            const colorInfo = foundColorInfo !== null && foundColorInfo !== void 0 ? foundColorInfo : defaultColorInfo;\n            const colorProvider = foundColorProvider !== null && foundColorProvider !== void 0 ? foundColorProvider : defaultColorProvider;\n            const foundInEditor = !!foundColorInfo;\n            return { colorHover: yield _createColorHover(this, this._editor.getModel(), colorInfo, colorProvider), foundInEditor: foundInEditor };\n        });\n    }\n    updateEditorModel(colorHoverData) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const colorPickerModel = colorHoverData.model;\n            let range = new Range(colorHoverData.range.startLineNumber, colorHoverData.range.startColumn, colorHoverData.range.endLineNumber, colorHoverData.range.endColumn);\n            if (this._color) {\n                yield _updateColorPresentations(this._editor.getModel(), colorPickerModel, this._color, range, colorHoverData);\n                range = _updateEditorModel(this._editor, range, colorPickerModel);\n            }\n        });\n    }\n    renderHoverParts(context, hoverParts) {\n        return renderHoverParts(this, this._editor, this._themeService, hoverParts, context);\n    }\n    set color(color) {\n        this._color = color;\n    }\n    get color() {\n        return this._color;\n    }\n};\nStandaloneColorPickerParticipant = __decorate([\n    __param(1, IThemeService)\n], StandaloneColorPickerParticipant);\nexport { StandaloneColorPickerParticipant };\nfunction _createColorHover(participant, editorModel, colorInfo, provider) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const originalText = editorModel.getValueInRange(colorInfo.range);\n        const { red, green, blue, alpha } = colorInfo.color;\n        const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n        const color = new Color(rgba);\n        const colorPresentations = yield getColorPresentations(editorModel, colorInfo, provider, CancellationToken.None);\n        const model = new ColorPickerModel(color, [], 0);\n        model.colorPresentations = colorPresentations || [];\n        model.guessColorPresentation(color, originalText);\n        if (participant instanceof ColorHoverParticipant) {\n            return new ColorHover(participant, Range.lift(colorInfo.range), model, provider);\n        }\n        else {\n            return new StandaloneColorPickerHover(participant, Range.lift(colorInfo.range), model, provider);\n        }\n    });\n}\nfunction renderHoverParts(participant, editor, themeService, hoverParts, context) {\n    if (hoverParts.length === 0 || !editor.hasModel()) {\n        return Disposable.None;\n    }\n    if (context.setMinimumDimensions) {\n        const minimumHeight = editor.getOption(66 /* EditorOption.lineHeight */) + 8;\n        context.setMinimumDimensions(new Dimension(302, minimumHeight));\n    }\n    const disposables = new DisposableStore();\n    const colorHover = hoverParts[0];\n    const editorModel = editor.getModel();\n    const model = colorHover.model;\n    const widget = disposables.add(new ColorPickerWidget(context.fragment, model, editor.getOption(141 /* EditorOption.pixelRatio */), themeService, participant instanceof StandaloneColorPickerParticipant));\n    context.setColorPicker(widget);\n    let editorUpdatedByColorPicker = false;\n    let range = new Range(colorHover.range.startLineNumber, colorHover.range.startColumn, colorHover.range.endLineNumber, colorHover.range.endColumn);\n    if (participant instanceof StandaloneColorPickerParticipant) {\n        const color = hoverParts[0].model.color;\n        participant.color = color;\n        _updateColorPresentations(editorModel, model, color, range, colorHover);\n        disposables.add(model.onColorFlushed((color) => {\n            participant.color = color;\n        }));\n    }\n    else {\n        disposables.add(model.onColorFlushed((color) => __awaiter(this, void 0, void 0, function* () {\n            yield _updateColorPresentations(editorModel, model, color, range, colorHover);\n            editorUpdatedByColorPicker = true;\n            range = _updateEditorModel(editor, range, model, context);\n        })));\n    }\n    disposables.add(model.onDidChangeColor((color) => {\n        _updateColorPresentations(editorModel, model, color, range, colorHover);\n    }));\n    disposables.add(editor.onDidChangeModelContent((e) => {\n        if (editorUpdatedByColorPicker) {\n            editorUpdatedByColorPicker = false;\n        }\n        else {\n            context.hide();\n            editor.focus();\n        }\n    }));\n    return disposables;\n}\nfunction _updateEditorModel(editor, range, model, context) {\n    let textEdits;\n    let newRange;\n    if (model.presentation.textEdit) {\n        textEdits = [model.presentation.textEdit];\n        newRange = new Range(model.presentation.textEdit.range.startLineNumber, model.presentation.textEdit.range.startColumn, model.presentation.textEdit.range.endLineNumber, model.presentation.textEdit.range.endColumn);\n        const trackedRange = editor.getModel()._setTrackedRange(null, newRange, 3 /* TrackedRangeStickiness.GrowsOnlyWhenTypingAfter */);\n        editor.pushUndoStop();\n        editor.executeEdits('colorpicker', textEdits);\n        newRange = editor.getModel()._getTrackedRange(trackedRange) || newRange;\n    }\n    else {\n        textEdits = [{ range, text: model.presentation.label, forceMoveMarkers: false }];\n        newRange = range.setEndPosition(range.endLineNumber, range.startColumn + model.presentation.label.length);\n        editor.pushUndoStop();\n        editor.executeEdits('colorpicker', textEdits);\n    }\n    if (model.presentation.additionalTextEdits) {\n        textEdits = [...model.presentation.additionalTextEdits];\n        editor.executeEdits('colorpicker', textEdits);\n        if (context) {\n            context.hide();\n        }\n    }\n    editor.pushUndoStop();\n    return newRange;\n}\nfunction _updateColorPresentations(editorModel, colorPickerModel, color, range, colorHover) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const colorPresentations = yield getColorPresentations(editorModel, {\n            range: range,\n            color: {\n                red: color.rgba.r / 255,\n                green: color.rgba.g / 255,\n                blue: color.rgba.b / 255,\n                alpha: color.rgba.a\n            }\n        }, colorHover.provider, CancellationToken.None);\n        colorPickerModel.colorPresentations = colorPresentations || [];\n    });\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { EditorWorkerClient } from '../../../browser/services/editorWorkerService.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { registerEditorFeature } from '../../../common/editorFeatures.js';\nexport class DefaultDocumentColorProvider {\n    constructor(modelService, languageConfigurationService) {\n        this._editorWorkerClient = new EditorWorkerClient(modelService, false, 'editorWorkerService', languageConfigurationService);\n    }\n    provideDocumentColors(model, _token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this._editorWorkerClient.computeDefaultDocumentColors(model.uri);\n        });\n    }\n    provideColorPresentations(_model, colorInfo, _token) {\n        const range = colorInfo.range;\n        const colorFromInfo = colorInfo.color;\n        const alpha = colorFromInfo.alpha;\n        const color = new Color(new RGBA(Math.round(255 * colorFromInfo.red), Math.round(255 * colorFromInfo.green), Math.round(255 * colorFromInfo.blue), alpha));\n        const rgb = alpha ? Color.Format.CSS.formatRGB(color) : Color.Format.CSS.formatRGBA(color);\n        const hsl = alpha ? Color.Format.CSS.formatHSL(color) : Color.Format.CSS.formatHSLA(color);\n        const hex = alpha ? Color.Format.CSS.formatHex(color) : Color.Format.CSS.formatHexA(color);\n        const colorPresentations = [];\n        colorPresentations.push({ label: rgb, textEdit: { range: range, text: rgb } });\n        colorPresentations.push({ label: hsl, textEdit: { range: range, text: hsl } });\n        colorPresentations.push({ label: hex, textEdit: { range: range, text: hex } });\n        return colorPresentations;\n    }\n}\nlet DefaultDocumentColorProviderFeature = class DefaultDocumentColorProviderFeature extends Disposable {\n    constructor(_modelService, _languageConfigurationService, _languageFeaturesService) {\n        super();\n        this._register(_languageFeaturesService.colorProvider.register('*', new DefaultDocumentColorProvider(_modelService, _languageConfigurationService)));\n    }\n};\nDefaultDocumentColorProviderFeature = __decorate([\n    __param(0, IModelService),\n    __param(1, ILanguageConfigurationService),\n    __param(2, ILanguageFeaturesService)\n], DefaultDocumentColorProviderFeature);\nregisterEditorFeature(DefaultDocumentColorProviderFeature);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar StandaloneColorPickerController_1, StandaloneColorPickerWidget_1;\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { StandaloneColorPickerParticipant } from './colorHoverParticipant.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { EditorHoverStatusBar } from '../../hover/browser/contentHover.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { DefaultDocumentColorProvider } from './defaultDocumentColorProvider.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport './colorPicker.css';\nlet StandaloneColorPickerController = StandaloneColorPickerController_1 = class StandaloneColorPickerController extends Disposable {\n    constructor(_editor, _contextKeyService, _modelService, _keybindingService, _instantiationService, _languageFeatureService, _languageConfigurationService) {\n        super();\n        this._editor = _editor;\n        this._modelService = _modelService;\n        this._keybindingService = _keybindingService;\n        this._instantiationService = _instantiationService;\n        this._languageFeatureService = _languageFeatureService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._standaloneColorPickerWidget = null;\n        this._standaloneColorPickerVisible = EditorContextKeys.standaloneColorPickerVisible.bindTo(_contextKeyService);\n        this._standaloneColorPickerFocused = EditorContextKeys.standaloneColorPickerFocused.bindTo(_contextKeyService);\n    }\n    showOrFocus() {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._standaloneColorPickerVisible.get()) {\n            this._standaloneColorPickerWidget = new StandaloneColorPickerWidget(this._editor, this._standaloneColorPickerVisible, this._standaloneColorPickerFocused, this._instantiationService, this._modelService, this._keybindingService, this._languageFeatureService, this._languageConfigurationService);\n        }\n        else if (!this._standaloneColorPickerFocused.get()) {\n            (_a = this._standaloneColorPickerWidget) === null || _a === void 0 ? void 0 : _a.focus();\n        }\n    }\n    hide() {\n        var _a;\n        this._standaloneColorPickerFocused.set(false);\n        this._standaloneColorPickerVisible.set(false);\n        (_a = this._standaloneColorPickerWidget) === null || _a === void 0 ? void 0 : _a.hide();\n        this._editor.focus();\n    }\n    insertColor() {\n        var _a;\n        (_a = this._standaloneColorPickerWidget) === null || _a === void 0 ? void 0 : _a.updateEditor();\n        this.hide();\n    }\n    static get(editor) {\n        return editor.getContribution(StandaloneColorPickerController_1.ID);\n    }\n};\nStandaloneColorPickerController.ID = 'editor.contrib.standaloneColorPickerController';\nStandaloneColorPickerController = StandaloneColorPickerController_1 = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, IModelService),\n    __param(3, IKeybindingService),\n    __param(4, IInstantiationService),\n    __param(5, ILanguageFeaturesService),\n    __param(6, ILanguageConfigurationService)\n], StandaloneColorPickerController);\nexport { StandaloneColorPickerController };\nregisterEditorContribution(StandaloneColorPickerController.ID, StandaloneColorPickerController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nconst PADDING = 8;\nconst CLOSE_BUTTON_WIDTH = 22;\nlet StandaloneColorPickerWidget = StandaloneColorPickerWidget_1 = class StandaloneColorPickerWidget extends Disposable {\n    constructor(_editor, _standaloneColorPickerVisible, _standaloneColorPickerFocused, _instantiationService, _modelService, _keybindingService, _languageFeaturesService, _languageConfigurationService) {\n        var _a;\n        super();\n        this._editor = _editor;\n        this._standaloneColorPickerVisible = _standaloneColorPickerVisible;\n        this._standaloneColorPickerFocused = _standaloneColorPickerFocused;\n        this._modelService = _modelService;\n        this._keybindingService = _keybindingService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this.allowEditorOverflow = true;\n        this._position = undefined;\n        this._body = document.createElement('div');\n        this._colorHover = null;\n        this._selectionSetInEditor = false;\n        this._onResult = this._register(new Emitter());\n        this.onResult = this._onResult.event;\n        this._standaloneColorPickerVisible.set(true);\n        this._standaloneColorPickerParticipant = _instantiationService.createInstance(StandaloneColorPickerParticipant, this._editor);\n        this._position = (_a = this._editor._getViewModel()) === null || _a === void 0 ? void 0 : _a.getPrimaryCursorState().modelState.position;\n        const editorSelection = this._editor.getSelection();\n        const selection = editorSelection ?\n            {\n                startLineNumber: editorSelection.startLineNumber,\n                startColumn: editorSelection.startColumn,\n                endLineNumber: editorSelection.endLineNumber,\n                endColumn: editorSelection.endColumn\n            } : { startLineNumber: 0, endLineNumber: 0, endColumn: 0, startColumn: 0 };\n        const focusTracker = this._register(dom.trackFocus(this._body));\n        this._register(focusTracker.onDidBlur(_ => {\n            this.hide();\n        }));\n        this._register(focusTracker.onDidFocus(_ => {\n            this.focus();\n        }));\n        // When the cursor position changes, hide the color picker\n        this._register(this._editor.onDidChangeCursorPosition(() => {\n            // Do not hide the color picker when the cursor changes position due to the keybindings\n            if (!this._selectionSetInEditor) {\n                this.hide();\n            }\n            else {\n                this._selectionSetInEditor = false;\n            }\n        }));\n        this._register(this._editor.onMouseMove((e) => {\n            var _a;\n            const classList = (_a = e.target.element) === null || _a === void 0 ? void 0 : _a.classList;\n            if (classList && classList.contains('colorpicker-color-decoration')) {\n                this.hide();\n            }\n        }));\n        this._register(this.onResult((result) => {\n            this._render(result.value, result.foundInEditor);\n        }));\n        this._start(selection);\n        this._body.style.zIndex = '50';\n        this._editor.addContentWidget(this);\n    }\n    updateEditor() {\n        if (this._colorHover) {\n            this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover);\n        }\n    }\n    getId() {\n        return StandaloneColorPickerWidget_1.ID;\n    }\n    getDomNode() {\n        return this._body;\n    }\n    getPosition() {\n        if (!this._position) {\n            return null;\n        }\n        const positionPreference = this._editor.getOption(60 /* EditorOption.hover */).above;\n        return {\n            position: this._position,\n            secondaryPosition: this._position,\n            preference: positionPreference ? [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */] : [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */],\n            positionAffinity: 2 /* PositionAffinity.None */\n        };\n    }\n    hide() {\n        this.dispose();\n        this._standaloneColorPickerVisible.set(false);\n        this._standaloneColorPickerFocused.set(false);\n        this._editor.removeContentWidget(this);\n        this._editor.focus();\n    }\n    focus() {\n        this._standaloneColorPickerFocused.set(true);\n        this._body.focus();\n    }\n    _start(selection) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const computeAsyncResult = yield this._computeAsync(selection);\n            if (!computeAsyncResult) {\n                return;\n            }\n            this._onResult.fire(new StandaloneColorPickerResult(computeAsyncResult.result, computeAsyncResult.foundInEditor));\n        });\n    }\n    _computeAsync(range) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return null;\n            }\n            const colorInfo = {\n                range: range,\n                color: { red: 0, green: 0, blue: 0, alpha: 1 }\n            };\n            const colorHoverResult = yield this._standaloneColorPickerParticipant.createColorHover(colorInfo, new DefaultDocumentColorProvider(this._modelService, this._languageConfigurationService), this._languageFeaturesService.colorProvider);\n            if (!colorHoverResult) {\n                return null;\n            }\n            return { result: colorHoverResult.colorHover, foundInEditor: colorHoverResult.foundInEditor };\n        });\n    }\n    _render(colorHover, foundInEditor) {\n        const fragment = document.createDocumentFragment();\n        const statusBar = this._register(new EditorHoverStatusBar(this._keybindingService));\n        let colorPickerWidget;\n        const context = {\n            fragment,\n            statusBar,\n            setColorPicker: (widget) => colorPickerWidget = widget,\n            onContentsChanged: () => { },\n            hide: () => this.hide()\n        };\n        this._colorHover = colorHover;\n        this._register(this._standaloneColorPickerParticipant.renderHoverParts(context, [colorHover]));\n        if (colorPickerWidget === undefined) {\n            return;\n        }\n        this._body.classList.add('standalone-colorpicker-body');\n        this._body.style.maxHeight = Math.max(this._editor.getLayoutInfo().height / 4, 250) + 'px';\n        this._body.style.maxWidth = Math.max(this._editor.getLayoutInfo().width * 0.66, 500) + 'px';\n        this._body.tabIndex = 0;\n        this._body.appendChild(fragment);\n        colorPickerWidget.layout();\n        const colorPickerBody = colorPickerWidget.body;\n        const saturationBoxWidth = colorPickerBody.saturationBox.domNode.clientWidth;\n        const widthOfOriginalColorBox = colorPickerBody.domNode.clientWidth - saturationBoxWidth - CLOSE_BUTTON_WIDTH - PADDING;\n        const enterButton = colorPickerWidget.body.enterButton;\n        enterButton === null || enterButton === void 0 ? void 0 : enterButton.onClicked(() => {\n            this.updateEditor();\n            this.hide();\n        });\n        const colorPickerHeader = colorPickerWidget.header;\n        const pickedColorNode = colorPickerHeader.pickedColorNode;\n        pickedColorNode.style.width = saturationBoxWidth + PADDING + 'px';\n        const originalColorNode = colorPickerHeader.originalColorNode;\n        originalColorNode.style.width = widthOfOriginalColorBox + 'px';\n        const closeButton = colorPickerWidget.header.closeButton;\n        closeButton === null || closeButton === void 0 ? void 0 : closeButton.onClicked(() => {\n            this.hide();\n        });\n        // When found in the editor, highlight the selection in the editor\n        if (foundInEditor) {\n            if (enterButton) {\n                enterButton.button.textContent = 'Replace';\n            }\n            this._selectionSetInEditor = true;\n            this._editor.setSelection(colorHover.range);\n        }\n        this._editor.layoutContentWidget(this);\n    }\n};\nStandaloneColorPickerWidget.ID = 'editor.contrib.standaloneColorPickerWidget';\nStandaloneColorPickerWidget = StandaloneColorPickerWidget_1 = __decorate([\n    __param(3, IInstantiationService),\n    __param(4, IModelService),\n    __param(5, IKeybindingService),\n    __param(6, ILanguageFeaturesService),\n    __param(7, ILanguageConfigurationService)\n], StandaloneColorPickerWidget);\nexport { StandaloneColorPickerWidget };\nclass StandaloneColorPickerResult {\n    // The color picker result consists of: an array of color results and a boolean indicating if the color was found in the editor\n    constructor(value, foundInEditor) {\n        this.value = value;\n        this.foundInEditor = foundInEditor;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, EditorAction2, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { localize } from '../../../../nls.js';\nimport { StandaloneColorPickerController } from './standaloneColorPickerWidget.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { MenuId, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport './colorPicker.css';\nexport class ShowOrFocusStandaloneColorPicker extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.showOrFocusStandaloneColorPicker',\n            title: {\n                value: localize('showOrFocusStandaloneColorPicker', \"Show or Focus Standalone Color Picker\"),\n                mnemonicTitle: localize({ key: 'mishowOrFocusStandaloneColorPicker', comment: ['&& denotes a mnemonic'] }, \"&&Show or Focus Standalone Color Picker\"),\n                original: 'Show or Focus Standalone Color Picker',\n            },\n            precondition: undefined,\n            menu: [\n                { id: MenuId.CommandPalette },\n            ]\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StandaloneColorPickerController.get(editor)) === null || _a === void 0 ? void 0 : _a.showOrFocus();\n    }\n}\nclass HideStandaloneColorPicker extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.hideColorPicker',\n            label: localize({\n                key: 'hideColorPicker',\n                comment: [\n                    'Action that hides the color picker'\n                ]\n            }, \"Hide the Color Picker\"),\n            alias: 'Hide the Color Picker',\n            precondition: EditorContextKeys.standaloneColorPickerVisible.isEqualTo(true),\n            kbOpts: {\n                primary: 9 /* KeyCode.Escape */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        (_a = StandaloneColorPickerController.get(editor)) === null || _a === void 0 ? void 0 : _a.hide();\n    }\n}\nclass InsertColorWithStandaloneColorPicker extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertColorWithStandaloneColorPicker',\n            label: localize({\n                key: 'insertColorWithStandaloneColorPicker',\n                comment: [\n                    'Action that inserts color with standalone color picker'\n                ]\n            }, \"Insert Color with Standalone Color Picker\"),\n            alias: 'Insert Color with Standalone Color Picker',\n            precondition: EditorContextKeys.standaloneColorPickerFocused.isEqualTo(true),\n            kbOpts: {\n                primary: 3 /* KeyCode.Enter */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        (_a = StandaloneColorPickerController.get(editor)) === null || _a === void 0 ? void 0 : _a.insertColor();\n    }\n}\nregisterEditorAction(HideStandaloneColorPicker);\nregisterEditorAction(InsertColorWithStandaloneColorPicker);\nregisterAction2(ShowOrFocusStandaloneColorPicker);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class BlockCommentCommand {\n    constructor(selection, insertSpace, languageConfigurationService) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._selection = selection;\n        this._insertSpace = insertSpace;\n        this._usedEndToken = null;\n    }\n    static _haystackHasNeedleAtOffset(haystack, needle, offset) {\n        if (offset < 0) {\n            return false;\n        }\n        const needleLength = needle.length;\n        const haystackLength = haystack.length;\n        if (offset + needleLength > haystackLength) {\n            return false;\n        }\n        for (let i = 0; i < needleLength; i++) {\n            const codeA = haystack.charCodeAt(offset + i);\n            const codeB = needle.charCodeAt(i);\n            if (codeA === codeB) {\n                continue;\n            }\n            if (codeA >= 65 /* CharCode.A */ && codeA <= 90 /* CharCode.Z */ && codeA + 32 === codeB) {\n                // codeA is upper-case variant of codeB\n                continue;\n            }\n            if (codeB >= 65 /* CharCode.A */ && codeB <= 90 /* CharCode.Z */ && codeB + 32 === codeA) {\n                // codeB is upper-case variant of codeA\n                continue;\n            }\n            return false;\n        }\n        return true;\n    }\n    _createOperationsForBlockComment(selection, startToken, endToken, insertSpace, model, builder) {\n        const startLineNumber = selection.startLineNumber;\n        const startColumn = selection.startColumn;\n        const endLineNumber = selection.endLineNumber;\n        const endColumn = selection.endColumn;\n        const startLineText = model.getLineContent(startLineNumber);\n        const endLineText = model.getLineContent(endLineNumber);\n        let startTokenIndex = startLineText.lastIndexOf(startToken, startColumn - 1 + startToken.length);\n        let endTokenIndex = endLineText.indexOf(endToken, endColumn - 1 - endToken.length);\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            if (startLineNumber === endLineNumber) {\n                const lineBetweenTokens = startLineText.substring(startTokenIndex + startToken.length, endTokenIndex);\n                if (lineBetweenTokens.indexOf(endToken) >= 0) {\n                    // force to add a block comment\n                    startTokenIndex = -1;\n                    endTokenIndex = -1;\n                }\n            }\n            else {\n                const startLineAfterStartToken = startLineText.substring(startTokenIndex + startToken.length);\n                const endLineBeforeEndToken = endLineText.substring(0, endTokenIndex);\n                if (startLineAfterStartToken.indexOf(endToken) >= 0 || endLineBeforeEndToken.indexOf(endToken) >= 0) {\n                    // force to add a block comment\n                    startTokenIndex = -1;\n                    endTokenIndex = -1;\n                }\n            }\n        }\n        let ops;\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            // Consider spaces as part of the comment tokens\n            if (insertSpace && startTokenIndex + startToken.length < startLineText.length && startLineText.charCodeAt(startTokenIndex + startToken.length) === 32 /* CharCode.Space */) {\n                // Pretend the start token contains a trailing space\n                startToken = startToken + ' ';\n            }\n            if (insertSpace && endTokenIndex > 0 && endLineText.charCodeAt(endTokenIndex - 1) === 32 /* CharCode.Space */) {\n                // Pretend the end token contains a leading space\n                endToken = ' ' + endToken;\n                endTokenIndex -= 1;\n            }\n            ops = BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n        }\n        else {\n            ops = BlockCommentCommand._createAddBlockCommentOperations(selection, startToken, endToken, this._insertSpace);\n            this._usedEndToken = ops.length === 1 ? endToken : null;\n        }\n        for (const op of ops) {\n            builder.addTrackedEditOperation(op.range, op.text);\n        }\n    }\n    static _createRemoveBlockCommentOperations(r, startToken, endToken) {\n        const res = [];\n        if (!Range.isEmpty(r)) {\n            // Remove block comment start\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.startLineNumber, r.startColumn)));\n            // Remove block comment end\n            res.push(EditOperation.delete(new Range(r.endLineNumber, r.endColumn, r.endLineNumber, r.endColumn + endToken.length)));\n        }\n        else {\n            // Remove both continuously\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.endLineNumber, r.endColumn + endToken.length)));\n        }\n        return res;\n    }\n    static _createAddBlockCommentOperations(r, startToken, endToken, insertSpace) {\n        const res = [];\n        if (!Range.isEmpty(r)) {\n            // Insert block comment start\n            res.push(EditOperation.insert(new Position(r.startLineNumber, r.startColumn), startToken + (insertSpace ? ' ' : '')));\n            // Insert block comment end\n            res.push(EditOperation.insert(new Position(r.endLineNumber, r.endColumn), (insertSpace ? ' ' : '') + endToken));\n        }\n        else {\n            // Insert both continuously\n            res.push(EditOperation.replace(new Range(r.startLineNumber, r.startColumn, r.endLineNumber, r.endColumn), startToken + '  ' + endToken));\n        }\n        return res;\n    }\n    getEditOperations(model, builder) {\n        const startLineNumber = this._selection.startLineNumber;\n        const startColumn = this._selection.startColumn;\n        model.tokenization.tokenizeIfCheap(startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, startColumn);\n        const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n            // Mode does not support block comments\n            return;\n        }\n        this._createOperationsForBlockComment(this._selection, config.blockCommentStartToken, config.blockCommentEndToken, this._insertSpace, model, builder);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        if (inverseEditOperations.length === 2) {\n            const startTokenEditOperation = inverseEditOperations[0];\n            const endTokenEditOperation = inverseEditOperations[1];\n            return new Selection(startTokenEditOperation.range.endLineNumber, startTokenEditOperation.range.endColumn, endTokenEditOperation.range.startLineNumber, endTokenEditOperation.range.startColumn);\n        }\n        else {\n            const srcRange = inverseEditOperations[0].range;\n            const deltaColumn = this._usedEndToken ? -this._usedEndToken.length - 1 : 0; // minus 1 space before endToken\n            return new Selection(srcRange.endLineNumber, srcRange.endColumn + deltaColumn, srcRange.endLineNumber, srcRange.endColumn + deltaColumn);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nexport class LineCommentCommand {\n    constructor(languageConfigurationService, selection, tabSize, type, insertSpace, ignoreEmptyLines, ignoreFirstLine) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._selection = selection;\n        this._tabSize = tabSize;\n        this._type = type;\n        this._insertSpace = insertSpace;\n        this._selectionId = null;\n        this._deltaColumn = 0;\n        this._moveEndPositionDown = false;\n        this._ignoreEmptyLines = ignoreEmptyLines;\n        this._ignoreFirstLine = ignoreFirstLine || false;\n    }\n    /**\n     * Do an initial pass over the lines and gather info about the line comment string.\n     * Returns null if any of the lines doesn't support a line comment string.\n     */\n    static _gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService) {\n        model.tokenization.tokenizeIfCheap(startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, 1);\n        const config = languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        const commentStr = (config ? config.lineCommentToken : null);\n        if (!commentStr) {\n            // Mode does not support line comments\n            return null;\n        }\n        const lines = [];\n        for (let i = 0, lineCount = endLineNumber - startLineNumber + 1; i < lineCount; i++) {\n            lines[i] = {\n                ignore: false,\n                commentStr: commentStr,\n                commentStrOffset: 0,\n                commentStrLength: commentStr.length\n            };\n        }\n        return lines;\n    }\n    /**\n     * Analyze lines and decide which lines are relevant and what the toggle should do.\n     * Also, build up several offsets and lengths useful in the generation of editor operations.\n     */\n    static _analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n        let onlyWhitespaceLines = true;\n        let shouldRemoveComments;\n        if (type === 0 /* Type.Toggle */) {\n            shouldRemoveComments = true;\n        }\n        else if (type === 1 /* Type.ForceAdd */) {\n            shouldRemoveComments = false;\n        }\n        else {\n            shouldRemoveComments = true;\n        }\n        for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n            const lineData = lines[i];\n            const lineNumber = startLineNumber + i;\n            if (lineNumber === startLineNumber && ignoreFirstLine) {\n                // first line ignored\n                lineData.ignore = true;\n                continue;\n            }\n            const lineContent = model.getLineContent(lineNumber);\n            const lineContentStartOffset = strings.firstNonWhitespaceIndex(lineContent);\n            if (lineContentStartOffset === -1) {\n                // Empty or whitespace only line\n                lineData.ignore = ignoreEmptyLines;\n                lineData.commentStrOffset = lineContent.length;\n                continue;\n            }\n            onlyWhitespaceLines = false;\n            lineData.ignore = false;\n            lineData.commentStrOffset = lineContentStartOffset;\n            if (shouldRemoveComments && !BlockCommentCommand._haystackHasNeedleAtOffset(lineContent, lineData.commentStr, lineContentStartOffset)) {\n                if (type === 0 /* Type.Toggle */) {\n                    // Every line so far has been a line comment, but this one is not\n                    shouldRemoveComments = false;\n                }\n                else if (type === 1 /* Type.ForceAdd */) {\n                    // Will not happen\n                }\n                else {\n                    lineData.ignore = true;\n                }\n            }\n            if (shouldRemoveComments && insertSpace) {\n                // Remove a following space if present\n                const commentStrEndOffset = lineContentStartOffset + lineData.commentStrLength;\n                if (commentStrEndOffset < lineContent.length && lineContent.charCodeAt(commentStrEndOffset) === 32 /* CharCode.Space */) {\n                    lineData.commentStrLength += 1;\n                }\n            }\n        }\n        if (type === 0 /* Type.Toggle */ && onlyWhitespaceLines) {\n            // For only whitespace lines, we insert comments\n            shouldRemoveComments = false;\n            // Also, no longer ignore them\n            for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n                lines[i].ignore = false;\n            }\n        }\n        return {\n            supported: true,\n            shouldRemoveComments: shouldRemoveComments,\n            lines: lines\n        };\n    }\n    /**\n     * Analyze all lines and decide exactly what to do => not supported | insert line comments | remove line comments\n     */\n    static _gatherPreflightData(type, insertSpace, model, startLineNumber, endLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n        const lines = LineCommentCommand._gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService);\n        if (lines === null) {\n            return {\n                supported: false\n            };\n        }\n        return LineCommentCommand._analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService);\n    }\n    /**\n     * Given a successful analysis, execute either insert line comments, either remove line comments\n     */\n    _executeLineComments(model, builder, data, s) {\n        let ops;\n        if (data.shouldRemoveComments) {\n            ops = LineCommentCommand._createRemoveLineCommentsOperations(data.lines, s.startLineNumber);\n        }\n        else {\n            LineCommentCommand._normalizeInsertionPoint(model, data.lines, s.startLineNumber, this._tabSize);\n            ops = this._createAddLineCommentsOperations(data.lines, s.startLineNumber);\n        }\n        const cursorPosition = new Position(s.positionLineNumber, s.positionColumn);\n        for (let i = 0, len = ops.length; i < len; i++) {\n            builder.addEditOperation(ops[i].range, ops[i].text);\n            if (Range.isEmpty(ops[i].range) && Range.getStartPosition(ops[i].range).equals(cursorPosition)) {\n                const lineContent = model.getLineContent(cursorPosition.lineNumber);\n                if (lineContent.length + 1 === cursorPosition.column) {\n                    this._deltaColumn = (ops[i].text || '').length;\n                }\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n    }\n    _attemptRemoveBlockComment(model, s, startToken, endToken) {\n        let startLineNumber = s.startLineNumber;\n        let endLineNumber = s.endLineNumber;\n        const startTokenAllowedBeforeColumn = endToken.length + Math.max(model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.startColumn);\n        let startTokenIndex = model.getLineContent(startLineNumber).lastIndexOf(startToken, startTokenAllowedBeforeColumn - 1);\n        let endTokenIndex = model.getLineContent(endLineNumber).indexOf(endToken, s.endColumn - 1 - startToken.length);\n        if (startTokenIndex !== -1 && endTokenIndex === -1) {\n            endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n            endLineNumber = startLineNumber;\n        }\n        if (startTokenIndex === -1 && endTokenIndex !== -1) {\n            startTokenIndex = model.getLineContent(endLineNumber).lastIndexOf(startToken, endTokenIndex);\n            startLineNumber = endLineNumber;\n        }\n        if (s.isEmpty() && (startTokenIndex === -1 || endTokenIndex === -1)) {\n            startTokenIndex = model.getLineContent(startLineNumber).indexOf(startToken);\n            if (startTokenIndex !== -1) {\n                endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n            }\n        }\n        // We have to adjust to possible inner white space.\n        // For Space after startToken, add Space to startToken - range math will work out.\n        if (startTokenIndex !== -1 && model.getLineContent(startLineNumber).charCodeAt(startTokenIndex + startToken.length) === 32 /* CharCode.Space */) {\n            startToken += ' ';\n        }\n        // For Space before endToken, add Space before endToken and shift index one left.\n        if (endTokenIndex !== -1 && model.getLineContent(endLineNumber).charCodeAt(endTokenIndex - 1) === 32 /* CharCode.Space */) {\n            endToken = ' ' + endToken;\n            endTokenIndex -= 1;\n        }\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            return BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n        }\n        return null;\n    }\n    /**\n     * Given an unsuccessful analysis, delegate to the block comment command\n     */\n    _executeBlockComment(model, builder, s) {\n        model.tokenization.tokenizeIfCheap(s.startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(s.startLineNumber, 1);\n        const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n            // Mode does not support block comments\n            return;\n        }\n        const startToken = config.blockCommentStartToken;\n        const endToken = config.blockCommentEndToken;\n        let ops = this._attemptRemoveBlockComment(model, s, startToken, endToken);\n        if (!ops) {\n            if (s.isEmpty()) {\n                const lineContent = model.getLineContent(s.startLineNumber);\n                let firstNonWhitespaceIndex = strings.firstNonWhitespaceIndex(lineContent);\n                if (firstNonWhitespaceIndex === -1) {\n                    // Line is empty or contains only whitespace\n                    firstNonWhitespaceIndex = lineContent.length;\n                }\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, firstNonWhitespaceIndex + 1, s.startLineNumber, lineContent.length + 1), startToken, endToken, this._insertSpace);\n            }\n            else {\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), startToken, endToken, this._insertSpace);\n            }\n            if (ops.length === 1) {\n                // Leave cursor after token and Space\n                this._deltaColumn = startToken.length + 1;\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n        for (const op of ops) {\n            builder.addEditOperation(op.range, op.text);\n        }\n    }\n    getEditOperations(model, builder) {\n        let s = this._selection;\n        this._moveEndPositionDown = false;\n        if (s.startLineNumber === s.endLineNumber && this._ignoreFirstLine) {\n            builder.addEditOperation(new Range(s.startLineNumber, model.getLineMaxColumn(s.startLineNumber), s.startLineNumber + 1, 1), s.startLineNumber === model.getLineCount() ? '' : '\\n');\n            this._selectionId = builder.trackSelection(s);\n            return;\n        }\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._moveEndPositionDown = true;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        const data = LineCommentCommand._gatherPreflightData(this._type, this._insertSpace, model, s.startLineNumber, s.endLineNumber, this._ignoreEmptyLines, this._ignoreFirstLine, this.languageConfigurationService);\n        if (data.supported) {\n            return this._executeLineComments(model, builder, data, s);\n        }\n        return this._executeBlockComment(model, builder, s);\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._moveEndPositionDown) {\n            result = result.setEndPosition(result.endLineNumber + 1, 1);\n        }\n        return new Selection(result.selectionStartLineNumber, result.selectionStartColumn + this._deltaColumn, result.positionLineNumber, result.positionColumn + this._deltaColumn);\n    }\n    /**\n     * Generate edit operations in the remove line comment case\n     */\n    static _createRemoveLineCommentsOperations(lines, startLineNumber) {\n        const res = [];\n        for (let i = 0, len = lines.length; i < len; i++) {\n            const lineData = lines[i];\n            if (lineData.ignore) {\n                continue;\n            }\n            res.push(EditOperation.delete(new Range(startLineNumber + i, lineData.commentStrOffset + 1, startLineNumber + i, lineData.commentStrOffset + lineData.commentStrLength + 1)));\n        }\n        return res;\n    }\n    /**\n     * Generate edit operations in the add line comment case\n     */\n    _createAddLineCommentsOperations(lines, startLineNumber) {\n        const res = [];\n        const afterCommentStr = this._insertSpace ? ' ' : '';\n        for (let i = 0, len = lines.length; i < len; i++) {\n            const lineData = lines[i];\n            if (lineData.ignore) {\n                continue;\n            }\n            res.push(EditOperation.insert(new Position(startLineNumber + i, lineData.commentStrOffset + 1), lineData.commentStr + afterCommentStr));\n        }\n        return res;\n    }\n    static nextVisibleColumn(currentVisibleColumn, tabSize, isTab, columnSize) {\n        if (isTab) {\n            return currentVisibleColumn + (tabSize - (currentVisibleColumn % tabSize));\n        }\n        return currentVisibleColumn + columnSize;\n    }\n    /**\n     * Adjust insertion points to have them vertically aligned in the add line comment case\n     */\n    static _normalizeInsertionPoint(model, lines, startLineNumber, tabSize) {\n        let minVisibleColumn = 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */;\n        let j;\n        let lenJ;\n        for (let i = 0, len = lines.length; i < len; i++) {\n            if (lines[i].ignore) {\n                continue;\n            }\n            const lineContent = model.getLineContent(startLineNumber + i);\n            let currentVisibleColumn = 0;\n            for (let j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* CharCode.Tab */, 1);\n            }\n            if (currentVisibleColumn < minVisibleColumn) {\n                minVisibleColumn = currentVisibleColumn;\n            }\n        }\n        minVisibleColumn = Math.floor(minVisibleColumn / tabSize) * tabSize;\n        for (let i = 0, len = lines.length; i < len; i++) {\n            if (lines[i].ignore) {\n                continue;\n            }\n            const lineContent = model.getLineContent(startLineNumber + i);\n            let currentVisibleColumn = 0;\n            for (j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* CharCode.Tab */, 1);\n            }\n            if (currentVisibleColumn > minVisibleColumn) {\n                lines[i].commentStrOffset = j - 1;\n            }\n            else {\n                lines[i].commentStrOffset = j;\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nimport { LineCommentCommand } from './lineCommentCommand.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nclass CommentLineAction extends EditorAction {\n    constructor(type, opts) {\n        super(opts);\n        this._type = type;\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const commands = [];\n        const modelOptions = model.getOptions();\n        const commentsOptions = editor.getOption(23 /* EditorOption.comments */);\n        const selections = editor.getSelections().map((selection, index) => ({ selection, index, ignoreFirstLine: false }));\n        selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        // Remove selections that would result in copying the same line\n        let prev = selections[0];\n        for (let i = 1; i < selections.length; i++) {\n            const curr = selections[i];\n            if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\n                // these two selections would copy the same line\n                if (prev.index < curr.index) {\n                    // prev wins\n                    curr.ignoreFirstLine = true;\n                }\n                else {\n                    // curr wins\n                    prev.ignoreFirstLine = true;\n                    prev = curr;\n                }\n            }\n        }\n        for (const selection of selections) {\n            commands.push(new LineCommentCommand(languageConfigurationService, selection.selection, modelOptions.tabSize, this._type, commentsOptions.insertSpace, commentsOptions.ignoreEmptyLines, selection.ignoreFirstLine));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass ToggleCommentLineAction extends CommentLineAction {\n    constructor() {\n        super(0 /* Type.Toggle */, {\n            id: 'editor.action.commentLine',\n            label: nls.localize('comment.line', \"Toggle Line Comment\"),\n            alias: 'Toggle Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 90 /* KeyCode.Slash */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarEditMenu,\n                group: '5_insert',\n                title: nls.localize({ key: 'miToggleLineComment', comment: ['&& denotes a mnemonic'] }, \"&&Toggle Line Comment\"),\n                order: 1\n            }\n        });\n    }\n}\nclass AddLineCommentAction extends CommentLineAction {\n    constructor() {\n        super(1 /* Type.ForceAdd */, {\n            id: 'editor.action.addCommentLine',\n            label: nls.localize('comment.line.add', \"Add Line Comment\"),\n            alias: 'Add Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass RemoveLineCommentAction extends CommentLineAction {\n    constructor() {\n        super(2 /* Type.ForceRemove */, {\n            id: 'editor.action.removeCommentLine',\n            label: nls.localize('comment.line.remove', \"Remove Line Comment\"),\n            alias: 'Remove Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 51 /* KeyCode.KeyU */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass BlockCommentAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.blockComment',\n            label: nls.localize('comment.block', \"Toggle Block Comment\"),\n            alias: 'Toggle Block Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 31 /* KeyCode.KeyA */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 31 /* KeyCode.KeyA */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarEditMenu,\n                group: '5_insert',\n                title: nls.localize({ key: 'miToggleBlockComment', comment: ['&& denotes a mnemonic'] }, \"Toggle &&Block Comment\"),\n                order: 2\n            }\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commentsOptions = editor.getOption(23 /* EditorOption.comments */);\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            commands.push(new BlockCommentCommand(selection, commentsOptions.insertSpace, languageConfigurationService));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nregisterEditorAction(ToggleCommentLineAction);\nregisterEditorAction(AddLineCommentAction);\nregisterEditorAction(RemoveLineCommentAction);\nregisterEditorAction(BlockCommentAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar ContextMenuController_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionViewItem } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { Separator, SubmenuAction } from '../../../../base/common/actions.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { IMenuService, MenuId, SubmenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IWorkspaceContextService, isStandaloneEditorWorkspace } from '../../../../platform/workspace/common/workspace.js';\nlet ContextMenuController = ContextMenuController_1 = class ContextMenuController {\n    static get(editor) {\n        return editor.getContribution(ContextMenuController_1.ID);\n    }\n    constructor(editor, _contextMenuService, _contextViewService, _contextKeyService, _keybindingService, _menuService, _configurationService, _workspaceContextService) {\n        this._contextMenuService = _contextMenuService;\n        this._contextViewService = _contextViewService;\n        this._contextKeyService = _contextKeyService;\n        this._keybindingService = _keybindingService;\n        this._menuService = _menuService;\n        this._configurationService = _configurationService;\n        this._workspaceContextService = _workspaceContextService;\n        this._toDispose = new DisposableStore();\n        this._contextMenuIsBeingShownCount = 0;\n        this._editor = editor;\n        this._toDispose.add(this._editor.onContextMenu((e) => this._onContextMenu(e)));\n        this._toDispose.add(this._editor.onMouseWheel((e) => {\n            if (this._contextMenuIsBeingShownCount > 0) {\n                const view = this._contextViewService.getContextViewElement();\n                const target = e.srcElement;\n                // Event triggers on shadow root host first\n                // Check if the context view is under this host before hiding it #103169\n                if (!(target.shadowRoot && dom.getShadowRoot(view) === target.shadowRoot)) {\n                    this._contextViewService.hideContextView();\n                }\n            }\n        }));\n        this._toDispose.add(this._editor.onKeyDown((e) => {\n            if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\n                return; // Context menu is turned off through configuration\n            }\n            if (e.keyCode === 58 /* KeyCode.ContextMenu */) {\n                // Chrome is funny like that\n                e.preventDefault();\n                e.stopPropagation();\n                this.showContextMenu();\n            }\n        }));\n    }\n    _onContextMenu(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\n            this._editor.focus();\n            // Ensure the cursor is at the position of the mouse click\n            if (e.target.position && !this._editor.getSelection().containsPosition(e.target.position)) {\n                this._editor.setPosition(e.target.position);\n            }\n            return; // Context menu is turned off through configuration\n        }\n        if (e.target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */) {\n            return; // allow native menu on widgets to support right click on input field for example in find\n        }\n        if (e.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.detail.injectedText) {\n            return; // allow native menu on injected text\n        }\n        e.event.preventDefault();\n        e.event.stopPropagation();\n        if (e.target.type === 11 /* MouseTargetType.SCROLLBAR */) {\n            return this._showScrollbarContextMenu(e.event);\n        }\n        if (e.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.type !== 7 /* MouseTargetType.CONTENT_EMPTY */ && e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n            return; // only support mouse click into text or native context menu key for now\n        }\n        // Ensure the editor gets focus if it hasn't, so the right events are being sent to other contributions\n        this._editor.focus();\n        // Ensure the cursor is at the position of the mouse click\n        if (e.target.position) {\n            let hasSelectionAtPosition = false;\n            for (const selection of this._editor.getSelections()) {\n                if (selection.containsPosition(e.target.position)) {\n                    hasSelectionAtPosition = true;\n                    break;\n                }\n            }\n            if (!hasSelectionAtPosition) {\n                this._editor.setPosition(e.target.position);\n            }\n        }\n        // Unless the user triggerd the context menu through Shift+F10, use the mouse position as menu position\n        let anchor = null;\n        if (e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n            anchor = e.event;\n        }\n        // Show the context menu\n        this.showContextMenu(anchor);\n    }\n    showContextMenu(anchor) {\n        if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\n            return; // Context menu is turned off through configuration\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // Find actions available for menu\n        const menuActions = this._getMenuActions(this._editor.getModel(), this._editor.isSimpleWidget ? MenuId.SimpleEditorContext : MenuId.EditorContext);\n        // Show menu if we have actions to show\n        if (menuActions.length > 0) {\n            this._doShowContextMenu(menuActions, anchor);\n        }\n    }\n    _getMenuActions(model, menuId) {\n        const result = [];\n        // get menu groups\n        const menu = this._menuService.createMenu(menuId, this._contextKeyService);\n        const groups = menu.getActions({ arg: model.uri });\n        menu.dispose();\n        // translate them into other actions\n        for (const group of groups) {\n            const [, actions] = group;\n            let addedItems = 0;\n            for (const action of actions) {\n                if (action instanceof SubmenuItemAction) {\n                    const subActions = this._getMenuActions(model, action.item.submenu);\n                    if (subActions.length > 0) {\n                        result.push(new SubmenuAction(action.id, action.label, subActions));\n                        addedItems++;\n                    }\n                }\n                else {\n                    result.push(action);\n                    addedItems++;\n                }\n            }\n            if (addedItems) {\n                result.push(new Separator());\n            }\n        }\n        if (result.length) {\n            result.pop(); // remove last separator\n        }\n        return result;\n    }\n    _doShowContextMenu(actions, event = null) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // Disable hover\n        const oldHoverSetting = this._editor.getOption(60 /* EditorOption.hover */);\n        this._editor.updateOptions({\n            hover: {\n                enabled: false\n            }\n        });\n        let anchor = event;\n        if (!anchor) {\n            // Ensure selection is visible\n            this._editor.revealPosition(this._editor.getPosition(), 1 /* ScrollType.Immediate */);\n            this._editor.render();\n            const cursorCoords = this._editor.getScrolledVisiblePosition(this._editor.getPosition());\n            // Translate to absolute editor position\n            const editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\n            const posx = editorCoords.left + cursorCoords.left;\n            const posy = editorCoords.top + cursorCoords.top + cursorCoords.height;\n            anchor = { x: posx, y: posy };\n        }\n        const useShadowDOM = this._editor.getOption(126 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        // Show menu\n        this._contextMenuIsBeingShownCount++;\n        this._contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n            getAnchor: () => anchor,\n            getActions: () => actions,\n            getActionViewItem: (action) => {\n                const keybinding = this._keybindingFor(action);\n                if (keybinding) {\n                    return new ActionViewItem(action, action, { label: true, keybinding: keybinding.getLabel(), isMenu: true });\n                }\n                const customActionViewItem = action;\n                if (typeof customActionViewItem.getActionViewItem === 'function') {\n                    return customActionViewItem.getActionViewItem();\n                }\n                return new ActionViewItem(action, action, { icon: true, label: true, isMenu: true });\n            },\n            getKeyBinding: (action) => {\n                return this._keybindingFor(action);\n            },\n            onHide: (wasCancelled) => {\n                this._contextMenuIsBeingShownCount--;\n                this._editor.updateOptions({\n                    hover: oldHoverSetting\n                });\n            }\n        });\n    }\n    _showScrollbarContextMenu(anchor) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (isStandaloneEditorWorkspace(this._workspaceContextService.getWorkspace())) {\n            // can't update the configuration properly in the standalone editor\n            return;\n        }\n        const minimapOptions = this._editor.getOption(72 /* EditorOption.minimap */);\n        let lastId = 0;\n        const createAction = (opts) => {\n            return {\n                id: `menu-action-${++lastId}`,\n                label: opts.label,\n                tooltip: '',\n                class: undefined,\n                enabled: (typeof opts.enabled === 'undefined' ? true : opts.enabled),\n                checked: opts.checked,\n                run: opts.run\n            };\n        };\n        const createSubmenuAction = (label, actions) => {\n            return new SubmenuAction(`menu-action-${++lastId}`, label, actions, undefined);\n        };\n        const createEnumAction = (label, enabled, configName, configuredValue, options) => {\n            if (!enabled) {\n                return createAction({ label, enabled, run: () => { } });\n            }\n            const createRunner = (value) => {\n                return () => {\n                    this._configurationService.updateValue(configName, value);\n                };\n            };\n            const actions = [];\n            for (const option of options) {\n                actions.push(createAction({\n                    label: option.label,\n                    checked: configuredValue === option.value,\n                    run: createRunner(option.value)\n                }));\n            }\n            return createSubmenuAction(label, actions);\n        };\n        const actions = [];\n        actions.push(createAction({\n            label: nls.localize('context.minimap.minimap', \"Minimap\"),\n            checked: minimapOptions.enabled,\n            run: () => {\n                this._configurationService.updateValue(`editor.minimap.enabled`, !minimapOptions.enabled);\n            }\n        }));\n        actions.push(new Separator());\n        actions.push(createAction({\n            label: nls.localize('context.minimap.renderCharacters', \"Render Characters\"),\n            enabled: minimapOptions.enabled,\n            checked: minimapOptions.renderCharacters,\n            run: () => {\n                this._configurationService.updateValue(`editor.minimap.renderCharacters`, !minimapOptions.renderCharacters);\n            }\n        }));\n        actions.push(createEnumAction(nls.localize('context.minimap.size', \"Vertical size\"), minimapOptions.enabled, 'editor.minimap.size', minimapOptions.size, [{\n                label: nls.localize('context.minimap.size.proportional', \"Proportional\"),\n                value: 'proportional'\n            }, {\n                label: nls.localize('context.minimap.size.fill', \"Fill\"),\n                value: 'fill'\n            }, {\n                label: nls.localize('context.minimap.size.fit', \"Fit\"),\n                value: 'fit'\n            }]));\n        actions.push(createEnumAction(nls.localize('context.minimap.slider', \"Slider\"), minimapOptions.enabled, 'editor.minimap.showSlider', minimapOptions.showSlider, [{\n                label: nls.localize('context.minimap.slider.mouseover', \"Mouse Over\"),\n                value: 'mouseover'\n            }, {\n                label: nls.localize('context.minimap.slider.always', \"Always\"),\n                value: 'always'\n            }]));\n        const useShadowDOM = this._editor.getOption(126 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        this._contextMenuIsBeingShownCount++;\n        this._contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n            getAnchor: () => anchor,\n            getActions: () => actions,\n            onHide: (wasCancelled) => {\n                this._contextMenuIsBeingShownCount--;\n                this._editor.focus();\n            }\n        });\n    }\n    _keybindingFor(action) {\n        return this._keybindingService.lookupKeybinding(action.id);\n    }\n    dispose() {\n        if (this._contextMenuIsBeingShownCount > 0) {\n            this._contextViewService.hideContextView();\n        }\n        this._toDispose.dispose();\n    }\n};\nContextMenuController.ID = 'editor.contrib.contextmenu';\nContextMenuController = ContextMenuController_1 = __decorate([\n    __param(1, IContextMenuService),\n    __param(2, IContextViewService),\n    __param(3, IContextKeyService),\n    __param(4, IKeybindingService),\n    __param(5, IMenuService),\n    __param(6, IConfigurationService),\n    __param(7, IWorkspaceContextService)\n], ContextMenuController);\nexport { ContextMenuController };\nclass ShowContextMenu extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showContextMenu',\n            label: nls.localize('action.showContextMenu.label', \"Show Editor Context Menu\"),\n            alias: 'Show Editor Context Menu',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = ContextMenuController.get(editor)) === null || _a === void 0 ? void 0 : _a.showContextMenu();\n    }\n}\nregisterEditorContribution(ContextMenuController.ID, ContextMenuController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(ShowContextMenu);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass CursorState {\n    constructor(selections) {\n        this.selections = selections;\n    }\n    equals(other) {\n        const thisLen = this.selections.length;\n        const otherLen = other.selections.length;\n        if (thisLen !== otherLen) {\n            return false;\n        }\n        for (let i = 0; i < thisLen; i++) {\n            if (!this.selections[i].equalsSelection(other.selections[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\nclass StackElement {\n    constructor(cursorState, scrollTop, scrollLeft) {\n        this.cursorState = cursorState;\n        this.scrollTop = scrollTop;\n        this.scrollLeft = scrollLeft;\n    }\n}\nexport class CursorUndoRedoController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(CursorUndoRedoController.ID);\n    }\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._isCursorUndoRedo = false;\n        this._undoStack = [];\n        this._redoStack = [];\n        this._register(editor.onDidChangeModel((e) => {\n            this._undoStack = [];\n            this._redoStack = [];\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._undoStack = [];\n            this._redoStack = [];\n        }));\n        this._register(editor.onDidChangeCursorSelection((e) => {\n            if (this._isCursorUndoRedo) {\n                return;\n            }\n            if (!e.oldSelections) {\n                return;\n            }\n            if (e.oldModelVersionId !== e.modelVersionId) {\n                return;\n            }\n            const prevState = new CursorState(e.oldSelections);\n            const isEqualToLastUndoStack = (this._undoStack.length > 0 && this._undoStack[this._undoStack.length - 1].cursorState.equals(prevState));\n            if (!isEqualToLastUndoStack) {\n                this._undoStack.push(new StackElement(prevState, editor.getScrollTop(), editor.getScrollLeft()));\n                this._redoStack = [];\n                if (this._undoStack.length > 50) {\n                    // keep the cursor undo stack bounded\n                    this._undoStack.shift();\n                }\n            }\n        }));\n    }\n    cursorUndo() {\n        if (!this._editor.hasModel() || this._undoStack.length === 0) {\n            return;\n        }\n        this._redoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n        this._applyState(this._undoStack.pop());\n    }\n    cursorRedo() {\n        if (!this._editor.hasModel() || this._redoStack.length === 0) {\n            return;\n        }\n        this._undoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n        this._applyState(this._redoStack.pop());\n    }\n    _applyState(stackElement) {\n        this._isCursorUndoRedo = true;\n        this._editor.setSelections(stackElement.cursorState.selections);\n        this._editor.setScrollPosition({\n            scrollTop: stackElement.scrollTop,\n            scrollLeft: stackElement.scrollLeft\n        });\n        this._isCursorUndoRedo = false;\n    }\n}\nCursorUndoRedoController.ID = 'editor.contrib.cursorUndoRedoController';\nexport class CursorUndo extends EditorAction {\n    constructor() {\n        super({\n            id: 'cursorUndo',\n            label: nls.localize('cursor.undo', \"Cursor Undo\"),\n            alias: 'Cursor Undo',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 51 /* KeyCode.KeyU */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorUndo();\n    }\n}\nexport class CursorRedo extends EditorAction {\n    constructor() {\n        super({\n            id: 'cursorRedo',\n            label: nls.localize('cursor.redo', \"Cursor Redo\"),\n            alias: 'Cursor Redo',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorRedo();\n    }\n}\nregisterEditorContribution(CursorUndoRedoController.ID, CursorUndoRedoController, 0 /* EditorContributionInstantiation.Eager */); // eager because it needs to listen to record cursor state ASAP\nregisterEditorAction(CursorUndo);\nregisterEditorAction(CursorRedo);\n"],"names":["SelectionAnchorController_1","__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","SelectionAnchorSet","RawContextKey","SelectionAnchorController","editor","contextKeyService","_this","_classCallCheck","this","selectionAnchorSetContextKey","bindTo","modelChangeListener","onDidChangeModel","reset","_createClass","_this2","hasModel","position","getPosition","changeDecorations","accessor","decorationId","removeDecoration","addDecoration","Selection","fromPositions","description","stickiness","hoverMessage","MarkdownString","appendText","localize","className","set","alert","lineNumber","column","anchorPosition","getModel","getDecorationRange","setPosition","getStartPosition","start","end","setSelection","cancelSelectionAnchor","_this3","undefined","dispose","getContribution","ID","IContextKeyService","SetSelectionAnchor","_EditorAction","_inherits","_super","_createSuper","call","id","label","alias","precondition","kbOpts","kbExpr","EditorContextKeys","editorTextFocus","primary","KeyChord","weight","_accessor","_a","_regeneratorRuntime","mark","_callee","wrap","_context","prev","get","setSelectionAnchor","stop","EditorAction","GoToSelectionAnchor","_EditorAction2","_super2","_callee2","_context2","goToSelectionAnchor","SelectFromAnchorToCursor","_EditorAction3","_super3","_callee3","_context3","selectFromAnchorToCursor","CancelSelectionAnchor","_EditorAction4","_super4","_callee4","_context4","registerEditorContribution","registerEditorAction","overviewRulerBracketMatchForeground","registerColor","dark","light","hcDark","hcLight","nls","JumpToBracketAction","BracketMatchingController","jumpToBracket","SelectToBracketAction","args","name","schema","type","properties","default","selectBrackets","selectToBracket","RemoveBracketsAction","removeBrackets","BracketsData","brackets","options","_Disposable","_editor","_lastBracketsData","_lastVersionId","_decorations","createDecorationsCollection","_updateBracketsSoon","_register","RunOnceScheduler","_updateBrackets","_matchBrackets","getOption","schedule","onDidChangeCursorPosition","onDidChangeModelContent","onDidChangeModelLanguageConfiguration","onDidChangeConfiguration","hasChanged","clear","onDidBlurEditorWidget","onDidFocusEditorWidget","model","newSelections","getSelections","map","selection","bracketPairs","matchBracket","newCursorPosition","containsPosition","enclosingBrackets","findEnclosingBrackets","nextBracket","findNextBracket","range","setSelections","revealRange","forEach","selectFrom","selectTo","sort","Range","compareRangesUsingStarts","_brackets","_brackets2","_slicedToArray","open","close","getEndPosition","tmp","push","editSource","pushUndoStop","executeEdits","text","_recomputeBrackets","_step","newDecorations","newDecorationsLen","_iterator","_createForOfIteratorHelper","s","n","bracketData","err","f","hasWidgetFocus","selections","versionId","getVersionId","previousData","positions","positionsLen","len","isEmpty","Position","compare","newData","newDataLen","previousIndex","previousLen","isBefore","equals","_DECORATION_OPTIONS_WITH_OVERVIEW_RULER","_DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER","Disposable","ModelDecorationOptions","register","overviewRuler","color","themeColorFromId","OverviewRulerLane","Center","MenuRegistry","appendMenuItem","MenuId","MenubarGoMenu","group","command","title","comment","order","MoveCaretCommand","isMovingLeft","_selection","_isMovingLeft","builder","startLineNumber","endLineNumber","startColumn","endColumn","getLineMaxColumn","rangeBefore","charBefore","getValueInRange","addEditOperation","rangeAfter","charAfter","helper","MoveCaretAction","left","opts","commands","executeCommands","MoveCaretLeftAction","_MoveCaretAction","writable","MoveCaretRightAction","_MoveCaretAction2","TransposeLettersAction","textInputFocus","mac","lastColumn","endPosition","MoveOperations","rightPosition","middlePosition","leftPosition","beginPosition","leftChar","rightChar","replaceRange","ReplaceCommand","CLIPBOARD_CONTEXT_MENU_GROUP","supportsCut","platform","document","queryCommandSupported","supportsCopy","supportsPaste","navigator","clipboard","browser","registerCommand","CutAction","MultiCommand","win","secondary","menuOpts","menuId","MenubarEditMenu","EditorContext","when","CommandPalette","SimpleEditorContext","CopyAction","submenu","MenubarCopy","original","EditorContextCopy","EditorContextShare","ContextKeyExpr","and","notEquals","EditorTitleContext","EditorTitleContextShare","ExplorerContext","ExplorerContextShare","PasteAction","linux","ExecCommandCopyWithSyntaxHighlightingAction","getSelection","CopyOptions","forceCopyWithSyntaxHighlighting","focus","getContainerDomNode","ownerDocument","execCommand","registerExecCommandImpl","browserCommand","addImplementation","focusedEditor","ICodeEditorService","getFocusedCodeEditor","hasTextFocus","emptySelectionClipboard","getActiveDocument","codeEditorService","clipboardService","IClipboardService","clipboardText","metadata","pasteOnNewLine","multicursorText","mode","readText","sent","InMemoryClipboardMetadataManager","INSTANCE","isFromEmptySelection","trigger","ApplyCodeActionReason","getAdditionalDocumentationForShowingActions","codeActionCommandId","quickFixCommandId","autoFixCommandId","refactorCommandId","sourceActionCommandId","organizeImportsCommandId","fixAllCommandId","ManagedCodeActionSet","actions","documentation","disposables","allActions","_toConsumableArray","codeActionsComparator","validActions","filter","_ref","action","disabled","some","_ref2","fix","kind","CodeActionKind","QuickFix","contains","isPreferred","a","b","_ref3","_ref4","isNonEmptyArray","diagnostics","codeActionsPreferredComparator","emptyCodeActionsResponse","getCodeActions","registry","rangeOrSelection","progress","token","notebookFilter","codeActionContext","cts","excludeNotebookCodeActions","providers","promises","listener","allDocumentation","assign","excludes","concat","Notebook","only","include","TextModelCancellationTokenSource","getCodeActionProviders","DisposableStore","provider","providedCodeActions","filteredActions","report","provideCodeActions","add","isCancellationRequested","abrupt","filtersAction","getDocumentationFromProvider","CodeActionItem","t0","isCancellationError","onUnexpectedExternalError","onDidChange","newProviders","all","cancel","x","flat","coalesce","finish","providedCodeActionKinds","mayIncludeActionsOfKind","actionsToShow","_b","_c","_getAdditionalMenuItems","delegateYield","item","t1","_marked","entry","currentBest","_step2","_iterator2","_step3","_iterator3","_step4","_iterator4","applyCodeAction","codeActionReason","CancellationToken","None","bulkEditService","commandService","telemetryService","notificationService","message","IBulkEditService","ICommandService","ITelemetryService","INotificationService","publicLog2","codeActionTitle","codeActionKind","codeActionIsPreferred","reason","edit","edits","quotableLabel","code","respectAutoSaveConfig","OnSave","showPreview","preview","isApplied","executeCommand","asMessage","error","Error","CommandsRegistry","resource","itemResolveCount","_accessor$get","codeActionProvider","validatedRangeOrSelection","codeActionSet","resolving","resolveCount","_context5","URI","illegalArgument","ILanguageFeaturesService","IModelService","isISelection","liftSelection","isIRange","validateRange","triggerAction","CodeActionTriggerSource","Default","includeSourceActions","Progress","Math","min","setTimeout","contextKeyForSupportedActions","regex","SUPPORTED_CODE_ACTIONS","keys","RegExp","escapeRegExpCharacters","argsSchema","defaultSnippets","body","enum","enumDescriptions","triggerCodeActionsForEditorSelection","notAvailableMessage","autoApply","controller","CodeActionController","manualTriggerAtCurrentPosition","QuickFixAction","hasCodeActionsProvider","CodeActionCommand","_EditorCommand","userArgs","CodeActionCommandArgs","fromUser","Empty","preferred","onlyIncludePreferredActions","EditorCommand","RefactorAction","contextMenuOpts","Refactor","SourceAction","Source","OrganizeImportsAction","_super5","SourceOrganizeImports","OrganizeImports","FixAllAction","_EditorAction5","_super6","SourceFixAll","FixAll","AutoFixAction","_EditorAction6","_super7","AutoFix","LightBulbWidget","registerEditorCommand","Registry","as","Extensions","Configuration","registerConfiguration","editorConfigurationBaseNode","scope","CodeActionKeybindingResolver_1","CodeActionKeybindingResolver","keybindingService","allCodeActionBindings","Lazy","getKeybindings","codeActionCommands","indexOf","resolvedKeybinding","commandArgs","binding","bestKeybindingForCodeAction","candidates","candidate","reduceRight","IKeybindingService","uncategorizedCodeActionGroup","freeze","codeActionGroups","RefactorExtract","icon","Codicon","wrench","RefactorInline","RefactorRewrite","RefactorMove","SurroundWith","symbolSnippet","symbolFile","toMenuItems","inputCodeActions","showHeaders","keybindingResolver","canPreview","menuEntries","menuEntry","allMenuItems","keybinding","CodeActionController_1","markerService","instantiationService","languageFeaturesService","progressService","_commandService","_configurationService","_actionWidgetService","_instantiationService","_activeCodeActions","MutableDisposable","_showDisabled","_disposed","_model","CodeActionModel","onDidChangeState","newState","update","_lightBulbWidget","widget","onClick","showCodeActionList","includeDisabledActions","fromLightbulb","_resolver","createInstance","onDidLayoutChange","hide","_get","_getPrototypeOf","prototype","_trigger","at","MessageController","closeMessage","triggerPosition","context","retrigger","invokeFunction","FromCodeActions","_d","_e","_f","_g","validActionToApply","invalidAction","rawValue","onUnexpectedError","tryGetValidActionToApply","_applyCodeAction","getInvalidActionThatWouldHaveBeenApplied","showMessage","toCoords","isVisible","find","_callee5","currentDecorations","editorDom","anchor","delegate","getDomNode","isIPosition","onSelect","onHide","onHover","onFocus","highlightRange","decorations","DECORATION","diagnostic","selectionText","getWordAtPosition","word","aria","show","_shouldShowHeaders","getResolver","_getActionBarActions","y","revealPosition","render","cursorCoords","getScrolledVisiblePosition","editorCoords","getDomNodePagePosition","top","height","getValue","uri","resultActions","tooltip","class","enabled","run","_this3$_commandServic","IMarkerService","IInstantiationService","IEditorProgressService","IConfigurationService","IActionWidgetService","registerThemingParticipant","theme","collector","selector","getColor","editorFindMatchHighlight","addRule","findMatchHighlightBorder","editorFindMatchHighlightBorder","isHighContrast","CodeActionsState","CodeActionOracle","_markerService","_signalChange","_delay","_autoTriggerTimer","TimeoutTimer","onMarkerChanged","_onMarkerChanges","_tryAutoTrigger","_getRangeOfSelectionUnlessWhitespaceEnclosed","resources","isEqual","cancelAndSet","_selection$getPositio","line","getLineContent","test","Triggered","_cancellablePromise","catch","emptyCodeActionSet","hasAutoFix","_Disposable2","_registry","_progressService","_codeActionOracle","_state","_onDidChangeState","Emitter","event","_supportedCodeActions","_update","onDidChangeModelLanguage","setState","_this4","has","supportedActions","flatMap","join","startPosition","createCancelablePromise","allMarkers","currPosition","trackedPosition","distance","toBeModified","marker","col","row","startRow","newCodeActionTrigger","selectionAsPosition","actionsAtMarker","currentActions","_settingEnabledNearbyQuickfixes","read","Number","MAX_VALUE","abs","showWhile","skipNotify","fire","LightBulbWidget_1","LightBulbState","Hidden","Showing","editorPosition","widgetPosition","_onClick","_domNode","dom","$","Gesture","ignoreTarget","addContentWidget","_assertThisInitialized","_","editorModel","state","getLineCount","addStandardDisposableGenericMouseDownListener","preventDefault","_dom$getDomNodePagePo","lineHeight","pad","floor","posx","addDisposableListener","buttons","Event","runAndSubscribe","onDidUpdateKeybindings","_preferredKbLabel","lookupKeybinding","getLabel","_quickFixKbLabel","_updateLightBulbTitleAndIcon","removeContentWidget","atPosition","getOptions","_model$validatePositi","validatePosition","tabSize","fontInfo","lineContent","indent","computeIndentLevel","isFolded","getTopForLineNumber","effectiveLineNumber","spaceWidth","preference","_posPref","layoutContentWidget","_this$_domNode$classL3","_this$_domNode$classL4","_this$_domNode$classL","_this$_domNode$classL2","classList","remove","ThemeIcon","asClassNameArray","lightBulb","lightbulbAutofix","other","startsWith","sep","part","providedKind","intersects","exclude","excludesAction","actionKind","append","arg","defaults","getKindFromUser","getApplyFromUser","getPreferredUser","defaultAutoApply","toLowerCase","defaultKind","resolveCodeAction","CodeLensModel","lenses","_disposables","isDisposed","list","symbol","getCodeLensModel","providerRanks","ordered","Map","provideCodeLenses","_len","Array","_key","assertType","isUri","codeLensProvider","_loop","Boolean","resolveCodeLens","finally","ICodeLensCache","createDecorator","CacheItem","lineCount","data","CodeLensCache","storageService","_fakeProvider","_class","_cache","LRUCache","runWhenIdle","raw","_deserialize","once","onWillSaveState","WillSaveStateReason","SHUTDOWN","store","_serialize","copyItems","copyModel","toString","delete","create","_step$value","lines","Set","values","JSON","stringify","parse","element","IStorageService","registerSingleton","CodeLensViewZone","afterLineNumber","heightInPx","onHeight","afterColumn","_onHeight","suppressMouseDown","domNode","createElement","_lastHeight","hasAttribute","CodeLensContentWidget","allowEditorOverflow","_commands","_isEmpty","_id","_idPool","updatePosition","animate","children","hasSymbol","lens","renderLabelWithIcons","trim","String","role","link","parentElement","getLineFirstNonWhitespaceColumn","_widgetPosition","CodeLensHelper","_removeDecorations","_addDecorations","_addDecorationsCallbacks","decoration","callback","changeAccessor","resultingDecorations","deltaDecorations","codeLensDecorationOptions","collapseOnReplaceEdit","CodeLensWidget","viewZoneChangeAccessor","updateCallback","_isDisposed","_data","_decorationIds","codeLensData","plusRange","lift","_viewZone","_viewZoneId","addZone","_createContentWidgetIfNecessary","_contentWidget","withCommands","removeZone","layoutZone","symbols","resolved","getCommand","isValid","CodeLensContribution","_languageFeaturesService","debounceService","_notificationService","_codeLensCache","_localToDispose","_lenses","_oldCodeLensModels","_provideCodeLensDebounce","for","_resolveCodeLensesDebounce","salt","_resolveCodeLensesScheduler","_resolveCodeLensesInViewport","_onModelChange","_updateLensStyle","_localDispose","_currentCodeLensModel","lineHeightFactor","max","fontSize","codeLensHeight","_this$_getLayoutInfo","_getLayoutInfo","fontFamily","editorFontInfo","style","setProperty","fontFeatureSettings","EDITOR_FONT_DEFAULTS","changeViewZones","updateHeight","_getCodeLensModelPromise","_resolveCodeLensesPromise","isTooLargeForTokenization","cachedLenses","_renderCodeLensSymbols","registration","scheduler","Date","now","put","newDelay","delay","_resolveCodeLensesInViewportSoon","toDisposable","decorationsAccessor","viewZonesAccessor","toDispose","lastLensLineNumber","getLineNumber","l","splice","commit","onDidBlurEditorText","onDidScrollChange","scrollTopChanged","scrollState","StableEditorScrollState","capture","_disposeAllLenses","restore","onMouseDown","tagName","disposableTimeout","cachedLensesNow","decChangeAccessor","lastGroup","_step5","maxLineNumber","groups","_iterator5","layoutInfo","viewZoneAccessor","codeLensIndex","groupsIndex","symbolsLineNumber","codeLensLineNumber","updateCodeLensSymbols","_this5","toResolve","request","computeIfNecessary","resolvePromise","resolvedSymbols","updateCommands","ILanguageFeatureDebounceService","ShowLensesInCurrentLine","hasCodeLensProvider","quickInputService","codelensController","items","_iterator6","_step6","newModel","newLens","IQuickInputService","positionLineNumber","pick","canPickMany","placeHolder","getColors","colorProviderRegistry","isDefaultColorDecoratorsEnabled","_findColorData","ColorDataCollector","getColorPresentations","colorInfo","provideColorPresentations","colors","documentColors","provideDocumentColors","isArray","ExtColorDataCollector","red","green","blue","alpha","ColorPresentationsCollector","_token","validDocumentColorProviderFound","defaultProvider","colorData","documentColorProviders","DefaultDocumentColorProvider","compute","_setupColorCommand","colorProvider","_setupColorCommand2","_len2","_key2","_setupColorCommand3","_color","ColorContribution","mouseEvent","colorDecoratorsActivatedOn","detail","injectedText","attachedData","ColorDecorationInjectedTextMarker","hoverController","ModesHoverController","isColorPickerVisible","showContentHover","HoverParticipantRegistry","ColorHoverParticipant","ColorDetector_1","ColorDetector","languageFeatureDebounceService","_decorationsIds","_colorDatas","_colorDecoratorIds","_ruleFactory","DynamicCssRules","_decoratorLimitReporter","DecoratorLimitReporter","_colorDecorationClassRefs","_debounceInformation","RECOMPUTE_TIME","_isColorDecoratorsEnabled","isEnabled","updateColors","prevIsEnabled","_isDefaultColorDecoratorsEnabled","updatedColorDecoratorsSetting","updatedDefaultColorDecoratorsSetting","removeAllDecorations","_timeoutTimer","_computePromise","languageId","getLanguageId","deprecatedConfig","colorDecorators","beginCompute","sw","StopWatch","elapsed","updateDecorations","updateColorDecorators","colorDatas","EMPTY","limit","_colorData$i$colorInf","rgba","RGBA","round","g","ref","createClassNameRef","backgroundColor","before","content","noBreakWhitespace","inlineClassName","inlineClassNameAffectsLetterSpacing","limited","removeDecorations","getDecorationsInRange","_onDidChange","_computed","_limited","computed","ColorPickerModel","availableColorPresentations","presentationIndex","_onColorFlushed","onColorFlushed","_onDidChangeColor","onDidChangeColor","_onDidChangePresentation","onDidChangePresentation","originalColor","_colorPresentations","colorPresentations","presentation","flushColor","originalText","originalTextPrefix","split","ColorPickerHeader","container","themeService","showingStandaloneColorPicker","_closeButton","_pickedColorNode","_pickedColorPresentation","setAttribute","_originalColorNode","Color","Format","CSS","format","getColorTheme","editorHoverBackground","white","onDidColorThemeChange","EventType","CLICK","selectNextColorPresentation","toggle","isLighter","CloseButton","textContent","_onClicked","onClicked","_button","innerDiv","asCSSSelector","registerIcon","onclick","ColorPickerBody","_Disposable3","pixelRatio","isStandaloneColorPicker","_insertButton","_saturationBox","SaturationBox","onDidSaturationValueChange","_opacityStrip","OpacityStrip","onDidOpacityChange","_hueStrip","HueStrip","onDidHueChange","InsertButton","v","hsva","HSVA","h","layout","_Disposable4","_canvas","POINTER_DOWN","onPointerDown","monitor","Element","GlobalPointerMoveMonitor","origin","onDidChangePosition","offsetX","offsetY","startMonitoring","pointerId","pageX","pageY","pointerUpListener","POINTER_UP","stopMonitoring","width","paintSelection","offsetWidth","offsetHeight","paint","saturatedColor","ctx","getContext","whiteGradient","createLinearGradient","addColorStop","blackGradient","rect","fillStyle","fill","isMonitoring","Strip","_Disposable5","_this6","overlay","slider","updateSliderPosition","_this7","onDidChangeTop","_Strip","_this8","_color$rgba","opaque","transparent","background","_Strip2","_this9","_Disposable6","_super8","_this10","ColorPickerWidget","_Widget","_super9","_this11","standaloneColorPicker","PixelRatio","appendChild","header","Widget","ColorHover","owner","forceShowAtRange","_themeService","hoverOrdinal","_anchor","_lineDecorations","lineDecorations","AsyncIterableObject","fromPromise","_computeAsync","colorDetector","colorHover","isColorDecoration","getColorData","_createColorHover","hoverParts","renderHoverParts","IThemeService","StandaloneColorPickerHover","StandaloneColorPickerParticipant","defaultColorInfo","defaultColorProvider","foundColorInfo","foundColorProvider","_colorInfo","foundInEditor","containsRange","colorHoverData","colorPickerModel","_updateColorPresentations","_updateEditorModel","participant","_colorInfo$color","guessColorPresentation","setMinimumDimensions","minimumHeight","Dimension","fragment","setColorPicker","editorUpdatedByColorPicker","textEdits","newRange","textEdit","trackedRange","_setTrackedRange","_getTrackedRange","forceMoveMarkers","setEndPosition","additionalTextEdits","_callee6","_context6","modelService","languageConfigurationService","_editorWorkerClient","EditorWorkerClient","computeDefaultDocumentColors","colorFromInfo","rgb","formatRGB","formatRGBA","hsl","formatHSL","formatHSLA","hex","formatHex","formatHexA","DefaultDocumentColorProviderFeature","_modelService","_languageConfigurationService","ILanguageConfigurationService","registerEditorFeature","StandaloneColorPickerController_1","StandaloneColorPickerWidget_1","StandaloneColorPickerController","_contextKeyService","_keybindingService","_languageFeatureService","_standaloneColorPickerWidget","_standaloneColorPickerVisible","standaloneColorPickerVisible","_standaloneColorPickerFocused","standaloneColorPickerFocused","StandaloneColorPickerWidget","updateEditor","_position","_body","_colorHover","_selectionSetInEditor","_onResult","onResult","_standaloneColorPickerParticipant","_getViewModel","getPrimaryCursorState","modelState","editorSelection","focusTracker","trackFocus","onDidBlur","onDidFocus","onMouseMove","_render","_start","zIndex","updateEditorModel","positionPreference","above","secondaryPosition","positionAffinity","computeAsyncResult","StandaloneColorPickerResult","colorHoverResult","createColorHover","colorPickerWidget","createDocumentFragment","statusBar","EditorHoverStatusBar","onContentsChanged","maxHeight","getLayoutInfo","maxWidth","tabIndex","colorPickerBody","saturationBoxWidth","saturationBox","clientWidth","widthOfOriginalColorBox","enterButton","colorPickerHeader","pickedColorNode","originalColorNode","closeButton","button","ShowOrFocusStandaloneColorPicker","mnemonicTitle","menu","showOrFocus","EditorAction2","HideStandaloneColorPicker","isEqualTo","InsertColorWithStandaloneColorPicker","insertColor","registerAction2","BlockCommentCommand","insertSpace","_insertSpace","_usedEndToken","startToken","endToken","ops","startLineText","endLineText","startTokenIndex","lastIndexOf","endTokenIndex","substring","startLineAfterStartToken","endLineBeforeEndToken","charCodeAt","_createRemoveBlockCommentOperations","_createAddBlockCommentOperations","op","addTrackedEditOperation","tokenization","tokenizeIfCheap","getLanguageIdAtPosition","config","getLanguageConfiguration","comments","blockCommentStartToken","blockCommentEndToken","_createOperationsForBlockComment","inverseEditOperations","getInverseEditOperations","startTokenEditOperation","endTokenEditOperation","srcRange","deltaColumn","haystack","needle","offset","needleLength","codeA","codeB","res","EditOperation","replace","insert","LineCommentCommand","ignoreEmptyLines","ignoreFirstLine","_tabSize","_type","_selectionId","_deltaColumn","_moveEndPositionDown","_ignoreEmptyLines","_ignoreFirstLine","shouldRemoveComments","_createRemoveLineCommentsOperations","_normalizeInsertionPoint","_createAddLineCommentsOperations","cursorPosition","positionColumn","trackSelection","startTokenAllowedBeforeColumn","_attemptRemoveBlockComment","firstNonWhitespaceIndex","strings","_gatherPreflightData","supported","_executeLineComments","_executeBlockComment","getTrackedSelection","selectionStartLineNumber","selectionStartColumn","afterCommentStr","lineData","ignore","commentStrOffset","commentStr","lineCommentToken","commentStrLength","onlyWhitespaceLines","lineContentStartOffset","_haystackHasNeedleAtOffset","commentStrEndOffset","_gatherPreflightCommentStrings","_analyzeLines","currentVisibleColumn","isTab","columnSize","j","lenJ","minVisibleColumn","nextVisibleColumn","CommentLineAction","modelOptions","commentsOptions","index","curr","ToggleCommentLineAction","_CommentLineAction","AddLineCommentAction","_CommentLineAction2","RemoveLineCommentAction","_CommentLineAction3","BlockCommentAction","ContextMenuController_1","ContextMenuController","_contextMenuService","_contextViewService","_menuService","_workspaceContextService","_toDispose","_contextMenuIsBeingShownCount","onContextMenu","_onContextMenu","onMouseWheel","view","getContextViewElement","srcElement","shadowRoot","hideContextView","onKeyDown","keyCode","stopPropagation","showContextMenu","_showScrollbarContextMenu","hasSelectionAtPosition","menuActions","_getMenuActions","isSimpleWidget","_doShowContextMenu","createMenu","getActions","addedItems","SubmenuItemAction","subActions","SubmenuAction","Separator","pop","oldHoverSetting","updateOptions","hover","posy","useShadowDOM","isIOS","domForShadowRoot","getAnchor","getActionViewItem","_keybindingFor","ActionViewItem","isMenu","customActionViewItem","getKeyBinding","wasCancelled","isStandaloneEditorWorkspace","getWorkspace","minimapOptions","lastId","createAction","checked","createEnumAction","configName","configuredValue","createRunner","updateValue","option","createSubmenuAction","renderCharacters","size","showSlider","IContextMenuService","IContextViewService","IMenuService","IWorkspaceContextService","ShowContextMenu","CursorState","thisLen","equalsSelection","StackElement","cursorState","scrollTop","scrollLeft","CursorUndoRedoController","_isCursorUndoRedo","_undoStack","_redoStack","onDidChangeCursorSelection","oldSelections","oldModelVersionId","modelVersionId","prevState","getScrollTop","getScrollLeft","shift","_applyState","stackElement","setScrollPosition","CursorUndo","cursorUndo","CursorRedo","cursorRedo"],"sourceRoot":""}