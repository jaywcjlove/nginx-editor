{"version":3,"file":"static/js/monaco-editor-vendor.ec949289.1bddec75.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/standalone/browser/accessibilityHelp/accessibilityHelp.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/iPadShowKeyboard/iPadShowKeyboard.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/inspectTokens/inspectTokens.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneCommandsQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneGotoLineQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneGotoSymbolQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneHelpQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/referenceSearch/standaloneReferenceSearch.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneCodeEditorService.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/colorizer.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneCodeEditor.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneEditor.js","../node_modules/monaco-editor/esm/vs/editor/standalone/common/monarch/monarchCompile.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneLanguages.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneLayoutService.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickInput/standaloneQuickInputService.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneServices.js","../node_modules/monaco-editor/esm/vs/editor/standalone/common/themes.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneThemeService.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/toggleHighContrast/toggleHighContrast.js","../node_modules/monaco-editor/esm/vs/editor/standalone/common/monarch/monarchCommon.js","../node_modules/monaco-editor/esm/vs/editor/standalone/common/monarch/monarchLexer.js","../node_modules/monaco-editor/esm/vs/editor/standalone/common/standaloneTheme.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport './accessibilityHelp.css';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { createFastDomNode } from '../../../../base/browser/fastDomNode.js';\nimport { renderFormattedText } from '../../../../base/browser/formattedTextRenderer.js';\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ToggleTabFocusModeAction } from '../../../contrib/toggleTabFocusMode/browser/toggleTabFocusMode.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { contrastBorder, editorWidgetBackground, widgetShadow, editorWidgetForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { AccessibilityHelpNLS } from '../../../common/standaloneStrings.js';\nconst CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE = new RawContextKey('accessibilityHelpWidgetVisible', false);\nlet AccessibilityHelpController = class AccessibilityHelpController extends Disposable {\n    constructor(editor, instantiationService) {\n        super();\n        this._editor = editor;\n        this._widget = this._register(instantiationService.createInstance(AccessibilityHelpWidget, this._editor));\n    }\n    static get(editor) {\n        return editor.getContribution(AccessibilityHelpController.ID);\n    }\n    show() {\n        this._widget.show();\n    }\n    hide() {\n        this._widget.hide();\n    }\n};\nAccessibilityHelpController.ID = 'editor.contrib.accessibilityHelpController';\nAccessibilityHelpController = __decorate([\n    __param(1, IInstantiationService)\n], AccessibilityHelpController);\nfunction getSelectionLabel(selections, charactersSelected) {\n    if (!selections || selections.length === 0) {\n        return AccessibilityHelpNLS.noSelection;\n    }\n    if (selections.length === 1) {\n        if (charactersSelected) {\n            return strings.format(AccessibilityHelpNLS.singleSelectionRange, selections[0].positionLineNumber, selections[0].positionColumn, charactersSelected);\n        }\n        return strings.format(AccessibilityHelpNLS.singleSelection, selections[0].positionLineNumber, selections[0].positionColumn);\n    }\n    if (charactersSelected) {\n        return strings.format(AccessibilityHelpNLS.multiSelectionRange, selections.length, charactersSelected);\n    }\n    if (selections.length > 0) {\n        return strings.format(AccessibilityHelpNLS.multiSelection, selections.length);\n    }\n    return '';\n}\nlet AccessibilityHelpWidget = class AccessibilityHelpWidget extends Widget {\n    constructor(editor, _contextKeyService, _keybindingService, _openerService) {\n        super();\n        this._contextKeyService = _contextKeyService;\n        this._keybindingService = _keybindingService;\n        this._openerService = _openerService;\n        this._editor = editor;\n        this._isVisibleKey = CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE.bindTo(this._contextKeyService);\n        this._domNode = createFastDomNode(document.createElement('div'));\n        this._domNode.setClassName('accessibilityHelpWidget');\n        this._domNode.setDisplay('none');\n        this._domNode.setAttribute('role', 'dialog');\n        this._domNode.setAttribute('aria-hidden', 'true');\n        this._contentDomNode = createFastDomNode(document.createElement('div'));\n        this._contentDomNode.setAttribute('role', 'document');\n        this._domNode.appendChild(this._contentDomNode);\n        this._isVisible = false;\n        this._register(this._editor.onDidLayoutChange(() => {\n            if (this._isVisible) {\n                this._layout();\n            }\n        }));\n        // Intentionally not configurable!\n        this._register(dom.addStandardDisposableListener(this._contentDomNode.domNode, 'keydown', (e) => {\n            if (!this._isVisible) {\n                return;\n            }\n            if (e.equals(2048 /* KeyMod.CtrlCmd */ | 35 /* KeyCode.KeyE */)) {\n                alert(AccessibilityHelpNLS.emergencyConfOn);\n                this._editor.updateOptions({\n                    accessibilitySupport: 'on'\n                });\n                dom.clearNode(this._contentDomNode.domNode);\n                this._buildContent();\n                this._contentDomNode.domNode.focus();\n                e.preventDefault();\n                e.stopPropagation();\n            }\n            if (e.equals(2048 /* KeyMod.CtrlCmd */ | 38 /* KeyCode.KeyH */)) {\n                alert(AccessibilityHelpNLS.openingDocs);\n                let url = this._editor.getRawOptions().accessibilityHelpUrl;\n                if (typeof url === 'undefined') {\n                    url = 'https://go.microsoft.com/fwlink/?linkid=852450';\n                }\n                this._openerService.open(URI.parse(url));\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        }));\n        this.onblur(this._contentDomNode.domNode, () => {\n            this.hide();\n        });\n        this._editor.addOverlayWidget(this);\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    getId() {\n        return AccessibilityHelpWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode.domNode;\n    }\n    getPosition() {\n        return {\n            preference: null\n        };\n    }\n    show() {\n        if (this._isVisible) {\n            return;\n        }\n        this._isVisible = true;\n        this._isVisibleKey.set(true);\n        this._layout();\n        this._domNode.setDisplay('block');\n        this._domNode.setAttribute('aria-hidden', 'false');\n        this._contentDomNode.domNode.tabIndex = 0;\n        this._buildContent();\n        this._contentDomNode.domNode.focus();\n    }\n    _descriptionForCommand(commandId, msg, noKbMsg) {\n        const kb = this._keybindingService.lookupKeybinding(commandId);\n        if (kb) {\n            return strings.format(msg, kb.getAriaLabel());\n        }\n        return strings.format(noKbMsg, commandId);\n    }\n    _buildContent() {\n        const options = this._editor.getOptions();\n        const selections = this._editor.getSelections();\n        let charactersSelected = 0;\n        if (selections) {\n            const model = this._editor.getModel();\n            if (model) {\n                selections.forEach((selection) => {\n                    charactersSelected += model.getValueLengthInRange(selection);\n                });\n            }\n        }\n        let text = getSelectionLabel(selections, charactersSelected);\n        if (options.get(56 /* EditorOption.inDiffEditor */)) {\n            if (options.get(83 /* EditorOption.readOnly */)) {\n                text += AccessibilityHelpNLS.readonlyDiffEditor;\n            }\n            else {\n                text += AccessibilityHelpNLS.editableDiffEditor;\n            }\n        }\n        else {\n            if (options.get(83 /* EditorOption.readOnly */)) {\n                text += AccessibilityHelpNLS.readonlyEditor;\n            }\n            else {\n                text += AccessibilityHelpNLS.editableEditor;\n            }\n        }\n        const turnOnMessage = (platform.isMacintosh\n            ? AccessibilityHelpNLS.changeConfigToOnMac\n            : AccessibilityHelpNLS.changeConfigToOnWinLinux);\n        switch (options.get(2 /* EditorOption.accessibilitySupport */)) {\n            case 0 /* AccessibilitySupport.Unknown */:\n                text += '\\n\\n - ' + turnOnMessage;\n                break;\n            case 2 /* AccessibilitySupport.Enabled */:\n                text += '\\n\\n - ' + AccessibilityHelpNLS.auto_on;\n                break;\n            case 1 /* AccessibilitySupport.Disabled */:\n                text += '\\n\\n - ' + AccessibilityHelpNLS.auto_off;\n                text += ' ' + turnOnMessage;\n                break;\n        }\n        if (options.get(132 /* EditorOption.tabFocusMode */)) {\n            text += '\\n\\n - ' + this._descriptionForCommand(ToggleTabFocusModeAction.ID, AccessibilityHelpNLS.tabFocusModeOnMsg, AccessibilityHelpNLS.tabFocusModeOnMsgNoKb);\n        }\n        else {\n            text += '\\n\\n - ' + this._descriptionForCommand(ToggleTabFocusModeAction.ID, AccessibilityHelpNLS.tabFocusModeOffMsg, AccessibilityHelpNLS.tabFocusModeOffMsgNoKb);\n        }\n        const openDocMessage = (platform.isMacintosh\n            ? AccessibilityHelpNLS.openDocMac\n            : AccessibilityHelpNLS.openDocWinLinux);\n        text += '\\n\\n - ' + openDocMessage;\n        text += '\\n\\n' + AccessibilityHelpNLS.outroMsg;\n        this._contentDomNode.domNode.appendChild(renderFormattedText(text));\n        // Per https://www.w3.org/TR/wai-aria/roles#document, Authors SHOULD provide a title or label for documents\n        this._contentDomNode.domNode.setAttribute('aria-label', text);\n    }\n    hide() {\n        if (!this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this._isVisibleKey.reset();\n        this._domNode.setDisplay('none');\n        this._domNode.setAttribute('aria-hidden', 'true');\n        this._contentDomNode.domNode.tabIndex = -1;\n        dom.clearNode(this._contentDomNode.domNode);\n        this._editor.focus();\n    }\n    _layout() {\n        const editorLayout = this._editor.getLayoutInfo();\n        const w = Math.max(5, Math.min(AccessibilityHelpWidget.WIDTH, editorLayout.width - 40));\n        const h = Math.max(5, Math.min(AccessibilityHelpWidget.HEIGHT, editorLayout.height - 40));\n        this._domNode.setWidth(w);\n        this._domNode.setHeight(h);\n        const top = Math.round((editorLayout.height - h) / 2);\n        this._domNode.setTop(top);\n        const left = Math.round((editorLayout.width - w) / 2);\n        this._domNode.setLeft(left);\n    }\n};\nAccessibilityHelpWidget.ID = 'editor.contrib.accessibilityHelpWidget';\nAccessibilityHelpWidget.WIDTH = 500;\nAccessibilityHelpWidget.HEIGHT = 300;\nAccessibilityHelpWidget = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, IKeybindingService),\n    __param(3, IOpenerService)\n], AccessibilityHelpWidget);\nclass ShowAccessibilityHelpAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showAccessibilityHelp',\n            label: AccessibilityHelpNLS.showAccessibilityHelpAction,\n            alias: 'Show Accessibility Help',\n            precondition: undefined,\n            kbOpts: {\n                primary: 512 /* KeyMod.Alt */ | 59 /* KeyCode.F1 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */,\n                linux: {\n                    primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 59 /* KeyCode.F1 */,\n                    secondary: [512 /* KeyMod.Alt */ | 59 /* KeyCode.F1 */]\n                }\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = AccessibilityHelpController.get(editor);\n        if (controller) {\n            controller.show();\n        }\n    }\n}\nregisterEditorContribution(AccessibilityHelpController.ID, AccessibilityHelpController);\nregisterEditorAction(ShowAccessibilityHelpAction);\nconst AccessibilityHelpCommand = EditorCommand.bindToContribution(AccessibilityHelpController.get);\nregisterEditorCommand(new AccessibilityHelpCommand({\n    id: 'closeAccessibilityHelp',\n    precondition: CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE,\n    handler: x => x.hide(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 100,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterThemingParticipant((theme, collector) => {\n    const widgetBackground = theme.getColor(editorWidgetBackground);\n    if (widgetBackground) {\n        collector.addRule(`.monaco-editor .accessibilityHelpWidget { background-color: ${widgetBackground}; }`);\n    }\n    const widgetForeground = theme.getColor(editorWidgetForeground);\n    if (widgetForeground) {\n        collector.addRule(`.monaco-editor .accessibilityHelpWidget { color: ${widgetForeground}; }`);\n    }\n    const widgetShadowColor = theme.getColor(widgetShadow);\n    if (widgetShadowColor) {\n        collector.addRule(`.monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px ${widgetShadowColor}; }`);\n    }\n    const hcBorder = theme.getColor(contrastBorder);\n    if (hcBorder) {\n        collector.addRule(`.monaco-editor .accessibilityHelpWidget { border: 2px solid ${hcBorder}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './iPadShowKeyboard.css';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nexport class IPadShowKeyboard extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this.widget = null;\n        if (isIOS) {\n            this._register(editor.onDidChangeConfiguration(() => this.update()));\n            this.update();\n        }\n    }\n    update() {\n        const shouldHaveWidget = (!this.editor.getOption(83 /* EditorOption.readOnly */));\n        if (!this.widget && shouldHaveWidget) {\n            this.widget = new ShowKeyboardWidget(this.editor);\n        }\n        else if (this.widget && !shouldHaveWidget) {\n            this.widget.dispose();\n            this.widget = null;\n        }\n    }\n    dispose() {\n        super.dispose();\n        if (this.widget) {\n            this.widget.dispose();\n            this.widget = null;\n        }\n    }\n}\nIPadShowKeyboard.ID = 'editor.contrib.iPadShowKeyboard';\nclass ShowKeyboardWidget extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this._domNode = document.createElement('textarea');\n        this._domNode.className = 'iPadShowKeyboard';\n        this._register(dom.addDisposableListener(this._domNode, 'touchstart', (e) => {\n            this.editor.focus();\n        }));\n        this._register(dom.addDisposableListener(this._domNode, 'focus', (e) => {\n            this.editor.focus();\n        }));\n        this.editor.addOverlayWidget(this);\n    }\n    dispose() {\n        this.editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    // ----- IOverlayWidget API\n    getId() {\n        return ShowKeyboardWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            preference: 1 /* OverlayWidgetPositionPreference.BOTTOM_RIGHT_CORNER */\n        };\n    }\n}\nShowKeyboardWidget.ID = 'editor.contrib.ShowKeyboardWidget';\nregisterEditorContribution(IPadShowKeyboard.ID, IPadShowKeyboard);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport './inspectTokens.css';\nimport { $, append, reset } from '../../../../base/browser/dom.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { TokenizationRegistry } from '../../../common/languages.js';\nimport { TokenMetadata } from '../../../common/encodedTokenAttributes.js';\nimport { NullState, nullTokenize, nullTokenizeEncoded } from '../../../common/languages/nullTokenize.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { IStandaloneThemeService } from '../../common/standaloneTheme.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { InspectTokensNLS } from '../../../common/standaloneStrings.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nlet InspectTokensController = class InspectTokensController extends Disposable {\n    constructor(editor, standaloneColorService, languageService) {\n        super();\n        this._editor = editor;\n        this._languageService = languageService;\n        this._widget = null;\n        this._register(this._editor.onDidChangeModel((e) => this.stop()));\n        this._register(this._editor.onDidChangeModelLanguage((e) => this.stop()));\n        this._register(TokenizationRegistry.onDidChange((e) => this.stop()));\n        this._register(this._editor.onKeyUp((e) => e.keyCode === 9 /* KeyCode.Escape */ && this.stop()));\n    }\n    static get(editor) {\n        return editor.getContribution(InspectTokensController.ID);\n    }\n    dispose() {\n        this.stop();\n        super.dispose();\n    }\n    launch() {\n        if (this._widget) {\n            return;\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._widget = new InspectTokensWidget(this._editor, this._languageService);\n    }\n    stop() {\n        if (this._widget) {\n            this._widget.dispose();\n            this._widget = null;\n        }\n    }\n};\nInspectTokensController.ID = 'editor.contrib.inspectTokens';\nInspectTokensController = __decorate([\n    __param(1, IStandaloneThemeService),\n    __param(2, ILanguageService)\n], InspectTokensController);\nclass InspectTokens extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inspectTokens',\n            label: InspectTokensNLS.inspectTokensAction,\n            alias: 'Developer: Inspect Tokens',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const controller = InspectTokensController.get(editor);\n        if (controller) {\n            controller.launch();\n        }\n    }\n}\nfunction renderTokenText(tokenText) {\n    let result = '';\n    for (let charIndex = 0, len = tokenText.length; charIndex < len; charIndex++) {\n        const charCode = tokenText.charCodeAt(charIndex);\n        switch (charCode) {\n            case 9 /* CharCode.Tab */:\n                result += '\\u2192'; // &rarr;\n                break;\n            case 32 /* CharCode.Space */:\n                result += '\\u00B7'; // &middot;\n                break;\n            default:\n                result += String.fromCharCode(charCode);\n        }\n    }\n    return result;\n}\nfunction getSafeTokenizationSupport(languageIdCodec, languageId) {\n    const tokenizationSupport = TokenizationRegistry.get(languageId);\n    if (tokenizationSupport) {\n        return tokenizationSupport;\n    }\n    const encodedLanguageId = languageIdCodec.encodeLanguageId(languageId);\n    return {\n        getInitialState: () => NullState,\n        tokenize: (line, hasEOL, state) => nullTokenize(languageId, state),\n        tokenizeEncoded: (line, hasEOL, state) => nullTokenizeEncoded(encodedLanguageId, state)\n    };\n}\nclass InspectTokensWidget extends Disposable {\n    constructor(editor, languageService) {\n        super();\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = true;\n        this._editor = editor;\n        this._languageService = languageService;\n        this._model = this._editor.getModel();\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'tokens-inspect-widget';\n        this._tokenizationSupport = getSafeTokenizationSupport(this._languageService.languageIdCodec, this._model.getLanguageId());\n        this._compute(this._editor.getPosition());\n        this._register(this._editor.onDidChangeCursorPosition((e) => this._compute(this._editor.getPosition())));\n        this._editor.addContentWidget(this);\n    }\n    dispose() {\n        this._editor.removeContentWidget(this);\n        super.dispose();\n    }\n    getId() {\n        return InspectTokensWidget._ID;\n    }\n    _compute(position) {\n        const data = this._getTokensAtLine(position.lineNumber);\n        let token1Index = 0;\n        for (let i = data.tokens1.length - 1; i >= 0; i--) {\n            const t = data.tokens1[i];\n            if (position.column - 1 >= t.offset) {\n                token1Index = i;\n                break;\n            }\n        }\n        let token2Index = 0;\n        for (let i = (data.tokens2.length >>> 1); i >= 0; i--) {\n            if (position.column - 1 >= data.tokens2[(i << 1)]) {\n                token2Index = i;\n                break;\n            }\n        }\n        const lineContent = this._model.getLineContent(position.lineNumber);\n        let tokenText = '';\n        if (token1Index < data.tokens1.length) {\n            const tokenStartIndex = data.tokens1[token1Index].offset;\n            const tokenEndIndex = token1Index + 1 < data.tokens1.length ? data.tokens1[token1Index + 1].offset : lineContent.length;\n            tokenText = lineContent.substring(tokenStartIndex, tokenEndIndex);\n        }\n        reset(this._domNode, $('h2.tm-token', undefined, renderTokenText(tokenText), $('span.tm-token-length', undefined, `${tokenText.length} ${tokenText.length === 1 ? 'char' : 'chars'}`)));\n        append(this._domNode, $('hr.tokens-inspect-separator', { 'style': 'clear:both' }));\n        const metadata = (token2Index << 1) + 1 < data.tokens2.length ? this._decodeMetadata(data.tokens2[(token2Index << 1) + 1]) : null;\n        append(this._domNode, $('table.tm-metadata-table', undefined, $('tbody', undefined, $('tr', undefined, $('td.tm-metadata-key', undefined, 'language'), $('td.tm-metadata-value', undefined, `${metadata ? metadata.languageId : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'token type'), $('td.tm-metadata-value', undefined, `${metadata ? this._tokenTypeToString(metadata.tokenType) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'font style'), $('td.tm-metadata-value', undefined, `${metadata ? this._fontStyleToString(metadata.fontStyle) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'foreground'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.foreground) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'background'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.background) : '-?-'}`)))));\n        append(this._domNode, $('hr.tokens-inspect-separator'));\n        if (token1Index < data.tokens1.length) {\n            append(this._domNode, $('span.tm-token-type', undefined, data.tokens1[token1Index].type));\n        }\n        this._editor.layoutContentWidget(this);\n    }\n    _decodeMetadata(metadata) {\n        const colorMap = TokenizationRegistry.getColorMap();\n        const languageId = TokenMetadata.getLanguageId(metadata);\n        const tokenType = TokenMetadata.getTokenType(metadata);\n        const fontStyle = TokenMetadata.getFontStyle(metadata);\n        const foreground = TokenMetadata.getForeground(metadata);\n        const background = TokenMetadata.getBackground(metadata);\n        return {\n            languageId: this._languageService.languageIdCodec.decodeLanguageId(languageId),\n            tokenType: tokenType,\n            fontStyle: fontStyle,\n            foreground: colorMap[foreground],\n            background: colorMap[background]\n        };\n    }\n    _tokenTypeToString(tokenType) {\n        switch (tokenType) {\n            case 0 /* StandardTokenType.Other */: return 'Other';\n            case 1 /* StandardTokenType.Comment */: return 'Comment';\n            case 2 /* StandardTokenType.String */: return 'String';\n            case 3 /* StandardTokenType.RegEx */: return 'RegEx';\n            default: return '??';\n        }\n    }\n    _fontStyleToString(fontStyle) {\n        let r = '';\n        if (fontStyle & 1 /* FontStyle.Italic */) {\n            r += 'italic ';\n        }\n        if (fontStyle & 2 /* FontStyle.Bold */) {\n            r += 'bold ';\n        }\n        if (fontStyle & 4 /* FontStyle.Underline */) {\n            r += 'underline ';\n        }\n        if (fontStyle & 8 /* FontStyle.Strikethrough */) {\n            r += 'strikethrough ';\n        }\n        if (r.length === 0) {\n            r = '---';\n        }\n        return r;\n    }\n    _getTokensAtLine(lineNumber) {\n        const stateBeforeLine = this._getStateBeforeLine(lineNumber);\n        const tokenizationResult1 = this._tokenizationSupport.tokenize(this._model.getLineContent(lineNumber), true, stateBeforeLine);\n        const tokenizationResult2 = this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(lineNumber), true, stateBeforeLine);\n        return {\n            startState: stateBeforeLine,\n            tokens1: tokenizationResult1.tokens,\n            tokens2: tokenizationResult2.tokens,\n            endState: tokenizationResult1.endState\n        };\n    }\n    _getStateBeforeLine(lineNumber) {\n        let state = this._tokenizationSupport.getInitialState();\n        for (let i = 1; i < lineNumber; i++) {\n            const tokenizationResult = this._tokenizationSupport.tokenize(this._model.getLineContent(i), true, state);\n            state = tokenizationResult.endState;\n        }\n        return state;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            position: this._editor.getPosition(),\n            preference: [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */]\n        };\n    }\n}\nInspectTokensWidget._ID = 'editor.contrib.inspectTokensWidget';\nregisterEditorContribution(InspectTokensController.ID, InspectTokensController);\nregisterEditorAction(InspectTokens);\nregisterThemingParticipant((theme, collector) => {\n    const border = theme.getColor(editorHoverBorder);\n    if (border) {\n        const borderWidth = isHighContrast(theme.type) ? 2 : 1;\n        collector.addRule(`.monaco-editor .tokens-inspect-widget { border: ${borderWidth}px solid ${border}; }`);\n        collector.addRule(`.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ${border}; }`);\n    }\n    const background = theme.getColor(editorHoverBackground);\n    if (background) {\n        collector.addRule(`.monaco-editor .tokens-inspect-widget { background-color: ${background}; }`);\n    }\n    const foreground = theme.getColor(editorHoverForeground);\n    if (foreground) {\n        collector.addRule(`.monaco-editor .tokens-inspect-widget { color: ${foreground}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { QuickCommandNLS } from '../../../common/standaloneStrings.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { AbstractEditorCommandsQuickAccessProvider } from '../../../contrib/quickAccess/browser/commandsQuickAccess.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nlet StandaloneCommandsQuickAccessProvider = class StandaloneCommandsQuickAccessProvider extends AbstractEditorCommandsQuickAccessProvider {\n    constructor(instantiationService, codeEditorService, keybindingService, commandService, telemetryService, dialogService) {\n        super({ showAlias: false }, instantiationService, keybindingService, commandService, telemetryService, dialogService);\n        this.codeEditorService = codeEditorService;\n    }\n    get activeTextEditorControl() { return withNullAsUndefined(this.codeEditorService.getFocusedCodeEditor()); }\n    getCommandPicks() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.getCodeEditorCommandPicks();\n        });\n    }\n};\nStandaloneCommandsQuickAccessProvider = __decorate([\n    __param(0, IInstantiationService),\n    __param(1, ICodeEditorService),\n    __param(2, IKeybindingService),\n    __param(3, ICommandService),\n    __param(4, ITelemetryService),\n    __param(5, IDialogService)\n], StandaloneCommandsQuickAccessProvider);\nexport { StandaloneCommandsQuickAccessProvider };\nexport class GotoLineAction extends EditorAction {\n    constructor() {\n        super({\n            id: GotoLineAction.ID,\n            label: QuickCommandNLS.quickCommandActionLabel,\n            alias: 'Command Palette',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 59 /* KeyCode.F1 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: 'z_commands',\n                order: 1\n            }\n        });\n    }\n    run(accessor) {\n        accessor.get(IQuickInputService).quickAccess.show(StandaloneCommandsQuickAccessProvider.PREFIX);\n    }\n}\nGotoLineAction.ID = 'editor.action.quickCommand';\nregisterEditorAction(GotoLineAction);\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: StandaloneCommandsQuickAccessProvider,\n    prefix: StandaloneCommandsQuickAccessProvider.PREFIX,\n    helpEntries: [{ description: QuickCommandNLS.quickCommandHelp, commandId: GotoLineAction.ID }]\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { AbstractGotoLineQuickAccessProvider } from '../../../contrib/quickAccess/browser/gotoLineQuickAccess.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport { GoToLineNLS } from '../../../common/standaloneStrings.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nlet StandaloneGotoLineQuickAccessProvider = class StandaloneGotoLineQuickAccessProvider extends AbstractGotoLineQuickAccessProvider {\n    constructor(editorService) {\n        super();\n        this.editorService = editorService;\n        this.onDidActiveTextEditorControlChange = Event.None;\n    }\n    get activeTextEditorControl() {\n        return withNullAsUndefined(this.editorService.getFocusedCodeEditor());\n    }\n};\nStandaloneGotoLineQuickAccessProvider = __decorate([\n    __param(0, ICodeEditorService)\n], StandaloneGotoLineQuickAccessProvider);\nexport { StandaloneGotoLineQuickAccessProvider };\nexport class GotoLineAction extends EditorAction {\n    constructor() {\n        super({\n            id: GotoLineAction.ID,\n            label: GoToLineNLS.gotoLineActionLabel,\n            alias: 'Go to Line/Column...',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 37 /* KeyCode.KeyG */,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 37 /* KeyCode.KeyG */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor) {\n        accessor.get(IQuickInputService).quickAccess.show(StandaloneGotoLineQuickAccessProvider.PREFIX);\n    }\n}\nGotoLineAction.ID = 'editor.action.gotoLine';\nregisterEditorAction(GotoLineAction);\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: StandaloneGotoLineQuickAccessProvider,\n    prefix: StandaloneGotoLineQuickAccessProvider.PREFIX,\n    helpEntries: [{ description: GoToLineNLS.gotoLineActionLabel, commandId: GotoLineAction.ID }]\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport '../../../contrib/symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport { AbstractGotoSymbolQuickAccessProvider } from '../../../contrib/quickAccess/browser/gotoSymbolQuickAccess.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport { QuickOutlineNLS } from '../../../common/standaloneStrings.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { IOutlineModelService } from '../../../contrib/documentSymbols/browser/outlineModel.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet StandaloneGotoSymbolQuickAccessProvider = class StandaloneGotoSymbolQuickAccessProvider extends AbstractGotoSymbolQuickAccessProvider {\n    constructor(editorService, languageFeaturesService, outlineModelService) {\n        super(languageFeaturesService, outlineModelService);\n        this.editorService = editorService;\n        this.onDidActiveTextEditorControlChange = Event.None;\n    }\n    get activeTextEditorControl() {\n        return withNullAsUndefined(this.editorService.getFocusedCodeEditor());\n    }\n};\nStandaloneGotoSymbolQuickAccessProvider = __decorate([\n    __param(0, ICodeEditorService),\n    __param(1, ILanguageFeaturesService),\n    __param(2, IOutlineModelService)\n], StandaloneGotoSymbolQuickAccessProvider);\nexport { StandaloneGotoSymbolQuickAccessProvider };\nexport class GotoSymbolAction extends EditorAction {\n    constructor() {\n        super({\n            id: GotoSymbolAction.ID,\n            label: QuickOutlineNLS.quickOutlineActionLabel,\n            alias: 'Go to Symbol...',\n            precondition: EditorContextKeys.hasDocumentSymbolProvider,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 45 /* KeyCode.KeyO */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: 'navigation',\n                order: 3\n            }\n        });\n    }\n    run(accessor) {\n        accessor.get(IQuickInputService).quickAccess.show(AbstractGotoSymbolQuickAccessProvider.PREFIX);\n    }\n}\nGotoSymbolAction.ID = 'editor.action.quickOutline';\nregisterEditorAction(GotoSymbolAction);\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: StandaloneGotoSymbolQuickAccessProvider,\n    prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX,\n    helpEntries: [\n        { description: QuickOutlineNLS.quickOutlineActionLabel, prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX, commandId: GotoSymbolAction.ID },\n        { description: QuickOutlineNLS.quickOutlineByCategoryActionLabel, prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY }\n    ]\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { QuickHelpNLS } from '../../../common/standaloneStrings.js';\nimport { HelpQuickAccessProvider } from '../../../../platform/quickinput/browser/helpQuickAccess.js';\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: HelpQuickAccessProvider,\n    prefix: '',\n    helpEntries: [{ description: QuickHelpNLS.helpQuickAccessActionLabel }]\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { ReferencesController } from '../../../contrib/gotoSymbol/browser/peek/referencesController.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nlet StandaloneReferencesController = class StandaloneReferencesController extends ReferencesController {\n    constructor(editor, contextKeyService, editorService, notificationService, instantiationService, storageService, configurationService) {\n        super(true, editor, contextKeyService, editorService, notificationService, instantiationService, storageService, configurationService);\n    }\n};\nStandaloneReferencesController = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, ICodeEditorService),\n    __param(3, INotificationService),\n    __param(4, IInstantiationService),\n    __param(5, IStorageService),\n    __param(6, IConfigurationService)\n], StandaloneReferencesController);\nexport { StandaloneReferencesController };\nregisterEditorContribution(ReferencesController.ID, StandaloneReferencesController);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { windowOpenNoOpener } from '../../../base/browser/dom.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { AbstractCodeEditorService } from '../../browser/services/abstractCodeEditorService.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nlet StandaloneCodeEditorService = class StandaloneCodeEditorService extends AbstractCodeEditorService {\n    constructor(contextKeyService, themeService) {\n        super(themeService);\n        this.onCodeEditorAdd(() => this._checkContextKey());\n        this.onCodeEditorRemove(() => this._checkContextKey());\n        this._editorIsOpen = contextKeyService.createKey('editorIsOpen', false);\n        this._activeCodeEditor = null;\n        this.registerCodeEditorOpenHandler((input, source, sideBySide) => __awaiter(this, void 0, void 0, function* () {\n            if (!source) {\n                return null;\n            }\n            return this.doOpenEditor(source, input);\n        }));\n    }\n    _checkContextKey() {\n        let hasCodeEditor = false;\n        for (const editor of this.listCodeEditors()) {\n            if (!editor.isSimpleWidget) {\n                hasCodeEditor = true;\n                break;\n            }\n        }\n        this._editorIsOpen.set(hasCodeEditor);\n    }\n    setActiveCodeEditor(activeCodeEditor) {\n        this._activeCodeEditor = activeCodeEditor;\n    }\n    getActiveCodeEditor() {\n        return this._activeCodeEditor;\n    }\n    doOpenEditor(editor, input) {\n        const model = this.findModel(editor, input.resource);\n        if (!model) {\n            if (input.resource) {\n                const schema = input.resource.scheme;\n                if (schema === Schemas.http || schema === Schemas.https) {\n                    // This is a fully qualified http or https URL\n                    windowOpenNoOpener(input.resource.toString());\n                    return editor;\n                }\n            }\n            return null;\n        }\n        const selection = (input.options ? input.options.selection : null);\n        if (selection) {\n            if (typeof selection.endLineNumber === 'number' && typeof selection.endColumn === 'number') {\n                editor.setSelection(selection);\n                editor.revealRangeInCenter(selection, 1 /* ScrollType.Immediate */);\n            }\n            else {\n                const pos = {\n                    lineNumber: selection.startLineNumber,\n                    column: selection.startColumn\n                };\n                editor.setPosition(pos);\n                editor.revealPositionInCenter(pos, 1 /* ScrollType.Immediate */);\n            }\n        }\n        return editor;\n    }\n    findModel(editor, resource) {\n        const model = editor.getModel();\n        if (model && model.uri.toString() !== resource.toString()) {\n            return null;\n        }\n        return model;\n    }\n};\nStandaloneCodeEditorService = __decorate([\n    __param(0, IContextKeyService),\n    __param(1, IThemeService)\n], StandaloneCodeEditorService);\nexport { StandaloneCodeEditorService };\nregisterSingleton(ICodeEditorService, StandaloneCodeEditorService);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar _a;\nimport * as strings from '../../../base/common/strings.js';\nimport { LineTokens } from '../../common/tokens/lineTokens.js';\nimport { TokenizationRegistry } from '../../common/languages.js';\nimport { RenderLineInput, renderViewLine2 as renderViewLine } from '../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../common/viewModel.js';\nimport { MonarchTokenizer } from '../common/monarch/monarchLexer.js';\nconst ttPolicy = (_a = window.trustedTypes) === null || _a === void 0 ? void 0 : _a.createPolicy('standaloneColorizer', { createHTML: value => value });\nexport class Colorizer {\n    static colorizeElement(themeService, languageService, domNode, options) {\n        options = options || {};\n        const theme = options.theme || 'vs';\n        const mimeType = options.mimeType || domNode.getAttribute('lang') || domNode.getAttribute('data-lang');\n        if (!mimeType) {\n            console.error('Mode not detected');\n            return Promise.resolve();\n        }\n        const languageId = languageService.getLanguageIdByMimeType(mimeType) || mimeType;\n        themeService.setTheme(theme);\n        const text = domNode.firstChild ? domNode.firstChild.nodeValue : '';\n        domNode.className += ' ' + theme;\n        const render = (str) => {\n            var _a;\n            const trustedhtml = (_a = ttPolicy === null || ttPolicy === void 0 ? void 0 : ttPolicy.createHTML(str)) !== null && _a !== void 0 ? _a : str;\n            domNode.innerHTML = trustedhtml;\n        };\n        return this.colorize(languageService, text || '', languageId, options).then(render, (err) => console.error(err));\n    }\n    static colorize(languageService, text, languageId, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const languageIdCodec = languageService.languageIdCodec;\n            let tabSize = 4;\n            if (options && typeof options.tabSize === 'number') {\n                tabSize = options.tabSize;\n            }\n            if (strings.startsWithUTF8BOM(text)) {\n                text = text.substr(1);\n            }\n            const lines = strings.splitLines(text);\n            if (!languageService.isRegisteredLanguageId(languageId)) {\n                return _fakeColorize(lines, tabSize, languageIdCodec);\n            }\n            const tokenizationSupport = yield TokenizationRegistry.getOrCreate(languageId);\n            if (tokenizationSupport) {\n                return _colorize(lines, tabSize, tokenizationSupport, languageIdCodec);\n            }\n            return _fakeColorize(lines, tabSize, languageIdCodec);\n        });\n    }\n    static colorizeLine(line, mightContainNonBasicASCII, mightContainRTL, tokens, tabSize = 4) {\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(line, mightContainNonBasicASCII);\n        const containsRTL = ViewLineRenderingData.containsRTL(line, isBasicASCII, mightContainRTL);\n        const renderResult = renderViewLine(new RenderLineInput(false, true, line, false, isBasicASCII, containsRTL, 0, tokens, [], tabSize, 0, 0, 0, 0, -1, 'none', false, false, null));\n        return renderResult.html;\n    }\n    static colorizeModelLine(model, lineNumber, tabSize = 4) {\n        const content = model.getLineContent(lineNumber);\n        model.tokenization.forceTokenization(lineNumber);\n        const tokens = model.tokenization.getLineTokens(lineNumber);\n        const inflatedTokens = tokens.inflate();\n        return this.colorizeLine(content, model.mightContainNonBasicASCII(), model.mightContainRTL(), inflatedTokens, tabSize);\n    }\n}\nfunction _colorize(lines, tabSize, tokenizationSupport, languageIdCodec) {\n    return new Promise((c, e) => {\n        const execute = () => {\n            const result = _actualColorize(lines, tabSize, tokenizationSupport, languageIdCodec);\n            if (tokenizationSupport instanceof MonarchTokenizer) {\n                const status = tokenizationSupport.getLoadStatus();\n                if (status.loaded === false) {\n                    status.promise.then(execute, e);\n                    return;\n                }\n            }\n            c(result);\n        };\n        execute();\n    });\n}\nfunction _fakeColorize(lines, tabSize, languageIdCodec) {\n    let html = [];\n    const defaultMetadata = ((0 /* FontStyle.None */ << 11 /* MetadataConsts.FONT_STYLE_OFFSET */)\n        | (1 /* ColorId.DefaultForeground */ << 15 /* MetadataConsts.FOREGROUND_OFFSET */)\n        | (2 /* ColorId.DefaultBackground */ << 24 /* MetadataConsts.BACKGROUND_OFFSET */)) >>> 0;\n    const tokens = new Uint32Array(2);\n    tokens[0] = 0;\n    tokens[1] = defaultMetadata;\n    for (let i = 0, length = lines.length; i < length; i++) {\n        const line = lines[i];\n        tokens[0] = line.length;\n        const lineTokens = new LineTokens(tokens, line, languageIdCodec);\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(line, /* check for basic ASCII */ true);\n        const containsRTL = ViewLineRenderingData.containsRTL(line, isBasicASCII, /* check for RTL */ true);\n        const renderResult = renderViewLine(new RenderLineInput(false, true, line, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, 0, 0, 0, -1, 'none', false, false, null));\n        html = html.concat(renderResult.html);\n        html.push('<br/>');\n    }\n    return html.join('');\n}\nfunction _actualColorize(lines, tabSize, tokenizationSupport, languageIdCodec) {\n    let html = [];\n    let state = tokenizationSupport.getInitialState();\n    for (let i = 0, length = lines.length; i < length; i++) {\n        const line = lines[i];\n        const tokenizeResult = tokenizationSupport.tokenizeEncoded(line, true, state);\n        LineTokens.convertToEndOffset(tokenizeResult.tokens, line.length);\n        const lineTokens = new LineTokens(tokenizeResult.tokens, line, languageIdCodec);\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(line, /* check for basic ASCII */ true);\n        const containsRTL = ViewLineRenderingData.containsRTL(line, isBasicASCII, /* check for RTL */ true);\n        const renderResult = renderViewLine(new RenderLineInput(false, true, line, false, isBasicASCII, containsRTL, 0, lineTokens.inflate(), [], tabSize, 0, 0, 0, 0, -1, 'none', false, false, null));\n        html = html.concat(renderResult.html);\n        html.push('<br/>');\n        state = tokenizeResult.endState;\n    }\n    return html.join('');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as aria from '../../../base/browser/ui/aria/aria.js';\nimport { Disposable, toDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { CodeEditorWidget } from '../../browser/widget/codeEditorWidget.js';\nimport { DiffEditorWidget } from '../../browser/widget/diffEditorWidget.js';\nimport { InternalEditorAction } from '../../common/editorAction.js';\nimport { IEditorWorkerService } from '../../common/services/editorWorker.js';\nimport { StandaloneKeybindingService, updateConfigurationService } from './standaloneServices.js';\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\nimport { MenuId, MenuRegistry } from '../../../platform/actions/common/actions.js';\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { StandaloneCodeEditorNLS } from '../../common/standaloneStrings.js';\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\nimport { IModelService } from '../../common/services/model.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport { StandaloneCodeEditorService } from './standaloneCodeEditorService.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../common/languages/modesRegistry.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nlet LAST_GENERATED_COMMAND_ID = 0;\nlet ariaDomNodeCreated = false;\n/**\n * Create ARIA dom node inside parent,\n * or only for the first editor instantiation inside document.body.\n * @param parent container element for ARIA dom node\n */\nfunction createAriaDomNode(parent) {\n    if (!parent) {\n        if (ariaDomNodeCreated) {\n            return;\n        }\n        ariaDomNodeCreated = true;\n    }\n    aria.setARIAContainer(parent || document.body);\n}\n/**\n * A code editor to be used both by the standalone editor and the standalone diff editor.\n */\nlet StandaloneCodeEditor = class StandaloneCodeEditor extends CodeEditorWidget {\n    constructor(domElement, _options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService) {\n        const options = Object.assign({}, _options);\n        options.ariaLabel = options.ariaLabel || StandaloneCodeEditorNLS.editorViewAccessibleLabel;\n        options.ariaLabel = options.ariaLabel + ';' + (StandaloneCodeEditorNLS.accessibilityHelpMessage);\n        super(domElement, options, {}, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\n        if (keybindingService instanceof StandaloneKeybindingService) {\n            this._standaloneKeybindingService = keybindingService;\n        }\n        else {\n            this._standaloneKeybindingService = null;\n        }\n        createAriaDomNode(options.ariaContainerElement);\n    }\n    addCommand(keybinding, handler, context) {\n        if (!this._standaloneKeybindingService) {\n            console.warn('Cannot add command because the editor is configured with an unrecognized KeybindingService');\n            return null;\n        }\n        const commandId = 'DYNAMIC_' + (++LAST_GENERATED_COMMAND_ID);\n        const whenExpression = ContextKeyExpr.deserialize(context);\n        this._standaloneKeybindingService.addDynamicKeybinding(commandId, keybinding, handler, whenExpression);\n        return commandId;\n    }\n    createContextKey(key, defaultValue) {\n        return this._contextKeyService.createKey(key, defaultValue);\n    }\n    addAction(_descriptor) {\n        if ((typeof _descriptor.id !== 'string') || (typeof _descriptor.label !== 'string') || (typeof _descriptor.run !== 'function')) {\n            throw new Error('Invalid action descriptor, `id`, `label` and `run` are required properties!');\n        }\n        if (!this._standaloneKeybindingService) {\n            console.warn('Cannot add keybinding because the editor is configured with an unrecognized KeybindingService');\n            return Disposable.None;\n        }\n        // Read descriptor options\n        const id = _descriptor.id;\n        const label = _descriptor.label;\n        const precondition = ContextKeyExpr.and(ContextKeyExpr.equals('editorId', this.getId()), ContextKeyExpr.deserialize(_descriptor.precondition));\n        const keybindings = _descriptor.keybindings;\n        const keybindingsWhen = ContextKeyExpr.and(precondition, ContextKeyExpr.deserialize(_descriptor.keybindingContext));\n        const contextMenuGroupId = _descriptor.contextMenuGroupId || null;\n        const contextMenuOrder = _descriptor.contextMenuOrder || 0;\n        const run = (accessor, ...args) => {\n            return Promise.resolve(_descriptor.run(this, ...args));\n        };\n        const toDispose = new DisposableStore();\n        // Generate a unique id to allow the same descriptor.id across multiple editor instances\n        const uniqueId = this.getId() + ':' + id;\n        // Register the command\n        toDispose.add(CommandsRegistry.registerCommand(uniqueId, run));\n        // Register the context menu item\n        if (contextMenuGroupId) {\n            const menuItem = {\n                command: {\n                    id: uniqueId,\n                    title: label\n                },\n                when: precondition,\n                group: contextMenuGroupId,\n                order: contextMenuOrder\n            };\n            toDispose.add(MenuRegistry.appendMenuItem(MenuId.EditorContext, menuItem));\n        }\n        // Register the keybindings\n        if (Array.isArray(keybindings)) {\n            for (const kb of keybindings) {\n                toDispose.add(this._standaloneKeybindingService.addDynamicKeybinding(uniqueId, kb, run, keybindingsWhen));\n            }\n        }\n        // Finally, register an internal editor action\n        const internalAction = new InternalEditorAction(uniqueId, label, label, precondition, run, this._contextKeyService);\n        // Store it under the original id, such that trigger with the original id will work\n        this._actions[id] = internalAction;\n        toDispose.add(toDisposable(() => {\n            delete this._actions[id];\n        }));\n        return toDispose;\n    }\n    _triggerCommand(handlerId, payload) {\n        if (this._codeEditorService instanceof StandaloneCodeEditorService) {\n            // Help commands find this editor as the active editor\n            try {\n                this._codeEditorService.setActiveCodeEditor(this);\n                super._triggerCommand(handlerId, payload);\n            }\n            finally {\n                this._codeEditorService.setActiveCodeEditor(null);\n            }\n        }\n        else {\n            super._triggerCommand(handlerId, payload);\n        }\n    }\n};\nStandaloneCodeEditor = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, ICodeEditorService),\n    __param(4, ICommandService),\n    __param(5, IContextKeyService),\n    __param(6, IKeybindingService),\n    __param(7, IThemeService),\n    __param(8, INotificationService),\n    __param(9, IAccessibilityService),\n    __param(10, ILanguageConfigurationService),\n    __param(11, ILanguageFeaturesService)\n], StandaloneCodeEditor);\nexport { StandaloneCodeEditor };\nlet StandaloneEditor = class StandaloneEditor extends StandaloneCodeEditor {\n    constructor(domElement, _options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, configurationService, accessibilityService, modelService, languageService, languageConfigurationService, languageFeaturesService) {\n        const options = Object.assign({}, _options);\n        updateConfigurationService(configurationService, options, false);\n        const themeDomRegistration = themeService.registerEditorContainer(domElement);\n        if (typeof options.theme === 'string') {\n            themeService.setTheme(options.theme);\n        }\n        if (typeof options.autoDetectHighContrast !== 'undefined') {\n            themeService.setAutoDetectHighContrast(Boolean(options.autoDetectHighContrast));\n        }\n        const _model = options.model;\n        delete options.model;\n        super(domElement, options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\n        this._configurationService = configurationService;\n        this._standaloneThemeService = themeService;\n        this._register(themeDomRegistration);\n        let model;\n        if (typeof _model === 'undefined') {\n            const languageId = languageService.getLanguageIdByMimeType(options.language) || options.language || PLAINTEXT_LANGUAGE_ID;\n            model = createTextModel(modelService, languageService, options.value || '', languageId, undefined);\n            this._ownsModel = true;\n        }\n        else {\n            model = _model;\n            this._ownsModel = false;\n        }\n        this._attachModel(model);\n        if (model) {\n            const e = {\n                oldModelUrl: null,\n                newModelUrl: model.uri\n            };\n            this._onDidChangeModel.fire(e);\n        }\n    }\n    dispose() {\n        super.dispose();\n    }\n    updateOptions(newOptions) {\n        updateConfigurationService(this._configurationService, newOptions, false);\n        if (typeof newOptions.theme === 'string') {\n            this._standaloneThemeService.setTheme(newOptions.theme);\n        }\n        if (typeof newOptions.autoDetectHighContrast !== 'undefined') {\n            this._standaloneThemeService.setAutoDetectHighContrast(Boolean(newOptions.autoDetectHighContrast));\n        }\n        super.updateOptions(newOptions);\n    }\n    _postDetachModelCleanup(detachedModel) {\n        super._postDetachModelCleanup(detachedModel);\n        if (detachedModel && this._ownsModel) {\n            detachedModel.dispose();\n            this._ownsModel = false;\n        }\n    }\n};\nStandaloneEditor = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, ICodeEditorService),\n    __param(4, ICommandService),\n    __param(5, IContextKeyService),\n    __param(6, IKeybindingService),\n    __param(7, IStandaloneThemeService),\n    __param(8, INotificationService),\n    __param(9, IConfigurationService),\n    __param(10, IAccessibilityService),\n    __param(11, IModelService),\n    __param(12, ILanguageService),\n    __param(13, ILanguageConfigurationService),\n    __param(14, ILanguageFeaturesService)\n], StandaloneEditor);\nexport { StandaloneEditor };\nlet StandaloneDiffEditor = class StandaloneDiffEditor extends DiffEditorWidget {\n    constructor(domElement, _options, instantiationService, contextKeyService, editorWorkerService, codeEditorService, themeService, notificationService, configurationService, contextMenuService, editorProgressService, clipboardService) {\n        const options = Object.assign({}, _options);\n        updateConfigurationService(configurationService, options, true);\n        const themeDomRegistration = themeService.registerEditorContainer(domElement);\n        if (typeof options.theme === 'string') {\n            themeService.setTheme(options.theme);\n        }\n        if (typeof options.autoDetectHighContrast !== 'undefined') {\n            themeService.setAutoDetectHighContrast(Boolean(options.autoDetectHighContrast));\n        }\n        super(domElement, options, {}, clipboardService, editorWorkerService, contextKeyService, instantiationService, codeEditorService, themeService, notificationService, contextMenuService, editorProgressService);\n        this._configurationService = configurationService;\n        this._standaloneThemeService = themeService;\n        this._register(themeDomRegistration);\n    }\n    dispose() {\n        super.dispose();\n    }\n    updateOptions(newOptions) {\n        updateConfigurationService(this._configurationService, newOptions, true);\n        if (typeof newOptions.theme === 'string') {\n            this._standaloneThemeService.setTheme(newOptions.theme);\n        }\n        if (typeof newOptions.autoDetectHighContrast !== 'undefined') {\n            this._standaloneThemeService.setAutoDetectHighContrast(Boolean(newOptions.autoDetectHighContrast));\n        }\n        super.updateOptions(newOptions);\n    }\n    _createInnerEditor(instantiationService, container, options) {\n        return instantiationService.createInstance(StandaloneCodeEditor, container, options);\n    }\n    getOriginalEditor() {\n        return super.getOriginalEditor();\n    }\n    getModifiedEditor() {\n        return super.getModifiedEditor();\n    }\n    addCommand(keybinding, handler, context) {\n        return this.getModifiedEditor().addCommand(keybinding, handler, context);\n    }\n    createContextKey(key, defaultValue) {\n        return this.getModifiedEditor().createContextKey(key, defaultValue);\n    }\n    addAction(descriptor) {\n        return this.getModifiedEditor().addAction(descriptor);\n    }\n};\nStandaloneDiffEditor = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, IContextKeyService),\n    __param(4, IEditorWorkerService),\n    __param(5, ICodeEditorService),\n    __param(6, IStandaloneThemeService),\n    __param(7, INotificationService),\n    __param(8, IConfigurationService),\n    __param(9, IContextMenuService),\n    __param(10, IEditorProgressService),\n    __param(11, IClipboardService)\n], StandaloneDiffEditor);\nexport { StandaloneDiffEditor };\n/**\n * @internal\n */\nexport function createTextModel(modelService, languageService, value, languageId, uri) {\n    value = value || '';\n    if (!languageId) {\n        const firstLF = value.indexOf('\\n');\n        let firstLine = value;\n        if (firstLF !== -1) {\n            firstLine = value.substring(0, firstLF);\n        }\n        return doCreateModel(modelService, value, languageService.createByFilepathOrFirstLine(uri || null, firstLine), uri);\n    }\n    return doCreateModel(modelService, value, languageService.createById(languageId), uri);\n}\n/**\n * @internal\n */\nfunction doCreateModel(modelService, value, languageSelection, uri) {\n    return modelService.createModel(value, languageSelection, uri);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './standalone-tokens.css';\nimport { splitLines } from '../../../base/common/strings.js';\nimport { FontMeasurements } from '../../browser/config/fontMeasurements.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { DiffNavigator } from '../../browser/widget/diffNavigator.js';\nimport { ApplyUpdateResult, ConfigurationChangedEvent, EditorOptions } from '../../common/config/editorOptions.js';\nimport { BareFontInfo, FontInfo } from '../../common/config/fontInfo.js';\nimport { EditorType } from '../../common/editorCommon.js';\nimport { FindMatch, TextModelResolvedOptions } from '../../common/model.js';\nimport * as languages from '../../common/languages.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { NullState, nullTokenize } from '../../common/languages/nullTokenize.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport { IModelService } from '../../common/services/model.js';\nimport { createWebWorker as actualCreateWebWorker } from '../../browser/services/webWorker.js';\nimport * as standaloneEnums from '../../common/standalone/standaloneEnums.js';\nimport { Colorizer } from './colorizer.js';\nimport { createTextModel, StandaloneDiffEditor, StandaloneEditor } from './standaloneCodeEditor.js';\nimport { StandaloneServices } from './standaloneServices.js';\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\n/**\n * Create a new editor under `domElement`.\n * `domElement` should be empty (not contain other dom nodes).\n * The editor will read the size of `domElement`.\n */\nexport function create(domElement, options, override) {\n    const instantiationService = StandaloneServices.initialize(override || {});\n    return instantiationService.createInstance(StandaloneEditor, domElement, options);\n}\n/**\n * Emitted when an editor is created.\n * Creating a diff editor might cause this listener to be invoked with the two editors.\n * @event\n */\nexport function onDidCreateEditor(listener) {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.onCodeEditorAdd((editor) => {\n        listener(editor);\n    });\n}\n/**\n * Emitted when an diff editor is created.\n * @event\n */\nexport function onDidCreateDiffEditor(listener) {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.onDiffEditorAdd((editor) => {\n        listener(editor);\n    });\n}\n/**\n * Get all the created editors.\n */\nexport function getEditors() {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.listCodeEditors();\n}\n/**\n * Get all the created diff editors.\n */\nexport function getDiffEditors() {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.listDiffEditors();\n}\n/**\n * Create a new diff editor under `domElement`.\n * `domElement` should be empty (not contain other dom nodes).\n * The editor will read the size of `domElement`.\n */\nexport function createDiffEditor(domElement, options, override) {\n    const instantiationService = StandaloneServices.initialize(override || {});\n    return instantiationService.createInstance(StandaloneDiffEditor, domElement, options);\n}\nexport function createDiffNavigator(diffEditor, opts) {\n    return new DiffNavigator(diffEditor, opts);\n}\n/**\n * Create a new editor model.\n * You can specify the language that should be set for this model or let the language be inferred from the `uri`.\n */\nexport function createModel(value, language, uri) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    const languageId = languageService.getLanguageIdByMimeType(language) || language;\n    return createTextModel(StandaloneServices.get(IModelService), languageService, value, languageId, uri);\n}\n/**\n * Change the language for a model.\n */\nexport function setModelLanguage(model, languageId) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    const modelService = StandaloneServices.get(IModelService);\n    modelService.setMode(model, languageService.createById(languageId));\n}\n/**\n * Set the markers for a model.\n */\nexport function setModelMarkers(model, owner, markers) {\n    if (model) {\n        const markerService = StandaloneServices.get(IMarkerService);\n        markerService.changeOne(owner, model.uri, markers);\n    }\n}\n/**\n * Remove all markers of an owner.\n */\nexport function removeAllMarkers(owner) {\n    const markerService = StandaloneServices.get(IMarkerService);\n    markerService.changeAll(owner, []);\n}\n/**\n * Get markers for owner and/or resource\n *\n * @returns list of markers\n */\nexport function getModelMarkers(filter) {\n    const markerService = StandaloneServices.get(IMarkerService);\n    return markerService.read(filter);\n}\n/**\n * Emitted when markers change for a model.\n * @event\n */\nexport function onDidChangeMarkers(listener) {\n    const markerService = StandaloneServices.get(IMarkerService);\n    return markerService.onMarkerChanged(listener);\n}\n/**\n * Get the model that has `uri` if it exists.\n */\nexport function getModel(uri) {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.getModel(uri);\n}\n/**\n * Get all the created models.\n */\nexport function getModels() {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.getModels();\n}\n/**\n * Emitted when a model is created.\n * @event\n */\nexport function onDidCreateModel(listener) {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.onModelAdded(listener);\n}\n/**\n * Emitted right before a model is disposed.\n * @event\n */\nexport function onWillDisposeModel(listener) {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.onModelRemoved(listener);\n}\n/**\n * Emitted when a different language is set to a model.\n * @event\n */\nexport function onDidChangeModelLanguage(listener) {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.onModelLanguageChanged((e) => {\n        listener({\n            model: e.model,\n            oldLanguage: e.oldLanguageId\n        });\n    });\n}\n/**\n * Create a new web worker that has model syncing capabilities built in.\n * Specify an AMD module to load that will `create` an object that will be proxied.\n */\nexport function createWebWorker(opts) {\n    return actualCreateWebWorker(StandaloneServices.get(IModelService), StandaloneServices.get(ILanguageConfigurationService), opts);\n}\n/**\n * Colorize the contents of `domNode` using attribute `data-lang`.\n */\nexport function colorizeElement(domNode, options) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    const themeService = StandaloneServices.get(IStandaloneThemeService);\n    themeService.registerEditorContainer(domNode);\n    return Colorizer.colorizeElement(themeService, languageService, domNode, options);\n}\n/**\n * Colorize `text` using language `languageId`.\n */\nexport function colorize(text, languageId, options) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    const themeService = StandaloneServices.get(IStandaloneThemeService);\n    themeService.registerEditorContainer(document.body);\n    return Colorizer.colorize(languageService, text, languageId, options);\n}\n/**\n * Colorize a line in a model.\n */\nexport function colorizeModelLine(model, lineNumber, tabSize = 4) {\n    const themeService = StandaloneServices.get(IStandaloneThemeService);\n    themeService.registerEditorContainer(document.body);\n    return Colorizer.colorizeModelLine(model, lineNumber, tabSize);\n}\n/**\n * @internal\n */\nfunction getSafeTokenizationSupport(language) {\n    const tokenizationSupport = languages.TokenizationRegistry.get(language);\n    if (tokenizationSupport) {\n        return tokenizationSupport;\n    }\n    return {\n        getInitialState: () => NullState,\n        tokenize: (line, hasEOL, state) => nullTokenize(language, state)\n    };\n}\n/**\n * Tokenize `text` using language `languageId`\n */\nexport function tokenize(text, languageId) {\n    // Needed in order to get the mode registered for subsequent look-ups\n    languages.TokenizationRegistry.getOrCreate(languageId);\n    const tokenizationSupport = getSafeTokenizationSupport(languageId);\n    const lines = splitLines(text);\n    const result = [];\n    let state = tokenizationSupport.getInitialState();\n    for (let i = 0, len = lines.length; i < len; i++) {\n        const line = lines[i];\n        const tokenizationResult = tokenizationSupport.tokenize(line, true, state);\n        result[i] = tokenizationResult.tokens;\n        state = tokenizationResult.endState;\n    }\n    return result;\n}\n/**\n * Define a new theme or update an existing theme.\n */\nexport function defineTheme(themeName, themeData) {\n    const standaloneThemeService = StandaloneServices.get(IStandaloneThemeService);\n    standaloneThemeService.defineTheme(themeName, themeData);\n}\n/**\n * Switches to a theme.\n */\nexport function setTheme(themeName) {\n    const standaloneThemeService = StandaloneServices.get(IStandaloneThemeService);\n    standaloneThemeService.setTheme(themeName);\n}\n/**\n * Clears all cached font measurements and triggers re-measurement.\n */\nexport function remeasureFonts() {\n    FontMeasurements.clearAllFontInfos();\n}\n/**\n * Register a command.\n */\nexport function registerCommand(id, handler) {\n    return CommandsRegistry.registerCommand({ id, handler });\n}\n/**\n * @internal\n */\nexport function createMonacoEditorAPI() {\n    return {\n        // methods\n        create: create,\n        getEditors: getEditors,\n        getDiffEditors: getDiffEditors,\n        onDidCreateEditor: onDidCreateEditor,\n        onDidCreateDiffEditor: onDidCreateDiffEditor,\n        createDiffEditor: createDiffEditor,\n        createDiffNavigator: createDiffNavigator,\n        createModel: createModel,\n        setModelLanguage: setModelLanguage,\n        setModelMarkers: setModelMarkers,\n        getModelMarkers: getModelMarkers,\n        removeAllMarkers: removeAllMarkers,\n        onDidChangeMarkers: onDidChangeMarkers,\n        getModels: getModels,\n        getModel: getModel,\n        onDidCreateModel: onDidCreateModel,\n        onWillDisposeModel: onWillDisposeModel,\n        onDidChangeModelLanguage: onDidChangeModelLanguage,\n        createWebWorker: createWebWorker,\n        colorizeElement: colorizeElement,\n        colorize: colorize,\n        colorizeModelLine: colorizeModelLine,\n        tokenize: tokenize,\n        defineTheme: defineTheme,\n        setTheme: setTheme,\n        remeasureFonts: remeasureFonts,\n        registerCommand: registerCommand,\n        // enums\n        AccessibilitySupport: standaloneEnums.AccessibilitySupport,\n        ContentWidgetPositionPreference: standaloneEnums.ContentWidgetPositionPreference,\n        CursorChangeReason: standaloneEnums.CursorChangeReason,\n        DefaultEndOfLine: standaloneEnums.DefaultEndOfLine,\n        EditorAutoIndentStrategy: standaloneEnums.EditorAutoIndentStrategy,\n        EditorOption: standaloneEnums.EditorOption,\n        EndOfLinePreference: standaloneEnums.EndOfLinePreference,\n        EndOfLineSequence: standaloneEnums.EndOfLineSequence,\n        MinimapPosition: standaloneEnums.MinimapPosition,\n        MouseTargetType: standaloneEnums.MouseTargetType,\n        OverlayWidgetPositionPreference: standaloneEnums.OverlayWidgetPositionPreference,\n        OverviewRulerLane: standaloneEnums.OverviewRulerLane,\n        RenderLineNumbersType: standaloneEnums.RenderLineNumbersType,\n        RenderMinimap: standaloneEnums.RenderMinimap,\n        ScrollbarVisibility: standaloneEnums.ScrollbarVisibility,\n        ScrollType: standaloneEnums.ScrollType,\n        TextEditorCursorBlinkingStyle: standaloneEnums.TextEditorCursorBlinkingStyle,\n        TextEditorCursorStyle: standaloneEnums.TextEditorCursorStyle,\n        TrackedRangeStickiness: standaloneEnums.TrackedRangeStickiness,\n        WrappingIndent: standaloneEnums.WrappingIndent,\n        InjectedTextCursorStops: standaloneEnums.InjectedTextCursorStops,\n        PositionAffinity: standaloneEnums.PositionAffinity,\n        // classes\n        ConfigurationChangedEvent: ConfigurationChangedEvent,\n        BareFontInfo: BareFontInfo,\n        FontInfo: FontInfo,\n        TextModelResolvedOptions: TextModelResolvedOptions,\n        FindMatch: FindMatch,\n        ApplyUpdateResult: ApplyUpdateResult,\n        // vars\n        EditorType: EditorType,\n        EditorOptions: EditorOptions\n    };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/*\n * This module only exports 'compile' which compiles a JSON language definition\n * into a typed and checked ILexer definition.\n */\nimport * as monarchCommon from './monarchCommon.js';\n/*\n * Type helpers\n *\n * Note: this is just for sanity checks on the JSON description which is\n * helpful for the programmer. No checks are done anymore once the lexer is\n * already 'compiled and checked'.\n *\n */\nfunction isArrayOf(elemType, obj) {\n    if (!obj) {\n        return false;\n    }\n    if (!(Array.isArray(obj))) {\n        return false;\n    }\n    for (const el of obj) {\n        if (!(elemType(el))) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction bool(prop, defValue) {\n    if (typeof prop === 'boolean') {\n        return prop;\n    }\n    return defValue;\n}\nfunction string(prop, defValue) {\n    if (typeof (prop) === 'string') {\n        return prop;\n    }\n    return defValue;\n}\nfunction arrayToHash(array) {\n    const result = {};\n    for (const e of array) {\n        result[e] = true;\n    }\n    return result;\n}\nfunction createKeywordMatcher(arr, caseInsensitive = false) {\n    if (caseInsensitive) {\n        arr = arr.map(function (x) { return x.toLowerCase(); });\n    }\n    const hash = arrayToHash(arr);\n    if (caseInsensitive) {\n        return function (word) {\n            return hash[word.toLowerCase()] !== undefined && hash.hasOwnProperty(word.toLowerCase());\n        };\n    }\n    else {\n        return function (word) {\n            return hash[word] !== undefined && hash.hasOwnProperty(word);\n        };\n    }\n}\n// Lexer helpers\n/**\n * Compiles a regular expression string, adding the 'i' flag if 'ignoreCase' is set, and the 'u' flag if 'unicode' is set.\n * Also replaces @\\w+ or sequences with the content of the specified attribute\n * @\\w+ replacement can be avoided by escaping `@` signs with another `@` sign.\n * @example /@attr/ will be replaced with the value of lexer[attr]\n * @example /@@text/ will not be replaced and will become /@text/.\n */\nfunction compileRegExp(lexer, str) {\n    // @@ must be interpreted as a literal @, so we replace all occurences of @@ with a placeholder character\n    str = str.replace(/@@/g, `\\x01`);\n    let n = 0;\n    let hadExpansion;\n    do {\n        hadExpansion = false;\n        str = str.replace(/@(\\w+)/g, function (s, attr) {\n            hadExpansion = true;\n            let sub = '';\n            if (typeof (lexer[attr]) === 'string') {\n                sub = lexer[attr];\n            }\n            else if (lexer[attr] && lexer[attr] instanceof RegExp) {\n                sub = lexer[attr].source;\n            }\n            else {\n                if (lexer[attr] === undefined) {\n                    throw monarchCommon.createError(lexer, 'language definition does not contain attribute \\'' + attr + '\\', used at: ' + str);\n                }\n                else {\n                    throw monarchCommon.createError(lexer, 'attribute reference \\'' + attr + '\\' must be a string, used at: ' + str);\n                }\n            }\n            return (monarchCommon.empty(sub) ? '' : '(?:' + sub + ')');\n        });\n        n++;\n    } while (hadExpansion && n < 5);\n    // handle escaped @@\n    str = str.replace(/\\x01/g, '@');\n    const flags = (lexer.ignoreCase ? 'i' : '') + (lexer.unicode ? 'u' : '');\n    return new RegExp(str, flags);\n}\n/**\n * Compiles guard functions for case matches.\n * This compiles 'cases' attributes into efficient match functions.\n *\n */\nfunction selectScrutinee(id, matches, state, num) {\n    if (num < 0) {\n        return id;\n    }\n    if (num < matches.length) {\n        return matches[num];\n    }\n    if (num >= 100) {\n        num = num - 100;\n        const parts = state.split('.');\n        parts.unshift(state);\n        if (num < parts.length) {\n            return parts[num];\n        }\n    }\n    return null;\n}\nfunction createGuard(lexer, ruleName, tkey, val) {\n    // get the scrutinee and pattern\n    let scrut = -1; // -1: $!, 0-99: $n, 100+n: $Sn\n    let oppat = tkey;\n    let matches = tkey.match(/^\\$(([sS]?)(\\d\\d?)|#)(.*)$/);\n    if (matches) {\n        if (matches[3]) { // if digits\n            scrut = parseInt(matches[3]);\n            if (matches[2]) {\n                scrut = scrut + 100; // if [sS] present\n            }\n        }\n        oppat = matches[4];\n    }\n    // get operator\n    let op = '~';\n    let pat = oppat;\n    if (!oppat || oppat.length === 0) {\n        op = '!=';\n        pat = '';\n    }\n    else if (/^\\w*$/.test(pat)) { // just a word\n        op = '==';\n    }\n    else {\n        matches = oppat.match(/^(@|!@|~|!~|==|!=)(.*)$/);\n        if (matches) {\n            op = matches[1];\n            pat = matches[2];\n        }\n    }\n    // set the tester function\n    let tester;\n    // special case a regexp that matches just words\n    if ((op === '~' || op === '!~') && /^(\\w|\\|)*$/.test(pat)) {\n        const inWords = createKeywordMatcher(pat.split('|'), lexer.ignoreCase);\n        tester = function (s) { return (op === '~' ? inWords(s) : !inWords(s)); };\n    }\n    else if (op === '@' || op === '!@') {\n        const words = lexer[pat];\n        if (!words) {\n            throw monarchCommon.createError(lexer, 'the @ match target \\'' + pat + '\\' is not defined, in rule: ' + ruleName);\n        }\n        if (!(isArrayOf(function (elem) { return (typeof (elem) === 'string'); }, words))) {\n            throw monarchCommon.createError(lexer, 'the @ match target \\'' + pat + '\\' must be an array of strings, in rule: ' + ruleName);\n        }\n        const inWords = createKeywordMatcher(words, lexer.ignoreCase);\n        tester = function (s) { return (op === '@' ? inWords(s) : !inWords(s)); };\n    }\n    else if (op === '~' || op === '!~') {\n        if (pat.indexOf('$') < 0) {\n            // precompile regular expression\n            const re = compileRegExp(lexer, '^' + pat + '$');\n            tester = function (s) { return (op === '~' ? re.test(s) : !re.test(s)); };\n        }\n        else {\n            tester = function (s, id, matches, state) {\n                const re = compileRegExp(lexer, '^' + monarchCommon.substituteMatches(lexer, pat, id, matches, state) + '$');\n                return re.test(s);\n            };\n        }\n    }\n    else { // if (op==='==' || op==='!=') {\n        if (pat.indexOf('$') < 0) {\n            const patx = monarchCommon.fixCase(lexer, pat);\n            tester = function (s) { return (op === '==' ? s === patx : s !== patx); };\n        }\n        else {\n            const patx = monarchCommon.fixCase(lexer, pat);\n            tester = function (s, id, matches, state, eos) {\n                const patexp = monarchCommon.substituteMatches(lexer, patx, id, matches, state);\n                return (op === '==' ? s === patexp : s !== patexp);\n            };\n        }\n    }\n    // return the branch object\n    if (scrut === -1) {\n        return {\n            name: tkey, value: val, test: function (id, matches, state, eos) {\n                return tester(id, id, matches, state, eos);\n            }\n        };\n    }\n    else {\n        return {\n            name: tkey, value: val, test: function (id, matches, state, eos) {\n                const scrutinee = selectScrutinee(id, matches, state, scrut);\n                return tester(!scrutinee ? '' : scrutinee, id, matches, state, eos);\n            }\n        };\n    }\n}\n/**\n * Compiles an action: i.e. optimize regular expressions and case matches\n * and do many sanity checks.\n *\n * This is called only during compilation but if the lexer definition\n * contains user functions as actions (which is usually not allowed), then this\n * may be called during lexing. It is important therefore to compile common cases efficiently\n */\nfunction compileAction(lexer, ruleName, action) {\n    if (!action) {\n        return { token: '' };\n    }\n    else if (typeof (action) === 'string') {\n        return action; // { token: action };\n    }\n    else if (action.token || action.token === '') {\n        if (typeof (action.token) !== 'string') {\n            throw monarchCommon.createError(lexer, 'a \\'token\\' attribute must be of type string, in rule: ' + ruleName);\n        }\n        else {\n            // only copy specific typed fields (only happens once during compile Lexer)\n            const newAction = { token: action.token };\n            if (action.token.indexOf('$') >= 0) {\n                newAction.tokenSubst = true;\n            }\n            if (typeof (action.bracket) === 'string') {\n                if (action.bracket === '@open') {\n                    newAction.bracket = 1 /* monarchCommon.MonarchBracket.Open */;\n                }\n                else if (action.bracket === '@close') {\n                    newAction.bracket = -1 /* monarchCommon.MonarchBracket.Close */;\n                }\n                else {\n                    throw monarchCommon.createError(lexer, 'a \\'bracket\\' attribute must be either \\'@open\\' or \\'@close\\', in rule: ' + ruleName);\n                }\n            }\n            if (action.next) {\n                if (typeof (action.next) !== 'string') {\n                    throw monarchCommon.createError(lexer, 'the next state must be a string value in rule: ' + ruleName);\n                }\n                else {\n                    let next = action.next;\n                    if (!/^(@pop|@push|@popall)$/.test(next)) {\n                        if (next[0] === '@') {\n                            next = next.substr(1); // peel off starting @ sign\n                        }\n                        if (next.indexOf('$') < 0) { // no dollar substitution, we can check if the state exists\n                            if (!monarchCommon.stateExists(lexer, monarchCommon.substituteMatches(lexer, next, '', [], ''))) {\n                                throw monarchCommon.createError(lexer, 'the next state \\'' + action.next + '\\' is not defined in rule: ' + ruleName);\n                            }\n                        }\n                    }\n                    newAction.next = next;\n                }\n            }\n            if (typeof (action.goBack) === 'number') {\n                newAction.goBack = action.goBack;\n            }\n            if (typeof (action.switchTo) === 'string') {\n                newAction.switchTo = action.switchTo;\n            }\n            if (typeof (action.log) === 'string') {\n                newAction.log = action.log;\n            }\n            if (typeof (action.nextEmbedded) === 'string') {\n                newAction.nextEmbedded = action.nextEmbedded;\n                lexer.usesEmbedded = true;\n            }\n            return newAction;\n        }\n    }\n    else if (Array.isArray(action)) {\n        const results = [];\n        for (let i = 0, len = action.length; i < len; i++) {\n            results[i] = compileAction(lexer, ruleName, action[i]);\n        }\n        return { group: results };\n    }\n    else if (action.cases) {\n        // build an array of test cases\n        const cases = [];\n        // for each case, push a test function and result value\n        for (const tkey in action.cases) {\n            if (action.cases.hasOwnProperty(tkey)) {\n                const val = compileAction(lexer, ruleName, action.cases[tkey]);\n                // what kind of case\n                if (tkey === '@default' || tkey === '@' || tkey === '') {\n                    cases.push({ test: undefined, value: val, name: tkey });\n                }\n                else if (tkey === '@eos') {\n                    cases.push({ test: function (id, matches, state, eos) { return eos; }, value: val, name: tkey });\n                }\n                else {\n                    cases.push(createGuard(lexer, ruleName, tkey, val)); // call separate function to avoid local variable capture\n                }\n            }\n        }\n        // create a matching function\n        const def = lexer.defaultToken;\n        return {\n            test: function (id, matches, state, eos) {\n                for (const _case of cases) {\n                    const didmatch = (!_case.test || _case.test(id, matches, state, eos));\n                    if (didmatch) {\n                        return _case.value;\n                    }\n                }\n                return def;\n            }\n        };\n    }\n    else {\n        throw monarchCommon.createError(lexer, 'an action must be a string, an object with a \\'token\\' or \\'cases\\' attribute, or an array of actions; in rule: ' + ruleName);\n    }\n}\n/**\n * Helper class for creating matching rules\n */\nclass Rule {\n    constructor(name) {\n        this.regex = new RegExp('');\n        this.action = { token: '' };\n        this.matchOnlyAtLineStart = false;\n        this.name = '';\n        this.name = name;\n    }\n    setRegex(lexer, re) {\n        let sregex;\n        if (typeof (re) === 'string') {\n            sregex = re;\n        }\n        else if (re instanceof RegExp) {\n            sregex = re.source;\n        }\n        else {\n            throw monarchCommon.createError(lexer, 'rules must start with a match string or regular expression: ' + this.name);\n        }\n        this.matchOnlyAtLineStart = (sregex.length > 0 && sregex[0] === '^');\n        this.name = this.name + ': ' + sregex;\n        this.regex = compileRegExp(lexer, '^(?:' + (this.matchOnlyAtLineStart ? sregex.substr(1) : sregex) + ')');\n    }\n    setAction(lexer, act) {\n        this.action = compileAction(lexer, this.name, act);\n    }\n}\n/**\n * Compiles a json description function into json where all regular expressions,\n * case matches etc, are compiled and all include rules are expanded.\n * We also compile the bracket definitions, supply defaults, and do many sanity checks.\n * If the 'jsonStrict' parameter is 'false', we allow at certain locations\n * regular expression objects and functions that get called during lexing.\n * (Currently we have no samples that need this so perhaps we should always have\n * jsonStrict to true).\n */\nexport function compile(languageId, json) {\n    if (!json || typeof (json) !== 'object') {\n        throw new Error('Monarch: expecting a language definition object');\n    }\n    // Create our lexer\n    const lexer = {};\n    lexer.languageId = languageId;\n    lexer.includeLF = bool(json.includeLF, false);\n    lexer.noThrow = false; // raise exceptions during compilation\n    lexer.maxStack = 100;\n    // Set standard fields: be defensive about types\n    lexer.start = (typeof json.start === 'string' ? json.start : null);\n    lexer.ignoreCase = bool(json.ignoreCase, false);\n    lexer.unicode = bool(json.unicode, false);\n    lexer.tokenPostfix = string(json.tokenPostfix, '.' + lexer.languageId);\n    lexer.defaultToken = string(json.defaultToken, 'source');\n    lexer.usesEmbedded = false; // becomes true if we find a nextEmbedded action\n    // For calling compileAction later on\n    const lexerMin = json;\n    lexerMin.languageId = languageId;\n    lexerMin.includeLF = lexer.includeLF;\n    lexerMin.ignoreCase = lexer.ignoreCase;\n    lexerMin.unicode = lexer.unicode;\n    lexerMin.noThrow = lexer.noThrow;\n    lexerMin.usesEmbedded = lexer.usesEmbedded;\n    lexerMin.stateNames = json.tokenizer;\n    lexerMin.defaultToken = lexer.defaultToken;\n    // Compile an array of rules into newrules where RegExp objects are created.\n    function addRules(state, newrules, rules) {\n        for (const rule of rules) {\n            let include = rule.include;\n            if (include) {\n                if (typeof (include) !== 'string') {\n                    throw monarchCommon.createError(lexer, 'an \\'include\\' attribute must be a string at: ' + state);\n                }\n                if (include[0] === '@') {\n                    include = include.substr(1); // peel off starting @\n                }\n                if (!json.tokenizer[include]) {\n                    throw monarchCommon.createError(lexer, 'include target \\'' + include + '\\' is not defined at: ' + state);\n                }\n                addRules(state + '.' + include, newrules, json.tokenizer[include]);\n            }\n            else {\n                const newrule = new Rule(state);\n                // Set up new rule attributes\n                if (Array.isArray(rule) && rule.length >= 1 && rule.length <= 3) {\n                    newrule.setRegex(lexerMin, rule[0]);\n                    if (rule.length >= 3) {\n                        if (typeof (rule[1]) === 'string') {\n                            newrule.setAction(lexerMin, { token: rule[1], next: rule[2] });\n                        }\n                        else if (typeof (rule[1]) === 'object') {\n                            const rule1 = rule[1];\n                            rule1.next = rule[2];\n                            newrule.setAction(lexerMin, rule1);\n                        }\n                        else {\n                            throw monarchCommon.createError(lexer, 'a next state as the last element of a rule can only be given if the action is either an object or a string, at: ' + state);\n                        }\n                    }\n                    else {\n                        newrule.setAction(lexerMin, rule[1]);\n                    }\n                }\n                else {\n                    if (!rule.regex) {\n                        throw monarchCommon.createError(lexer, 'a rule must either be an array, or an object with a \\'regex\\' or \\'include\\' field at: ' + state);\n                    }\n                    if (rule.name) {\n                        if (typeof rule.name === 'string') {\n                            newrule.name = rule.name;\n                        }\n                    }\n                    if (rule.matchOnlyAtStart) {\n                        newrule.matchOnlyAtLineStart = bool(rule.matchOnlyAtLineStart, false);\n                    }\n                    newrule.setRegex(lexerMin, rule.regex);\n                    newrule.setAction(lexerMin, rule.action);\n                }\n                newrules.push(newrule);\n            }\n        }\n    }\n    // compile the tokenizer rules\n    if (!json.tokenizer || typeof (json.tokenizer) !== 'object') {\n        throw monarchCommon.createError(lexer, 'a language definition must define the \\'tokenizer\\' attribute as an object');\n    }\n    lexer.tokenizer = [];\n    for (const key in json.tokenizer) {\n        if (json.tokenizer.hasOwnProperty(key)) {\n            if (!lexer.start) {\n                lexer.start = key;\n            }\n            const rules = json.tokenizer[key];\n            lexer.tokenizer[key] = new Array();\n            addRules('tokenizer.' + key, lexer.tokenizer[key], rules);\n        }\n    }\n    lexer.usesEmbedded = lexerMin.usesEmbedded; // can be set during compileAction\n    // Set simple brackets\n    if (json.brackets) {\n        if (!(Array.isArray(json.brackets))) {\n            throw monarchCommon.createError(lexer, 'the \\'brackets\\' attribute must be defined as an array');\n        }\n    }\n    else {\n        json.brackets = [\n            { open: '{', close: '}', token: 'delimiter.curly' },\n            { open: '[', close: ']', token: 'delimiter.square' },\n            { open: '(', close: ')', token: 'delimiter.parenthesis' },\n            { open: '<', close: '>', token: 'delimiter.angle' }\n        ];\n    }\n    const brackets = [];\n    for (const el of json.brackets) {\n        let desc = el;\n        if (desc && Array.isArray(desc) && desc.length === 3) {\n            desc = { token: desc[2], open: desc[0], close: desc[1] };\n        }\n        if (desc.open === desc.close) {\n            throw monarchCommon.createError(lexer, 'open and close brackets in a \\'brackets\\' attribute must be different: ' + desc.open +\n                '\\n hint: use the \\'bracket\\' attribute if matching on equal brackets is required.');\n        }\n        if (typeof desc.open === 'string' && typeof desc.token === 'string' && typeof desc.close === 'string') {\n            brackets.push({\n                token: desc.token + lexer.tokenPostfix,\n                open: monarchCommon.fixCase(lexer, desc.open),\n                close: monarchCommon.fixCase(lexer, desc.close)\n            });\n        }\n        else {\n            throw monarchCommon.createError(lexer, 'every element in the \\'brackets\\' array must be a \\'{open,close,token}\\' object or array');\n        }\n    }\n    lexer.brackets = brackets;\n    // Disable throw so the syntax highlighter goes, no matter what\n    lexer.noThrow = true;\n    return lexer;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Color } from '../../../base/common/color.js';\nimport { Range } from '../../common/core/range.js';\nimport * as languages from '../../common/languages.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { ModesRegistry } from '../../common/languages/modesRegistry.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport * as standaloneEnums from '../../common/standalone/standaloneEnums.js';\nimport { StandaloneServices } from './standaloneServices.js';\nimport { compile } from '../common/monarch/monarchCompile.js';\nimport { MonarchTokenizer } from '../common/monarch/monarchLexer.js';\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\n/**\n * Register information about a new language.\n */\nexport function register(language) {\n    // Intentionally using the `ModesRegistry` here to avoid\n    // instantiating services too quickly in the standalone editor.\n    ModesRegistry.registerLanguage(language);\n}\n/**\n * Get the information of all the registered languages.\n */\nexport function getLanguages() {\n    let result = [];\n    result = result.concat(ModesRegistry.getLanguages());\n    return result;\n}\nexport function getEncodedLanguageId(languageId) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    return languageService.languageIdCodec.encodeLanguageId(languageId);\n}\n/**\n * An event emitted when a language is needed for the first time (e.g. a model has it set).\n * @event\n */\nexport function onLanguage(languageId, callback) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    const disposable = languageService.onDidEncounterLanguage((encounteredLanguageId) => {\n        if (encounteredLanguageId === languageId) {\n            // stop listening\n            disposable.dispose();\n            // invoke actual listener\n            callback();\n        }\n    });\n    return disposable;\n}\n/**\n * Set the editing configuration for a language.\n */\nexport function setLanguageConfiguration(languageId, configuration) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    if (!languageService.isRegisteredLanguageId(languageId)) {\n        throw new Error(`Cannot set configuration for unknown language ${languageId}`);\n    }\n    const languageConfigurationService = StandaloneServices.get(ILanguageConfigurationService);\n    return languageConfigurationService.register(languageId, configuration, 100);\n}\n/**\n * @internal\n */\nexport class EncodedTokenizationSupportAdapter {\n    constructor(languageId, actual) {\n        this._languageId = languageId;\n        this._actual = actual;\n    }\n    getInitialState() {\n        return this._actual.getInitialState();\n    }\n    tokenize(line, hasEOL, state) {\n        if (typeof this._actual.tokenize === 'function') {\n            return TokenizationSupportAdapter.adaptTokenize(this._languageId, this._actual, line, state);\n        }\n        throw new Error('Not supported!');\n    }\n    tokenizeEncoded(line, hasEOL, state) {\n        const result = this._actual.tokenizeEncoded(line, state);\n        return new languages.EncodedTokenizationResult(result.tokens, result.endState);\n    }\n}\n/**\n * @internal\n */\nexport class TokenizationSupportAdapter {\n    constructor(_languageId, _actual, _languageService, _standaloneThemeService) {\n        this._languageId = _languageId;\n        this._actual = _actual;\n        this._languageService = _languageService;\n        this._standaloneThemeService = _standaloneThemeService;\n    }\n    getInitialState() {\n        return this._actual.getInitialState();\n    }\n    static _toClassicTokens(tokens, language) {\n        const result = [];\n        let previousStartIndex = 0;\n        for (let i = 0, len = tokens.length; i < len; i++) {\n            const t = tokens[i];\n            let startIndex = t.startIndex;\n            // Prevent issues stemming from a buggy external tokenizer.\n            if (i === 0) {\n                // Force first token to start at first index!\n                startIndex = 0;\n            }\n            else if (startIndex < previousStartIndex) {\n                // Force tokens to be after one another!\n                startIndex = previousStartIndex;\n            }\n            result[i] = new languages.Token(startIndex, t.scopes, language);\n            previousStartIndex = startIndex;\n        }\n        return result;\n    }\n    static adaptTokenize(language, actual, line, state) {\n        const actualResult = actual.tokenize(line, state);\n        const tokens = TokenizationSupportAdapter._toClassicTokens(actualResult.tokens, language);\n        let endState;\n        // try to save an object if possible\n        if (actualResult.endState.equals(state)) {\n            endState = state;\n        }\n        else {\n            endState = actualResult.endState;\n        }\n        return new languages.TokenizationResult(tokens, endState);\n    }\n    tokenize(line, hasEOL, state) {\n        return TokenizationSupportAdapter.adaptTokenize(this._languageId, this._actual, line, state);\n    }\n    _toBinaryTokens(languageIdCodec, tokens) {\n        const languageId = languageIdCodec.encodeLanguageId(this._languageId);\n        const tokenTheme = this._standaloneThemeService.getColorTheme().tokenTheme;\n        const result = [];\n        let resultLen = 0;\n        let previousStartIndex = 0;\n        for (let i = 0, len = tokens.length; i < len; i++) {\n            const t = tokens[i];\n            const metadata = tokenTheme.match(languageId, t.scopes);\n            if (resultLen > 0 && result[resultLen - 1] === metadata) {\n                // same metadata\n                continue;\n            }\n            let startIndex = t.startIndex;\n            // Prevent issues stemming from a buggy external tokenizer.\n            if (i === 0) {\n                // Force first token to start at first index!\n                startIndex = 0;\n            }\n            else if (startIndex < previousStartIndex) {\n                // Force tokens to be after one another!\n                startIndex = previousStartIndex;\n            }\n            result[resultLen++] = startIndex;\n            result[resultLen++] = metadata;\n            previousStartIndex = startIndex;\n        }\n        const actualResult = new Uint32Array(resultLen);\n        for (let i = 0; i < resultLen; i++) {\n            actualResult[i] = result[i];\n        }\n        return actualResult;\n    }\n    tokenizeEncoded(line, hasEOL, state) {\n        const actualResult = this._actual.tokenize(line, state);\n        const tokens = this._toBinaryTokens(this._languageService.languageIdCodec, actualResult.tokens);\n        let endState;\n        // try to save an object if possible\n        if (actualResult.endState.equals(state)) {\n            endState = state;\n        }\n        else {\n            endState = actualResult.endState;\n        }\n        return new languages.EncodedTokenizationResult(tokens, endState);\n    }\n}\nfunction isATokensProvider(provider) {\n    return (typeof provider.getInitialState === 'function');\n}\nfunction isEncodedTokensProvider(provider) {\n    return 'tokenizeEncoded' in provider;\n}\nfunction isThenable(obj) {\n    return obj && typeof obj.then === 'function';\n}\n/**\n * Change the color map that is used for token colors.\n * Supported formats (hex): #RRGGBB, $RRGGBBAA, #RGB, #RGBA\n */\nexport function setColorMap(colorMap) {\n    const standaloneThemeService = StandaloneServices.get(IStandaloneThemeService);\n    if (colorMap) {\n        const result = [null];\n        for (let i = 1, len = colorMap.length; i < len; i++) {\n            result[i] = Color.fromHex(colorMap[i]);\n        }\n        standaloneThemeService.setColorMapOverride(result);\n    }\n    else {\n        standaloneThemeService.setColorMapOverride(null);\n    }\n}\n/**\n * @internal\n */\nfunction createTokenizationSupportAdapter(languageId, provider) {\n    if (isEncodedTokensProvider(provider)) {\n        return new EncodedTokenizationSupportAdapter(languageId, provider);\n    }\n    else {\n        return new TokenizationSupportAdapter(languageId, provider, StandaloneServices.get(ILanguageService), StandaloneServices.get(IStandaloneThemeService));\n    }\n}\n/**\n * Register a tokens provider factory for a language. This tokenizer will be exclusive with a tokenizer\n * set using `setTokensProvider` or one created using `setMonarchTokensProvider`, but will work together\n * with a tokens provider set using `registerDocumentSemanticTokensProvider` or `registerDocumentRangeSemanticTokensProvider`.\n */\nexport function registerTokensProviderFactory(languageId, factory) {\n    const adaptedFactory = {\n        createTokenizationSupport: () => __awaiter(this, void 0, void 0, function* () {\n            const result = yield Promise.resolve(factory.create());\n            if (!result) {\n                return null;\n            }\n            if (isATokensProvider(result)) {\n                return createTokenizationSupportAdapter(languageId, result);\n            }\n            return new MonarchTokenizer(StandaloneServices.get(ILanguageService), StandaloneServices.get(IStandaloneThemeService), languageId, compile(languageId, result), StandaloneServices.get(IConfigurationService));\n        })\n    };\n    return languages.TokenizationRegistry.registerFactory(languageId, adaptedFactory);\n}\n/**\n * Set the tokens provider for a language (manual implementation). This tokenizer will be exclusive\n * with a tokenizer created using `setMonarchTokensProvider`, or with `registerTokensProviderFactory`,\n * but will work together with a tokens provider set using `registerDocumentSemanticTokensProvider`\n * or `registerDocumentRangeSemanticTokensProvider`.\n */\nexport function setTokensProvider(languageId, provider) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    if (!languageService.isRegisteredLanguageId(languageId)) {\n        throw new Error(`Cannot set tokens provider for unknown language ${languageId}`);\n    }\n    if (isThenable(provider)) {\n        return registerTokensProviderFactory(languageId, { create: () => provider });\n    }\n    return languages.TokenizationRegistry.register(languageId, createTokenizationSupportAdapter(languageId, provider));\n}\n/**\n * Set the tokens provider for a language (monarch implementation). This tokenizer will be exclusive\n * with a tokenizer set using `setTokensProvider`, or with `registerTokensProviderFactory`, but will\n * work together with a tokens provider set using `registerDocumentSemanticTokensProvider` or\n * `registerDocumentRangeSemanticTokensProvider`.\n */\nexport function setMonarchTokensProvider(languageId, languageDef) {\n    const create = (languageDef) => {\n        return new MonarchTokenizer(StandaloneServices.get(ILanguageService), StandaloneServices.get(IStandaloneThemeService), languageId, compile(languageId, languageDef), StandaloneServices.get(IConfigurationService));\n    };\n    if (isThenable(languageDef)) {\n        return registerTokensProviderFactory(languageId, { create: () => languageDef });\n    }\n    return languages.TokenizationRegistry.register(languageId, create(languageDef));\n}\n/**\n * Register a reference provider (used by e.g. reference search).\n */\nexport function registerReferenceProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.referenceProvider.register(languageSelector, provider);\n}\n/**\n * Register a rename provider (used by e.g. rename symbol).\n */\nexport function registerRenameProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.renameProvider.register(languageSelector, provider);\n}\n/**\n * Register a signature help provider (used by e.g. parameter hints).\n */\nexport function registerSignatureHelpProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.signatureHelpProvider.register(languageSelector, provider);\n}\n/**\n * Register a hover provider (used by e.g. editor hover).\n */\nexport function registerHoverProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.hoverProvider.register(languageSelector, {\n        provideHover: (model, position, token) => {\n            const word = model.getWordAtPosition(position);\n            return Promise.resolve(provider.provideHover(model, position, token)).then((value) => {\n                if (!value) {\n                    return undefined;\n                }\n                if (!value.range && word) {\n                    value.range = new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n                }\n                if (!value.range) {\n                    value.range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n                }\n                return value;\n            });\n        }\n    });\n}\n/**\n * Register a document symbol provider (used by e.g. outline).\n */\nexport function registerDocumentSymbolProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentSymbolProvider.register(languageSelector, provider);\n}\n/**\n * Register a document highlight provider (used by e.g. highlight occurrences).\n */\nexport function registerDocumentHighlightProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentHighlightProvider.register(languageSelector, provider);\n}\n/**\n * Register an linked editing range provider.\n */\nexport function registerLinkedEditingRangeProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.linkedEditingRangeProvider.register(languageSelector, provider);\n}\n/**\n * Register a definition provider (used by e.g. go to definition).\n */\nexport function registerDefinitionProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.definitionProvider.register(languageSelector, provider);\n}\n/**\n * Register a implementation provider (used by e.g. go to implementation).\n */\nexport function registerImplementationProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.implementationProvider.register(languageSelector, provider);\n}\n/**\n * Register a type definition provider (used by e.g. go to type definition).\n */\nexport function registerTypeDefinitionProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.typeDefinitionProvider.register(languageSelector, provider);\n}\n/**\n * Register a code lens provider (used by e.g. inline code lenses).\n */\nexport function registerCodeLensProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.codeLensProvider.register(languageSelector, provider);\n}\n/**\n * Register a code action provider (used by e.g. quick fix).\n */\nexport function registerCodeActionProvider(languageSelector, provider, metadata) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.codeActionProvider.register(languageSelector, {\n        providedCodeActionKinds: metadata === null || metadata === void 0 ? void 0 : metadata.providedCodeActionKinds,\n        documentation: metadata === null || metadata === void 0 ? void 0 : metadata.documentation,\n        provideCodeActions: (model, range, context, token) => {\n            const markerService = StandaloneServices.get(IMarkerService);\n            const markers = markerService.read({ resource: model.uri }).filter(m => {\n                return Range.areIntersectingOrTouching(m, range);\n            });\n            return provider.provideCodeActions(model, range, { markers, only: context.only, trigger: context.trigger }, token);\n        },\n        resolveCodeAction: provider.resolveCodeAction\n    });\n}\n/**\n * Register a formatter that can handle only entire models.\n */\nexport function registerDocumentFormattingEditProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentFormattingEditProvider.register(languageSelector, provider);\n}\n/**\n * Register a formatter that can handle a range inside a model.\n */\nexport function registerDocumentRangeFormattingEditProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentRangeFormattingEditProvider.register(languageSelector, provider);\n}\n/**\n * Register a formatter than can do formatting as the user types.\n */\nexport function registerOnTypeFormattingEditProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.onTypeFormattingEditProvider.register(languageSelector, provider);\n}\n/**\n * Register a link provider that can find links in text.\n */\nexport function registerLinkProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.linkProvider.register(languageSelector, provider);\n}\n/**\n * Register a completion item provider (use by e.g. suggestions).\n */\nexport function registerCompletionItemProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.completionProvider.register(languageSelector, provider);\n}\n/**\n * Register a document color provider (used by Color Picker, Color Decorator).\n */\nexport function registerColorProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.colorProvider.register(languageSelector, provider);\n}\n/**\n * Register a folding range provider\n */\nexport function registerFoldingRangeProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.foldingRangeProvider.register(languageSelector, provider);\n}\n/**\n * Register a declaration provider\n */\nexport function registerDeclarationProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.declarationProvider.register(languageSelector, provider);\n}\n/**\n * Register a selection range provider\n */\nexport function registerSelectionRangeProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.selectionRangeProvider.register(languageSelector, provider);\n}\n/**\n * Register a document semantic tokens provider. A semantic tokens provider will complement and enhance a\n * simple top-down tokenizer. Simple top-down tokenizers can be set either via `setMonarchTokensProvider`\n * or `setTokensProvider`.\n *\n * For the best user experience, register both a semantic tokens provider and a top-down tokenizer.\n */\nexport function registerDocumentSemanticTokensProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentSemanticTokensProvider.register(languageSelector, provider);\n}\n/**\n * Register a document range semantic tokens provider. A semantic tokens provider will complement and enhance a\n * simple top-down tokenizer. Simple top-down tokenizers can be set either via `setMonarchTokensProvider`\n * or `setTokensProvider`.\n *\n * For the best user experience, register both a semantic tokens provider and a top-down tokenizer.\n */\nexport function registerDocumentRangeSemanticTokensProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentRangeSemanticTokensProvider.register(languageSelector, provider);\n}\n/**\n * Register an inline completions provider.\n */\nexport function registerInlineCompletionsProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.inlineCompletionsProvider.register(languageSelector, provider);\n}\n/**\n * Register an inlay hints provider.\n */\nexport function registerInlayHintsProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.inlayHintsProvider.register(languageSelector, provider);\n}\n/**\n * @internal\n */\nexport function createMonacoLanguagesAPI() {\n    return {\n        register: register,\n        getLanguages: getLanguages,\n        onLanguage: onLanguage,\n        getEncodedLanguageId: getEncodedLanguageId,\n        // provider methods\n        setLanguageConfiguration: setLanguageConfiguration,\n        setColorMap: setColorMap,\n        registerTokensProviderFactory: registerTokensProviderFactory,\n        setTokensProvider: setTokensProvider,\n        setMonarchTokensProvider: setMonarchTokensProvider,\n        registerReferenceProvider: registerReferenceProvider,\n        registerRenameProvider: registerRenameProvider,\n        registerCompletionItemProvider: registerCompletionItemProvider,\n        registerSignatureHelpProvider: registerSignatureHelpProvider,\n        registerHoverProvider: registerHoverProvider,\n        registerDocumentSymbolProvider: registerDocumentSymbolProvider,\n        registerDocumentHighlightProvider: registerDocumentHighlightProvider,\n        registerLinkedEditingRangeProvider: registerLinkedEditingRangeProvider,\n        registerDefinitionProvider: registerDefinitionProvider,\n        registerImplementationProvider: registerImplementationProvider,\n        registerTypeDefinitionProvider: registerTypeDefinitionProvider,\n        registerCodeLensProvider: registerCodeLensProvider,\n        registerCodeActionProvider: registerCodeActionProvider,\n        registerDocumentFormattingEditProvider: registerDocumentFormattingEditProvider,\n        registerDocumentRangeFormattingEditProvider: registerDocumentRangeFormattingEditProvider,\n        registerOnTypeFormattingEditProvider: registerOnTypeFormattingEditProvider,\n        registerLinkProvider: registerLinkProvider,\n        registerColorProvider: registerColorProvider,\n        registerFoldingRangeProvider: registerFoldingRangeProvider,\n        registerDeclarationProvider: registerDeclarationProvider,\n        registerSelectionRangeProvider: registerSelectionRangeProvider,\n        registerDocumentSemanticTokensProvider: registerDocumentSemanticTokensProvider,\n        registerDocumentRangeSemanticTokensProvider: registerDocumentRangeSemanticTokensProvider,\n        registerInlineCompletionsProvider: registerInlineCompletionsProvider,\n        registerInlayHintsProvider: registerInlayHintsProvider,\n        // enums\n        DocumentHighlightKind: standaloneEnums.DocumentHighlightKind,\n        CompletionItemKind: standaloneEnums.CompletionItemKind,\n        CompletionItemTag: standaloneEnums.CompletionItemTag,\n        CompletionItemInsertTextRule: standaloneEnums.CompletionItemInsertTextRule,\n        SymbolKind: standaloneEnums.SymbolKind,\n        SymbolTag: standaloneEnums.SymbolTag,\n        IndentAction: standaloneEnums.IndentAction,\n        CompletionTriggerKind: standaloneEnums.CompletionTriggerKind,\n        SignatureHelpTriggerKind: standaloneEnums.SignatureHelpTriggerKind,\n        InlayHintKind: standaloneEnums.InlayHintKind,\n        InlineCompletionTriggerKind: standaloneEnums.InlineCompletionTriggerKind,\n        CodeActionTriggerType: standaloneEnums.CodeActionTriggerType,\n        // classes\n        FoldingRangeKind: languages.FoldingRangeKind,\n    };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../base/browser/dom.js';\nimport { Event } from '../../../base/common/event.js';\nimport { ILayoutService } from '../../../platform/layout/browser/layoutService.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nlet StandaloneLayoutService = class StandaloneLayoutService {\n    constructor(_codeEditorService) {\n        this._codeEditorService = _codeEditorService;\n        this.onDidLayout = Event.None;\n        this.offset = { top: 0, quickPickTop: 0 };\n    }\n    get dimension() {\n        if (!this._dimension) {\n            this._dimension = dom.getClientArea(window.document.body);\n        }\n        return this._dimension;\n    }\n    get hasContainer() {\n        return false;\n    }\n    get container() {\n        // On a page, multiple editors can be created. Therefore, there are multiple containers, not\n        // just a single one. Please use `ICodeEditorService` to get the current focused code editor\n        // and use its container if necessary. You can also instantiate `EditorScopedLayoutService`\n        // which implements `ILayoutService` but is not a part of the service collection because\n        // it is code editor instance specific.\n        throw new Error(`ILayoutService.container is not available in the standalone editor!`);\n    }\n    focus() {\n        var _a;\n        (_a = this._codeEditorService.getFocusedCodeEditor()) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n};\nStandaloneLayoutService = __decorate([\n    __param(0, ICodeEditorService)\n], StandaloneLayoutService);\nlet EditorScopedLayoutService = class EditorScopedLayoutService extends StandaloneLayoutService {\n    constructor(_container, codeEditorService) {\n        super(codeEditorService);\n        this._container = _container;\n    }\n    get hasContainer() {\n        return false;\n    }\n    get container() {\n        return this._container;\n    }\n};\nEditorScopedLayoutService = __decorate([\n    __param(1, ICodeEditorService)\n], EditorScopedLayoutService);\nexport { EditorScopedLayoutService };\nregisterSingleton(ILayoutService, StandaloneLayoutService);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport './standaloneQuickInput.css';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { EditorScopedLayoutService } from '../standaloneLayoutService.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { QuickInputService } from '../../../../platform/quickinput/browser/quickInput.js';\nimport { once } from '../../../../base/common/functional.js';\nlet EditorScopedQuickInputService = class EditorScopedQuickInputService extends QuickInputService {\n    constructor(editor, instantiationService, contextKeyService, themeService, accessibilityService, codeEditorService) {\n        super(instantiationService, contextKeyService, themeService, accessibilityService, new EditorScopedLayoutService(editor.getContainerDomNode(), codeEditorService));\n        this.host = undefined;\n        // Use the passed in code editor as host for the quick input widget\n        const contribution = QuickInputEditorContribution.get(editor);\n        if (contribution) {\n            const widget = contribution.widget;\n            this.host = {\n                _serviceBrand: undefined,\n                get hasContainer() { return true; },\n                get container() { return widget.getDomNode(); },\n                get dimension() { return editor.getLayoutInfo(); },\n                get onDidLayout() { return editor.onDidLayoutChange; },\n                focus: () => editor.focus(),\n                offset: { top: 0, quickPickTop: 0 }\n            };\n        }\n        else {\n            this.host = undefined;\n        }\n    }\n    createController() {\n        return super.createController(this.host);\n    }\n};\nEditorScopedQuickInputService = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IContextKeyService),\n    __param(3, IThemeService),\n    __param(4, IAccessibilityService),\n    __param(5, ICodeEditorService)\n], EditorScopedQuickInputService);\nexport { EditorScopedQuickInputService };\nlet StandaloneQuickInputService = class StandaloneQuickInputService {\n    constructor(instantiationService, codeEditorService) {\n        this.instantiationService = instantiationService;\n        this.codeEditorService = codeEditorService;\n        this.mapEditorToService = new Map();\n    }\n    get activeService() {\n        const editor = this.codeEditorService.getFocusedCodeEditor();\n        if (!editor) {\n            throw new Error('Quick input service needs a focused editor to work.');\n        }\n        // Find the quick input implementation for the focused\n        // editor or create it lazily if not yet created\n        let quickInputService = this.mapEditorToService.get(editor);\n        if (!quickInputService) {\n            const newQuickInputService = quickInputService = this.instantiationService.createInstance(EditorScopedQuickInputService, editor);\n            this.mapEditorToService.set(editor, quickInputService);\n            once(editor.onDidDispose)(() => {\n                newQuickInputService.dispose();\n                this.mapEditorToService.delete(editor);\n            });\n        }\n        return quickInputService;\n    }\n    get quickAccess() { return this.activeService.quickAccess; }\n    pick(picks, options = {}, token = CancellationToken.None) {\n        return this.activeService /* TS fail */.pick(picks, options, token);\n    }\n    createQuickPick() {\n        return this.activeService.createQuickPick();\n    }\n};\nStandaloneQuickInputService = __decorate([\n    __param(0, IInstantiationService),\n    __param(1, ICodeEditorService)\n], StandaloneQuickInputService);\nexport { StandaloneQuickInputService };\nexport class QuickInputEditorContribution {\n    constructor(editor) {\n        this.editor = editor;\n        this.widget = new QuickInputEditorWidget(this.editor);\n    }\n    static get(editor) {\n        return editor.getContribution(QuickInputEditorContribution.ID);\n    }\n    dispose() {\n        this.widget.dispose();\n    }\n}\nQuickInputEditorContribution.ID = 'editor.controller.quickInput';\nexport class QuickInputEditorWidget {\n    constructor(codeEditor) {\n        this.codeEditor = codeEditor;\n        this.domNode = document.createElement('div');\n        this.codeEditor.addOverlayWidget(this);\n    }\n    getId() {\n        return QuickInputEditorWidget.ID;\n    }\n    getDomNode() {\n        return this.domNode;\n    }\n    getPosition() {\n        return { preference: 2 /* OverlayWidgetPositionPreference.TOP_CENTER */ };\n    }\n    dispose() {\n        this.codeEditor.removeOverlayWidget(this);\n    }\n}\nQuickInputEditorWidget.ID = 'editor.contrib.quickInputWidget';\nregisterEditorContribution(QuickInputEditorContribution.ID, QuickInputEditorContribution);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport '../../common/languages/languageConfigurationRegistry.js';\nimport './standaloneCodeEditorService.js';\nimport './standaloneLayoutService.js';\nimport '../../../platform/undoRedo/common/undoRedoService.js';\nimport '../../common/services/languageFeatureDebounce.js';\nimport * as strings from '../../../base/common/strings.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { SimpleKeybinding, createKeybinding } from '../../../base/common/keybindings.js';\nimport { ImmortalReference, toDisposable, DisposableStore, Disposable } from '../../../base/common/lifecycle.js';\nimport { OS, isLinux, isMacintosh } from '../../../base/common/platform.js';\nimport Severity from '../../../base/common/severity.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { IBulkEditService, ResourceTextEdit } from '../../browser/services/bulkEditService.js';\nimport { isDiffEditorConfigurationKey, isEditorConfigurationKey } from '../../common/config/editorConfigurationSchema.js';\nimport { EditOperation } from '../../common/core/editOperation.js';\nimport { Position as Pos } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { IModelService } from '../../common/services/model.js';\nimport { ITextModelService } from '../../common/services/resolverService.js';\nimport { ITextResourceConfigurationService, ITextResourcePropertiesService } from '../../common/services/textResourceConfiguration.js';\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { Configuration, ConfigurationModel, ConfigurationChangeEvent } from '../../../platform/configuration/common/configurationModels.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IDialogService } from '../../../platform/dialogs/common/dialogs.js';\nimport { createDecorator, IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { AbstractKeybindingService } from '../../../platform/keybinding/common/abstractKeybindingService.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { KeybindingResolver } from '../../../platform/keybinding/common/keybindingResolver.js';\nimport { KeybindingsRegistry } from '../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { ResolvedKeybindingItem } from '../../../platform/keybinding/common/resolvedKeybindingItem.js';\nimport { USLayoutResolvedKeybinding } from '../../../platform/keybinding/common/usLayoutResolvedKeybinding.js';\nimport { ILabelService } from '../../../platform/label/common/label.js';\nimport { INotificationService, NoOpNotification } from '../../../platform/notification/common/notification.js';\nimport { IEditorProgressService, IProgressService } from '../../../platform/progress/common/progress.js';\nimport { ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\nimport { IWorkspaceContextService, WorkspaceFolder } from '../../../platform/workspace/common/workspace.js';\nimport { ILayoutService } from '../../../platform/layout/browser/layoutService.js';\nimport { StandaloneServicesNLS } from '../../common/standaloneStrings.js';\nimport { basename } from '../../../base/common/resources.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { ConsoleLogger, ILogService, LogService } from '../../../platform/log/common/log.js';\nimport { IWorkspaceTrustManagementService } from '../../../platform/workspace/common/workspaceTrust.js';\nimport { IContextMenuService, IContextViewService } from '../../../platform/contextview/browser/contextView.js';\nimport { ContextViewService } from '../../../platform/contextview/browser/contextViewService.js';\nimport { LanguageService } from '../../common/services/languageService.js';\nimport { ContextMenuService } from '../../../platform/contextview/browser/contextMenuService.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { getSingletonServiceDescriptors, registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nimport { OpenerService } from '../../browser/services/openerService.js';\nimport { IEditorWorkerService } from '../../common/services/editorWorker.js';\nimport { EditorWorkerService } from '../../browser/services/editorWorkerService.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport { MarkerDecorationsService } from '../../common/services/markerDecorationsService.js';\nimport { IMarkerDecorationsService } from '../../common/services/markerDecorations.js';\nimport { ModelService } from '../../common/services/modelService.js';\nimport { StandaloneQuickInputService } from './quickInput/standaloneQuickInputService.js';\nimport { StandaloneThemeService } from './standaloneThemeService.js';\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\nimport { AccessibilityService } from '../../../platform/accessibility/browser/accessibilityService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { IMenuService } from '../../../platform/actions/common/actions.js';\nimport { MenuService } from '../../../platform/actions/common/menuService.js';\nimport { BrowserClipboardService } from '../../../platform/clipboard/browser/clipboardService.js';\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\nimport { ContextKeyService } from '../../../platform/contextkey/browser/contextKeyService.js';\nimport { SyncDescriptor } from '../../../platform/instantiation/common/descriptors.js';\nimport { InstantiationService } from '../../../platform/instantiation/common/instantiationService.js';\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\nimport { IListService, ListService } from '../../../platform/list/browser/listService.js';\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\nimport { MarkerService } from '../../../platform/markers/common/markerService.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nimport { IQuickInputService } from '../../../platform/quickinput/common/quickInput.js';\nimport { IStorageService, InMemoryStorageService } from '../../../platform/storage/common/storage.js';\nimport '../../common/services/languageFeaturesService.js';\nimport { DefaultConfigurationModel } from '../../../platform/configuration/common/configurations.js';\nclass SimpleModel {\n    constructor(model) {\n        this.disposed = false;\n        this.model = model;\n        this._onWillDispose = new Emitter();\n    }\n    get textEditorModel() {\n        return this.model;\n    }\n    dispose() {\n        this.disposed = true;\n        this._onWillDispose.fire();\n    }\n}\nlet StandaloneTextModelService = class StandaloneTextModelService {\n    constructor(modelService) {\n        this.modelService = modelService;\n    }\n    createModelReference(resource) {\n        const model = this.modelService.getModel(resource);\n        if (!model) {\n            return Promise.reject(new Error(`Model not found`));\n        }\n        return Promise.resolve(new ImmortalReference(new SimpleModel(model)));\n    }\n};\nStandaloneTextModelService = __decorate([\n    __param(0, IModelService)\n], StandaloneTextModelService);\nclass StandaloneEditorProgressService {\n    show() {\n        return StandaloneEditorProgressService.NULL_PROGRESS_RUNNER;\n    }\n    showWhile(promise, delay) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield promise;\n        });\n    }\n}\nStandaloneEditorProgressService.NULL_PROGRESS_RUNNER = {\n    done: () => { },\n    total: () => { },\n    worked: () => { }\n};\nclass StandaloneProgressService {\n    withProgress(_options, task, onDidCancel) {\n        return task({\n            report: () => { },\n        });\n    }\n}\nclass StandaloneDialogService {\n    confirm(confirmation) {\n        return this.doConfirm(confirmation).then(confirmed => {\n            return {\n                confirmed,\n                checkboxChecked: false // unsupported\n            };\n        });\n    }\n    doConfirm(confirmation) {\n        let messageText = confirmation.message;\n        if (confirmation.detail) {\n            messageText = messageText + '\\n\\n' + confirmation.detail;\n        }\n        return Promise.resolve(window.confirm(messageText));\n    }\n    show(severity, message, buttons, options) {\n        return Promise.resolve({ choice: 0 });\n    }\n}\nexport class StandaloneNotificationService {\n    info(message) {\n        return this.notify({ severity: Severity.Info, message });\n    }\n    warn(message) {\n        return this.notify({ severity: Severity.Warning, message });\n    }\n    error(error) {\n        return this.notify({ severity: Severity.Error, message: error });\n    }\n    notify(notification) {\n        switch (notification.severity) {\n            case Severity.Error:\n                console.error(notification.message);\n                break;\n            case Severity.Warning:\n                console.warn(notification.message);\n                break;\n            default:\n                console.log(notification.message);\n                break;\n        }\n        return StandaloneNotificationService.NO_OP;\n    }\n    status(message, options) {\n        return Disposable.None;\n    }\n}\nStandaloneNotificationService.NO_OP = new NoOpNotification();\nlet StandaloneCommandService = class StandaloneCommandService {\n    constructor(instantiationService) {\n        this._onWillExecuteCommand = new Emitter();\n        this._onDidExecuteCommand = new Emitter();\n        this.onWillExecuteCommand = this._onWillExecuteCommand.event;\n        this.onDidExecuteCommand = this._onDidExecuteCommand.event;\n        this._instantiationService = instantiationService;\n    }\n    executeCommand(id, ...args) {\n        const command = CommandsRegistry.getCommand(id);\n        if (!command) {\n            return Promise.reject(new Error(`command '${id}' not found`));\n        }\n        try {\n            this._onWillExecuteCommand.fire({ commandId: id, args });\n            const result = this._instantiationService.invokeFunction.apply(this._instantiationService, [command.handler, ...args]);\n            this._onDidExecuteCommand.fire({ commandId: id, args });\n            return Promise.resolve(result);\n        }\n        catch (err) {\n            return Promise.reject(err);\n        }\n    }\n};\nStandaloneCommandService = __decorate([\n    __param(0, IInstantiationService)\n], StandaloneCommandService);\nexport { StandaloneCommandService };\nlet StandaloneKeybindingService = class StandaloneKeybindingService extends AbstractKeybindingService {\n    constructor(contextKeyService, commandService, telemetryService, notificationService, logService, codeEditorService) {\n        super(contextKeyService, commandService, telemetryService, notificationService, logService);\n        this._cachedResolver = null;\n        this._dynamicKeybindings = [];\n        this._domNodeListeners = [];\n        const addContainer = (domNode) => {\n            const disposables = new DisposableStore();\n            // for standard keybindings\n            disposables.add(dom.addDisposableListener(domNode, dom.EventType.KEY_DOWN, (e) => {\n                const keyEvent = new StandardKeyboardEvent(e);\n                const shouldPreventDefault = this._dispatch(keyEvent, keyEvent.target);\n                if (shouldPreventDefault) {\n                    keyEvent.preventDefault();\n                    keyEvent.stopPropagation();\n                }\n            }));\n            // for single modifier chord keybindings (e.g. shift shift)\n            disposables.add(dom.addDisposableListener(domNode, dom.EventType.KEY_UP, (e) => {\n                const keyEvent = new StandardKeyboardEvent(e);\n                const shouldPreventDefault = this._singleModifierDispatch(keyEvent, keyEvent.target);\n                if (shouldPreventDefault) {\n                    keyEvent.preventDefault();\n                }\n            }));\n            this._domNodeListeners.push(new DomNodeListeners(domNode, disposables));\n        };\n        const removeContainer = (domNode) => {\n            for (let i = 0; i < this._domNodeListeners.length; i++) {\n                const domNodeListeners = this._domNodeListeners[i];\n                if (domNodeListeners.domNode === domNode) {\n                    this._domNodeListeners.splice(i, 1);\n                    domNodeListeners.dispose();\n                }\n            }\n        };\n        const addCodeEditor = (codeEditor) => {\n            if (codeEditor.getOption(56 /* EditorOption.inDiffEditor */)) {\n                return;\n            }\n            addContainer(codeEditor.getContainerDomNode());\n        };\n        const removeCodeEditor = (codeEditor) => {\n            if (codeEditor.getOption(56 /* EditorOption.inDiffEditor */)) {\n                return;\n            }\n            removeContainer(codeEditor.getContainerDomNode());\n        };\n        this._register(codeEditorService.onCodeEditorAdd(addCodeEditor));\n        this._register(codeEditorService.onCodeEditorRemove(removeCodeEditor));\n        codeEditorService.listCodeEditors().forEach(addCodeEditor);\n        const addDiffEditor = (diffEditor) => {\n            addContainer(diffEditor.getContainerDomNode());\n        };\n        const removeDiffEditor = (diffEditor) => {\n            removeContainer(diffEditor.getContainerDomNode());\n        };\n        this._register(codeEditorService.onDiffEditorAdd(addDiffEditor));\n        this._register(codeEditorService.onDiffEditorRemove(removeDiffEditor));\n        codeEditorService.listDiffEditors().forEach(addDiffEditor);\n    }\n    addDynamicKeybinding(commandId, _keybinding, handler, when) {\n        const keybinding = createKeybinding(_keybinding, OS);\n        const toDispose = new DisposableStore();\n        if (keybinding) {\n            this._dynamicKeybindings.push({\n                keybinding: keybinding.parts,\n                command: commandId,\n                when: when,\n                weight1: 1000,\n                weight2: 0,\n                extensionId: null,\n                isBuiltinExtension: false\n            });\n            toDispose.add(toDisposable(() => {\n                for (let i = 0; i < this._dynamicKeybindings.length; i++) {\n                    const kb = this._dynamicKeybindings[i];\n                    if (kb.command === commandId) {\n                        this._dynamicKeybindings.splice(i, 1);\n                        this.updateResolver();\n                        return;\n                    }\n                }\n            }));\n        }\n        toDispose.add(CommandsRegistry.registerCommand(commandId, handler));\n        this.updateResolver();\n        return toDispose;\n    }\n    updateResolver() {\n        this._cachedResolver = null;\n        this._onDidUpdateKeybindings.fire();\n    }\n    _getResolver() {\n        if (!this._cachedResolver) {\n            const defaults = this._toNormalizedKeybindingItems(KeybindingsRegistry.getDefaultKeybindings(), true);\n            const overrides = this._toNormalizedKeybindingItems(this._dynamicKeybindings, false);\n            this._cachedResolver = new KeybindingResolver(defaults, overrides, (str) => this._log(str));\n        }\n        return this._cachedResolver;\n    }\n    _documentHasFocus() {\n        return document.hasFocus();\n    }\n    _toNormalizedKeybindingItems(items, isDefault) {\n        const result = [];\n        let resultLen = 0;\n        for (const item of items) {\n            const when = item.when || undefined;\n            const keybinding = item.keybinding;\n            if (!keybinding) {\n                // This might be a removal keybinding item in user settings => accept it\n                result[resultLen++] = new ResolvedKeybindingItem(undefined, item.command, item.commandArgs, when, isDefault, null, false);\n            }\n            else {\n                const resolvedKeybindings = USLayoutResolvedKeybinding.resolveUserBinding(keybinding, OS);\n                for (const resolvedKeybinding of resolvedKeybindings) {\n                    result[resultLen++] = new ResolvedKeybindingItem(resolvedKeybinding, item.command, item.commandArgs, when, isDefault, null, false);\n                }\n            }\n        }\n        return result;\n    }\n    resolveKeyboardEvent(keyboardEvent) {\n        const keybinding = new SimpleKeybinding(keyboardEvent.ctrlKey, keyboardEvent.shiftKey, keyboardEvent.altKey, keyboardEvent.metaKey, keyboardEvent.keyCode).toChord();\n        return new USLayoutResolvedKeybinding(keybinding, OS);\n    }\n};\nStandaloneKeybindingService = __decorate([\n    __param(0, IContextKeyService),\n    __param(1, ICommandService),\n    __param(2, ITelemetryService),\n    __param(3, INotificationService),\n    __param(4, ILogService),\n    __param(5, ICodeEditorService)\n], StandaloneKeybindingService);\nexport { StandaloneKeybindingService };\nclass DomNodeListeners extends Disposable {\n    constructor(domNode, disposables) {\n        super();\n        this.domNode = domNode;\n        this._register(disposables);\n    }\n}\nfunction isConfigurationOverrides(thing) {\n    return thing\n        && typeof thing === 'object'\n        && (!thing.overrideIdentifier || typeof thing.overrideIdentifier === 'string')\n        && (!thing.resource || thing.resource instanceof URI);\n}\nexport class StandaloneConfigurationService {\n    constructor() {\n        this._onDidChangeConfiguration = new Emitter();\n        this.onDidChangeConfiguration = this._onDidChangeConfiguration.event;\n        this._configuration = new Configuration(new DefaultConfigurationModel(), new ConfigurationModel(), new ConfigurationModel(), new ConfigurationModel());\n    }\n    getValue(arg1, arg2) {\n        const section = typeof arg1 === 'string' ? arg1 : undefined;\n        const overrides = isConfigurationOverrides(arg1) ? arg1 : isConfigurationOverrides(arg2) ? arg2 : {};\n        return this._configuration.getValue(section, overrides, undefined);\n    }\n    updateValues(values) {\n        const previous = { data: this._configuration.toData() };\n        const changedKeys = [];\n        for (const entry of values) {\n            const [key, value] = entry;\n            if (this.getValue(key) === value) {\n                continue;\n            }\n            this._configuration.updateValue(key, value);\n            changedKeys.push(key);\n        }\n        if (changedKeys.length > 0) {\n            const configurationChangeEvent = new ConfigurationChangeEvent({ keys: changedKeys, overrides: [] }, previous, this._configuration);\n            configurationChangeEvent.source = 8 /* ConfigurationTarget.MEMORY */;\n            configurationChangeEvent.sourceConfig = null;\n            this._onDidChangeConfiguration.fire(configurationChangeEvent);\n        }\n        return Promise.resolve();\n    }\n    updateValue(key, value, arg3, arg4) {\n        return this.updateValues([[key, value]]);\n    }\n    inspect(key, options = {}) {\n        return this._configuration.inspect(key, options, undefined);\n    }\n}\nlet StandaloneResourceConfigurationService = class StandaloneResourceConfigurationService {\n    constructor(configurationService) {\n        this.configurationService = configurationService;\n        this._onDidChangeConfiguration = new Emitter();\n        this.configurationService.onDidChangeConfiguration((e) => {\n            this._onDidChangeConfiguration.fire({ affectedKeys: e.affectedKeys, affectsConfiguration: (resource, configuration) => e.affectsConfiguration(configuration) });\n        });\n    }\n    getValue(resource, arg2, arg3) {\n        const position = Pos.isIPosition(arg2) ? arg2 : null;\n        const section = position ? (typeof arg3 === 'string' ? arg3 : undefined) : (typeof arg2 === 'string' ? arg2 : undefined);\n        if (typeof section === 'undefined') {\n            return this.configurationService.getValue();\n        }\n        return this.configurationService.getValue(section);\n    }\n};\nStandaloneResourceConfigurationService = __decorate([\n    __param(0, IConfigurationService)\n], StandaloneResourceConfigurationService);\nlet StandaloneResourcePropertiesService = class StandaloneResourcePropertiesService {\n    constructor(configurationService) {\n        this.configurationService = configurationService;\n    }\n    getEOL(resource, language) {\n        const eol = this.configurationService.getValue('files.eol', { overrideIdentifier: language, resource });\n        if (eol && typeof eol === 'string' && eol !== 'auto') {\n            return eol;\n        }\n        return (isLinux || isMacintosh) ? '\\n' : '\\r\\n';\n    }\n};\nStandaloneResourcePropertiesService = __decorate([\n    __param(0, IConfigurationService)\n], StandaloneResourcePropertiesService);\nclass StandaloneTelemetryService {\n    publicLog(eventName, data) {\n        return Promise.resolve(undefined);\n    }\n    publicLog2(eventName, data) {\n        return this.publicLog(eventName, data);\n    }\n}\nclass StandaloneWorkspaceContextService {\n    constructor() {\n        const resource = URI.from({ scheme: StandaloneWorkspaceContextService.SCHEME, authority: 'model', path: '/' });\n        this.workspace = { id: '4064f6ec-cb38-4ad0-af64-ee6467e63c82', folders: [new WorkspaceFolder({ uri: resource, name: '', index: 0 })] };\n    }\n    getWorkspace() {\n        return this.workspace;\n    }\n    getWorkspaceFolder(resource) {\n        return resource && resource.scheme === StandaloneWorkspaceContextService.SCHEME ? this.workspace.folders[0] : null;\n    }\n}\nStandaloneWorkspaceContextService.SCHEME = 'inmemory';\nexport function updateConfigurationService(configurationService, source, isDiffEditor) {\n    if (!source) {\n        return;\n    }\n    if (!(configurationService instanceof StandaloneConfigurationService)) {\n        return;\n    }\n    const toUpdate = [];\n    Object.keys(source).forEach((key) => {\n        if (isEditorConfigurationKey(key)) {\n            toUpdate.push([`editor.${key}`, source[key]]);\n        }\n        if (isDiffEditor && isDiffEditorConfigurationKey(key)) {\n            toUpdate.push([`diffEditor.${key}`, source[key]]);\n        }\n    });\n    if (toUpdate.length > 0) {\n        configurationService.updateValues(toUpdate);\n    }\n}\nlet StandaloneBulkEditService = class StandaloneBulkEditService {\n    constructor(_modelService) {\n        this._modelService = _modelService;\n        //\n    }\n    hasPreviewHandler() {\n        return false;\n    }\n    apply(edits, _options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const textEdits = new Map();\n            for (const edit of edits) {\n                if (!(edit instanceof ResourceTextEdit)) {\n                    throw new Error('bad edit - only text edits are supported');\n                }\n                const model = this._modelService.getModel(edit.resource);\n                if (!model) {\n                    throw new Error('bad edit - model not found');\n                }\n                if (typeof edit.versionId === 'number' && model.getVersionId() !== edit.versionId) {\n                    throw new Error('bad state - model changed in the meantime');\n                }\n                let array = textEdits.get(model);\n                if (!array) {\n                    array = [];\n                    textEdits.set(model, array);\n                }\n                array.push(EditOperation.replaceMove(Range.lift(edit.textEdit.range), edit.textEdit.text));\n            }\n            let totalEdits = 0;\n            let totalFiles = 0;\n            for (const [model, edits] of textEdits) {\n                model.pushStackElement();\n                model.pushEditOperations([], edits, () => []);\n                model.pushStackElement();\n                totalFiles += 1;\n                totalEdits += edits.length;\n            }\n            return {\n                ariaSummary: strings.format(StandaloneServicesNLS.bulkEditServiceSummary, totalEdits, totalFiles)\n            };\n        });\n    }\n};\nStandaloneBulkEditService = __decorate([\n    __param(0, IModelService)\n], StandaloneBulkEditService);\nclass StandaloneUriLabelService {\n    getUriLabel(resource, options) {\n        if (resource.scheme === 'file') {\n            return resource.fsPath;\n        }\n        return resource.path;\n    }\n    getUriBasenameLabel(resource) {\n        return basename(resource);\n    }\n}\nlet StandaloneContextViewService = class StandaloneContextViewService extends ContextViewService {\n    constructor(layoutService, _codeEditorService) {\n        super(layoutService);\n        this._codeEditorService = _codeEditorService;\n    }\n    showContextView(delegate, container, shadowRoot) {\n        if (!container) {\n            const codeEditor = this._codeEditorService.getFocusedCodeEditor() || this._codeEditorService.getActiveCodeEditor();\n            if (codeEditor) {\n                container = codeEditor.getContainerDomNode();\n            }\n        }\n        return super.showContextView(delegate, container, shadowRoot);\n    }\n};\nStandaloneContextViewService = __decorate([\n    __param(0, ILayoutService),\n    __param(1, ICodeEditorService)\n], StandaloneContextViewService);\nclass StandaloneWorkspaceTrustManagementService {\n    constructor() {\n        this._neverEmitter = new Emitter();\n        this.onDidChangeTrust = this._neverEmitter.event;\n    }\n    isWorkspaceTrusted() {\n        return true;\n    }\n}\nclass StandaloneLanguageService extends LanguageService {\n    constructor() {\n        super();\n    }\n}\nclass StandaloneLogService extends LogService {\n    constructor() {\n        super(new ConsoleLogger());\n    }\n}\nlet StandaloneContextMenuService = class StandaloneContextMenuService extends ContextMenuService {\n    constructor(telemetryService, notificationService, contextViewService, keybindingService, themeService) {\n        super(telemetryService, notificationService, contextViewService, keybindingService, themeService);\n        this.configure({ blockMouse: false }); // we do not want that in the standalone editor\n    }\n};\nStandaloneContextMenuService = __decorate([\n    __param(0, ITelemetryService),\n    __param(1, INotificationService),\n    __param(2, IContextViewService),\n    __param(3, IKeybindingService),\n    __param(4, IThemeService)\n], StandaloneContextMenuService);\nregisterSingleton(IConfigurationService, StandaloneConfigurationService);\nregisterSingleton(ITextResourceConfigurationService, StandaloneResourceConfigurationService);\nregisterSingleton(ITextResourcePropertiesService, StandaloneResourcePropertiesService);\nregisterSingleton(IWorkspaceContextService, StandaloneWorkspaceContextService);\nregisterSingleton(ILabelService, StandaloneUriLabelService);\nregisterSingleton(ITelemetryService, StandaloneTelemetryService);\nregisterSingleton(IDialogService, StandaloneDialogService);\nregisterSingleton(INotificationService, StandaloneNotificationService);\nregisterSingleton(IMarkerService, MarkerService);\nregisterSingleton(ILanguageService, StandaloneLanguageService);\nregisterSingleton(IStandaloneThemeService, StandaloneThemeService);\nregisterSingleton(ILogService, StandaloneLogService);\nregisterSingleton(IModelService, ModelService);\nregisterSingleton(IMarkerDecorationsService, MarkerDecorationsService);\nregisterSingleton(IContextKeyService, ContextKeyService);\nregisterSingleton(IProgressService, StandaloneProgressService);\nregisterSingleton(IEditorProgressService, StandaloneEditorProgressService);\nregisterSingleton(IStorageService, InMemoryStorageService);\nregisterSingleton(IEditorWorkerService, EditorWorkerService);\nregisterSingleton(IBulkEditService, StandaloneBulkEditService);\nregisterSingleton(IWorkspaceTrustManagementService, StandaloneWorkspaceTrustManagementService);\nregisterSingleton(ITextModelService, StandaloneTextModelService);\nregisterSingleton(IAccessibilityService, AccessibilityService);\nregisterSingleton(IListService, ListService);\nregisterSingleton(ICommandService, StandaloneCommandService);\nregisterSingleton(IKeybindingService, StandaloneKeybindingService);\nregisterSingleton(IQuickInputService, StandaloneQuickInputService);\nregisterSingleton(IContextViewService, StandaloneContextViewService);\nregisterSingleton(IOpenerService, OpenerService);\nregisterSingleton(IClipboardService, BrowserClipboardService);\nregisterSingleton(IContextMenuService, StandaloneContextMenuService);\nregisterSingleton(IMenuService, MenuService);\n/**\n * We don't want to eagerly instantiate services because embedders get a one time chance\n * to override services when they create the first editor.\n */\nexport var StandaloneServices;\n(function (StandaloneServices) {\n    const serviceCollection = new ServiceCollection();\n    for (const [id, descriptor] of getSingletonServiceDescriptors()) {\n        serviceCollection.set(id, descriptor);\n    }\n    const instantiationService = new InstantiationService(serviceCollection, true);\n    serviceCollection.set(IInstantiationService, instantiationService);\n    function get(serviceId) {\n        const r = serviceCollection.get(serviceId);\n        if (!r) {\n            throw new Error('Missing service ' + serviceId);\n        }\n        if (r instanceof SyncDescriptor) {\n            return instantiationService.invokeFunction((accessor) => accessor.get(serviceId));\n        }\n        else {\n            return r;\n        }\n    }\n    StandaloneServices.get = get;\n    let initialized = false;\n    function initialize(overrides) {\n        if (initialized) {\n            return instantiationService;\n        }\n        initialized = true;\n        // Add singletons that were registered after this module loaded\n        for (const [id, descriptor] of getSingletonServiceDescriptors()) {\n            if (!serviceCollection.get(id)) {\n                serviceCollection.set(id, descriptor);\n            }\n        }\n        // Initialize the service collection with the overrides, but only if the\n        // service was not instantiated in the meantime.\n        for (const serviceId in overrides) {\n            if (overrides.hasOwnProperty(serviceId)) {\n                const serviceIdentifier = createDecorator(serviceId);\n                const r = serviceCollection.get(serviceIdentifier);\n                if (r instanceof SyncDescriptor) {\n                    serviceCollection.set(serviceIdentifier, overrides[serviceId]);\n                }\n            }\n        }\n        return instantiationService;\n    }\n    StandaloneServices.initialize = initialize;\n})(StandaloneServices || (StandaloneServices = {}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { editorActiveIndentGuides, editorIndentGuides } from '../../common/core/editorColorRegistry.js';\nimport { editorBackground, editorForeground, editorInactiveSelection, editorSelectionHighlight } from '../../../platform/theme/common/colorRegistry.js';\n/* -------------------------------- Begin vs theme -------------------------------- */\nexport const vs = {\n    base: 'vs',\n    inherit: false,\n    rules: [\n        { token: '', foreground: '000000', background: 'fffffe' },\n        { token: 'invalid', foreground: 'cd3131' },\n        { token: 'emphasis', fontStyle: 'italic' },\n        { token: 'strong', fontStyle: 'bold' },\n        { token: 'variable', foreground: '001188' },\n        { token: 'variable.predefined', foreground: '4864AA' },\n        { token: 'constant', foreground: 'dd0000' },\n        { token: 'comment', foreground: '008000' },\n        { token: 'number', foreground: '098658' },\n        { token: 'number.hex', foreground: '3030c0' },\n        { token: 'regexp', foreground: '800000' },\n        { token: 'annotation', foreground: '808080' },\n        { token: 'type', foreground: '008080' },\n        { token: 'delimiter', foreground: '000000' },\n        { token: 'delimiter.html', foreground: '383838' },\n        { token: 'delimiter.xml', foreground: '0000FF' },\n        { token: 'tag', foreground: '800000' },\n        { token: 'tag.id.pug', foreground: '4F76AC' },\n        { token: 'tag.class.pug', foreground: '4F76AC' },\n        { token: 'meta.scss', foreground: '800000' },\n        { token: 'metatag', foreground: 'e00000' },\n        { token: 'metatag.content.html', foreground: 'FF0000' },\n        { token: 'metatag.html', foreground: '808080' },\n        { token: 'metatag.xml', foreground: '808080' },\n        { token: 'metatag.php', fontStyle: 'bold' },\n        { token: 'key', foreground: '863B00' },\n        { token: 'string.key.json', foreground: 'A31515' },\n        { token: 'string.value.json', foreground: '0451A5' },\n        { token: 'attribute.name', foreground: 'FF0000' },\n        { token: 'attribute.value', foreground: '0451A5' },\n        { token: 'attribute.value.number', foreground: '098658' },\n        { token: 'attribute.value.unit', foreground: '098658' },\n        { token: 'attribute.value.html', foreground: '0000FF' },\n        { token: 'attribute.value.xml', foreground: '0000FF' },\n        { token: 'string', foreground: 'A31515' },\n        { token: 'string.html', foreground: '0000FF' },\n        { token: 'string.sql', foreground: 'FF0000' },\n        { token: 'string.yaml', foreground: '0451A5' },\n        { token: 'keyword', foreground: '0000FF' },\n        { token: 'keyword.json', foreground: '0451A5' },\n        { token: 'keyword.flow', foreground: 'AF00DB' },\n        { token: 'keyword.flow.scss', foreground: '0000FF' },\n        { token: 'operator.scss', foreground: '666666' },\n        { token: 'operator.sql', foreground: '778899' },\n        { token: 'operator.swift', foreground: '666666' },\n        { token: 'predefined.sql', foreground: 'C700C7' },\n    ],\n    colors: {\n        [editorBackground]: '#FFFFFE',\n        [editorForeground]: '#000000',\n        [editorInactiveSelection]: '#E5EBF1',\n        [editorIndentGuides]: '#D3D3D3',\n        [editorActiveIndentGuides]: '#939393',\n        [editorSelectionHighlight]: '#ADD6FF4D'\n    }\n};\n/* -------------------------------- End vs theme -------------------------------- */\n/* -------------------------------- Begin vs-dark theme -------------------------------- */\nexport const vs_dark = {\n    base: 'vs-dark',\n    inherit: false,\n    rules: [\n        { token: '', foreground: 'D4D4D4', background: '1E1E1E' },\n        { token: 'invalid', foreground: 'f44747' },\n        { token: 'emphasis', fontStyle: 'italic' },\n        { token: 'strong', fontStyle: 'bold' },\n        { token: 'variable', foreground: '74B0DF' },\n        { token: 'variable.predefined', foreground: '4864AA' },\n        { token: 'variable.parameter', foreground: '9CDCFE' },\n        { token: 'constant', foreground: '569CD6' },\n        { token: 'comment', foreground: '608B4E' },\n        { token: 'number', foreground: 'B5CEA8' },\n        { token: 'number.hex', foreground: '5BB498' },\n        { token: 'regexp', foreground: 'B46695' },\n        { token: 'annotation', foreground: 'cc6666' },\n        { token: 'type', foreground: '3DC9B0' },\n        { token: 'delimiter', foreground: 'DCDCDC' },\n        { token: 'delimiter.html', foreground: '808080' },\n        { token: 'delimiter.xml', foreground: '808080' },\n        { token: 'tag', foreground: '569CD6' },\n        { token: 'tag.id.pug', foreground: '4F76AC' },\n        { token: 'tag.class.pug', foreground: '4F76AC' },\n        { token: 'meta.scss', foreground: 'A79873' },\n        { token: 'meta.tag', foreground: 'CE9178' },\n        { token: 'metatag', foreground: 'DD6A6F' },\n        { token: 'metatag.content.html', foreground: '9CDCFE' },\n        { token: 'metatag.html', foreground: '569CD6' },\n        { token: 'metatag.xml', foreground: '569CD6' },\n        { token: 'metatag.php', fontStyle: 'bold' },\n        { token: 'key', foreground: '9CDCFE' },\n        { token: 'string.key.json', foreground: '9CDCFE' },\n        { token: 'string.value.json', foreground: 'CE9178' },\n        { token: 'attribute.name', foreground: '9CDCFE' },\n        { token: 'attribute.value', foreground: 'CE9178' },\n        { token: 'attribute.value.number.css', foreground: 'B5CEA8' },\n        { token: 'attribute.value.unit.css', foreground: 'B5CEA8' },\n        { token: 'attribute.value.hex.css', foreground: 'D4D4D4' },\n        { token: 'string', foreground: 'CE9178' },\n        { token: 'string.sql', foreground: 'FF0000' },\n        { token: 'keyword', foreground: '569CD6' },\n        { token: 'keyword.flow', foreground: 'C586C0' },\n        { token: 'keyword.json', foreground: 'CE9178' },\n        { token: 'keyword.flow.scss', foreground: '569CD6' },\n        { token: 'operator.scss', foreground: '909090' },\n        { token: 'operator.sql', foreground: '778899' },\n        { token: 'operator.swift', foreground: '909090' },\n        { token: 'predefined.sql', foreground: 'FF00FF' },\n    ],\n    colors: {\n        [editorBackground]: '#1E1E1E',\n        [editorForeground]: '#D4D4D4',\n        [editorInactiveSelection]: '#3A3D41',\n        [editorIndentGuides]: '#404040',\n        [editorActiveIndentGuides]: '#707070',\n        [editorSelectionHighlight]: '#ADD6FF26'\n    }\n};\n/* -------------------------------- End vs-dark theme -------------------------------- */\n/* -------------------------------- Begin hc-black theme -------------------------------- */\nexport const hc_black = {\n    base: 'hc-black',\n    inherit: false,\n    rules: [\n        { token: '', foreground: 'FFFFFF', background: '000000' },\n        { token: 'invalid', foreground: 'f44747' },\n        { token: 'emphasis', fontStyle: 'italic' },\n        { token: 'strong', fontStyle: 'bold' },\n        { token: 'variable', foreground: '1AEBFF' },\n        { token: 'variable.parameter', foreground: '9CDCFE' },\n        { token: 'constant', foreground: '569CD6' },\n        { token: 'comment', foreground: '608B4E' },\n        { token: 'number', foreground: 'FFFFFF' },\n        { token: 'regexp', foreground: 'C0C0C0' },\n        { token: 'annotation', foreground: '569CD6' },\n        { token: 'type', foreground: '3DC9B0' },\n        { token: 'delimiter', foreground: 'FFFF00' },\n        { token: 'delimiter.html', foreground: 'FFFF00' },\n        { token: 'tag', foreground: '569CD6' },\n        { token: 'tag.id.pug', foreground: '4F76AC' },\n        { token: 'tag.class.pug', foreground: '4F76AC' },\n        { token: 'meta', foreground: 'D4D4D4' },\n        { token: 'meta.tag', foreground: 'CE9178' },\n        { token: 'metatag', foreground: '569CD6' },\n        { token: 'metatag.content.html', foreground: '1AEBFF' },\n        { token: 'metatag.html', foreground: '569CD6' },\n        { token: 'metatag.xml', foreground: '569CD6' },\n        { token: 'metatag.php', fontStyle: 'bold' },\n        { token: 'key', foreground: '9CDCFE' },\n        { token: 'string.key', foreground: '9CDCFE' },\n        { token: 'string.value', foreground: 'CE9178' },\n        { token: 'attribute.name', foreground: '569CD6' },\n        { token: 'attribute.value', foreground: '3FF23F' },\n        { token: 'string', foreground: 'CE9178' },\n        { token: 'string.sql', foreground: 'FF0000' },\n        { token: 'keyword', foreground: '569CD6' },\n        { token: 'keyword.flow', foreground: 'C586C0' },\n        { token: 'operator.sql', foreground: '778899' },\n        { token: 'operator.swift', foreground: '909090' },\n        { token: 'predefined.sql', foreground: 'FF00FF' },\n    ],\n    colors: {\n        [editorBackground]: '#000000',\n        [editorForeground]: '#FFFFFF',\n        [editorIndentGuides]: '#FFFFFF',\n        [editorActiveIndentGuides]: '#FFFFFF',\n    }\n};\n/* -------------------------------- End hc-black theme -------------------------------- */\n/* -------------------------------- Begin hc-light theme -------------------------------- */\nexport const hc_light = {\n    base: 'hc-light',\n    inherit: false,\n    rules: [\n        { token: '', foreground: '292929', background: 'FFFFFF' },\n        { token: 'invalid', foreground: 'B5200D' },\n        { token: 'emphasis', fontStyle: 'italic' },\n        { token: 'strong', fontStyle: 'bold' },\n        { token: 'variable', foreground: '264F70' },\n        { token: 'variable.predefined', foreground: '4864AA' },\n        { token: 'constant', foreground: 'dd0000' },\n        { token: 'comment', foreground: '008000' },\n        { token: 'number', foreground: '098658' },\n        { token: 'number.hex', foreground: '3030c0' },\n        { token: 'regexp', foreground: '800000' },\n        { token: 'annotation', foreground: '808080' },\n        { token: 'type', foreground: '008080' },\n        { token: 'delimiter', foreground: '000000' },\n        { token: 'delimiter.html', foreground: '383838' },\n        { token: 'tag', foreground: '800000' },\n        { token: 'tag.id.pug', foreground: '4F76AC' },\n        { token: 'tag.class.pug', foreground: '4F76AC' },\n        { token: 'meta.scss', foreground: '800000' },\n        { token: 'metatag', foreground: 'e00000' },\n        { token: 'metatag.content.html', foreground: 'B5200D' },\n        { token: 'metatag.html', foreground: '808080' },\n        { token: 'metatag.xml', foreground: '808080' },\n        { token: 'metatag.php', fontStyle: 'bold' },\n        { token: 'key', foreground: '863B00' },\n        { token: 'string.key.json', foreground: 'A31515' },\n        { token: 'string.value.json', foreground: '0451A5' },\n        { token: 'attribute.name', foreground: '264F78' },\n        { token: 'attribute.value', foreground: '0451A5' },\n        { token: 'string', foreground: 'A31515' },\n        { token: 'string.sql', foreground: 'B5200D' },\n        { token: 'keyword', foreground: '0000FF' },\n        { token: 'keyword.flow', foreground: 'AF00DB' },\n        { token: 'operator.sql', foreground: '778899' },\n        { token: 'operator.swift', foreground: '666666' },\n        { token: 'predefined.sql', foreground: 'C700C7' },\n    ],\n    colors: {\n        [editorBackground]: '#FFFFFF',\n        [editorForeground]: '#292929',\n        [editorIndentGuides]: '#292929',\n        [editorActiveIndentGuides]: '#292929',\n    }\n};\n/* -------------------------------- End hc-light theme -------------------------------- */\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../base/browser/dom.js';\nimport { addMatchMediaChangeListener } from '../../../base/browser/browser.js';\nimport { Color } from '../../../base/common/color.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { TokenizationRegistry } from '../../common/languages.js';\nimport { TokenMetadata } from '../../common/encodedTokenAttributes.js';\nimport { TokenTheme, generateTokensCSSForColorMap } from '../../common/languages/supports/tokenization.js';\nimport { hc_black, hc_light, vs, vs_dark } from '../common/themes.js';\nimport { Registry } from '../../../platform/registry/common/platform.js';\nimport { asCssVariableName, Extensions } from '../../../platform/theme/common/colorRegistry.js';\nimport { Extensions as ThemingExtensions } from '../../../platform/theme/common/themeService.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { ColorScheme, isDark, isHighContrast } from '../../../platform/theme/common/theme.js';\nimport { getIconsStyleSheet, UnthemedProductIconTheme } from '../../../platform/theme/browser/iconsStyleSheet.js';\nexport const VS_LIGHT_THEME_NAME = 'vs';\nexport const VS_DARK_THEME_NAME = 'vs-dark';\nexport const HC_BLACK_THEME_NAME = 'hc-black';\nexport const HC_LIGHT_THEME_NAME = 'hc-light';\nconst colorRegistry = Registry.as(Extensions.ColorContribution);\nconst themingRegistry = Registry.as(ThemingExtensions.ThemingContribution);\nclass StandaloneTheme {\n    constructor(name, standaloneThemeData) {\n        this.semanticHighlighting = false;\n        this.themeData = standaloneThemeData;\n        const base = standaloneThemeData.base;\n        if (name.length > 0) {\n            if (isBuiltinTheme(name)) {\n                this.id = name;\n            }\n            else {\n                this.id = base + ' ' + name;\n            }\n            this.themeName = name;\n        }\n        else {\n            this.id = base;\n            this.themeName = base;\n        }\n        this.colors = null;\n        this.defaultColors = Object.create(null);\n        this._tokenTheme = null;\n    }\n    get base() {\n        return this.themeData.base;\n    }\n    notifyBaseUpdated() {\n        if (this.themeData.inherit) {\n            this.colors = null;\n            this._tokenTheme = null;\n        }\n    }\n    getColors() {\n        if (!this.colors) {\n            const colors = new Map();\n            for (const id in this.themeData.colors) {\n                colors.set(id, Color.fromHex(this.themeData.colors[id]));\n            }\n            if (this.themeData.inherit) {\n                const baseData = getBuiltinRules(this.themeData.base);\n                for (const id in baseData.colors) {\n                    if (!colors.has(id)) {\n                        colors.set(id, Color.fromHex(baseData.colors[id]));\n                    }\n                }\n            }\n            this.colors = colors;\n        }\n        return this.colors;\n    }\n    getColor(colorId, useDefault) {\n        const color = this.getColors().get(colorId);\n        if (color) {\n            return color;\n        }\n        if (useDefault !== false) {\n            return this.getDefault(colorId);\n        }\n        return undefined;\n    }\n    getDefault(colorId) {\n        let color = this.defaultColors[colorId];\n        if (color) {\n            return color;\n        }\n        color = colorRegistry.resolveDefaultColor(colorId, this);\n        this.defaultColors[colorId] = color;\n        return color;\n    }\n    defines(colorId) {\n        return Object.prototype.hasOwnProperty.call(this.getColors(), colorId);\n    }\n    get type() {\n        switch (this.base) {\n            case VS_LIGHT_THEME_NAME: return ColorScheme.LIGHT;\n            case HC_BLACK_THEME_NAME: return ColorScheme.HIGH_CONTRAST_DARK;\n            case HC_LIGHT_THEME_NAME: return ColorScheme.HIGH_CONTRAST_LIGHT;\n            default: return ColorScheme.DARK;\n        }\n    }\n    get tokenTheme() {\n        if (!this._tokenTheme) {\n            let rules = [];\n            let encodedTokensColors = [];\n            if (this.themeData.inherit) {\n                const baseData = getBuiltinRules(this.themeData.base);\n                rules = baseData.rules;\n                if (baseData.encodedTokensColors) {\n                    encodedTokensColors = baseData.encodedTokensColors;\n                }\n            }\n            // Pick up default colors from `editor.foreground` and `editor.background` if available\n            const editorForeground = this.themeData.colors['editor.foreground'];\n            const editorBackground = this.themeData.colors['editor.background'];\n            if (editorForeground || editorBackground) {\n                const rule = { token: '' };\n                if (editorForeground) {\n                    rule.foreground = editorForeground;\n                }\n                if (editorBackground) {\n                    rule.background = editorBackground;\n                }\n                rules.push(rule);\n            }\n            rules = rules.concat(this.themeData.rules);\n            if (this.themeData.encodedTokensColors) {\n                encodedTokensColors = this.themeData.encodedTokensColors;\n            }\n            this._tokenTheme = TokenTheme.createFromRawTokenTheme(rules, encodedTokensColors);\n        }\n        return this._tokenTheme;\n    }\n    getTokenStyleMetadata(type, modifiers, modelLanguage) {\n        // use theme rules match\n        const style = this.tokenTheme._match([type].concat(modifiers).join('.'));\n        const metadata = style.metadata;\n        const foreground = TokenMetadata.getForeground(metadata);\n        const fontStyle = TokenMetadata.getFontStyle(metadata);\n        return {\n            foreground: foreground,\n            italic: Boolean(fontStyle & 1 /* FontStyle.Italic */),\n            bold: Boolean(fontStyle & 2 /* FontStyle.Bold */),\n            underline: Boolean(fontStyle & 4 /* FontStyle.Underline */),\n            strikethrough: Boolean(fontStyle & 8 /* FontStyle.Strikethrough */)\n        };\n    }\n}\nfunction isBuiltinTheme(themeName) {\n    return (themeName === VS_LIGHT_THEME_NAME\n        || themeName === VS_DARK_THEME_NAME\n        || themeName === HC_BLACK_THEME_NAME\n        || themeName === HC_LIGHT_THEME_NAME);\n}\nfunction getBuiltinRules(builtinTheme) {\n    switch (builtinTheme) {\n        case VS_LIGHT_THEME_NAME:\n            return vs;\n        case VS_DARK_THEME_NAME:\n            return vs_dark;\n        case HC_BLACK_THEME_NAME:\n            return hc_black;\n        case HC_LIGHT_THEME_NAME:\n            return hc_light;\n    }\n}\nfunction newBuiltInTheme(builtinTheme) {\n    const themeData = getBuiltinRules(builtinTheme);\n    return new StandaloneTheme(builtinTheme, themeData);\n}\nexport class StandaloneThemeService extends Disposable {\n    constructor() {\n        super();\n        this._onColorThemeChange = this._register(new Emitter());\n        this.onDidColorThemeChange = this._onColorThemeChange.event;\n        this._onProductIconThemeChange = this._register(new Emitter());\n        this.onDidProductIconThemeChange = this._onProductIconThemeChange.event;\n        this._environment = Object.create(null);\n        this._builtInProductIconTheme = new UnthemedProductIconTheme();\n        this._autoDetectHighContrast = true;\n        this._knownThemes = new Map();\n        this._knownThemes.set(VS_LIGHT_THEME_NAME, newBuiltInTheme(VS_LIGHT_THEME_NAME));\n        this._knownThemes.set(VS_DARK_THEME_NAME, newBuiltInTheme(VS_DARK_THEME_NAME));\n        this._knownThemes.set(HC_BLACK_THEME_NAME, newBuiltInTheme(HC_BLACK_THEME_NAME));\n        this._knownThemes.set(HC_LIGHT_THEME_NAME, newBuiltInTheme(HC_LIGHT_THEME_NAME));\n        const iconsStyleSheet = getIconsStyleSheet(this);\n        this._codiconCSS = iconsStyleSheet.getCSS();\n        this._themeCSS = '';\n        this._allCSS = `${this._codiconCSS}\\n${this._themeCSS}`;\n        this._globalStyleElement = null;\n        this._styleElements = [];\n        this._colorMapOverride = null;\n        this.setTheme(VS_LIGHT_THEME_NAME);\n        this._onOSSchemeChanged();\n        iconsStyleSheet.onDidChange(() => {\n            this._codiconCSS = iconsStyleSheet.getCSS();\n            this._updateCSS();\n        });\n        addMatchMediaChangeListener('(forced-colors: active)', () => {\n            this._onOSSchemeChanged();\n        });\n    }\n    registerEditorContainer(domNode) {\n        if (dom.isInShadowDOM(domNode)) {\n            return this._registerShadowDomContainer(domNode);\n        }\n        return this._registerRegularEditorContainer();\n    }\n    _registerRegularEditorContainer() {\n        if (!this._globalStyleElement) {\n            this._globalStyleElement = dom.createStyleSheet();\n            this._globalStyleElement.className = 'monaco-colors';\n            this._globalStyleElement.textContent = this._allCSS;\n            this._styleElements.push(this._globalStyleElement);\n        }\n        return Disposable.None;\n    }\n    _registerShadowDomContainer(domNode) {\n        const styleElement = dom.createStyleSheet(domNode);\n        styleElement.className = 'monaco-colors';\n        styleElement.textContent = this._allCSS;\n        this._styleElements.push(styleElement);\n        return {\n            dispose: () => {\n                for (let i = 0; i < this._styleElements.length; i++) {\n                    if (this._styleElements[i] === styleElement) {\n                        this._styleElements.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n        };\n    }\n    defineTheme(themeName, themeData) {\n        if (!/^[a-z0-9\\-]+$/i.test(themeName)) {\n            throw new Error('Illegal theme name!');\n        }\n        if (!isBuiltinTheme(themeData.base) && !isBuiltinTheme(themeName)) {\n            throw new Error('Illegal theme base!');\n        }\n        // set or replace theme\n        this._knownThemes.set(themeName, new StandaloneTheme(themeName, themeData));\n        if (isBuiltinTheme(themeName)) {\n            this._knownThemes.forEach(theme => {\n                if (theme.base === themeName) {\n                    theme.notifyBaseUpdated();\n                }\n            });\n        }\n        if (this._theme.themeName === themeName) {\n            this.setTheme(themeName); // refresh theme\n        }\n    }\n    getColorTheme() {\n        return this._theme;\n    }\n    setColorMapOverride(colorMapOverride) {\n        this._colorMapOverride = colorMapOverride;\n        this._updateThemeOrColorMap();\n    }\n    setTheme(themeName) {\n        let theme;\n        if (this._knownThemes.has(themeName)) {\n            theme = this._knownThemes.get(themeName);\n        }\n        else {\n            theme = this._knownThemes.get(VS_LIGHT_THEME_NAME);\n        }\n        this._updateActualTheme(theme);\n    }\n    _updateActualTheme(desiredTheme) {\n        if (!desiredTheme || this._theme === desiredTheme) {\n            // Nothing to do\n            return;\n        }\n        this._theme = desiredTheme;\n        this._updateThemeOrColorMap();\n    }\n    _onOSSchemeChanged() {\n        if (this._autoDetectHighContrast) {\n            const wantsHighContrast = window.matchMedia(`(forced-colors: active)`).matches;\n            if (wantsHighContrast !== isHighContrast(this._theme.type)) {\n                // switch to high contrast or non-high contrast but stick to dark or light\n                let newThemeName;\n                if (isDark(this._theme.type)) {\n                    newThemeName = wantsHighContrast ? HC_BLACK_THEME_NAME : VS_DARK_THEME_NAME;\n                }\n                else {\n                    newThemeName = wantsHighContrast ? HC_LIGHT_THEME_NAME : VS_LIGHT_THEME_NAME;\n                }\n                this._updateActualTheme(this._knownThemes.get(newThemeName));\n            }\n        }\n    }\n    setAutoDetectHighContrast(autoDetectHighContrast) {\n        this._autoDetectHighContrast = autoDetectHighContrast;\n        this._onOSSchemeChanged();\n    }\n    _updateThemeOrColorMap() {\n        const cssRules = [];\n        const hasRule = {};\n        const ruleCollector = {\n            addRule: (rule) => {\n                if (!hasRule[rule]) {\n                    cssRules.push(rule);\n                    hasRule[rule] = true;\n                }\n            }\n        };\n        themingRegistry.getThemingParticipants().forEach(p => p(this._theme, ruleCollector, this._environment));\n        const colorVariables = [];\n        for (const item of colorRegistry.getColors()) {\n            const color = this._theme.getColor(item.id, true);\n            if (color) {\n                colorVariables.push(`${asCssVariableName(item.id)}: ${color.toString()};`);\n            }\n        }\n        ruleCollector.addRule(`.monaco-editor { ${colorVariables.join('\\n')} }`);\n        const colorMap = this._colorMapOverride || this._theme.tokenTheme.getColorMap();\n        ruleCollector.addRule(generateTokensCSSForColorMap(colorMap));\n        this._themeCSS = cssRules.join('\\n');\n        this._updateCSS();\n        TokenizationRegistry.setColorMap(colorMap);\n        this._onColorThemeChange.fire(this._theme);\n    }\n    _updateCSS() {\n        this._allCSS = `${this._codiconCSS}\\n${this._themeCSS}`;\n        this._styleElements.forEach(styleElement => styleElement.textContent = this._allCSS);\n    }\n    getFileIconTheme() {\n        return {\n            hasFileIcons: false,\n            hasFolderIcons: false,\n            hidesExplorerArrows: false\n        };\n    }\n    getProductIconTheme() {\n        return this._builtInProductIconTheme;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { IStandaloneThemeService } from '../../common/standaloneTheme.js';\nimport { ToggleHighContrastNLS } from '../../../common/standaloneStrings.js';\nimport { isDark, isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { HC_BLACK_THEME_NAME, HC_LIGHT_THEME_NAME, VS_DARK_THEME_NAME, VS_LIGHT_THEME_NAME } from '../standaloneThemeService.js';\nclass ToggleHighContrast extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.toggleHighContrast',\n            label: ToggleHighContrastNLS.toggleHighContrast,\n            alias: 'Toggle High Contrast Theme',\n            precondition: undefined\n        });\n        this._originalThemeName = null;\n    }\n    run(accessor, editor) {\n        const standaloneThemeService = accessor.get(IStandaloneThemeService);\n        const currentTheme = standaloneThemeService.getColorTheme();\n        if (isHighContrast(currentTheme.type)) {\n            // We must toggle back to the integrator's theme\n            standaloneThemeService.setTheme(this._originalThemeName || (isDark(currentTheme.type) ? VS_DARK_THEME_NAME : VS_LIGHT_THEME_NAME));\n            this._originalThemeName = null;\n        }\n        else {\n            standaloneThemeService.setTheme(isDark(currentTheme.type) ? HC_BLACK_THEME_NAME : HC_LIGHT_THEME_NAME);\n            this._originalThemeName = currentTheme.themeName;\n        }\n    }\n}\nregisterEditorAction(ToggleHighContrast);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function isFuzzyActionArr(what) {\n    return (Array.isArray(what));\n}\nexport function isFuzzyAction(what) {\n    return !isFuzzyActionArr(what);\n}\nexport function isString(what) {\n    return (typeof what === 'string');\n}\nexport function isIAction(what) {\n    return !isString(what);\n}\n// Small helper functions\n/**\n * Is a string null, undefined, or empty?\n */\nexport function empty(s) {\n    return (s ? false : true);\n}\n/**\n * Puts a string to lower case if 'ignoreCase' is set.\n */\nexport function fixCase(lexer, str) {\n    return (lexer.ignoreCase && str ? str.toLowerCase() : str);\n}\n/**\n * Ensures there are no bad characters in a CSS token class.\n */\nexport function sanitize(s) {\n    return s.replace(/[&<>'\"_]/g, '-'); // used on all output token CSS classes\n}\n// Logging\n/**\n * Logs a message.\n */\nexport function log(lexer, msg) {\n    console.log(`${lexer.languageId}: ${msg}`);\n}\n// Throwing errors\nexport function createError(lexer, msg) {\n    return new Error(`${lexer.languageId}: ${msg}`);\n}\n// Helper functions for rule finding and substitution\n/**\n * substituteMatches is used on lexer strings and can substitutes predefined patterns:\n * \t\t$$  => $\n * \t\t$#  => id\n * \t\t$n  => matched entry n\n * \t\t@attr => contents of lexer[attr]\n *\n * See documentation for more info\n */\nexport function substituteMatches(lexer, str, id, matches, state) {\n    const re = /\\$((\\$)|(#)|(\\d\\d?)|[sS](\\d\\d?)|@(\\w+))/g;\n    let stateMatches = null;\n    return str.replace(re, function (full, sub, dollar, hash, n, s, attr, ofs, total) {\n        if (!empty(dollar)) {\n            return '$'; // $$\n        }\n        if (!empty(hash)) {\n            return fixCase(lexer, id); // default $#\n        }\n        if (!empty(n) && n < matches.length) {\n            return fixCase(lexer, matches[n]); // $n\n        }\n        if (!empty(attr) && lexer && typeof (lexer[attr]) === 'string') {\n            return lexer[attr]; //@attribute\n        }\n        if (stateMatches === null) { // split state on demand\n            stateMatches = state.split('.');\n            stateMatches.unshift(state);\n        }\n        if (!empty(s) && s < stateMatches.length) {\n            return fixCase(lexer, stateMatches[s]); //$Sn\n        }\n        return '';\n    });\n}\n/**\n * Find the tokenizer rules for a specific state (i.e. next action)\n */\nexport function findRules(lexer, inState) {\n    let state = inState;\n    while (state && state.length > 0) {\n        const rules = lexer.tokenizer[state];\n        if (rules) {\n            return rules;\n        }\n        const idx = state.lastIndexOf('.');\n        if (idx < 0) {\n            state = null; // no further parent\n        }\n        else {\n            state = state.substr(0, idx);\n        }\n    }\n    return null;\n}\n/**\n * Is a certain state defined? In contrast to 'findRules' this works on a ILexerMin.\n * This is used during compilation where we may know the defined states\n * but not yet whether the corresponding rules are correct.\n */\nexport function stateExists(lexer, inState) {\n    let state = inState;\n    while (state && state.length > 0) {\n        const exist = lexer.stateNames[state];\n        if (exist) {\n            return true;\n        }\n        const idx = state.lastIndexOf('.');\n        if (idx < 0) {\n            state = null; // no further parent\n        }\n        else {\n            state = state.substr(0, idx);\n        }\n    }\n    return false;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as languages from '../../../common/languages.js';\nimport { NullState, nullTokenizeEncoded, nullTokenize } from '../../../common/languages/nullTokenize.js';\nimport * as monarchCommon from './monarchCommon.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nconst CACHE_STACK_DEPTH = 5;\n/**\n * Reuse the same stack elements up to a certain depth.\n */\nclass MonarchStackElementFactory {\n    constructor(maxCacheDepth) {\n        this._maxCacheDepth = maxCacheDepth;\n        this._entries = Object.create(null);\n    }\n    static create(parent, state) {\n        return this._INSTANCE.create(parent, state);\n    }\n    create(parent, state) {\n        if (parent !== null && parent.depth >= this._maxCacheDepth) {\n            // no caching above a certain depth\n            return new MonarchStackElement(parent, state);\n        }\n        let stackElementId = MonarchStackElement.getStackElementId(parent);\n        if (stackElementId.length > 0) {\n            stackElementId += '|';\n        }\n        stackElementId += state;\n        let result = this._entries[stackElementId];\n        if (result) {\n            return result;\n        }\n        result = new MonarchStackElement(parent, state);\n        this._entries[stackElementId] = result;\n        return result;\n    }\n}\nMonarchStackElementFactory._INSTANCE = new MonarchStackElementFactory(CACHE_STACK_DEPTH);\nclass MonarchStackElement {\n    constructor(parent, state) {\n        this.parent = parent;\n        this.state = state;\n        this.depth = (this.parent ? this.parent.depth : 0) + 1;\n    }\n    static getStackElementId(element) {\n        let result = '';\n        while (element !== null) {\n            if (result.length > 0) {\n                result += '|';\n            }\n            result += element.state;\n            element = element.parent;\n        }\n        return result;\n    }\n    static _equals(a, b) {\n        while (a !== null && b !== null) {\n            if (a === b) {\n                return true;\n            }\n            if (a.state !== b.state) {\n                return false;\n            }\n            a = a.parent;\n            b = b.parent;\n        }\n        if (a === null && b === null) {\n            return true;\n        }\n        return false;\n    }\n    equals(other) {\n        return MonarchStackElement._equals(this, other);\n    }\n    push(state) {\n        return MonarchStackElementFactory.create(this, state);\n    }\n    pop() {\n        return this.parent;\n    }\n    popall() {\n        let result = this;\n        while (result.parent) {\n            result = result.parent;\n        }\n        return result;\n    }\n    switchTo(state) {\n        return MonarchStackElementFactory.create(this.parent, state);\n    }\n}\nclass EmbeddedLanguageData {\n    constructor(languageId, state) {\n        this.languageId = languageId;\n        this.state = state;\n    }\n    equals(other) {\n        return (this.languageId === other.languageId\n            && this.state.equals(other.state));\n    }\n    clone() {\n        const stateClone = this.state.clone();\n        // save an object\n        if (stateClone === this.state) {\n            return this;\n        }\n        return new EmbeddedLanguageData(this.languageId, this.state);\n    }\n}\n/**\n * Reuse the same line states up to a certain depth.\n */\nclass MonarchLineStateFactory {\n    constructor(maxCacheDepth) {\n        this._maxCacheDepth = maxCacheDepth;\n        this._entries = Object.create(null);\n    }\n    static create(stack, embeddedLanguageData) {\n        return this._INSTANCE.create(stack, embeddedLanguageData);\n    }\n    create(stack, embeddedLanguageData) {\n        if (embeddedLanguageData !== null) {\n            // no caching when embedding\n            return new MonarchLineState(stack, embeddedLanguageData);\n        }\n        if (stack !== null && stack.depth >= this._maxCacheDepth) {\n            // no caching above a certain depth\n            return new MonarchLineState(stack, embeddedLanguageData);\n        }\n        const stackElementId = MonarchStackElement.getStackElementId(stack);\n        let result = this._entries[stackElementId];\n        if (result) {\n            return result;\n        }\n        result = new MonarchLineState(stack, null);\n        this._entries[stackElementId] = result;\n        return result;\n    }\n}\nMonarchLineStateFactory._INSTANCE = new MonarchLineStateFactory(CACHE_STACK_DEPTH);\nclass MonarchLineState {\n    constructor(stack, embeddedLanguageData) {\n        this.stack = stack;\n        this.embeddedLanguageData = embeddedLanguageData;\n    }\n    clone() {\n        const embeddedlanguageDataClone = this.embeddedLanguageData ? this.embeddedLanguageData.clone() : null;\n        // save an object\n        if (embeddedlanguageDataClone === this.embeddedLanguageData) {\n            return this;\n        }\n        return MonarchLineStateFactory.create(this.stack, this.embeddedLanguageData);\n    }\n    equals(other) {\n        if (!(other instanceof MonarchLineState)) {\n            return false;\n        }\n        if (!this.stack.equals(other.stack)) {\n            return false;\n        }\n        if (this.embeddedLanguageData === null && other.embeddedLanguageData === null) {\n            return true;\n        }\n        if (this.embeddedLanguageData === null || other.embeddedLanguageData === null) {\n            return false;\n        }\n        return this.embeddedLanguageData.equals(other.embeddedLanguageData);\n    }\n}\nclass MonarchClassicTokensCollector {\n    constructor() {\n        this._tokens = [];\n        this._languageId = null;\n        this._lastTokenType = null;\n        this._lastTokenLanguage = null;\n    }\n    enterLanguage(languageId) {\n        this._languageId = languageId;\n    }\n    emit(startOffset, type) {\n        if (this._lastTokenType === type && this._lastTokenLanguage === this._languageId) {\n            return;\n        }\n        this._lastTokenType = type;\n        this._lastTokenLanguage = this._languageId;\n        this._tokens.push(new languages.Token(startOffset, type, this._languageId));\n    }\n    nestedLanguageTokenize(embeddedLanguageLine, hasEOL, embeddedLanguageData, offsetDelta) {\n        const nestedLanguageId = embeddedLanguageData.languageId;\n        const embeddedModeState = embeddedLanguageData.state;\n        const nestedLanguageTokenizationSupport = languages.TokenizationRegistry.get(nestedLanguageId);\n        if (!nestedLanguageTokenizationSupport) {\n            this.enterLanguage(nestedLanguageId);\n            this.emit(offsetDelta, '');\n            return embeddedModeState;\n        }\n        const nestedResult = nestedLanguageTokenizationSupport.tokenize(embeddedLanguageLine, hasEOL, embeddedModeState);\n        if (offsetDelta !== 0) {\n            for (const token of nestedResult.tokens) {\n                this._tokens.push(new languages.Token(token.offset + offsetDelta, token.type, token.language));\n            }\n        }\n        else {\n            this._tokens = this._tokens.concat(nestedResult.tokens);\n        }\n        this._lastTokenType = null;\n        this._lastTokenLanguage = null;\n        this._languageId = null;\n        return nestedResult.endState;\n    }\n    finalize(endState) {\n        return new languages.TokenizationResult(this._tokens, endState);\n    }\n}\nclass MonarchModernTokensCollector {\n    constructor(languageService, theme) {\n        this._languageService = languageService;\n        this._theme = theme;\n        this._prependTokens = null;\n        this._tokens = [];\n        this._currentLanguageId = 0 /* LanguageId.Null */;\n        this._lastTokenMetadata = 0;\n    }\n    enterLanguage(languageId) {\n        this._currentLanguageId = this._languageService.languageIdCodec.encodeLanguageId(languageId);\n    }\n    emit(startOffset, type) {\n        const metadata = this._theme.match(this._currentLanguageId, type);\n        if (this._lastTokenMetadata === metadata) {\n            return;\n        }\n        this._lastTokenMetadata = metadata;\n        this._tokens.push(startOffset);\n        this._tokens.push(metadata);\n    }\n    static _merge(a, b, c) {\n        const aLen = (a !== null ? a.length : 0);\n        const bLen = b.length;\n        const cLen = (c !== null ? c.length : 0);\n        if (aLen === 0 && bLen === 0 && cLen === 0) {\n            return new Uint32Array(0);\n        }\n        if (aLen === 0 && bLen === 0) {\n            return c;\n        }\n        if (bLen === 0 && cLen === 0) {\n            return a;\n        }\n        const result = new Uint32Array(aLen + bLen + cLen);\n        if (a !== null) {\n            result.set(a);\n        }\n        for (let i = 0; i < bLen; i++) {\n            result[aLen + i] = b[i];\n        }\n        if (c !== null) {\n            result.set(c, aLen + bLen);\n        }\n        return result;\n    }\n    nestedLanguageTokenize(embeddedLanguageLine, hasEOL, embeddedLanguageData, offsetDelta) {\n        const nestedLanguageId = embeddedLanguageData.languageId;\n        const embeddedModeState = embeddedLanguageData.state;\n        const nestedLanguageTokenizationSupport = languages.TokenizationRegistry.get(nestedLanguageId);\n        if (!nestedLanguageTokenizationSupport) {\n            this.enterLanguage(nestedLanguageId);\n            this.emit(offsetDelta, '');\n            return embeddedModeState;\n        }\n        const nestedResult = nestedLanguageTokenizationSupport.tokenizeEncoded(embeddedLanguageLine, hasEOL, embeddedModeState);\n        if (offsetDelta !== 0) {\n            for (let i = 0, len = nestedResult.tokens.length; i < len; i += 2) {\n                nestedResult.tokens[i] += offsetDelta;\n            }\n        }\n        this._prependTokens = MonarchModernTokensCollector._merge(this._prependTokens, this._tokens, nestedResult.tokens);\n        this._tokens = [];\n        this._currentLanguageId = 0;\n        this._lastTokenMetadata = 0;\n        return nestedResult.endState;\n    }\n    finalize(endState) {\n        return new languages.EncodedTokenizationResult(MonarchModernTokensCollector._merge(this._prependTokens, this._tokens, null), endState);\n    }\n}\nlet MonarchTokenizer = class MonarchTokenizer {\n    constructor(languageService, standaloneThemeService, languageId, lexer, _configurationService) {\n        this._configurationService = _configurationService;\n        this._languageService = languageService;\n        this._standaloneThemeService = standaloneThemeService;\n        this._languageId = languageId;\n        this._lexer = lexer;\n        this._embeddedLanguages = Object.create(null);\n        this.embeddedLoaded = Promise.resolve(undefined);\n        // Set up listening for embedded modes\n        let emitting = false;\n        this._tokenizationRegistryListener = languages.TokenizationRegistry.onDidChange((e) => {\n            if (emitting) {\n                return;\n            }\n            let isOneOfMyEmbeddedModes = false;\n            for (let i = 0, len = e.changedLanguages.length; i < len; i++) {\n                const language = e.changedLanguages[i];\n                if (this._embeddedLanguages[language]) {\n                    isOneOfMyEmbeddedModes = true;\n                    break;\n                }\n            }\n            if (isOneOfMyEmbeddedModes) {\n                emitting = true;\n                languages.TokenizationRegistry.fire([this._languageId]);\n                emitting = false;\n            }\n        });\n        this._maxTokenizationLineLength = this._configurationService.getValue('editor.maxTokenizationLineLength', {\n            overrideIdentifier: this._languageId\n        });\n        this._configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration('editor.maxTokenizationLineLength')) {\n                this._maxTokenizationLineLength = this._configurationService.getValue('editor.maxTokenizationLineLength', {\n                    overrideIdentifier: this._languageId\n                });\n            }\n        });\n    }\n    dispose() {\n        this._tokenizationRegistryListener.dispose();\n    }\n    getLoadStatus() {\n        const promises = [];\n        for (const nestedLanguageId in this._embeddedLanguages) {\n            const tokenizationSupport = languages.TokenizationRegistry.get(nestedLanguageId);\n            if (tokenizationSupport) {\n                // The nested language is already loaded\n                if (tokenizationSupport instanceof MonarchTokenizer) {\n                    const nestedModeStatus = tokenizationSupport.getLoadStatus();\n                    if (nestedModeStatus.loaded === false) {\n                        promises.push(nestedModeStatus.promise);\n                    }\n                }\n                continue;\n            }\n            if (!languages.TokenizationRegistry.isResolved(nestedLanguageId)) {\n                // The nested language is in the process of being loaded\n                promises.push(languages.TokenizationRegistry.getOrCreate(nestedLanguageId));\n            }\n        }\n        if (promises.length === 0) {\n            return {\n                loaded: true\n            };\n        }\n        return {\n            loaded: false,\n            promise: Promise.all(promises).then(_ => undefined)\n        };\n    }\n    getInitialState() {\n        const rootState = MonarchStackElementFactory.create(null, this._lexer.start);\n        return MonarchLineStateFactory.create(rootState, null);\n    }\n    tokenize(line, hasEOL, lineState) {\n        if (line.length >= this._maxTokenizationLineLength) {\n            return nullTokenize(this._languageId, lineState);\n        }\n        const tokensCollector = new MonarchClassicTokensCollector();\n        const endLineState = this._tokenize(line, hasEOL, lineState, tokensCollector);\n        return tokensCollector.finalize(endLineState);\n    }\n    tokenizeEncoded(line, hasEOL, lineState) {\n        if (line.length >= this._maxTokenizationLineLength) {\n            return nullTokenizeEncoded(this._languageService.languageIdCodec.encodeLanguageId(this._languageId), lineState);\n        }\n        const tokensCollector = new MonarchModernTokensCollector(this._languageService, this._standaloneThemeService.getColorTheme().tokenTheme);\n        const endLineState = this._tokenize(line, hasEOL, lineState, tokensCollector);\n        return tokensCollector.finalize(endLineState);\n    }\n    _tokenize(line, hasEOL, lineState, collector) {\n        if (lineState.embeddedLanguageData) {\n            return this._nestedTokenize(line, hasEOL, lineState, 0, collector);\n        }\n        else {\n            return this._myTokenize(line, hasEOL, lineState, 0, collector);\n        }\n    }\n    _findLeavingNestedLanguageOffset(line, state) {\n        let rules = this._lexer.tokenizer[state.stack.state];\n        if (!rules) {\n            rules = monarchCommon.findRules(this._lexer, state.stack.state); // do parent matching\n            if (!rules) {\n                throw monarchCommon.createError(this._lexer, 'tokenizer state is not defined: ' + state.stack.state);\n            }\n        }\n        let popOffset = -1;\n        let hasEmbeddedPopRule = false;\n        for (const rule of rules) {\n            if (!monarchCommon.isIAction(rule.action) || rule.action.nextEmbedded !== '@pop') {\n                continue;\n            }\n            hasEmbeddedPopRule = true;\n            let regex = rule.regex;\n            const regexSource = rule.regex.source;\n            if (regexSource.substr(0, 4) === '^(?:' && regexSource.substr(regexSource.length - 1, 1) === ')') {\n                const flags = (regex.ignoreCase ? 'i' : '') + (regex.unicode ? 'u' : '');\n                regex = new RegExp(regexSource.substr(4, regexSource.length - 5), flags);\n            }\n            const result = line.search(regex);\n            if (result === -1 || (result !== 0 && rule.matchOnlyAtLineStart)) {\n                continue;\n            }\n            if (popOffset === -1 || result < popOffset) {\n                popOffset = result;\n            }\n        }\n        if (!hasEmbeddedPopRule) {\n            throw monarchCommon.createError(this._lexer, 'no rule containing nextEmbedded: \"@pop\" in tokenizer embedded state: ' + state.stack.state);\n        }\n        return popOffset;\n    }\n    _nestedTokenize(line, hasEOL, lineState, offsetDelta, tokensCollector) {\n        const popOffset = this._findLeavingNestedLanguageOffset(line, lineState);\n        if (popOffset === -1) {\n            // tokenization will not leave nested language\n            const nestedEndState = tokensCollector.nestedLanguageTokenize(line, hasEOL, lineState.embeddedLanguageData, offsetDelta);\n            return MonarchLineStateFactory.create(lineState.stack, new EmbeddedLanguageData(lineState.embeddedLanguageData.languageId, nestedEndState));\n        }\n        const nestedLanguageLine = line.substring(0, popOffset);\n        if (nestedLanguageLine.length > 0) {\n            // tokenize with the nested language\n            tokensCollector.nestedLanguageTokenize(nestedLanguageLine, false, lineState.embeddedLanguageData, offsetDelta);\n        }\n        const restOfTheLine = line.substring(popOffset);\n        return this._myTokenize(restOfTheLine, hasEOL, lineState, offsetDelta + popOffset, tokensCollector);\n    }\n    _safeRuleName(rule) {\n        if (rule) {\n            return rule.name;\n        }\n        return '(unknown)';\n    }\n    _myTokenize(lineWithoutLF, hasEOL, lineState, offsetDelta, tokensCollector) {\n        tokensCollector.enterLanguage(this._languageId);\n        const lineWithoutLFLength = lineWithoutLF.length;\n        const line = (hasEOL && this._lexer.includeLF ? lineWithoutLF + '\\n' : lineWithoutLF);\n        const lineLength = line.length;\n        let embeddedLanguageData = lineState.embeddedLanguageData;\n        let stack = lineState.stack;\n        let pos = 0;\n        let groupMatching = null;\n        // See https://github.com/microsoft/monaco-editor/issues/1235\n        // Evaluate rules at least once for an empty line\n        let forceEvaluation = true;\n        while (forceEvaluation || pos < lineLength) {\n            const pos0 = pos;\n            const stackLen0 = stack.depth;\n            const groupLen0 = groupMatching ? groupMatching.groups.length : 0;\n            const state = stack.state;\n            let matches = null;\n            let matched = null;\n            let action = null;\n            let rule = null;\n            let enteringEmbeddedLanguage = null;\n            // check if we need to process group matches first\n            if (groupMatching) {\n                matches = groupMatching.matches;\n                const groupEntry = groupMatching.groups.shift();\n                matched = groupEntry.matched;\n                action = groupEntry.action;\n                rule = groupMatching.rule;\n                // cleanup if necessary\n                if (groupMatching.groups.length === 0) {\n                    groupMatching = null;\n                }\n            }\n            else {\n                // otherwise we match on the token stream\n                if (!forceEvaluation && pos >= lineLength) {\n                    // nothing to do\n                    break;\n                }\n                forceEvaluation = false;\n                // get the rules for this state\n                let rules = this._lexer.tokenizer[state];\n                if (!rules) {\n                    rules = monarchCommon.findRules(this._lexer, state); // do parent matching\n                    if (!rules) {\n                        throw monarchCommon.createError(this._lexer, 'tokenizer state is not defined: ' + state);\n                    }\n                }\n                // try each rule until we match\n                const restOfLine = line.substr(pos);\n                for (const rule of rules) {\n                    if (pos === 0 || !rule.matchOnlyAtLineStart) {\n                        matches = restOfLine.match(rule.regex);\n                        if (matches) {\n                            matched = matches[0];\n                            action = rule.action;\n                            break;\n                        }\n                    }\n                }\n            }\n            // We matched 'rule' with 'matches' and 'action'\n            if (!matches) {\n                matches = [''];\n                matched = '';\n            }\n            if (!action) {\n                // bad: we didn't match anything, and there is no action to take\n                // we need to advance the stream or we get progress trouble\n                if (pos < lineLength) {\n                    matches = [line.charAt(pos)];\n                    matched = matches[0];\n                }\n                action = this._lexer.defaultToken;\n            }\n            if (matched === null) {\n                // should never happen, needed for strict null checking\n                break;\n            }\n            // advance stream\n            pos += matched.length;\n            // maybe call action function (used for 'cases')\n            while (monarchCommon.isFuzzyAction(action) && monarchCommon.isIAction(action) && action.test) {\n                action = action.test(matched, matches, state, pos === lineLength);\n            }\n            let result = null;\n            // set the result: either a string or an array of actions\n            if (typeof action === 'string' || Array.isArray(action)) {\n                result = action;\n            }\n            else if (action.group) {\n                result = action.group;\n            }\n            else if (action.token !== null && action.token !== undefined) {\n                // do $n replacements?\n                if (action.tokenSubst) {\n                    result = monarchCommon.substituteMatches(this._lexer, action.token, matched, matches, state);\n                }\n                else {\n                    result = action.token;\n                }\n                // enter embedded language?\n                if (action.nextEmbedded) {\n                    if (action.nextEmbedded === '@pop') {\n                        if (!embeddedLanguageData) {\n                            throw monarchCommon.createError(this._lexer, 'cannot pop embedded language if not inside one');\n                        }\n                        embeddedLanguageData = null;\n                    }\n                    else if (embeddedLanguageData) {\n                        throw monarchCommon.createError(this._lexer, 'cannot enter embedded language from within an embedded language');\n                    }\n                    else {\n                        enteringEmbeddedLanguage = monarchCommon.substituteMatches(this._lexer, action.nextEmbedded, matched, matches, state);\n                    }\n                }\n                // state transformations\n                if (action.goBack) { // back up the stream..\n                    pos = Math.max(0, pos - action.goBack);\n                }\n                if (action.switchTo && typeof action.switchTo === 'string') {\n                    let nextState = monarchCommon.substituteMatches(this._lexer, action.switchTo, matched, matches, state); // switch state without a push...\n                    if (nextState[0] === '@') {\n                        nextState = nextState.substr(1); // peel off starting '@'\n                    }\n                    if (!monarchCommon.findRules(this._lexer, nextState)) {\n                        throw monarchCommon.createError(this._lexer, 'trying to switch to a state \\'' + nextState + '\\' that is undefined in rule: ' + this._safeRuleName(rule));\n                    }\n                    else {\n                        stack = stack.switchTo(nextState);\n                    }\n                }\n                else if (action.transform && typeof action.transform === 'function') {\n                    throw monarchCommon.createError(this._lexer, 'action.transform not supported');\n                }\n                else if (action.next) {\n                    if (action.next === '@push') {\n                        if (stack.depth >= this._lexer.maxStack) {\n                            throw monarchCommon.createError(this._lexer, 'maximum tokenizer stack size reached: [' +\n                                stack.state + ',' + stack.parent.state + ',...]');\n                        }\n                        else {\n                            stack = stack.push(state);\n                        }\n                    }\n                    else if (action.next === '@pop') {\n                        if (stack.depth <= 1) {\n                            throw monarchCommon.createError(this._lexer, 'trying to pop an empty stack in rule: ' + this._safeRuleName(rule));\n                        }\n                        else {\n                            stack = stack.pop();\n                        }\n                    }\n                    else if (action.next === '@popall') {\n                        stack = stack.popall();\n                    }\n                    else {\n                        let nextState = monarchCommon.substituteMatches(this._lexer, action.next, matched, matches, state);\n                        if (nextState[0] === '@') {\n                            nextState = nextState.substr(1); // peel off starting '@'\n                        }\n                        if (!monarchCommon.findRules(this._lexer, nextState)) {\n                            throw monarchCommon.createError(this._lexer, 'trying to set a next state \\'' + nextState + '\\' that is undefined in rule: ' + this._safeRuleName(rule));\n                        }\n                        else {\n                            stack = stack.push(nextState);\n                        }\n                    }\n                }\n                if (action.log && typeof (action.log) === 'string') {\n                    monarchCommon.log(this._lexer, this._lexer.languageId + ': ' + monarchCommon.substituteMatches(this._lexer, action.log, matched, matches, state));\n                }\n            }\n            // check result\n            if (result === null) {\n                throw monarchCommon.createError(this._lexer, 'lexer rule has no well-defined action in rule: ' + this._safeRuleName(rule));\n            }\n            const computeNewStateForEmbeddedLanguage = (enteringEmbeddedLanguage) => {\n                // support language names, mime types, and language ids\n                const languageId = (this._languageService.getLanguageIdByLanguageName(enteringEmbeddedLanguage)\n                    || this._languageService.getLanguageIdByMimeType(enteringEmbeddedLanguage)\n                    || enteringEmbeddedLanguage);\n                const embeddedLanguageData = this._getNestedEmbeddedLanguageData(languageId);\n                if (pos < lineLength) {\n                    // there is content from the embedded language on this line\n                    const restOfLine = lineWithoutLF.substr(pos);\n                    return this._nestedTokenize(restOfLine, hasEOL, MonarchLineStateFactory.create(stack, embeddedLanguageData), offsetDelta + pos, tokensCollector);\n                }\n                else {\n                    return MonarchLineStateFactory.create(stack, embeddedLanguageData);\n                }\n            };\n            // is the result a group match?\n            if (Array.isArray(result)) {\n                if (groupMatching && groupMatching.groups.length > 0) {\n                    throw monarchCommon.createError(this._lexer, 'groups cannot be nested: ' + this._safeRuleName(rule));\n                }\n                if (matches.length !== result.length + 1) {\n                    throw monarchCommon.createError(this._lexer, 'matched number of groups does not match the number of actions in rule: ' + this._safeRuleName(rule));\n                }\n                let totalLen = 0;\n                for (let i = 1; i < matches.length; i++) {\n                    totalLen += matches[i].length;\n                }\n                if (totalLen !== matched.length) {\n                    throw monarchCommon.createError(this._lexer, 'with groups, all characters should be matched in consecutive groups in rule: ' + this._safeRuleName(rule));\n                }\n                groupMatching = {\n                    rule: rule,\n                    matches: matches,\n                    groups: []\n                };\n                for (let i = 0; i < result.length; i++) {\n                    groupMatching.groups[i] = {\n                        action: result[i],\n                        matched: matches[i + 1]\n                    };\n                }\n                pos -= matched.length;\n                // call recursively to initiate first result match\n                continue;\n            }\n            else {\n                // regular result\n                // check for '@rematch'\n                if (result === '@rematch') {\n                    pos -= matched.length;\n                    matched = ''; // better set the next state too..\n                    matches = null;\n                    result = '';\n                    // Even though `@rematch` was specified, if `nextEmbedded` also specified,\n                    // a state transition should occur.\n                    if (enteringEmbeddedLanguage !== null) {\n                        return computeNewStateForEmbeddedLanguage(enteringEmbeddedLanguage);\n                    }\n                }\n                // check progress\n                if (matched.length === 0) {\n                    if (lineLength === 0 || stackLen0 !== stack.depth || state !== stack.state || (!groupMatching ? 0 : groupMatching.groups.length) !== groupLen0) {\n                        continue;\n                    }\n                    else {\n                        throw monarchCommon.createError(this._lexer, 'no progress in tokenizer in rule: ' + this._safeRuleName(rule));\n                    }\n                }\n                // return the result (and check for brace matching)\n                // todo: for efficiency we could pre-sanitize tokenPostfix and substitutions\n                let tokenType = null;\n                if (monarchCommon.isString(result) && result.indexOf('@brackets') === 0) {\n                    const rest = result.substr('@brackets'.length);\n                    const bracket = findBracket(this._lexer, matched);\n                    if (!bracket) {\n                        throw monarchCommon.createError(this._lexer, '@brackets token returned but no bracket defined as: ' + matched);\n                    }\n                    tokenType = monarchCommon.sanitize(bracket.token + rest);\n                }\n                else {\n                    const token = (result === '' ? '' : result + this._lexer.tokenPostfix);\n                    tokenType = monarchCommon.sanitize(token);\n                }\n                if (pos0 < lineWithoutLFLength) {\n                    tokensCollector.emit(pos0 + offsetDelta, tokenType);\n                }\n            }\n            if (enteringEmbeddedLanguage !== null) {\n                return computeNewStateForEmbeddedLanguage(enteringEmbeddedLanguage);\n            }\n        }\n        return MonarchLineStateFactory.create(stack, embeddedLanguageData);\n    }\n    _getNestedEmbeddedLanguageData(languageId) {\n        if (!this._languageService.isRegisteredLanguageId(languageId)) {\n            return new EmbeddedLanguageData(languageId, NullState);\n        }\n        if (languageId !== this._languageId) {\n            // Fire language loading event\n            languages.TokenizationRegistry.getOrCreate(languageId);\n            this._embeddedLanguages[languageId] = true;\n        }\n        const tokenizationSupport = languages.TokenizationRegistry.get(languageId);\n        if (tokenizationSupport) {\n            return new EmbeddedLanguageData(languageId, tokenizationSupport.getInitialState());\n        }\n        return new EmbeddedLanguageData(languageId, NullState);\n    }\n};\nMonarchTokenizer = __decorate([\n    __param(4, IConfigurationService)\n], MonarchTokenizer);\nexport { MonarchTokenizer };\n/**\n * Searches for a bracket in the 'brackets' attribute that matches the input.\n */\nfunction findBracket(lexer, matched) {\n    if (!matched) {\n        return null;\n    }\n    matched = monarchCommon.fixCase(lexer, matched);\n    const brackets = lexer.brackets;\n    for (const bracket of brackets) {\n        if (bracket.open === matched) {\n            return { token: bracket.token, bracketType: 1 /* monarchCommon.MonarchBracket.Open */ };\n        }\n        else if (bracket.close === matched) {\n            return { token: bracket.token, bracketType: -1 /* monarchCommon.MonarchBracket.Close */ };\n        }\n    }\n    return null;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nexport const IStandaloneThemeService = createDecorator('themeService');\n"],"names":["__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE","RawContextKey","AccessibilityHelpController","editor","instantiationService","_editor","_widget","_register","createInstance","AccessibilityHelpWidget","this","show","hide","getContribution","ID","Disposable","IInstantiationService","_contextKeyService","_keybindingService","_openerService","_isVisibleKey","bindTo","_domNode","createFastDomNode","document","createElement","setClassName","setDisplay","setAttribute","_contentDomNode","appendChild","_isVisible","onDidLayoutChange","_layout","dom","addStandardDisposableListener","domNode","e","equals","alert","AccessibilityHelpNLS","updateOptions","accessibilitySupport","clearNode","_buildContent","focus","preventDefault","stopPropagation","url","getRawOptions","accessibilityHelpUrl","open","URI","onblur","addOverlayWidget","removeOverlayWidget","preference","set","tabIndex","commandId","msg","noKbMsg","kb","lookupKeybinding","strings","getAriaLabel","options","getOptions","selections","getSelections","charactersSelected","model","getModel","forEach","selection","getValueLengthInRange","text","positionLineNumber","positionColumn","getSelectionLabel","get","turnOnMessage","platform","_descriptionForCommand","ToggleTabFocusModeAction","renderFormattedText","reset","editorLayout","getLayoutInfo","w","Math","max","min","WIDTH","width","h","HEIGHT","height","setWidth","setHeight","top","round","setTop","left","setLeft","Widget","IContextKeyService","IKeybindingService","IOpenerService","ShowAccessibilityHelpAction","id","label","alias","precondition","undefined","kbOpts","primary","weight","linux","secondary","accessor","controller","EditorAction","registerEditorContribution","registerEditorAction","AccessibilityHelpCommand","EditorCommand","registerEditorCommand","handler","x","kbExpr","EditorContextKeys","registerThemingParticipant","theme","collector","widgetBackground","getColor","editorWidgetBackground","addRule","widgetForeground","editorWidgetForeground","widgetShadowColor","widgetShadow","hcBorder","contrastBorder","IPadShowKeyboard","widget","isIOS","onDidChangeConfiguration","update","shouldHaveWidget","getOption","ShowKeyboardWidget","dispose","className","addDisposableListener","InspectTokensController","standaloneColorService","languageService","_languageService","onDidChangeModel","stop","onDidChangeModelLanguage","TokenizationRegistry","onKeyUp","keyCode","hasModel","InspectTokensWidget","IStandaloneThemeService","ILanguageService","InspectTokens","InspectTokensNLS","launch","allowEditorOverflow","_model","_tokenizationSupport","languageIdCodec","languageId","tokenizationSupport","encodedLanguageId","encodeLanguageId","getInitialState","NullState","tokenize","line","hasEOL","state","nullTokenize","tokenizeEncoded","nullTokenizeEncoded","getSafeTokenizationSupport","getLanguageId","_compute","getPosition","onDidChangeCursorPosition","addContentWidget","removeContentWidget","_ID","position","data","_getTokensAtLine","lineNumber","token1Index","tokens1","t","column","offset","token2Index","tokens2","lineContent","getLineContent","tokenText","tokenStartIndex","tokenEndIndex","substring","$","result","charIndex","len","charCode","charCodeAt","String","fromCharCode","renderTokenText","append","metadata","_decodeMetadata","_tokenTypeToString","tokenType","_fontStyleToString","fontStyle","Color","foreground","background","type","layoutContentWidget","colorMap","TokenMetadata","decodeLanguageId","stateBeforeLine","_getStateBeforeLine","tokenizationResult1","tokenizationResult2","startState","tokens","endState","border","editorHoverBorder","borderWidth","isHighContrast","editorHoverBackground","editorHoverForeground","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","done","then","apply","StandaloneCommandsQuickAccessProvider","codeEditorService","keybindingService","commandService","telemetryService","dialogService","showAlias","withNullAsUndefined","getFocusedCodeEditor","getCodeEditorCommandPicks","AbstractEditorCommandsQuickAccessProvider","ICodeEditorService","ICommandService","ITelemetryService","IDialogService","GotoLineAction","QuickCommandNLS","contextMenuOpts","group","order","IQuickInputService","quickAccess","PREFIX","Registry","Extensions","registerQuickAccessProvider","ctor","prefix","helpEntries","description","StandaloneGotoLineQuickAccessProvider","editorService","onDidActiveTextEditorControlChange","Event","AbstractGotoLineQuickAccessProvider","GoToLineNLS","mac","StandaloneGotoSymbolQuickAccessProvider","languageFeaturesService","outlineModelService","AbstractGotoSymbolQuickAccessProvider","ILanguageFeaturesService","IOutlineModelService","GotoSymbolAction","QuickOutlineNLS","HelpQuickAccessProvider","QuickHelpNLS","StandaloneReferencesController","contextKeyService","notificationService","storageService","configurationService","ReferencesController","INotificationService","IStorageService","IConfigurationService","StandaloneCodeEditorService","themeService","onCodeEditorAdd","_checkContextKey","onCodeEditorRemove","_editorIsOpen","createKey","_activeCodeEditor","registerCodeEditorOpenHandler","input","source","sideBySide","doOpenEditor","hasCodeEditor","listCodeEditors","isSimpleWidget","activeCodeEditor","findModel","resource","schema","scheme","Schemas","windowOpenNoOpener","toString","endLineNumber","endColumn","setSelection","revealRangeInCenter","pos","startLineNumber","startColumn","setPosition","revealPositionInCenter","uri","AbstractCodeEditorService","IThemeService","registerSingleton","_a","ttPolicy","window","trustedTypes","createPolicy","createHTML","Colorizer","mimeType","getAttribute","console","error","getLanguageIdByMimeType","setTheme","firstChild","nodeValue","colorize","str","trustedhtml","innerHTML","err","tabSize","substr","lines","isRegisteredLanguageId","_fakeColorize","_colorize","mightContainNonBasicASCII","mightContainRTL","isBasicASCII","ViewLineRenderingData","containsRTL","renderResult","renderViewLine","RenderLineInput","html","content","tokenization","forceTokenization","getLineTokens","inflatedTokens","inflate","colorizeLine","execute","tokenizeResult","LineTokens","lineTokens","concat","push","join","_actualColorize","MonarchTokenizer","status","getLoadStatus","loaded","promise","Uint32Array","LAST_GENERATED_COMMAND_ID","ariaDomNodeCreated","StandaloneCodeEditor","domElement","_options","accessibilityService","languageConfigurationService","assign","ariaLabel","StandaloneCodeEditorNLS","StandaloneKeybindingService","_standaloneKeybindingService","parent","aria","body","createAriaDomNode","ariaContainerElement","keybinding","context","warn","whenExpression","ContextKeyExpr","addDynamicKeybinding","defaultValue","_descriptor","run","Error","getId","keybindings","keybindingsWhen","keybindingContext","contextMenuGroupId","contextMenuOrder","args","toDispose","DisposableStore","uniqueId","add","CommandsRegistry","menuItem","command","title","when","MenuRegistry","MenuId","Array","isArray","internalAction","InternalEditorAction","_actions","toDisposable","handlerId","payload","_codeEditorService","setActiveCodeEditor","CodeEditorWidget","StandaloneEditor","modelService","updateConfigurationService","themeDomRegistration","registerEditorContainer","autoDetectHighContrast","setAutoDetectHighContrast","Boolean","_configurationService","_standaloneThemeService","language","PLAINTEXT_LANGUAGE_ID","createTextModel","_ownsModel","_attachModel","oldModelUrl","newModelUrl","_onDidChangeModel","fire","newOptions","detachedModel","IAccessibilityService","ILanguageConfigurationService","IModelService","StandaloneDiffEditor","editorWorkerService","contextMenuService","editorProgressService","clipboardService","container","getModifiedEditor","addCommand","createContextKey","descriptor","addAction","DiffEditorWidget","firstLF","indexOf","firstLine","doCreateModel","createByFilepathOrFirstLine","createById","languageSelection","createModel","IEditorWorkerService","IContextMenuService","IEditorProgressService","IClipboardService","create","override","StandaloneServices","onDidCreateEditor","listener","onDidCreateDiffEditor","onDiffEditorAdd","getEditors","getDiffEditors","listDiffEditors","createDiffEditor","createDiffNavigator","diffEditor","opts","DiffNavigator","setModelLanguage","setMode","setModelMarkers","owner","markers","IMarkerService","changeOne","removeAllMarkers","changeAll","getModelMarkers","filter","read","onDidChangeMarkers","onMarkerChanged","getModels","onDidCreateModel","onModelAdded","onWillDisposeModel","onModelRemoved","onModelLanguageChanged","oldLanguage","oldLanguageId","createWebWorker","actualCreateWebWorker","colorizeElement","colorizeModelLine","languages","splitLines","tokenizationResult","defineTheme","themeName","themeData","remeasureFonts","FontMeasurements","registerCommand","createMonacoEditorAPI","AccessibilitySupport","standaloneEnums","ContentWidgetPositionPreference","CursorChangeReason","DefaultEndOfLine","EditorAutoIndentStrategy","EditorOption","EndOfLinePreference","EndOfLineSequence","MinimapPosition","MouseTargetType","OverlayWidgetPositionPreference","OverviewRulerLane","RenderLineNumbersType","RenderMinimap","ScrollbarVisibility","ScrollType","TextEditorCursorBlinkingStyle","TextEditorCursorStyle","TrackedRangeStickiness","WrappingIndent","InjectedTextCursorStops","PositionAffinity","ConfigurationChangedEvent","BareFontInfo","FontInfo","TextModelResolvedOptions","FindMatch","ApplyUpdateResult","EditorType","EditorOptions","bool","prop","defValue","string","arrayToHash","array","createKeywordMatcher","arr","caseInsensitive","map","toLowerCase","hash","word","hasOwnProperty","compileRegExp","lexer","replace","hadExpansion","n","s","attr","sub","RegExp","monarchCommon","flags","ignoreCase","unicode","createGuard","ruleName","tkey","val","scrut","oppat","matches","match","parseInt","tester","op","pat","test","words","elemType","obj","isArrayOf","elem","inWords","re","patx","eos","patexp","split","name","scrutinee","num","parts","unshift","selectScrutinee","compileAction","action","token","newAction","tokenSubst","bracket","goBack","switchTo","log","nextEmbedded","usesEmbedded","results","cases","def","defaultToken","_case","Rule","regex","matchOnlyAtLineStart","sregex","act","compile","json","includeLF","noThrow","maxStack","start","tokenPostfix","lexerMin","addRules","newrules","rules","rule","include","tokenizer","newrule","setRegex","setAction","rule1","matchOnlyAtStart","stateNames","brackets","close","register","ModesRegistry","getLanguages","getEncodedLanguageId","onLanguage","callback","disposable","onDidEncounterLanguage","encounteredLanguageId","setLanguageConfiguration","configuration","EncodedTokenizationSupportAdapter","actual","_languageId","_actual","TokenizationSupportAdapter","adaptTokenize","tokenTheme","getColorTheme","resultLen","previousStartIndex","scopes","startIndex","actualResult","_toBinaryTokens","_toClassicTokens","isThenable","setColorMap","standaloneThemeService","setColorMapOverride","createTokenizationSupportAdapter","provider","isEncodedTokensProvider","registerTokensProviderFactory","factory","adaptedFactory","createTokenizationSupport","setTokensProvider","setMonarchTokensProvider","languageDef","registerReferenceProvider","languageSelector","referenceProvider","registerRenameProvider","renameProvider","registerSignatureHelpProvider","signatureHelpProvider","registerHoverProvider","hoverProvider","provideHover","getWordAtPosition","range","Range","registerDocumentSymbolProvider","documentSymbolProvider","registerDocumentHighlightProvider","documentHighlightProvider","registerLinkedEditingRangeProvider","linkedEditingRangeProvider","registerDefinitionProvider","definitionProvider","registerImplementationProvider","implementationProvider","registerTypeDefinitionProvider","typeDefinitionProvider","registerCodeLensProvider","codeLensProvider","registerCodeActionProvider","codeActionProvider","providedCodeActionKinds","documentation","provideCodeActions","m","only","trigger","resolveCodeAction","registerDocumentFormattingEditProvider","documentFormattingEditProvider","registerDocumentRangeFormattingEditProvider","documentRangeFormattingEditProvider","registerOnTypeFormattingEditProvider","onTypeFormattingEditProvider","registerLinkProvider","linkProvider","registerCompletionItemProvider","completionProvider","registerColorProvider","colorProvider","registerFoldingRangeProvider","foldingRangeProvider","registerDeclarationProvider","declarationProvider","registerSelectionRangeProvider","selectionRangeProvider","registerDocumentSemanticTokensProvider","documentSemanticTokensProvider","registerDocumentRangeSemanticTokensProvider","documentRangeSemanticTokensProvider","registerInlineCompletionsProvider","inlineCompletionsProvider","registerInlayHintsProvider","inlayHintsProvider","createMonacoLanguagesAPI","DocumentHighlightKind","CompletionItemKind","CompletionItemTag","CompletionItemInsertTextRule","SymbolKind","SymbolTag","IndentAction","CompletionTriggerKind","SignatureHelpTriggerKind","InlayHintKind","InlineCompletionTriggerKind","CodeActionTriggerType","FoldingRangeKind","StandaloneLayoutService","onDidLayout","quickPickTop","_dimension","getClientArea","EditorScopedLayoutService","_container","ILayoutService","EditorScopedQuickInputService","getContainerDomNode","host","contribution","QuickInputEditorContribution","_serviceBrand","hasContainer","getDomNode","dimension","QuickInputService","StandaloneQuickInputService","mapEditorToService","Map","quickInputService","newQuickInputService","once","onDidDispose","delete","activeService","picks","CancellationToken","pick","createQuickPick","QuickInputEditorWidget","codeEditor","SimpleModel","disposed","_onWillDispose","Emitter","StandaloneTextModelService","ImmortalReference","StandaloneEditorProgressService","NULL_PROGRESS_RUNNER","delay","total","worked","StandaloneProgressService","task","onDidCancel","report","StandaloneDialogService","confirmation","doConfirm","confirmed","checkboxChecked","messageText","message","detail","confirm","severity","buttons","choice","StandaloneNotificationService","notify","Severity","notification","NO_OP","NoOpNotification","StandaloneCommandService","_onWillExecuteCommand","_onDidExecuteCommand","onWillExecuteCommand","event","onDidExecuteCommand","_instantiationService","invokeFunction","logService","_cachedResolver","_dynamicKeybindings","_domNodeListeners","addContainer","disposables","EventType","KEY_DOWN","keyEvent","StandardKeyboardEvent","_dispatch","KEY_UP","_singleModifierDispatch","DomNodeListeners","removeContainer","domNodeListeners","splice","addCodeEditor","addDiffEditor","onDiffEditorRemove","_keybinding","createKeybinding","OS","weight1","weight2","extensionId","isBuiltinExtension","updateResolver","_onDidUpdateKeybindings","defaults","_toNormalizedKeybindingItems","KeybindingsRegistry","overrides","KeybindingResolver","_log","hasFocus","items","isDefault","item","resolvedKeybindings","USLayoutResolvedKeybinding","resolvedKeybinding","ResolvedKeybindingItem","commandArgs","keyboardEvent","SimpleKeybinding","ctrlKey","shiftKey","altKey","metaKey","toChord","AbstractKeybindingService","ILogService","isConfigurationOverrides","thing","overrideIdentifier","StandaloneConfigurationService","_onDidChangeConfiguration","_configuration","Configuration","DefaultConfigurationModel","ConfigurationModel","arg1","arg2","section","getValue","values","previous","toData","changedKeys","entry","updateValue","configurationChangeEvent","ConfigurationChangeEvent","keys","sourceConfig","arg3","arg4","updateValues","inspect","StandaloneResourceConfigurationService","affectedKeys","affectsConfiguration","Pos","StandaloneResourcePropertiesService","eol","isLinux","isMacintosh","StandaloneTelemetryService","eventName","publicLog","StandaloneWorkspaceContextService","SCHEME","authority","path","workspace","folders","WorkspaceFolder","index","isDiffEditor","toUpdate","isEditorConfigurationKey","isDiffEditorConfigurationKey","StandaloneBulkEditService","_modelService","edits","textEdits","edit","ResourceTextEdit","versionId","getVersionId","EditOperation","textEdit","f","totalEdits","totalFiles","pushStackElement","pushEditOperations","ariaSummary","StandaloneServicesNLS","StandaloneUriLabelService","fsPath","basename","StandaloneContextViewService","layoutService","delegate","shadowRoot","getActiveCodeEditor","ContextViewService","StandaloneWorkspaceTrustManagementService","_neverEmitter","onDidChangeTrust","StandaloneLanguageService","LanguageService","StandaloneLogService","ConsoleLogger","LogService","StandaloneContextMenuService","contextViewService","configure","blockMouse","ContextMenuService","IContextViewService","ITextResourceConfigurationService","ITextResourcePropertiesService","IWorkspaceContextService","ILabelService","MarkerService","StandaloneThemeService","ModelService","IMarkerDecorationsService","MarkerDecorationsService","ContextKeyService","IProgressService","InMemoryStorageService","EditorWorkerService","IBulkEditService","IWorkspaceTrustManagementService","ITextModelService","AccessibilityService","IListService","ListService","OpenerService","BrowserClipboardService","IMenuService","MenuService","serviceCollection","ServiceCollection","getSingletonServiceDescriptors","InstantiationService","serviceId","SyncDescriptor","initialized","initialize","serviceIdentifier","createDecorator","vs","base","inherit","colors","editorBackground","editorForeground","editorInactiveSelection","editorIndentGuides","editorActiveIndentGuides","editorSelectionHighlight","vs_dark","hc_black","hc_light","VS_LIGHT_THEME_NAME","VS_DARK_THEME_NAME","HC_BLACK_THEME_NAME","HC_LIGHT_THEME_NAME","colorRegistry","themingRegistry","ThemingExtensions","StandaloneTheme","standaloneThemeData","semanticHighlighting","isBuiltinTheme","defaultColors","_tokenTheme","baseData","getBuiltinRules","has","colorId","useDefault","color","getColors","getDefault","resolveDefaultColor","prototype","call","ColorScheme","encodedTokensColors","TokenTheme","modifiers","modelLanguage","_match","italic","bold","underline","strikethrough","builtinTheme","newBuiltInTheme","_onColorThemeChange","onDidColorThemeChange","_onProductIconThemeChange","onDidProductIconThemeChange","_environment","_builtInProductIconTheme","UnthemedProductIconTheme","_autoDetectHighContrast","_knownThemes","iconsStyleSheet","getIconsStyleSheet","_codiconCSS","getCSS","_themeCSS","_allCSS","_globalStyleElement","_styleElements","_colorMapOverride","_onOSSchemeChanged","onDidChange","_updateCSS","addMatchMediaChangeListener","isInShadowDOM","_registerShadowDomContainer","_registerRegularEditorContainer","createStyleSheet","textContent","styleElement","notifyBaseUpdated","_theme","colorMapOverride","_updateThemeOrColorMap","_updateActualTheme","desiredTheme","newThemeName","wantsHighContrast","matchMedia","isDark","cssRules","hasRule","ruleCollector","getThemingParticipants","p","colorVariables","asCssVariableName","getColorMap","generateTokensCSSForColorMap","hasFileIcons","hasFolderIcons","hidesExplorerArrows","ToggleHighContrast","ToggleHighContrastNLS","_originalThemeName","currentTheme","isFuzzyAction","what","isFuzzyActionArr","isString","isIAction","empty","fixCase","sanitize","createError","substituteMatches","stateMatches","full","dollar","ofs","findRules","inState","idx","lastIndexOf","stateExists","MonarchStackElementFactory","maxCacheDepth","_maxCacheDepth","_entries","depth","MonarchStackElement","stackElementId","getStackElementId","_INSTANCE","other","_equals","element","a","b","EmbeddedLanguageData","clone","MonarchLineStateFactory","stack","embeddedLanguageData","MonarchLineState","MonarchClassicTokensCollector","_tokens","_lastTokenType","_lastTokenLanguage","startOffset","embeddedLanguageLine","offsetDelta","nestedLanguageId","embeddedModeState","nestedLanguageTokenizationSupport","enterLanguage","emit","nestedResult","MonarchModernTokensCollector","_prependTokens","_currentLanguageId","_lastTokenMetadata","_merge","aLen","bLen","cLen","_lexer","_embeddedLanguages","embeddedLoaded","emitting","_tokenizationRegistryListener","isOneOfMyEmbeddedModes","changedLanguages","_maxTokenizationLineLength","promises","nestedModeStatus","all","_","rootState","lineState","tokensCollector","endLineState","_tokenize","finalize","_nestedTokenize","_myTokenize","popOffset","hasEmbeddedPopRule","regexSource","search","_findLeavingNestedLanguageOffset","nestedEndState","nestedLanguageTokenize","nestedLanguageLine","restOfTheLine","lineWithoutLF","lineWithoutLFLength","lineLength","groupMatching","forceEvaluation","pos0","stackLen0","groupLen0","groups","matched","enteringEmbeddedLanguage","groupEntry","shift","restOfLine","charAt","nextState","_safeRuleName","transform","pop","popall","computeNewStateForEmbeddedLanguage","getLanguageIdByLanguageName","_getNestedEmbeddedLanguageData","totalLen","rest","findBracket","bracketType"],"sourceRoot":""}