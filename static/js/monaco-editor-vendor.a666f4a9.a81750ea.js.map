{"version":3,"file":"static/js/monaco-editor-vendor.a666f4a9.a81750ea.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/base/browser/ui/keybindingLabel/keybindingLabel.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/list/listPaging.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/list/rangeMap.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/list/rowCache.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/list/listView.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/list/splice.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/list/list.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/list/listWidget.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/menu/menu.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { UILabelProvider } from '../../../common/keybindingLabels.js';\nimport { equals } from '../../../common/objects.js';\nimport './keybindingLabel.css';\nimport { localize } from '../../../../nls.js';\nconst $ = dom.$;\nexport const unthemedKeybindingLabelOptions = {\n    keybindingLabelBackground: undefined,\n    keybindingLabelForeground: undefined,\n    keybindingLabelBorder: undefined,\n    keybindingLabelBottomBorder: undefined,\n    keybindingLabelShadow: undefined\n};\nexport class KeybindingLabel {\n    constructor(container, os, options) {\n        this.os = os;\n        this.keyElements = new Set();\n        this.options = options || Object.create(null);\n        const labelForeground = this.options.keybindingLabelForeground;\n        this.domNode = dom.append(container, $('.monaco-keybinding'));\n        if (labelForeground) {\n            this.domNode.style.color = labelForeground;\n        }\n        this.didEverRender = false;\n        container.appendChild(this.domNode);\n    }\n    get element() {\n        return this.domNode;\n    }\n    set(keybinding, matches) {\n        if (this.didEverRender && this.keybinding === keybinding && KeybindingLabel.areSame(this.matches, matches)) {\n            return;\n        }\n        this.keybinding = keybinding;\n        this.matches = matches;\n        this.render();\n    }\n    render() {\n        var _a;\n        this.clear();\n        if (this.keybinding) {\n            const chords = this.keybinding.getChords();\n            if (chords[0]) {\n                this.renderChord(this.domNode, chords[0], this.matches ? this.matches.firstPart : null);\n            }\n            for (let i = 1; i < chords.length; i++) {\n                dom.append(this.domNode, $('span.monaco-keybinding-key-chord-separator', undefined, ' '));\n                this.renderChord(this.domNode, chords[i], this.matches ? this.matches.chordPart : null);\n            }\n            const title = ((_a = this.options.disableTitle) !== null && _a !== void 0 ? _a : false) ? undefined : this.keybinding.getAriaLabel() || undefined;\n            if (title !== undefined) {\n                this.domNode.title = title;\n            }\n            else {\n                this.domNode.removeAttribute('title');\n            }\n        }\n        else if (this.options && this.options.renderUnboundKeybindings) {\n            this.renderUnbound(this.domNode);\n        }\n        this.didEverRender = true;\n    }\n    clear() {\n        dom.clearNode(this.domNode);\n        this.keyElements.clear();\n    }\n    renderChord(parent, chord, match) {\n        const modifierLabels = UILabelProvider.modifierLabels[this.os];\n        if (chord.ctrlKey) {\n            this.renderKey(parent, modifierLabels.ctrlKey, Boolean(match === null || match === void 0 ? void 0 : match.ctrlKey), modifierLabels.separator);\n        }\n        if (chord.shiftKey) {\n            this.renderKey(parent, modifierLabels.shiftKey, Boolean(match === null || match === void 0 ? void 0 : match.shiftKey), modifierLabels.separator);\n        }\n        if (chord.altKey) {\n            this.renderKey(parent, modifierLabels.altKey, Boolean(match === null || match === void 0 ? void 0 : match.altKey), modifierLabels.separator);\n        }\n        if (chord.metaKey) {\n            this.renderKey(parent, modifierLabels.metaKey, Boolean(match === null || match === void 0 ? void 0 : match.metaKey), modifierLabels.separator);\n        }\n        const keyLabel = chord.keyLabel;\n        if (keyLabel) {\n            this.renderKey(parent, keyLabel, Boolean(match === null || match === void 0 ? void 0 : match.keyCode), '');\n        }\n    }\n    renderKey(parent, label, highlight, separator) {\n        dom.append(parent, this.createKeyElement(label, highlight ? '.highlight' : ''));\n        if (separator) {\n            dom.append(parent, $('span.monaco-keybinding-key-separator', undefined, separator));\n        }\n    }\n    renderUnbound(parent) {\n        dom.append(parent, this.createKeyElement(localize('unbound', \"Unbound\")));\n    }\n    createKeyElement(label, extraClass = '') {\n        const keyElement = $('span.monaco-keybinding-key' + extraClass, undefined, label);\n        this.keyElements.add(keyElement);\n        if (this.options.keybindingLabelBackground) {\n            keyElement.style.backgroundColor = this.options.keybindingLabelBackground;\n        }\n        if (this.options.keybindingLabelBorder) {\n            keyElement.style.borderColor = this.options.keybindingLabelBorder;\n        }\n        if (this.options.keybindingLabelBottomBorder) {\n            keyElement.style.borderBottomColor = this.options.keybindingLabelBottomBorder;\n        }\n        if (this.options.keybindingLabelShadow) {\n            keyElement.style.boxShadow = `inset 0 -1px 0 ${this.options.keybindingLabelShadow}`;\n        }\n        return keyElement;\n    }\n    static areSame(a, b) {\n        if (a === b || (!a && !b)) {\n            return true;\n        }\n        return !!a && !!b && equals(a.firstPart, b.firstPart) && equals(a.chordPart, b.chordPart);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { range } from '../../../common/arrays.js';\nimport { CancellationTokenSource } from '../../../common/cancellation.js';\nimport { Event } from '../../../common/event.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport './list.css';\nimport { List } from './listWidget.js';\nclass PagedRenderer {\n    get templateId() { return this.renderer.templateId; }\n    constructor(renderer, modelProvider) {\n        this.renderer = renderer;\n        this.modelProvider = modelProvider;\n    }\n    renderTemplate(container) {\n        const data = this.renderer.renderTemplate(container);\n        return { data, disposable: Disposable.None };\n    }\n    renderElement(index, _, data, height) {\n        var _a;\n        (_a = data.disposable) === null || _a === void 0 ? void 0 : _a.dispose();\n        if (!data.data) {\n            return;\n        }\n        const model = this.modelProvider();\n        if (model.isResolved(index)) {\n            return this.renderer.renderElement(model.get(index), index, data.data, height);\n        }\n        const cts = new CancellationTokenSource();\n        const promise = model.resolve(index, cts.token);\n        data.disposable = { dispose: () => cts.cancel() };\n        this.renderer.renderPlaceholder(index, data.data);\n        promise.then(entry => this.renderer.renderElement(entry, index, data.data, height));\n    }\n    disposeTemplate(data) {\n        if (data.disposable) {\n            data.disposable.dispose();\n            data.disposable = undefined;\n        }\n        if (data.data) {\n            this.renderer.disposeTemplate(data.data);\n            data.data = undefined;\n        }\n    }\n}\nclass PagedAccessibilityProvider {\n    constructor(modelProvider, accessibilityProvider) {\n        this.modelProvider = modelProvider;\n        this.accessibilityProvider = accessibilityProvider;\n    }\n    getWidgetAriaLabel() {\n        return this.accessibilityProvider.getWidgetAriaLabel();\n    }\n    getAriaLabel(index) {\n        const model = this.modelProvider();\n        if (!model.isResolved(index)) {\n            return null;\n        }\n        return this.accessibilityProvider.getAriaLabel(model.get(index));\n    }\n}\nfunction fromPagedListOptions(modelProvider, options) {\n    return Object.assign(Object.assign({}, options), { accessibilityProvider: options.accessibilityProvider && new PagedAccessibilityProvider(modelProvider, options.accessibilityProvider) });\n}\nexport class PagedList {\n    constructor(user, container, virtualDelegate, renderers, options = {}) {\n        const modelProvider = () => this.model;\n        const pagedRenderers = renderers.map(r => new PagedRenderer(r, modelProvider));\n        this.list = new List(user, container, virtualDelegate, pagedRenderers, fromPagedListOptions(modelProvider, options));\n    }\n    updateOptions(options) {\n        this.list.updateOptions(options);\n    }\n    getHTMLElement() {\n        return this.list.getHTMLElement();\n    }\n    get onDidFocus() {\n        return this.list.onDidFocus;\n    }\n    get widget() {\n        return this.list;\n    }\n    get onDidDispose() {\n        return this.list.onDidDispose;\n    }\n    get onMouseDblClick() {\n        return Event.map(this.list.onMouseDblClick, ({ element, index, browserEvent }) => ({ element: element === undefined ? undefined : this._model.get(element), index, browserEvent }));\n    }\n    get onPointer() {\n        return Event.map(this.list.onPointer, ({ element, index, browserEvent }) => ({ element: element === undefined ? undefined : this._model.get(element), index, browserEvent }));\n    }\n    get onDidChangeSelection() {\n        return Event.map(this.list.onDidChangeSelection, ({ elements, indexes, browserEvent }) => ({ elements: elements.map(e => this._model.get(e)), indexes, browserEvent }));\n    }\n    get model() {\n        return this._model;\n    }\n    set model(model) {\n        this._model = model;\n        this.list.splice(0, this.list.length, range(model.length));\n    }\n    getFocus() {\n        return this.list.getFocus();\n    }\n    getSelection() {\n        return this.list.getSelection();\n    }\n    getSelectedElements() {\n        return this.getSelection().map(i => this.model.get(i));\n    }\n    style(styles) {\n        this.list.style(styles);\n    }\n    dispose() {\n        this.list.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/range.js';\n/**\n * Returns the intersection between a ranged group and a range.\n * Returns `[]` if the intersection is empty.\n */\nexport function groupIntersect(range, groups) {\n    const result = [];\n    for (const r of groups) {\n        if (range.start >= r.range.end) {\n            continue;\n        }\n        if (range.end < r.range.start) {\n            break;\n        }\n        const intersection = Range.intersect(range, r.range);\n        if (Range.isEmpty(intersection)) {\n            continue;\n        }\n        result.push({\n            range: intersection,\n            size: r.size\n        });\n    }\n    return result;\n}\n/**\n * Shifts a range by that `much`.\n */\nexport function shift({ start, end }, much) {\n    return { start: start + much, end: end + much };\n}\n/**\n * Consolidates a collection of ranged groups.\n *\n * Consolidation is the process of merging consecutive ranged groups\n * that share the same `size`.\n */\nexport function consolidate(groups) {\n    const result = [];\n    let previousGroup = null;\n    for (const group of groups) {\n        const start = group.range.start;\n        const end = group.range.end;\n        const size = group.size;\n        if (previousGroup && size === previousGroup.size) {\n            previousGroup.range.end = end;\n            continue;\n        }\n        previousGroup = { range: { start, end }, size };\n        result.push(previousGroup);\n    }\n    return result;\n}\n/**\n * Concatenates several collections of ranged groups into a single\n * collection.\n */\nfunction concat(...groups) {\n    return consolidate(groups.reduce((r, g) => r.concat(g), []));\n}\nexport class RangeMap {\n    get paddingTop() {\n        return this._paddingTop;\n    }\n    set paddingTop(paddingTop) {\n        this._size = this._size + paddingTop - this._paddingTop;\n        this._paddingTop = paddingTop;\n    }\n    constructor(topPadding) {\n        this.groups = [];\n        this._size = 0;\n        this._paddingTop = 0;\n        this._paddingTop = topPadding !== null && topPadding !== void 0 ? topPadding : 0;\n        this._size = this._paddingTop;\n    }\n    splice(index, deleteCount, items = []) {\n        const diff = items.length - deleteCount;\n        const before = groupIntersect({ start: 0, end: index }, this.groups);\n        const after = groupIntersect({ start: index + deleteCount, end: Number.POSITIVE_INFINITY }, this.groups)\n            .map(g => ({ range: shift(g.range, diff), size: g.size }));\n        const middle = items.map((item, i) => ({\n            range: { start: index + i, end: index + i + 1 },\n            size: item.size\n        }));\n        this.groups = concat(before, middle, after);\n        this._size = this._paddingTop + this.groups.reduce((t, g) => t + (g.size * (g.range.end - g.range.start)), 0);\n    }\n    /**\n     * Returns the number of items in the range map.\n     */\n    get count() {\n        const len = this.groups.length;\n        if (!len) {\n            return 0;\n        }\n        return this.groups[len - 1].range.end;\n    }\n    /**\n     * Returns the sum of the sizes of all items in the range map.\n     */\n    get size() {\n        return this._size;\n    }\n    /**\n     * Returns the index of the item at the given position.\n     */\n    indexAt(position) {\n        if (position < 0) {\n            return -1;\n        }\n        if (position < this._paddingTop) {\n            return 0;\n        }\n        let index = 0;\n        let size = this._paddingTop;\n        for (const group of this.groups) {\n            const count = group.range.end - group.range.start;\n            const newSize = size + (count * group.size);\n            if (position < newSize) {\n                return index + Math.floor((position - size) / group.size);\n            }\n            index += count;\n            size = newSize;\n        }\n        return index;\n    }\n    /**\n     * Returns the index of the item right after the item at the\n     * index of the given position.\n     */\n    indexAfter(position) {\n        return Math.min(this.indexAt(position) + 1, this.count);\n    }\n    /**\n     * Returns the start position of the item at the given index.\n     */\n    positionAt(index) {\n        if (index < 0) {\n            return -1;\n        }\n        let position = 0;\n        let count = 0;\n        for (const group of this.groups) {\n            const groupCount = group.range.end - group.range.start;\n            const newCount = count + groupCount;\n            if (index < newCount) {\n                return this._paddingTop + position + ((index - count) * group.size);\n            }\n            position += groupCount * group.size;\n            count = newCount;\n        }\n        return -1;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $ } from '../../dom.js';\nfunction removeFromParent(element) {\n    var _a;\n    try {\n        (_a = element.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(element);\n    }\n    catch (e) {\n        // this will throw if this happens due to a blur event, nasty business\n    }\n}\nexport class RowCache {\n    constructor(renderers) {\n        this.renderers = renderers;\n        this.cache = new Map();\n        this.transactionNodesPendingRemoval = new Set();\n        this.inTransaction = false;\n    }\n    /**\n     * Returns a row either by creating a new one or reusing\n     * a previously released row which shares the same templateId.\n     *\n     * @returns A row and `isReusingConnectedDomNode` if the row's node is already in the dom in a stale position.\n     */\n    alloc(templateId) {\n        let result = this.getTemplateCache(templateId).pop();\n        let isStale = false;\n        if (result) {\n            isStale = this.transactionNodesPendingRemoval.has(result.domNode);\n            if (isStale) {\n                this.transactionNodesPendingRemoval.delete(result.domNode);\n            }\n        }\n        else {\n            const domNode = $('.monaco-list-row');\n            const renderer = this.getRenderer(templateId);\n            const templateData = renderer.renderTemplate(domNode);\n            result = { domNode, templateId, templateData };\n        }\n        return { row: result, isReusingConnectedDomNode: isStale };\n    }\n    /**\n     * Releases the row for eventual reuse.\n     */\n    release(row) {\n        if (!row) {\n            return;\n        }\n        this.releaseRow(row);\n    }\n    /**\n     * Begin a set of changes that use the cache. This lets us skip work when a row is removed and then inserted again.\n     */\n    transact(makeChanges) {\n        if (this.inTransaction) {\n            throw new Error('Already in transaction');\n        }\n        this.inTransaction = true;\n        try {\n            makeChanges();\n        }\n        finally {\n            for (const domNode of this.transactionNodesPendingRemoval) {\n                this.doRemoveNode(domNode);\n            }\n            this.transactionNodesPendingRemoval.clear();\n            this.inTransaction = false;\n        }\n    }\n    releaseRow(row) {\n        const { domNode, templateId } = row;\n        if (domNode) {\n            if (this.inTransaction) {\n                this.transactionNodesPendingRemoval.add(domNode);\n            }\n            else {\n                this.doRemoveNode(domNode);\n            }\n        }\n        const cache = this.getTemplateCache(templateId);\n        cache.push(row);\n    }\n    doRemoveNode(domNode) {\n        domNode.classList.remove('scrolling');\n        removeFromParent(domNode);\n    }\n    getTemplateCache(templateId) {\n        let result = this.cache.get(templateId);\n        if (!result) {\n            result = [];\n            this.cache.set(templateId, result);\n        }\n        return result;\n    }\n    dispose() {\n        this.cache.forEach((cachedRows, templateId) => {\n            for (const cachedRow of cachedRows) {\n                const renderer = this.getRenderer(templateId);\n                renderer.disposeTemplate(cachedRow.templateData);\n                cachedRow.templateData = null;\n            }\n        });\n        this.cache.clear();\n        this.transactionNodesPendingRemoval.clear();\n    }\n    getRenderer(templateId) {\n        const renderer = this.renderers.get(templateId);\n        if (!renderer) {\n            throw new Error(`No renderer found for ${templateId}`);\n        }\n        return renderer;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { DataTransfers } from '../../dnd.js';\nimport { $, addDisposableListener, animate, getContentHeight, getContentWidth, getTopLeftOffset, scheduleAtNextAnimationFrame } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { SmoothScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { distinct, equals } from '../../../common/arrays.js';\nimport { Delayer, disposableTimeout } from '../../../common/async.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../common/lifecycle.js';\nimport { Range } from '../../../common/range.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport { RangeMap, shift } from './rangeMap.js';\nimport { RowCache } from './rowCache.js';\nimport { BugIndicatingError } from '../../../common/errors.js';\nconst StaticDND = {\n    CurrentDragAndDropData: undefined\n};\nconst DefaultOptions = {\n    useShadows: true,\n    verticalScrollMode: 1 /* ScrollbarVisibility.Auto */,\n    setRowLineHeight: true,\n    setRowHeight: true,\n    supportDynamicHeights: false,\n    dnd: {\n        getDragElements(e) { return [e]; },\n        getDragURI() { return null; },\n        onDragStart() { },\n        onDragOver() { return false; },\n        drop() { },\n        dispose() { }\n    },\n    horizontalScrolling: false,\n    transformOptimization: true,\n    alwaysConsumeMouseWheel: true,\n};\nexport class ElementsDragAndDropData {\n    constructor(elements) {\n        this.elements = elements;\n    }\n    update() { }\n    getData() {\n        return this.elements;\n    }\n}\nexport class ExternalElementsDragAndDropData {\n    constructor(elements) {\n        this.elements = elements;\n    }\n    update() { }\n    getData() {\n        return this.elements;\n    }\n}\nexport class NativeDragAndDropData {\n    constructor() {\n        this.types = [];\n        this.files = [];\n    }\n    update(dataTransfer) {\n        if (dataTransfer.types) {\n            this.types.splice(0, this.types.length, ...dataTransfer.types);\n        }\n        if (dataTransfer.files) {\n            this.files.splice(0, this.files.length);\n            for (let i = 0; i < dataTransfer.files.length; i++) {\n                const file = dataTransfer.files.item(i);\n                if (file && (file.size || file.type)) {\n                    this.files.push(file);\n                }\n            }\n        }\n    }\n    getData() {\n        return {\n            types: this.types,\n            files: this.files\n        };\n    }\n}\nfunction equalsDragFeedback(f1, f2) {\n    if (Array.isArray(f1) && Array.isArray(f2)) {\n        return equals(f1, f2);\n    }\n    return f1 === f2;\n}\nclass ListViewAccessibilityProvider {\n    constructor(accessibilityProvider) {\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.getSetSize) {\n            this.getSetSize = accessibilityProvider.getSetSize.bind(accessibilityProvider);\n        }\n        else {\n            this.getSetSize = (e, i, l) => l;\n        }\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.getPosInSet) {\n            this.getPosInSet = accessibilityProvider.getPosInSet.bind(accessibilityProvider);\n        }\n        else {\n            this.getPosInSet = (e, i) => i + 1;\n        }\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.getRole) {\n            this.getRole = accessibilityProvider.getRole.bind(accessibilityProvider);\n        }\n        else {\n            this.getRole = _ => 'listitem';\n        }\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.isChecked) {\n            this.isChecked = accessibilityProvider.isChecked.bind(accessibilityProvider);\n        }\n        else {\n            this.isChecked = _ => undefined;\n        }\n    }\n}\n/**\n * The {@link ListView} is a virtual scrolling engine.\n *\n * Given that it only renders elements within its viewport, it can hold large\n * collections of elements and stay very performant. The performance bottleneck\n * usually lies within the user's rendering code for each element.\n *\n * @remarks It is a low-level widget, not meant to be used directly. Refer to the\n * List widget instead.\n */\nexport class ListView {\n    get contentHeight() { return this.rangeMap.size; }\n    get onDidScroll() { return this.scrollableElement.onScroll; }\n    get horizontalScrolling() { return this._horizontalScrolling; }\n    set horizontalScrolling(value) {\n        if (value === this._horizontalScrolling) {\n            return;\n        }\n        if (value && this.supportDynamicHeights) {\n            throw new Error('Horizontal scrolling and dynamic heights not supported simultaneously');\n        }\n        this._horizontalScrolling = value;\n        this.domNode.classList.toggle('horizontal-scrolling', this._horizontalScrolling);\n        if (this._horizontalScrolling) {\n            for (const item of this.items) {\n                this.measureItemWidth(item);\n            }\n            this.updateScrollWidth();\n            this.scrollableElement.setScrollDimensions({ width: getContentWidth(this.domNode) });\n            this.rowsContainer.style.width = `${Math.max(this.scrollWidth || 0, this.renderWidth)}px`;\n        }\n        else {\n            this.scrollableElementWidthDelayer.cancel();\n            this.scrollableElement.setScrollDimensions({ width: this.renderWidth, scrollWidth: this.renderWidth });\n            this.rowsContainer.style.width = '';\n        }\n    }\n    constructor(container, virtualDelegate, renderers, options = DefaultOptions) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;\n        this.virtualDelegate = virtualDelegate;\n        this.domId = `list_id_${++ListView.InstanceCount}`;\n        this.renderers = new Map();\n        this.renderWidth = 0;\n        this._scrollHeight = 0;\n        this.scrollableElementUpdateDisposable = null;\n        this.scrollableElementWidthDelayer = new Delayer(50);\n        this.splicing = false;\n        this.dragOverAnimationStopDisposable = Disposable.None;\n        this.dragOverMouseY = 0;\n        this.canDrop = false;\n        this.currentDragFeedbackDisposable = Disposable.None;\n        this.onDragLeaveTimeout = Disposable.None;\n        this.disposables = new DisposableStore();\n        this._onDidChangeContentHeight = new Emitter();\n        this._onDidChangeContentWidth = new Emitter();\n        this._horizontalScrolling = false;\n        if (options.horizontalScrolling && options.supportDynamicHeights) {\n            throw new Error('Horizontal scrolling and dynamic heights not supported simultaneously');\n        }\n        this.items = [];\n        this.itemId = 0;\n        this.rangeMap = new RangeMap((_a = options.paddingTop) !== null && _a !== void 0 ? _a : 0);\n        for (const renderer of renderers) {\n            this.renderers.set(renderer.templateId, renderer);\n        }\n        this.cache = this.disposables.add(new RowCache(this.renderers));\n        this.lastRenderTop = 0;\n        this.lastRenderHeight = 0;\n        this.domNode = document.createElement('div');\n        this.domNode.className = 'monaco-list';\n        this.domNode.classList.add(this.domId);\n        this.domNode.tabIndex = 0;\n        this.domNode.classList.toggle('mouse-support', typeof options.mouseSupport === 'boolean' ? options.mouseSupport : true);\n        this._horizontalScrolling = (_b = options.horizontalScrolling) !== null && _b !== void 0 ? _b : DefaultOptions.horizontalScrolling;\n        this.domNode.classList.toggle('horizontal-scrolling', this._horizontalScrolling);\n        this.paddingBottom = typeof options.paddingBottom === 'undefined' ? 0 : options.paddingBottom;\n        this.accessibilityProvider = new ListViewAccessibilityProvider(options.accessibilityProvider);\n        this.rowsContainer = document.createElement('div');\n        this.rowsContainer.className = 'monaco-list-rows';\n        const transformOptimization = (_c = options.transformOptimization) !== null && _c !== void 0 ? _c : DefaultOptions.transformOptimization;\n        if (transformOptimization) {\n            this.rowsContainer.style.transform = 'translate3d(0px, 0px, 0px)';\n            this.rowsContainer.style.overflow = 'hidden';\n            this.rowsContainer.style.contain = 'strict';\n        }\n        this.disposables.add(Gesture.addTarget(this.rowsContainer));\n        this.scrollable = this.disposables.add(new Scrollable({\n            forceIntegerValues: true,\n            smoothScrollDuration: ((_d = options.smoothScrolling) !== null && _d !== void 0 ? _d : false) ? 125 : 0,\n            scheduleAtNextAnimationFrame: cb => scheduleAtNextAnimationFrame(cb)\n        }));\n        this.scrollableElement = this.disposables.add(new SmoothScrollableElement(this.rowsContainer, {\n            alwaysConsumeMouseWheel: (_e = options.alwaysConsumeMouseWheel) !== null && _e !== void 0 ? _e : DefaultOptions.alwaysConsumeMouseWheel,\n            horizontal: 1 /* ScrollbarVisibility.Auto */,\n            vertical: (_f = options.verticalScrollMode) !== null && _f !== void 0 ? _f : DefaultOptions.verticalScrollMode,\n            useShadows: (_g = options.useShadows) !== null && _g !== void 0 ? _g : DefaultOptions.useShadows,\n            mouseWheelScrollSensitivity: options.mouseWheelScrollSensitivity,\n            fastScrollSensitivity: options.fastScrollSensitivity,\n            scrollByPage: options.scrollByPage\n        }, this.scrollable));\n        this.domNode.appendChild(this.scrollableElement.getDomNode());\n        container.appendChild(this.domNode);\n        this.scrollableElement.onScroll(this.onScroll, this, this.disposables);\n        this.disposables.add(addDisposableListener(this.rowsContainer, TouchEventType.Change, e => this.onTouchChange(e)));\n        // Prevent the monaco-scrollable-element from scrolling\n        // https://github.com/microsoft/vscode/issues/44181\n        this.disposables.add(addDisposableListener(this.scrollableElement.getDomNode(), 'scroll', e => e.target.scrollTop = 0));\n        this.disposables.add(addDisposableListener(this.domNode, 'dragover', e => this.onDragOver(this.toDragEvent(e))));\n        this.disposables.add(addDisposableListener(this.domNode, 'drop', e => this.onDrop(this.toDragEvent(e))));\n        this.disposables.add(addDisposableListener(this.domNode, 'dragleave', e => this.onDragLeave(this.toDragEvent(e))));\n        this.disposables.add(addDisposableListener(this.domNode, 'dragend', e => this.onDragEnd(e)));\n        this.setRowLineHeight = (_h = options.setRowLineHeight) !== null && _h !== void 0 ? _h : DefaultOptions.setRowLineHeight;\n        this.setRowHeight = (_j = options.setRowHeight) !== null && _j !== void 0 ? _j : DefaultOptions.setRowHeight;\n        this.supportDynamicHeights = (_k = options.supportDynamicHeights) !== null && _k !== void 0 ? _k : DefaultOptions.supportDynamicHeights;\n        this.dnd = (_l = options.dnd) !== null && _l !== void 0 ? _l : this.disposables.add(DefaultOptions.dnd);\n        this.layout((_m = options.initialSize) === null || _m === void 0 ? void 0 : _m.height, (_o = options.initialSize) === null || _o === void 0 ? void 0 : _o.width);\n    }\n    updateOptions(options) {\n        if (options.paddingBottom !== undefined) {\n            this.paddingBottom = options.paddingBottom;\n            this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n        }\n        if (options.smoothScrolling !== undefined) {\n            this.scrollable.setSmoothScrollDuration(options.smoothScrolling ? 125 : 0);\n        }\n        if (options.horizontalScrolling !== undefined) {\n            this.horizontalScrolling = options.horizontalScrolling;\n        }\n        let scrollableOptions;\n        if (options.scrollByPage !== undefined) {\n            scrollableOptions = Object.assign(Object.assign({}, (scrollableOptions !== null && scrollableOptions !== void 0 ? scrollableOptions : {})), { scrollByPage: options.scrollByPage });\n        }\n        if (options.mouseWheelScrollSensitivity !== undefined) {\n            scrollableOptions = Object.assign(Object.assign({}, (scrollableOptions !== null && scrollableOptions !== void 0 ? scrollableOptions : {})), { mouseWheelScrollSensitivity: options.mouseWheelScrollSensitivity });\n        }\n        if (options.fastScrollSensitivity !== undefined) {\n            scrollableOptions = Object.assign(Object.assign({}, (scrollableOptions !== null && scrollableOptions !== void 0 ? scrollableOptions : {})), { fastScrollSensitivity: options.fastScrollSensitivity });\n        }\n        if (scrollableOptions) {\n            this.scrollableElement.updateOptions(scrollableOptions);\n        }\n        if (options.paddingTop !== undefined && options.paddingTop !== this.rangeMap.paddingTop) {\n            // trigger a rerender\n            const lastRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n            const offset = options.paddingTop - this.rangeMap.paddingTop;\n            this.rangeMap.paddingTop = options.paddingTop;\n            this.render(lastRenderRange, Math.max(0, this.lastRenderTop + offset), this.lastRenderHeight, undefined, undefined, true);\n            this.setScrollTop(this.lastRenderTop);\n            this.eventuallyUpdateScrollDimensions();\n            if (this.supportDynamicHeights) {\n                this._rerender(this.lastRenderTop, this.lastRenderHeight);\n            }\n        }\n    }\n    splice(start, deleteCount, elements = []) {\n        if (this.splicing) {\n            throw new Error('Can\\'t run recursive splices.');\n        }\n        this.splicing = true;\n        try {\n            return this._splice(start, deleteCount, elements);\n        }\n        finally {\n            this.splicing = false;\n            this._onDidChangeContentHeight.fire(this.contentHeight);\n        }\n    }\n    _splice(start, deleteCount, elements = []) {\n        const previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n        const deleteRange = { start, end: start + deleteCount };\n        const removeRange = Range.intersect(previousRenderRange, deleteRange);\n        // try to reuse rows, avoid removing them from DOM\n        const rowsToDispose = new Map();\n        for (let i = removeRange.end - 1; i >= removeRange.start; i--) {\n            const item = this.items[i];\n            item.dragStartDisposable.dispose();\n            item.checkedDisposable.dispose();\n            if (item.row) {\n                let rows = rowsToDispose.get(item.templateId);\n                if (!rows) {\n                    rows = [];\n                    rowsToDispose.set(item.templateId, rows);\n                }\n                const renderer = this.renderers.get(item.templateId);\n                if (renderer && renderer.disposeElement) {\n                    renderer.disposeElement(item.element, i, item.row.templateData, item.size);\n                }\n                rows.push(item.row);\n            }\n            item.row = null;\n        }\n        const previousRestRange = { start: start + deleteCount, end: this.items.length };\n        const previousRenderedRestRange = Range.intersect(previousRestRange, previousRenderRange);\n        const previousUnrenderedRestRanges = Range.relativeComplement(previousRestRange, previousRenderRange);\n        const inserted = elements.map(element => ({\n            id: String(this.itemId++),\n            element,\n            templateId: this.virtualDelegate.getTemplateId(element),\n            size: this.virtualDelegate.getHeight(element),\n            width: undefined,\n            hasDynamicHeight: !!this.virtualDelegate.hasDynamicHeight && this.virtualDelegate.hasDynamicHeight(element),\n            lastDynamicHeightWidth: undefined,\n            row: null,\n            uri: undefined,\n            dropTarget: false,\n            dragStartDisposable: Disposable.None,\n            checkedDisposable: Disposable.None\n        }));\n        let deleted;\n        // TODO@joao: improve this optimization to catch even more cases\n        if (start === 0 && deleteCount >= this.items.length) {\n            this.rangeMap = new RangeMap(this.rangeMap.paddingTop);\n            this.rangeMap.splice(0, 0, inserted);\n            deleted = this.items;\n            this.items = inserted;\n        }\n        else {\n            this.rangeMap.splice(start, deleteCount, inserted);\n            deleted = this.items.splice(start, deleteCount, ...inserted);\n        }\n        const delta = elements.length - deleteCount;\n        const renderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n        const renderedRestRange = shift(previousRenderedRestRange, delta);\n        const updateRange = Range.intersect(renderRange, renderedRestRange);\n        for (let i = updateRange.start; i < updateRange.end; i++) {\n            this.updateItemInDOM(this.items[i], i);\n        }\n        const removeRanges = Range.relativeComplement(renderedRestRange, renderRange);\n        for (const range of removeRanges) {\n            for (let i = range.start; i < range.end; i++) {\n                this.removeItemFromDOM(i);\n            }\n        }\n        const unrenderedRestRanges = previousUnrenderedRestRanges.map(r => shift(r, delta));\n        const elementsRange = { start, end: start + elements.length };\n        const insertRanges = [elementsRange, ...unrenderedRestRanges].map(r => Range.intersect(renderRange, r));\n        const beforeElement = this.getNextToLastElement(insertRanges);\n        for (const range of insertRanges) {\n            for (let i = range.start; i < range.end; i++) {\n                const item = this.items[i];\n                const rows = rowsToDispose.get(item.templateId);\n                const row = rows === null || rows === void 0 ? void 0 : rows.pop();\n                this.insertItemInDOM(i, beforeElement, row);\n            }\n        }\n        for (const rows of rowsToDispose.values()) {\n            for (const row of rows) {\n                this.cache.release(row);\n            }\n        }\n        this.eventuallyUpdateScrollDimensions();\n        if (this.supportDynamicHeights) {\n            this._rerender(this.scrollTop, this.renderHeight);\n        }\n        return deleted.map(i => i.element);\n    }\n    eventuallyUpdateScrollDimensions() {\n        this._scrollHeight = this.contentHeight;\n        this.rowsContainer.style.height = `${this._scrollHeight}px`;\n        if (!this.scrollableElementUpdateDisposable) {\n            this.scrollableElementUpdateDisposable = scheduleAtNextAnimationFrame(() => {\n                this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n                this.updateScrollWidth();\n                this.scrollableElementUpdateDisposable = null;\n            });\n        }\n    }\n    eventuallyUpdateScrollWidth() {\n        if (!this.horizontalScrolling) {\n            this.scrollableElementWidthDelayer.cancel();\n            return;\n        }\n        this.scrollableElementWidthDelayer.trigger(() => this.updateScrollWidth());\n    }\n    updateScrollWidth() {\n        if (!this.horizontalScrolling) {\n            return;\n        }\n        let scrollWidth = 0;\n        for (const item of this.items) {\n            if (typeof item.width !== 'undefined') {\n                scrollWidth = Math.max(scrollWidth, item.width);\n            }\n        }\n        this.scrollWidth = scrollWidth;\n        this.scrollableElement.setScrollDimensions({ scrollWidth: scrollWidth === 0 ? 0 : (scrollWidth + 10) });\n        this._onDidChangeContentWidth.fire(this.scrollWidth);\n    }\n    rerender() {\n        if (!this.supportDynamicHeights) {\n            return;\n        }\n        for (const item of this.items) {\n            item.lastDynamicHeightWidth = undefined;\n        }\n        this._rerender(this.lastRenderTop, this.lastRenderHeight);\n    }\n    get length() {\n        return this.items.length;\n    }\n    get renderHeight() {\n        const scrollDimensions = this.scrollableElement.getScrollDimensions();\n        return scrollDimensions.height;\n    }\n    get firstVisibleIndex() {\n        const range = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n        const firstElTop = this.rangeMap.positionAt(range.start);\n        const nextElTop = this.rangeMap.positionAt(range.start + 1);\n        if (nextElTop !== -1) {\n            const firstElMidpoint = (nextElTop - firstElTop) / 2 + firstElTop;\n            if (firstElMidpoint < this.scrollTop) {\n                return range.start + 1;\n            }\n        }\n        return range.start;\n    }\n    element(index) {\n        return this.items[index].element;\n    }\n    domElement(index) {\n        const row = this.items[index].row;\n        return row && row.domNode;\n    }\n    elementHeight(index) {\n        return this.items[index].size;\n    }\n    elementTop(index) {\n        return this.rangeMap.positionAt(index);\n    }\n    indexAt(position) {\n        return this.rangeMap.indexAt(position);\n    }\n    indexAfter(position) {\n        return this.rangeMap.indexAfter(position);\n    }\n    layout(height, width) {\n        const scrollDimensions = {\n            height: typeof height === 'number' ? height : getContentHeight(this.domNode)\n        };\n        if (this.scrollableElementUpdateDisposable) {\n            this.scrollableElementUpdateDisposable.dispose();\n            this.scrollableElementUpdateDisposable = null;\n            scrollDimensions.scrollHeight = this.scrollHeight;\n        }\n        this.scrollableElement.setScrollDimensions(scrollDimensions);\n        if (typeof width !== 'undefined') {\n            this.renderWidth = width;\n            if (this.supportDynamicHeights) {\n                this._rerender(this.scrollTop, this.renderHeight);\n            }\n        }\n        if (this.horizontalScrolling) {\n            this.scrollableElement.setScrollDimensions({\n                width: typeof width === 'number' ? width : getContentWidth(this.domNode)\n            });\n        }\n    }\n    // Render\n    render(previousRenderRange, renderTop, renderHeight, renderLeft, scrollWidth, updateItemsInDOM = false) {\n        const renderRange = this.getRenderRange(renderTop, renderHeight);\n        const rangesToInsert = Range.relativeComplement(renderRange, previousRenderRange);\n        const rangesToRemove = Range.relativeComplement(previousRenderRange, renderRange);\n        const beforeElement = this.getNextToLastElement(rangesToInsert);\n        if (updateItemsInDOM) {\n            const rangesToUpdate = Range.intersect(previousRenderRange, renderRange);\n            for (let i = rangesToUpdate.start; i < rangesToUpdate.end; i++) {\n                this.updateItemInDOM(this.items[i], i);\n            }\n        }\n        this.cache.transact(() => {\n            for (const range of rangesToRemove) {\n                for (let i = range.start; i < range.end; i++) {\n                    this.removeItemFromDOM(i);\n                }\n            }\n            for (const range of rangesToInsert) {\n                for (let i = range.start; i < range.end; i++) {\n                    this.insertItemInDOM(i, beforeElement);\n                }\n            }\n        });\n        if (renderLeft !== undefined) {\n            this.rowsContainer.style.left = `-${renderLeft}px`;\n        }\n        this.rowsContainer.style.top = `-${renderTop}px`;\n        if (this.horizontalScrolling && scrollWidth !== undefined) {\n            this.rowsContainer.style.width = `${Math.max(scrollWidth, this.renderWidth)}px`;\n        }\n        this.lastRenderTop = renderTop;\n        this.lastRenderHeight = renderHeight;\n    }\n    // DOM operations\n    insertItemInDOM(index, beforeElement, row) {\n        const item = this.items[index];\n        let isStale = false;\n        if (!item.row) {\n            if (row) {\n                item.row = row;\n            }\n            else {\n                const result = this.cache.alloc(item.templateId);\n                item.row = result.row;\n                isStale = result.isReusingConnectedDomNode;\n            }\n        }\n        const role = this.accessibilityProvider.getRole(item.element) || 'listitem';\n        item.row.domNode.setAttribute('role', role);\n        const checked = this.accessibilityProvider.isChecked(item.element);\n        if (typeof checked === 'boolean') {\n            item.row.domNode.setAttribute('aria-checked', String(!!checked));\n        }\n        else if (checked) {\n            const update = (checked) => item.row.domNode.setAttribute('aria-checked', String(!!checked));\n            update(checked.value);\n            item.checkedDisposable = checked.onDidChange(update);\n        }\n        if (isStale || !item.row.domNode.parentElement) {\n            if (beforeElement) {\n                this.rowsContainer.insertBefore(item.row.domNode, beforeElement);\n            }\n            else {\n                this.rowsContainer.appendChild(item.row.domNode);\n            }\n        }\n        this.updateItemInDOM(item, index);\n        const renderer = this.renderers.get(item.templateId);\n        if (!renderer) {\n            throw new Error(`No renderer found for template id ${item.templateId}`);\n        }\n        renderer === null || renderer === void 0 ? void 0 : renderer.renderElement(item.element, index, item.row.templateData, item.size);\n        const uri = this.dnd.getDragURI(item.element);\n        item.dragStartDisposable.dispose();\n        item.row.domNode.draggable = !!uri;\n        if (uri) {\n            item.dragStartDisposable = addDisposableListener(item.row.domNode, 'dragstart', event => this.onDragStart(item.element, uri, event));\n        }\n        if (this.horizontalScrolling) {\n            this.measureItemWidth(item);\n            this.eventuallyUpdateScrollWidth();\n        }\n    }\n    measureItemWidth(item) {\n        if (!item.row || !item.row.domNode) {\n            return;\n        }\n        item.row.domNode.style.width = 'fit-content';\n        item.width = getContentWidth(item.row.domNode);\n        const style = window.getComputedStyle(item.row.domNode);\n        if (style.paddingLeft) {\n            item.width += parseFloat(style.paddingLeft);\n        }\n        if (style.paddingRight) {\n            item.width += parseFloat(style.paddingRight);\n        }\n        item.row.domNode.style.width = '';\n    }\n    updateItemInDOM(item, index) {\n        item.row.domNode.style.top = `${this.elementTop(index)}px`;\n        if (this.setRowHeight) {\n            item.row.domNode.style.height = `${item.size}px`;\n        }\n        if (this.setRowLineHeight) {\n            item.row.domNode.style.lineHeight = `${item.size}px`;\n        }\n        item.row.domNode.setAttribute('data-index', `${index}`);\n        item.row.domNode.setAttribute('data-last-element', index === this.length - 1 ? 'true' : 'false');\n        item.row.domNode.setAttribute('data-parity', index % 2 === 0 ? 'even' : 'odd');\n        item.row.domNode.setAttribute('aria-setsize', String(this.accessibilityProvider.getSetSize(item.element, index, this.length)));\n        item.row.domNode.setAttribute('aria-posinset', String(this.accessibilityProvider.getPosInSet(item.element, index)));\n        item.row.domNode.setAttribute('id', this.getElementDomId(index));\n        item.row.domNode.classList.toggle('drop-target', item.dropTarget);\n    }\n    removeItemFromDOM(index) {\n        const item = this.items[index];\n        item.dragStartDisposable.dispose();\n        item.checkedDisposable.dispose();\n        if (item.row) {\n            const renderer = this.renderers.get(item.templateId);\n            if (renderer && renderer.disposeElement) {\n                renderer.disposeElement(item.element, index, item.row.templateData, item.size);\n            }\n            this.cache.release(item.row);\n            item.row = null;\n        }\n        if (this.horizontalScrolling) {\n            this.eventuallyUpdateScrollWidth();\n        }\n    }\n    getScrollTop() {\n        const scrollPosition = this.scrollableElement.getScrollPosition();\n        return scrollPosition.scrollTop;\n    }\n    setScrollTop(scrollTop, reuseAnimation) {\n        if (this.scrollableElementUpdateDisposable) {\n            this.scrollableElementUpdateDisposable.dispose();\n            this.scrollableElementUpdateDisposable = null;\n            this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n        }\n        this.scrollableElement.setScrollPosition({ scrollTop, reuseAnimation });\n    }\n    get scrollTop() {\n        return this.getScrollTop();\n    }\n    set scrollTop(scrollTop) {\n        this.setScrollTop(scrollTop);\n    }\n    get scrollHeight() {\n        return this._scrollHeight + (this.horizontalScrolling ? 10 : 0) + this.paddingBottom;\n    }\n    // Events\n    get onMouseClick() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'click')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseDblClick() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'dblclick')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseMiddleClick() { return Event.filter(Event.map(this.disposables.add(new DomEmitter(this.domNode, 'auxclick')).event, e => this.toMouseEvent(e), this.disposables), e => e.browserEvent.button === 1, this.disposables); }\n    get onMouseDown() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mousedown')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseOver() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mouseover')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseOut() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mouseout')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onContextMenu() { return Event.any(Event.map(this.disposables.add(new DomEmitter(this.domNode, 'contextmenu')).event, e => this.toMouseEvent(e), this.disposables), Event.map(this.disposables.add(new DomEmitter(this.domNode, TouchEventType.Contextmenu)).event, e => this.toGestureEvent(e), this.disposables)); }\n    get onTouchStart() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'touchstart')).event, e => this.toTouchEvent(e), this.disposables); }\n    get onTap() { return Event.map(this.disposables.add(new DomEmitter(this.rowsContainer, TouchEventType.Tap)).event, e => this.toGestureEvent(e), this.disposables); }\n    toMouseEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    toTouchEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    toGestureEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.initialTarget || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    toDragEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    onScroll(e) {\n        try {\n            const previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n            this.render(previousRenderRange, e.scrollTop, e.height, e.scrollLeft, e.scrollWidth);\n            if (this.supportDynamicHeights) {\n                this._rerender(e.scrollTop, e.height, e.inSmoothScrolling);\n            }\n        }\n        catch (err) {\n            console.error('Got bad scroll event:', e);\n            throw err;\n        }\n    }\n    onTouchChange(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.scrollTop -= event.translationY;\n    }\n    // DND\n    onDragStart(element, uri, event) {\n        var _a, _b;\n        if (!event.dataTransfer) {\n            return;\n        }\n        const elements = this.dnd.getDragElements(element);\n        event.dataTransfer.effectAllowed = 'copyMove';\n        event.dataTransfer.setData(DataTransfers.TEXT, uri);\n        if (event.dataTransfer.setDragImage) {\n            let label;\n            if (this.dnd.getDragLabel) {\n                label = this.dnd.getDragLabel(elements, event);\n            }\n            if (typeof label === 'undefined') {\n                label = String(elements.length);\n            }\n            const dragImage = $('.monaco-drag-image');\n            dragImage.textContent = label;\n            const getDragImageContainer = (e) => {\n                while (e && !e.classList.contains('monaco-workbench')) {\n                    e = e.parentElement;\n                }\n                return e || document.body;\n            };\n            const container = getDragImageContainer(this.domNode);\n            container.appendChild(dragImage);\n            event.dataTransfer.setDragImage(dragImage, -10, -10);\n            setTimeout(() => container.removeChild(dragImage), 0);\n        }\n        this.domNode.classList.add('dragging');\n        this.currentDragData = new ElementsDragAndDropData(elements);\n        StaticDND.CurrentDragAndDropData = new ExternalElementsDragAndDropData(elements);\n        (_b = (_a = this.dnd).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, this.currentDragData, event);\n    }\n    onDragOver(event) {\n        var _a;\n        event.browserEvent.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\n        this.onDragLeaveTimeout.dispose();\n        if (StaticDND.CurrentDragAndDropData && StaticDND.CurrentDragAndDropData.getData() === 'vscode-ui') {\n            return false;\n        }\n        this.setupDragAndDropScrollTopAnimation(event.browserEvent);\n        if (!event.browserEvent.dataTransfer) {\n            return false;\n        }\n        // Drag over from outside\n        if (!this.currentDragData) {\n            if (StaticDND.CurrentDragAndDropData) {\n                // Drag over from another list\n                this.currentDragData = StaticDND.CurrentDragAndDropData;\n            }\n            else {\n                // Drag over from the desktop\n                if (!event.browserEvent.dataTransfer.types) {\n                    return false;\n                }\n                this.currentDragData = new NativeDragAndDropData();\n            }\n        }\n        const result = this.dnd.onDragOver(this.currentDragData, event.element, event.index, event.browserEvent);\n        this.canDrop = typeof result === 'boolean' ? result : result.accept;\n        if (!this.canDrop) {\n            this.currentDragFeedback = undefined;\n            this.currentDragFeedbackDisposable.dispose();\n            return false;\n        }\n        event.browserEvent.dataTransfer.dropEffect = (typeof result !== 'boolean' && result.effect === 0 /* ListDragOverEffect.Copy */) ? 'copy' : 'move';\n        let feedback;\n        if (typeof result !== 'boolean' && result.feedback) {\n            feedback = result.feedback;\n        }\n        else {\n            if (typeof event.index === 'undefined') {\n                feedback = [-1];\n            }\n            else {\n                feedback = [event.index];\n            }\n        }\n        // sanitize feedback list\n        feedback = distinct(feedback).filter(i => i >= -1 && i < this.length).sort((a, b) => a - b);\n        feedback = feedback[0] === -1 ? [-1] : feedback;\n        if (equalsDragFeedback(this.currentDragFeedback, feedback)) {\n            return true;\n        }\n        this.currentDragFeedback = feedback;\n        this.currentDragFeedbackDisposable.dispose();\n        if (feedback[0] === -1) { // entire list feedback\n            this.domNode.classList.add('drop-target');\n            this.rowsContainer.classList.add('drop-target');\n            this.currentDragFeedbackDisposable = toDisposable(() => {\n                this.domNode.classList.remove('drop-target');\n                this.rowsContainer.classList.remove('drop-target');\n            });\n        }\n        else {\n            for (const index of feedback) {\n                const item = this.items[index];\n                item.dropTarget = true;\n                (_a = item.row) === null || _a === void 0 ? void 0 : _a.domNode.classList.add('drop-target');\n            }\n            this.currentDragFeedbackDisposable = toDisposable(() => {\n                var _a;\n                for (const index of feedback) {\n                    const item = this.items[index];\n                    item.dropTarget = false;\n                    (_a = item.row) === null || _a === void 0 ? void 0 : _a.domNode.classList.remove('drop-target');\n                }\n            });\n        }\n        return true;\n    }\n    onDragLeave(event) {\n        var _a, _b;\n        this.onDragLeaveTimeout.dispose();\n        this.onDragLeaveTimeout = disposableTimeout(() => this.clearDragOverFeedback(), 100, this.disposables);\n        if (this.currentDragData) {\n            (_b = (_a = this.dnd).onDragLeave) === null || _b === void 0 ? void 0 : _b.call(_a, this.currentDragData, event.element, event.index, event.browserEvent);\n        }\n    }\n    onDrop(event) {\n        if (!this.canDrop) {\n            return;\n        }\n        const dragData = this.currentDragData;\n        this.teardownDragAndDropScrollTopAnimation();\n        this.clearDragOverFeedback();\n        this.domNode.classList.remove('dragging');\n        this.currentDragData = undefined;\n        StaticDND.CurrentDragAndDropData = undefined;\n        if (!dragData || !event.browserEvent.dataTransfer) {\n            return;\n        }\n        event.browserEvent.preventDefault();\n        dragData.update(event.browserEvent.dataTransfer);\n        this.dnd.drop(dragData, event.element, event.index, event.browserEvent);\n    }\n    onDragEnd(event) {\n        var _a, _b;\n        this.canDrop = false;\n        this.teardownDragAndDropScrollTopAnimation();\n        this.clearDragOverFeedback();\n        this.domNode.classList.remove('dragging');\n        this.currentDragData = undefined;\n        StaticDND.CurrentDragAndDropData = undefined;\n        (_b = (_a = this.dnd).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, event);\n    }\n    clearDragOverFeedback() {\n        this.currentDragFeedback = undefined;\n        this.currentDragFeedbackDisposable.dispose();\n        this.currentDragFeedbackDisposable = Disposable.None;\n    }\n    // DND scroll top animation\n    setupDragAndDropScrollTopAnimation(event) {\n        if (!this.dragOverAnimationDisposable) {\n            const viewTop = getTopLeftOffset(this.domNode).top;\n            this.dragOverAnimationDisposable = animate(this.animateDragAndDropScrollTop.bind(this, viewTop));\n        }\n        this.dragOverAnimationStopDisposable.dispose();\n        this.dragOverAnimationStopDisposable = disposableTimeout(() => {\n            if (this.dragOverAnimationDisposable) {\n                this.dragOverAnimationDisposable.dispose();\n                this.dragOverAnimationDisposable = undefined;\n            }\n        }, 1000, this.disposables);\n        this.dragOverMouseY = event.pageY;\n    }\n    animateDragAndDropScrollTop(viewTop) {\n        if (this.dragOverMouseY === undefined) {\n            return;\n        }\n        const diff = this.dragOverMouseY - viewTop;\n        const upperLimit = this.renderHeight - 35;\n        if (diff < 35) {\n            this.scrollTop += Math.max(-14, Math.floor(0.3 * (diff - 35)));\n        }\n        else if (diff > upperLimit) {\n            this.scrollTop += Math.min(14, Math.floor(0.3 * (diff - upperLimit)));\n        }\n    }\n    teardownDragAndDropScrollTopAnimation() {\n        this.dragOverAnimationStopDisposable.dispose();\n        if (this.dragOverAnimationDisposable) {\n            this.dragOverAnimationDisposable.dispose();\n            this.dragOverAnimationDisposable = undefined;\n        }\n    }\n    // Util\n    getItemIndexFromEventTarget(target) {\n        const scrollableElement = this.scrollableElement.getDomNode();\n        let element = target;\n        while (element instanceof HTMLElement && element !== this.rowsContainer && scrollableElement.contains(element)) {\n            const rawIndex = element.getAttribute('data-index');\n            if (rawIndex) {\n                const index = Number(rawIndex);\n                if (!isNaN(index)) {\n                    return index;\n                }\n            }\n            element = element.parentElement;\n        }\n        return undefined;\n    }\n    getRenderRange(renderTop, renderHeight) {\n        return {\n            start: this.rangeMap.indexAt(renderTop),\n            end: this.rangeMap.indexAfter(renderTop + renderHeight - 1)\n        };\n    }\n    /**\n     * Given a stable rendered state, checks every rendered element whether it needs\n     * to be probed for dynamic height. Adjusts scroll height and top if necessary.\n     */\n    _rerender(renderTop, renderHeight, inSmoothScrolling) {\n        const previousRenderRange = this.getRenderRange(renderTop, renderHeight);\n        // Let's remember the second element's position, this helps in scrolling up\n        // and preserving a linear upwards scroll movement\n        let anchorElementIndex;\n        let anchorElementTopDelta;\n        if (renderTop === this.elementTop(previousRenderRange.start)) {\n            anchorElementIndex = previousRenderRange.start;\n            anchorElementTopDelta = 0;\n        }\n        else if (previousRenderRange.end - previousRenderRange.start > 1) {\n            anchorElementIndex = previousRenderRange.start + 1;\n            anchorElementTopDelta = this.elementTop(anchorElementIndex) - renderTop;\n        }\n        let heightDiff = 0;\n        while (true) {\n            const renderRange = this.getRenderRange(renderTop, renderHeight);\n            let didChange = false;\n            for (let i = renderRange.start; i < renderRange.end; i++) {\n                const diff = this.probeDynamicHeight(i);\n                if (diff !== 0) {\n                    this.rangeMap.splice(i, 1, [this.items[i]]);\n                }\n                heightDiff += diff;\n                didChange = didChange || diff !== 0;\n            }\n            if (!didChange) {\n                if (heightDiff !== 0) {\n                    this.eventuallyUpdateScrollDimensions();\n                }\n                const unrenderRanges = Range.relativeComplement(previousRenderRange, renderRange);\n                for (const range of unrenderRanges) {\n                    for (let i = range.start; i < range.end; i++) {\n                        if (this.items[i].row) {\n                            this.removeItemFromDOM(i);\n                        }\n                    }\n                }\n                const renderRanges = Range.relativeComplement(renderRange, previousRenderRange);\n                for (const range of renderRanges) {\n                    for (let i = range.start; i < range.end; i++) {\n                        const afterIndex = i + 1;\n                        const beforeRow = afterIndex < this.items.length ? this.items[afterIndex].row : null;\n                        const beforeElement = beforeRow ? beforeRow.domNode : null;\n                        this.insertItemInDOM(i, beforeElement);\n                    }\n                }\n                for (let i = renderRange.start; i < renderRange.end; i++) {\n                    if (this.items[i].row) {\n                        this.updateItemInDOM(this.items[i], i);\n                    }\n                }\n                if (typeof anchorElementIndex === 'number') {\n                    // To compute a destination scroll top, we need to take into account the current smooth scrolling\n                    // animation, and then reuse it with a new target (to avoid prolonging the scroll)\n                    // See https://github.com/microsoft/vscode/issues/104144\n                    // See https://github.com/microsoft/vscode/pull/104284\n                    // See https://github.com/microsoft/vscode/issues/107704\n                    const deltaScrollTop = this.scrollable.getFutureScrollPosition().scrollTop - renderTop;\n                    const newScrollTop = this.elementTop(anchorElementIndex) - anchorElementTopDelta + deltaScrollTop;\n                    this.setScrollTop(newScrollTop, inSmoothScrolling);\n                }\n                this._onDidChangeContentHeight.fire(this.contentHeight);\n                return;\n            }\n        }\n    }\n    probeDynamicHeight(index) {\n        var _a, _b, _c;\n        const item = this.items[index];\n        if (!!this.virtualDelegate.getDynamicHeight) {\n            const newSize = this.virtualDelegate.getDynamicHeight(item.element);\n            if (newSize !== null) {\n                const size = item.size;\n                item.size = newSize;\n                item.lastDynamicHeightWidth = this.renderWidth;\n                return newSize - size;\n            }\n        }\n        if (!item.hasDynamicHeight || item.lastDynamicHeightWidth === this.renderWidth) {\n            return 0;\n        }\n        if (!!this.virtualDelegate.hasDynamicHeight && !this.virtualDelegate.hasDynamicHeight(item.element)) {\n            return 0;\n        }\n        const size = item.size;\n        if (item.row) {\n            item.row.domNode.style.height = '';\n            item.size = item.row.domNode.offsetHeight;\n            item.lastDynamicHeightWidth = this.renderWidth;\n            return item.size - size;\n        }\n        const { row } = this.cache.alloc(item.templateId);\n        row.domNode.style.height = '';\n        this.rowsContainer.appendChild(row.domNode);\n        const renderer = this.renderers.get(item.templateId);\n        if (!renderer) {\n            throw new BugIndicatingError('Missing renderer for templateId: ' + item.templateId);\n        }\n        renderer.renderElement(item.element, index, row.templateData, undefined);\n        item.size = row.domNode.offsetHeight;\n        (_a = renderer.disposeElement) === null || _a === void 0 ? void 0 : _a.call(renderer, item.element, index, row.templateData, undefined);\n        (_c = (_b = this.virtualDelegate).setDynamicHeight) === null || _c === void 0 ? void 0 : _c.call(_b, item.element, item.size);\n        item.lastDynamicHeightWidth = this.renderWidth;\n        this.rowsContainer.removeChild(row.domNode);\n        this.cache.release(row);\n        return item.size - size;\n    }\n    getNextToLastElement(ranges) {\n        const lastRange = ranges[ranges.length - 1];\n        if (!lastRange) {\n            return null;\n        }\n        const nextToLastItem = this.items[lastRange.end];\n        if (!nextToLastItem) {\n            return null;\n        }\n        if (!nextToLastItem.row) {\n            return null;\n        }\n        return nextToLastItem.row.domNode;\n    }\n    getElementDomId(index) {\n        return `${this.domId}_${index}`;\n    }\n    // Dispose\n    dispose() {\n        var _a, _b;\n        for (const item of this.items) {\n            item.dragStartDisposable.dispose();\n            item.checkedDisposable.dispose();\n            if (item.row) {\n                const renderer = this.renderers.get(item.row.templateId);\n                if (renderer) {\n                    (_a = renderer.disposeElement) === null || _a === void 0 ? void 0 : _a.call(renderer, item.element, -1, item.row.templateData, undefined);\n                    renderer.disposeTemplate(item.row.templateData);\n                }\n            }\n        }\n        this.items = [];\n        if (this.domNode && this.domNode.parentNode) {\n            this.domNode.parentNode.removeChild(this.domNode);\n        }\n        (_b = this.dragOverAnimationDisposable) === null || _b === void 0 ? void 0 : _b.dispose();\n        this.disposables.dispose();\n    }\n}\nListView.InstanceCount = 0;\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseClick\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseDblClick\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseMiddleClick\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseDown\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseOver\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseOut\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onContextMenu\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onTouchStart\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onTap\", null);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class CombinedSpliceable {\n    constructor(spliceables) {\n        this.spliceables = spliceables;\n    }\n    splice(start, deleteCount, elements) {\n        this.spliceables.forEach(s => s.splice(start, deleteCount, elements));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class ListError extends Error {\n    constructor(user, message) {\n        super(`ListError [${user}] ${message}`);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { asCssValueWithDefault, createStyleSheet, EventHelper } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { Gesture } from '../../touch.js';\nimport { alert } from '../aria/aria.js';\nimport { CombinedSpliceable } from './splice.js';\nimport { binarySearch, firstOrDefault, range } from '../../../common/arrays.js';\nimport { timeout } from '../../../common/async.js';\nimport { Color } from '../../../common/color.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter, Event, EventBufferer } from '../../../common/event.js';\nimport { matchesFuzzy2, matchesPrefix } from '../../../common/filters.js';\nimport { DisposableStore, dispose } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport * as platform from '../../../common/platform.js';\nimport { isNumber } from '../../../common/types.js';\nimport './list.css';\nimport { ListError } from './list.js';\nimport { ListView } from './listView.js';\nimport { StandardMouseEvent } from '../../mouseEvent.js';\nclass TraitRenderer {\n    constructor(trait) {\n        this.trait = trait;\n        this.renderedElements = [];\n    }\n    get templateId() {\n        return `template:${this.trait.name}`;\n    }\n    renderTemplate(container) {\n        return container;\n    }\n    renderElement(element, index, templateData) {\n        const renderedElementIndex = this.renderedElements.findIndex(el => el.templateData === templateData);\n        if (renderedElementIndex >= 0) {\n            const rendered = this.renderedElements[renderedElementIndex];\n            this.trait.unrender(templateData);\n            rendered.index = index;\n        }\n        else {\n            const rendered = { index, templateData };\n            this.renderedElements.push(rendered);\n        }\n        this.trait.renderIndex(index, templateData);\n    }\n    splice(start, deleteCount, insertCount) {\n        const rendered = [];\n        for (const renderedElement of this.renderedElements) {\n            if (renderedElement.index < start) {\n                rendered.push(renderedElement);\n            }\n            else if (renderedElement.index >= start + deleteCount) {\n                rendered.push({\n                    index: renderedElement.index + insertCount - deleteCount,\n                    templateData: renderedElement.templateData\n                });\n            }\n        }\n        this.renderedElements = rendered;\n    }\n    renderIndexes(indexes) {\n        for (const { index, templateData } of this.renderedElements) {\n            if (indexes.indexOf(index) > -1) {\n                this.trait.renderIndex(index, templateData);\n            }\n        }\n    }\n    disposeTemplate(templateData) {\n        const index = this.renderedElements.findIndex(el => el.templateData === templateData);\n        if (index < 0) {\n            return;\n        }\n        this.renderedElements.splice(index, 1);\n    }\n}\nclass Trait {\n    get name() { return this._trait; }\n    get renderer() {\n        return new TraitRenderer(this);\n    }\n    constructor(_trait) {\n        this._trait = _trait;\n        this.length = 0;\n        this.indexes = [];\n        this.sortedIndexes = [];\n        this._onChange = new Emitter();\n        this.onChange = this._onChange.event;\n    }\n    splice(start, deleteCount, elements) {\n        var _a;\n        deleteCount = Math.max(0, Math.min(deleteCount, this.length - start));\n        const diff = elements.length - deleteCount;\n        const end = start + deleteCount;\n        const sortedIndexes = [];\n        let i = 0;\n        while (i < this.sortedIndexes.length && this.sortedIndexes[i] < start) {\n            sortedIndexes.push(this.sortedIndexes[i++]);\n        }\n        for (let j = 0; j < elements.length; j++) {\n            if (elements[j]) {\n                sortedIndexes.push(j + start);\n            }\n        }\n        while (i < this.sortedIndexes.length && this.sortedIndexes[i] >= end) {\n            sortedIndexes.push(this.sortedIndexes[i++] + diff);\n        }\n        const length = this.length + diff;\n        if (this.sortedIndexes.length > 0 && sortedIndexes.length === 0 && length > 0) {\n            const first = (_a = this.sortedIndexes.find(index => index >= start)) !== null && _a !== void 0 ? _a : length - 1;\n            sortedIndexes.push(Math.min(first, length - 1));\n        }\n        this.renderer.splice(start, deleteCount, elements.length);\n        this._set(sortedIndexes, sortedIndexes);\n        this.length = length;\n    }\n    renderIndex(index, container) {\n        container.classList.toggle(this._trait, this.contains(index));\n    }\n    unrender(container) {\n        container.classList.remove(this._trait);\n    }\n    /**\n     * Sets the indexes which should have this trait.\n     *\n     * @param indexes Indexes which should have this trait.\n     * @return The old indexes which had this trait.\n     */\n    set(indexes, browserEvent) {\n        return this._set(indexes, [...indexes].sort(numericSort), browserEvent);\n    }\n    _set(indexes, sortedIndexes, browserEvent) {\n        const result = this.indexes;\n        const sortedResult = this.sortedIndexes;\n        this.indexes = indexes;\n        this.sortedIndexes = sortedIndexes;\n        const toRender = disjunction(sortedResult, indexes);\n        this.renderer.renderIndexes(toRender);\n        this._onChange.fire({ indexes, browserEvent });\n        return result;\n    }\n    get() {\n        return this.indexes;\n    }\n    contains(index) {\n        return binarySearch(this.sortedIndexes, index, numericSort) >= 0;\n    }\n    dispose() {\n        dispose(this._onChange);\n    }\n}\n__decorate([\n    memoize\n], Trait.prototype, \"renderer\", null);\nclass SelectionTrait extends Trait {\n    constructor(setAriaSelected) {\n        super('selected');\n        this.setAriaSelected = setAriaSelected;\n    }\n    renderIndex(index, container) {\n        super.renderIndex(index, container);\n        if (this.setAriaSelected) {\n            if (this.contains(index)) {\n                container.setAttribute('aria-selected', 'true');\n            }\n            else {\n                container.setAttribute('aria-selected', 'false');\n            }\n        }\n    }\n}\n/**\n * The TraitSpliceable is used as a util class to be able\n * to preserve traits across splice calls, given an identity\n * provider.\n */\nclass TraitSpliceable {\n    constructor(trait, view, identityProvider) {\n        this.trait = trait;\n        this.view = view;\n        this.identityProvider = identityProvider;\n    }\n    splice(start, deleteCount, elements) {\n        if (!this.identityProvider) {\n            return this.trait.splice(start, deleteCount, new Array(elements.length).fill(false));\n        }\n        const pastElementsWithTrait = this.trait.get().map(i => this.identityProvider.getId(this.view.element(i)).toString());\n        if (pastElementsWithTrait.length === 0) {\n            return this.trait.splice(start, deleteCount, new Array(elements.length).fill(false));\n        }\n        const pastElementsWithTraitSet = new Set(pastElementsWithTrait);\n        const elementsWithTrait = elements.map(e => pastElementsWithTraitSet.has(this.identityProvider.getId(e).toString()));\n        this.trait.splice(start, deleteCount, elementsWithTrait);\n    }\n}\nexport function isInputElement(e) {\n    return e.tagName === 'INPUT' || e.tagName === 'TEXTAREA';\n}\nexport function isMonacoEditor(e) {\n    if (e.classList.contains('monaco-editor')) {\n        return true;\n    }\n    if (e.classList.contains('monaco-list')) {\n        return false;\n    }\n    if (!e.parentElement) {\n        return false;\n    }\n    return isMonacoEditor(e.parentElement);\n}\nexport function isButton(e) {\n    if ((e.tagName === 'A' && e.classList.contains('monaco-button')) ||\n        (e.tagName === 'DIV' && e.classList.contains('monaco-button-dropdown'))) {\n        return true;\n    }\n    if (e.classList.contains('monaco-list')) {\n        return false;\n    }\n    if (!e.parentElement) {\n        return false;\n    }\n    return isButton(e.parentElement);\n}\nclass KeyboardController {\n    get onKeyDown() {\n        return Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event, $ => $.filter(e => !isInputElement(e.target))\n            .map(e => new StandardKeyboardEvent(e)));\n    }\n    constructor(list, view, options) {\n        this.list = list;\n        this.view = view;\n        this.disposables = new DisposableStore();\n        this.multipleSelectionDisposables = new DisposableStore();\n        this.multipleSelectionSupport = options.multipleSelectionSupport;\n        this.disposables.add(this.onKeyDown(e => {\n            switch (e.keyCode) {\n                case 3 /* KeyCode.Enter */:\n                    return this.onEnter(e);\n                case 16 /* KeyCode.UpArrow */:\n                    return this.onUpArrow(e);\n                case 18 /* KeyCode.DownArrow */:\n                    return this.onDownArrow(e);\n                case 11 /* KeyCode.PageUp */:\n                    return this.onPageUpArrow(e);\n                case 12 /* KeyCode.PageDown */:\n                    return this.onPageDownArrow(e);\n                case 9 /* KeyCode.Escape */:\n                    return this.onEscape(e);\n                case 31 /* KeyCode.KeyA */:\n                    if (this.multipleSelectionSupport && (platform.isMacintosh ? e.metaKey : e.ctrlKey)) {\n                        this.onCtrlA(e);\n                    }\n            }\n        }));\n    }\n    updateOptions(optionsUpdate) {\n        if (optionsUpdate.multipleSelectionSupport !== undefined) {\n            this.multipleSelectionSupport = optionsUpdate.multipleSelectionSupport;\n        }\n    }\n    onEnter(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.setSelection(this.list.getFocus(), e.browserEvent);\n    }\n    onUpArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusPrevious(1, false, e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onDownArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusNext(1, false, e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onPageUpArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusPreviousPage(e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onPageDownArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusNextPage(e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onCtrlA(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.setSelection(range(this.list.length), e.browserEvent);\n        this.list.setAnchor(undefined);\n        this.view.domNode.focus();\n    }\n    onEscape(e) {\n        if (this.list.getSelection().length) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.list.setSelection([], e.browserEvent);\n            this.list.setAnchor(undefined);\n            this.view.domNode.focus();\n        }\n    }\n    dispose() {\n        this.disposables.dispose();\n        this.multipleSelectionDisposables.dispose();\n    }\n}\n__decorate([\n    memoize\n], KeyboardController.prototype, \"onKeyDown\", null);\nexport var TypeNavigationMode;\n(function (TypeNavigationMode) {\n    TypeNavigationMode[TypeNavigationMode[\"Automatic\"] = 0] = \"Automatic\";\n    TypeNavigationMode[TypeNavigationMode[\"Trigger\"] = 1] = \"Trigger\";\n})(TypeNavigationMode || (TypeNavigationMode = {}));\nvar TypeNavigationControllerState;\n(function (TypeNavigationControllerState) {\n    TypeNavigationControllerState[TypeNavigationControllerState[\"Idle\"] = 0] = \"Idle\";\n    TypeNavigationControllerState[TypeNavigationControllerState[\"Typing\"] = 1] = \"Typing\";\n})(TypeNavigationControllerState || (TypeNavigationControllerState = {}));\nexport const DefaultKeyboardNavigationDelegate = new class {\n    mightProducePrintableCharacter(event) {\n        if (event.ctrlKey || event.metaKey || event.altKey) {\n            return false;\n        }\n        return (event.keyCode >= 31 /* KeyCode.KeyA */ && event.keyCode <= 56 /* KeyCode.KeyZ */)\n            || (event.keyCode >= 21 /* KeyCode.Digit0 */ && event.keyCode <= 30 /* KeyCode.Digit9 */)\n            || (event.keyCode >= 98 /* KeyCode.Numpad0 */ && event.keyCode <= 107 /* KeyCode.Numpad9 */)\n            || (event.keyCode >= 85 /* KeyCode.Semicolon */ && event.keyCode <= 95 /* KeyCode.Quote */);\n    }\n};\nclass TypeNavigationController {\n    constructor(list, view, keyboardNavigationLabelProvider, keyboardNavigationEventFilter, delegate) {\n        this.list = list;\n        this.view = view;\n        this.keyboardNavigationLabelProvider = keyboardNavigationLabelProvider;\n        this.keyboardNavigationEventFilter = keyboardNavigationEventFilter;\n        this.delegate = delegate;\n        this.enabled = false;\n        this.state = TypeNavigationControllerState.Idle;\n        this.mode = TypeNavigationMode.Automatic;\n        this.triggered = false;\n        this.previouslyFocused = -1;\n        this.enabledDisposables = new DisposableStore();\n        this.disposables = new DisposableStore();\n        this.updateOptions(list.options);\n    }\n    updateOptions(options) {\n        var _a, _b;\n        if ((_a = options.typeNavigationEnabled) !== null && _a !== void 0 ? _a : true) {\n            this.enable();\n        }\n        else {\n            this.disable();\n        }\n        this.mode = (_b = options.typeNavigationMode) !== null && _b !== void 0 ? _b : TypeNavigationMode.Automatic;\n    }\n    enable() {\n        if (this.enabled) {\n            return;\n        }\n        let typing = false;\n        const onChar = Event.chain(this.enabledDisposables.add(new DomEmitter(this.view.domNode, 'keydown')).event, $ => $.filter(e => !isInputElement(e.target))\n            .filter(() => this.mode === TypeNavigationMode.Automatic || this.triggered)\n            .map(event => new StandardKeyboardEvent(event))\n            .filter(e => typing || this.keyboardNavigationEventFilter(e))\n            .filter(e => this.delegate.mightProducePrintableCharacter(e))\n            .forEach(e => EventHelper.stop(e, true))\n            .map(event => event.browserEvent.key));\n        const onClear = Event.debounce(onChar, () => null, 800, undefined, undefined, undefined, this.enabledDisposables);\n        const onInput = Event.reduce(Event.any(onChar, onClear), (r, i) => i === null ? null : ((r || '') + i), undefined, this.enabledDisposables);\n        onInput(this.onInput, this, this.enabledDisposables);\n        onClear(this.onClear, this, this.enabledDisposables);\n        onChar(() => typing = true, undefined, this.enabledDisposables);\n        onClear(() => typing = false, undefined, this.enabledDisposables);\n        this.enabled = true;\n        this.triggered = false;\n    }\n    disable() {\n        if (!this.enabled) {\n            return;\n        }\n        this.enabledDisposables.clear();\n        this.enabled = false;\n        this.triggered = false;\n    }\n    onClear() {\n        var _a;\n        const focus = this.list.getFocus();\n        if (focus.length > 0 && focus[0] === this.previouslyFocused) {\n            // List: re-announce element on typing end since typed keys will interrupt aria label of focused element\n            // Do not announce if there was a focus change at the end to prevent duplication https://github.com/microsoft/vscode/issues/95961\n            const ariaLabel = (_a = this.list.options.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getAriaLabel(this.list.element(focus[0]));\n            if (ariaLabel) {\n                alert(ariaLabel);\n            }\n        }\n        this.previouslyFocused = -1;\n    }\n    onInput(word) {\n        if (!word) {\n            this.state = TypeNavigationControllerState.Idle;\n            this.triggered = false;\n            return;\n        }\n        const focus = this.list.getFocus();\n        const start = focus.length > 0 ? focus[0] : 0;\n        const delta = this.state === TypeNavigationControllerState.Idle ? 1 : 0;\n        this.state = TypeNavigationControllerState.Typing;\n        for (let i = 0; i < this.list.length; i++) {\n            const index = (start + i + delta) % this.list.length;\n            const label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(index));\n            const labelStr = label && label.toString();\n            if (this.list.options.typeNavigationEnabled) {\n                if (typeof labelStr !== 'undefined') {\n                    // If prefix is found, focus and return early\n                    if (matchesPrefix(word, labelStr)) {\n                        this.previouslyFocused = start;\n                        this.list.setFocus([index]);\n                        this.list.reveal(index);\n                        return;\n                    }\n                    const fuzzy = matchesFuzzy2(word, labelStr);\n                    if (fuzzy) {\n                        const fuzzyScore = fuzzy[0].end - fuzzy[0].start;\n                        // ensures that when fuzzy matching, doesn't clash with prefix matching (1 input vs 1+ should be prefix and fuzzy respecitvely). Also makes sure that exact matches are prioritized.\n                        if (fuzzyScore > 1 && fuzzy.length === 1) {\n                            this.previouslyFocused = start;\n                            this.list.setFocus([index]);\n                            this.list.reveal(index);\n                            return;\n                        }\n                    }\n                }\n            }\n            else if (typeof labelStr === 'undefined' || matchesPrefix(word, labelStr)) {\n                this.previouslyFocused = start;\n                this.list.setFocus([index]);\n                this.list.reveal(index);\n                return;\n            }\n        }\n    }\n    dispose() {\n        this.disable();\n        this.enabledDisposables.dispose();\n        this.disposables.dispose();\n    }\n}\nclass DOMFocusController {\n    constructor(list, view) {\n        this.list = list;\n        this.view = view;\n        this.disposables = new DisposableStore();\n        const onKeyDown = Event.chain(this.disposables.add(new DomEmitter(view.domNode, 'keydown')).event, $ => $\n            .filter(e => !isInputElement(e.target))\n            .map(e => new StandardKeyboardEvent(e)));\n        const onTab = Event.chain(onKeyDown, $ => $.filter(e => e.keyCode === 2 /* KeyCode.Tab */ && !e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey));\n        onTab(this.onTab, this, this.disposables);\n    }\n    onTab(e) {\n        if (e.target !== this.view.domNode) {\n            return;\n        }\n        const focus = this.list.getFocus();\n        if (focus.length === 0) {\n            return;\n        }\n        const focusedDomElement = this.view.domElement(focus[0]);\n        if (!focusedDomElement) {\n            return;\n        }\n        const tabIndexElement = focusedDomElement.querySelector('[tabIndex]');\n        if (!tabIndexElement || !(tabIndexElement instanceof HTMLElement) || tabIndexElement.tabIndex === -1) {\n            return;\n        }\n        const style = window.getComputedStyle(tabIndexElement);\n        if (style.visibility === 'hidden' || style.display === 'none') {\n            return;\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        tabIndexElement.focus();\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nexport function isSelectionSingleChangeEvent(event) {\n    return platform.isMacintosh ? event.browserEvent.metaKey : event.browserEvent.ctrlKey;\n}\nexport function isSelectionRangeChangeEvent(event) {\n    return event.browserEvent.shiftKey;\n}\nfunction isMouseRightClick(event) {\n    return event instanceof MouseEvent && event.button === 2;\n}\nconst DefaultMultipleSelectionController = {\n    isSelectionSingleChangeEvent,\n    isSelectionRangeChangeEvent\n};\nexport class MouseController {\n    constructor(list) {\n        this.list = list;\n        this.disposables = new DisposableStore();\n        this._onPointer = new Emitter();\n        this.onPointer = this._onPointer.event;\n        if (list.options.multipleSelectionSupport !== false) {\n            this.multipleSelectionController = this.list.options.multipleSelectionController || DefaultMultipleSelectionController;\n        }\n        this.mouseSupport = typeof list.options.mouseSupport === 'undefined' || !!list.options.mouseSupport;\n        if (this.mouseSupport) {\n            list.onMouseDown(this.onMouseDown, this, this.disposables);\n            list.onContextMenu(this.onContextMenu, this, this.disposables);\n            list.onMouseDblClick(this.onDoubleClick, this, this.disposables);\n            list.onTouchStart(this.onMouseDown, this, this.disposables);\n            this.disposables.add(Gesture.addTarget(list.getHTMLElement()));\n        }\n        Event.any(list.onMouseClick, list.onMouseMiddleClick, list.onTap)(this.onViewPointer, this, this.disposables);\n    }\n    updateOptions(optionsUpdate) {\n        if (optionsUpdate.multipleSelectionSupport !== undefined) {\n            this.multipleSelectionController = undefined;\n            if (optionsUpdate.multipleSelectionSupport) {\n                this.multipleSelectionController = this.list.options.multipleSelectionController || DefaultMultipleSelectionController;\n            }\n        }\n    }\n    isSelectionSingleChangeEvent(event) {\n        if (!this.multipleSelectionController) {\n            return false;\n        }\n        return this.multipleSelectionController.isSelectionSingleChangeEvent(event);\n    }\n    isSelectionRangeChangeEvent(event) {\n        if (!this.multipleSelectionController) {\n            return false;\n        }\n        return this.multipleSelectionController.isSelectionRangeChangeEvent(event);\n    }\n    isSelectionChangeEvent(event) {\n        return this.isSelectionSingleChangeEvent(event) || this.isSelectionRangeChangeEvent(event);\n    }\n    onMouseDown(e) {\n        if (isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (document.activeElement !== e.browserEvent.target) {\n            this.list.domFocus();\n        }\n    }\n    onContextMenu(e) {\n        if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        const focus = typeof e.index === 'undefined' ? [] : [e.index];\n        this.list.setFocus(focus, e.browserEvent);\n    }\n    onViewPointer(e) {\n        if (!this.mouseSupport) {\n            return;\n        }\n        if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (e.browserEvent.isHandledByList) {\n            return;\n        }\n        e.browserEvent.isHandledByList = true;\n        const focus = e.index;\n        if (typeof focus === 'undefined') {\n            this.list.setFocus([], e.browserEvent);\n            this.list.setSelection([], e.browserEvent);\n            this.list.setAnchor(undefined);\n            return;\n        }\n        if (this.isSelectionChangeEvent(e)) {\n            return this.changeSelection(e);\n        }\n        this.list.setFocus([focus], e.browserEvent);\n        this.list.setAnchor(focus);\n        if (!isMouseRightClick(e.browserEvent)) {\n            this.list.setSelection([focus], e.browserEvent);\n        }\n        this._onPointer.fire(e);\n    }\n    onDoubleClick(e) {\n        if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (this.isSelectionChangeEvent(e)) {\n            return;\n        }\n        if (e.browserEvent.isHandledByList) {\n            return;\n        }\n        e.browserEvent.isHandledByList = true;\n        const focus = this.list.getFocus();\n        this.list.setSelection(focus, e.browserEvent);\n    }\n    changeSelection(e) {\n        const focus = e.index;\n        let anchor = this.list.getAnchor();\n        if (this.isSelectionRangeChangeEvent(e)) {\n            if (typeof anchor === 'undefined') {\n                const currentFocus = this.list.getFocus()[0];\n                anchor = currentFocus !== null && currentFocus !== void 0 ? currentFocus : focus;\n                this.list.setAnchor(anchor);\n            }\n            const min = Math.min(anchor, focus);\n            const max = Math.max(anchor, focus);\n            const rangeSelection = range(min, max + 1);\n            const selection = this.list.getSelection();\n            const contiguousRange = getContiguousRangeContaining(disjunction(selection, [anchor]), anchor);\n            if (contiguousRange.length === 0) {\n                return;\n            }\n            const newSelection = disjunction(rangeSelection, relativeComplement(selection, contiguousRange));\n            this.list.setSelection(newSelection, e.browserEvent);\n            this.list.setFocus([focus], e.browserEvent);\n        }\n        else if (this.isSelectionSingleChangeEvent(e)) {\n            const selection = this.list.getSelection();\n            const newSelection = selection.filter(i => i !== focus);\n            this.list.setFocus([focus]);\n            this.list.setAnchor(focus);\n            if (selection.length === newSelection.length) {\n                this.list.setSelection([...newSelection, focus], e.browserEvent);\n            }\n            else {\n                this.list.setSelection(newSelection, e.browserEvent);\n            }\n        }\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nexport class DefaultStyleController {\n    constructor(styleElement, selectorSuffix) {\n        this.styleElement = styleElement;\n        this.selectorSuffix = selectorSuffix;\n    }\n    style(styles) {\n        var _a, _b;\n        const suffix = this.selectorSuffix && `.${this.selectorSuffix}`;\n        const content = [];\n        if (styles.listBackground) {\n            content.push(`.monaco-list${suffix} .monaco-list-rows { background: ${styles.listBackground}; }`);\n        }\n        if (styles.listFocusBackground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused { background-color: ${styles.listFocusBackground}; }`);\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused:hover { background-color: ${styles.listFocusBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listFocusForeground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused { color: ${styles.listFocusForeground}; }`);\n        }\n        if (styles.listActiveSelectionBackground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { background-color: ${styles.listActiveSelectionBackground}; }`);\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected:hover { background-color: ${styles.listActiveSelectionBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listActiveSelectionForeground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { color: ${styles.listActiveSelectionForeground}; }`);\n        }\n        if (styles.listActiveSelectionIconForeground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected .codicon { color: ${styles.listActiveSelectionIconForeground}; }`);\n        }\n        if (styles.listFocusAndSelectionBackground) {\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.selected.focused { background-color: ${styles.listFocusAndSelectionBackground}; }\n\t\t\t`);\n        }\n        if (styles.listFocusAndSelectionForeground) {\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.selected.focused { color: ${styles.listFocusAndSelectionForeground}; }\n\t\t\t`);\n        }\n        if (styles.listInactiveFocusForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { color:  ${styles.listInactiveFocusForeground}; }`);\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused:hover { color:  ${styles.listInactiveFocusForeground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listInactiveSelectionIconForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused .codicon { color:  ${styles.listInactiveSelectionIconForeground}; }`);\n        }\n        if (styles.listInactiveFocusBackground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { background-color:  ${styles.listInactiveFocusBackground}; }`);\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused:hover { background-color:  ${styles.listInactiveFocusBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listInactiveSelectionBackground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { background-color:  ${styles.listInactiveSelectionBackground}; }`);\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected:hover { background-color:  ${styles.listInactiveSelectionBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listInactiveSelectionForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { color: ${styles.listInactiveSelectionForeground}; }`);\n        }\n        if (styles.listHoverBackground) {\n            content.push(`.monaco-list${suffix}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${styles.listHoverBackground}; }`);\n        }\n        if (styles.listHoverForeground) {\n            content.push(`.monaco-list${suffix}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${styles.listHoverForeground}; }`);\n        }\n        /**\n         * Outlines\n         */\n        const focusAndSelectionOutline = asCssValueWithDefault(styles.listFocusAndSelectionOutline, asCssValueWithDefault(styles.listSelectionOutline, (_a = styles.listFocusOutline) !== null && _a !== void 0 ? _a : ''));\n        if (focusAndSelectionOutline) { // default: listFocusOutline\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused.selected { outline: 1px solid ${focusAndSelectionOutline}; outline-offset: -1px;}`);\n        }\n        if (styles.listFocusOutline) { // default: set\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.focused { outline: 1px solid ${styles.listFocusOutline}; outline-offset: -1px; }\n\t\t\t\t.monaco-workbench.context-menu-visible .monaco-list${suffix}.last-focused .monaco-list-row.focused { outline: 1px solid ${styles.listFocusOutline}; outline-offset: -1px; }\n\t\t\t`);\n        }\n        const inactiveFocusAndSelectionOutline = asCssValueWithDefault(styles.listSelectionOutline, (_b = styles.listInactiveFocusOutline) !== null && _b !== void 0 ? _b : '');\n        if (inactiveFocusAndSelectionOutline) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused.selected { outline: 1px dotted ${inactiveFocusAndSelectionOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listSelectionOutline) { // default: activeContrastBorder\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { outline: 1px dotted ${styles.listSelectionOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listInactiveFocusOutline) { // default: null\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { outline: 1px dotted ${styles.listInactiveFocusOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listHoverOutline) { // default: activeContrastBorder\n            content.push(`.monaco-list${suffix} .monaco-list-row:hover { outline: 1px dashed ${styles.listHoverOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listDropBackground) {\n            content.push(`\n\t\t\t\t.monaco-list${suffix}.drop-target,\n\t\t\t\t.monaco-list${suffix} .monaco-list-rows.drop-target,\n\t\t\t\t.monaco-list${suffix} .monaco-list-row.drop-target { background-color: ${styles.listDropBackground} !important; color: inherit !important; }\n\t\t\t`);\n        }\n        if (styles.tableColumnsBorder) {\n            content.push(`\n\t\t\t\t.monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: ${styles.tableColumnsBorder};\n\t\t\t\t}\n\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: transparent;\n\t\t\t\t}\n\t\t\t`);\n        }\n        if (styles.tableOddRowsBackgroundColor) {\n            content.push(`\n\t\t\t\t.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {\n\t\t\t\t\tbackground-color: ${styles.tableOddRowsBackgroundColor};\n\t\t\t\t}\n\t\t\t`);\n        }\n        this.styleElement.textContent = content.join('\\n');\n    }\n}\nexport const unthemedListStyles = {\n    listFocusBackground: '#7FB0D0',\n    listActiveSelectionBackground: '#0E639C',\n    listActiveSelectionForeground: '#FFFFFF',\n    listActiveSelectionIconForeground: '#FFFFFF',\n    listFocusAndSelectionOutline: '#90C2F9',\n    listFocusAndSelectionBackground: '#094771',\n    listFocusAndSelectionForeground: '#FFFFFF',\n    listInactiveSelectionBackground: '#3F3F46',\n    listInactiveSelectionIconForeground: '#FFFFFF',\n    listHoverBackground: '#2A2D2E',\n    listDropBackground: '#383B3D',\n    treeIndentGuidesStroke: '#a9a9a9',\n    treeInactiveIndentGuidesStroke: Color.fromHex('#a9a9a9').transparent(0.4).toString(),\n    tableColumnsBorder: Color.fromHex('#cccccc').transparent(0.2).toString(),\n    tableOddRowsBackgroundColor: Color.fromHex('#cccccc').transparent(0.04).toString(),\n    listBackground: undefined,\n    listFocusForeground: undefined,\n    listInactiveSelectionForeground: undefined,\n    listInactiveFocusForeground: undefined,\n    listInactiveFocusBackground: undefined,\n    listHoverForeground: undefined,\n    listFocusOutline: undefined,\n    listInactiveFocusOutline: undefined,\n    listSelectionOutline: undefined,\n    listHoverOutline: undefined\n};\nconst DefaultOptions = {\n    keyboardSupport: true,\n    mouseSupport: true,\n    multipleSelectionSupport: true,\n    dnd: {\n        getDragURI() { return null; },\n        onDragStart() { },\n        onDragOver() { return false; },\n        drop() { },\n        dispose() { }\n    }\n};\n// TODO@Joao: move these utils into a SortedArray class\nfunction getContiguousRangeContaining(range, value) {\n    const index = range.indexOf(value);\n    if (index === -1) {\n        return [];\n    }\n    const result = [];\n    let i = index - 1;\n    while (i >= 0 && range[i] === value - (index - i)) {\n        result.push(range[i--]);\n    }\n    result.reverse();\n    i = index;\n    while (i < range.length && range[i] === value + (i - index)) {\n        result.push(range[i++]);\n    }\n    return result;\n}\n/**\n * Given two sorted collections of numbers, returns the intersection\n * between them (OR).\n */\nfunction disjunction(one, other) {\n    const result = [];\n    let i = 0, j = 0;\n    while (i < one.length || j < other.length) {\n        if (i >= one.length) {\n            result.push(other[j++]);\n        }\n        else if (j >= other.length) {\n            result.push(one[i++]);\n        }\n        else if (one[i] === other[j]) {\n            result.push(one[i]);\n            i++;\n            j++;\n            continue;\n        }\n        else if (one[i] < other[j]) {\n            result.push(one[i++]);\n        }\n        else {\n            result.push(other[j++]);\n        }\n    }\n    return result;\n}\n/**\n * Given two sorted collections of numbers, returns the relative\n * complement between them (XOR).\n */\nfunction relativeComplement(one, other) {\n    const result = [];\n    let i = 0, j = 0;\n    while (i < one.length || j < other.length) {\n        if (i >= one.length) {\n            result.push(other[j++]);\n        }\n        else if (j >= other.length) {\n            result.push(one[i++]);\n        }\n        else if (one[i] === other[j]) {\n            i++;\n            j++;\n            continue;\n        }\n        else if (one[i] < other[j]) {\n            result.push(one[i++]);\n        }\n        else {\n            j++;\n        }\n    }\n    return result;\n}\nconst numericSort = (a, b) => a - b;\nclass PipelineRenderer {\n    constructor(_templateId, renderers) {\n        this._templateId = _templateId;\n        this.renderers = renderers;\n    }\n    get templateId() {\n        return this._templateId;\n    }\n    renderTemplate(container) {\n        return this.renderers.map(r => r.renderTemplate(container));\n    }\n    renderElement(element, index, templateData, height) {\n        let i = 0;\n        for (const renderer of this.renderers) {\n            renderer.renderElement(element, index, templateData[i++], height);\n        }\n    }\n    disposeElement(element, index, templateData, height) {\n        var _a;\n        let i = 0;\n        for (const renderer of this.renderers) {\n            (_a = renderer.disposeElement) === null || _a === void 0 ? void 0 : _a.call(renderer, element, index, templateData[i], height);\n            i += 1;\n        }\n    }\n    disposeTemplate(templateData) {\n        let i = 0;\n        for (const renderer of this.renderers) {\n            renderer.disposeTemplate(templateData[i++]);\n        }\n    }\n}\nclass AccessibiltyRenderer {\n    constructor(accessibilityProvider) {\n        this.accessibilityProvider = accessibilityProvider;\n        this.templateId = 'a18n';\n    }\n    renderTemplate(container) {\n        return container;\n    }\n    renderElement(element, index, container) {\n        const ariaLabel = this.accessibilityProvider.getAriaLabel(element);\n        if (ariaLabel) {\n            container.setAttribute('aria-label', ariaLabel);\n        }\n        else {\n            container.removeAttribute('aria-label');\n        }\n        const ariaLevel = this.accessibilityProvider.getAriaLevel && this.accessibilityProvider.getAriaLevel(element);\n        if (typeof ariaLevel === 'number') {\n            container.setAttribute('aria-level', `${ariaLevel}`);\n        }\n        else {\n            container.removeAttribute('aria-level');\n        }\n    }\n    disposeTemplate(templateData) {\n        // noop\n    }\n}\nclass ListViewDragAndDrop {\n    constructor(list, dnd) {\n        this.list = list;\n        this.dnd = dnd;\n    }\n    getDragElements(element) {\n        const selection = this.list.getSelectedElements();\n        const elements = selection.indexOf(element) > -1 ? selection : [element];\n        return elements;\n    }\n    getDragURI(element) {\n        return this.dnd.getDragURI(element);\n    }\n    getDragLabel(elements, originalEvent) {\n        if (this.dnd.getDragLabel) {\n            return this.dnd.getDragLabel(elements, originalEvent);\n        }\n        return undefined;\n    }\n    onDragStart(data, originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, data, originalEvent);\n    }\n    onDragOver(data, targetElement, targetIndex, originalEvent) {\n        return this.dnd.onDragOver(data, targetElement, targetIndex, originalEvent);\n    }\n    onDragLeave(data, targetElement, targetIndex, originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragLeave) === null || _b === void 0 ? void 0 : _b.call(_a, data, targetElement, targetIndex, originalEvent);\n    }\n    onDragEnd(originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, originalEvent);\n    }\n    drop(data, targetElement, targetIndex, originalEvent) {\n        this.dnd.drop(data, targetElement, targetIndex, originalEvent);\n    }\n    dispose() {\n        this.dnd.dispose();\n    }\n}\n/**\n * The {@link List} is a virtual scrolling widget, built on top of the {@link ListView}\n * widget.\n *\n * Features:\n * - Customizable keyboard and mouse support\n * - Element traits: focus, selection, achor\n * - Accessibility support\n * - Touch support\n * - Performant template-based rendering\n * - Horizontal scrolling\n * - Variable element height support\n * - Dynamic element height support\n * - Drag-and-drop support\n */\nexport class List {\n    get onDidChangeFocus() {\n        return Event.map(this.eventBufferer.wrapEvent(this.focus.onChange), e => this.toListEvent(e), this.disposables);\n    }\n    get onDidChangeSelection() {\n        return Event.map(this.eventBufferer.wrapEvent(this.selection.onChange), e => this.toListEvent(e), this.disposables);\n    }\n    get domId() { return this.view.domId; }\n    get onDidScroll() { return this.view.onDidScroll; }\n    get onMouseClick() { return this.view.onMouseClick; }\n    get onMouseDblClick() { return this.view.onMouseDblClick; }\n    get onMouseMiddleClick() { return this.view.onMouseMiddleClick; }\n    get onPointer() { return this.mouseController.onPointer; }\n    get onMouseDown() { return this.view.onMouseDown; }\n    get onMouseOver() { return this.view.onMouseOver; }\n    get onMouseOut() { return this.view.onMouseOut; }\n    get onTouchStart() { return this.view.onTouchStart; }\n    get onTap() { return this.view.onTap; }\n    /**\n     * Possible context menu trigger events:\n     * - ContextMenu key\n     * - Shift F10\n     * - Ctrl Option Shift M (macOS with VoiceOver)\n     * - Mouse right click\n     */\n    get onContextMenu() {\n        let didJustPressContextMenuKey = false;\n        const fromKeyDown = Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event, $ => $.map(e => new StandardKeyboardEvent(e))\n            .filter(e => didJustPressContextMenuKey = e.keyCode === 58 /* KeyCode.ContextMenu */ || (e.shiftKey && e.keyCode === 68 /* KeyCode.F10 */))\n            .map(e => EventHelper.stop(e, true))\n            .filter(() => false));\n        const fromKeyUp = Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keyup')).event, $ => $.forEach(() => didJustPressContextMenuKey = false)\n            .map(e => new StandardKeyboardEvent(e))\n            .filter(e => e.keyCode === 58 /* KeyCode.ContextMenu */ || (e.shiftKey && e.keyCode === 68 /* KeyCode.F10 */))\n            .map(e => EventHelper.stop(e, true))\n            .map(({ browserEvent }) => {\n            const focus = this.getFocus();\n            const index = focus.length ? focus[0] : undefined;\n            const element = typeof index !== 'undefined' ? this.view.element(index) : undefined;\n            const anchor = typeof index !== 'undefined' ? this.view.domElement(index) : this.view.domNode;\n            return { index, element, anchor, browserEvent };\n        }));\n        const fromMouse = Event.chain(this.view.onContextMenu, $ => $.filter(_ => !didJustPressContextMenuKey)\n            .map(({ element, index, browserEvent }) => ({ element, index, anchor: new StandardMouseEvent(browserEvent), browserEvent })));\n        return Event.any(fromKeyDown, fromKeyUp, fromMouse);\n    }\n    get onKeyDown() { return this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event; }\n    get onDidFocus() { return Event.signal(this.disposables.add(new DomEmitter(this.view.domNode, 'focus', true)).event); }\n    constructor(user, container, virtualDelegate, renderers, _options = DefaultOptions) {\n        var _a, _b, _c, _d;\n        this.user = user;\n        this._options = _options;\n        this.focus = new Trait('focused');\n        this.anchor = new Trait('anchor');\n        this.eventBufferer = new EventBufferer();\n        this._ariaLabel = '';\n        this.disposables = new DisposableStore();\n        this._onDidDispose = new Emitter();\n        this.onDidDispose = this._onDidDispose.event;\n        const role = this._options.accessibilityProvider && this._options.accessibilityProvider.getWidgetRole ? (_a = this._options.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getWidgetRole() : 'list';\n        this.selection = new SelectionTrait(role !== 'listbox');\n        const baseRenderers = [this.focus.renderer, this.selection.renderer];\n        this.accessibilityProvider = _options.accessibilityProvider;\n        if (this.accessibilityProvider) {\n            baseRenderers.push(new AccessibiltyRenderer(this.accessibilityProvider));\n            (_c = (_b = this.accessibilityProvider).onDidChangeActiveDescendant) === null || _c === void 0 ? void 0 : _c.call(_b, this.onDidChangeActiveDescendant, this, this.disposables);\n        }\n        renderers = renderers.map(r => new PipelineRenderer(r.templateId, [...baseRenderers, r]));\n        const viewOptions = Object.assign(Object.assign({}, _options), { dnd: _options.dnd && new ListViewDragAndDrop(this, _options.dnd) });\n        this.view = this.createListView(container, virtualDelegate, renderers, viewOptions);\n        this.view.domNode.setAttribute('role', role);\n        if (_options.styleController) {\n            this.styleController = _options.styleController(this.view.domId);\n        }\n        else {\n            const styleElement = createStyleSheet(this.view.domNode);\n            this.styleController = new DefaultStyleController(styleElement, this.view.domId);\n        }\n        this.spliceable = new CombinedSpliceable([\n            new TraitSpliceable(this.focus, this.view, _options.identityProvider),\n            new TraitSpliceable(this.selection, this.view, _options.identityProvider),\n            new TraitSpliceable(this.anchor, this.view, _options.identityProvider),\n            this.view\n        ]);\n        this.disposables.add(this.focus);\n        this.disposables.add(this.selection);\n        this.disposables.add(this.anchor);\n        this.disposables.add(this.view);\n        this.disposables.add(this._onDidDispose);\n        this.disposables.add(new DOMFocusController(this, this.view));\n        if (typeof _options.keyboardSupport !== 'boolean' || _options.keyboardSupport) {\n            this.keyboardController = new KeyboardController(this, this.view, _options);\n            this.disposables.add(this.keyboardController);\n        }\n        if (_options.keyboardNavigationLabelProvider) {\n            const delegate = _options.keyboardNavigationDelegate || DefaultKeyboardNavigationDelegate;\n            this.typeNavigationController = new TypeNavigationController(this, this.view, _options.keyboardNavigationLabelProvider, (_d = _options.keyboardNavigationEventFilter) !== null && _d !== void 0 ? _d : (() => true), delegate);\n            this.disposables.add(this.typeNavigationController);\n        }\n        this.mouseController = this.createMouseController(_options);\n        this.disposables.add(this.mouseController);\n        this.onDidChangeFocus(this._onFocusChange, this, this.disposables);\n        this.onDidChangeSelection(this._onSelectionChange, this, this.disposables);\n        if (this.accessibilityProvider) {\n            this.ariaLabel = this.accessibilityProvider.getWidgetAriaLabel();\n        }\n        if (this._options.multipleSelectionSupport !== false) {\n            this.view.domNode.setAttribute('aria-multiselectable', 'true');\n        }\n    }\n    createListView(container, virtualDelegate, renderers, viewOptions) {\n        return new ListView(container, virtualDelegate, renderers, viewOptions);\n    }\n    createMouseController(options) {\n        return new MouseController(this);\n    }\n    updateOptions(optionsUpdate = {}) {\n        var _a, _b;\n        this._options = Object.assign(Object.assign({}, this._options), optionsUpdate);\n        (_a = this.typeNavigationController) === null || _a === void 0 ? void 0 : _a.updateOptions(this._options);\n        if (this._options.multipleSelectionController !== undefined) {\n            if (this._options.multipleSelectionSupport) {\n                this.view.domNode.setAttribute('aria-multiselectable', 'true');\n            }\n            else {\n                this.view.domNode.removeAttribute('aria-multiselectable');\n            }\n        }\n        this.mouseController.updateOptions(optionsUpdate);\n        (_b = this.keyboardController) === null || _b === void 0 ? void 0 : _b.updateOptions(optionsUpdate);\n        this.view.updateOptions(optionsUpdate);\n    }\n    get options() {\n        return this._options;\n    }\n    splice(start, deleteCount, elements = []) {\n        if (start < 0 || start > this.view.length) {\n            throw new ListError(this.user, `Invalid start index: ${start}`);\n        }\n        if (deleteCount < 0) {\n            throw new ListError(this.user, `Invalid delete count: ${deleteCount}`);\n        }\n        if (deleteCount === 0 && elements.length === 0) {\n            return;\n        }\n        this.eventBufferer.bufferEvents(() => this.spliceable.splice(start, deleteCount, elements));\n    }\n    rerender() {\n        this.view.rerender();\n    }\n    element(index) {\n        return this.view.element(index);\n    }\n    get length() {\n        return this.view.length;\n    }\n    get contentHeight() {\n        return this.view.contentHeight;\n    }\n    get scrollTop() {\n        return this.view.getScrollTop();\n    }\n    set scrollTop(scrollTop) {\n        this.view.setScrollTop(scrollTop);\n    }\n    get scrollHeight() {\n        return this.view.scrollHeight;\n    }\n    get renderHeight() {\n        return this.view.renderHeight;\n    }\n    get firstVisibleIndex() {\n        return this.view.firstVisibleIndex;\n    }\n    get ariaLabel() {\n        return this._ariaLabel;\n    }\n    set ariaLabel(value) {\n        this._ariaLabel = value;\n        this.view.domNode.setAttribute('aria-label', value);\n    }\n    domFocus() {\n        this.view.domNode.focus({ preventScroll: true });\n    }\n    layout(height, width) {\n        this.view.layout(height, width);\n    }\n    setSelection(indexes, browserEvent) {\n        for (const index of indexes) {\n            if (index < 0 || index >= this.length) {\n                throw new ListError(this.user, `Invalid index ${index}`);\n            }\n        }\n        this.selection.set(indexes, browserEvent);\n    }\n    getSelection() {\n        return this.selection.get();\n    }\n    getSelectedElements() {\n        return this.getSelection().map(i => this.view.element(i));\n    }\n    setAnchor(index) {\n        if (typeof index === 'undefined') {\n            this.anchor.set([]);\n            return;\n        }\n        if (index < 0 || index >= this.length) {\n            throw new ListError(this.user, `Invalid index ${index}`);\n        }\n        this.anchor.set([index]);\n    }\n    getAnchor() {\n        return firstOrDefault(this.anchor.get(), undefined);\n    }\n    getAnchorElement() {\n        const anchor = this.getAnchor();\n        return typeof anchor === 'undefined' ? undefined : this.element(anchor);\n    }\n    setFocus(indexes, browserEvent) {\n        for (const index of indexes) {\n            if (index < 0 || index >= this.length) {\n                throw new ListError(this.user, `Invalid index ${index}`);\n            }\n        }\n        this.focus.set(indexes, browserEvent);\n    }\n    focusNext(n = 1, loop = false, browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const focus = this.focus.get();\n        const index = this.findNextIndex(focus.length > 0 ? focus[0] + n : 0, loop, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    focusPrevious(n = 1, loop = false, browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const focus = this.focus.get();\n        const index = this.findPreviousIndex(focus.length > 0 ? focus[0] - n : 0, loop, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    focusNextPage(browserEvent, filter) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let lastPageIndex = this.view.indexAt(this.view.getScrollTop() + this.view.renderHeight);\n            lastPageIndex = lastPageIndex === 0 ? 0 : lastPageIndex - 1;\n            const currentlyFocusedElementIndex = this.getFocus()[0];\n            if (currentlyFocusedElementIndex !== lastPageIndex && (currentlyFocusedElementIndex === undefined || lastPageIndex > currentlyFocusedElementIndex)) {\n                const lastGoodPageIndex = this.findPreviousIndex(lastPageIndex, false, filter);\n                if (lastGoodPageIndex > -1 && currentlyFocusedElementIndex !== lastGoodPageIndex) {\n                    this.setFocus([lastGoodPageIndex], browserEvent);\n                }\n                else {\n                    this.setFocus([lastPageIndex], browserEvent);\n                }\n            }\n            else {\n                const previousScrollTop = this.view.getScrollTop();\n                let nextpageScrollTop = previousScrollTop + this.view.renderHeight;\n                if (lastPageIndex > currentlyFocusedElementIndex) {\n                    // scroll last page element to the top only if the last page element is below the focused element\n                    nextpageScrollTop -= this.view.elementHeight(lastPageIndex);\n                }\n                this.view.setScrollTop(nextpageScrollTop);\n                if (this.view.getScrollTop() !== previousScrollTop) {\n                    this.setFocus([]);\n                    // Let the scroll event listener run\n                    yield timeout(0);\n                    yield this.focusNextPage(browserEvent, filter);\n                }\n            }\n        });\n    }\n    focusPreviousPage(browserEvent, filter) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let firstPageIndex;\n            const scrollTop = this.view.getScrollTop();\n            if (scrollTop === 0) {\n                firstPageIndex = this.view.indexAt(scrollTop);\n            }\n            else {\n                firstPageIndex = this.view.indexAfter(scrollTop - 1);\n            }\n            const currentlyFocusedElementIndex = this.getFocus()[0];\n            if (currentlyFocusedElementIndex !== firstPageIndex && (currentlyFocusedElementIndex === undefined || currentlyFocusedElementIndex >= firstPageIndex)) {\n                const firstGoodPageIndex = this.findNextIndex(firstPageIndex, false, filter);\n                if (firstGoodPageIndex > -1 && currentlyFocusedElementIndex !== firstGoodPageIndex) {\n                    this.setFocus([firstGoodPageIndex], browserEvent);\n                }\n                else {\n                    this.setFocus([firstPageIndex], browserEvent);\n                }\n            }\n            else {\n                const previousScrollTop = scrollTop;\n                this.view.setScrollTop(scrollTop - this.view.renderHeight);\n                if (this.view.getScrollTop() !== previousScrollTop) {\n                    this.setFocus([]);\n                    // Let the scroll event listener run\n                    yield timeout(0);\n                    yield this.focusPreviousPage(browserEvent, filter);\n                }\n            }\n        });\n    }\n    focusLast(browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const index = this.findPreviousIndex(this.length - 1, false, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    focusFirst(browserEvent, filter) {\n        this.focusNth(0, browserEvent, filter);\n    }\n    focusNth(n, browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const index = this.findNextIndex(n, false, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    findNextIndex(index, loop = false, filter) {\n        for (let i = 0; i < this.length; i++) {\n            if (index >= this.length && !loop) {\n                return -1;\n            }\n            index = index % this.length;\n            if (!filter || filter(this.element(index))) {\n                return index;\n            }\n            index++;\n        }\n        return -1;\n    }\n    findPreviousIndex(index, loop = false, filter) {\n        for (let i = 0; i < this.length; i++) {\n            if (index < 0 && !loop) {\n                return -1;\n            }\n            index = (this.length + (index % this.length)) % this.length;\n            if (!filter || filter(this.element(index))) {\n                return index;\n            }\n            index--;\n        }\n        return -1;\n    }\n    getFocus() {\n        return this.focus.get();\n    }\n    getFocusedElements() {\n        return this.getFocus().map(i => this.view.element(i));\n    }\n    reveal(index, relativeTop) {\n        if (index < 0 || index >= this.length) {\n            throw new ListError(this.user, `Invalid index ${index}`);\n        }\n        const scrollTop = this.view.getScrollTop();\n        const elementTop = this.view.elementTop(index);\n        const elementHeight = this.view.elementHeight(index);\n        if (isNumber(relativeTop)) {\n            // y = mx + b\n            const m = elementHeight - this.view.renderHeight;\n            this.view.setScrollTop(m * clamp(relativeTop, 0, 1) + elementTop);\n        }\n        else {\n            const viewItemBottom = elementTop + elementHeight;\n            const scrollBottom = scrollTop + this.view.renderHeight;\n            if (elementTop < scrollTop && viewItemBottom >= scrollBottom) {\n                // The element is already overflowing the viewport, no-op\n            }\n            else if (elementTop < scrollTop || (viewItemBottom >= scrollBottom && elementHeight >= this.view.renderHeight)) {\n                this.view.setScrollTop(elementTop);\n            }\n            else if (viewItemBottom >= scrollBottom) {\n                this.view.setScrollTop(viewItemBottom - this.view.renderHeight);\n            }\n        }\n    }\n    getHTMLElement() {\n        return this.view.domNode;\n    }\n    getElementID(index) {\n        return this.view.getElementDomId(index);\n    }\n    style(styles) {\n        this.styleController.style(styles);\n    }\n    toListEvent({ indexes, browserEvent }) {\n        return { indexes, elements: indexes.map(i => this.view.element(i)), browserEvent };\n    }\n    _onFocusChange() {\n        const focus = this.focus.get();\n        this.view.domNode.classList.toggle('element-focused', focus.length > 0);\n        this.onDidChangeActiveDescendant();\n    }\n    onDidChangeActiveDescendant() {\n        var _a;\n        const focus = this.focus.get();\n        if (focus.length > 0) {\n            let id;\n            if ((_a = this.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getActiveDescendantId) {\n                id = this.accessibilityProvider.getActiveDescendantId(this.view.element(focus[0]));\n            }\n            this.view.domNode.setAttribute('aria-activedescendant', id || this.view.getElementDomId(focus[0]));\n        }\n        else {\n            this.view.domNode.removeAttribute('aria-activedescendant');\n        }\n    }\n    _onSelectionChange() {\n        const selection = this.selection.get();\n        this.view.domNode.classList.toggle('selection-none', selection.length === 0);\n        this.view.domNode.classList.toggle('selection-single', selection.length === 1);\n        this.view.domNode.classList.toggle('selection-multiple', selection.length > 1);\n    }\n    dispose() {\n        this._onDidDispose.fire();\n        this.disposables.dispose();\n        this._onDidDispose.dispose();\n    }\n}\n__decorate([\n    memoize\n], List.prototype, \"onDidChangeFocus\", null);\n__decorate([\n    memoize\n], List.prototype, \"onDidChangeSelection\", null);\n__decorate([\n    memoize\n], List.prototype, \"onContextMenu\", null);\n__decorate([\n    memoize\n], List.prototype, \"onKeyDown\", null);\n__decorate([\n    memoize\n], List.prototype, \"onDidFocus\", null);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isFirefox } from '../../browser.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { $, addDisposableListener, append, clearNode, createStyleSheet, Dimension, EventHelper, EventType, getActiveElement, isAncestor, isInShadowDOM } from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { StandardMouseEvent } from '../../mouseEvent.js';\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport { ActionViewItem, BaseActionViewItem } from '../actionbar/actionViewItems.js';\nimport { layout } from '../contextview/contextview.js';\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { EmptySubmenuAction, Separator, SubmenuAction } from '../../../common/actions.js';\nimport { RunOnceScheduler } from '../../../common/async.js';\nimport { Codicon, getCodiconFontCharacters } from '../../../common/codicons.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { stripIcons } from '../../../common/iconLabels.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nimport { isLinux, isMacintosh } from '../../../common/platform.js';\nimport * as strings from '../../../common/strings.js';\nexport const MENU_MNEMONIC_REGEX = /\\(&([^\\s&])\\)|(^|[^&])&([^\\s&])/;\nexport const MENU_ESCAPED_MNEMONIC_REGEX = /(&amp;)?(&amp;)([^\\s&])/g;\nexport var Direction;\n(function (Direction) {\n    Direction[Direction[\"Right\"] = 0] = \"Right\";\n    Direction[Direction[\"Left\"] = 1] = \"Left\";\n})(Direction || (Direction = {}));\nexport class Menu extends ActionBar {\n    constructor(container, actions, options, menuStyles) {\n        container.classList.add('monaco-menu-container');\n        container.setAttribute('role', 'presentation');\n        const menuElement = document.createElement('div');\n        menuElement.classList.add('monaco-menu');\n        menuElement.setAttribute('role', 'presentation');\n        super(menuElement, {\n            orientation: 1 /* ActionsOrientation.VERTICAL */,\n            actionViewItemProvider: action => this.doGetActionViewItem(action, options, parentData),\n            context: options.context,\n            actionRunner: options.actionRunner,\n            ariaLabel: options.ariaLabel,\n            ariaRole: 'menu',\n            focusOnlyEnabledItems: true,\n            triggerKeys: { keys: [3 /* KeyCode.Enter */, ...(isMacintosh || isLinux ? [10 /* KeyCode.Space */] : [])], keyDown: true }\n        });\n        this.menuStyles = menuStyles;\n        this.menuElement = menuElement;\n        this.actionsList.tabIndex = 0;\n        this.menuDisposables = this._register(new DisposableStore());\n        this.initializeOrUpdateStyleSheet(container, menuStyles);\n        this._register(Gesture.addTarget(menuElement));\n        addDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\n            const event = new StandardKeyboardEvent(e);\n            // Stop tab navigation of menus\n            if (event.equals(2 /* KeyCode.Tab */)) {\n                e.preventDefault();\n            }\n        });\n        if (options.enableMnemonics) {\n            this.menuDisposables.add(addDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\n                const key = e.key.toLocaleLowerCase();\n                if (this.mnemonics.has(key)) {\n                    EventHelper.stop(e, true);\n                    const actions = this.mnemonics.get(key);\n                    if (actions.length === 1) {\n                        if (actions[0] instanceof SubmenuMenuActionViewItem && actions[0].container) {\n                            this.focusItemByElement(actions[0].container);\n                        }\n                        actions[0].onClick(e);\n                    }\n                    if (actions.length > 1) {\n                        const action = actions.shift();\n                        if (action && action.container) {\n                            this.focusItemByElement(action.container);\n                            actions.push(action);\n                        }\n                        this.mnemonics.set(key, actions);\n                    }\n                }\n            }));\n        }\n        if (isLinux) {\n            this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(14 /* KeyCode.Home */) || event.equals(11 /* KeyCode.PageUp */)) {\n                    this.focusedItem = this.viewItems.length - 1;\n                    this.focusNext();\n                    EventHelper.stop(e, true);\n                }\n                else if (event.equals(13 /* KeyCode.End */) || event.equals(12 /* KeyCode.PageDown */)) {\n                    this.focusedItem = 0;\n                    this.focusPrevious();\n                    EventHelper.stop(e, true);\n                }\n            }));\n        }\n        this._register(addDisposableListener(this.domNode, EventType.MOUSE_OUT, e => {\n            const relatedTarget = e.relatedTarget;\n            if (!isAncestor(relatedTarget, this.domNode)) {\n                this.focusedItem = undefined;\n                this.updateFocus();\n                e.stopPropagation();\n            }\n        }));\n        this._register(addDisposableListener(this.actionsList, EventType.MOUSE_OVER, e => {\n            let target = e.target;\n            if (!target || !isAncestor(target, this.actionsList) || target === this.actionsList) {\n                return;\n            }\n            while (target.parentElement !== this.actionsList && target.parentElement !== null) {\n                target = target.parentElement;\n            }\n            if (target.classList.contains('action-item')) {\n                const lastFocusedItem = this.focusedItem;\n                this.setFocusedItem(target);\n                if (lastFocusedItem !== this.focusedItem) {\n                    this.updateFocus();\n                }\n            }\n        }));\n        // Support touch on actions list to focus items (needed for submenus)\n        this._register(Gesture.addTarget(this.actionsList));\n        this._register(addDisposableListener(this.actionsList, TouchEventType.Tap, e => {\n            let target = e.initialTarget;\n            if (!target || !isAncestor(target, this.actionsList) || target === this.actionsList) {\n                return;\n            }\n            while (target.parentElement !== this.actionsList && target.parentElement !== null) {\n                target = target.parentElement;\n            }\n            if (target.classList.contains('action-item')) {\n                const lastFocusedItem = this.focusedItem;\n                this.setFocusedItem(target);\n                if (lastFocusedItem !== this.focusedItem) {\n                    this.updateFocus();\n                }\n            }\n        }));\n        const parentData = {\n            parent: this\n        };\n        this.mnemonics = new Map();\n        // Scroll Logic\n        this.scrollableElement = this._register(new DomScrollableElement(menuElement, {\n            alwaysConsumeMouseWheel: true,\n            horizontal: 2 /* ScrollbarVisibility.Hidden */,\n            vertical: 3 /* ScrollbarVisibility.Visible */,\n            verticalScrollbarSize: 7,\n            handleMouseWheel: true,\n            useShadows: true\n        }));\n        const scrollElement = this.scrollableElement.getDomNode();\n        scrollElement.style.position = '';\n        this.styleScrollElement(scrollElement, menuStyles);\n        // Support scroll on menu drag\n        this._register(addDisposableListener(menuElement, TouchEventType.Change, e => {\n            EventHelper.stop(e, true);\n            const scrollTop = this.scrollableElement.getScrollPosition().scrollTop;\n            this.scrollableElement.setScrollPosition({ scrollTop: scrollTop - e.translationY });\n        }));\n        this._register(addDisposableListener(scrollElement, EventType.MOUSE_UP, e => {\n            // Absorb clicks in menu dead space https://github.com/microsoft/vscode/issues/63575\n            // We do this on the scroll element so the scroll bar doesn't dismiss the menu either\n            e.preventDefault();\n        }));\n        menuElement.style.maxHeight = `${Math.max(10, window.innerHeight - container.getBoundingClientRect().top - 35)}px`;\n        actions = actions.filter(a => {\n            var _a;\n            if ((_a = options.submenuIds) === null || _a === void 0 ? void 0 : _a.has(a.id)) {\n                console.warn(`Found submenu cycle: ${a.id}`);\n                return false;\n            }\n            return true;\n        });\n        this.push(actions, { icon: true, label: true, isMenu: true });\n        container.appendChild(this.scrollableElement.getDomNode());\n        this.scrollableElement.scanDomNode();\n        this.viewItems.filter(item => !(item instanceof MenuSeparatorActionViewItem)).forEach((item, index, array) => {\n            item.updatePositionInSet(index + 1, array.length);\n        });\n    }\n    initializeOrUpdateStyleSheet(container, style) {\n        if (!this.styleSheet) {\n            if (isInShadowDOM(container)) {\n                this.styleSheet = createStyleSheet(container);\n            }\n            else {\n                if (!Menu.globalStyleSheet) {\n                    Menu.globalStyleSheet = createStyleSheet();\n                }\n                this.styleSheet = Menu.globalStyleSheet;\n            }\n        }\n        this.styleSheet.textContent = getMenuWidgetCSS(style, isInShadowDOM(container));\n    }\n    styleScrollElement(scrollElement, style) {\n        var _a, _b;\n        const fgColor = (_a = style.foregroundColor) !== null && _a !== void 0 ? _a : '';\n        const bgColor = (_b = style.backgroundColor) !== null && _b !== void 0 ? _b : '';\n        const border = style.borderColor ? `1px solid ${style.borderColor}` : '';\n        const borderRadius = '5px';\n        const shadow = style.shadowColor ? `0 2px 8px ${style.shadowColor}` : '';\n        scrollElement.style.outline = border;\n        scrollElement.style.borderRadius = borderRadius;\n        scrollElement.style.color = fgColor;\n        scrollElement.style.backgroundColor = bgColor;\n        scrollElement.style.boxShadow = shadow;\n    }\n    getContainer() {\n        return this.scrollableElement.getDomNode();\n    }\n    get onScroll() {\n        return this.scrollableElement.onScroll;\n    }\n    focusItemByElement(element) {\n        const lastFocusedItem = this.focusedItem;\n        this.setFocusedItem(element);\n        if (lastFocusedItem !== this.focusedItem) {\n            this.updateFocus();\n        }\n    }\n    setFocusedItem(element) {\n        for (let i = 0; i < this.actionsList.children.length; i++) {\n            const elem = this.actionsList.children[i];\n            if (element === elem) {\n                this.focusedItem = i;\n                break;\n            }\n        }\n    }\n    updateFocus(fromRight) {\n        super.updateFocus(fromRight, true, true);\n        if (typeof this.focusedItem !== 'undefined') {\n            // Workaround for #80047 caused by an issue in chromium\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=414283\n            // When that's fixed, just call this.scrollableElement.scanDomNode()\n            this.scrollableElement.setScrollPosition({\n                scrollTop: Math.round(this.menuElement.scrollTop)\n            });\n        }\n    }\n    doGetActionViewItem(action, options, parentData) {\n        if (action instanceof Separator) {\n            return new MenuSeparatorActionViewItem(options.context, action, { icon: true }, this.menuStyles);\n        }\n        else if (action instanceof SubmenuAction) {\n            const menuActionViewItem = new SubmenuMenuActionViewItem(action, action.actions, parentData, Object.assign(Object.assign({}, options), { submenuIds: new Set([...(options.submenuIds || []), action.id]) }), this.menuStyles);\n            if (options.enableMnemonics) {\n                const mnemonic = menuActionViewItem.getMnemonic();\n                if (mnemonic && menuActionViewItem.isEnabled()) {\n                    let actionViewItems = [];\n                    if (this.mnemonics.has(mnemonic)) {\n                        actionViewItems = this.mnemonics.get(mnemonic);\n                    }\n                    actionViewItems.push(menuActionViewItem);\n                    this.mnemonics.set(mnemonic, actionViewItems);\n                }\n            }\n            return menuActionViewItem;\n        }\n        else {\n            const menuItemOptions = { enableMnemonics: options.enableMnemonics, useEventAsContext: options.useEventAsContext };\n            if (options.getKeyBinding) {\n                const keybinding = options.getKeyBinding(action);\n                if (keybinding) {\n                    const keybindingLabel = keybinding.getLabel();\n                    if (keybindingLabel) {\n                        menuItemOptions.keybinding = keybindingLabel;\n                    }\n                }\n            }\n            const menuActionViewItem = new BaseMenuActionViewItem(options.context, action, menuItemOptions, this.menuStyles);\n            if (options.enableMnemonics) {\n                const mnemonic = menuActionViewItem.getMnemonic();\n                if (mnemonic && menuActionViewItem.isEnabled()) {\n                    let actionViewItems = [];\n                    if (this.mnemonics.has(mnemonic)) {\n                        actionViewItems = this.mnemonics.get(mnemonic);\n                    }\n                    actionViewItems.push(menuActionViewItem);\n                    this.mnemonics.set(mnemonic, actionViewItems);\n                }\n            }\n            return menuActionViewItem;\n        }\n    }\n}\nclass BaseMenuActionViewItem extends BaseActionViewItem {\n    constructor(ctx, action, options, menuStyle) {\n        options.isMenu = true;\n        super(action, action, options);\n        this.menuStyle = menuStyle;\n        this.options = options;\n        this.options.icon = options.icon !== undefined ? options.icon : false;\n        this.options.label = options.label !== undefined ? options.label : true;\n        this.cssClass = '';\n        // Set mnemonic\n        if (this.options.label && options.enableMnemonics) {\n            const label = this.action.label;\n            if (label) {\n                const matches = MENU_MNEMONIC_REGEX.exec(label);\n                if (matches) {\n                    this.mnemonic = (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase();\n                }\n            }\n        }\n        // Add mouse up listener later to avoid accidental clicks\n        this.runOnceToEnableMouseUp = new RunOnceScheduler(() => {\n            if (!this.element) {\n                return;\n            }\n            this._register(addDisposableListener(this.element, EventType.MOUSE_UP, e => {\n                // removed default prevention as it conflicts\n                // with BaseActionViewItem #101537\n                // add back if issues arise and link new issue\n                EventHelper.stop(e, true);\n                // See https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Interact_with_the_clipboard\n                // > Writing to the clipboard\n                // > You can use the \"cut\" and \"copy\" commands without any special\n                // permission if you are using them in a short-lived event handler\n                // for a user action (for example, a click handler).\n                // => to get the Copy and Paste context menu actions working on Firefox,\n                // there should be no timeout here\n                if (isFirefox) {\n                    const mouseEvent = new StandardMouseEvent(e);\n                    // Allowing right click to trigger the event causes the issue described below,\n                    // but since the solution below does not work in FF, we must disable right click\n                    if (mouseEvent.rightButton) {\n                        return;\n                    }\n                    this.onClick(e);\n                }\n                // In all other cases, set timeout to allow context menu cancellation to trigger\n                // otherwise the action will destroy the menu and a second context menu\n                // will still trigger for right click.\n                else {\n                    setTimeout(() => {\n                        this.onClick(e);\n                    }, 0);\n                }\n            }));\n            this._register(addDisposableListener(this.element, EventType.CONTEXT_MENU, e => {\n                EventHelper.stop(e, true);\n            }));\n        }, 100);\n        this._register(this.runOnceToEnableMouseUp);\n    }\n    render(container) {\n        super.render(container);\n        if (!this.element) {\n            return;\n        }\n        this.container = container;\n        this.item = append(this.element, $('a.action-menu-item'));\n        if (this._action.id === Separator.ID) {\n            // A separator is a presentation item\n            this.item.setAttribute('role', 'presentation');\n        }\n        else {\n            this.item.setAttribute('role', 'menuitem');\n            if (this.mnemonic) {\n                this.item.setAttribute('aria-keyshortcuts', `${this.mnemonic}`);\n            }\n        }\n        this.check = append(this.item, $('span.menu-item-check' + ThemeIcon.asCSSSelector(Codicon.menuSelection)));\n        this.check.setAttribute('role', 'none');\n        this.label = append(this.item, $('span.action-label'));\n        if (this.options.label && this.options.keybinding) {\n            append(this.item, $('span.keybinding')).textContent = this.options.keybinding;\n        }\n        // Adds mouse up listener to actually run the action\n        this.runOnceToEnableMouseUp.schedule();\n        this.updateClass();\n        this.updateLabel();\n        this.updateTooltip();\n        this.updateEnabled();\n        this.updateChecked();\n        this.applyStyle();\n    }\n    blur() {\n        super.blur();\n        this.applyStyle();\n    }\n    focus() {\n        var _a;\n        super.focus();\n        (_a = this.item) === null || _a === void 0 ? void 0 : _a.focus();\n        this.applyStyle();\n    }\n    updatePositionInSet(pos, setSize) {\n        if (this.item) {\n            this.item.setAttribute('aria-posinset', `${pos}`);\n            this.item.setAttribute('aria-setsize', `${setSize}`);\n        }\n    }\n    updateLabel() {\n        var _a;\n        if (!this.label) {\n            return;\n        }\n        if (this.options.label) {\n            clearNode(this.label);\n            let label = stripIcons(this.action.label);\n            if (label) {\n                const cleanLabel = cleanMnemonic(label);\n                if (!this.options.enableMnemonics) {\n                    label = cleanLabel;\n                }\n                this.label.setAttribute('aria-label', cleanLabel.replace(/&&/g, '&'));\n                const matches = MENU_MNEMONIC_REGEX.exec(label);\n                if (matches) {\n                    label = strings.escape(label);\n                    // This is global, reset it\n                    MENU_ESCAPED_MNEMONIC_REGEX.lastIndex = 0;\n                    let escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n                    // We can't use negative lookbehind so if we match our negative and skip\n                    while (escMatch && escMatch[1]) {\n                        escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n                    }\n                    const replaceDoubleEscapes = (str) => str.replace(/&amp;&amp;/g, '&amp;');\n                    if (escMatch) {\n                        this.label.append(strings.ltrim(replaceDoubleEscapes(label.substr(0, escMatch.index)), ' '), $('u', { 'aria-hidden': 'true' }, escMatch[3]), strings.rtrim(replaceDoubleEscapes(label.substr(escMatch.index + escMatch[0].length)), ' '));\n                    }\n                    else {\n                        this.label.innerText = replaceDoubleEscapes(label).trim();\n                    }\n                    (_a = this.item) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-keyshortcuts', (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase());\n                }\n                else {\n                    this.label.innerText = label.replace(/&&/g, '&').trim();\n                }\n            }\n        }\n    }\n    updateTooltip() {\n        // menus should function like native menus and they do not have tooltips\n    }\n    updateClass() {\n        if (this.cssClass && this.item) {\n            this.item.classList.remove(...this.cssClass.split(' '));\n        }\n        if (this.options.icon && this.label) {\n            this.cssClass = this.action.class || '';\n            this.label.classList.add('icon');\n            if (this.cssClass) {\n                this.label.classList.add(...this.cssClass.split(' '));\n            }\n            this.updateEnabled();\n        }\n        else if (this.label) {\n            this.label.classList.remove('icon');\n        }\n    }\n    updateEnabled() {\n        if (this.action.enabled) {\n            if (this.element) {\n                this.element.classList.remove('disabled');\n                this.element.removeAttribute('aria-disabled');\n            }\n            if (this.item) {\n                this.item.classList.remove('disabled');\n                this.item.removeAttribute('aria-disabled');\n                this.item.tabIndex = 0;\n            }\n        }\n        else {\n            if (this.element) {\n                this.element.classList.add('disabled');\n                this.element.setAttribute('aria-disabled', 'true');\n            }\n            if (this.item) {\n                this.item.classList.add('disabled');\n                this.item.setAttribute('aria-disabled', 'true');\n            }\n        }\n    }\n    updateChecked() {\n        if (!this.item) {\n            return;\n        }\n        const checked = this.action.checked;\n        this.item.classList.toggle('checked', !!checked);\n        if (checked !== undefined) {\n            this.item.setAttribute('role', 'menuitemcheckbox');\n            this.item.setAttribute('aria-checked', checked ? 'true' : 'false');\n        }\n        else {\n            this.item.setAttribute('role', 'menuitem');\n            this.item.setAttribute('aria-checked', '');\n        }\n    }\n    getMnemonic() {\n        return this.mnemonic;\n    }\n    applyStyle() {\n        const isSelected = this.element && this.element.classList.contains('focused');\n        const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n        const bgColor = isSelected && this.menuStyle.selectionBackgroundColor ? this.menuStyle.selectionBackgroundColor : undefined;\n        const outline = isSelected && this.menuStyle.selectionBorderColor ? `1px solid ${this.menuStyle.selectionBorderColor}` : '';\n        const outlineOffset = isSelected && this.menuStyle.selectionBorderColor ? `-1px` : '';\n        if (this.item) {\n            this.item.style.color = fgColor !== null && fgColor !== void 0 ? fgColor : '';\n            this.item.style.backgroundColor = bgColor !== null && bgColor !== void 0 ? bgColor : '';\n            this.item.style.outline = outline;\n            this.item.style.outlineOffset = outlineOffset;\n        }\n        if (this.check) {\n            this.check.style.color = fgColor !== null && fgColor !== void 0 ? fgColor : '';\n        }\n    }\n}\nclass SubmenuMenuActionViewItem extends BaseMenuActionViewItem {\n    constructor(action, submenuActions, parentData, submenuOptions, menuStyles) {\n        super(action, action, submenuOptions, menuStyles);\n        this.submenuActions = submenuActions;\n        this.parentData = parentData;\n        this.submenuOptions = submenuOptions;\n        this.mysubmenu = null;\n        this.submenuDisposables = this._register(new DisposableStore());\n        this.mouseOver = false;\n        this.expandDirection = submenuOptions && submenuOptions.expandDirection !== undefined ? submenuOptions.expandDirection : Direction.Right;\n        this.showScheduler = new RunOnceScheduler(() => {\n            if (this.mouseOver) {\n                this.cleanupExistingSubmenu(false);\n                this.createSubmenu(false);\n            }\n        }, 250);\n        this.hideScheduler = new RunOnceScheduler(() => {\n            if (this.element && (!isAncestor(getActiveElement(), this.element) && this.parentData.submenu === this.mysubmenu)) {\n                this.parentData.parent.focus(false);\n                this.cleanupExistingSubmenu(true);\n            }\n        }, 750);\n    }\n    render(container) {\n        super.render(container);\n        if (!this.element) {\n            return;\n        }\n        if (this.item) {\n            this.item.classList.add('monaco-submenu-item');\n            this.item.tabIndex = 0;\n            this.item.setAttribute('aria-haspopup', 'true');\n            this.updateAriaExpanded('false');\n            this.submenuIndicator = append(this.item, $('span.submenu-indicator' + ThemeIcon.asCSSSelector(Codicon.menuSubmenu)));\n            this.submenuIndicator.setAttribute('aria-hidden', 'true');\n        }\n        this._register(addDisposableListener(this.element, EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(17 /* KeyCode.RightArrow */) || event.equals(3 /* KeyCode.Enter */)) {\n                EventHelper.stop(e, true);\n                this.createSubmenu(true);\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (getActiveElement() === this.item) {\n                if (event.equals(17 /* KeyCode.RightArrow */) || event.equals(3 /* KeyCode.Enter */)) {\n                    EventHelper.stop(e, true);\n                }\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.MOUSE_OVER, e => {\n            if (!this.mouseOver) {\n                this.mouseOver = true;\n                this.showScheduler.schedule();\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.MOUSE_LEAVE, e => {\n            this.mouseOver = false;\n        }));\n        this._register(addDisposableListener(this.element, EventType.FOCUS_OUT, e => {\n            if (this.element && !isAncestor(getActiveElement(), this.element)) {\n                this.hideScheduler.schedule();\n            }\n        }));\n        this._register(this.parentData.parent.onScroll(() => {\n            if (this.parentData.submenu === this.mysubmenu) {\n                this.parentData.parent.focus(false);\n                this.cleanupExistingSubmenu(true);\n            }\n        }));\n    }\n    updateEnabled() {\n        // override on submenu entry\n        // native menus do not observe enablement on sumbenus\n        // we mimic that behavior\n    }\n    onClick(e) {\n        // stop clicking from trying to run an action\n        EventHelper.stop(e, true);\n        this.cleanupExistingSubmenu(false);\n        this.createSubmenu(true);\n    }\n    cleanupExistingSubmenu(force) {\n        if (this.parentData.submenu && (force || (this.parentData.submenu !== this.mysubmenu))) {\n            // disposal may throw if the submenu has already been removed\n            try {\n                this.parentData.submenu.dispose();\n            }\n            catch (_a) { }\n            this.parentData.submenu = undefined;\n            this.updateAriaExpanded('false');\n            if (this.submenuContainer) {\n                this.submenuDisposables.clear();\n                this.submenuContainer = undefined;\n            }\n        }\n    }\n    calculateSubmenuMenuLayout(windowDimensions, submenu, entry, expandDirection) {\n        const ret = { top: 0, left: 0 };\n        // Start with horizontal\n        ret.left = layout(windowDimensions.width, submenu.width, { position: expandDirection === Direction.Right ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */, offset: entry.left, size: entry.width });\n        // We don't have enough room to layout the menu fully, so we are overlapping the menu\n        if (ret.left >= entry.left && ret.left < entry.left + entry.width) {\n            if (entry.left + 10 + submenu.width <= windowDimensions.width) {\n                ret.left = entry.left + 10;\n            }\n            entry.top += 10;\n            entry.height = 0;\n        }\n        // Now that we have a horizontal position, try layout vertically\n        ret.top = layout(windowDimensions.height, submenu.height, { position: 0 /* LayoutAnchorPosition.Before */, offset: entry.top, size: 0 });\n        // We didn't have enough room below, but we did above, so we shift down to align the menu\n        if (ret.top + submenu.height === entry.top && ret.top + entry.height + submenu.height <= windowDimensions.height) {\n            ret.top += entry.height;\n        }\n        return ret;\n    }\n    createSubmenu(selectFirstItem = true) {\n        if (!this.element) {\n            return;\n        }\n        if (!this.parentData.submenu) {\n            this.updateAriaExpanded('true');\n            this.submenuContainer = append(this.element, $('div.monaco-submenu'));\n            this.submenuContainer.classList.add('menubar-menu-items-holder', 'context-view');\n            // Set the top value of the menu container before construction\n            // This allows the menu constructor to calculate the proper max height\n            const computedStyles = getComputedStyle(this.parentData.parent.domNode);\n            const paddingTop = parseFloat(computedStyles.paddingTop || '0') || 0;\n            // this.submenuContainer.style.top = `${this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop}px`;\n            this.submenuContainer.style.zIndex = '1';\n            this.submenuContainer.style.position = 'fixed';\n            this.submenuContainer.style.top = '0';\n            this.submenuContainer.style.left = '0';\n            this.parentData.submenu = new Menu(this.submenuContainer, this.submenuActions.length ? this.submenuActions : [new EmptySubmenuAction()], this.submenuOptions, this.menuStyle);\n            // layout submenu\n            const entryBox = this.element.getBoundingClientRect();\n            const entryBoxUpdated = {\n                top: entryBox.top - paddingTop,\n                left: entryBox.left,\n                height: entryBox.height + 2 * paddingTop,\n                width: entryBox.width\n            };\n            const viewBox = this.submenuContainer.getBoundingClientRect();\n            const { top, left } = this.calculateSubmenuMenuLayout(new Dimension(window.innerWidth, window.innerHeight), Dimension.lift(viewBox), entryBoxUpdated, this.expandDirection);\n            // subtract offsets caused by transform parent\n            this.submenuContainer.style.left = `${left - viewBox.left}px`;\n            this.submenuContainer.style.top = `${top - viewBox.top}px`;\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_UP, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                    EventHelper.stop(e, true);\n                    this.parentData.parent.focus();\n                    this.cleanupExistingSubmenu(true);\n                }\n            }));\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_DOWN, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                    EventHelper.stop(e, true);\n                }\n            }));\n            this.submenuDisposables.add(this.parentData.submenu.onDidCancel(() => {\n                this.parentData.parent.focus();\n                this.cleanupExistingSubmenu(true);\n            }));\n            this.parentData.submenu.focus(selectFirstItem);\n            this.mysubmenu = this.parentData.submenu;\n        }\n        else {\n            this.parentData.submenu.focus(false);\n        }\n    }\n    updateAriaExpanded(value) {\n        var _a;\n        if (this.item) {\n            (_a = this.item) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-expanded', value);\n        }\n    }\n    applyStyle() {\n        super.applyStyle();\n        const isSelected = this.element && this.element.classList.contains('focused');\n        const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n        if (this.submenuIndicator) {\n            this.submenuIndicator.style.color = fgColor !== null && fgColor !== void 0 ? fgColor : '';\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.hideScheduler.dispose();\n        if (this.mysubmenu) {\n            this.mysubmenu.dispose();\n            this.mysubmenu = null;\n        }\n        if (this.submenuContainer) {\n            this.submenuContainer = undefined;\n        }\n    }\n}\nclass MenuSeparatorActionViewItem extends ActionViewItem {\n    constructor(context, action, options, menuStyles) {\n        super(context, action, options);\n        this.menuStyles = menuStyles;\n    }\n    render(container) {\n        super.render(container);\n        if (this.label) {\n            this.label.style.borderBottomColor = this.menuStyles.separatorColor ? `${this.menuStyles.separatorColor}` : '';\n        }\n    }\n}\nexport function cleanMnemonic(label) {\n    const regex = MENU_MNEMONIC_REGEX;\n    const matches = regex.exec(label);\n    if (!matches) {\n        return label;\n    }\n    const mnemonicInText = !matches[1];\n    return label.replace(regex, mnemonicInText ? '$2$3' : '').trim();\n}\nexport function formatRule(c) {\n    const fontCharacter = getCodiconFontCharacters()[c.id];\n    return `.codicon-${c.id}:before { content: '\\\\${fontCharacter.toString(16)}'; }`;\n}\nfunction getMenuWidgetCSS(style, isForShadowDom) {\n    let result = /* css */ `\n.monaco-menu {\n\tfont-size: 13px;\n\tborder-radius: 5px;\n\tmin-width: 160px;\n}\n\n${formatRule(Codicon.menuSelection)}\n${formatRule(Codicon.menuSubmenu)}\n\n.monaco-menu .monaco-action-bar {\n\ttext-align: right;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.monaco-menu .monaco-action-bar .actions-container {\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tpadding: 0;\n\twidth: 100%;\n\tjustify-content: flex-end;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar.reverse .actions-container {\n\tflex-direction: row-reverse;\n}\n\n.monaco-menu .monaco-action-bar .action-item {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\ttransition: transform 50ms ease;\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled {\n\tcursor: default;\n}\n\n.monaco-menu .monaco-action-bar.animated .action-item.active {\n\ttransform: scale(1.272019649, 1.272019649); /* 1.272019649 = √φ */\n}\n\n.monaco-menu .monaco-action-bar .action-item .icon,\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar .action-label {\n\tfont-size: 11px;\n\tmargin-right: 4px;\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\n\tcolor: var(--vscode-disabledForeground);\n}\n\n/* Vertical actions */\n\n.monaco-menu .monaco-action-bar.vertical {\n\ttext-align: left;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tdisplay: block;\n\tborder-bottom: 1px solid var(--vscode-menu-separatorBackground);\n\tpadding-top: 1px;\n\tpadding: 30px;\n}\n\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\n\tmargin-left: 6px;\n}\n\n/* Action Items */\n.monaco-menu .monaco-action-bar .action-item.select-container {\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\n\tflex: 1;\n\tmax-width: 170px;\n\tmin-width: 60px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 10px;\n}\n\n.monaco-menu .monaco-action-bar.vertical {\n\tmargin-left: 0;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tpadding: 0;\n\ttransform: none;\n\tdisplay: flex;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\n\ttransform: none;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\theight: 2em;\n\talign-items: center;\n\tposition: relative;\n\tmargin: 0 4px;\n\tborder-radius: 4px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {\n\topacity: unset;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label {\n\tflex: 1 1 auto;\n\ttext-decoration: none;\n\tpadding: 0 1em;\n\tbackground: none;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .keybinding,\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tdisplay: inline-block;\n\tflex: 2 1 auto;\n\tpadding: 0 1em;\n\ttext-align: right;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\n\tfont-size: 16px !important;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\n\tmargin-left: auto;\n\tmargin-right: -20px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\n\topacity: 0.4;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tmargin: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tposition: static;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\n\tposition: absolute;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\twidth: 100%;\n\theight: 0px !important;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\n\tpadding: 0.7em 1em 0.1em 1em;\n\tfont-weight: bold;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\n\tcolor: inherit;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tposition: absolute;\n\tvisibility: hidden;\n\twidth: 1em;\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\n\tvisibility: visible;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Context Menu */\n\n.context-view.monaco-menu-container {\n\toutline: 0;\n\tborder: none;\n\tanimation: fadeIn 0.083s linear;\n\t-webkit-app-region: no-drag;\n}\n\n.context-view.monaco-menu-container :focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\n\toutline: 0;\n}\n\n.hc-black .context-view.monaco-menu-container,\n.hc-light .context-view.monaco-menu-container,\n:host-context(.hc-black) .context-view.monaco-menu-container,\n:host-context(.hc-light) .context-view.monaco-menu-container {\n\tbox-shadow: none;\n}\n\n.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\n\tbackground: none;\n}\n\n/* Vertical Action Bar Styles */\n\n.monaco-menu .monaco-action-bar.vertical {\n\tpadding: 4px 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\theight: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\n.monaco-menu .monaco-action-bar.vertical .keybinding {\n\tfont-size: inherit;\n\tpadding: 0 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tfont-size: inherit;\n\twidth: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tfont-size: inherit;\n\tmargin: 5px 0 !important;\n\tpadding: 0;\n\tborder-radius: 0;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tfont-size: 60%;\n\tpadding: 0 1.8em;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n\tmask-size: 10px 10px;\n\t-webkit-mask-size: 10px 10px;\n}\n\n.monaco-menu .action-item {\n\tcursor: default;\n}`;\n    if (isForShadowDom) {\n        // Only define scrollbar styles when used inside shadow dom,\n        // otherwise leave their styling to the global workbench styling.\n        result += `\n\t\t\t/* Arrows */\n\t\t\t.monaco-scrollable-element > .scrollbar > .scra {\n\t\t\t\tcursor: pointer;\n\t\t\t\tfont-size: 11px !important;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .visible {\n\t\t\t\topacity: 1;\n\n\t\t\t\t/* Background rule added for IE9 - to allow clicks on dom node */\n\t\t\t\tbackground:rgba(0,0,0,0);\n\n\t\t\t\ttransition: opacity 100ms linear;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible {\n\t\t\t\topacity: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible.fade {\n\t\t\t\ttransition: opacity 800ms linear;\n\t\t\t}\n\n\t\t\t/* Scrollable Content Inset Shadow */\n\t\t\t.monaco-scrollable-element > .shadow {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 3px;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 3px;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top-left-corner {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t`;\n        // Scrollbars\n        const scrollbarShadowColor = style.scrollbarShadow;\n        if (scrollbarShadowColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 0 6px 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 6px 0 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 6px 6px 6px -6px inset;\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderBackgroundColor = style.scrollbarSliderBackground;\n        if (scrollbarSliderBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\t\tbackground: ${scrollbarSliderBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderHoverBackgroundColor = style.scrollbarSliderHoverBackground;\n        if (scrollbarSliderHoverBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\t\tbackground: ${scrollbarSliderHoverBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderActiveBackgroundColor = style.scrollbarSliderActiveBackground;\n        if (scrollbarSliderActiveBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\t\tbackground: ${scrollbarSliderActiveBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n    }\n    return result;\n}\n"],"names":["$","dom","unthemedKeybindingLabelOptions","keybindingLabelBackground","undefined","keybindingLabelForeground","keybindingLabelBorder","keybindingLabelBottomBorder","keybindingLabelShadow","KeybindingLabel","container","os","options","_classCallCheck","this","keyElements","Set","Object","create","labelForeground","domNode","append","style","color","didEverRender","appendChild","_createClass","key","get","value","keybinding","matches","areSame","render","_a","clear","chords","getChords","renderChord","firstPart","i","length","chordPart","title","disableTitle","getAriaLabel","removeAttribute","renderUnboundKeybindings","renderUnbound","clearNode","parent","chord","match","modifierLabels","UILabelProvider","ctrlKey","renderKey","Boolean","separator","shiftKey","altKey","metaKey","keyLabel","keyCode","label","highlight","createKeyElement","localize","keyElement","arguments","add","backgroundColor","borderColor","borderBottomColor","boxShadow","concat","a","b","equals","PagedRenderer","renderer","modelProvider","templateId","data","renderTemplate","disposable","Disposable","None","index","_","height","_this","dispose","model","isResolved","renderElement","cts","CancellationTokenSource","promise","resolve","token","cancel","renderPlaceholder","then","entry","disposeTemplate","PagedAccessibilityProvider","accessibilityProvider","getWidgetAriaLabel","PagedList","user","virtualDelegate","renderers","_this2","pagedRenderers","map","r","list","List","assign","fromPagedListOptions","updateOptions","getHTMLElement","onDidFocus","onDidDispose","_this3","Event","onMouseDblClick","_ref","element","browserEvent","_model","_this4","onPointer","_ref2","_this5","onDidChangeSelection","_ref3","elements","indexes","e","set","splice","range","getFocus","getSelection","_this6","styles","groupIntersect","groups","_step","result","_iterator","_createForOfIteratorHelper","s","n","done","start","end","intersection","Range","intersect","isEmpty","push","size","err","f","shift","much","_len","Array","_key","_step2","previousGroup","_iterator2","group","consolidate","reduce","g","RangeMap","topPadding","_size","_paddingTop","paddingTop","deleteCount","items","diff","before","after","Number","POSITIVE_INFINITY","middle","item","t","len","position","_step3","_iterator3","count","newSize","Math","floor","min","indexAt","_step4","_iterator4","groupCount","newCount","RowCache","cache","Map","transactionNodesPendingRemoval","inTransaction","getTemplateCache","pop","isStale","has","delete","templateData","getRenderer","row","isReusingConnectedDomNode","releaseRow","makeChanges","Error","doRemoveNode","classList","remove","parentElement","removeChild","removeFromParent","forEach","cachedRows","cachedRow","__decorate","decorators","target","desc","d","c","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","StaticDND","CurrentDragAndDropData","DefaultOptions","useShadows","verticalScrollMode","setRowLineHeight","setRowHeight","supportDynamicHeights","dnd","getDragElements","getDragURI","onDragStart","onDragOver","drop","horizontalScrolling","transformOptimization","alwaysConsumeMouseWheel","ElementsDragAndDropData","ExternalElementsDragAndDropData","NativeDragAndDropData","types","files","dataTransfer","_this$types","apply","_toConsumableArray","file","type","ListViewAccessibilityProvider","getSetSize","bind","l","getPosInSet","getRole","isChecked","ListView","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","domId","InstanceCount","renderWidth","_scrollHeight","scrollableElementUpdateDisposable","scrollableElementWidthDelayer","Delayer","splicing","dragOverAnimationStopDisposable","dragOverMouseY","canDrop","currentDragFeedbackDisposable","onDragLeaveTimeout","disposables","DisposableStore","_onDidChangeContentHeight","Emitter","_onDidChangeContentWidth","_horizontalScrolling","itemId","rangeMap","lastRenderTop","lastRenderHeight","document","createElement","className","tabIndex","toggle","mouseSupport","paddingBottom","rowsContainer","transform","overflow","contain","Gesture","addTarget","scrollable","Scrollable","forceIntegerValues","smoothScrollDuration","smoothScrolling","scheduleAtNextAnimationFrame","cb","scrollableElement","SmoothScrollableElement","horizontal","vertical","mouseWheelScrollSensitivity","fastScrollSensitivity","scrollByPage","getDomNode","onScroll","addDisposableListener","TouchEventType","Change","onTouchChange","scrollTop","toDragEvent","onDrop","onDragLeave","onDragEnd","layout","initialSize","width","measureItemWidth","updateScrollWidth","setScrollDimensions","getContentWidth","max","scrollWidth","scrollableOptions","scrollHeight","setSmoothScrollDuration","lastRenderRange","getRenderRange","offset","setScrollTop","eventuallyUpdateScrollDimensions","_rerender","_splice","fire","contentHeight","previousRenderRange","deleteRange","removeRange","rowsToDispose","dragStartDisposable","checkedDisposable","rows","disposeElement","deleted","_this$items","previousRestRange","previousRenderedRestRange","previousUnrenderedRestRanges","relativeComplement","inserted","id","String","getTemplateId","getHeight","hasDynamicHeight","lastDynamicHeightWidth","uri","dropTarget","delta","renderRange","renderedRestRange","updateRange","updateItemInDOM","removeRanges","removeItemFromDOM","unrenderedRestRanges","insertRanges","beforeElement","getNextToLastElement","insertItemInDOM","_step5","_iterator5","values","_step6","_iterator6","release","renderHeight","trigger","_step7","_iterator7","_step8","_iterator8","getScrollDimensions","firstElTop","positionAt","nextElTop","indexAfter","scrollDimensions","getContentHeight","renderTop","renderLeft","updateItemsInDOM","rangesToInsert","rangesToRemove","rangesToUpdate","transact","_step9","_iterator9","_step10","_iterator10","left","top","alloc","role","setAttribute","checked","update","onDidChange","insertBefore","draggable","event","eventuallyUpdateScrollWidth","window","getComputedStyle","paddingLeft","parseFloat","paddingRight","elementTop","lineHeight","getElementDomId","getScrollPosition","reuseAnimation","setScrollPosition","getScrollTop","_this7","DomEmitter","toMouseEvent","_this8","_this9","filter","button","_this10","_this11","_this12","_this13","any","Contextmenu","toGestureEvent","_this14","toTouchEvent","_this15","Tap","getItemIndexFromEventTarget","initialTarget","scrollLeft","inSmoothScrolling","console","error","preventDefault","stopPropagation","translationY","effectAllowed","setData","DataTransfers","TEXT","setDragImage","getDragLabel","dragImage","textContent","contains","body","getDragImageContainer","setTimeout","currentDragData","call","_this16","getData","setupDragAndDropScrollTopAnimation","feedback","f1","f2","accept","currentDragFeedback","dropEffect","effect","distinct","sort","isArray","toDisposable","_step11","_iterator11","_step12","_iterator12","_this17","disposableTimeout","clearDragOverFeedback","dragData","teardownDragAndDropScrollTopAnimation","_this18","dragOverAnimationDisposable","viewTop","getTopLeftOffset","animate","animateDragAndDropScrollTop","pageY","upperLimit","HTMLElement","rawIndex","getAttribute","isNaN","anchorElementIndex","anchorElementTopDelta","heightDiff","didChange","probeDynamicHeight","_step13","unrenderRanges","_iterator13","_step14","renderRanges","_iterator14","afterIndex","beforeRow","deltaScrollTop","getFutureScrollPosition","newScrollTop","getDynamicHeight","offsetHeight","BugIndicatingError","setDynamicHeight","ranges","lastRange","nextToLastItem","_step15","_iterator15","parentNode","memoize","prototype","CombinedSpliceable","spliceables","ListError","_Error","_inherits","_super","_createSuper","message","_wrapNativeSuper","__awaiter","thisArg","_arguments","P","generator","Promise","reject","fulfilled","step","next","rejected","TraitRenderer","trait","renderedElements","name","renderedElementIndex","findIndex","el","rendered","unrender","renderIndex","insertCount","renderedElement","_step2$value","indexOf","Trait","_trait","sortedIndexes","_onChange","onChange","j","first","find","_set","numericSort","sortedResult","toRender","disjunction","renderIndexes","binarySearch","SelectionTrait","_Trait","setAriaSelected","_get","_getPrototypeOf","TraitSpliceable","view","identityProvider","fill","pastElementsWithTrait","getId","toString","pastElementsWithTraitSet","elementsWithTrait","isInputElement","tagName","isMonacoEditor","isButton","TypeNavigationMode","TypeNavigationControllerState","KeyboardController","multipleSelectionDisposables","multipleSelectionSupport","onKeyDown","onEnter","onUpArrow","onDownArrow","onPageUpArrow","onPageDownArrow","onEscape","platform","onCtrlA","chain","StandardKeyboardEvent","optionsUpdate","setSelection","focusPrevious","setAnchor","reveal","focus","focusNext","focusPreviousPage","focusNextPage","DefaultKeyboardNavigationDelegate","_class","TypeNavigationController","keyboardNavigationLabelProvider","keyboardNavigationEventFilter","delegate","enabled","state","Idle","mode","Automatic","triggered","previouslyFocused","enabledDisposables","typeNavigationEnabled","enable","disable","typeNavigationMode","typing","onChar","mightProducePrintableCharacter","EventHelper","stop","onClear","debounce","onInput","ariaLabel","alert","word","Typing","getKeyboardNavigationLabel","labelStr","matchesPrefix","setFocus","fuzzy","matchesFuzzy2","DOMFocusController","onTab","focusedDomElement","domElement","tabIndexElement","querySelector","visibility","display","isSelectionSingleChangeEvent","isSelectionRangeChangeEvent","DefaultMultipleSelectionController","MouseController","_onPointer","multipleSelectionController","onMouseDown","onContextMenu","onDoubleClick","onTouchStart","onMouseClick","onMouseMiddleClick","onTap","onViewPointer","activeElement","domFocus","isHandledByList","isSelectionChangeEvent","changeSelection","MouseEvent","anchor","getAnchor","currentFocus","rangeSelection","selection","contiguousRange","reverse","getContiguousRangeContaining","newSelection","one","other","DefaultStyleController","styleElement","selectorSuffix","suffix","content","listBackground","listFocusBackground","listFocusForeground","listActiveSelectionBackground","listActiveSelectionForeground","listActiveSelectionIconForeground","listFocusAndSelectionBackground","listFocusAndSelectionForeground","listInactiveFocusForeground","listInactiveSelectionIconForeground","listInactiveFocusBackground","listInactiveSelectionBackground","listInactiveSelectionForeground","listHoverBackground","listHoverForeground","focusAndSelectionOutline","asCssValueWithDefault","listFocusAndSelectionOutline","listSelectionOutline","listFocusOutline","inactiveFocusAndSelectionOutline","listInactiveFocusOutline","listHoverOutline","listDropBackground","tableColumnsBorder","tableOddRowsBackgroundColor","join","unthemedListStyles","treeIndentGuidesStroke","treeInactiveIndentGuidesStroke","Color","fromHex","transparent","keyboardSupport","PipelineRenderer","_templateId","AccessibiltyRenderer","ariaLevel","getAriaLevel","ListViewDragAndDrop","getSelectedElements","originalEvent","targetElement","targetIndex","_options","eventBufferer","EventBufferer","_ariaLabel","_onDidDispose","getWidgetRole","baseRenderers","onDidChangeActiveDescendant","viewOptions","createListView","styleController","createStyleSheet","spliceable","keyboardController","keyboardNavigationDelegate","typeNavigationController","mouseController","createMouseController","onDidChangeFocus","_onFocusChange","_onSelectionChange","wrapEvent","toListEvent","onDidScroll","onMouseOver","onMouseOut","didJustPressContextMenuKey","fromKeyDown","fromKeyUp","fromMouse","StandardMouseEvent","signal","bufferEvents","rerender","firstVisibleIndex","preventScroll","firstOrDefault","loop","findNextIndex","findPreviousIndex","_regeneratorRuntime","mark","_callee","lastPageIndex","currentlyFocusedElementIndex","lastGoodPageIndex","previousScrollTop","nextpageScrollTop","wrap","_context","prev","elementHeight","timeout","_callee2","firstPageIndex","firstGoodPageIndex","_context2","focusNth","relativeTop","isNumber","m","clamp","viewItemBottom","scrollBottom","getActiveDescendantId","Direction","MENU_MNEMONIC_REGEX","MENU_ESCAPED_MNEMONIC_REGEX","Menu","_ActionBar","actions","menuStyles","menuElement","orientation","actionViewItemProvider","action","doGetActionViewItem","parentData","context","actionRunner","ariaRole","focusOnlyEnabledItems","triggerKeys","keys","isMacintosh","isLinux","keyDown","actionsList","menuDisposables","_register","initializeOrUpdateStyleSheet","EventType","KEY_DOWN","enableMnemonics","toLocaleLowerCase","mnemonics","SubmenuMenuActionViewItem","focusItemByElement","onClick","focusedItem","viewItems","MOUSE_OUT","relatedTarget","isAncestor","updateFocus","MOUSE_OVER","lastFocusedItem","setFocusedItem","_assertThisInitialized","DomScrollableElement","verticalScrollbarSize","handleMouseWheel","scrollElement","styleScrollElement","MOUSE_UP","maxHeight","innerHeight","getBoundingClientRect","submenuIds","warn","icon","isMenu","scanDomNode","MenuSeparatorActionViewItem","array","updatePositionInSet","styleSheet","isInShadowDOM","globalStyleSheet","isForShadowDom","formatRule","Codicon","menuSelection","menuSubmenu","scrollbarShadowColor","scrollbarShadow","scrollbarSliderBackgroundColor","scrollbarSliderBackground","scrollbarSliderHoverBackgroundColor","scrollbarSliderHoverBackground","scrollbarSliderActiveBackgroundColor","scrollbarSliderActiveBackground","getMenuWidgetCSS","fgColor","foregroundColor","bgColor","border","shadow","shadowColor","outline","borderRadius","children","fromRight","round","Separator","SubmenuAction","menuActionViewItem","mnemonic","getMnemonic","isEnabled","actionViewItems","menuItemOptions","useEventAsContext","getKeyBinding","keybindingLabel","getLabel","BaseMenuActionViewItem","ActionBar","_BaseActionViewItem","_super2","ctx","menuStyle","cssClass","exec","runOnceToEnableMouseUp","RunOnceScheduler","isFirefox","rightButton","CONTEXT_MENU","_action","ID","check","ThemeIcon","asCSSSelector","schedule","updateClass","updateLabel","updateTooltip","updateEnabled","updateChecked","applyStyle","pos","setSize","stripIcons","cleanLabel","regex","mnemonicInText","replace","trim","cleanMnemonic","strings","lastIndex","escMatch","replaceDoubleEscapes","str","substr","innerText","_this$item$classList","split","_this$label$classList","class","isSelected","selectionForegroundColor","selectionBackgroundColor","selectionBorderColor","outlineOffset","BaseActionViewItem","_BaseMenuActionViewIt","_super3","submenuActions","submenuOptions","mysubmenu","submenuDisposables","mouseOver","expandDirection","Right","showScheduler","cleanupExistingSubmenu","createSubmenu","hideScheduler","getActiveElement","submenu","updateAriaExpanded","submenuIndicator","KEY_UP","MOUSE_LEAVE","FOCUS_OUT","force","submenuContainer","windowDimensions","ret","selectFirstItem","computedStyles","zIndex","EmptySubmenuAction","entryBox","entryBoxUpdated","viewBox","_this$calculateSubmen","calculateSubmenuMenuLayout","Dimension","innerWidth","lift","onDidCancel","_ActionViewItem","_super4","separatorColor","ActionViewItem","fontCharacter","getCodiconFontCharacters"],"sourceRoot":""}