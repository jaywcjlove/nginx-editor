{"version":3,"file":"static/js/monaco-editor-vendor.b9228f58.e1f68187.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/browser/dnd.js","../node_modules/monaco-editor/esm/vs/editor/browser/editorBrowser.js","../node_modules/monaco-editor/esm/vs/editor/browser/editorDom.js","../node_modules/monaco-editor/esm/vs/editor/browser/editorExtensions.js","../node_modules/monaco-editor/esm/vs/editor/browser/observableUtilities.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/abstractCodeEditorService.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/bulkEditService.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/codeEditorService.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/editorWorkerService.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/hoverService/hoverWidget.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/hoverService/updatableHoverWidget.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/hoverService/hoverService.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/markerDecorations.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/openerService.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/webWorker.js","../node_modules/monaco-editor/esm/vs/editor/browser/stableEditorScroll.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { DataTransfers } from '../../base/browser/dnd.js';\nimport { createFileDataTransferItem, createStringDataTransferItem, UriList, VSDataTransfer } from '../../base/common/dataTransfer.js';\nimport { Mimes } from '../../base/common/mime.js';\nimport { URI } from '../../base/common/uri.js';\nimport { CodeDataTransfers } from '../../platform/dnd/browser/dnd.js';\nexport function toVSDataTransfer(dataTransfer) {\n    const vsDataTransfer = new VSDataTransfer();\n    for (const item of dataTransfer.items) {\n        const type = item.type;\n        if (item.kind === 'string') {\n            const asStringValue = new Promise(resolve => item.getAsString(resolve));\n            vsDataTransfer.append(type, createStringDataTransferItem(asStringValue));\n        }\n        else if (item.kind === 'file') {\n            const file = item.getAsFile();\n            if (file) {\n                vsDataTransfer.append(type, createFileDataTransferItemFromFile(file));\n            }\n        }\n    }\n    return vsDataTransfer;\n}\nfunction createFileDataTransferItemFromFile(file) {\n    const uri = file.path ? URI.parse(file.path) : undefined;\n    return createFileDataTransferItem(file.name, uri, async () => {\n        return new Uint8Array(await file.arrayBuffer());\n    });\n}\nconst INTERNAL_DND_MIME_TYPES = Object.freeze([\n    CodeDataTransfers.EDITORS,\n    CodeDataTransfers.FILES,\n    DataTransfers.RESOURCES,\n    DataTransfers.INTERNAL_URI_LIST,\n]);\nexport function toExternalVSDataTransfer(sourceDataTransfer, overwriteUriList = false) {\n    const vsDataTransfer = toVSDataTransfer(sourceDataTransfer);\n    // Try to expose the internal uri-list type as the standard type\n    const uriList = vsDataTransfer.get(DataTransfers.INTERNAL_URI_LIST);\n    if (uriList) {\n        vsDataTransfer.replace(Mimes.uriList, uriList);\n    }\n    else {\n        if (overwriteUriList || !vsDataTransfer.has(Mimes.uriList)) {\n            // Otherwise, fallback to adding dragged resources to the uri list\n            const editorData = [];\n            for (const item of sourceDataTransfer.items) {\n                const file = item.getAsFile();\n                if (file) {\n                    const path = file.path;\n                    try {\n                        if (path) {\n                            editorData.push(URI.file(path).toString());\n                        }\n                        else {\n                            editorData.push(URI.parse(file.name, true).toString());\n                        }\n                    }\n                    catch (_a) {\n                        // Parsing failed. Leave out from list\n                    }\n                }\n            }\n            if (editorData.length) {\n                vsDataTransfer.replace(Mimes.uriList, createStringDataTransferItem(UriList.create(editorData)));\n            }\n        }\n    }\n    for (const internal of INTERNAL_DND_MIME_TYPES) {\n        vsDataTransfer.delete(internal);\n    }\n    return vsDataTransfer;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as editorCommon from '../common/editorCommon.js';\n/**\n *@internal\n */\nexport function isCodeEditor(thing) {\n    if (thing && typeof thing.getEditorType === 'function') {\n        return thing.getEditorType() === editorCommon.EditorType.ICodeEditor;\n    }\n    else {\n        return false;\n    }\n}\n/**\n *@internal\n */\nexport function isDiffEditor(thing) {\n    if (thing && typeof thing.getEditorType === 'function') {\n        return thing.getEditorType() === editorCommon.EditorType.IDiffEditor;\n    }\n    else {\n        return false;\n    }\n}\n/**\n *@internal\n */\nexport function isCompositeEditor(thing) {\n    return !!thing\n        && typeof thing === 'object'\n        && typeof thing.onDidChangeActiveEditor === 'function';\n}\n/**\n *@internal\n */\nexport function getCodeEditor(thing) {\n    if (isCodeEditor(thing)) {\n        return thing;\n    }\n    if (isDiffEditor(thing)) {\n        return thing.getModifiedEditor();\n    }\n    if (isCompositeEditor(thing) && isCodeEditor(thing.activeCodeEditor)) {\n        return thing.activeCodeEditor;\n    }\n    return null;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../base/browser/dom.js';\nimport { GlobalPointerMoveMonitor } from '../../base/browser/globalPointerMoveMonitor.js';\nimport { StandardMouseEvent } from '../../base/browser/mouseEvent.js';\nimport { RunOnceScheduler } from '../../base/common/async.js';\nimport { Disposable, DisposableStore } from '../../base/common/lifecycle.js';\nimport { asCssVariable } from '../../platform/theme/common/colorRegistry.js';\n/**\n * Coordinates relative to the whole document (e.g. mouse event's pageX and pageY)\n */\nexport class PageCoordinates {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n        this._pageCoordinatesBrand = undefined;\n    }\n    toClientCoordinates(targetWindow) {\n        return new ClientCoordinates(this.x - targetWindow.scrollX, this.y - targetWindow.scrollY);\n    }\n}\n/**\n * Coordinates within the application's client area (i.e. origin is document's scroll position).\n *\n * For example, clicking in the top-left corner of the client area will\n * always result in a mouse event with a client.x value of 0, regardless\n * of whether the page is scrolled horizontally.\n */\nexport class ClientCoordinates {\n    constructor(clientX, clientY) {\n        this.clientX = clientX;\n        this.clientY = clientY;\n        this._clientCoordinatesBrand = undefined;\n    }\n    toPageCoordinates(targetWindow) {\n        return new PageCoordinates(this.clientX + targetWindow.scrollX, this.clientY + targetWindow.scrollY);\n    }\n}\n/**\n * The position of the editor in the page.\n */\nexport class EditorPagePosition {\n    constructor(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this._editorPagePositionBrand = undefined;\n    }\n}\n/**\n * Coordinates relative to the the (top;left) of the editor that can be used safely with other internal editor metrics.\n * **NOTE**: This position is obtained by taking page coordinates and transforming them relative to the\n * editor's (top;left) position in a way in which scale transformations are taken into account.\n * **NOTE**: These coordinates could be negative if the mouse position is outside the editor.\n */\nexport class CoordinatesRelativeToEditor {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n        this._positionRelativeToEditorBrand = undefined;\n    }\n}\nexport function createEditorPagePosition(editorViewDomNode) {\n    const editorPos = dom.getDomNodePagePosition(editorViewDomNode);\n    return new EditorPagePosition(editorPos.left, editorPos.top, editorPos.width, editorPos.height);\n}\nexport function createCoordinatesRelativeToEditor(editorViewDomNode, editorPagePosition, pos) {\n    // The editor's page position is read from the DOM using getBoundingClientRect().\n    //\n    // getBoundingClientRect() returns the actual dimensions, while offsetWidth and offsetHeight\n    // reflect the unscaled size. We can use this difference to detect a transform:scale()\n    // and we will apply the transformation in inverse to get mouse coordinates that make sense inside the editor.\n    //\n    // This could be expanded to cover rotation as well maybe by walking the DOM up from `editorViewDomNode`\n    // and computing the effective transformation matrix using getComputedStyle(element).transform.\n    //\n    const scaleX = editorPagePosition.width / editorViewDomNode.offsetWidth;\n    const scaleY = editorPagePosition.height / editorViewDomNode.offsetHeight;\n    // Adjust mouse offsets if editor appears to be scaled via transforms\n    const relativeX = (pos.x - editorPagePosition.x) / scaleX;\n    const relativeY = (pos.y - editorPagePosition.y) / scaleY;\n    return new CoordinatesRelativeToEditor(relativeX, relativeY);\n}\nexport class EditorMouseEvent extends StandardMouseEvent {\n    constructor(e, isFromPointerCapture, editorViewDomNode) {\n        super(dom.getWindow(editorViewDomNode), e);\n        this._editorMouseEventBrand = undefined;\n        this.isFromPointerCapture = isFromPointerCapture;\n        this.pos = new PageCoordinates(this.posx, this.posy);\n        this.editorPos = createEditorPagePosition(editorViewDomNode);\n        this.relativePos = createCoordinatesRelativeToEditor(editorViewDomNode, this.editorPos, this.pos);\n    }\n}\nexport class EditorMouseEventFactory {\n    constructor(editorViewDomNode) {\n        this._editorViewDomNode = editorViewDomNode;\n    }\n    _create(e) {\n        return new EditorMouseEvent(e, false, this._editorViewDomNode);\n    }\n    onContextMenu(target, callback) {\n        return dom.addDisposableListener(target, 'contextmenu', (e) => {\n            callback(this._create(e));\n        });\n    }\n    onMouseUp(target, callback) {\n        return dom.addDisposableListener(target, 'mouseup', (e) => {\n            callback(this._create(e));\n        });\n    }\n    onMouseDown(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.MOUSE_DOWN, (e) => {\n            callback(this._create(e));\n        });\n    }\n    onPointerDown(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.POINTER_DOWN, (e) => {\n            callback(this._create(e), e.pointerId);\n        });\n    }\n    onMouseLeave(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.MOUSE_LEAVE, (e) => {\n            callback(this._create(e));\n        });\n    }\n    onMouseMove(target, callback) {\n        return dom.addDisposableListener(target, 'mousemove', (e) => callback(this._create(e)));\n    }\n}\nexport class EditorPointerEventFactory {\n    constructor(editorViewDomNode) {\n        this._editorViewDomNode = editorViewDomNode;\n    }\n    _create(e) {\n        return new EditorMouseEvent(e, false, this._editorViewDomNode);\n    }\n    onPointerUp(target, callback) {\n        return dom.addDisposableListener(target, 'pointerup', (e) => {\n            callback(this._create(e));\n        });\n    }\n    onPointerDown(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.POINTER_DOWN, (e) => {\n            callback(this._create(e), e.pointerId);\n        });\n    }\n    onPointerLeave(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.POINTER_LEAVE, (e) => {\n            callback(this._create(e));\n        });\n    }\n    onPointerMove(target, callback) {\n        return dom.addDisposableListener(target, 'pointermove', (e) => callback(this._create(e)));\n    }\n}\nexport class GlobalEditorPointerMoveMonitor extends Disposable {\n    constructor(editorViewDomNode) {\n        super();\n        this._editorViewDomNode = editorViewDomNode;\n        this._globalPointerMoveMonitor = this._register(new GlobalPointerMoveMonitor());\n        this._keydownListener = null;\n    }\n    startMonitoring(initialElement, pointerId, initialButtons, pointerMoveCallback, onStopCallback) {\n        // Add a <<capture>> keydown event listener that will cancel the monitoring\n        // if something other than a modifier key is pressed\n        this._keydownListener = dom.addStandardDisposableListener(initialElement.ownerDocument, 'keydown', (e) => {\n            const chord = e.toKeyCodeChord();\n            if (chord.isModifierKey()) {\n                // Allow modifier keys\n                return;\n            }\n            this._globalPointerMoveMonitor.stopMonitoring(true, e.browserEvent);\n        }, true);\n        this._globalPointerMoveMonitor.startMonitoring(initialElement, pointerId, initialButtons, (e) => {\n            pointerMoveCallback(new EditorMouseEvent(e, true, this._editorViewDomNode));\n        }, (e) => {\n            this._keydownListener.dispose();\n            onStopCallback(e);\n        });\n    }\n    stopMonitoring() {\n        this._globalPointerMoveMonitor.stopMonitoring(true);\n    }\n}\n/**\n * A helper to create dynamic css rules, bound to a class name.\n * Rules are reused.\n * Reference counting and delayed garbage collection ensure that no rules leak.\n*/\nexport class DynamicCssRules {\n    constructor(_editor) {\n        this._editor = _editor;\n        this._instanceId = ++DynamicCssRules._idPool;\n        this._counter = 0;\n        this._rules = new Map();\n        // We delay garbage collection so that hanging rules can be reused.\n        this._garbageCollectionScheduler = new RunOnceScheduler(() => this.garbageCollect(), 1000);\n    }\n    createClassNameRef(options) {\n        const rule = this.getOrCreateRule(options);\n        rule.increaseRefCount();\n        return {\n            className: rule.className,\n            dispose: () => {\n                rule.decreaseRefCount();\n                this._garbageCollectionScheduler.schedule();\n            }\n        };\n    }\n    getOrCreateRule(properties) {\n        const key = this.computeUniqueKey(properties);\n        let existingRule = this._rules.get(key);\n        if (!existingRule) {\n            const counter = this._counter++;\n            existingRule = new RefCountedCssRule(key, `dyn-rule-${this._instanceId}-${counter}`, dom.isInShadowDOM(this._editor.getContainerDomNode())\n                ? this._editor.getContainerDomNode()\n                : undefined, properties);\n            this._rules.set(key, existingRule);\n        }\n        return existingRule;\n    }\n    computeUniqueKey(properties) {\n        return JSON.stringify(properties);\n    }\n    garbageCollect() {\n        for (const rule of this._rules.values()) {\n            if (!rule.hasReferences()) {\n                this._rules.delete(rule.key);\n                rule.dispose();\n            }\n        }\n    }\n}\nDynamicCssRules._idPool = 0;\nclass RefCountedCssRule {\n    constructor(key, className, _containerElement, properties) {\n        this.key = key;\n        this.className = className;\n        this.properties = properties;\n        this._referenceCount = 0;\n        this._styleElementDisposables = new DisposableStore();\n        this._styleElement = dom.createStyleSheet(_containerElement, undefined, this._styleElementDisposables);\n        this._styleElement.textContent = this.getCssText(this.className, this.properties);\n    }\n    getCssText(className, properties) {\n        let str = `.${className} {`;\n        for (const prop in properties) {\n            const value = properties[prop];\n            let cssValue;\n            if (typeof value === 'object') {\n                cssValue = asCssVariable(value.id);\n            }\n            else {\n                cssValue = value;\n            }\n            const cssPropName = camelToDashes(prop);\n            str += `\\n\\t${cssPropName}: ${cssValue};`;\n        }\n        str += `\\n}`;\n        return str;\n    }\n    dispose() {\n        this._styleElementDisposables.dispose();\n        this._styleElement = undefined;\n    }\n    increaseRefCount() {\n        this._referenceCount++;\n    }\n    decreaseRefCount() {\n        this._referenceCount--;\n    }\n    hasReferences() {\n        return this._referenceCount > 0;\n    }\n}\nfunction camelToDashes(str) {\n    return str.replace(/(^[A-Z])/, ([first]) => first.toLowerCase())\n        .replace(/([A-Z])/g, ([letter]) => `-${letter.toLowerCase()}`);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as nls from '../../nls.js';\nimport { URI } from '../../base/common/uri.js';\nimport { ICodeEditorService } from './services/codeEditorService.js';\nimport { Position } from '../common/core/position.js';\nimport { IModelService } from '../common/services/model.js';\nimport { ITextModelService } from '../common/services/resolverService.js';\nimport { MenuId, MenuRegistry, Action2 } from '../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from '../../platform/keybinding/common/keybindingsRegistry.js';\nimport { Registry } from '../../platform/registry/common/platform.js';\nimport { ITelemetryService } from '../../platform/telemetry/common/telemetry.js';\nimport { assertType } from '../../base/common/types.js';\nimport { ILogService } from '../../platform/log/common/log.js';\nimport { getActiveElement } from '../../base/browser/dom.js';\nexport class Command {\n    constructor(opts) {\n        this.id = opts.id;\n        this.precondition = opts.precondition;\n        this._kbOpts = opts.kbOpts;\n        this._menuOpts = opts.menuOpts;\n        this.metadata = opts.metadata;\n    }\n    register() {\n        if (Array.isArray(this._menuOpts)) {\n            this._menuOpts.forEach(this._registerMenuItem, this);\n        }\n        else if (this._menuOpts) {\n            this._registerMenuItem(this._menuOpts);\n        }\n        if (this._kbOpts) {\n            const kbOptsArr = Array.isArray(this._kbOpts) ? this._kbOpts : [this._kbOpts];\n            for (const kbOpts of kbOptsArr) {\n                let kbWhen = kbOpts.kbExpr;\n                if (this.precondition) {\n                    if (kbWhen) {\n                        kbWhen = ContextKeyExpr.and(kbWhen, this.precondition);\n                    }\n                    else {\n                        kbWhen = this.precondition;\n                    }\n                }\n                const desc = {\n                    id: this.id,\n                    weight: kbOpts.weight,\n                    args: kbOpts.args,\n                    when: kbWhen,\n                    primary: kbOpts.primary,\n                    secondary: kbOpts.secondary,\n                    win: kbOpts.win,\n                    linux: kbOpts.linux,\n                    mac: kbOpts.mac,\n                };\n                KeybindingsRegistry.registerKeybindingRule(desc);\n            }\n        }\n        CommandsRegistry.registerCommand({\n            id: this.id,\n            handler: (accessor, args) => this.runCommand(accessor, args),\n            metadata: this.metadata\n        });\n    }\n    _registerMenuItem(item) {\n        MenuRegistry.appendMenuItem(item.menuId, {\n            group: item.group,\n            command: {\n                id: this.id,\n                title: item.title,\n                icon: item.icon,\n                precondition: this.precondition\n            },\n            when: item.when,\n            order: item.order\n        });\n    }\n}\nexport class MultiCommand extends Command {\n    constructor() {\n        super(...arguments);\n        this._implementations = [];\n    }\n    /**\n     * A higher priority gets to be looked at first\n     */\n    addImplementation(priority, name, implementation, when) {\n        this._implementations.push({ priority, name, implementation, when });\n        this._implementations.sort((a, b) => b.priority - a.priority);\n        return {\n            dispose: () => {\n                for (let i = 0; i < this._implementations.length; i++) {\n                    if (this._implementations[i].implementation === implementation) {\n                        this._implementations.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n        };\n    }\n    runCommand(accessor, args) {\n        const logService = accessor.get(ILogService);\n        const contextKeyService = accessor.get(IContextKeyService);\n        logService.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);\n        for (const impl of this._implementations) {\n            if (impl.when) {\n                const context = contextKeyService.getContext(getActiveElement());\n                const value = impl.when.evaluate(context);\n                if (!value) {\n                    continue;\n                }\n            }\n            const result = impl.implementation(accessor, args);\n            if (result) {\n                logService.trace(`Command '${this.id}' was handled by '${impl.name}'.`);\n                if (typeof result === 'boolean') {\n                    return;\n                }\n                return result;\n            }\n        }\n        logService.trace(`The Command '${this.id}' was not handled by any implementation.`);\n    }\n}\n//#endregion\n/**\n * A command that delegates to another command's implementation.\n *\n * This lets different commands be registered but share the same implementation\n */\nexport class ProxyCommand extends Command {\n    constructor(command, opts) {\n        super(opts);\n        this.command = command;\n    }\n    runCommand(accessor, args) {\n        return this.command.runCommand(accessor, args);\n    }\n}\nexport class EditorCommand extends Command {\n    /**\n     * Create a command class that is bound to a certain editor contribution.\n     */\n    static bindToContribution(controllerGetter) {\n        return class EditorControllerCommandImpl extends EditorCommand {\n            constructor(opts) {\n                super(opts);\n                this._callback = opts.handler;\n            }\n            runEditorCommand(accessor, editor, args) {\n                const controller = controllerGetter(editor);\n                if (controller) {\n                    this._callback(controller, args);\n                }\n            }\n        };\n    }\n    static runEditorCommand(accessor, args, precondition, runner) {\n        const codeEditorService = accessor.get(ICodeEditorService);\n        // Find the editor with text focus or active\n        const editor = codeEditorService.getFocusedCodeEditor() || codeEditorService.getActiveCodeEditor();\n        if (!editor) {\n            // well, at least we tried...\n            return;\n        }\n        return editor.invokeWithinContext((editorAccessor) => {\n            const kbService = editorAccessor.get(IContextKeyService);\n            if (!kbService.contextMatchesRules(precondition !== null && precondition !== void 0 ? precondition : undefined)) {\n                // precondition does not hold\n                return;\n            }\n            return runner(editorAccessor, editor, args);\n        });\n    }\n    runCommand(accessor, args) {\n        return EditorCommand.runEditorCommand(accessor, args, this.precondition, (accessor, editor, args) => this.runEditorCommand(accessor, editor, args));\n    }\n}\nexport class EditorAction extends EditorCommand {\n    static convertOptions(opts) {\n        let menuOpts;\n        if (Array.isArray(opts.menuOpts)) {\n            menuOpts = opts.menuOpts;\n        }\n        else if (opts.menuOpts) {\n            menuOpts = [opts.menuOpts];\n        }\n        else {\n            menuOpts = [];\n        }\n        function withDefaults(item) {\n            if (!item.menuId) {\n                item.menuId = MenuId.EditorContext;\n            }\n            if (!item.title) {\n                item.title = opts.label;\n            }\n            item.when = ContextKeyExpr.and(opts.precondition, item.when);\n            return item;\n        }\n        if (Array.isArray(opts.contextMenuOpts)) {\n            menuOpts.push(...opts.contextMenuOpts.map(withDefaults));\n        }\n        else if (opts.contextMenuOpts) {\n            menuOpts.push(withDefaults(opts.contextMenuOpts));\n        }\n        opts.menuOpts = menuOpts;\n        return opts;\n    }\n    constructor(opts) {\n        super(EditorAction.convertOptions(opts));\n        this.label = opts.label;\n        this.alias = opts.alias;\n    }\n    runEditorCommand(accessor, editor, args) {\n        this.reportTelemetry(accessor, editor);\n        return this.run(accessor, editor, args || {});\n    }\n    reportTelemetry(accessor, editor) {\n        accessor.get(ITelemetryService).publicLog2('editorActionInvoked', { name: this.label, id: this.id });\n    }\n}\nexport class MultiEditorAction extends EditorAction {\n    constructor() {\n        super(...arguments);\n        this._implementations = [];\n    }\n    /**\n     * A higher priority gets to be looked at first\n     */\n    addImplementation(priority, implementation) {\n        this._implementations.push([priority, implementation]);\n        this._implementations.sort((a, b) => b[0] - a[0]);\n        return {\n            dispose: () => {\n                for (let i = 0; i < this._implementations.length; i++) {\n                    if (this._implementations[i][1] === implementation) {\n                        this._implementations.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n        };\n    }\n    run(accessor, editor, args) {\n        for (const impl of this._implementations) {\n            const result = impl[1](accessor, editor, args);\n            if (result) {\n                if (typeof result === 'boolean') {\n                    return;\n                }\n                return result;\n            }\n        }\n    }\n}\n//#endregion EditorAction\n//#region EditorAction2\nexport class EditorAction2 extends Action2 {\n    run(accessor, ...args) {\n        // Find the editor with text focus or active\n        const codeEditorService = accessor.get(ICodeEditorService);\n        const editor = codeEditorService.getFocusedCodeEditor() || codeEditorService.getActiveCodeEditor();\n        if (!editor) {\n            // well, at least we tried...\n            return;\n        }\n        // precondition does hold\n        return editor.invokeWithinContext((editorAccessor) => {\n            var _a, _b;\n            const kbService = editorAccessor.get(IContextKeyService);\n            const logService = editorAccessor.get(ILogService);\n            const enabled = kbService.contextMatchesRules((_a = this.desc.precondition) !== null && _a !== void 0 ? _a : undefined);\n            if (!enabled) {\n                logService.debug(`[EditorAction2] NOT running command because its precondition is FALSE`, this.desc.id, (_b = this.desc.precondition) === null || _b === void 0 ? void 0 : _b.serialize());\n                return;\n            }\n            return this.runEditorCommand(editorAccessor, editor, ...args);\n        });\n    }\n}\n//#endregion\n// --- Registration of commands and actions\nexport function registerModelAndPositionCommand(id, handler) {\n    CommandsRegistry.registerCommand(id, function (accessor, ...args) {\n        const instaService = accessor.get(IInstantiationService);\n        const [resource, position] = args;\n        assertType(URI.isUri(resource));\n        assertType(Position.isIPosition(position));\n        const model = accessor.get(IModelService).getModel(resource);\n        if (model) {\n            const editorPosition = Position.lift(position);\n            return instaService.invokeFunction(handler, model, editorPosition, ...args.slice(2));\n        }\n        return accessor.get(ITextModelService).createModelReference(resource).then(reference => {\n            return new Promise((resolve, reject) => {\n                try {\n                    const result = instaService.invokeFunction(handler, reference.object.textEditorModel, Position.lift(position), args.slice(2));\n                    resolve(result);\n                }\n                catch (err) {\n                    reject(err);\n                }\n            }).finally(() => {\n                reference.dispose();\n            });\n        });\n    });\n}\nexport function registerEditorCommand(editorCommand) {\n    EditorContributionRegistry.INSTANCE.registerEditorCommand(editorCommand);\n    return editorCommand;\n}\nexport function registerEditorAction(ctor) {\n    const action = new ctor();\n    EditorContributionRegistry.INSTANCE.registerEditorAction(action);\n    return action;\n}\nexport function registerMultiEditorAction(action) {\n    EditorContributionRegistry.INSTANCE.registerEditorAction(action);\n    return action;\n}\nexport function registerInstantiatedEditorAction(editorAction) {\n    EditorContributionRegistry.INSTANCE.registerEditorAction(editorAction);\n}\n/**\n * Registers an editor contribution. Editor contributions have a lifecycle which is bound\n * to a specific code editor instance.\n */\nexport function registerEditorContribution(id, ctor, instantiation) {\n    EditorContributionRegistry.INSTANCE.registerEditorContribution(id, ctor, instantiation);\n}\nexport var EditorExtensionsRegistry;\n(function (EditorExtensionsRegistry) {\n    function getEditorCommand(commandId) {\n        return EditorContributionRegistry.INSTANCE.getEditorCommand(commandId);\n    }\n    EditorExtensionsRegistry.getEditorCommand = getEditorCommand;\n    function getEditorActions() {\n        return EditorContributionRegistry.INSTANCE.getEditorActions();\n    }\n    EditorExtensionsRegistry.getEditorActions = getEditorActions;\n    function getEditorContributions() {\n        return EditorContributionRegistry.INSTANCE.getEditorContributions();\n    }\n    EditorExtensionsRegistry.getEditorContributions = getEditorContributions;\n    function getSomeEditorContributions(ids) {\n        return EditorContributionRegistry.INSTANCE.getEditorContributions().filter(c => ids.indexOf(c.id) >= 0);\n    }\n    EditorExtensionsRegistry.getSomeEditorContributions = getSomeEditorContributions;\n    function getDiffEditorContributions() {\n        return EditorContributionRegistry.INSTANCE.getDiffEditorContributions();\n    }\n    EditorExtensionsRegistry.getDiffEditorContributions = getDiffEditorContributions;\n})(EditorExtensionsRegistry || (EditorExtensionsRegistry = {}));\n// Editor extension points\nconst Extensions = {\n    EditorCommonContributions: 'editor.contributions'\n};\nclass EditorContributionRegistry {\n    constructor() {\n        this.editorContributions = [];\n        this.diffEditorContributions = [];\n        this.editorActions = [];\n        this.editorCommands = Object.create(null);\n    }\n    registerEditorContribution(id, ctor, instantiation) {\n        this.editorContributions.push({ id, ctor: ctor, instantiation });\n    }\n    getEditorContributions() {\n        return this.editorContributions.slice(0);\n    }\n    getDiffEditorContributions() {\n        return this.diffEditorContributions.slice(0);\n    }\n    registerEditorAction(action) {\n        action.register();\n        this.editorActions.push(action);\n    }\n    getEditorActions() {\n        return this.editorActions;\n    }\n    registerEditorCommand(editorCommand) {\n        editorCommand.register();\n        this.editorCommands[editorCommand.id] = editorCommand;\n    }\n    getEditorCommand(commandId) {\n        return (this.editorCommands[commandId] || null);\n    }\n}\nEditorContributionRegistry.INSTANCE = new EditorContributionRegistry();\nRegistry.add(Extensions.EditorCommonContributions, EditorContributionRegistry.INSTANCE);\nfunction registerCommand(command) {\n    command.register();\n    return command;\n}\nexport const UndoCommand = registerCommand(new MultiCommand({\n    id: 'undo',\n    precondition: undefined,\n    kbOpts: {\n        weight: 0 /* KeybindingWeight.EditorCore */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 56 /* KeyCode.KeyZ */\n    },\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '1_do',\n            title: nls.localize({ key: 'miUndo', comment: ['&& denotes a mnemonic'] }, \"&&Undo\"),\n            order: 1\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('undo', \"Undo\"),\n            order: 1\n        }]\n}));\nregisterCommand(new ProxyCommand(UndoCommand, { id: 'default:undo', precondition: undefined }));\nexport const RedoCommand = registerCommand(new MultiCommand({\n    id: 'redo',\n    precondition: undefined,\n    kbOpts: {\n        weight: 0 /* KeybindingWeight.EditorCore */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 55 /* KeyCode.KeyY */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 56 /* KeyCode.KeyZ */],\n        mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 56 /* KeyCode.KeyZ */ }\n    },\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '1_do',\n            title: nls.localize({ key: 'miRedo', comment: ['&& denotes a mnemonic'] }, \"&&Redo\"),\n            order: 2\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('redo', \"Redo\"),\n            order: 1\n        }]\n}));\nregisterCommand(new ProxyCommand(RedoCommand, { id: 'default:redo', precondition: undefined }));\nexport const SelectAllCommand = registerCommand(new MultiCommand({\n    id: 'editor.action.selectAll',\n    precondition: undefined,\n    kbOpts: {\n        weight: 0 /* KeybindingWeight.EditorCore */,\n        kbExpr: null,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 31 /* KeyCode.KeyA */\n    },\n    menuOpts: [{\n            menuId: MenuId.MenubarSelectionMenu,\n            group: '1_basic',\n            title: nls.localize({ key: 'miSelectAll', comment: ['&& denotes a mnemonic'] }, \"&&Select All\"),\n            order: 1\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('selectAll', \"Select All\"),\n            order: 1\n        }]\n}));\n","import { observableFromEvent } from '../../base/common/observable.js';\n/**\n * Returns a facade for the code editor that provides observables for various states/events.\n*/\nexport function obsCodeEditor(editor) {\n    return ObservableCodeEditor.get(editor);\n}\nclass ObservableCodeEditor {\n    /**\n     * Make sure that editor is not disposed yet!\n    */\n    static get(editor) {\n        let result = ObservableCodeEditor._map.get(editor);\n        if (!result) {\n            result = new ObservableCodeEditor(editor);\n            ObservableCodeEditor._map.set(editor, result);\n            const d = editor.onDidDispose(() => {\n                ObservableCodeEditor._map.delete(editor);\n                d.dispose();\n            });\n        }\n        return result;\n    }\n    constructor(editor) {\n        this.editor = editor;\n        this.model = observableFromEvent(this.editor.onDidChangeModel, () => this.editor.getModel());\n    }\n}\nObservableCodeEditor._map = new Map();\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nlet AbstractCodeEditorService = class AbstractCodeEditorService extends Disposable {\n    constructor(_themeService) {\n        super();\n        this._themeService = _themeService;\n        this._onWillCreateCodeEditor = this._register(new Emitter());\n        this._onCodeEditorAdd = this._register(new Emitter());\n        this.onCodeEditorAdd = this._onCodeEditorAdd.event;\n        this._onCodeEditorRemove = this._register(new Emitter());\n        this.onCodeEditorRemove = this._onCodeEditorRemove.event;\n        this._onWillCreateDiffEditor = this._register(new Emitter());\n        this._onDiffEditorAdd = this._register(new Emitter());\n        this.onDiffEditorAdd = this._onDiffEditorAdd.event;\n        this._onDiffEditorRemove = this._register(new Emitter());\n        this.onDiffEditorRemove = this._onDiffEditorRemove.event;\n        this._decorationOptionProviders = new Map();\n        this._codeEditorOpenHandlers = new LinkedList();\n        this._modelProperties = new Map();\n        this._codeEditors = Object.create(null);\n        this._diffEditors = Object.create(null);\n        this._globalStyleSheet = null;\n    }\n    willCreateCodeEditor() {\n        this._onWillCreateCodeEditor.fire();\n    }\n    addCodeEditor(editor) {\n        this._codeEditors[editor.getId()] = editor;\n        this._onCodeEditorAdd.fire(editor);\n    }\n    removeCodeEditor(editor) {\n        if (delete this._codeEditors[editor.getId()]) {\n            this._onCodeEditorRemove.fire(editor);\n        }\n    }\n    listCodeEditors() {\n        return Object.keys(this._codeEditors).map(id => this._codeEditors[id]);\n    }\n    willCreateDiffEditor() {\n        this._onWillCreateDiffEditor.fire();\n    }\n    addDiffEditor(editor) {\n        this._diffEditors[editor.getId()] = editor;\n        this._onDiffEditorAdd.fire(editor);\n    }\n    listDiffEditors() {\n        return Object.keys(this._diffEditors).map(id => this._diffEditors[id]);\n    }\n    getFocusedCodeEditor() {\n        let editorWithWidgetFocus = null;\n        const editors = this.listCodeEditors();\n        for (const editor of editors) {\n            if (editor.hasTextFocus()) {\n                // bingo!\n                return editor;\n            }\n            if (editor.hasWidgetFocus()) {\n                editorWithWidgetFocus = editor;\n            }\n        }\n        return editorWithWidgetFocus;\n    }\n    removeDecorationType(key) {\n        const provider = this._decorationOptionProviders.get(key);\n        if (provider) {\n            provider.refCount--;\n            if (provider.refCount <= 0) {\n                this._decorationOptionProviders.delete(key);\n                provider.dispose();\n                this.listCodeEditors().forEach((ed) => ed.removeDecorationsByType(key));\n            }\n        }\n    }\n    setModelProperty(resource, key, value) {\n        const key1 = resource.toString();\n        let dest;\n        if (this._modelProperties.has(key1)) {\n            dest = this._modelProperties.get(key1);\n        }\n        else {\n            dest = new Map();\n            this._modelProperties.set(key1, dest);\n        }\n        dest.set(key, value);\n    }\n    getModelProperty(resource, key) {\n        const key1 = resource.toString();\n        if (this._modelProperties.has(key1)) {\n            const innerMap = this._modelProperties.get(key1);\n            return innerMap.get(key);\n        }\n        return undefined;\n    }\n    async openCodeEditor(input, source, sideBySide) {\n        for (const handler of this._codeEditorOpenHandlers) {\n            const candidate = await handler(input, source, sideBySide);\n            if (candidate !== null) {\n                return candidate;\n            }\n        }\n        return null;\n    }\n    registerCodeEditorOpenHandler(handler) {\n        const rm = this._codeEditorOpenHandlers.unshift(handler);\n        return toDisposable(rm);\n    }\n};\nAbstractCodeEditorService = __decorate([\n    __param(0, IThemeService)\n], AbstractCodeEditorService);\nexport { AbstractCodeEditorService };\nexport class GlobalStyleSheet {\n    constructor(styleSheet) {\n        this._styleSheet = styleSheet;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { isObject } from '../../../base/common/types.js';\nexport const IBulkEditService = createDecorator('IWorkspaceEditService');\nexport class ResourceEdit {\n    constructor(metadata) {\n        this.metadata = metadata;\n    }\n    static convert(edit) {\n        return edit.edits.map(edit => {\n            if (ResourceTextEdit.is(edit)) {\n                return ResourceTextEdit.lift(edit);\n            }\n            if (ResourceFileEdit.is(edit)) {\n                return ResourceFileEdit.lift(edit);\n            }\n            throw new Error('Unsupported edit');\n        });\n    }\n}\nexport class ResourceTextEdit extends ResourceEdit {\n    static is(candidate) {\n        if (candidate instanceof ResourceTextEdit) {\n            return true;\n        }\n        return isObject(candidate)\n            && URI.isUri(candidate.resource)\n            && isObject(candidate.textEdit);\n    }\n    static lift(edit) {\n        if (edit instanceof ResourceTextEdit) {\n            return edit;\n        }\n        else {\n            return new ResourceTextEdit(edit.resource, edit.textEdit, edit.versionId, edit.metadata);\n        }\n    }\n    constructor(resource, textEdit, versionId = undefined, metadata) {\n        super(metadata);\n        this.resource = resource;\n        this.textEdit = textEdit;\n        this.versionId = versionId;\n    }\n}\nexport class ResourceFileEdit extends ResourceEdit {\n    static is(candidate) {\n        if (candidate instanceof ResourceFileEdit) {\n            return true;\n        }\n        else {\n            return isObject(candidate)\n                && (Boolean(candidate.newResource) || Boolean(candidate.oldResource));\n        }\n    }\n    static lift(edit) {\n        if (edit instanceof ResourceFileEdit) {\n            return edit;\n        }\n        else {\n            return new ResourceFileEdit(edit.oldResource, edit.newResource, edit.options, edit.metadata);\n        }\n    }\n    constructor(oldResource, newResource, options = {}, metadata) {\n        super(metadata);\n        this.oldResource = oldResource;\n        this.newResource = newResource;\n        this.options = options;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nexport const ICodeEditorService = createDecorator('codeEditorService');\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IntervalTimer, timeout } from '../../../base/common/async.js';\nimport { Disposable, dispose, toDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { SimpleWorkerClient, logOnceWebWorkerWarning } from '../../../base/common/worker/simpleWorker.js';\nimport { DefaultWorkerFactory } from '../../../base/browser/defaultWorkerFactory.js';\nimport { Range } from '../../common/core/range.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { EditorSimpleWorker } from '../../common/services/editorSimpleWorker.js';\nimport { IModelService } from '../../common/services/model.js';\nimport { ITextResourceConfigurationService } from '../../common/services/textResourceConfiguration.js';\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { StopWatch } from '../../../base/common/stopwatch.js';\nimport { canceled } from '../../../base/common/errors.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nimport { MovedText } from '../../common/diff/linesDiffComputer.js';\nimport { DetailedLineRangeMapping, RangeMapping, LineRangeMapping } from '../../common/diff/rangeMapping.js';\nimport { LineRange } from '../../common/core/lineRange.js';\nimport { mainWindow } from '../../../base/browser/window.js';\nimport { WindowIntervalTimer } from '../../../base/browser/dom.js';\n/**\n * Stop syncing a model to the worker if it was not needed for 1 min.\n */\nconst STOP_SYNC_MODEL_DELTA_TIME_MS = 60 * 1000;\n/**\n * Stop the worker if it was not needed for 5 min.\n */\nconst STOP_WORKER_DELTA_TIME_MS = 5 * 60 * 1000;\nfunction canSyncModel(modelService, resource) {\n    const model = modelService.getModel(resource);\n    if (!model) {\n        return false;\n    }\n    if (model.isTooLargeForSyncing()) {\n        return false;\n    }\n    return true;\n}\nlet EditorWorkerService = class EditorWorkerService extends Disposable {\n    constructor(modelService, configurationService, logService, languageConfigurationService, languageFeaturesService) {\n        super();\n        this._modelService = modelService;\n        this._workerManager = this._register(new WorkerManager(this._modelService, languageConfigurationService));\n        this._logService = logService;\n        // register default link-provider and default completions-provider\n        this._register(languageFeaturesService.linkProvider.register({ language: '*', hasAccessToAllModels: true }, {\n            provideLinks: (model, token) => {\n                if (!canSyncModel(this._modelService, model.uri)) {\n                    return Promise.resolve({ links: [] }); // File too large\n                }\n                return this._workerManager.withWorker().then(client => client.computeLinks(model.uri)).then(links => {\n                    return links && { links };\n                });\n            }\n        }));\n        this._register(languageFeaturesService.completionProvider.register('*', new WordBasedCompletionItemProvider(this._workerManager, configurationService, this._modelService, languageConfigurationService)));\n    }\n    dispose() {\n        super.dispose();\n    }\n    canComputeUnicodeHighlights(uri) {\n        return canSyncModel(this._modelService, uri);\n    }\n    computedUnicodeHighlights(uri, options, range) {\n        return this._workerManager.withWorker().then(client => client.computedUnicodeHighlights(uri, options, range));\n    }\n    async computeDiff(original, modified, options, algorithm) {\n        const result = await this._workerManager.withWorker().then(client => client.computeDiff(original, modified, options, algorithm));\n        if (!result) {\n            return null;\n        }\n        // Convert from space efficient JSON data to rich objects.\n        const diff = {\n            identical: result.identical,\n            quitEarly: result.quitEarly,\n            changes: toLineRangeMappings(result.changes),\n            moves: result.moves.map(m => new MovedText(new LineRangeMapping(new LineRange(m[0], m[1]), new LineRange(m[2], m[3])), toLineRangeMappings(m[4])))\n        };\n        return diff;\n        function toLineRangeMappings(changes) {\n            return changes.map((c) => {\n                var _a;\n                return new DetailedLineRangeMapping(new LineRange(c[0], c[1]), new LineRange(c[2], c[3]), (_a = c[4]) === null || _a === void 0 ? void 0 : _a.map((c) => new RangeMapping(new Range(c[0], c[1], c[2], c[3]), new Range(c[4], c[5], c[6], c[7]))));\n            });\n        }\n    }\n    computeMoreMinimalEdits(resource, edits, pretty = false) {\n        if (isNonEmptyArray(edits)) {\n            if (!canSyncModel(this._modelService, resource)) {\n                return Promise.resolve(edits); // File too large\n            }\n            const sw = StopWatch.create();\n            const result = this._workerManager.withWorker().then(client => client.computeMoreMinimalEdits(resource, edits, pretty));\n            result.finally(() => this._logService.trace('FORMAT#computeMoreMinimalEdits', resource.toString(true), sw.elapsed()));\n            return Promise.race([result, timeout(1000).then(() => edits)]);\n        }\n        else {\n            return Promise.resolve(undefined);\n        }\n    }\n    canNavigateValueSet(resource) {\n        return (canSyncModel(this._modelService, resource));\n    }\n    navigateValueSet(resource, range, up) {\n        return this._workerManager.withWorker().then(client => client.navigateValueSet(resource, range, up));\n    }\n    canComputeWordRanges(resource) {\n        return canSyncModel(this._modelService, resource);\n    }\n    computeWordRanges(resource, range) {\n        return this._workerManager.withWorker().then(client => client.computeWordRanges(resource, range));\n    }\n    findSectionHeaders(uri, options) {\n        return this._workerManager.withWorker().then(client => client.findSectionHeaders(uri, options));\n    }\n};\nEditorWorkerService = __decorate([\n    __param(0, IModelService),\n    __param(1, ITextResourceConfigurationService),\n    __param(2, ILogService),\n    __param(3, ILanguageConfigurationService),\n    __param(4, ILanguageFeaturesService)\n], EditorWorkerService);\nexport { EditorWorkerService };\nclass WordBasedCompletionItemProvider {\n    constructor(workerManager, configurationService, modelService, languageConfigurationService) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._debugDisplayName = 'wordbasedCompletions';\n        this._workerManager = workerManager;\n        this._configurationService = configurationService;\n        this._modelService = modelService;\n    }\n    async provideCompletionItems(model, position) {\n        const config = this._configurationService.getValue(model.uri, position, 'editor');\n        if (config.wordBasedSuggestions === 'off') {\n            return undefined;\n        }\n        const models = [];\n        if (config.wordBasedSuggestions === 'currentDocument') {\n            // only current file and only if not too large\n            if (canSyncModel(this._modelService, model.uri)) {\n                models.push(model.uri);\n            }\n        }\n        else {\n            // either all files or files of same language\n            for (const candidate of this._modelService.getModels()) {\n                if (!canSyncModel(this._modelService, candidate.uri)) {\n                    continue;\n                }\n                if (candidate === model) {\n                    models.unshift(candidate.uri);\n                }\n                else if (config.wordBasedSuggestions === 'allDocuments' || candidate.getLanguageId() === model.getLanguageId()) {\n                    models.push(candidate.uri);\n                }\n            }\n        }\n        if (models.length === 0) {\n            return undefined; // File too large, no other files\n        }\n        const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n        const word = model.getWordAtPosition(position);\n        const replace = !word ? Range.fromPositions(position) : new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n        const insert = replace.setEndPosition(position.lineNumber, position.column);\n        const client = await this._workerManager.withWorker();\n        const data = await client.textualSuggest(models, word === null || word === void 0 ? void 0 : word.word, wordDefRegExp);\n        if (!data) {\n            return undefined;\n        }\n        return {\n            duration: data.duration,\n            suggestions: data.words.map((word) => {\n                return {\n                    kind: 18 /* languages.CompletionItemKind.Text */,\n                    label: word,\n                    insertText: word,\n                    range: { insert, replace }\n                };\n            }),\n        };\n    }\n}\nclass WorkerManager extends Disposable {\n    constructor(modelService, languageConfigurationService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        this._modelService = modelService;\n        this._editorWorkerClient = null;\n        this._lastWorkerUsedTime = (new Date()).getTime();\n        const stopWorkerInterval = this._register(new WindowIntervalTimer());\n        stopWorkerInterval.cancelAndSet(() => this._checkStopIdleWorker(), Math.round(STOP_WORKER_DELTA_TIME_MS / 2), mainWindow);\n        this._register(this._modelService.onModelRemoved(_ => this._checkStopEmptyWorker()));\n    }\n    dispose() {\n        if (this._editorWorkerClient) {\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n        super.dispose();\n    }\n    /**\n     * Check if the model service has no more models and stop the worker if that is the case.\n     */\n    _checkStopEmptyWorker() {\n        if (!this._editorWorkerClient) {\n            return;\n        }\n        const models = this._modelService.getModels();\n        if (models.length === 0) {\n            // There are no more models => nothing possible for me to do\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n    }\n    /**\n     * Check if the worker has been idle for a while and then stop it.\n     */\n    _checkStopIdleWorker() {\n        if (!this._editorWorkerClient) {\n            return;\n        }\n        const timeSinceLastWorkerUsedTime = (new Date()).getTime() - this._lastWorkerUsedTime;\n        if (timeSinceLastWorkerUsedTime > STOP_WORKER_DELTA_TIME_MS) {\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n    }\n    withWorker() {\n        this._lastWorkerUsedTime = (new Date()).getTime();\n        if (!this._editorWorkerClient) {\n            this._editorWorkerClient = new EditorWorkerClient(this._modelService, false, 'editorWorkerService', this.languageConfigurationService);\n        }\n        return Promise.resolve(this._editorWorkerClient);\n    }\n}\nclass EditorModelManager extends Disposable {\n    constructor(proxy, modelService, keepIdleModels) {\n        super();\n        this._syncedModels = Object.create(null);\n        this._syncedModelsLastUsedTime = Object.create(null);\n        this._proxy = proxy;\n        this._modelService = modelService;\n        if (!keepIdleModels) {\n            const timer = new IntervalTimer();\n            timer.cancelAndSet(() => this._checkStopModelSync(), Math.round(STOP_SYNC_MODEL_DELTA_TIME_MS / 2));\n            this._register(timer);\n        }\n    }\n    dispose() {\n        for (const modelUrl in this._syncedModels) {\n            dispose(this._syncedModels[modelUrl]);\n        }\n        this._syncedModels = Object.create(null);\n        this._syncedModelsLastUsedTime = Object.create(null);\n        super.dispose();\n    }\n    ensureSyncedResources(resources, forceLargeModels) {\n        for (const resource of resources) {\n            const resourceStr = resource.toString();\n            if (!this._syncedModels[resourceStr]) {\n                this._beginModelSync(resource, forceLargeModels);\n            }\n            if (this._syncedModels[resourceStr]) {\n                this._syncedModelsLastUsedTime[resourceStr] = (new Date()).getTime();\n            }\n        }\n    }\n    _checkStopModelSync() {\n        const currentTime = (new Date()).getTime();\n        const toRemove = [];\n        for (const modelUrl in this._syncedModelsLastUsedTime) {\n            const elapsedTime = currentTime - this._syncedModelsLastUsedTime[modelUrl];\n            if (elapsedTime > STOP_SYNC_MODEL_DELTA_TIME_MS) {\n                toRemove.push(modelUrl);\n            }\n        }\n        for (const e of toRemove) {\n            this._stopModelSync(e);\n        }\n    }\n    _beginModelSync(resource, forceLargeModels) {\n        const model = this._modelService.getModel(resource);\n        if (!model) {\n            return;\n        }\n        if (!forceLargeModels && model.isTooLargeForSyncing()) {\n            return;\n        }\n        const modelUrl = resource.toString();\n        this._proxy.acceptNewModel({\n            url: model.uri.toString(),\n            lines: model.getLinesContent(),\n            EOL: model.getEOL(),\n            versionId: model.getVersionId()\n        });\n        const toDispose = new DisposableStore();\n        toDispose.add(model.onDidChangeContent((e) => {\n            this._proxy.acceptModelChanged(modelUrl.toString(), e);\n        }));\n        toDispose.add(model.onWillDispose(() => {\n            this._stopModelSync(modelUrl);\n        }));\n        toDispose.add(toDisposable(() => {\n            this._proxy.acceptRemovedModel(modelUrl);\n        }));\n        this._syncedModels[modelUrl] = toDispose;\n    }\n    _stopModelSync(modelUrl) {\n        const toDispose = this._syncedModels[modelUrl];\n        delete this._syncedModels[modelUrl];\n        delete this._syncedModelsLastUsedTime[modelUrl];\n        dispose(toDispose);\n    }\n}\nclass SynchronousWorkerClient {\n    constructor(instance) {\n        this._instance = instance;\n        this._proxyObj = Promise.resolve(this._instance);\n    }\n    dispose() {\n        this._instance.dispose();\n    }\n    getProxyObject() {\n        return this._proxyObj;\n    }\n}\nexport class EditorWorkerHost {\n    constructor(workerClient) {\n        this._workerClient = workerClient;\n    }\n    // foreign host request\n    fhr(method, args) {\n        return this._workerClient.fhr(method, args);\n    }\n}\nexport class EditorWorkerClient extends Disposable {\n    constructor(modelService, keepIdleModels, label, languageConfigurationService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        this._disposed = false;\n        this._modelService = modelService;\n        this._keepIdleModels = keepIdleModels;\n        this._workerFactory = new DefaultWorkerFactory(label);\n        this._worker = null;\n        this._modelManager = null;\n    }\n    // foreign host request\n    fhr(method, args) {\n        throw new Error(`Not implemented!`);\n    }\n    _getOrCreateWorker() {\n        if (!this._worker) {\n            try {\n                this._worker = this._register(new SimpleWorkerClient(this._workerFactory, 'vs/editor/common/services/editorSimpleWorker', new EditorWorkerHost(this)));\n            }\n            catch (err) {\n                logOnceWebWorkerWarning(err);\n                this._worker = new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this), null));\n            }\n        }\n        return this._worker;\n    }\n    _getProxy() {\n        return this._getOrCreateWorker().getProxyObject().then(undefined, (err) => {\n            logOnceWebWorkerWarning(err);\n            this._worker = new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this), null));\n            return this._getOrCreateWorker().getProxyObject();\n        });\n    }\n    _getOrCreateModelManager(proxy) {\n        if (!this._modelManager) {\n            this._modelManager = this._register(new EditorModelManager(proxy, this._modelService, this._keepIdleModels));\n        }\n        return this._modelManager;\n    }\n    async _withSyncedResources(resources, forceLargeModels = false) {\n        if (this._disposed) {\n            return Promise.reject(canceled());\n        }\n        return this._getProxy().then((proxy) => {\n            this._getOrCreateModelManager(proxy).ensureSyncedResources(resources, forceLargeModels);\n            return proxy;\n        });\n    }\n    computedUnicodeHighlights(uri, options, range) {\n        return this._withSyncedResources([uri]).then(proxy => {\n            return proxy.computeUnicodeHighlights(uri.toString(), options, range);\n        });\n    }\n    computeDiff(original, modified, options, algorithm) {\n        return this._withSyncedResources([original, modified], /* forceLargeModels */ true).then(proxy => {\n            return proxy.computeDiff(original.toString(), modified.toString(), options, algorithm);\n        });\n    }\n    computeMoreMinimalEdits(resource, edits, pretty) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            return proxy.computeMoreMinimalEdits(resource.toString(), edits, pretty);\n        });\n    }\n    computeLinks(resource) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            return proxy.computeLinks(resource.toString());\n        });\n    }\n    computeDefaultDocumentColors(resource) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            return proxy.computeDefaultDocumentColors(resource.toString());\n        });\n    }\n    async textualSuggest(resources, leadingWord, wordDefRegExp) {\n        const proxy = await this._withSyncedResources(resources);\n        const wordDef = wordDefRegExp.source;\n        const wordDefFlags = wordDefRegExp.flags;\n        return proxy.textualSuggest(resources.map(r => r.toString()), leadingWord, wordDef, wordDefFlags);\n    }\n    computeWordRanges(resource, range) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            const model = this._modelService.getModel(resource);\n            if (!model) {\n                return Promise.resolve(null);\n            }\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n            const wordDef = wordDefRegExp.source;\n            const wordDefFlags = wordDefRegExp.flags;\n            return proxy.computeWordRanges(resource.toString(), range, wordDef, wordDefFlags);\n        });\n    }\n    navigateValueSet(resource, range, up) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            const model = this._modelService.getModel(resource);\n            if (!model) {\n                return null;\n            }\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n            const wordDef = wordDefRegExp.source;\n            const wordDefFlags = wordDefRegExp.flags;\n            return proxy.navigateValueSet(resource.toString(), range, up, wordDef, wordDefFlags);\n        });\n    }\n    findSectionHeaders(uri, options) {\n        return this._withSyncedResources([uri]).then(proxy => {\n            return proxy.findSectionHeaders(uri.toString(), options);\n        });\n    }\n    dispose() {\n        super.dispose();\n        this._disposed = true;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport './hover.css';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { HoverAction, HoverWidget as BaseHoverWidget, getHoverAccessibleViewHint } from '../../../../base/browser/ui/hover/hoverWidget.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { MarkdownRenderer, openLinkFromMarkdown } from '../../widget/markdownRenderer/browser/markdownRenderer.js';\nimport { isMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { localize } from '../../../../nls.js';\nimport { isMacintosh } from '../../../../base/common/platform.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\nconst $ = dom.$;\nlet HoverWidget = class HoverWidget extends Widget {\n    get _targetWindow() {\n        return dom.getWindow(this._target.targetElements[0]);\n    }\n    get _targetDocumentElement() {\n        return dom.getWindow(this._target.targetElements[0]).document.documentElement;\n    }\n    get isDisposed() { return this._isDisposed; }\n    get isMouseIn() { return this._lockMouseTracker.isMouseIn; }\n    get domNode() { return this._hover.containerDomNode; }\n    get onDispose() { return this._onDispose.event; }\n    get onRequestLayout() { return this._onRequestLayout.event; }\n    get anchor() { return this._hoverPosition === 2 /* HoverPosition.BELOW */ ? 0 /* AnchorPosition.BELOW */ : 1 /* AnchorPosition.ABOVE */; }\n    get x() { return this._x; }\n    get y() { return this._y; }\n    /**\n     * Whether the hover is \"locked\" by holding the alt/option key. When locked, the hover will not\n     * hide and can be hovered regardless of whether the `hideOnHover` hover option is set.\n     */\n    get isLocked() { return this._isLocked; }\n    set isLocked(value) {\n        if (this._isLocked === value) {\n            return;\n        }\n        this._isLocked = value;\n        this._hoverContainer.classList.toggle('locked', this._isLocked);\n    }\n    constructor(options, _keybindingService, _configurationService, _openerService, _instantiationService, _accessibilityService) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        super();\n        this._keybindingService = _keybindingService;\n        this._configurationService = _configurationService;\n        this._openerService = _openerService;\n        this._instantiationService = _instantiationService;\n        this._accessibilityService = _accessibilityService;\n        this._messageListeners = new DisposableStore();\n        this._isDisposed = false;\n        this._forcePosition = false;\n        this._x = 0;\n        this._y = 0;\n        this._isLocked = false;\n        this._enableFocusTraps = false;\n        this._addedFocusTrap = false;\n        this._onDispose = this._register(new Emitter());\n        this._onRequestLayout = this._register(new Emitter());\n        this._linkHandler = options.linkHandler || (url => {\n            return openLinkFromMarkdown(this._openerService, url, isMarkdownString(options.content) ? options.content.isTrusted : undefined);\n        });\n        this._target = 'targetElements' in options.target ? options.target : new ElementHoverTarget(options.target);\n        this._hoverPointer = ((_a = options.appearance) === null || _a === void 0 ? void 0 : _a.showPointer) ? $('div.workbench-hover-pointer') : undefined;\n        this._hover = this._register(new BaseHoverWidget());\n        this._hover.containerDomNode.classList.add('workbench-hover', 'fadeIn');\n        if ((_b = options.appearance) === null || _b === void 0 ? void 0 : _b.compact) {\n            this._hover.containerDomNode.classList.add('workbench-hover', 'compact');\n        }\n        if ((_c = options.appearance) === null || _c === void 0 ? void 0 : _c.skipFadeInAnimation) {\n            this._hover.containerDomNode.classList.add('skip-fade-in');\n        }\n        if (options.additionalClasses) {\n            this._hover.containerDomNode.classList.add(...options.additionalClasses);\n        }\n        if ((_d = options.position) === null || _d === void 0 ? void 0 : _d.forcePosition) {\n            this._forcePosition = true;\n        }\n        if (options.trapFocus) {\n            this._enableFocusTraps = true;\n        }\n        this._hoverPosition = (_f = (_e = options.position) === null || _e === void 0 ? void 0 : _e.hoverPosition) !== null && _f !== void 0 ? _f : 3 /* HoverPosition.ABOVE */;\n        // Don't allow mousedown out of the widget, otherwise preventDefault will call and text will\n        // not be selected.\n        this.onmousedown(this._hover.containerDomNode, e => e.stopPropagation());\n        // Hide hover on escape\n        this.onkeydown(this._hover.containerDomNode, e => {\n            if (e.equals(9 /* KeyCode.Escape */)) {\n                this.dispose();\n            }\n        });\n        // Hide when the window loses focus\n        this._register(dom.addDisposableListener(this._targetWindow, 'blur', () => this.dispose()));\n        const rowElement = $('div.hover-row.markdown-hover');\n        const contentsElement = $('div.hover-contents');\n        if (typeof options.content === 'string') {\n            contentsElement.textContent = options.content;\n            contentsElement.style.whiteSpace = 'pre-wrap';\n        }\n        else if (options.content instanceof HTMLElement) {\n            contentsElement.appendChild(options.content);\n            contentsElement.classList.add('html-hover-contents');\n        }\n        else {\n            const markdown = options.content;\n            const mdRenderer = this._instantiationService.createInstance(MarkdownRenderer, { codeBlockFontFamily: this._configurationService.getValue('editor').fontFamily || EDITOR_FONT_DEFAULTS.fontFamily });\n            const { element } = mdRenderer.render(markdown, {\n                actionHandler: {\n                    callback: (content) => this._linkHandler(content),\n                    disposables: this._messageListeners\n                },\n                asyncRenderCallback: () => {\n                    contentsElement.classList.add('code-hover-contents');\n                    this.layout();\n                    // This changes the dimensions of the hover so trigger a layout\n                    this._onRequestLayout.fire();\n                }\n            });\n            contentsElement.appendChild(element);\n        }\n        rowElement.appendChild(contentsElement);\n        this._hover.contentsDomNode.appendChild(rowElement);\n        if (options.actions && options.actions.length > 0) {\n            const statusBarElement = $('div.hover-row.status-bar');\n            const actionsElement = $('div.actions');\n            options.actions.forEach(action => {\n                const keybinding = this._keybindingService.lookupKeybinding(action.commandId);\n                const keybindingLabel = keybinding ? keybinding.getLabel() : null;\n                HoverAction.render(actionsElement, {\n                    label: action.label,\n                    commandId: action.commandId,\n                    run: e => {\n                        action.run(e);\n                        this.dispose();\n                    },\n                    iconClass: action.iconClass\n                }, keybindingLabel);\n            });\n            statusBarElement.appendChild(actionsElement);\n            this._hover.containerDomNode.appendChild(statusBarElement);\n        }\n        this._hoverContainer = $('div.workbench-hover-container');\n        if (this._hoverPointer) {\n            this._hoverContainer.appendChild(this._hoverPointer);\n        }\n        this._hoverContainer.appendChild(this._hover.containerDomNode);\n        // Determine whether to hide on hover\n        let hideOnHover;\n        if (options.actions && options.actions.length > 0) {\n            // If there are actions, require hover so they can be accessed\n            hideOnHover = false;\n        }\n        else {\n            if (((_g = options.persistence) === null || _g === void 0 ? void 0 : _g.hideOnHover) === undefined) {\n                // When unset, will default to true when it's a string or when it's markdown that\n                // appears to have a link using a naive check for '](' and '</a>'\n                hideOnHover = typeof options.content === 'string' ||\n                    isMarkdownString(options.content) && !options.content.value.includes('](') && !options.content.value.includes('</a>');\n            }\n            else {\n                // It's set explicitly\n                hideOnHover = options.persistence.hideOnHover;\n            }\n        }\n        // Show the hover hint if needed\n        if (hideOnHover && ((_h = options.appearance) === null || _h === void 0 ? void 0 : _h.showHoverHint)) {\n            const statusBarElement = $('div.hover-row.status-bar');\n            const infoElement = $('div.info');\n            infoElement.textContent = localize('hoverhint', 'Hold {0} key to mouse over', isMacintosh ? 'Option' : 'Alt');\n            statusBarElement.appendChild(infoElement);\n            this._hover.containerDomNode.appendChild(statusBarElement);\n        }\n        const mouseTrackerTargets = [...this._target.targetElements];\n        if (!hideOnHover) {\n            mouseTrackerTargets.push(this._hoverContainer);\n        }\n        const mouseTracker = this._register(new CompositeMouseTracker(mouseTrackerTargets));\n        this._register(mouseTracker.onMouseOut(() => {\n            if (!this._isLocked) {\n                this.dispose();\n            }\n        }));\n        // Setup another mouse tracker when hideOnHover is set in order to track the hover as well\n        // when it is locked. This ensures the hover will hide on mouseout after alt has been\n        // released to unlock the element.\n        if (hideOnHover) {\n            const mouseTracker2Targets = [...this._target.targetElements, this._hoverContainer];\n            this._lockMouseTracker = this._register(new CompositeMouseTracker(mouseTracker2Targets));\n            this._register(this._lockMouseTracker.onMouseOut(() => {\n                if (!this._isLocked) {\n                    this.dispose();\n                }\n            }));\n        }\n        else {\n            this._lockMouseTracker = mouseTracker;\n        }\n    }\n    addFocusTrap() {\n        if (!this._enableFocusTraps || this._addedFocusTrap) {\n            return;\n        }\n        this._addedFocusTrap = true;\n        // Add a hover tab loop if the hover has at least one element with a valid tabIndex\n        const firstContainerFocusElement = this._hover.containerDomNode;\n        const lastContainerFocusElement = this.findLastFocusableChild(this._hover.containerDomNode);\n        if (lastContainerFocusElement) {\n            const beforeContainerFocusElement = dom.prepend(this._hoverContainer, $('div'));\n            const afterContainerFocusElement = dom.append(this._hoverContainer, $('div'));\n            beforeContainerFocusElement.tabIndex = 0;\n            afterContainerFocusElement.tabIndex = 0;\n            this._register(dom.addDisposableListener(afterContainerFocusElement, 'focus', (e) => {\n                firstContainerFocusElement.focus();\n                e.preventDefault();\n            }));\n            this._register(dom.addDisposableListener(beforeContainerFocusElement, 'focus', (e) => {\n                lastContainerFocusElement.focus();\n                e.preventDefault();\n            }));\n        }\n    }\n    findLastFocusableChild(root) {\n        if (root.hasChildNodes()) {\n            for (let i = 0; i < root.childNodes.length; i++) {\n                const node = root.childNodes.item(root.childNodes.length - i - 1);\n                if (node.nodeType === node.ELEMENT_NODE) {\n                    const parsedNode = node;\n                    if (typeof parsedNode.tabIndex === 'number' && parsedNode.tabIndex >= 0) {\n                        return parsedNode;\n                    }\n                }\n                const recursivelyFoundElement = this.findLastFocusableChild(node);\n                if (recursivelyFoundElement) {\n                    return recursivelyFoundElement;\n                }\n            }\n        }\n        return undefined;\n    }\n    render(container) {\n        var _a;\n        container.appendChild(this._hoverContainer);\n        const hoverFocused = this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement);\n        const accessibleViewHint = hoverFocused && getHoverAccessibleViewHint(this._configurationService.getValue('accessibility.verbosity.hover') === true && this._accessibilityService.isScreenReaderOptimized(), (_a = this._keybindingService.lookupKeybinding('editor.action.accessibleView')) === null || _a === void 0 ? void 0 : _a.getAriaLabel());\n        if (accessibleViewHint) {\n            status(accessibleViewHint);\n        }\n        this.layout();\n        this.addFocusTrap();\n    }\n    layout() {\n        this._hover.containerDomNode.classList.remove('right-aligned');\n        this._hover.contentsDomNode.style.maxHeight = '';\n        const getZoomAccountedBoundingClientRect = (e) => {\n            const zoom = dom.getDomNodeZoomLevel(e);\n            const boundingRect = e.getBoundingClientRect();\n            return {\n                top: boundingRect.top * zoom,\n                bottom: boundingRect.bottom * zoom,\n                right: boundingRect.right * zoom,\n                left: boundingRect.left * zoom,\n            };\n        };\n        const targetBounds = this._target.targetElements.map(e => getZoomAccountedBoundingClientRect(e));\n        const { top, right, bottom, left } = targetBounds[0];\n        const width = right - left;\n        const height = bottom - top;\n        const targetRect = {\n            top, right, bottom, left, width, height,\n            center: {\n                x: left + (width / 2),\n                y: top + (height / 2)\n            }\n        };\n        // These calls adjust the position depending on spacing.\n        this.adjustHorizontalHoverPosition(targetRect);\n        this.adjustVerticalHoverPosition(targetRect);\n        // This call limits the maximum height of the hover.\n        this.adjustHoverMaxHeight(targetRect);\n        // Offset the hover position if there is a pointer so it aligns with the target element\n        this._hoverContainer.style.padding = '';\n        this._hoverContainer.style.margin = '';\n        if (this._hoverPointer) {\n            switch (this._hoverPosition) {\n                case 1 /* HoverPosition.RIGHT */:\n                    targetRect.left += 3 /* Constants.PointerSize */;\n                    targetRect.right += 3 /* Constants.PointerSize */;\n                    this._hoverContainer.style.paddingLeft = `${3 /* Constants.PointerSize */}px`;\n                    this._hoverContainer.style.marginLeft = `${-3 /* Constants.PointerSize */}px`;\n                    break;\n                case 0 /* HoverPosition.LEFT */:\n                    targetRect.left -= 3 /* Constants.PointerSize */;\n                    targetRect.right -= 3 /* Constants.PointerSize */;\n                    this._hoverContainer.style.paddingRight = `${3 /* Constants.PointerSize */}px`;\n                    this._hoverContainer.style.marginRight = `${-3 /* Constants.PointerSize */}px`;\n                    break;\n                case 2 /* HoverPosition.BELOW */:\n                    targetRect.top += 3 /* Constants.PointerSize */;\n                    targetRect.bottom += 3 /* Constants.PointerSize */;\n                    this._hoverContainer.style.paddingTop = `${3 /* Constants.PointerSize */}px`;\n                    this._hoverContainer.style.marginTop = `${-3 /* Constants.PointerSize */}px`;\n                    break;\n                case 3 /* HoverPosition.ABOVE */:\n                    targetRect.top -= 3 /* Constants.PointerSize */;\n                    targetRect.bottom -= 3 /* Constants.PointerSize */;\n                    this._hoverContainer.style.paddingBottom = `${3 /* Constants.PointerSize */}px`;\n                    this._hoverContainer.style.marginBottom = `${-3 /* Constants.PointerSize */}px`;\n                    break;\n            }\n            targetRect.center.x = targetRect.left + (width / 2);\n            targetRect.center.y = targetRect.top + (height / 2);\n        }\n        this.computeXCordinate(targetRect);\n        this.computeYCordinate(targetRect);\n        if (this._hoverPointer) {\n            // reset\n            this._hoverPointer.classList.remove('top');\n            this._hoverPointer.classList.remove('left');\n            this._hoverPointer.classList.remove('right');\n            this._hoverPointer.classList.remove('bottom');\n            this.setHoverPointerPosition(targetRect);\n        }\n        this._hover.onContentsChanged();\n    }\n    computeXCordinate(target) {\n        const hoverWidth = this._hover.containerDomNode.clientWidth + 2 /* Constants.HoverBorderWidth */;\n        if (this._target.x !== undefined) {\n            this._x = this._target.x;\n        }\n        else if (this._hoverPosition === 1 /* HoverPosition.RIGHT */) {\n            this._x = target.right;\n        }\n        else if (this._hoverPosition === 0 /* HoverPosition.LEFT */) {\n            this._x = target.left - hoverWidth;\n        }\n        else {\n            if (this._hoverPointer) {\n                this._x = target.center.x - (this._hover.containerDomNode.clientWidth / 2);\n            }\n            else {\n                this._x = target.left;\n            }\n            // Hover is going beyond window towards right end\n            if (this._x + hoverWidth >= this._targetDocumentElement.clientWidth) {\n                this._hover.containerDomNode.classList.add('right-aligned');\n                this._x = Math.max(this._targetDocumentElement.clientWidth - hoverWidth - 2 /* Constants.HoverWindowEdgeMargin */, this._targetDocumentElement.clientLeft);\n            }\n        }\n        // Hover is going beyond window towards left end\n        if (this._x < this._targetDocumentElement.clientLeft) {\n            this._x = target.left + 2 /* Constants.HoverWindowEdgeMargin */;\n        }\n    }\n    computeYCordinate(target) {\n        if (this._target.y !== undefined) {\n            this._y = this._target.y;\n        }\n        else if (this._hoverPosition === 3 /* HoverPosition.ABOVE */) {\n            this._y = target.top;\n        }\n        else if (this._hoverPosition === 2 /* HoverPosition.BELOW */) {\n            this._y = target.bottom - 2;\n        }\n        else {\n            if (this._hoverPointer) {\n                this._y = target.center.y + (this._hover.containerDomNode.clientHeight / 2);\n            }\n            else {\n                this._y = target.bottom;\n            }\n        }\n        // Hover on bottom is going beyond window\n        if (this._y > this._targetWindow.innerHeight) {\n            this._y = target.bottom;\n        }\n    }\n    adjustHorizontalHoverPosition(target) {\n        // Do not adjust horizontal hover position if x cordiante is provided\n        if (this._target.x !== undefined) {\n            return;\n        }\n        const hoverPointerOffset = (this._hoverPointer ? 3 /* Constants.PointerSize */ : 0);\n        // When force position is enabled, restrict max width\n        if (this._forcePosition) {\n            const padding = hoverPointerOffset + 2 /* Constants.HoverBorderWidth */;\n            if (this._hoverPosition === 1 /* HoverPosition.RIGHT */) {\n                this._hover.containerDomNode.style.maxWidth = `${this._targetDocumentElement.clientWidth - target.right - padding}px`;\n            }\n            else if (this._hoverPosition === 0 /* HoverPosition.LEFT */) {\n                this._hover.containerDomNode.style.maxWidth = `${target.left - padding}px`;\n            }\n            return;\n        }\n        // Position hover on right to target\n        if (this._hoverPosition === 1 /* HoverPosition.RIGHT */) {\n            const roomOnRight = this._targetDocumentElement.clientWidth - target.right;\n            // Hover on the right is going beyond window.\n            if (roomOnRight < this._hover.containerDomNode.clientWidth + hoverPointerOffset) {\n                const roomOnLeft = target.left;\n                // There's enough room on the left, flip the hover position\n                if (roomOnLeft >= this._hover.containerDomNode.clientWidth + hoverPointerOffset) {\n                    this._hoverPosition = 0 /* HoverPosition.LEFT */;\n                }\n                // Hover on the left would go beyond window too\n                else {\n                    this._hoverPosition = 2 /* HoverPosition.BELOW */;\n                }\n            }\n        }\n        // Position hover on left to target\n        else if (this._hoverPosition === 0 /* HoverPosition.LEFT */) {\n            const roomOnLeft = target.left;\n            // Hover on the left is going beyond window.\n            if (roomOnLeft < this._hover.containerDomNode.clientWidth + hoverPointerOffset) {\n                const roomOnRight = this._targetDocumentElement.clientWidth - target.right;\n                // There's enough room on the right, flip the hover position\n                if (roomOnRight >= this._hover.containerDomNode.clientWidth + hoverPointerOffset) {\n                    this._hoverPosition = 1 /* HoverPosition.RIGHT */;\n                }\n                // Hover on the right would go beyond window too\n                else {\n                    this._hoverPosition = 2 /* HoverPosition.BELOW */;\n                }\n            }\n            // Hover on the left is going beyond window.\n            if (target.left - this._hover.containerDomNode.clientWidth - hoverPointerOffset <= this._targetDocumentElement.clientLeft) {\n                this._hoverPosition = 1 /* HoverPosition.RIGHT */;\n            }\n        }\n    }\n    adjustVerticalHoverPosition(target) {\n        // Do not adjust vertical hover position if the y coordinate is provided\n        // or the position is forced\n        if (this._target.y !== undefined || this._forcePosition) {\n            return;\n        }\n        const hoverPointerOffset = (this._hoverPointer ? 3 /* Constants.PointerSize */ : 0);\n        // Position hover on top of the target\n        if (this._hoverPosition === 3 /* HoverPosition.ABOVE */) {\n            // Hover on top is going beyond window\n            if (target.top - this._hover.containerDomNode.clientHeight - hoverPointerOffset < 0) {\n                this._hoverPosition = 2 /* HoverPosition.BELOW */;\n            }\n        }\n        // Position hover below the target\n        else if (this._hoverPosition === 2 /* HoverPosition.BELOW */) {\n            // Hover on bottom is going beyond window\n            if (target.bottom + this._hover.containerDomNode.clientHeight + hoverPointerOffset > this._targetWindow.innerHeight) {\n                this._hoverPosition = 3 /* HoverPosition.ABOVE */;\n            }\n        }\n    }\n    adjustHoverMaxHeight(target) {\n        let maxHeight = this._targetWindow.innerHeight / 2;\n        // When force position is enabled, restrict max height\n        if (this._forcePosition) {\n            const padding = (this._hoverPointer ? 3 /* Constants.PointerSize */ : 0) + 2 /* Constants.HoverBorderWidth */;\n            if (this._hoverPosition === 3 /* HoverPosition.ABOVE */) {\n                maxHeight = Math.min(maxHeight, target.top - padding);\n            }\n            else if (this._hoverPosition === 2 /* HoverPosition.BELOW */) {\n                maxHeight = Math.min(maxHeight, this._targetWindow.innerHeight - target.bottom - padding);\n            }\n        }\n        this._hover.containerDomNode.style.maxHeight = `${maxHeight}px`;\n        if (this._hover.contentsDomNode.clientHeight < this._hover.contentsDomNode.scrollHeight) {\n            // Add padding for a vertical scrollbar\n            const extraRightPadding = `${this._hover.scrollbar.options.verticalScrollbarSize}px`;\n            if (this._hover.contentsDomNode.style.paddingRight !== extraRightPadding) {\n                this._hover.contentsDomNode.style.paddingRight = extraRightPadding;\n            }\n        }\n    }\n    setHoverPointerPosition(target) {\n        if (!this._hoverPointer) {\n            return;\n        }\n        switch (this._hoverPosition) {\n            case 0 /* HoverPosition.LEFT */:\n            case 1 /* HoverPosition.RIGHT */: {\n                this._hoverPointer.classList.add(this._hoverPosition === 0 /* HoverPosition.LEFT */ ? 'right' : 'left');\n                const hoverHeight = this._hover.containerDomNode.clientHeight;\n                // If hover is taller than target, then show the pointer at the center of target\n                if (hoverHeight > target.height) {\n                    this._hoverPointer.style.top = `${target.center.y - (this._y - hoverHeight) - 3 /* Constants.PointerSize */}px`;\n                }\n                // Otherwise show the pointer at the center of hover\n                else {\n                    this._hoverPointer.style.top = `${Math.round((hoverHeight / 2)) - 3 /* Constants.PointerSize */}px`;\n                }\n                break;\n            }\n            case 3 /* HoverPosition.ABOVE */:\n            case 2 /* HoverPosition.BELOW */: {\n                this._hoverPointer.classList.add(this._hoverPosition === 3 /* HoverPosition.ABOVE */ ? 'bottom' : 'top');\n                const hoverWidth = this._hover.containerDomNode.clientWidth;\n                // Position pointer at the center of the hover\n                let pointerLeftPosition = Math.round((hoverWidth / 2)) - 3 /* Constants.PointerSize */;\n                // If pointer goes beyond target then position it at the center of the target\n                const pointerX = this._x + pointerLeftPosition;\n                if (pointerX < target.left || pointerX > target.right) {\n                    pointerLeftPosition = target.center.x - this._x - 3 /* Constants.PointerSize */;\n                }\n                this._hoverPointer.style.left = `${pointerLeftPosition}px`;\n                break;\n            }\n        }\n    }\n    focus() {\n        this._hover.containerDomNode.focus();\n    }\n    dispose() {\n        if (!this._isDisposed) {\n            this._onDispose.fire();\n            this._hoverContainer.remove();\n            this._messageListeners.dispose();\n            this._target.dispose();\n            super.dispose();\n        }\n        this._isDisposed = true;\n    }\n};\nHoverWidget = __decorate([\n    __param(1, IKeybindingService),\n    __param(2, IConfigurationService),\n    __param(3, IOpenerService),\n    __param(4, IInstantiationService),\n    __param(5, IAccessibilityService)\n], HoverWidget);\nexport { HoverWidget };\nclass CompositeMouseTracker extends Widget {\n    get onMouseOut() { return this._onMouseOut.event; }\n    get isMouseIn() { return this._isMouseIn; }\n    constructor(_elements) {\n        super();\n        this._elements = _elements;\n        this._isMouseIn = true;\n        this._onMouseOut = this._register(new Emitter());\n        this._elements.forEach(n => this.onmouseover(n, () => this._onTargetMouseOver(n)));\n        this._elements.forEach(n => this.onmouseleave(n, () => this._onTargetMouseLeave(n)));\n    }\n    _onTargetMouseOver(target) {\n        this._isMouseIn = true;\n        this._clearEvaluateMouseStateTimeout(target);\n    }\n    _onTargetMouseLeave(target) {\n        this._isMouseIn = false;\n        this._evaluateMouseState(target);\n    }\n    _evaluateMouseState(target) {\n        this._clearEvaluateMouseStateTimeout(target);\n        // Evaluate whether the mouse is still outside asynchronously such that other mouse targets\n        // have the opportunity to first their mouse in event.\n        this._mouseTimeout = dom.getWindow(target).setTimeout(() => this._fireIfMouseOutside(), 0);\n    }\n    _clearEvaluateMouseStateTimeout(target) {\n        if (this._mouseTimeout) {\n            dom.getWindow(target).clearTimeout(this._mouseTimeout);\n            this._mouseTimeout = undefined;\n        }\n    }\n    _fireIfMouseOutside() {\n        if (!this._isMouseIn) {\n            this._onMouseOut.fire();\n        }\n    }\n}\nclass ElementHoverTarget {\n    constructor(_element) {\n        this._element = _element;\n        this.targetElements = [this._element];\n    }\n    dispose() {\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { isMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { isFunction, isString } from '../../../../base/common/types.js';\nimport { localize } from '../../../../nls.js';\nexport class UpdatableHoverWidget {\n    constructor(hoverDelegate, target, fadeInAnimation) {\n        this.hoverDelegate = hoverDelegate;\n        this.target = target;\n        this.fadeInAnimation = fadeInAnimation;\n    }\n    async update(content, focus, options) {\n        var _a;\n        if (this._cancellationTokenSource) {\n            // there's an computation ongoing, cancel it\n            this._cancellationTokenSource.dispose(true);\n            this._cancellationTokenSource = undefined;\n        }\n        if (this.isDisposed) {\n            return;\n        }\n        let resolvedContent;\n        if (content === undefined || isString(content) || content instanceof HTMLElement) {\n            resolvedContent = content;\n        }\n        else if (!isFunction(content.markdown)) {\n            resolvedContent = (_a = content.markdown) !== null && _a !== void 0 ? _a : content.markdownNotSupportedFallback;\n        }\n        else {\n            // compute the content, potentially long-running\n            // show 'Loading' if no hover is up yet\n            if (!this._hoverWidget) {\n                this.show(localize('iconLabel.loading', \"Loading...\"), focus);\n            }\n            // compute the content\n            this._cancellationTokenSource = new CancellationTokenSource();\n            const token = this._cancellationTokenSource.token;\n            resolvedContent = await content.markdown(token);\n            if (resolvedContent === undefined) {\n                resolvedContent = content.markdownNotSupportedFallback;\n            }\n            if (this.isDisposed || token.isCancellationRequested) {\n                // either the widget has been closed in the meantime\n                // or there has been a new call to `update`\n                return;\n            }\n        }\n        this.show(resolvedContent, focus, options);\n    }\n    show(content, focus, options) {\n        const oldHoverWidget = this._hoverWidget;\n        if (this.hasContent(content)) {\n            const hoverOptions = {\n                content,\n                target: this.target,\n                appearance: {\n                    showPointer: this.hoverDelegate.placement === 'element',\n                    skipFadeInAnimation: !this.fadeInAnimation || !!oldHoverWidget, // do not fade in if the hover is already showing\n                },\n                position: {\n                    hoverPosition: 2 /* HoverPosition.BELOW */,\n                },\n                ...options\n            };\n            this._hoverWidget = this.hoverDelegate.showHover(hoverOptions, focus);\n        }\n        oldHoverWidget === null || oldHoverWidget === void 0 ? void 0 : oldHoverWidget.dispose();\n    }\n    hasContent(content) {\n        if (!content) {\n            return false;\n        }\n        if (isMarkdownString(content)) {\n            return !!content.value;\n        }\n        return true;\n    }\n    get isDisposed() {\n        var _a;\n        return (_a = this._hoverWidget) === null || _a === void 0 ? void 0 : _a.isDisposed;\n    }\n    dispose() {\n        var _a, _b;\n        (_a = this._hoverWidget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._cancellationTokenSource) === null || _b === void 0 ? void 0 : _b.dispose(true);\n        this._cancellationTokenSource = undefined;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { editorHoverBorder } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { HoverWidget } from './hoverWidget.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { addDisposableListener, EventType, getActiveElement, isAncestorOfActiveElement, isAncestor, getWindow } from '../../../../base/browser/dom.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { StandardKeyboardEvent } from '../../../../base/browser/keyboardEvent.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { ILayoutService } from '../../../../platform/layout/browser/layoutService.js';\nimport { mainWindow } from '../../../../base/browser/window.js';\nimport { ContextViewHandler } from '../../../../platform/contextview/browser/contextViewService.js';\nimport { UpdatableHoverWidget } from './updatableHoverWidget.js';\nimport { TimeoutTimer } from '../../../../base/common/async.js';\nlet HoverService = class HoverService extends Disposable {\n    constructor(_instantiationService, contextMenuService, _keybindingService, _layoutService, _accessibilityService) {\n        super();\n        this._instantiationService = _instantiationService;\n        this._keybindingService = _keybindingService;\n        this._layoutService = _layoutService;\n        this._accessibilityService = _accessibilityService;\n        contextMenuService.onDidShowContextMenu(() => this.hideHover());\n        this._contextViewHandler = this._register(new ContextViewHandler(this._layoutService));\n    }\n    showHover(options, focus, skipLastFocusedUpdate) {\n        var _a, _b, _c, _d;\n        if (getHoverOptionsIdentity(this._currentHoverOptions) === getHoverOptionsIdentity(options)) {\n            return undefined;\n        }\n        if (this._currentHover && ((_b = (_a = this._currentHoverOptions) === null || _a === void 0 ? void 0 : _a.persistence) === null || _b === void 0 ? void 0 : _b.sticky)) {\n            return undefined;\n        }\n        this._currentHoverOptions = options;\n        this._lastHoverOptions = options;\n        const trapFocus = options.trapFocus || this._accessibilityService.isScreenReaderOptimized();\n        const activeElement = getActiveElement();\n        // HACK, remove this check when #189076 is fixed\n        if (!skipLastFocusedUpdate) {\n            if (trapFocus && activeElement) {\n                this._lastFocusedElementBeforeOpen = activeElement;\n            }\n            else {\n                this._lastFocusedElementBeforeOpen = undefined;\n            }\n        }\n        const hoverDisposables = new DisposableStore();\n        const hover = this._instantiationService.createInstance(HoverWidget, options);\n        if ((_c = options.persistence) === null || _c === void 0 ? void 0 : _c.sticky) {\n            hover.isLocked = true;\n        }\n        hover.onDispose(() => {\n            var _a, _b;\n            const hoverWasFocused = ((_a = this._currentHover) === null || _a === void 0 ? void 0 : _a.domNode) && isAncestorOfActiveElement(this._currentHover.domNode);\n            if (hoverWasFocused) {\n                // Required to handle cases such as closing the hover with the escape key\n                (_b = this._lastFocusedElementBeforeOpen) === null || _b === void 0 ? void 0 : _b.focus();\n            }\n            // Only clear the current options if it's the current hover, the current options help\n            // reduce flickering when the same hover is shown multiple times\n            if (this._currentHoverOptions === options) {\n                this._currentHoverOptions = undefined;\n            }\n            hoverDisposables.dispose();\n        }, undefined, hoverDisposables);\n        // Set the container explicitly to enable aux window support\n        if (!options.container) {\n            const targetElement = options.target instanceof HTMLElement ? options.target : options.target.targetElements[0];\n            options.container = this._layoutService.getContainer(getWindow(targetElement));\n        }\n        this._contextViewHandler.showContextView(new HoverContextViewDelegate(hover, focus), options.container);\n        hover.onRequestLayout(() => this._contextViewHandler.layout(), undefined, hoverDisposables);\n        if ((_d = options.persistence) === null || _d === void 0 ? void 0 : _d.sticky) {\n            hoverDisposables.add(addDisposableListener(getWindow(options.container).document, EventType.MOUSE_DOWN, e => {\n                if (!isAncestor(e.target, hover.domNode)) {\n                    this.doHideHover();\n                }\n            }));\n        }\n        else {\n            if ('targetElements' in options.target) {\n                for (const element of options.target.targetElements) {\n                    hoverDisposables.add(addDisposableListener(element, EventType.CLICK, () => this.hideHover()));\n                }\n            }\n            else {\n                hoverDisposables.add(addDisposableListener(options.target, EventType.CLICK, () => this.hideHover()));\n            }\n            const focusedElement = getActiveElement();\n            if (focusedElement) {\n                const focusedElementDocument = getWindow(focusedElement).document;\n                hoverDisposables.add(addDisposableListener(focusedElement, EventType.KEY_DOWN, e => { var _a; return this._keyDown(e, hover, !!((_a = options.persistence) === null || _a === void 0 ? void 0 : _a.hideOnKeyDown)); }));\n                hoverDisposables.add(addDisposableListener(focusedElementDocument, EventType.KEY_DOWN, e => { var _a; return this._keyDown(e, hover, !!((_a = options.persistence) === null || _a === void 0 ? void 0 : _a.hideOnKeyDown)); }));\n                hoverDisposables.add(addDisposableListener(focusedElement, EventType.KEY_UP, e => this._keyUp(e, hover)));\n                hoverDisposables.add(addDisposableListener(focusedElementDocument, EventType.KEY_UP, e => this._keyUp(e, hover)));\n            }\n        }\n        if ('IntersectionObserver' in mainWindow) {\n            const observer = new IntersectionObserver(e => this._intersectionChange(e, hover), { threshold: 0 });\n            const firstTargetElement = 'targetElements' in options.target ? options.target.targetElements[0] : options.target;\n            observer.observe(firstTargetElement);\n            hoverDisposables.add(toDisposable(() => observer.disconnect()));\n        }\n        this._currentHover = hover;\n        return hover;\n    }\n    hideHover() {\n        var _a;\n        if (((_a = this._currentHover) === null || _a === void 0 ? void 0 : _a.isLocked) || !this._currentHoverOptions) {\n            return;\n        }\n        this.doHideHover();\n    }\n    doHideHover() {\n        this._currentHover = undefined;\n        this._currentHoverOptions = undefined;\n        this._contextViewHandler.hideContextView();\n    }\n    _intersectionChange(entries, hover) {\n        const entry = entries[entries.length - 1];\n        if (!entry.isIntersecting) {\n            hover.dispose();\n        }\n    }\n    showAndFocusLastHover() {\n        if (!this._lastHoverOptions) {\n            return;\n        }\n        this.showHover(this._lastHoverOptions, true, true);\n    }\n    _keyDown(e, hover, hideOnKeyDown) {\n        var _a, _b;\n        if (e.key === 'Alt') {\n            hover.isLocked = true;\n            return;\n        }\n        const event = new StandardKeyboardEvent(e);\n        const keybinding = this._keybindingService.resolveKeyboardEvent(event);\n        if (keybinding.getSingleModifierDispatchChords().some(value => !!value) || this._keybindingService.softDispatch(event, event.target).kind !== 0 /* ResultKind.NoMatchingKb */) {\n            return;\n        }\n        if (hideOnKeyDown && (!((_a = this._currentHoverOptions) === null || _a === void 0 ? void 0 : _a.trapFocus) || e.key !== 'Tab')) {\n            this.hideHover();\n            (_b = this._lastFocusedElementBeforeOpen) === null || _b === void 0 ? void 0 : _b.focus();\n        }\n    }\n    _keyUp(e, hover) {\n        var _a;\n        if (e.key === 'Alt') {\n            hover.isLocked = false;\n            // Hide if alt is released while the mouse is not over hover/target\n            if (!hover.isMouseIn) {\n                this.hideHover();\n                (_a = this._lastFocusedElementBeforeOpen) === null || _a === void 0 ? void 0 : _a.focus();\n            }\n        }\n    }\n    // TODO: Investigate performance of this function. There seems to be a lot of content created\n    //       and thrown away on start up\n    setupUpdatableHover(hoverDelegate, htmlElement, content, options) {\n        htmlElement.setAttribute('custom-hover', 'true');\n        if (htmlElement.title !== '') {\n            console.warn('HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute.');\n            console.trace('Stack trace:', htmlElement.title);\n            htmlElement.title = '';\n        }\n        let hoverPreparation;\n        let hoverWidget;\n        const hideHover = (disposeWidget, disposePreparation) => {\n            var _a;\n            const hadHover = hoverWidget !== undefined;\n            if (disposeWidget) {\n                hoverWidget === null || hoverWidget === void 0 ? void 0 : hoverWidget.dispose();\n                hoverWidget = undefined;\n            }\n            if (disposePreparation) {\n                hoverPreparation === null || hoverPreparation === void 0 ? void 0 : hoverPreparation.dispose();\n                hoverPreparation = undefined;\n            }\n            if (hadHover) {\n                (_a = hoverDelegate.onDidHideHover) === null || _a === void 0 ? void 0 : _a.call(hoverDelegate);\n                hoverWidget = undefined;\n            }\n        };\n        const triggerShowHover = (delay, focus, target) => {\n            return new TimeoutTimer(async () => {\n                if (!hoverWidget || hoverWidget.isDisposed) {\n                    hoverWidget = new UpdatableHoverWidget(hoverDelegate, target || htmlElement, delay > 0);\n                    await hoverWidget.update(typeof content === 'function' ? content() : content, focus, options);\n                }\n            }, delay);\n        };\n        let isMouseDown = false;\n        const mouseDownEmitter = addDisposableListener(htmlElement, EventType.MOUSE_DOWN, () => {\n            isMouseDown = true;\n            hideHover(true, true);\n        }, true);\n        const mouseUpEmitter = addDisposableListener(htmlElement, EventType.MOUSE_UP, () => {\n            isMouseDown = false;\n        }, true);\n        const mouseLeaveEmitter = addDisposableListener(htmlElement, EventType.MOUSE_LEAVE, (e) => {\n            isMouseDown = false;\n            hideHover(false, e.fromElement === htmlElement);\n        }, true);\n        const onMouseOver = (e) => {\n            if (hoverPreparation) {\n                return;\n            }\n            const toDispose = new DisposableStore();\n            const target = {\n                targetElements: [htmlElement],\n                dispose: () => { }\n            };\n            if (hoverDelegate.placement === undefined || hoverDelegate.placement === 'mouse') {\n                // track the mouse position\n                const onMouseMove = (e) => {\n                    target.x = e.x + 10;\n                    if ((e.target instanceof HTMLElement) && getHoverTargetElement(e.target, htmlElement) !== htmlElement) {\n                        hideHover(true, true);\n                    }\n                };\n                toDispose.add(addDisposableListener(htmlElement, EventType.MOUSE_MOVE, onMouseMove, true));\n            }\n            hoverPreparation = toDispose;\n            if ((e.target instanceof HTMLElement) && getHoverTargetElement(e.target, htmlElement) !== htmlElement) {\n                return; // Do not show hover when the mouse is over another hover target\n            }\n            toDispose.add(triggerShowHover(hoverDelegate.delay, false, target));\n        };\n        const mouseOverDomEmitter = addDisposableListener(htmlElement, EventType.MOUSE_OVER, onMouseOver, true);\n        const onFocus = () => {\n            if (isMouseDown || hoverPreparation) {\n                return;\n            }\n            const target = {\n                targetElements: [htmlElement],\n                dispose: () => { }\n            };\n            const toDispose = new DisposableStore();\n            const onBlur = () => hideHover(true, true);\n            toDispose.add(addDisposableListener(htmlElement, EventType.BLUR, onBlur, true));\n            toDispose.add(triggerShowHover(hoverDelegate.delay, false, target));\n            hoverPreparation = toDispose;\n        };\n        // Do not show hover when focusing an input or textarea\n        let focusDomEmitter;\n        const tagName = htmlElement.tagName.toLowerCase();\n        if (tagName !== 'input' && tagName !== 'textarea') {\n            focusDomEmitter = addDisposableListener(htmlElement, EventType.FOCUS, onFocus, true);\n        }\n        const hover = {\n            show: focus => {\n                hideHover(false, true); // terminate a ongoing mouse over preparation\n                triggerShowHover(0, focus); // show hover immediately\n            },\n            hide: () => {\n                hideHover(true, true);\n            },\n            update: async (newContent, hoverOptions) => {\n                content = newContent;\n                await (hoverWidget === null || hoverWidget === void 0 ? void 0 : hoverWidget.update(content, undefined, hoverOptions));\n            },\n            dispose: () => {\n                mouseOverDomEmitter.dispose();\n                mouseLeaveEmitter.dispose();\n                mouseDownEmitter.dispose();\n                mouseUpEmitter.dispose();\n                focusDomEmitter === null || focusDomEmitter === void 0 ? void 0 : focusDomEmitter.dispose();\n                hideHover(true, true);\n            }\n        };\n        return hover;\n    }\n};\nHoverService = __decorate([\n    __param(0, IInstantiationService),\n    __param(1, IContextMenuService),\n    __param(2, IKeybindingService),\n    __param(3, ILayoutService),\n    __param(4, IAccessibilityService)\n], HoverService);\nexport { HoverService };\nfunction getHoverOptionsIdentity(options) {\n    var _a;\n    if (options === undefined) {\n        return undefined;\n    }\n    return (_a = options === null || options === void 0 ? void 0 : options.id) !== null && _a !== void 0 ? _a : options;\n}\nclass HoverContextViewDelegate {\n    get anchorPosition() {\n        return this._hover.anchor;\n    }\n    constructor(_hover, _focus = false) {\n        this._hover = _hover;\n        this._focus = _focus;\n        // Render over all other context views\n        this.layer = 1;\n    }\n    render(container) {\n        this._hover.render(container);\n        if (this._focus) {\n            this._hover.focus();\n        }\n        return this._hover;\n    }\n    getAnchor() {\n        return {\n            x: this._hover.x,\n            y: this._hover.y\n        };\n    }\n    layout() {\n        this._hover.layout();\n    }\n}\nfunction getHoverTargetElement(element, stopElement) {\n    stopElement = stopElement !== null && stopElement !== void 0 ? stopElement : getWindow(element).document.body;\n    while (!element.hasAttribute('custom-hover') && element !== stopElement) {\n        element = element.parentElement;\n    }\n    return element;\n}\nregisterSingleton(IHoverService, HoverService, 1 /* InstantiationType.Delayed */);\nregisterThemingParticipant((theme, collector) => {\n    const hoverBorder = theme.getColor(editorHoverBorder);\n    if (hoverBorder) {\n        collector.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n        collector.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IMarkerDecorationsService } from '../../common/services/markerDecorations.js';\nimport { registerEditorContribution } from '../editorExtensions.js';\nlet MarkerDecorationsContribution = class MarkerDecorationsContribution {\n    constructor(_editor, _markerDecorationsService) {\n        // Doesn't do anything, just requires `IMarkerDecorationsService` to make sure it gets instantiated\n    }\n    dispose() {\n    }\n};\nMarkerDecorationsContribution.ID = 'editor.contrib.markerDecorations';\nMarkerDecorationsContribution = __decorate([\n    __param(1, IMarkerDecorationsService)\n], MarkerDecorationsContribution);\nexport { MarkerDecorationsContribution };\nregisterEditorContribution(MarkerDecorationsContribution.ID, MarkerDecorationsContribution, 0 /* EditorContributionInstantiation.Eager */); // eager because it instantiates IMarkerDecorationsService which is responsible for rendering squiggles\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../base/browser/dom.js';\nimport { mainWindow } from '../../../base/browser/window.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nimport { ResourceMap } from '../../../base/common/map.js';\nimport { parse } from '../../../base/common/marshalling.js';\nimport { matchesScheme, matchesSomeScheme, Schemas } from '../../../base/common/network.js';\nimport { normalizePath } from '../../../base/common/resources.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { ICodeEditorService } from './codeEditorService.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { EditorOpenSource } from '../../../platform/editor/common/editor.js';\nimport { extractSelection } from '../../../platform/opener/common/opener.js';\nlet CommandOpener = class CommandOpener {\n    constructor(_commandService) {\n        this._commandService = _commandService;\n    }\n    async open(target, options) {\n        if (!matchesScheme(target, Schemas.command)) {\n            return false;\n        }\n        if (!(options === null || options === void 0 ? void 0 : options.allowCommands)) {\n            // silently ignore commands when command-links are disabled, also\n            // suppress other openers by returning TRUE\n            return true;\n        }\n        if (typeof target === 'string') {\n            target = URI.parse(target);\n        }\n        if (Array.isArray(options.allowCommands)) {\n            // Only allow specific commands\n            if (!options.allowCommands.includes(target.path)) {\n                // Suppress other openers by returning TRUE\n                return true;\n            }\n        }\n        // execute as command\n        let args = [];\n        try {\n            args = parse(decodeURIComponent(target.query));\n        }\n        catch (_a) {\n            // ignore and retry\n            try {\n                args = parse(target.query);\n            }\n            catch (_b) {\n                // ignore error\n            }\n        }\n        if (!Array.isArray(args)) {\n            args = [args];\n        }\n        await this._commandService.executeCommand(target.path, ...args);\n        return true;\n    }\n};\nCommandOpener = __decorate([\n    __param(0, ICommandService)\n], CommandOpener);\nlet EditorOpener = class EditorOpener {\n    constructor(_editorService) {\n        this._editorService = _editorService;\n    }\n    async open(target, options) {\n        if (typeof target === 'string') {\n            target = URI.parse(target);\n        }\n        const { selection, uri } = extractSelection(target);\n        target = uri;\n        if (target.scheme === Schemas.file) {\n            target = normalizePath(target); // workaround for non-normalized paths (https://github.com/microsoft/vscode/issues/12954)\n        }\n        await this._editorService.openCodeEditor({\n            resource: target,\n            options: {\n                selection,\n                source: (options === null || options === void 0 ? void 0 : options.fromUserGesture) ? EditorOpenSource.USER : EditorOpenSource.API,\n                ...options === null || options === void 0 ? void 0 : options.editorOptions\n            }\n        }, this._editorService.getFocusedCodeEditor(), options === null || options === void 0 ? void 0 : options.openToSide);\n        return true;\n    }\n};\nEditorOpener = __decorate([\n    __param(0, ICodeEditorService)\n], EditorOpener);\nlet OpenerService = class OpenerService {\n    constructor(editorService, commandService) {\n        this._openers = new LinkedList();\n        this._validators = new LinkedList();\n        this._resolvers = new LinkedList();\n        this._resolvedUriTargets = new ResourceMap(uri => uri.with({ path: null, fragment: null, query: null }).toString());\n        this._externalOpeners = new LinkedList();\n        // Default external opener is going through window.open()\n        this._defaultExternalOpener = {\n            openExternal: async (href) => {\n                // ensure to open HTTP/HTTPS links into new windows\n                // to not trigger a navigation. Any other link is\n                // safe to be set as HREF to prevent a blank window\n                // from opening.\n                if (matchesSomeScheme(href, Schemas.http, Schemas.https)) {\n                    dom.windowOpenNoOpener(href);\n                }\n                else {\n                    mainWindow.location.href = href;\n                }\n                return true;\n            }\n        };\n        // Default opener: any external, maito, http(s), command, and catch-all-editors\n        this._openers.push({\n            open: async (target, options) => {\n                if ((options === null || options === void 0 ? void 0 : options.openExternal) || matchesSomeScheme(target, Schemas.mailto, Schemas.http, Schemas.https, Schemas.vsls)) {\n                    // open externally\n                    await this._doOpenExternal(target, options);\n                    return true;\n                }\n                return false;\n            }\n        });\n        this._openers.push(new CommandOpener(commandService));\n        this._openers.push(new EditorOpener(editorService));\n    }\n    registerOpener(opener) {\n        const remove = this._openers.unshift(opener);\n        return { dispose: remove };\n    }\n    async open(target, options) {\n        var _a;\n        // check with contributed validators\n        const targetURI = typeof target === 'string' ? URI.parse(target) : target;\n        // validate against the original URI that this URI resolves to, if one exists\n        const validationTarget = (_a = this._resolvedUriTargets.get(targetURI)) !== null && _a !== void 0 ? _a : target;\n        for (const validator of this._validators) {\n            if (!(await validator.shouldOpen(validationTarget, options))) {\n                return false;\n            }\n        }\n        // check with contributed openers\n        for (const opener of this._openers) {\n            const handled = await opener.open(target, options);\n            if (handled) {\n                return true;\n            }\n        }\n        return false;\n    }\n    async resolveExternalUri(resource, options) {\n        for (const resolver of this._resolvers) {\n            try {\n                const result = await resolver.resolveExternalUri(resource, options);\n                if (result) {\n                    if (!this._resolvedUriTargets.has(result.resolved)) {\n                        this._resolvedUriTargets.set(result.resolved, resource);\n                    }\n                    return result;\n                }\n            }\n            catch (_a) {\n                // noop\n            }\n        }\n        throw new Error('Could not resolve external URI: ' + resource.toString());\n    }\n    async _doOpenExternal(resource, options) {\n        //todo@jrieken IExternalUriResolver should support `uri: URI | string`\n        const uri = typeof resource === 'string' ? URI.parse(resource) : resource;\n        let externalUri;\n        try {\n            externalUri = (await this.resolveExternalUri(uri, options)).resolved;\n        }\n        catch (_a) {\n            externalUri = uri;\n        }\n        let href;\n        if (typeof resource === 'string' && uri.toString() === externalUri.toString()) {\n            // open the url-string AS IS\n            href = resource;\n        }\n        else {\n            // open URI using the toString(noEncode)+encodeURI-trick\n            href = encodeURI(externalUri.toString(true));\n        }\n        if (options === null || options === void 0 ? void 0 : options.allowContributedOpeners) {\n            const preferredOpenerId = typeof (options === null || options === void 0 ? void 0 : options.allowContributedOpeners) === 'string' ? options === null || options === void 0 ? void 0 : options.allowContributedOpeners : undefined;\n            for (const opener of this._externalOpeners) {\n                const didOpen = await opener.openExternal(href, {\n                    sourceUri: uri,\n                    preferredOpenerId,\n                }, CancellationToken.None);\n                if (didOpen) {\n                    return true;\n                }\n            }\n        }\n        return this._defaultExternalOpener.openExternal(href, { sourceUri: uri }, CancellationToken.None);\n    }\n    dispose() {\n        this._validators.clear();\n    }\n};\nOpenerService = __decorate([\n    __param(0, ICodeEditorService),\n    __param(1, ICommandService)\n], OpenerService);\nexport { OpenerService };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getAllMethodNames } from '../../../base/common/objects.js';\nimport { EditorWorkerClient } from './editorWorkerService.js';\n/**\n * Create a new web worker that has model syncing capabilities built in.\n * Specify an AMD module to load that will `create` an object that will be proxied.\n */\nexport function createWebWorker(modelService, languageConfigurationService, opts) {\n    return new MonacoWebWorkerImpl(modelService, languageConfigurationService, opts);\n}\nclass MonacoWebWorkerImpl extends EditorWorkerClient {\n    constructor(modelService, languageConfigurationService, opts) {\n        super(modelService, opts.keepIdleModels || false, opts.label, languageConfigurationService);\n        this._foreignModuleId = opts.moduleId;\n        this._foreignModuleCreateData = opts.createData || null;\n        this._foreignModuleHost = opts.host || null;\n        this._foreignProxy = null;\n    }\n    // foreign host request\n    fhr(method, args) {\n        if (!this._foreignModuleHost || typeof this._foreignModuleHost[method] !== 'function') {\n            return Promise.reject(new Error('Missing method ' + method + ' or missing main thread foreign host.'));\n        }\n        try {\n            return Promise.resolve(this._foreignModuleHost[method].apply(this._foreignModuleHost, args));\n        }\n        catch (e) {\n            return Promise.reject(e);\n        }\n    }\n    _getForeignProxy() {\n        if (!this._foreignProxy) {\n            this._foreignProxy = this._getProxy().then((proxy) => {\n                const foreignHostMethods = this._foreignModuleHost ? getAllMethodNames(this._foreignModuleHost) : [];\n                return proxy.loadForeignModule(this._foreignModuleId, this._foreignModuleCreateData, foreignHostMethods).then((foreignMethods) => {\n                    this._foreignModuleCreateData = null;\n                    const proxyMethodRequest = (method, args) => {\n                        return proxy.fmr(method, args);\n                    };\n                    const createProxyMethod = (method, proxyMethodRequest) => {\n                        return function () {\n                            const args = Array.prototype.slice.call(arguments, 0);\n                            return proxyMethodRequest(method, args);\n                        };\n                    };\n                    const foreignProxy = {};\n                    for (const foreignMethod of foreignMethods) {\n                        foreignProxy[foreignMethod] = createProxyMethod(foreignMethod, proxyMethodRequest);\n                    }\n                    return foreignProxy;\n                });\n            });\n        }\n        return this._foreignProxy;\n    }\n    getProxy() {\n        return this._getForeignProxy();\n    }\n    withSyncedResources(resources) {\n        return this._withSyncedResources(resources).then(_ => this.getProxy());\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class StableEditorScrollState {\n    static capture(editor) {\n        if (editor.getScrollTop() === 0 || editor.hasPendingScrollAnimation()) {\n            // Never mess with the scroll top if the editor is at the top of the file or if there is a pending scroll animation\n            return new StableEditorScrollState(editor.getScrollTop(), editor.getContentHeight(), null, 0, null);\n        }\n        let visiblePosition = null;\n        let visiblePositionScrollDelta = 0;\n        const visibleRanges = editor.getVisibleRanges();\n        if (visibleRanges.length > 0) {\n            visiblePosition = visibleRanges[0].getStartPosition();\n            const visiblePositionScrollTop = editor.getTopForPosition(visiblePosition.lineNumber, visiblePosition.column);\n            visiblePositionScrollDelta = editor.getScrollTop() - visiblePositionScrollTop;\n        }\n        return new StableEditorScrollState(editor.getScrollTop(), editor.getContentHeight(), visiblePosition, visiblePositionScrollDelta, editor.getPosition());\n    }\n    constructor(_initialScrollTop, _initialContentHeight, _visiblePosition, _visiblePositionScrollDelta, _cursorPosition) {\n        this._initialScrollTop = _initialScrollTop;\n        this._initialContentHeight = _initialContentHeight;\n        this._visiblePosition = _visiblePosition;\n        this._visiblePositionScrollDelta = _visiblePositionScrollDelta;\n        this._cursorPosition = _cursorPosition;\n    }\n    restore(editor) {\n        if (this._initialContentHeight === editor.getContentHeight() && this._initialScrollTop === editor.getScrollTop()) {\n            // The editor's content height and scroll top haven't changed, so we don't need to do anything\n            return;\n        }\n        if (this._visiblePosition) {\n            const visiblePositionScrollTop = editor.getTopForPosition(this._visiblePosition.lineNumber, this._visiblePosition.column);\n            editor.setScrollTop(visiblePositionScrollTop + this._visiblePositionScrollDelta);\n        }\n    }\n    restoreRelativeVerticalPositionOfCursor(editor) {\n        if (this._initialContentHeight === editor.getContentHeight() && this._initialScrollTop === editor.getScrollTop()) {\n            // The editor's content height and scroll top haven't changed, so we don't need to do anything\n            return;\n        }\n        const currentCursorPosition = editor.getPosition();\n        if (!this._cursorPosition || !currentCursorPosition) {\n            return;\n        }\n        const offset = editor.getTopForLineNumber(currentCursorPosition.lineNumber) - editor.getTopForLineNumber(this._cursorPosition.lineNumber);\n        editor.setScrollTop(editor.getScrollTop() + offset);\n    }\n}\n"],"names":["toVSDataTransfer","dataTransfer","vsDataTransfer","VSDataTransfer","item","items","type","kind","asStringValue","Promise","resolve","getAsString","append","createStringDataTransferItem","file","getAsFile","createFileDataTransferItemFromFile","uri","path","URI","parse","undefined","createFileDataTransferItem","name","async","Uint8Array","arrayBuffer","INTERNAL_DND_MIME_TYPES","Object","freeze","CodeDataTransfers","EDITORS","FILES","DataTransfers","RESOURCES","INTERNAL_URI_LIST","toExternalVSDataTransfer","sourceDataTransfer","overwriteUriList","arguments","length","uriList","get","replace","Mimes","has","editorData","push","toString","_a","UriList","create","internal","delete","isCodeEditor","thing","getEditorType","editorCommon","ICodeEditor","isDiffEditor","IDiffEditor","getCodeEditor","getModifiedEditor","onDidChangeActiveEditor","isCompositeEditor","activeCodeEditor","PageCoordinates","constructor","x","y","this","_pageCoordinatesBrand","toClientCoordinates","targetWindow","ClientCoordinates","scrollX","scrollY","clientX","clientY","_clientCoordinatesBrand","toPageCoordinates","EditorPagePosition","width","height","_editorPagePositionBrand","CoordinatesRelativeToEditor","_positionRelativeToEditorBrand","createEditorPagePosition","editorViewDomNode","editorPos","dom","left","top","createCoordinatesRelativeToEditor","editorPagePosition","pos","scaleX","offsetWidth","scaleY","offsetHeight","relativeX","relativeY","EditorMouseEvent","StandardMouseEvent","e","isFromPointerCapture","super","_editorMouseEventBrand","posx","posy","relativePos","EditorMouseEventFactory","_editorViewDomNode","_create","onContextMenu","target","callback","onMouseUp","onMouseDown","MOUSE_DOWN","onPointerDown","POINTER_DOWN","pointerId","onMouseLeave","MOUSE_LEAVE","onMouseMove","EditorPointerEventFactory","onPointerUp","onPointerLeave","POINTER_LEAVE","onPointerMove","GlobalEditorPointerMoveMonitor","Disposable","_globalPointerMoveMonitor","_register","GlobalPointerMoveMonitor","_keydownListener","startMonitoring","initialElement","initialButtons","pointerMoveCallback","onStopCallback","ownerDocument","toKeyCodeChord","isModifierKey","stopMonitoring","browserEvent","dispose","DynamicCssRules","_editor","_instanceId","_idPool","_counter","_rules","Map","_garbageCollectionScheduler","RunOnceScheduler","garbageCollect","createClassNameRef","options","rule","getOrCreateRule","increaseRefCount","className","decreaseRefCount","schedule","properties","key","computeUniqueKey","existingRule","counter","RefCountedCssRule","concat","getContainerDomNode","set","JSON","stringify","values","hasReferences","_containerElement","_referenceCount","_styleElementDisposables","DisposableStore","_styleElement","textContent","getCssText","str","prop","value","cssValue","asCssVariable","id","cssPropName","camelToDashes","_ref","first","toLowerCase","_ref2","letter","EditorExtensionsRegistry","Command","opts","precondition","_kbOpts","kbOpts","_menuOpts","menuOpts","metadata","register","Array","isArray","forEach","_registerMenuItem","kbOptsArr","kbWhen","kbExpr","ContextKeyExpr","and","desc","weight","args","when","primary","secondary","win","linux","mac","KeybindingsRegistry","registerKeybindingRule","CommandsRegistry","registerCommand","handler","accessor","runCommand","MenuRegistry","appendMenuItem","menuId","group","command","title","icon","order","MultiCommand","_implementations","addImplementation","priority","implementation","sort","a","b","i","splice","logService","ILogService","contextKeyService","IContextKeyService","trace","impl","context","getContext","getActiveElement","evaluate","result","ProxyCommand","EditorCommand","bindToContribution","controllerGetter","_callback","runEditorCommand","editor","controller","runner","codeEditorService","ICodeEditorService","getFocusedCodeEditor","getActiveCodeEditor","invokeWithinContext","editorAccessor","contextMatchesRules","EditorAction","convertOptions","withDefaults","MenuId","EditorContext","label","contextMenuOpts","map","alias","reportTelemetry","run","ITelemetryService","publicLog2","MultiEditorAction","EditorAction2","Action2","_len","_key","_b","kbService","debug","serialize","registerModelAndPositionCommand","_len2","_key2","instaService","IInstantiationService","resource","position","assertType","isUri","Position","isIPosition","model","IModelService","getModel","editorPosition","lift","invokeFunction","slice","ITextModelService","createModelReference","then","reference","reject","object","textEditorModel","err","finally","registerEditorCommand","editorCommand","EditorContributionRegistry","INSTANCE","registerEditorAction","ctor","action","registerMultiEditorAction","registerInstantiatedEditorAction","editorAction","registerEditorContribution","instantiation","getEditorCommand","commandId","getEditorActions","getEditorContributions","getSomeEditorContributions","ids","filter","c","indexOf","getDiffEditorContributions","editorContributions","diffEditorContributions","editorActions","editorCommands","Registry","add","UndoCommand","MenubarEditMenu","nls","comment","CommandPalette","RedoCommand","SelectAllCommand","MenubarSelectionMenu","obsCodeEditor","ObservableCodeEditor","_map","d","onDidDispose","observableFromEvent","onDidChangeModel","__decorate","decorators","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","AbstractCodeEditorService","_themeService","_onWillCreateCodeEditor","Emitter","_onCodeEditorAdd","onCodeEditorAdd","event","_onCodeEditorRemove","onCodeEditorRemove","_onWillCreateDiffEditor","_onDiffEditorAdd","onDiffEditorAdd","_onDiffEditorRemove","onDiffEditorRemove","_decorationOptionProviders","_codeEditorOpenHandlers","LinkedList","_modelProperties","_codeEditors","_diffEditors","_globalStyleSheet","willCreateCodeEditor","fire","addCodeEditor","getId","removeCodeEditor","listCodeEditors","keys","willCreateDiffEditor","addDiffEditor","listDiffEditors","editorWithWidgetFocus","editors","hasTextFocus","hasWidgetFocus","removeDecorationType","provider","refCount","ed","removeDecorationsByType","setModelProperty","key1","dest","getModelProperty","openCodeEditor","input","source","sideBySide","candidate","registerCodeEditorOpenHandler","rm","unshift","toDisposable","IThemeService","IBulkEditService","createDecorator","ResourceEdit","convert","edit","edits","ResourceTextEdit","is","ResourceFileEdit","Error","isObject","textEdit","versionId","Boolean","newResource","oldResource","STOP_WORKER_DELTA_TIME_MS","canSyncModel","modelService","isTooLargeForSyncing","EditorWorkerService","configurationService","languageConfigurationService","languageFeaturesService","_modelService","_workerManager","WorkerManager","_logService","linkProvider","language","hasAccessToAllModels","provideLinks","token","withWorker","client","computeLinks","links","completionProvider","WordBasedCompletionItemProvider","canComputeUnicodeHighlights","computedUnicodeHighlights","range","computeDiff","original","modified","algorithm","identical","quitEarly","changes","toLineRangeMappings","moves","m","MovedText","LineRangeMapping","LineRange","DetailedLineRangeMapping","RangeMapping","Range","computeMoreMinimalEdits","pretty","isNonEmptyArray","sw","StopWatch","elapsed","race","timeout","canNavigateValueSet","navigateValueSet","up","canComputeWordRanges","computeWordRanges","findSectionHeaders","ITextResourceConfigurationService","ILanguageConfigurationService","ILanguageFeaturesService","workerManager","_debugDisplayName","_configurationService","provideCompletionItems","config","getValue","wordBasedSuggestions","models","getModels","getLanguageId","wordDefRegExp","getLanguageConfiguration","getWordDefinition","word","getWordAtPosition","lineNumber","startColumn","endColumn","fromPositions","insert","setEndPosition","column","data","textualSuggest","duration","suggestions","words","insertText","_editorWorkerClient","_lastWorkerUsedTime","Date","getTime","WindowIntervalTimer","cancelAndSet","_checkStopIdleWorker","Math","round","mainWindow","onModelRemoved","_","_checkStopEmptyWorker","EditorWorkerClient","EditorModelManager","proxy","keepIdleModels","_syncedModels","_syncedModelsLastUsedTime","_proxy","timer","IntervalTimer","_checkStopModelSync","STOP_SYNC_MODEL_DELTA_TIME_MS","modelUrl","ensureSyncedResources","resources","forceLargeModels","resourceStr","_beginModelSync","currentTime","toRemove","_stopModelSync","acceptNewModel","url","lines","getLinesContent","EOL","getEOL","getVersionId","toDispose","onDidChangeContent","acceptModelChanged","onWillDispose","acceptRemovedModel","SynchronousWorkerClient","instance","_instance","_proxyObj","getProxyObject","EditorWorkerHost","workerClient","_workerClient","fhr","method","_disposed","_keepIdleModels","_workerFactory","DefaultWorkerFactory","_worker","_modelManager","_getOrCreateWorker","SimpleWorkerClient","logOnceWebWorkerWarning","EditorSimpleWorker","_getProxy","_getOrCreateModelManager","_withSyncedResources","canceled","computeUnicodeHighlights","computeDefaultDocumentColors","leadingWord","wordDef","wordDefFlags","flags","$","HoverWidget","Widget","_targetWindow","_target","targetElements","_targetDocumentElement","document","documentElement","isDisposed","_isDisposed","isMouseIn","_lockMouseTracker","domNode","_hover","containerDomNode","onDispose","_onDispose","onRequestLayout","_onRequestLayout","anchor","_hoverPosition","_x","_y","isLocked","_isLocked","_hoverContainer","classList","toggle","_keybindingService","_openerService","_instantiationService","_accessibilityService","_c","_d","_e","_f","_g","_h","_messageListeners","_forcePosition","_enableFocusTraps","_addedFocusTrap","_linkHandler","linkHandler","openLinkFromMarkdown","isMarkdownString","content","isTrusted","ElementHoverTarget","_hoverPointer","appearance","showPointer","BaseHoverWidget","compact","skipFadeInAnimation","additionalClasses","forcePosition","trapFocus","hoverPosition","onmousedown","stopPropagation","onkeydown","equals","rowElement","contentsElement","style","whiteSpace","HTMLElement","appendChild","markdown","mdRenderer","createInstance","MarkdownRenderer","codeBlockFontFamily","fontFamily","EDITOR_FONT_DEFAULTS","element","render","actionHandler","disposables","asyncRenderCallback","layout","contentsDomNode","actions","statusBarElement","actionsElement","keybinding","lookupKeybinding","keybindingLabel","getLabel","HoverAction","iconClass","hideOnHover","persistence","includes","showHoverHint","infoElement","localize","isMacintosh","mouseTrackerTargets","mouseTracker","CompositeMouseTracker","onMouseOut","mouseTracker2Targets","addFocusTrap","firstContainerFocusElement","lastContainerFocusElement","findLastFocusableChild","beforeContainerFocusElement","afterContainerFocusElement","tabIndex","focus","preventDefault","root","hasChildNodes","childNodes","node","nodeType","ELEMENT_NODE","parsedNode","recursivelyFoundElement","container","accessibleViewHint","contains","activeElement","getHoverAccessibleViewHint","isScreenReaderOptimized","getAriaLabel","status","remove","maxHeight","targetBounds","zoom","boundingRect","getBoundingClientRect","bottom","right","getZoomAccountedBoundingClientRect","targetRect","center","adjustHorizontalHoverPosition","adjustVerticalHoverPosition","adjustHoverMaxHeight","padding","margin","paddingLeft","marginLeft","paddingRight","marginRight","paddingTop","marginTop","paddingBottom","marginBottom","computeXCordinate","computeYCordinate","setHoverPointerPosition","onContentsChanged","hoverWidth","clientWidth","max","clientLeft","clientHeight","innerHeight","hoverPointerOffset","maxWidth","min","scrollHeight","extraRightPadding","scrollbar","verticalScrollbarSize","hoverHeight","pointerLeftPosition","pointerX","IKeybindingService","IConfigurationService","IOpenerService","IAccessibilityService","_onMouseOut","_isMouseIn","_elements","n","onmouseover","_onTargetMouseOver","onmouseleave","_onTargetMouseLeave","_clearEvaluateMouseStateTimeout","_evaluateMouseState","_mouseTimeout","setTimeout","_fireIfMouseOutside","clearTimeout","_element","UpdatableHoverWidget","hoverDelegate","fadeInAnimation","update","_cancellationTokenSource","resolvedContent","isString","isFunction","_hoverWidget","show","CancellationTokenSource","markdownNotSupportedFallback","isCancellationRequested","oldHoverWidget","hasContent","hoverOptions","placement","showHover","HoverService","contextMenuService","_layoutService","onDidShowContextMenu","hideHover","_contextViewHandler","ContextViewHandler","skipLastFocusedUpdate","getHoverOptionsIdentity","_currentHoverOptions","_currentHover","sticky","_lastHoverOptions","_lastFocusedElementBeforeOpen","hoverDisposables","hover","isAncestorOfActiveElement","targetElement","getContainer","getWindow","showContextView","HoverContextViewDelegate","addDisposableListener","EventType","isAncestor","doHideHover","CLICK","focusedElement","focusedElementDocument","KEY_DOWN","_keyDown","hideOnKeyDown","KEY_UP","_keyUp","observer","IntersectionObserver","_intersectionChange","threshold","firstTargetElement","observe","disconnect","hideContextView","entries","isIntersecting","showAndFocusLastHover","StandardKeyboardEvent","resolveKeyboardEvent","getSingleModifierDispatchChords","some","softDispatch","setupUpdatableHover","htmlElement","hoverPreparation","hoverWidget","setAttribute","console","warn","disposeWidget","disposePreparation","hadHover","onDidHideHover","call","triggerShowHover","delay","TimeoutTimer","isMouseDown","mouseDownEmitter","mouseUpEmitter","MOUSE_UP","mouseLeaveEmitter","fromElement","mouseOverDomEmitter","MOUSE_OVER","getHoverTargetElement","MOUSE_MOVE","onFocus","BLUR","onBlur","focusDomEmitter","tagName","FOCUS","hide","newContent","IContextMenuService","ILayoutService","anchorPosition","_focus","layer","getAnchor","stopElement","body","hasAttribute","parentElement","registerSingleton","IHoverService","registerThemingParticipant","theme","collector","hoverBorder","getColor","editorHoverBorder","addRule","transparent","MarkerDecorationsContribution","_markerDecorationsService","ID","IMarkerDecorationsService","CommandOpener","_commandService","open","matchesScheme","Schemas","allowCommands","decodeURIComponent","query","executeCommand","ICommandService","EditorOpener","_editorService","selection","extractSelection","scheme","normalizePath","fromUserGesture","EditorOpenSource","USER","API","editorOptions","openToSide","OpenerService","editorService","commandService","_openers","_validators","_resolvers","_resolvedUriTargets","ResourceMap","with","fragment","_externalOpeners","_defaultExternalOpener","openExternal","matchesSomeScheme","href","http","https","location","mailto","vsls","_doOpenExternal","registerOpener","opener","targetURI","validationTarget","validator","shouldOpen","resolveExternalUri","resolver","resolved","externalUri","encodeURI","allowContributedOpeners","preferredOpenerId","sourceUri","CancellationToken","None","clear","createWebWorker","MonacoWebWorkerImpl","_foreignModuleId","moduleId","_foreignModuleCreateData","createData","_foreignModuleHost","host","_foreignProxy","apply","_getForeignProxy","foreignHostMethods","getAllMethodNames","loadForeignModule","foreignMethods","proxyMethodRequest","fmr","createProxyMethod","prototype","foreignProxy","foreignMethod","getProxy","withSyncedResources","StableEditorScrollState","capture","getScrollTop","hasPendingScrollAnimation","getContentHeight","visiblePosition","visiblePositionScrollDelta","visibleRanges","getVisibleRanges","getStartPosition","visiblePositionScrollTop","getTopForPosition","getPosition","_initialScrollTop","_initialContentHeight","_visiblePosition","_visiblePositionScrollDelta","_cursorPosition","restore","setScrollTop","restoreRelativeVerticalPositionOfCursor","currentCursorPosition","offset","getTopForLineNumber"],"sourceRoot":""}