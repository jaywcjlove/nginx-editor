"use strict";(self.webpackChunkmonaco_editor_nginx=self.webpackChunkmonaco_editor_nginx||[]).push([[104],{50148:(e,t,n)=>{n.r(t),n.d(t,{FoldingController:()=>G,RangesLimitReporter:()=>z});var i=n(78112),s=n(53069),o=n(74821),r=n(78605),l=n(60704),d=n(24606),a=n(14945),g=n(85588),h=n(444),u=n(20484),c=n(83011),f=n(41236),p=n(81821),m=n(44783),L=n(4640),_=n(38499),b=n(65080);class C{get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}constructor(e){this._updateEventEmitter=new L.vl,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange((e=>this.updateHiddenRanges())),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some((e=>e.range.endLineNumber!==e.range.startLineNumber||0!==(0,b.W)(e.text)[0])))}updateHiddenRanges(){let e=!1;const t=[];let n=0,i=0,s=Number.MAX_VALUE,o=-1;const r=this._foldingModel.regions;for(;n<r.length;n++){if(!r.isCollapsed(n))continue;const l=r.getStartLineNumber(n)+1,d=r.getEndLineNumber(n);s<=l&&d<=o||(!e&&i<this._hiddenRanges.length&&this._hiddenRanges[i].startLineNumber===l&&this._hiddenRanges[i].endLineNumber===d?(t.push(this._hiddenRanges[i]),i++):(e=!0,t.push(new _.Q(l,1,d,1))),s=l,o=d)}(this._hasLineChanges||e||i<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return null!==N(this._hiddenRanges,e)}adjustSelections(e){let t=!1;const n=this._foldingModel.textModel;let i=null;const s=e=>(i&&function(e,t){return e>=t.startLineNumber&&e<=t.endLineNumber}(e,i)||(i=N(this._hiddenRanges,e)),i?i.startLineNumber-1:null);for(let o=0,r=e.length;o<r;o++){let i=e[o];const r=s(i.startLineNumber);r&&(i=i.setStartPosition(r,n.getLineMaxColumn(r)),t=!0);const l=s(i.endLineNumber);l&&(i=i.setEndPosition(l,n.getLineMaxColumn(l)),t=!0),e[o]=i}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function N(e,t){const n=(0,m.hw)(e,(e=>t<e.startLineNumber))-1;return n>=0&&e[n].endLineNumber>=t?e[n]:null}var R,v=n(79817),I=n(17483),A=n(26376),x=n(56071),k=n(51680),D=n(46546),E=n(42861),y=n(41154),S=n(40331),M=n(58012),F=n(22137),O=n(56002),w=n(25132),P=n(22311),T=function(e,t,n,i){var s,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(o<3?s(r):o>3?s(t,n,r):s(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},U=function(e,t){return function(n,i){t(n,i,e)}},H=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{d(i.next(e))}catch(t){o(t)}}function l(e){try{d(i.throw(e))}catch(t){o(t)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}d((i=i.apply(e,t||[])).next())}))};const V=new A.N1("foldingEnabled",!1);let G=R=class extends l.jG{static get(e){return e.getContribution(R.ID)}static getFoldingRangeProviders(e,t){var n,i;const s=e.foldingRangeProvider.ordered(t);return null!==(i=null===(n=R._foldingRangeSelector)||void 0===n?void 0:n.call(R,s,t))&&void 0!==i?i:s}constructor(e,t,n,i,s,o){super(),this.contextKeyService=t,this.languageConfigurationService=n,this.languageFeaturesService=o,this.localToDispose=this._register(new l.Cm),this.editor=e,this._foldingLimitReporter=new z(e);const r=this.editor.getOptions();this._isEnabled=r.get(43),this._useFoldingProviders="indentation"!==r.get(44),this._unfoldOnClickAfterEndOfLine=r.get(48),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=r.get(46),this.updateDebounceInfo=s.for(o.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new x.rv(e),this.foldingDecorationProvider.showFoldingControls=r.get(109),this.foldingDecorationProvider.showFoldingHighlights=r.get(45),this.foldingEnabled=V.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel((()=>this.onModelChanged()))),this._register(this.editor.onDidChangeConfiguration((e=>{if(e.hasChanged(43)&&(this._isEnabled=this.editor.getOptions().get(43),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),e.hasChanged(47)&&this.onModelChanged(),e.hasChanged(109)||e.hasChanged(45)){const e=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=e.get(109),this.foldingDecorationProvider.showFoldingHighlights=e.get(45),this.triggerFoldingModelChanged()}e.hasChanged(44)&&(this._useFoldingProviders="indentation"!==this.editor.getOptions().get(44),this.onFoldingStrategyChanged()),e.hasChanged(48)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(48)),e.hasChanged(46)&&(this._foldingImportsByDefault=this.editor.getOptions().get(46))}))),this.onModelChanged()}saveViewState(){const e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){const t=this.foldingModel.getMemento(),n=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:n,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){const t=this.editor.getModel();if(t&&this._isEnabled&&!t.isTooLargeForTokenization()&&this.hiddenRangeModel&&e&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions&&e.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(e.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();const e=this.editor.getModel();this._isEnabled&&e&&!e.isTooLargeForTokenization()&&(this._currentModelHasFoldedImports=!1,this.foldingModel=new p.pN(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new C(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange((e=>this.onHiddenRangesChanges(e)))),this.updateScheduler=new i.ve(this.updateDebounceInfo.get(e)),this.cursorChangedScheduler=new i.uC((()=>this.revealCursor()),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange((()=>this.onFoldingStrategyChanged()))),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration((()=>this.onFoldingStrategyChanged()))),this.localToDispose.add(this.editor.onDidChangeModelContent((e=>this.onDidChangeModelContent(e)))),this.localToDispose.add(this.editor.onDidChangeCursorPosition((()=>this.onCursorPositionChanged()))),this.localToDispose.add(this.editor.onMouseDown((e=>this.onEditorMouseDown(e)))),this.localToDispose.add(this.editor.onMouseUp((e=>this.onEditorMouseUp(e)))),this.localToDispose.add({dispose:()=>{var e,t;this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),null===(e=this.updateScheduler)||void 0===e||e.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,null===(t=this.rangeProvider)||void 0===t||t.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){var e;null===(e=this.rangeProvider)||void 0===e||e.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;const t=new v.hW(e,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=t,this._useFoldingProviders&&this.foldingModel){const n=R.getFoldingRangeProviders(this.languageFeaturesService,e);n.length>0&&(this.rangeProvider=new D.M(e,n,(()=>this.triggerFoldingModelChanged()),this._foldingLimitReporter,t))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;null===(t=this.hiddenRangeModel)||void 0===t||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger((()=>{const e=this.foldingModel;if(!e)return null;const t=new S.W,n=this.getRangeProvider(e.textModel),s=this.foldingRegionPromise=(0,i.SS)((e=>n.compute(e)));return s.then((n=>{if(n&&s===this.foldingRegionPromise){let i;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const e=n.setCollapsedAllOfType(c.lO.Imports.value,!0);e&&(i=g.D.capture(this.editor),this._currentModelHasFoldedImports=e)}const s=this.editor.getSelections(),o=s?s.map((e=>e.startLineNumber)):[];e.update(n,o),null===i||void 0===i||i.restore(this.editor);const r=this.updateDebounceInfo.update(e.textModel,t.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=r)}return e}))})).then(void 0,(e=>((0,o.dz)(e),null))))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){const e=this.editor.getSelections();e&&this.hiddenRangeModel.adjustSelections(e)&&this.editor.setSelections(e)}this.editor.setHiddenAreas(e,this)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then((e=>{if(e){const t=this.editor.getSelections();if(t&&t.length>0){const n=[];for(const i of t){const t=i.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(t)&&n.push(...e.getAllRegionsAtLine(t,(e=>e.isCollapsed&&t>e.startLineNumber)))}n.length&&(e.toggleCollapseState(n),this.reveal(t[0].getPosition()))}}})).then(void 0,o.dz)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range)return;if(!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let n=!1;switch(e.target.type){case 4:{const t=e.target.detail,i=e.target.element.offsetLeft;if(t.offsetX-i<4)return;n=!0;break}case 7:if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()){if(!e.target.detail.isAfterLines)break}return;case 6:if(this.hiddenRangeModel.hasRanges()){const e=this.editor.getModel();if(e&&t.startColumn===e.getLineMaxColumn(t.startLineNumber))break}return;default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:n}}onEditorMouseUp(e){const t=this.foldingModel;if(!t||!this.mouseDownInfo||!e.target)return;const n=this.mouseDownInfo.lineNumber,i=this.mouseDownInfo.iconClicked,s=e.target.range;if(!s||s.startLineNumber!==n)return;if(i){if(4!==e.target.type)return}else{const e=this.editor.getModel();if(!e||s.startColumn!==e.getLineMaxColumn(n))return}const o=t.getRegionAtLine(n);if(o&&o.startLineNumber===n){const s=o.isCollapsed;if(i||s){let i=[];if(e.event.altKey){const e=e=>!e.containedBy(o)&&!o.containedBy(e),n=t.getRegionsInside(null,e);for(const t of n)t.isCollapsed&&i.push(t);0===i.length&&(i=n)}else{const n=e.event.middleButton||e.event.shiftKey;if(n)for(const e of t.getRegionsInside(o))e.isCollapsed===s&&i.push(e);!s&&n&&0!==i.length||i.push(o)}t.toggleCollapseState(i),this.reveal({lineNumber:n,column:1})}}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};G.ID="editor.contrib.folding",G=R=T([U(1,A.fN),U(2,f.JZ),U(3,E.Ot),U(4,y.U),U(5,M.u)],G);class z{constructor(e){this.editor=e,this._onDidChange=new L.vl,this._computed=0,this._limited=!1}get limit(){return this.editor.getOptions().get(47)}update(e,t){e===this._computed&&t===this._limited||(this._computed=e,this._limited=t,this._onDidChange.fire())}}class B extends h.ks{runEditorCommand(e,t,n){const i=e.get(f.JZ),s=G.get(t);if(!s)return;const o=s.getFoldingModel();return o?(this.reportTelemetry(e,t),o.then((e=>{if(e){this.invoke(s,e,t,n,i);const o=t.getSelection();o&&s.reveal(o.getStartPosition())}}))):void 0}getSelectedLines(e){const t=e.getSelections();return t?t.map((e=>e.startLineNumber)):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map((e=>e+1)):this.getSelectedLines(t)}run(e,t){}}function X(e){if(!a.b0(e)){if(!a.Gv(e))return!1;const t=e;if(!a.b0(t.levels)&&!a.Et(t.levels))return!1;if(!a.b0(t.direction)&&!a.Kg(t.direction))return!1;if(!a.b0(t.selectionLines)&&(!Array.isArray(t.selectionLines)||!t.selectionLines.every(a.Et)))return!1}return!0}class W extends B{getFoldingLevel(){return parseInt(this.id.substr(W.ID_PREFIX.length))}invoke(e,t,n){(0,p.sO)(t,this.getFoldingLevel(),!0,this.getSelectedLines(n))}}W.ID_PREFIX="editor.foldLevel",W.ID=e=>W.ID_PREFIX+e;(0,h.HW)(G.ID,G,0),(0,h.Fl)(class extends B{constructor(){super({id:"editor.unfold",label:I.kg("unfoldAction.label","Unfold"),alias:"Unfold",precondition:V,kbOpts:{kbExpr:u.R.editorTextFocus,primary:3166,mac:{primary:2654},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\n\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t",constraint:X,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,i){const s=i&&i.levels||1,o=this.getLineNumbers(i,n);i&&"up"===i.direction?(0,p.dN)(t,!1,s,o):(0,p.uV)(t,!1,s,o)}}),(0,h.Fl)(class extends B{constructor(){super({id:"editor.unfoldRecursively",label:I.kg("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:V,kbOpts:{kbExpr:u.R.editorTextFocus,primary:(0,r.m5)(2089,2142),weight:100}})}invoke(e,t,n,i){(0,p.uV)(t,!1,Number.MAX_VALUE,this.getSelectedLines(n))}}),(0,h.Fl)(class extends B{constructor(){super({id:"editor.fold",label:I.kg("foldAction.label","Fold"),alias:"Fold",precondition:V,kbOpts:{kbExpr:u.R.editorTextFocus,primary:3164,mac:{primary:2652},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold.\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\n\t\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t\tIf no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.\n\t\t\t\t\t\t",constraint:X,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,i){const s=this.getLineNumbers(i,n),o=i&&i.levels,r=i&&i.direction;"number"!==typeof o&&"string"!==typeof r?(0,p.W8)(t,!0,s):"up"===r?(0,p.dN)(t,!0,o||1,s):(0,p.uV)(t,!0,o||1,s)}}),(0,h.Fl)(class extends B{constructor(){super({id:"editor.foldRecursively",label:I.kg("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:V,kbOpts:{kbExpr:u.R.editorTextFocus,primary:(0,r.m5)(2089,2140),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);(0,p.uV)(t,!0,Number.MAX_VALUE,i)}}),(0,h.Fl)(class extends B{constructor(){super({id:"editor.foldAll",label:I.kg("foldAllAction.label","Fold All"),alias:"Fold All",precondition:V,kbOpts:{kbExpr:u.R.editorTextFocus,primary:(0,r.m5)(2089,2069),weight:100}})}invoke(e,t,n){(0,p.uV)(t,!0)}}),(0,h.Fl)(class extends B{constructor(){super({id:"editor.unfoldAll",label:I.kg("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:V,kbOpts:{kbExpr:u.R.editorTextFocus,primary:(0,r.m5)(2089,2088),weight:100}})}invoke(e,t,n){(0,p.uV)(t,!1)}}),(0,h.Fl)(class extends B{constructor(){super({id:"editor.foldAllBlockComments",label:I.kg("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:V,kbOpts:{kbExpr:u.R.editorTextFocus,primary:(0,r.m5)(2089,2138),weight:100}})}invoke(e,t,n,i,s){if(t.regions.hasTypes())(0,p.cL)(t,c.lO.Comment.value,!0);else{const e=n.getModel();if(!e)return;const i=s.getLanguageConfiguration(e.getLanguageId()).comments;if(i&&i.blockCommentStartToken){const e=new RegExp("^\\s*"+(0,d.bm)(i.blockCommentStartToken));(0,p.AI)(t,e,!0)}}}}),(0,h.Fl)(class extends B{constructor(){super({id:"editor.foldAllMarkerRegions",label:I.kg("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:V,kbOpts:{kbExpr:u.R.editorTextFocus,primary:(0,r.m5)(2089,2077),weight:100}})}invoke(e,t,n,i,s){if(t.regions.hasTypes())(0,p.cL)(t,c.lO.Region.value,!0);else{const e=n.getModel();if(!e)return;const i=s.getLanguageConfiguration(e.getLanguageId()).foldingRules;if(i&&i.markers&&i.markers.start){const e=new RegExp(i.markers.start);(0,p.AI)(t,e,!0)}}}}),(0,h.Fl)(class extends B{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:I.kg("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:V,kbOpts:{kbExpr:u.R.editorTextFocus,primary:(0,r.m5)(2089,2078),weight:100}})}invoke(e,t,n,i,s){if(t.regions.hasTypes())(0,p.cL)(t,c.lO.Region.value,!1);else{const e=n.getModel();if(!e)return;const i=s.getLanguageConfiguration(e.getLanguageId()).foldingRules;if(i&&i.markers&&i.markers.start){const e=new RegExp(i.markers.start);(0,p.AI)(t,e,!1)}}}}),(0,h.Fl)(class extends B{constructor(){super({id:"editor.foldAllExcept",label:I.kg("foldAllExcept.label","Fold All Except Selected"),alias:"Fold All Except Selected",precondition:V,kbOpts:{kbExpr:u.R.editorTextFocus,primary:(0,r.m5)(2089,2136),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);(0,p.GR)(t,!0,i)}}),(0,h.Fl)(class extends B{constructor(){super({id:"editor.unfoldAllExcept",label:I.kg("unfoldAllExcept.label","Unfold All Except Selected"),alias:"Unfold All Except Selected",precondition:V,kbOpts:{kbExpr:u.R.editorTextFocus,primary:(0,r.m5)(2089,2134),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);(0,p.GR)(t,!1,i)}}),(0,h.Fl)(class extends B{constructor(){super({id:"editor.toggleFold",label:I.kg("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:V,kbOpts:{kbExpr:u.R.editorTextFocus,primary:(0,r.m5)(2089,2090),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);(0,p.bC)(t,1,i)}}),(0,h.Fl)(class extends B{constructor(){super({id:"editor.gotoParentFold",label:I.kg("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:V,kbOpts:{kbExpr:u.R.editorTextFocus,weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);if(i.length>0){const e=(0,p.kK)(i[0],t);null!==e&&n.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}),(0,h.Fl)(class extends B{constructor(){super({id:"editor.gotoPreviousFold",label:I.kg("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:V,kbOpts:{kbExpr:u.R.editorTextFocus,weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);if(i.length>0){const e=(0,p.JX)(i[0],t);null!==e&&n.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}),(0,h.Fl)(class extends B{constructor(){super({id:"editor.gotoNextFold",label:I.kg("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:V,kbOpts:{kbExpr:u.R.editorTextFocus,weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);if(i.length>0){const e=(0,p.pr)(i[0],t);null!==e&&n.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}),(0,h.Fl)(class extends B{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:I.kg("createManualFoldRange.label","Create Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:V,kbOpts:{kbExpr:u.R.editorTextFocus,primary:(0,r.m5)(2089,2135),weight:100}})}invoke(e,t,n){var i;const s=[],o=n.getSelections();if(o){for(const e of o){let t=e.endLineNumber;1===e.endColumn&&--t,t>e.startLineNumber&&(s.push({startLineNumber:e.startLineNumber,endLineNumber:t,type:void 0,isCollapsed:!0,source:1}),n.setSelection({startLineNumber:e.startLineNumber,startColumn:1,endLineNumber:e.startLineNumber,endColumn:1}))}if(s.length>0){s.sort(((e,t)=>e.startLineNumber-t.startLineNumber));const e=k.tz.sanitizeAndMerge(t.regions,s,null===(i=n.getModel())||void 0===i?void 0:i.getLineCount());t.updatePost(k.tz.fromFoldRanges(e))}}}}),(0,h.Fl)(class extends B{constructor(){super({id:"editor.removeManualFoldingRanges",label:I.kg("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:V,kbOpts:{kbExpr:u.R.editorTextFocus,primary:(0,r.m5)(2089,2137),weight:100}})}invoke(e,t,n){const i=n.getSelections();if(i){const n=[];for(const e of i){const{startLineNumber:t,endLineNumber:i}=e;n.push(i>=t?{startLineNumber:t,endLineNumber:i}:{endLineNumber:i,startLineNumber:t})}t.removeManualRanges(n),e.triggerFoldingModelChanged()}}});for(let j=1;j<=7;j++)(0,h.xX)(new W({id:W.ID(j),label:I.kg("foldLevelAction.label","Fold Level {0}",j),alias:"Fold Level ".concat(j),precondition:V,kbOpts:{kbExpr:u.R.editorTextFocus,primary:(0,r.m5)(2089,2048|21+j),weight:100}}));F.w.registerCommand("_executeFoldingRangeProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return H(this,void 0,void 0,(function*(){const[t]=n;if(!(t instanceof O.r))throw(0,o.Qg)();const i=e.get(M.u),r=e.get(w.S).getModel(t);if(!r)throw(0,o.Qg)();const l=e.get(P.pG);if(!l.getValue("editor.folding",{resource:t}))return[];const d=e.get(f.JZ),a=l.getValue("editor.foldingStrategy",{resource:t}),g={get limit(){return l.getValue("editor.foldingMaximumRegions",{resource:t})},update:(e,t)=>{}},h=new v.hW(r,d,g);let u=h;if("indentation"!==a){const e=G.getFoldingRangeProviders(i,r);e.length&&(u=new D.M(r,e,(()=>{}),g,h))}const p=yield u.compute(s.X.None),m=[];try{if(p)for(let e=0;e<p.length;e++){const t=p.getType(e);m.push({start:p.getStartLineNumber(e),end:p.getEndLineNumber(e),kind:t?c.lO.fromValue(t):void 0})}return m}finally{u.dispose()}}))}))},56071:(e,t,n)=>{n.d(t,{E0:()=>u,k0:()=>c,rv:()=>L});var i=n(49290),s=n(17913),o=n(98605),r=n(17483),l=n(2840),d=n(39024),a=n(84974),g=n(48367);const h=(0,l.x1A)("editor.foldBackground",{light:(0,l.JO0)(l.seu,.3),dark:(0,l.JO0)(l.seu,.3),hcDark:null,hcLight:null},(0,r.kg)("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0);(0,l.x1A)("editorGutter.foldingControlForeground",{dark:l.t4B,light:l.t4B,hcDark:l.t4B,hcLight:l.t4B},(0,r.kg)("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));const u=(0,d.pU)("folding-expanded",i.W.chevronDown,(0,r.kg)("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),c=(0,d.pU)("folding-collapsed",i.W.chevronRight,(0,r.kg)("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),f=(0,d.pU)("folding-manual-collapsed",c,(0,r.kg)("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),p=(0,d.pU)("folding-manual-expanded",u,(0,r.kg)("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin.")),m={color:(0,a.Yf)(h),position:s.R3.Inline};class L{constructor(e){this.editor=e,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(e,t,n){return t?L.HIDDEN_RANGE_DECORATION:"never"===this.showFoldingControls?e?this.showFoldingHighlights?L.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:L.NO_CONTROLS_COLLAPSED_RANGE_DECORATION:L.NO_CONTROLS_EXPANDED_RANGE_DECORATION:e?n?this.showFoldingHighlights?L.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:L.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?L.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:L.COLLAPSED_VISUAL_DECORATION:"mouseover"===this.showFoldingControls?n?L.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:L.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:n?L.MANUALLY_EXPANDED_VISUAL_DECORATION:L.EXPANDED_VISUAL_DECORATION}changeDecorations(e){return this.editor.changeDecorations(e)}removeDecorations(e){this.editor.removeDecorations(e)}}L.COLLAPSED_VISUAL_DECORATION=o.kI.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:g.L.asClassName(c)}),L.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=o.kI.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:m,isWholeLine:!0,firstLineDecorationClassName:g.L.asClassName(c)}),L.MANUALLY_COLLAPSED_VISUAL_DECORATION=o.kI.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:g.L.asClassName(f)}),L.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=o.kI.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:m,isWholeLine:!0,firstLineDecorationClassName:g.L.asClassName(f)}),L.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=o.kI.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0}),L.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=o.kI.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:m,isWholeLine:!0}),L.EXPANDED_VISUAL_DECORATION=o.kI.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+g.L.asClassName(u)}),L.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=o.kI.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:g.L.asClassName(u)}),L.MANUALLY_EXPANDED_VISUAL_DECORATION=o.kI.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+g.L.asClassName(p)}),L.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=o.kI.register({description:"folding-manually-expanded-auto-hide-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:g.L.asClassName(p)}),L.NO_CONTROLS_EXPANDED_RANGE_DECORATION=o.kI.register({description:"folding-no-controls-range-decoration",stickiness:0,isWholeLine:!0}),L.HIDDEN_RANGE_DECORATION=o.kI.register({description:"folding-hidden-range-decoration",stickiness:1})},81821:(e,t,n)=>{n.d(t,{AI:()=>c,GR:()=>u,JX:()=>m,W8:()=>g,bC:()=>l,cL:()=>f,dN:()=>a,kK:()=>p,pN:()=>r,pr:()=>L,sO:()=>h,uV:()=>d});var i=n(4640),s=n(51680),o=n(27502);class r{get regions(){return this._regions}get textModel(){return this._textModel}constructor(e,t){this._updateEventEmitter=new i.vl,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new s.tz(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}toggleCollapseState(e){if(!e.length)return;e=e.sort(((e,t)=>e.regionIndex-t.regionIndex));const t={};this._decorationProvider.changeDecorations((n=>{let i=0,s=-1,o=-1;const r=e=>{for(;i<e;){const e=this._regions.getEndLineNumber(i),t=this._regions.isCollapsed(i);if(e<=s){const s=0!==this.regions.getSource(i);n.changeDecorationOptions(this._editorDecorationIds[i],this._decorationProvider.getDecorationOption(t,e<=o,s))}t&&e>o&&(o=e),i++}};for(const l of e){const e=l.regionIndex,n=this._editorDecorationIds[e];if(n&&!t[n]){t[n]=!0,r(e);const i=!this._regions.isCollapsed(e);this._regions.setCollapsed(e,i),s=Math.max(s,this._regions.getEndLineNumber(e))}}r(this._regions.length)})),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}removeManualRanges(e){const t=new Array,n=t=>{for(const n of e)if(!(n.startLineNumber>t.endLineNumber||t.startLineNumber>n.endLineNumber))return!0;return!1};for(let i=0;i<this._regions.length;i++){const e=this._regions.toFoldRange(i);0!==e.source&&n(e)||t.push(e)}this.updatePost(s.tz.fromFoldRanges(t))}update(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=this._currentFoldedOrManualRanges(t),i=s.tz.sanitizeAndMerge(e,n,this._textModel.getLineCount());this.updatePost(s.tz.fromFoldRanges(i))}updatePost(e){const t=[];let n=-1;for(let i=0,s=e.length;i<s;i++){const s=e.getStartLineNumber(i),o=e.getEndLineNumber(i),r=e.isCollapsed(i),l=0!==e.getSource(i),d={startLineNumber:s,startColumn:this._textModel.getLineMaxColumn(s),endLineNumber:o,endColumn:this._textModel.getLineMaxColumn(o)+1};t.push({range:d,options:this._decorationProvider.getDecorationOption(r,o<=n,l)}),r&&o>n&&(n=o)}this._decorationProvider.changeDecorations((e=>this._editorDecorationIds=e.deltaDecorations(this._editorDecorationIds,t))),this._regions=e,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=(t,n)=>{for(const i of e)if(t<i&&i<=n)return!0;return!1},n=[];for(let i=0,s=this._regions.length;i<s;i++){let e=this.regions.isCollapsed(i);const s=this.regions.getSource(i);if(e||0!==s){const o=this._regions.toFoldRange(i),r=this._textModel.getDecorationRange(this._editorDecorationIds[i]);r&&(e&&t(r.startLineNumber,r.endLineNumber)&&(e=!1),n.push({startLineNumber:r.startLineNumber,endLineNumber:r.endLineNumber,type:o.type,isCollapsed:e,source:s}))}}return n}getMemento(){const e=this._currentFoldedOrManualRanges(),t=[],n=this._textModel.getLineCount();for(let i=0,s=e.length;i<s;i++){const s=e[i];if(s.startLineNumber>=s.endLineNumber||s.startLineNumber<1||s.endLineNumber>n)continue;const o=this._getLinesChecksum(s.startLineNumber+1,s.endLineNumber);t.push({startLineNumber:s.startLineNumber,endLineNumber:s.endLineNumber,isCollapsed:s.isCollapsed,source:s.source,checksum:o})}return t.length>0?t:void 0}applyMemento(e){var t,n;if(!Array.isArray(e))return;const i=[],o=this._textModel.getLineCount();for(const s of e){if(s.startLineNumber>=s.endLineNumber||s.startLineNumber<1||s.endLineNumber>o)continue;const e=this._getLinesChecksum(s.startLineNumber+1,s.endLineNumber);s.checksum&&e!==s.checksum||i.push({startLineNumber:s.startLineNumber,endLineNumber:s.endLineNumber,type:void 0,isCollapsed:null===(t=s.isCollapsed)||void 0===t||t,source:null!==(n=s.source)&&void 0!==n?n:0})}const r=s.tz.sanitizeAndMerge(this._regions,i,o);this.updatePost(s.tz.fromFoldRanges(r))}_getLinesChecksum(e,t){return(0,o.tW)(this._textModel.getLineContent(e)+this._textModel.getLineContent(t))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(e,t){const n=[];if(this._regions){let i=this._regions.findRange(e),s=1;for(;i>=0;){const e=this._regions.toRegion(i);t&&!t(e,s)||n.push(e),s++,i=e.parentIndex}}return n}getRegionAtLine(e){if(this._regions){const t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){const n=[],i=e?e.regionIndex+1:0,s=e?e.endLineNumber:Number.MAX_VALUE;if(t&&2===t.length){const e=[];for(let o=i,r=this._regions.length;o<r;o++){const i=this._regions.toRegion(o);if(!(this._regions.getStartLineNumber(o)<s))break;for(;e.length>0&&!i.containedBy(e[e.length-1]);)e.pop();e.push(i),t(i,e.length)&&n.push(i)}}else for(let o=i,r=this._regions.length;o<r;o++){const e=this._regions.toRegion(o);if(!(this._regions.getStartLineNumber(o)<s))break;t&&!t(e)||n.push(e)}return n}}function l(e,t,n){const i=[];for(const s of n){const n=e.getRegionAtLine(s);if(n){const s=!n.isCollapsed;if(i.push(n),t>1){const o=e.getRegionsInside(n,((e,n)=>e.isCollapsed!==s&&n<t));i.push(...o)}}}e.toggleCollapseState(i)}function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_VALUE,i=arguments.length>3?arguments[3]:void 0;const s=[];if(i&&i.length>0)for(const o of i){const i=e.getRegionAtLine(o);if(i&&(i.isCollapsed!==t&&s.push(i),n>1)){const o=e.getRegionsInside(i,((e,i)=>e.isCollapsed!==t&&i<n));s.push(...o)}}else{const i=e.getRegionsInside(null,((e,i)=>e.isCollapsed!==t&&i<n));s.push(...i)}e.toggleCollapseState(s)}function a(e,t,n,i){const s=[];for(const o of i){const i=e.getAllRegionsAtLine(o,((e,i)=>e.isCollapsed!==t&&i<=n));s.push(...i)}e.toggleCollapseState(s)}function g(e,t,n){const i=[];for(const s of n){const n=e.getAllRegionsAtLine(s,(e=>e.isCollapsed!==t));n.length>0&&i.push(n[0])}e.toggleCollapseState(i)}function h(e,t,n,i){const s=e.getRegionsInside(null,((e,s)=>s===t&&e.isCollapsed!==n&&!i.some((t=>e.containsLine(t)))));e.toggleCollapseState(s)}function u(e,t,n){const i=[];for(const o of n){const t=e.getAllRegionsAtLine(o,void 0);t.length>0&&i.push(t[0])}const s=e.getRegionsInside(null,(e=>i.every((t=>!t.containedBy(e)&&!e.containedBy(t)))&&e.isCollapsed!==t));e.toggleCollapseState(s)}function c(e,t,n){const i=e.textModel,s=e.regions,o=[];for(let r=s.length-1;r>=0;r--)if(n!==s.isCollapsed(r)){const e=s.getStartLineNumber(r);t.test(i.getLineContent(e))&&o.push(s.toRegion(r))}e.toggleCollapseState(o)}function f(e,t,n){const i=e.regions,s=[];for(let o=i.length-1;o>=0;o--)n!==i.isCollapsed(o)&&t===i.getType(o)&&s.push(i.toRegion(o));e.toggleCollapseState(s)}function p(e,t){let n=null;const i=t.getRegionAtLine(e);if(null!==i&&(n=i.startLineNumber,e===n)){const e=i.parentIndex;n=-1!==e?t.regions.getStartLineNumber(e):null}return n}function m(e,t){let n=t.getRegionAtLine(e);if(null!==n&&n.startLineNumber===e){if(e!==n.startLineNumber)return n.startLineNumber;{const e=n.parentIndex;let i=0;for(-1!==e&&(i=t.regions.getStartLineNumber(n.parentIndex));null!==n;){if(!(n.regionIndex>0))return null;if(n=t.regions.toRegion(n.regionIndex-1),n.startLineNumber<=i)return null;if(n.parentIndex===e)return n.startLineNumber}}}else if(t.regions.length>0)for(n=t.regions.toRegion(t.regions.length-1);null!==n;){if(n.startLineNumber<e)return n.startLineNumber;n=n.regionIndex>0?t.regions.toRegion(n.regionIndex-1):null}return null}function L(e,t){let n=t.getRegionAtLine(e);if(null!==n&&n.startLineNumber===e){const e=n.parentIndex;let i=0;if(-1!==e)i=t.regions.getEndLineNumber(n.parentIndex);else{if(0===t.regions.length)return null;i=t.regions.getEndLineNumber(t.regions.length-1)}for(;null!==n;){if(!(n.regionIndex<t.regions.length))return null;if(n=t.regions.toRegion(n.regionIndex+1),n.startLineNumber>=i)return null;if(n.parentIndex===e)return n.startLineNumber}}else if(t.regions.length>0)for(n=t.regions.toRegion(0);null!==n;){if(n.startLineNumber>e)return n.startLineNumber;n=n.regionIndex<t.regions.length?t.regions.toRegion(n.regionIndex+1):null}return null}},51680:(e,t,n)=>{n.d(t,{tz:()=>l,yy:()=>s});const i={0:" ",1:"u",2:"r"},s=16777215,o=4278190080;class r{constructor(e){const t=Math.ceil(e/32);this._states=new Uint32Array(t)}get(e){const t=e/32|0,n=e%32;return 0!==(this._states[t]&1<<n)}set(e,t){const n=e/32|0,i=e%32,s=this._states[n];this._states[n]=t?s|1<<i:s&~(1<<i)}}class l{constructor(e,t,n){if(e.length!==t.length||e.length>65535)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new r(e.length),this._userDefinedStates=new r(e.length),this._recoveredStates=new r(e.length),this._types=n,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;const e=[],t=(t,n)=>{const i=e[e.length-1];return this.getStartLineNumber(i)<=t&&this.getEndLineNumber(i)>=n};for(let n=0,i=this._startIndexes.length;n<i;n++){const i=this._startIndexes[n],o=this._endIndexes[n];if(i>s||o>s)throw new Error("startLineNumber or endLineNumber must not exceed "+s);for(;e.length>0&&!t(i,o);)e.pop();const r=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=i+((255&r)<<24),this._endIndexes[n]=o+((65280&r)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&s}getEndLineNumber(e){return this._endIndexes[e]&s}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){return this._collapseStates.get(e)}setCollapsed(e,t){this._collapseStates.set(e,t)}isUserDefined(e){return this._userDefinedStates.get(e)}setUserDefined(e,t){return this._userDefinedStates.set(e,t)}isRecovered(e){return this._recoveredStates.get(e)}setRecovered(e,t){return this._recoveredStates.set(e,t)}getSource(e){return this.isUserDefined(e)?1:this.isRecovered(e)?2:0}setSource(e,t){1===t?(this.setUserDefined(e,!0),this.setRecovered(e,!1)):2===t?(this.setUserDefined(e,!1),this.setRecovered(e,!0)):(this.setUserDefined(e,!1),this.setRecovered(e,!1))}setCollapsedAllOfType(e,t){let n=!1;if(this._types)for(let i=0;i<this._types.length;i++)this._types[i]===e&&(this.setCollapsed(i,t),n=!0);return n}toRegion(e){return new d(this,e)}getParentIndex(e){this.ensureParentIndices();const t=((this._startIndexes[e]&o)>>>24)+((this._endIndexes[e]&o)>>>16);return 65535===t?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,n=this._startIndexes.length;if(0===n)return-1;for(;t<n;){const i=Math.floor((t+n)/2);e<this.getStartLineNumber(i)?n=i:t=i+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);-1!==t;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){const e=[];for(let t=0;t<this.length;t++)e[t]="[".concat(i[this.getSource(t)]).concat(this.isCollapsed(t)?"+":"-","] ").concat(this.getStartLineNumber(t),"/").concat(this.getEndLineNumber(t));return e.join(", ")}toFoldRange(e){return{startLineNumber:this._startIndexes[e]&s,endLineNumber:this._endIndexes[e]&s,type:this._types?this._types[e]:void 0,isCollapsed:this.isCollapsed(e),source:this.getSource(e)}}static fromFoldRanges(e){const t=e.length,n=new Uint32Array(t),i=new Uint32Array(t);let s=[],o=!1;for(let l=0;l<t;l++){const t=e[l];n[l]=t.startLineNumber,i[l]=t.endLineNumber,s.push(t.type),t.type&&(o=!0)}o||(s=void 0);const r=new l(n,i,s);for(let l=0;l<t;l++)e[l].isCollapsed&&r.setCollapsed(l,!0),r.setSource(l,e[l].source);return r}static sanitizeAndMerge(e,t,n){n=null!==n&&void 0!==n?n:Number.MAX_VALUE;const i=(e,t)=>Array.isArray(e)?n=>n<t?e[n]:void 0:n=>n<t?e.toFoldRange(n):void 0,s=i(e,e.length),o=i(t,t.length);let r=0,l=0,d=s(0),a=o(0);const g=[];let h,u=0;const c=[];for(;d||a;){let e;if(a&&(!d||d.startLineNumber>=a.startLineNumber))d&&d.startLineNumber===a.startLineNumber?(1===a.source?e=a:(e=d,e.isCollapsed=a.isCollapsed&&d.endLineNumber===a.endLineNumber,e.source=0),d=s(++r)):(e=a,a.isCollapsed&&0===a.source&&(e.source=2)),a=o(++l);else{let t=l,n=a;for(;;){if(!n||n.startLineNumber>d.endLineNumber){e=d;break}if(1===n.source&&n.endLineNumber>d.endLineNumber)break;n=o(++t)}d=s(++r)}if(e){for(;h&&h.endLineNumber<e.startLineNumber;)h=g.pop();e.endLineNumber>e.startLineNumber&&e.startLineNumber>u&&e.endLineNumber<=n&&(!h||h.endLineNumber>=e.endLineNumber)&&(c.push(e),u=e.startLineNumber,h&&g.push(h),h=e)}}return c}}class d{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}},79817:(e,t,n)=>{n.d(t,{hW:()=>o});var i=n(72275),s=n(51680);class o{constructor(e,t,n){this.editorModel=e,this.languageConfigurationService=t,this.foldingRangesLimit=n,this.id="indent"}dispose(){}compute(e){const t=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,n=t&&!!t.offSide,s=t&&t.markers;return Promise.resolve(function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l;const o=e.getOptions().tabSize,d=new r(s);let a;n&&(a=new RegExp("(".concat(n.start.source,")|(?:").concat(n.end.source,")")));const g=[],h=e.getLineCount()+1;g.push({indent:-1,endAbove:h,line:h});for(let r=e.getLineCount();r>0;r--){const n=e.getLineContent(r),s=(0,i.G)(n,o);let l,h=g[g.length-1];if(-1!==s){if(a&&(l=n.match(a))){if(!l[1]){g.push({indent:-2,endAbove:r,line:r});continue}{let e=g.length-1;for(;e>0&&-2!==g[e].indent;)e--;if(e>0){g.length=e+1,h=g[e],d.insertFirst(r,h.line,s),h.line=r,h.indent=s,h.endAbove=r;continue}}}if(h.indent>s){do{g.pop(),h=g[g.length-1]}while(h.indent>s);const e=h.endAbove-1;e-r>=1&&d.insertFirst(r,e,s)}h.indent===s?h.endAbove=r:g.push({indent:s,endAbove:r,line:r})}else t&&(h.endAbove=r)}return d.toIndentRanges(e)}(this.editorModel,n,s,this.foldingRangesLimit))}}class r{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,n){if(e>s.yy||t>s.yy)return;const i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=t,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(e){const t=this._foldingRangesLimit.limit;if(this._length<=t){this._foldingRangesLimit.update(this._length,!1);const e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let n=this._length-1,i=0;n>=0;n--,i++)e[i]=this._startIndexes[n],t[i]=this._endIndexes[n];return new s.tz(e,t)}{this._foldingRangesLimit.update(this._length,t);let n=0,o=this._indentOccurrences.length;for(let e=0;e<this._indentOccurrences.length;e++){const i=this._indentOccurrences[e];if(i){if(i+n>t){o=e;break}n+=i}}const r=e.getOptions().tabSize,l=new Uint32Array(t),d=new Uint32Array(t);for(let s=this._length-1,a=0;s>=0;s--){const g=this._startIndexes[s],h=e.getLineContent(g),u=(0,i.G)(h,r);(u<o||u===o&&n++<t)&&(l[a]=g,d[a]=this._endIndexes[s],a++)}return new s.tz(l,d)}}}const l={limit:5e3,update:()=>{}}},46546:(e,t,n)=>{n.d(t,{M:()=>l});var i=n(74821),s=n(60704),o=n(51680);const r={};class l{constructor(e,t,n,i,o){this.editorModel=e,this.providers=t,this.handleFoldingRangesChange=n,this.foldingRangesLimit=i,this.fallbackRangeProvider=o,this.id="syntax",this.disposables=new s.Cm,o&&this.disposables.add(o);for(const s of t)"function"===typeof s.onDidChange&&this.disposables.add(s.onDidChange(n))}compute(e){return function(e,t,n){let s=null;const o=e.map(((e,o)=>Promise.resolve(e.provideFoldingRanges(t,r,n)).then((e=>{if(!n.isCancellationRequested&&Array.isArray(e)){Array.isArray(s)||(s=[]);const n=t.getLineCount();for(const t of e)t.start>0&&t.end>t.start&&t.end<=n&&s.push({start:t.start,end:t.end,rank:o,kind:t.kind})}}),i.M_)));return Promise.all(o).then((e=>s))}(this.providers,this.editorModel,e).then((t=>{var n,i;if(t){return function(e,t){const n=e.sort(((e,t)=>{let n=e.start-t.start;return 0===n&&(n=e.rank-t.rank),n})),i=new d(t);let s;const o=[];for(const r of n)if(s){if(r.start>s.start)if(r.end<=s.end)o.push(s),s=r,i.add(r.start,r.end,r.kind&&r.kind.value,o.length);else{if(r.start>s.end){do{s=o.pop()}while(s&&r.start>s.end);s&&o.push(s),s=r}i.add(r.start,r.end,r.kind&&r.kind.value,o.length)}}else s=r,i.add(r.start,r.end,r.kind&&r.kind.value,o.length);return i.toIndentRanges()}(t,this.foldingRangesLimit)}return null!==(i=null===(n=this.fallbackRangeProvider)||void 0===n?void 0:n.compute(e))&&void 0!==i?i:null}))}dispose(){this.disposables.dispose()}}class d{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,n,i){if(e>o.yy||t>o.yy)return;const s=this._length;this._startIndexes[s]=e,this._endIndexes[s]=t,this._nestingLevels[s]=i,this._types[s]=n,this._length++,i<30&&(this._nestingLevelCounts[i]=(this._nestingLevelCounts[i]||0)+1)}toIndentRanges(){const e=this._foldingRangesLimit.limit;if(this._length<=e){this._foldingRangesLimit.update(this._length,!1);const e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let n=0;n<this._length;n++)e[n]=this._startIndexes[n],t[n]=this._endIndexes[n];return new o.tz(e,t,this._types)}{this._foldingRangesLimit.update(this._length,e);let t=0,n=this._nestingLevelCounts.length;for(let o=0;o<this._nestingLevelCounts.length;o++){const i=this._nestingLevelCounts[o];if(i){if(i+t>e){n=o;break}t+=i}}const i=new Uint32Array(e),s=new Uint32Array(e),r=[];for(let o=0,l=0;o<this._length;o++){const d=this._nestingLevels[o];(d<n||d===n&&t++<e)&&(i[l]=this._startIndexes[o],s[l]=this._endIndexes[o],r[l]=this._types[o],l++)}return new o.tz(i,s,r)}}}}}]);
//# sourceMappingURL=monaco-editor-vendor.cb843302.a7e18eef.js.map