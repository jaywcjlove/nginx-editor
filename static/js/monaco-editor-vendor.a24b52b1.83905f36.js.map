{"version":3,"file":"static/js/monaco-editor-vendor.a24b52b1.83905f36.js","mappings":"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","sources":["../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/foldingRanges.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/foldingModel.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/hiddenRangeModel.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/indentRangeProvider.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/foldingDecorations.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/syntaxRangeProvider.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/folding.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/fontZoom/browser/fontZoom.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/format/browser/format.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/format/browser/formatActions.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/format/browser/formattingEdit.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/markerNavigationService.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoErrorWidget.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoError.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/symbolNavigation.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/goToCommands.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/goToSymbol.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/clickLinkGesture.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/goToDefinitionAtPosition.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesTree.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesWidget.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesController.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/referencesModel.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport const foldSourceAbbr = {\n    [0 /* FoldSource.provider */]: ' ',\n    [1 /* FoldSource.userDefined */]: 'u',\n    [2 /* FoldSource.recovered */]: 'r',\n};\nexport const MAX_FOLDING_REGIONS = 0xFFFF;\nexport const MAX_LINE_NUMBER = 0xFFFFFF;\nconst MASK_INDENT = 0xFF000000;\nclass BitField {\n    constructor(size) {\n        const numWords = Math.ceil(size / 32);\n        this._states = new Uint32Array(numWords);\n    }\n    get(index) {\n        const arrayIndex = (index / 32) | 0;\n        const bit = index % 32;\n        return (this._states[arrayIndex] & (1 << bit)) !== 0;\n    }\n    set(index, newState) {\n        const arrayIndex = (index / 32) | 0;\n        const bit = index % 32;\n        const value = this._states[arrayIndex];\n        if (newState) {\n            this._states[arrayIndex] = value | (1 << bit);\n        }\n        else {\n            this._states[arrayIndex] = value & ~(1 << bit);\n        }\n    }\n}\nexport class FoldingRegions {\n    constructor(startIndexes, endIndexes, types) {\n        if (startIndexes.length !== endIndexes.length || startIndexes.length > MAX_FOLDING_REGIONS) {\n            throw new Error('invalid startIndexes or endIndexes size');\n        }\n        this._startIndexes = startIndexes;\n        this._endIndexes = endIndexes;\n        this._collapseStates = new BitField(startIndexes.length);\n        this._userDefinedStates = new BitField(startIndexes.length);\n        this._recoveredStates = new BitField(startIndexes.length);\n        this._types = types;\n        this._parentsComputed = false;\n    }\n    ensureParentIndices() {\n        if (!this._parentsComputed) {\n            this._parentsComputed = true;\n            const parentIndexes = [];\n            const isInsideLast = (startLineNumber, endLineNumber) => {\n                const index = parentIndexes[parentIndexes.length - 1];\n                return this.getStartLineNumber(index) <= startLineNumber && this.getEndLineNumber(index) >= endLineNumber;\n            };\n            for (let i = 0, len = this._startIndexes.length; i < len; i++) {\n                const startLineNumber = this._startIndexes[i];\n                const endLineNumber = this._endIndexes[i];\n                if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\n                    throw new Error('startLineNumber or endLineNumber must not exceed ' + MAX_LINE_NUMBER);\n                }\n                while (parentIndexes.length > 0 && !isInsideLast(startLineNumber, endLineNumber)) {\n                    parentIndexes.pop();\n                }\n                const parentIndex = parentIndexes.length > 0 ? parentIndexes[parentIndexes.length - 1] : -1;\n                parentIndexes.push(i);\n                this._startIndexes[i] = startLineNumber + ((parentIndex & 0xFF) << 24);\n                this._endIndexes[i] = endLineNumber + ((parentIndex & 0xFF00) << 16);\n            }\n        }\n    }\n    get length() {\n        return this._startIndexes.length;\n    }\n    getStartLineNumber(index) {\n        return this._startIndexes[index] & MAX_LINE_NUMBER;\n    }\n    getEndLineNumber(index) {\n        return this._endIndexes[index] & MAX_LINE_NUMBER;\n    }\n    getType(index) {\n        return this._types ? this._types[index] : undefined;\n    }\n    hasTypes() {\n        return !!this._types;\n    }\n    isCollapsed(index) {\n        return this._collapseStates.get(index);\n    }\n    setCollapsed(index, newState) {\n        this._collapseStates.set(index, newState);\n    }\n    isUserDefined(index) {\n        return this._userDefinedStates.get(index);\n    }\n    setUserDefined(index, newState) {\n        return this._userDefinedStates.set(index, newState);\n    }\n    isRecovered(index) {\n        return this._recoveredStates.get(index);\n    }\n    setRecovered(index, newState) {\n        return this._recoveredStates.set(index, newState);\n    }\n    getSource(index) {\n        if (this.isUserDefined(index)) {\n            return 1 /* FoldSource.userDefined */;\n        }\n        else if (this.isRecovered(index)) {\n            return 2 /* FoldSource.recovered */;\n        }\n        return 0 /* FoldSource.provider */;\n    }\n    setSource(index, source) {\n        if (source === 1 /* FoldSource.userDefined */) {\n            this.setUserDefined(index, true);\n            this.setRecovered(index, false);\n        }\n        else if (source === 2 /* FoldSource.recovered */) {\n            this.setUserDefined(index, false);\n            this.setRecovered(index, true);\n        }\n        else {\n            this.setUserDefined(index, false);\n            this.setRecovered(index, false);\n        }\n    }\n    setCollapsedAllOfType(type, newState) {\n        let hasChanged = false;\n        if (this._types) {\n            for (let i = 0; i < this._types.length; i++) {\n                if (this._types[i] === type) {\n                    this.setCollapsed(i, newState);\n                    hasChanged = true;\n                }\n            }\n        }\n        return hasChanged;\n    }\n    toRegion(index) {\n        return new FoldingRegion(this, index);\n    }\n    getParentIndex(index) {\n        this.ensureParentIndices();\n        const parent = ((this._startIndexes[index] & MASK_INDENT) >>> 24) + ((this._endIndexes[index] & MASK_INDENT) >>> 16);\n        if (parent === MAX_FOLDING_REGIONS) {\n            return -1;\n        }\n        return parent;\n    }\n    contains(index, line) {\n        return this.getStartLineNumber(index) <= line && this.getEndLineNumber(index) >= line;\n    }\n    findIndex(line) {\n        let low = 0, high = this._startIndexes.length;\n        if (high === 0) {\n            return -1; // no children\n        }\n        while (low < high) {\n            const mid = Math.floor((low + high) / 2);\n            if (line < this.getStartLineNumber(mid)) {\n                high = mid;\n            }\n            else {\n                low = mid + 1;\n            }\n        }\n        return low - 1;\n    }\n    findRange(line) {\n        let index = this.findIndex(line);\n        if (index >= 0) {\n            const endLineNumber = this.getEndLineNumber(index);\n            if (endLineNumber >= line) {\n                return index;\n            }\n            index = this.getParentIndex(index);\n            while (index !== -1) {\n                if (this.contains(index, line)) {\n                    return index;\n                }\n                index = this.getParentIndex(index);\n            }\n        }\n        return -1;\n    }\n    toString() {\n        const res = [];\n        for (let i = 0; i < this.length; i++) {\n            res[i] = `[${foldSourceAbbr[this.getSource(i)]}${this.isCollapsed(i) ? '+' : '-'}] ${this.getStartLineNumber(i)}/${this.getEndLineNumber(i)}`;\n        }\n        return res.join(', ');\n    }\n    toFoldRange(index) {\n        return {\n            startLineNumber: this._startIndexes[index] & MAX_LINE_NUMBER,\n            endLineNumber: this._endIndexes[index] & MAX_LINE_NUMBER,\n            type: this._types ? this._types[index] : undefined,\n            isCollapsed: this.isCollapsed(index),\n            source: this.getSource(index)\n        };\n    }\n    static fromFoldRanges(ranges) {\n        const rangesLength = ranges.length;\n        const startIndexes = new Uint32Array(rangesLength);\n        const endIndexes = new Uint32Array(rangesLength);\n        let types = [];\n        let gotTypes = false;\n        for (let i = 0; i < rangesLength; i++) {\n            const range = ranges[i];\n            startIndexes[i] = range.startLineNumber;\n            endIndexes[i] = range.endLineNumber;\n            types.push(range.type);\n            if (range.type) {\n                gotTypes = true;\n            }\n        }\n        if (!gotTypes) {\n            types = undefined;\n        }\n        const regions = new FoldingRegions(startIndexes, endIndexes, types);\n        for (let i = 0; i < rangesLength; i++) {\n            if (ranges[i].isCollapsed) {\n                regions.setCollapsed(i, true);\n            }\n            regions.setSource(i, ranges[i].source);\n        }\n        return regions;\n    }\n    /**\n     * Two inputs, each a FoldingRegions or a FoldRange[], are merged.\n     * Each input must be pre-sorted on startLineNumber.\n     * The first list is assumed to always include all regions currently defined by range providers.\n     * The second list only contains the previously collapsed and all manual ranges.\n     * If the line position matches, the range of the new range is taken, and the range is no longer manual\n     * When an entry in one list overlaps an entry in the other, the second list's entry \"wins\" and\n     * overlapping entries in the first list are discarded.\n     * Invalid entries are discarded. An entry is invalid if:\n     * \t\tthe start and end line numbers aren't a valid range of line numbers,\n     * \t\tit is out of sequence or has the same start line as a preceding entry,\n     * \t\tit overlaps a preceding entry and is not fully contained by that entry.\n     */\n    static sanitizeAndMerge(rangesA, rangesB, maxLineNumber) {\n        maxLineNumber = maxLineNumber !== null && maxLineNumber !== void 0 ? maxLineNumber : Number.MAX_VALUE;\n        const getIndexedFunction = (r, limit) => {\n            return Array.isArray(r)\n                ? ((i) => { return (i < limit) ? r[i] : undefined; })\n                : ((i) => { return (i < limit) ? r.toFoldRange(i) : undefined; });\n        };\n        const getA = getIndexedFunction(rangesA, rangesA.length);\n        const getB = getIndexedFunction(rangesB, rangesB.length);\n        let indexA = 0;\n        let indexB = 0;\n        let nextA = getA(0);\n        let nextB = getB(0);\n        const stackedRanges = [];\n        let topStackedRange;\n        let prevLineNumber = 0;\n        const resultRanges = [];\n        while (nextA || nextB) {\n            let useRange = undefined;\n            if (nextB && (!nextA || nextA.startLineNumber >= nextB.startLineNumber)) {\n                if (nextA && nextA.startLineNumber === nextB.startLineNumber) {\n                    if (nextB.source === 1 /* FoldSource.userDefined */) {\n                        // a user defined range (possibly unfolded)\n                        useRange = nextB;\n                    }\n                    else {\n                        // a previously folded range or a (possibly unfolded) recovered range\n                        useRange = nextA;\n                        useRange.isCollapsed = nextB.isCollapsed && nextA.endLineNumber === nextB.endLineNumber;\n                        useRange.source = 0 /* FoldSource.provider */;\n                    }\n                    nextA = getA(++indexA); // not necessary, just for speed\n                }\n                else {\n                    useRange = nextB;\n                    if (nextB.isCollapsed && nextB.source === 0 /* FoldSource.provider */) {\n                        // a previously collapsed range\n                        useRange.source = 2 /* FoldSource.recovered */;\n                    }\n                }\n                nextB = getB(++indexB);\n            }\n            else {\n                // nextA is next. The user folded B set takes precedence and we sometimes need to look\n                // ahead in it to check for an upcoming conflict.\n                let scanIndex = indexB;\n                let prescanB = nextB;\n                while (true) {\n                    if (!prescanB || prescanB.startLineNumber > nextA.endLineNumber) {\n                        useRange = nextA;\n                        break; // no conflict, use this nextA\n                    }\n                    if (prescanB.source === 1 /* FoldSource.userDefined */ && prescanB.endLineNumber > nextA.endLineNumber) {\n                        // we found a user folded range, it wins\n                        break; // without setting nextResult, so this nextA gets skipped\n                    }\n                    prescanB = getB(++scanIndex);\n                }\n                nextA = getA(++indexA);\n            }\n            if (useRange) {\n                while (topStackedRange\n                    && topStackedRange.endLineNumber < useRange.startLineNumber) {\n                    topStackedRange = stackedRanges.pop();\n                }\n                if (useRange.endLineNumber > useRange.startLineNumber\n                    && useRange.startLineNumber > prevLineNumber\n                    && useRange.endLineNumber <= maxLineNumber\n                    && (!topStackedRange\n                        || topStackedRange.endLineNumber >= useRange.endLineNumber)) {\n                    resultRanges.push(useRange);\n                    prevLineNumber = useRange.startLineNumber;\n                    if (topStackedRange) {\n                        stackedRanges.push(topStackedRange);\n                    }\n                    topStackedRange = useRange;\n                }\n            }\n        }\n        return resultRanges;\n    }\n}\nexport class FoldingRegion {\n    constructor(ranges, index) {\n        this.ranges = ranges;\n        this.index = index;\n    }\n    get startLineNumber() {\n        return this.ranges.getStartLineNumber(this.index);\n    }\n    get endLineNumber() {\n        return this.ranges.getEndLineNumber(this.index);\n    }\n    get regionIndex() {\n        return this.index;\n    }\n    get parentIndex() {\n        return this.ranges.getParentIndex(this.index);\n    }\n    get isCollapsed() {\n        return this.ranges.isCollapsed(this.index);\n    }\n    containedBy(range) {\n        return range.startLineNumber <= this.startLineNumber && range.endLineNumber >= this.endLineNumber;\n    }\n    containsLine(lineNumber) {\n        return this.startLineNumber <= lineNumber && lineNumber <= this.endLineNumber;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { FoldingRegions } from './foldingRanges.js';\nimport { hash } from '../../../../base/common/hash.js';\nexport class FoldingModel {\n    get regions() { return this._regions; }\n    get textModel() { return this._textModel; }\n    constructor(textModel, decorationProvider) {\n        this._updateEventEmitter = new Emitter();\n        this.onDidChange = this._updateEventEmitter.event;\n        this._textModel = textModel;\n        this._decorationProvider = decorationProvider;\n        this._regions = new FoldingRegions(new Uint32Array(0), new Uint32Array(0));\n        this._editorDecorationIds = [];\n    }\n    toggleCollapseState(toggledRegions) {\n        if (!toggledRegions.length) {\n            return;\n        }\n        toggledRegions = toggledRegions.sort((r1, r2) => r1.regionIndex - r2.regionIndex);\n        const processed = {};\n        this._decorationProvider.changeDecorations(accessor => {\n            let k = 0; // index from [0 ... this.regions.length]\n            let dirtyRegionEndLine = -1; // end of the range where decorations need to be updated\n            let lastHiddenLine = -1; // the end of the last hidden lines\n            const updateDecorationsUntil = (index) => {\n                while (k < index) {\n                    const endLineNumber = this._regions.getEndLineNumber(k);\n                    const isCollapsed = this._regions.isCollapsed(k);\n                    if (endLineNumber <= dirtyRegionEndLine) {\n                        const isManual = this.regions.getSource(k) !== 0 /* FoldSource.provider */;\n                        accessor.changeDecorationOptions(this._editorDecorationIds[k], this._decorationProvider.getDecorationOption(isCollapsed, endLineNumber <= lastHiddenLine, isManual));\n                    }\n                    if (isCollapsed && endLineNumber > lastHiddenLine) {\n                        lastHiddenLine = endLineNumber;\n                    }\n                    k++;\n                }\n            };\n            for (const region of toggledRegions) {\n                const index = region.regionIndex;\n                const editorDecorationId = this._editorDecorationIds[index];\n                if (editorDecorationId && !processed[editorDecorationId]) {\n                    processed[editorDecorationId] = true;\n                    updateDecorationsUntil(index); // update all decorations up to current index using the old dirtyRegionEndLine\n                    const newCollapseState = !this._regions.isCollapsed(index);\n                    this._regions.setCollapsed(index, newCollapseState);\n                    dirtyRegionEndLine = Math.max(dirtyRegionEndLine, this._regions.getEndLineNumber(index));\n                }\n            }\n            updateDecorationsUntil(this._regions.length);\n        });\n        this._updateEventEmitter.fire({ model: this, collapseStateChanged: toggledRegions });\n    }\n    removeManualRanges(ranges) {\n        const newFoldingRanges = new Array();\n        const intersects = (foldRange) => {\n            for (const range of ranges) {\n                if (!(range.startLineNumber > foldRange.endLineNumber || foldRange.startLineNumber > range.endLineNumber)) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        for (let i = 0; i < this._regions.length; i++) {\n            const foldRange = this._regions.toFoldRange(i);\n            if (foldRange.source === 0 /* FoldSource.provider */ || !intersects(foldRange)) {\n                newFoldingRanges.push(foldRange);\n            }\n        }\n        this.updatePost(FoldingRegions.fromFoldRanges(newFoldingRanges));\n    }\n    update(newRegions, blockedLineNumers = []) {\n        const foldedOrManualRanges = this._currentFoldedOrManualRanges(blockedLineNumers);\n        const newRanges = FoldingRegions.sanitizeAndMerge(newRegions, foldedOrManualRanges, this._textModel.getLineCount());\n        this.updatePost(FoldingRegions.fromFoldRanges(newRanges));\n    }\n    updatePost(newRegions) {\n        const newEditorDecorations = [];\n        let lastHiddenLine = -1;\n        for (let index = 0, limit = newRegions.length; index < limit; index++) {\n            const startLineNumber = newRegions.getStartLineNumber(index);\n            const endLineNumber = newRegions.getEndLineNumber(index);\n            const isCollapsed = newRegions.isCollapsed(index);\n            const isManual = newRegions.getSource(index) !== 0 /* FoldSource.provider */;\n            const decorationRange = {\n                startLineNumber: startLineNumber,\n                startColumn: this._textModel.getLineMaxColumn(startLineNumber),\n                endLineNumber: endLineNumber,\n                endColumn: this._textModel.getLineMaxColumn(endLineNumber) + 1\n            };\n            newEditorDecorations.push({ range: decorationRange, options: this._decorationProvider.getDecorationOption(isCollapsed, endLineNumber <= lastHiddenLine, isManual) });\n            if (isCollapsed && endLineNumber > lastHiddenLine) {\n                lastHiddenLine = endLineNumber;\n            }\n        }\n        this._decorationProvider.changeDecorations(accessor => this._editorDecorationIds = accessor.deltaDecorations(this._editorDecorationIds, newEditorDecorations));\n        this._regions = newRegions;\n        this._updateEventEmitter.fire({ model: this });\n    }\n    _currentFoldedOrManualRanges(blockedLineNumers = []) {\n        const isBlocked = (startLineNumber, endLineNumber) => {\n            for (const blockedLineNumber of blockedLineNumers) {\n                if (startLineNumber < blockedLineNumber && blockedLineNumber <= endLineNumber) { // first line is visible\n                    return true;\n                }\n            }\n            return false;\n        };\n        const foldedRanges = [];\n        for (let i = 0, limit = this._regions.length; i < limit; i++) {\n            let isCollapsed = this.regions.isCollapsed(i);\n            const source = this.regions.getSource(i);\n            if (isCollapsed || source !== 0 /* FoldSource.provider */) {\n                const foldRange = this._regions.toFoldRange(i);\n                const decRange = this._textModel.getDecorationRange(this._editorDecorationIds[i]);\n                if (decRange) {\n                    if (isCollapsed && isBlocked(decRange.startLineNumber, decRange.endLineNumber)) {\n                        isCollapsed = false; // uncollapse is the range is blocked\n                    }\n                    foldedRanges.push({\n                        startLineNumber: decRange.startLineNumber,\n                        endLineNumber: decRange.endLineNumber,\n                        type: foldRange.type,\n                        isCollapsed,\n                        source\n                    });\n                }\n            }\n        }\n        return foldedRanges;\n    }\n    /**\n     * Collapse state memento, for persistence only\n     */\n    getMemento() {\n        const foldedOrManualRanges = this._currentFoldedOrManualRanges();\n        const result = [];\n        const maxLineNumber = this._textModel.getLineCount();\n        for (let i = 0, limit = foldedOrManualRanges.length; i < limit; i++) {\n            const range = foldedOrManualRanges[i];\n            if (range.startLineNumber >= range.endLineNumber || range.startLineNumber < 1 || range.endLineNumber > maxLineNumber) {\n                continue;\n            }\n            const checksum = this._getLinesChecksum(range.startLineNumber + 1, range.endLineNumber);\n            result.push({\n                startLineNumber: range.startLineNumber,\n                endLineNumber: range.endLineNumber,\n                isCollapsed: range.isCollapsed,\n                source: range.source,\n                checksum: checksum\n            });\n        }\n        return (result.length > 0) ? result : undefined;\n    }\n    /**\n     * Apply persisted state, for persistence only\n     */\n    applyMemento(state) {\n        var _a, _b;\n        if (!Array.isArray(state)) {\n            return;\n        }\n        const rangesToRestore = [];\n        const maxLineNumber = this._textModel.getLineCount();\n        for (const range of state) {\n            if (range.startLineNumber >= range.endLineNumber || range.startLineNumber < 1 || range.endLineNumber > maxLineNumber) {\n                continue;\n            }\n            const checksum = this._getLinesChecksum(range.startLineNumber + 1, range.endLineNumber);\n            if (!range.checksum || checksum === range.checksum) {\n                rangesToRestore.push({\n                    startLineNumber: range.startLineNumber,\n                    endLineNumber: range.endLineNumber,\n                    type: undefined,\n                    isCollapsed: (_a = range.isCollapsed) !== null && _a !== void 0 ? _a : true,\n                    source: (_b = range.source) !== null && _b !== void 0 ? _b : 0 /* FoldSource.provider */\n                });\n            }\n        }\n        const newRanges = FoldingRegions.sanitizeAndMerge(this._regions, rangesToRestore, maxLineNumber);\n        this.updatePost(FoldingRegions.fromFoldRanges(newRanges));\n    }\n    _getLinesChecksum(lineNumber1, lineNumber2) {\n        const h = hash(this._textModel.getLineContent(lineNumber1)\n            + this._textModel.getLineContent(lineNumber2));\n        return h % 1000000; // 6 digits is plenty\n    }\n    dispose() {\n        this._decorationProvider.removeDecorations(this._editorDecorationIds);\n    }\n    getAllRegionsAtLine(lineNumber, filter) {\n        const result = [];\n        if (this._regions) {\n            let index = this._regions.findRange(lineNumber);\n            let level = 1;\n            while (index >= 0) {\n                const current = this._regions.toRegion(index);\n                if (!filter || filter(current, level)) {\n                    result.push(current);\n                }\n                level++;\n                index = current.parentIndex;\n            }\n        }\n        return result;\n    }\n    getRegionAtLine(lineNumber) {\n        if (this._regions) {\n            const index = this._regions.findRange(lineNumber);\n            if (index >= 0) {\n                return this._regions.toRegion(index);\n            }\n        }\n        return null;\n    }\n    getRegionsInside(region, filter) {\n        const result = [];\n        const index = region ? region.regionIndex + 1 : 0;\n        const endLineNumber = region ? region.endLineNumber : Number.MAX_VALUE;\n        if (filter && filter.length === 2) {\n            const levelStack = [];\n            for (let i = index, len = this._regions.length; i < len; i++) {\n                const current = this._regions.toRegion(i);\n                if (this._regions.getStartLineNumber(i) < endLineNumber) {\n                    while (levelStack.length > 0 && !current.containedBy(levelStack[levelStack.length - 1])) {\n                        levelStack.pop();\n                    }\n                    levelStack.push(current);\n                    if (filter(current, levelStack.length)) {\n                        result.push(current);\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        else {\n            for (let i = index, len = this._regions.length; i < len; i++) {\n                const current = this._regions.toRegion(i);\n                if (this._regions.getStartLineNumber(i) < endLineNumber) {\n                    if (!filter || filter(current)) {\n                        result.push(current);\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        return result;\n    }\n}\n/**\n * Collapse or expand the regions at the given locations\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\n * @param lineNumbers the location of the regions to collapse or expand, or if not set, all regions in the model.\n */\nexport function toggleCollapseState(foldingModel, levels, lineNumbers) {\n    const toToggle = [];\n    for (const lineNumber of lineNumbers) {\n        const region = foldingModel.getRegionAtLine(lineNumber);\n        if (region) {\n            const doCollapse = !region.isCollapsed;\n            toToggle.push(region);\n            if (levels > 1) {\n                const regionsInside = foldingModel.getRegionsInside(region, (r, level) => r.isCollapsed !== doCollapse && level < levels);\n                toToggle.push(...regionsInside);\n            }\n        }\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Collapse or expand the regions at the given locations including all children.\n * @param doCollapse Whether to collapse or expand\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\n * @param lineNumbers the location of the regions to collapse or expand, or if not set, all regions in the model.\n */\nexport function setCollapseStateLevelsDown(foldingModel, doCollapse, levels = Number.MAX_VALUE, lineNumbers) {\n    const toToggle = [];\n    if (lineNumbers && lineNumbers.length > 0) {\n        for (const lineNumber of lineNumbers) {\n            const region = foldingModel.getRegionAtLine(lineNumber);\n            if (region) {\n                if (region.isCollapsed !== doCollapse) {\n                    toToggle.push(region);\n                }\n                if (levels > 1) {\n                    const regionsInside = foldingModel.getRegionsInside(region, (r, level) => r.isCollapsed !== doCollapse && level < levels);\n                    toToggle.push(...regionsInside);\n                }\n            }\n        }\n    }\n    else {\n        const regionsInside = foldingModel.getRegionsInside(null, (r, level) => r.isCollapsed !== doCollapse && level < levels);\n        toToggle.push(...regionsInside);\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Collapse or expand the regions at the given locations including all parents.\n * @param doCollapse Whether to collapse or expand\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\n * @param lineNumbers the location of the regions to collapse or expand.\n */\nexport function setCollapseStateLevelsUp(foldingModel, doCollapse, levels, lineNumbers) {\n    const toToggle = [];\n    for (const lineNumber of lineNumbers) {\n        const regions = foldingModel.getAllRegionsAtLine(lineNumber, (region, level) => region.isCollapsed !== doCollapse && level <= levels);\n        toToggle.push(...regions);\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Collapse or expand a region at the given locations. If the inner most region is already collapsed/expanded, uses the first parent instead.\n * @param doCollapse Whether to collapse or expand\n * @param lineNumbers the location of the regions to collapse or expand.\n */\nexport function setCollapseStateUp(foldingModel, doCollapse, lineNumbers) {\n    const toToggle = [];\n    for (const lineNumber of lineNumbers) {\n        const regions = foldingModel.getAllRegionsAtLine(lineNumber, (region) => region.isCollapsed !== doCollapse);\n        if (regions.length > 0) {\n            toToggle.push(regions[0]);\n        }\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds or unfolds all regions that have a given level, except if they contain one of the blocked lines.\n * @param foldLevel level. Level == 1 is the top level\n * @param doCollapse Whether to collapse or expand\n*/\nexport function setCollapseStateAtLevel(foldingModel, foldLevel, doCollapse, blockedLineNumbers) {\n    const filter = (region, level) => level === foldLevel && region.isCollapsed !== doCollapse && !blockedLineNumbers.some(line => region.containsLine(line));\n    const toToggle = foldingModel.getRegionsInside(null, filter);\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds or unfolds all regions, except if they contain or are contained by a region of one of the blocked lines.\n * @param doCollapse Whether to collapse or expand\n * @param blockedLineNumbers the location of regions to not collapse or expand\n */\nexport function setCollapseStateForRest(foldingModel, doCollapse, blockedLineNumbers) {\n    const filteredRegions = [];\n    for (const lineNumber of blockedLineNumbers) {\n        const regions = foldingModel.getAllRegionsAtLine(lineNumber, undefined);\n        if (regions.length > 0) {\n            filteredRegions.push(regions[0]);\n        }\n    }\n    const filter = (region) => filteredRegions.every((filteredRegion) => !filteredRegion.containedBy(region) && !region.containedBy(filteredRegion)) && region.isCollapsed !== doCollapse;\n    const toToggle = foldingModel.getRegionsInside(null, filter);\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds all regions for which the lines start with a given regex\n * @param foldingModel the folding model\n */\nexport function setCollapseStateForMatchingLines(foldingModel, regExp, doCollapse) {\n    const editorModel = foldingModel.textModel;\n    const regions = foldingModel.regions;\n    const toToggle = [];\n    for (let i = regions.length - 1; i >= 0; i--) {\n        if (doCollapse !== regions.isCollapsed(i)) {\n            const startLineNumber = regions.getStartLineNumber(i);\n            if (regExp.test(editorModel.getLineContent(startLineNumber))) {\n                toToggle.push(regions.toRegion(i));\n            }\n        }\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds all regions of the given type\n * @param foldingModel the folding model\n */\nexport function setCollapseStateForType(foldingModel, type, doCollapse) {\n    const regions = foldingModel.regions;\n    const toToggle = [];\n    for (let i = regions.length - 1; i >= 0; i--) {\n        if (doCollapse !== regions.isCollapsed(i) && type === regions.getType(i)) {\n            toToggle.push(regions.toRegion(i));\n        }\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Get line to go to for parent fold of current line\n * @param lineNumber the current line number\n * @param foldingModel the folding model\n *\n * @return Parent fold start line\n */\nexport function getParentFoldLine(lineNumber, foldingModel) {\n    let startLineNumber = null;\n    const foldingRegion = foldingModel.getRegionAtLine(lineNumber);\n    if (foldingRegion !== null) {\n        startLineNumber = foldingRegion.startLineNumber;\n        // If current line is not the start of the current fold, go to top line of current fold. If not, go to parent fold\n        if (lineNumber === startLineNumber) {\n            const parentFoldingIdx = foldingRegion.parentIndex;\n            if (parentFoldingIdx !== -1) {\n                startLineNumber = foldingModel.regions.getStartLineNumber(parentFoldingIdx);\n            }\n            else {\n                startLineNumber = null;\n            }\n        }\n    }\n    return startLineNumber;\n}\n/**\n * Get line to go to for previous fold at the same level of current line\n * @param lineNumber the current line number\n * @param foldingModel the folding model\n *\n * @return Previous fold start line\n */\nexport function getPreviousFoldLine(lineNumber, foldingModel) {\n    let foldingRegion = foldingModel.getRegionAtLine(lineNumber);\n    // If on the folding range start line, go to previous sibling.\n    if (foldingRegion !== null && foldingRegion.startLineNumber === lineNumber) {\n        // If current line is not the start of the current fold, go to top line of current fold. If not, go to previous fold.\n        if (lineNumber !== foldingRegion.startLineNumber) {\n            return foldingRegion.startLineNumber;\n        }\n        else {\n            // Find min line number to stay within parent.\n            const expectedParentIndex = foldingRegion.parentIndex;\n            let minLineNumber = 0;\n            if (expectedParentIndex !== -1) {\n                minLineNumber = foldingModel.regions.getStartLineNumber(foldingRegion.parentIndex);\n            }\n            // Find fold at same level.\n            while (foldingRegion !== null) {\n                if (foldingRegion.regionIndex > 0) {\n                    foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex - 1);\n                    // Keep at same level.\n                    if (foldingRegion.startLineNumber <= minLineNumber) {\n                        return null;\n                    }\n                    else if (foldingRegion.parentIndex === expectedParentIndex) {\n                        return foldingRegion.startLineNumber;\n                    }\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n    }\n    else {\n        // Go to last fold that's before the current line.\n        if (foldingModel.regions.length > 0) {\n            foldingRegion = foldingModel.regions.toRegion(foldingModel.regions.length - 1);\n            while (foldingRegion !== null) {\n                // Found fold before current line.\n                if (foldingRegion.startLineNumber < lineNumber) {\n                    return foldingRegion.startLineNumber;\n                }\n                if (foldingRegion.regionIndex > 0) {\n                    foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex - 1);\n                }\n                else {\n                    foldingRegion = null;\n                }\n            }\n        }\n    }\n    return null;\n}\n/**\n * Get line to go to next fold at the same level of current line\n * @param lineNumber the current line number\n * @param foldingModel the folding model\n *\n * @return Next fold start line\n */\nexport function getNextFoldLine(lineNumber, foldingModel) {\n    let foldingRegion = foldingModel.getRegionAtLine(lineNumber);\n    // If on the folding range start line, go to next sibling.\n    if (foldingRegion !== null && foldingRegion.startLineNumber === lineNumber) {\n        // Find max line number to stay within parent.\n        const expectedParentIndex = foldingRegion.parentIndex;\n        let maxLineNumber = 0;\n        if (expectedParentIndex !== -1) {\n            maxLineNumber = foldingModel.regions.getEndLineNumber(foldingRegion.parentIndex);\n        }\n        else if (foldingModel.regions.length === 0) {\n            return null;\n        }\n        else {\n            maxLineNumber = foldingModel.regions.getEndLineNumber(foldingModel.regions.length - 1);\n        }\n        // Find fold at same level.\n        while (foldingRegion !== null) {\n            if (foldingRegion.regionIndex < foldingModel.regions.length) {\n                foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex + 1);\n                // Keep at same level.\n                if (foldingRegion.startLineNumber >= maxLineNumber) {\n                    return null;\n                }\n                else if (foldingRegion.parentIndex === expectedParentIndex) {\n                    return foldingRegion.startLineNumber;\n                }\n            }\n            else {\n                return null;\n            }\n        }\n    }\n    else {\n        // Go to first fold that's after the current line.\n        if (foldingModel.regions.length > 0) {\n            foldingRegion = foldingModel.regions.toRegion(0);\n            while (foldingRegion !== null) {\n                // Found fold after current line.\n                if (foldingRegion.startLineNumber > lineNumber) {\n                    return foldingRegion.startLineNumber;\n                }\n                if (foldingRegion.regionIndex < foldingModel.regions.length) {\n                    foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex + 1);\n                }\n                else {\n                    foldingRegion = null;\n                }\n            }\n        }\n    }\n    return null;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { findFirstInSorted } from '../../../../base/common/arrays.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Range } from '../../../common/core/range.js';\nimport { countEOL } from '../../../common/core/eolCounter.js';\nexport class HiddenRangeModel {\n    get onDidChange() { return this._updateEventEmitter.event; }\n    get hiddenRanges() { return this._hiddenRanges; }\n    constructor(model) {\n        this._updateEventEmitter = new Emitter();\n        this._hasLineChanges = false;\n        this._foldingModel = model;\n        this._foldingModelListener = model.onDidChange(_ => this.updateHiddenRanges());\n        this._hiddenRanges = [];\n        if (model.regions.length) {\n            this.updateHiddenRanges();\n        }\n    }\n    notifyChangeModelContent(e) {\n        if (this._hiddenRanges.length && !this._hasLineChanges) {\n            this._hasLineChanges = e.changes.some(change => {\n                return change.range.endLineNumber !== change.range.startLineNumber || countEOL(change.text)[0] !== 0;\n            });\n        }\n    }\n    updateHiddenRanges() {\n        let updateHiddenAreas = false;\n        const newHiddenAreas = [];\n        let i = 0; // index into hidden\n        let k = 0;\n        let lastCollapsedStart = Number.MAX_VALUE;\n        let lastCollapsedEnd = -1;\n        const ranges = this._foldingModel.regions;\n        for (; i < ranges.length; i++) {\n            if (!ranges.isCollapsed(i)) {\n                continue;\n            }\n            const startLineNumber = ranges.getStartLineNumber(i) + 1; // the first line is not hidden\n            const endLineNumber = ranges.getEndLineNumber(i);\n            if (lastCollapsedStart <= startLineNumber && endLineNumber <= lastCollapsedEnd) {\n                // ignore ranges contained in collapsed regions\n                continue;\n            }\n            if (!updateHiddenAreas && k < this._hiddenRanges.length && this._hiddenRanges[k].startLineNumber === startLineNumber && this._hiddenRanges[k].endLineNumber === endLineNumber) {\n                // reuse the old ranges\n                newHiddenAreas.push(this._hiddenRanges[k]);\n                k++;\n            }\n            else {\n                updateHiddenAreas = true;\n                newHiddenAreas.push(new Range(startLineNumber, 1, endLineNumber, 1));\n            }\n            lastCollapsedStart = startLineNumber;\n            lastCollapsedEnd = endLineNumber;\n        }\n        if (this._hasLineChanges || updateHiddenAreas || k < this._hiddenRanges.length) {\n            this.applyHiddenRanges(newHiddenAreas);\n        }\n    }\n    applyHiddenRanges(newHiddenAreas) {\n        this._hiddenRanges = newHiddenAreas;\n        this._hasLineChanges = false;\n        this._updateEventEmitter.fire(newHiddenAreas);\n    }\n    hasRanges() {\n        return this._hiddenRanges.length > 0;\n    }\n    isHidden(line) {\n        return findRange(this._hiddenRanges, line) !== null;\n    }\n    adjustSelections(selections) {\n        let hasChanges = false;\n        const editorModel = this._foldingModel.textModel;\n        let lastRange = null;\n        const adjustLine = (line) => {\n            if (!lastRange || !isInside(line, lastRange)) {\n                lastRange = findRange(this._hiddenRanges, line);\n            }\n            if (lastRange) {\n                return lastRange.startLineNumber - 1;\n            }\n            return null;\n        };\n        for (let i = 0, len = selections.length; i < len; i++) {\n            let selection = selections[i];\n            const adjustedStartLine = adjustLine(selection.startLineNumber);\n            if (adjustedStartLine) {\n                selection = selection.setStartPosition(adjustedStartLine, editorModel.getLineMaxColumn(adjustedStartLine));\n                hasChanges = true;\n            }\n            const adjustedEndLine = adjustLine(selection.endLineNumber);\n            if (adjustedEndLine) {\n                selection = selection.setEndPosition(adjustedEndLine, editorModel.getLineMaxColumn(adjustedEndLine));\n                hasChanges = true;\n            }\n            selections[i] = selection;\n        }\n        return hasChanges;\n    }\n    dispose() {\n        if (this.hiddenRanges.length > 0) {\n            this._hiddenRanges = [];\n            this._updateEventEmitter.fire(this._hiddenRanges);\n        }\n        if (this._foldingModelListener) {\n            this._foldingModelListener.dispose();\n            this._foldingModelListener = null;\n        }\n    }\n}\nfunction isInside(line, range) {\n    return line >= range.startLineNumber && line <= range.endLineNumber;\n}\nfunction findRange(ranges, line) {\n    const i = findFirstInSorted(ranges, r => line < r.startLineNumber) - 1;\n    if (i >= 0 && ranges[i].endLineNumber >= line) {\n        return ranges[i];\n    }\n    return null;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { computeIndentLevel } from '../../../common/model/utils.js';\nimport { FoldingRegions, MAX_LINE_NUMBER } from './foldingRanges.js';\nconst MAX_FOLDING_REGIONS_FOR_INDENT_DEFAULT = 5000;\nconst ID_INDENT_PROVIDER = 'indent';\nexport class IndentRangeProvider {\n    constructor(editorModel, languageConfigurationService, foldingRangesLimit) {\n        this.editorModel = editorModel;\n        this.languageConfigurationService = languageConfigurationService;\n        this.foldingRangesLimit = foldingRangesLimit;\n        this.id = ID_INDENT_PROVIDER;\n    }\n    dispose() { }\n    compute(cancelationToken) {\n        const foldingRules = this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules;\n        const offSide = foldingRules && !!foldingRules.offSide;\n        const markers = foldingRules && foldingRules.markers;\n        return Promise.resolve(computeRanges(this.editorModel, offSide, markers, this.foldingRangesLimit));\n    }\n}\n// public only for testing\nclass RangesCollector {\n    constructor(foldingRangesLimit) {\n        this._startIndexes = [];\n        this._endIndexes = [];\n        this._indentOccurrences = [];\n        this._length = 0;\n        this._foldingRangesLimit = foldingRangesLimit;\n    }\n    insertFirst(startLineNumber, endLineNumber, indent) {\n        if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\n            return;\n        }\n        const index = this._length;\n        this._startIndexes[index] = startLineNumber;\n        this._endIndexes[index] = endLineNumber;\n        this._length++;\n        if (indent < 1000) {\n            this._indentOccurrences[indent] = (this._indentOccurrences[indent] || 0) + 1;\n        }\n    }\n    toIndentRanges(model) {\n        const limit = this._foldingRangesLimit.limit;\n        if (this._length <= limit) {\n            this._foldingRangesLimit.update(this._length, false);\n            // reverse and create arrays of the exact length\n            const startIndexes = new Uint32Array(this._length);\n            const endIndexes = new Uint32Array(this._length);\n            for (let i = this._length - 1, k = 0; i >= 0; i--, k++) {\n                startIndexes[k] = this._startIndexes[i];\n                endIndexes[k] = this._endIndexes[i];\n            }\n            return new FoldingRegions(startIndexes, endIndexes);\n        }\n        else {\n            this._foldingRangesLimit.update(this._length, limit);\n            let entries = 0;\n            let maxIndent = this._indentOccurrences.length;\n            for (let i = 0; i < this._indentOccurrences.length; i++) {\n                const n = this._indentOccurrences[i];\n                if (n) {\n                    if (n + entries > limit) {\n                        maxIndent = i;\n                        break;\n                    }\n                    entries += n;\n                }\n            }\n            const tabSize = model.getOptions().tabSize;\n            // reverse and create arrays of the exact length\n            const startIndexes = new Uint32Array(limit);\n            const endIndexes = new Uint32Array(limit);\n            for (let i = this._length - 1, k = 0; i >= 0; i--) {\n                const startIndex = this._startIndexes[i];\n                const lineContent = model.getLineContent(startIndex);\n                const indent = computeIndentLevel(lineContent, tabSize);\n                if (indent < maxIndent || (indent === maxIndent && entries++ < limit)) {\n                    startIndexes[k] = startIndex;\n                    endIndexes[k] = this._endIndexes[i];\n                    k++;\n                }\n            }\n            return new FoldingRegions(startIndexes, endIndexes);\n        }\n    }\n}\nconst foldingRangesLimitDefault = {\n    limit: MAX_FOLDING_REGIONS_FOR_INDENT_DEFAULT,\n    update: () => { }\n};\nexport function computeRanges(model, offSide, markers, foldingRangesLimit = foldingRangesLimitDefault) {\n    const tabSize = model.getOptions().tabSize;\n    const result = new RangesCollector(foldingRangesLimit);\n    let pattern = undefined;\n    if (markers) {\n        pattern = new RegExp(`(${markers.start.source})|(?:${markers.end.source})`);\n    }\n    const previousRegions = [];\n    const line = model.getLineCount() + 1;\n    previousRegions.push({ indent: -1, endAbove: line, line }); // sentinel, to make sure there's at least one entry\n    for (let line = model.getLineCount(); line > 0; line--) {\n        const lineContent = model.getLineContent(line);\n        const indent = computeIndentLevel(lineContent, tabSize);\n        let previous = previousRegions[previousRegions.length - 1];\n        if (indent === -1) {\n            if (offSide) {\n                // for offSide languages, empty lines are associated to the previous block\n                // note: the next block is already written to the results, so this only\n                // impacts the end position of the block before\n                previous.endAbove = line;\n            }\n            continue; // only whitespace\n        }\n        let m;\n        if (pattern && (m = lineContent.match(pattern))) {\n            // folding pattern match\n            if (m[1]) { // start pattern match\n                // discard all regions until the folding pattern\n                let i = previousRegions.length - 1;\n                while (i > 0 && previousRegions[i].indent !== -2) {\n                    i--;\n                }\n                if (i > 0) {\n                    previousRegions.length = i + 1;\n                    previous = previousRegions[i];\n                    // new folding range from pattern, includes the end line\n                    result.insertFirst(line, previous.line, indent);\n                    previous.line = line;\n                    previous.indent = indent;\n                    previous.endAbove = line;\n                    continue;\n                }\n                else {\n                    // no end marker found, treat line as a regular line\n                }\n            }\n            else { // end pattern match\n                previousRegions.push({ indent: -2, endAbove: line, line });\n                continue;\n            }\n        }\n        if (previous.indent > indent) {\n            // discard all regions with larger indent\n            do {\n                previousRegions.pop();\n                previous = previousRegions[previousRegions.length - 1];\n            } while (previous.indent > indent);\n            // new folding range\n            const endLineNumber = previous.endAbove - 1;\n            if (endLineNumber - line >= 1) { // needs at east size 1\n                result.insertFirst(line, endLineNumber, indent);\n            }\n        }\n        if (previous.indent === indent) {\n            previous.endAbove = line;\n        }\n        else { // previous.indent < indent\n            // new region with a bigger indent\n            previousRegions.push({ indent, endAbove: line, line });\n        }\n    }\n    return result.toIndentRanges(model);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { MinimapPosition } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { localize } from '../../../../nls.js';\nimport { editorSelectionBackground, iconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nconst foldBackground = registerColor('editor.foldBackground', { light: transparent(editorSelectionBackground, 0.3), dark: transparent(editorSelectionBackground, 0.3), hcDark: null, hcLight: null }, localize('foldBackgroundBackground', \"Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations.\"), true);\nregisterColor('editorGutter.foldingControlForeground', { dark: iconForeground, light: iconForeground, hcDark: iconForeground, hcLight: iconForeground }, localize('editorGutter.foldingControlForeground', 'Color of the folding control in the editor gutter.'));\nexport const foldingExpandedIcon = registerIcon('folding-expanded', Codicon.chevronDown, localize('foldingExpandedIcon', 'Icon for expanded ranges in the editor glyph margin.'));\nexport const foldingCollapsedIcon = registerIcon('folding-collapsed', Codicon.chevronRight, localize('foldingCollapsedIcon', 'Icon for collapsed ranges in the editor glyph margin.'));\nexport const foldingManualCollapsedIcon = registerIcon('folding-manual-collapsed', foldingCollapsedIcon, localize('foldingManualCollapedIcon', 'Icon for manually collapsed ranges in the editor glyph margin.'));\nexport const foldingManualExpandedIcon = registerIcon('folding-manual-expanded', foldingExpandedIcon, localize('foldingManualExpandedIcon', 'Icon for manually expanded ranges in the editor glyph margin.'));\nconst foldedBackgroundMinimap = { color: themeColorFromId(foldBackground), position: MinimapPosition.Inline };\nclass FoldingDecorationProvider {\n    constructor(editor) {\n        this.editor = editor;\n        this.showFoldingControls = 'mouseover';\n        this.showFoldingHighlights = true;\n    }\n    getDecorationOption(isCollapsed, isHidden, isManual) {\n        if (isHidden) { // is inside another collapsed region\n            return FoldingDecorationProvider.HIDDEN_RANGE_DECORATION;\n        }\n        if (this.showFoldingControls === 'never') {\n            if (isCollapsed) {\n                return this.showFoldingHighlights ? FoldingDecorationProvider.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION : FoldingDecorationProvider.NO_CONTROLS_COLLAPSED_RANGE_DECORATION;\n            }\n            return FoldingDecorationProvider.NO_CONTROLS_EXPANDED_RANGE_DECORATION;\n        }\n        if (isCollapsed) {\n            return isManual ?\n                (this.showFoldingHighlights ? FoldingDecorationProvider.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION : FoldingDecorationProvider.MANUALLY_COLLAPSED_VISUAL_DECORATION)\n                : (this.showFoldingHighlights ? FoldingDecorationProvider.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION : FoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION);\n        }\n        else if (this.showFoldingControls === 'mouseover') {\n            return isManual ? FoldingDecorationProvider.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION : FoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION;\n        }\n        else {\n            return isManual ? FoldingDecorationProvider.MANUALLY_EXPANDED_VISUAL_DECORATION : FoldingDecorationProvider.EXPANDED_VISUAL_DECORATION;\n        }\n    }\n    changeDecorations(callback) {\n        return this.editor.changeDecorations(callback);\n    }\n    removeDecorations(decorationIds) {\n        this.editor.removeDecorations(decorationIds);\n    }\n}\nFoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-collapsed-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    afterContentClassName: 'inline-folded',\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingCollapsedIcon),\n});\nFoldingDecorationProvider.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-collapsed-highlighted-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    afterContentClassName: 'inline-folded',\n    className: 'folded-background',\n    minimap: foldedBackgroundMinimap,\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingCollapsedIcon)\n});\nFoldingDecorationProvider.MANUALLY_COLLAPSED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-manually-collapsed-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    afterContentClassName: 'inline-folded',\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingManualCollapsedIcon)\n});\nFoldingDecorationProvider.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-manually-collapsed-highlighted-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    afterContentClassName: 'inline-folded',\n    className: 'folded-background',\n    minimap: foldedBackgroundMinimap,\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingManualCollapsedIcon)\n});\nFoldingDecorationProvider.NO_CONTROLS_COLLAPSED_RANGE_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-no-controls-range-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    afterContentClassName: 'inline-folded',\n    isWholeLine: true\n});\nFoldingDecorationProvider.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-no-controls-range-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    afterContentClassName: 'inline-folded',\n    className: 'folded-background',\n    minimap: foldedBackgroundMinimap,\n    isWholeLine: true\n});\nFoldingDecorationProvider.EXPANDED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-expanded-visual-decoration',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    isWholeLine: true,\n    firstLineDecorationClassName: 'alwaysShowFoldIcons ' + ThemeIcon.asClassName(foldingExpandedIcon)\n});\nFoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-expanded-auto-hide-visual-decoration',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingExpandedIcon)\n});\nFoldingDecorationProvider.MANUALLY_EXPANDED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-manually-expanded-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    isWholeLine: true,\n    firstLineDecorationClassName: 'alwaysShowFoldIcons ' + ThemeIcon.asClassName(foldingManualExpandedIcon)\n});\nFoldingDecorationProvider.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-manually-expanded-auto-hide-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingManualExpandedIcon)\n});\nFoldingDecorationProvider.NO_CONTROLS_EXPANDED_RANGE_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-no-controls-range-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    isWholeLine: true\n});\nFoldingDecorationProvider.HIDDEN_RANGE_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-hidden-range-decoration',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */\n});\nexport { FoldingDecorationProvider };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { FoldingRegions, MAX_LINE_NUMBER } from './foldingRanges.js';\nconst foldingContext = {};\nconst ID_SYNTAX_PROVIDER = 'syntax';\nexport class SyntaxRangeProvider {\n    constructor(editorModel, providers, handleFoldingRangesChange, foldingRangesLimit, fallbackRangeProvider // used when all providers return null\n    ) {\n        this.editorModel = editorModel;\n        this.providers = providers;\n        this.handleFoldingRangesChange = handleFoldingRangesChange;\n        this.foldingRangesLimit = foldingRangesLimit;\n        this.fallbackRangeProvider = fallbackRangeProvider;\n        this.id = ID_SYNTAX_PROVIDER;\n        this.disposables = new DisposableStore();\n        if (fallbackRangeProvider) {\n            this.disposables.add(fallbackRangeProvider);\n        }\n        for (const provider of providers) {\n            if (typeof provider.onDidChange === 'function') {\n                this.disposables.add(provider.onDidChange(handleFoldingRangesChange));\n            }\n        }\n    }\n    compute(cancellationToken) {\n        return collectSyntaxRanges(this.providers, this.editorModel, cancellationToken).then(ranges => {\n            var _a, _b;\n            if (ranges) {\n                const res = sanitizeRanges(ranges, this.foldingRangesLimit);\n                return res;\n            }\n            return (_b = (_a = this.fallbackRangeProvider) === null || _a === void 0 ? void 0 : _a.compute(cancellationToken)) !== null && _b !== void 0 ? _b : null;\n        });\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nfunction collectSyntaxRanges(providers, model, cancellationToken) {\n    let rangeData = null;\n    const promises = providers.map((provider, i) => {\n        return Promise.resolve(provider.provideFoldingRanges(model, foldingContext, cancellationToken)).then(ranges => {\n            if (cancellationToken.isCancellationRequested) {\n                return;\n            }\n            if (Array.isArray(ranges)) {\n                if (!Array.isArray(rangeData)) {\n                    rangeData = [];\n                }\n                const nLines = model.getLineCount();\n                for (const r of ranges) {\n                    if (r.start > 0 && r.end > r.start && r.end <= nLines) {\n                        rangeData.push({ start: r.start, end: r.end, rank: i, kind: r.kind });\n                    }\n                }\n            }\n        }, onUnexpectedExternalError);\n    });\n    return Promise.all(promises).then(_ => {\n        return rangeData;\n    });\n}\nclass RangesCollector {\n    constructor(foldingRangesLimit) {\n        this._startIndexes = [];\n        this._endIndexes = [];\n        this._nestingLevels = [];\n        this._nestingLevelCounts = [];\n        this._types = [];\n        this._length = 0;\n        this._foldingRangesLimit = foldingRangesLimit;\n    }\n    add(startLineNumber, endLineNumber, type, nestingLevel) {\n        if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\n            return;\n        }\n        const index = this._length;\n        this._startIndexes[index] = startLineNumber;\n        this._endIndexes[index] = endLineNumber;\n        this._nestingLevels[index] = nestingLevel;\n        this._types[index] = type;\n        this._length++;\n        if (nestingLevel < 30) {\n            this._nestingLevelCounts[nestingLevel] = (this._nestingLevelCounts[nestingLevel] || 0) + 1;\n        }\n    }\n    toIndentRanges() {\n        const limit = this._foldingRangesLimit.limit;\n        if (this._length <= limit) {\n            this._foldingRangesLimit.update(this._length, false);\n            const startIndexes = new Uint32Array(this._length);\n            const endIndexes = new Uint32Array(this._length);\n            for (let i = 0; i < this._length; i++) {\n                startIndexes[i] = this._startIndexes[i];\n                endIndexes[i] = this._endIndexes[i];\n            }\n            return new FoldingRegions(startIndexes, endIndexes, this._types);\n        }\n        else {\n            this._foldingRangesLimit.update(this._length, limit);\n            let entries = 0;\n            let maxLevel = this._nestingLevelCounts.length;\n            for (let i = 0; i < this._nestingLevelCounts.length; i++) {\n                const n = this._nestingLevelCounts[i];\n                if (n) {\n                    if (n + entries > limit) {\n                        maxLevel = i;\n                        break;\n                    }\n                    entries += n;\n                }\n            }\n            const startIndexes = new Uint32Array(limit);\n            const endIndexes = new Uint32Array(limit);\n            const types = [];\n            for (let i = 0, k = 0; i < this._length; i++) {\n                const level = this._nestingLevels[i];\n                if (level < maxLevel || (level === maxLevel && entries++ < limit)) {\n                    startIndexes[k] = this._startIndexes[i];\n                    endIndexes[k] = this._endIndexes[i];\n                    types[k] = this._types[i];\n                    k++;\n                }\n            }\n            return new FoldingRegions(startIndexes, endIndexes, types);\n        }\n    }\n}\nexport function sanitizeRanges(rangeData, foldingRangesLimit) {\n    const sorted = rangeData.sort((d1, d2) => {\n        let diff = d1.start - d2.start;\n        if (diff === 0) {\n            diff = d1.rank - d2.rank;\n        }\n        return diff;\n    });\n    const collector = new RangesCollector(foldingRangesLimit);\n    let top = undefined;\n    const previous = [];\n    for (const entry of sorted) {\n        if (!top) {\n            top = entry;\n            collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\n        }\n        else {\n            if (entry.start > top.start) {\n                if (entry.end <= top.end) {\n                    previous.push(top);\n                    top = entry;\n                    collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\n                }\n                else {\n                    if (entry.start > top.end) {\n                        do {\n                            top = previous.pop();\n                        } while (top && entry.start > top.end);\n                        if (top) {\n                            previous.push(top);\n                        }\n                        top = entry;\n                    }\n                    collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\n                }\n            }\n        }\n    }\n    return collector.toIndentRanges();\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, Delayer, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, onUnexpectedError } from '../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport * as types from '../../../../base/common/types.js';\nimport './folding.css';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution, registerInstantiatedEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { FoldingRangeKind } from '../../../common/languages.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { FoldingModel, getNextFoldLine, getParentFoldLine as getParentFoldLine, getPreviousFoldLine, setCollapseStateAtLevel, setCollapseStateForMatchingLines, setCollapseStateForRest, setCollapseStateForType, setCollapseStateLevelsDown, setCollapseStateLevelsUp, setCollapseStateUp, toggleCollapseState } from './foldingModel.js';\nimport { HiddenRangeModel } from './hiddenRangeModel.js';\nimport { IndentRangeProvider } from './indentRangeProvider.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { FoldingDecorationProvider } from './foldingDecorations.js';\nimport { FoldingRegions } from './foldingRanges.js';\nimport { SyntaxRangeProvider } from './syntaxRangeProvider.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nconst CONTEXT_FOLDING_ENABLED = new RawContextKey('foldingEnabled', false);\nlet FoldingController = class FoldingController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(FoldingController.ID);\n    }\n    static getFoldingRangeProviders(languageFeaturesService, model) {\n        var _a, _b;\n        const foldingRangeProviders = languageFeaturesService.foldingRangeProvider.ordered(model);\n        return (_b = ((_a = FoldingController._foldingRangeSelector) === null || _a === void 0 ? void 0 : _a.call(FoldingController, foldingRangeProviders, model))) !== null && _b !== void 0 ? _b : foldingRangeProviders;\n    }\n    constructor(editor, contextKeyService, languageConfigurationService, notificationService, languageFeatureDebounceService, languageFeaturesService) {\n        super();\n        this.contextKeyService = contextKeyService;\n        this.languageConfigurationService = languageConfigurationService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.localToDispose = this._register(new DisposableStore());\n        this.editor = editor;\n        this._foldingLimitReporter = new RangesLimitReporter(editor);\n        const options = this.editor.getOptions();\n        this._isEnabled = options.get(40 /* EditorOption.folding */);\n        this._useFoldingProviders = options.get(41 /* EditorOption.foldingStrategy */) !== 'indentation';\n        this._unfoldOnClickAfterEndOfLine = options.get(45 /* EditorOption.unfoldOnClickAfterEndOfLine */);\n        this._restoringViewState = false;\n        this._currentModelHasFoldedImports = false;\n        this._foldingImportsByDefault = options.get(43 /* EditorOption.foldingImportsByDefault */);\n        this.updateDebounceInfo = languageFeatureDebounceService.for(languageFeaturesService.foldingRangeProvider, 'Folding', { min: 200 });\n        this.foldingModel = null;\n        this.hiddenRangeModel = null;\n        this.rangeProvider = null;\n        this.foldingRegionPromise = null;\n        this.foldingModelPromise = null;\n        this.updateScheduler = null;\n        this.cursorChangedScheduler = null;\n        this.mouseDownInfo = null;\n        this.foldingDecorationProvider = new FoldingDecorationProvider(editor);\n        this.foldingDecorationProvider.showFoldingControls = options.get(104 /* EditorOption.showFoldingControls */);\n        this.foldingDecorationProvider.showFoldingHighlights = options.get(42 /* EditorOption.foldingHighlight */);\n        this.foldingEnabled = CONTEXT_FOLDING_ENABLED.bindTo(this.contextKeyService);\n        this.foldingEnabled.set(this._isEnabled);\n        this._register(this.editor.onDidChangeModel(() => this.onModelChanged()));\n        this._register(this.editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(40 /* EditorOption.folding */)) {\n                this._isEnabled = this.editor.getOptions().get(40 /* EditorOption.folding */);\n                this.foldingEnabled.set(this._isEnabled);\n                this.onModelChanged();\n            }\n            if (e.hasChanged(44 /* EditorOption.foldingMaximumRegions */)) {\n                this.onModelChanged();\n            }\n            if (e.hasChanged(104 /* EditorOption.showFoldingControls */) || e.hasChanged(42 /* EditorOption.foldingHighlight */)) {\n                const options = this.editor.getOptions();\n                this.foldingDecorationProvider.showFoldingControls = options.get(104 /* EditorOption.showFoldingControls */);\n                this.foldingDecorationProvider.showFoldingHighlights = options.get(42 /* EditorOption.foldingHighlight */);\n                this.triggerFoldingModelChanged();\n            }\n            if (e.hasChanged(41 /* EditorOption.foldingStrategy */)) {\n                this._useFoldingProviders = this.editor.getOptions().get(41 /* EditorOption.foldingStrategy */) !== 'indentation';\n                this.onFoldingStrategyChanged();\n            }\n            if (e.hasChanged(45 /* EditorOption.unfoldOnClickAfterEndOfLine */)) {\n                this._unfoldOnClickAfterEndOfLine = this.editor.getOptions().get(45 /* EditorOption.unfoldOnClickAfterEndOfLine */);\n            }\n            if (e.hasChanged(43 /* EditorOption.foldingImportsByDefault */)) {\n                this._foldingImportsByDefault = this.editor.getOptions().get(43 /* EditorOption.foldingImportsByDefault */);\n            }\n        }));\n        this.onModelChanged();\n    }\n    /**\n     * Store view state.\n     */\n    saveViewState() {\n        const model = this.editor.getModel();\n        if (!model || !this._isEnabled || model.isTooLargeForTokenization()) {\n            return {};\n        }\n        if (this.foldingModel) { // disposed ?\n            const collapsedRegions = this.foldingModel.getMemento();\n            const provider = this.rangeProvider ? this.rangeProvider.id : undefined;\n            return { collapsedRegions, lineCount: model.getLineCount(), provider, foldedImports: this._currentModelHasFoldedImports };\n        }\n        return undefined;\n    }\n    /**\n     * Restore view state.\n     */\n    restoreViewState(state) {\n        const model = this.editor.getModel();\n        if (!model || !this._isEnabled || model.isTooLargeForTokenization() || !this.hiddenRangeModel) {\n            return;\n        }\n        if (!state) {\n            return;\n        }\n        this._currentModelHasFoldedImports = !!state.foldedImports;\n        if (state.collapsedRegions && state.collapsedRegions.length > 0 && this.foldingModel) {\n            this._restoringViewState = true;\n            try {\n                this.foldingModel.applyMemento(state.collapsedRegions);\n            }\n            finally {\n                this._restoringViewState = false;\n            }\n        }\n    }\n    onModelChanged() {\n        this.localToDispose.clear();\n        const model = this.editor.getModel();\n        if (!this._isEnabled || !model || model.isTooLargeForTokenization()) {\n            // huge files get no view model, so they cannot support hidden areas\n            return;\n        }\n        this._currentModelHasFoldedImports = false;\n        this.foldingModel = new FoldingModel(model, this.foldingDecorationProvider);\n        this.localToDispose.add(this.foldingModel);\n        this.hiddenRangeModel = new HiddenRangeModel(this.foldingModel);\n        this.localToDispose.add(this.hiddenRangeModel);\n        this.localToDispose.add(this.hiddenRangeModel.onDidChange(hr => this.onHiddenRangesChanges(hr)));\n        this.updateScheduler = new Delayer(this.updateDebounceInfo.get(model));\n        this.cursorChangedScheduler = new RunOnceScheduler(() => this.revealCursor(), 200);\n        this.localToDispose.add(this.cursorChangedScheduler);\n        this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(() => this.onFoldingStrategyChanged()));\n        this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(() => this.onFoldingStrategyChanged())); // covers model language changes as well\n        this.localToDispose.add(this.editor.onDidChangeModelContent(e => this.onDidChangeModelContent(e)));\n        this.localToDispose.add(this.editor.onDidChangeCursorPosition(() => this.onCursorPositionChanged()));\n        this.localToDispose.add(this.editor.onMouseDown(e => this.onEditorMouseDown(e)));\n        this.localToDispose.add(this.editor.onMouseUp(e => this.onEditorMouseUp(e)));\n        this.localToDispose.add({\n            dispose: () => {\n                var _a, _b;\n                if (this.foldingRegionPromise) {\n                    this.foldingRegionPromise.cancel();\n                    this.foldingRegionPromise = null;\n                }\n                (_a = this.updateScheduler) === null || _a === void 0 ? void 0 : _a.cancel();\n                this.updateScheduler = null;\n                this.foldingModel = null;\n                this.foldingModelPromise = null;\n                this.hiddenRangeModel = null;\n                this.cursorChangedScheduler = null;\n                (_b = this.rangeProvider) === null || _b === void 0 ? void 0 : _b.dispose();\n                this.rangeProvider = null;\n            }\n        });\n        this.triggerFoldingModelChanged();\n    }\n    onFoldingStrategyChanged() {\n        var _a;\n        (_a = this.rangeProvider) === null || _a === void 0 ? void 0 : _a.dispose();\n        this.rangeProvider = null;\n        this.triggerFoldingModelChanged();\n    }\n    getRangeProvider(editorModel) {\n        if (this.rangeProvider) {\n            return this.rangeProvider;\n        }\n        const indentRangeProvider = new IndentRangeProvider(editorModel, this.languageConfigurationService, this._foldingLimitReporter);\n        this.rangeProvider = indentRangeProvider; // fallback\n        if (this._useFoldingProviders && this.foldingModel) {\n            const selectedProviders = FoldingController.getFoldingRangeProviders(this.languageFeaturesService, editorModel);\n            if (selectedProviders.length > 0) {\n                this.rangeProvider = new SyntaxRangeProvider(editorModel, selectedProviders, () => this.triggerFoldingModelChanged(), this._foldingLimitReporter, indentRangeProvider);\n            }\n        }\n        return this.rangeProvider;\n    }\n    getFoldingModel() {\n        return this.foldingModelPromise;\n    }\n    onDidChangeModelContent(e) {\n        var _a;\n        (_a = this.hiddenRangeModel) === null || _a === void 0 ? void 0 : _a.notifyChangeModelContent(e);\n        this.triggerFoldingModelChanged();\n    }\n    triggerFoldingModelChanged() {\n        if (this.updateScheduler) {\n            if (this.foldingRegionPromise) {\n                this.foldingRegionPromise.cancel();\n                this.foldingRegionPromise = null;\n            }\n            this.foldingModelPromise = this.updateScheduler.trigger(() => {\n                const foldingModel = this.foldingModel;\n                if (!foldingModel) { // null if editor has been disposed, or folding turned off\n                    return null;\n                }\n                const sw = new StopWatch(true);\n                const provider = this.getRangeProvider(foldingModel.textModel);\n                const foldingRegionPromise = this.foldingRegionPromise = createCancelablePromise(token => provider.compute(token));\n                return foldingRegionPromise.then(foldingRanges => {\n                    if (foldingRanges && foldingRegionPromise === this.foldingRegionPromise) { // new request or cancelled in the meantime?\n                        let scrollState;\n                        if (this._foldingImportsByDefault && !this._currentModelHasFoldedImports) {\n                            const hasChanges = foldingRanges.setCollapsedAllOfType(FoldingRangeKind.Imports.value, true);\n                            if (hasChanges) {\n                                scrollState = StableEditorScrollState.capture(this.editor);\n                                this._currentModelHasFoldedImports = hasChanges;\n                            }\n                        }\n                        // some cursors might have moved into hidden regions, make sure they are in expanded regions\n                        const selections = this.editor.getSelections();\n                        const selectionLineNumbers = selections ? selections.map(s => s.startLineNumber) : [];\n                        foldingModel.update(foldingRanges, selectionLineNumbers);\n                        scrollState === null || scrollState === void 0 ? void 0 : scrollState.restore(this.editor);\n                        // update debounce info\n                        const newValue = this.updateDebounceInfo.update(foldingModel.textModel, sw.elapsed());\n                        if (this.updateScheduler) {\n                            this.updateScheduler.defaultDelay = newValue;\n                        }\n                    }\n                    return foldingModel;\n                });\n            }).then(undefined, (err) => {\n                onUnexpectedError(err);\n                return null;\n            });\n        }\n    }\n    onHiddenRangesChanges(hiddenRanges) {\n        if (this.hiddenRangeModel && hiddenRanges.length && !this._restoringViewState) {\n            const selections = this.editor.getSelections();\n            if (selections) {\n                if (this.hiddenRangeModel.adjustSelections(selections)) {\n                    this.editor.setSelections(selections);\n                }\n            }\n        }\n        this.editor.setHiddenAreas(hiddenRanges, this);\n    }\n    onCursorPositionChanged() {\n        if (this.hiddenRangeModel && this.hiddenRangeModel.hasRanges()) {\n            this.cursorChangedScheduler.schedule();\n        }\n    }\n    revealCursor() {\n        const foldingModel = this.getFoldingModel();\n        if (!foldingModel) {\n            return;\n        }\n        foldingModel.then(foldingModel => {\n            if (foldingModel) {\n                const selections = this.editor.getSelections();\n                if (selections && selections.length > 0) {\n                    const toToggle = [];\n                    for (const selection of selections) {\n                        const lineNumber = selection.selectionStartLineNumber;\n                        if (this.hiddenRangeModel && this.hiddenRangeModel.isHidden(lineNumber)) {\n                            toToggle.push(...foldingModel.getAllRegionsAtLine(lineNumber, r => r.isCollapsed && lineNumber > r.startLineNumber));\n                        }\n                    }\n                    if (toToggle.length) {\n                        foldingModel.toggleCollapseState(toToggle);\n                        this.reveal(selections[0].getPosition());\n                    }\n                }\n            }\n        }).then(undefined, onUnexpectedError);\n    }\n    onEditorMouseDown(e) {\n        this.mouseDownInfo = null;\n        if (!this.hiddenRangeModel || !e.target || !e.target.range) {\n            return;\n        }\n        if (!e.event.leftButton && !e.event.middleButton) {\n            return;\n        }\n        const range = e.target.range;\n        let iconClicked = false;\n        switch (e.target.type) {\n            case 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */: {\n                const data = e.target.detail;\n                const offsetLeftInGutter = e.target.element.offsetLeft;\n                const gutterOffsetX = data.offsetX - offsetLeftInGutter;\n                // const gutterOffsetX = data.offsetX - data.glyphMarginWidth - data.lineNumbersWidth - data.glyphMarginLeft;\n                // TODO@joao TODO@alex TODO@martin this is such that we don't collide with dirty diff\n                if (gutterOffsetX < 5) { // the whitespace between the border and the real folding icon border is 5px\n                    return;\n                }\n                iconClicked = true;\n                break;\n            }\n            case 7 /* MouseTargetType.CONTENT_EMPTY */: {\n                if (this._unfoldOnClickAfterEndOfLine && this.hiddenRangeModel.hasRanges()) {\n                    const data = e.target.detail;\n                    if (!data.isAfterLines) {\n                        break;\n                    }\n                }\n                return;\n            }\n            case 6 /* MouseTargetType.CONTENT_TEXT */: {\n                if (this.hiddenRangeModel.hasRanges()) {\n                    const model = this.editor.getModel();\n                    if (model && range.startColumn === model.getLineMaxColumn(range.startLineNumber)) {\n                        break;\n                    }\n                }\n                return;\n            }\n            default:\n                return;\n        }\n        this.mouseDownInfo = { lineNumber: range.startLineNumber, iconClicked };\n    }\n    onEditorMouseUp(e) {\n        const foldingModel = this.foldingModel;\n        if (!foldingModel || !this.mouseDownInfo || !e.target) {\n            return;\n        }\n        const lineNumber = this.mouseDownInfo.lineNumber;\n        const iconClicked = this.mouseDownInfo.iconClicked;\n        const range = e.target.range;\n        if (!range || range.startLineNumber !== lineNumber) {\n            return;\n        }\n        if (iconClicked) {\n            if (e.target.type !== 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */) {\n                return;\n            }\n        }\n        else {\n            const model = this.editor.getModel();\n            if (!model || range.startColumn !== model.getLineMaxColumn(lineNumber)) {\n                return;\n            }\n        }\n        const region = foldingModel.getRegionAtLine(lineNumber);\n        if (region && region.startLineNumber === lineNumber) {\n            const isCollapsed = region.isCollapsed;\n            if (iconClicked || isCollapsed) {\n                const surrounding = e.event.altKey;\n                let toToggle = [];\n                if (surrounding) {\n                    const filter = (otherRegion) => !otherRegion.containedBy(region) && !region.containedBy(otherRegion);\n                    const toMaybeToggle = foldingModel.getRegionsInside(null, filter);\n                    for (const r of toMaybeToggle) {\n                        if (r.isCollapsed) {\n                            toToggle.push(r);\n                        }\n                    }\n                    // if any surrounding regions are folded, unfold those. Otherwise, fold all surrounding\n                    if (toToggle.length === 0) {\n                        toToggle = toMaybeToggle;\n                    }\n                }\n                else {\n                    const recursive = e.event.middleButton || e.event.shiftKey;\n                    if (recursive) {\n                        for (const r of foldingModel.getRegionsInside(region)) {\n                            if (r.isCollapsed === isCollapsed) {\n                                toToggle.push(r);\n                            }\n                        }\n                    }\n                    // when recursive, first only collapse all children. If all are already folded or there are no children, also fold parent.\n                    if (isCollapsed || !recursive || toToggle.length === 0) {\n                        toToggle.push(region);\n                    }\n                }\n                foldingModel.toggleCollapseState(toToggle);\n                this.reveal({ lineNumber, column: 1 });\n            }\n        }\n    }\n    reveal(position) {\n        this.editor.revealPositionInCenterIfOutsideViewport(position, 0 /* ScrollType.Smooth */);\n    }\n};\nFoldingController.ID = 'editor.contrib.folding';\nFoldingController = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, ILanguageConfigurationService),\n    __param(3, INotificationService),\n    __param(4, ILanguageFeatureDebounceService),\n    __param(5, ILanguageFeaturesService)\n], FoldingController);\nexport { FoldingController };\nexport class RangesLimitReporter {\n    constructor(editor) {\n        this.editor = editor;\n        this._onDidChange = new Emitter();\n        this._computed = 0;\n        this._limited = false;\n    }\n    get limit() {\n        return this.editor.getOptions().get(44 /* EditorOption.foldingMaximumRegions */);\n    }\n    update(computed, limited) {\n        if (computed !== this._computed || limited !== this._limited) {\n            this._computed = computed;\n            this._limited = limited;\n            this._onDidChange.fire();\n        }\n    }\n}\nclass FoldingAction extends EditorAction {\n    runEditorCommand(accessor, editor, args) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        const foldingController = FoldingController.get(editor);\n        if (!foldingController) {\n            return;\n        }\n        const foldingModelPromise = foldingController.getFoldingModel();\n        if (foldingModelPromise) {\n            this.reportTelemetry(accessor, editor);\n            return foldingModelPromise.then(foldingModel => {\n                if (foldingModel) {\n                    this.invoke(foldingController, foldingModel, editor, args, languageConfigurationService);\n                    const selection = editor.getSelection();\n                    if (selection) {\n                        foldingController.reveal(selection.getStartPosition());\n                    }\n                }\n            });\n        }\n    }\n    getSelectedLines(editor) {\n        const selections = editor.getSelections();\n        return selections ? selections.map(s => s.startLineNumber) : [];\n    }\n    getLineNumbers(args, editor) {\n        if (args && args.selectionLines) {\n            return args.selectionLines.map(l => l + 1); // to 0-bases line numbers\n        }\n        return this.getSelectedLines(editor);\n    }\n    run(_accessor, _editor) {\n    }\n}\nfunction foldingArgumentsConstraint(args) {\n    if (!types.isUndefined(args)) {\n        if (!types.isObject(args)) {\n            return false;\n        }\n        const foldingArgs = args;\n        if (!types.isUndefined(foldingArgs.levels) && !types.isNumber(foldingArgs.levels)) {\n            return false;\n        }\n        if (!types.isUndefined(foldingArgs.direction) && !types.isString(foldingArgs.direction)) {\n            return false;\n        }\n        if (!types.isUndefined(foldingArgs.selectionLines) && (!Array.isArray(foldingArgs.selectionLines) || !foldingArgs.selectionLines.every(types.isNumber))) {\n            return false;\n        }\n    }\n    return true;\n}\nclass UnfoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfold',\n            label: nls.localize('unfoldAction.label', \"Unfold\"),\n            alias: 'Unfold',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 89 /* KeyCode.BracketRight */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 89 /* KeyCode.BracketRight */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            description: {\n                description: 'Unfold the content in the editor',\n                args: [\n                    {\n                        name: 'Unfold editor argument',\n                        description: `Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\n\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t`,\n                        constraint: foldingArgumentsConstraint,\n                        schema: {\n                            'type': 'object',\n                            'properties': {\n                                'levels': {\n                                    'type': 'number',\n                                    'default': 1\n                                },\n                                'direction': {\n                                    'type': 'string',\n                                    'enum': ['up', 'down'],\n                                    'default': 'down'\n                                },\n                                'selectionLines': {\n                                    'type': 'array',\n                                    'items': {\n                                        'type': 'number'\n                                    }\n                                }\n                            }\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args) {\n        const levels = args && args.levels || 1;\n        const lineNumbers = this.getLineNumbers(args, editor);\n        if (args && args.direction === 'up') {\n            setCollapseStateLevelsUp(foldingModel, false, levels, lineNumbers);\n        }\n        else {\n            setCollapseStateLevelsDown(foldingModel, false, levels, lineNumbers);\n        }\n    }\n}\nclass UnFoldRecursivelyAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfoldRecursively',\n            label: nls.localize('unFoldRecursivelyAction.label', \"Unfold Recursively\"),\n            alias: 'Unfold Recursively',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.BracketRight */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, _args) {\n        setCollapseStateLevelsDown(foldingModel, false, Number.MAX_VALUE, this.getSelectedLines(editor));\n    }\n}\nclass FoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.fold',\n            label: nls.localize('foldAction.label', \"Fold\"),\n            alias: 'Fold',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 87 /* KeyCode.BracketLeft */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 87 /* KeyCode.BracketLeft */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            description: {\n                description: 'Fold the content in the editor',\n                args: [\n                    {\n                        name: 'Fold editor argument',\n                        description: `Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold.\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\n\t\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t\tIf no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.\n\t\t\t\t\t\t`,\n                        constraint: foldingArgumentsConstraint,\n                        schema: {\n                            'type': 'object',\n                            'properties': {\n                                'levels': {\n                                    'type': 'number',\n                                },\n                                'direction': {\n                                    'type': 'string',\n                                    'enum': ['up', 'down'],\n                                },\n                                'selectionLines': {\n                                    'type': 'array',\n                                    'items': {\n                                        'type': 'number'\n                                    }\n                                }\n                            }\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args) {\n        const lineNumbers = this.getLineNumbers(args, editor);\n        const levels = args && args.levels;\n        const direction = args && args.direction;\n        if (typeof levels !== 'number' && typeof direction !== 'string') {\n            // fold the region at the location or if already collapsed, the first uncollapsed parent instead.\n            setCollapseStateUp(foldingModel, true, lineNumbers);\n        }\n        else {\n            if (direction === 'up') {\n                setCollapseStateLevelsUp(foldingModel, true, levels || 1, lineNumbers);\n            }\n            else {\n                setCollapseStateLevelsDown(foldingModel, true, levels || 1, lineNumbers);\n            }\n        }\n    }\n}\nclass ToggleFoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.toggleFold',\n            label: nls.localize('toggleFoldAction.label', \"Toggle Fold\"),\n            alias: 'Toggle Fold',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 42 /* KeyCode.KeyL */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        toggleCollapseState(foldingModel, 1, selectedLines);\n    }\n}\nclass FoldRecursivelyAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldRecursively',\n            label: nls.localize('foldRecursivelyAction.label', \"Fold Recursively\"),\n            alias: 'Fold Recursively',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 87 /* KeyCode.BracketLeft */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        setCollapseStateLevelsDown(foldingModel, true, Number.MAX_VALUE, selectedLines);\n    }\n}\nclass FoldAllBlockCommentsAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldAllBlockComments',\n            label: nls.localize('foldAllBlockComments.label', \"Fold All Block Comments\"),\n            alias: 'Fold All Block Comments',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 85 /* KeyCode.Slash */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args, languageConfigurationService) {\n        if (foldingModel.regions.hasTypes()) {\n            setCollapseStateForType(foldingModel, FoldingRangeKind.Comment.value, true);\n        }\n        else {\n            const editorModel = editor.getModel();\n            if (!editorModel) {\n                return;\n            }\n            const comments = languageConfigurationService.getLanguageConfiguration(editorModel.getLanguageId()).comments;\n            if (comments && comments.blockCommentStartToken) {\n                const regExp = new RegExp('^\\\\s*' + escapeRegExpCharacters(comments.blockCommentStartToken));\n                setCollapseStateForMatchingLines(foldingModel, regExp, true);\n            }\n        }\n    }\n}\nclass FoldAllRegionsAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldAllMarkerRegions',\n            label: nls.localize('foldAllMarkerRegions.label', \"Fold All Regions\"),\n            alias: 'Fold All Regions',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 29 /* KeyCode.Digit8 */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args, languageConfigurationService) {\n        if (foldingModel.regions.hasTypes()) {\n            setCollapseStateForType(foldingModel, FoldingRangeKind.Region.value, true);\n        }\n        else {\n            const editorModel = editor.getModel();\n            if (!editorModel) {\n                return;\n            }\n            const foldingRules = languageConfigurationService.getLanguageConfiguration(editorModel.getLanguageId()).foldingRules;\n            if (foldingRules && foldingRules.markers && foldingRules.markers.start) {\n                const regExp = new RegExp(foldingRules.markers.start);\n                setCollapseStateForMatchingLines(foldingModel, regExp, true);\n            }\n        }\n    }\n}\nclass UnfoldAllRegionsAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfoldAllMarkerRegions',\n            label: nls.localize('unfoldAllMarkerRegions.label', \"Unfold All Regions\"),\n            alias: 'Unfold All Regions',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 30 /* KeyCode.Digit9 */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args, languageConfigurationService) {\n        if (foldingModel.regions.hasTypes()) {\n            setCollapseStateForType(foldingModel, FoldingRangeKind.Region.value, false);\n        }\n        else {\n            const editorModel = editor.getModel();\n            if (!editorModel) {\n                return;\n            }\n            const foldingRules = languageConfigurationService.getLanguageConfiguration(editorModel.getLanguageId()).foldingRules;\n            if (foldingRules && foldingRules.markers && foldingRules.markers.start) {\n                const regExp = new RegExp(foldingRules.markers.start);\n                setCollapseStateForMatchingLines(foldingModel, regExp, false);\n            }\n        }\n    }\n}\nclass FoldAllRegionsExceptAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldAllExcept',\n            label: nls.localize('foldAllExcept.label', \"Fold All Regions Except Selected\"),\n            alias: 'Fold All Regions Except Selected',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 83 /* KeyCode.Minus */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        setCollapseStateForRest(foldingModel, true, selectedLines);\n    }\n}\nclass UnfoldAllRegionsExceptAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfoldAllExcept',\n            label: nls.localize('unfoldAllExcept.label', \"Unfold All Regions Except Selected\"),\n            alias: 'Unfold All Regions Except Selected',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 81 /* KeyCode.Equal */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        setCollapseStateForRest(foldingModel, false, selectedLines);\n    }\n}\nclass FoldAllAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldAll',\n            label: nls.localize('foldAllAction.label', \"Fold All\"),\n            alias: 'Fold All',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 21 /* KeyCode.Digit0 */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, _editor) {\n        setCollapseStateLevelsDown(foldingModel, true);\n    }\n}\nclass UnfoldAllAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfoldAll',\n            label: nls.localize('unfoldAllAction.label', \"Unfold All\"),\n            alias: 'Unfold All',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 40 /* KeyCode.KeyJ */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, _editor) {\n        setCollapseStateLevelsDown(foldingModel, false);\n    }\n}\nclass FoldLevelAction extends FoldingAction {\n    getFoldingLevel() {\n        return parseInt(this.id.substr(FoldLevelAction.ID_PREFIX.length));\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        setCollapseStateAtLevel(foldingModel, this.getFoldingLevel(), true, this.getSelectedLines(editor));\n    }\n}\nFoldLevelAction.ID_PREFIX = 'editor.foldLevel';\nFoldLevelAction.ID = (level) => FoldLevelAction.ID_PREFIX + level;\n/** Action to go to the parent fold of current line */\nclass GotoParentFoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.gotoParentFold',\n            label: nls.localize('gotoParentFold.label', \"Go to Parent Fold\"),\n            alias: 'Go to Parent Fold',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        if (selectedLines.length > 0) {\n            const startLineNumber = getParentFoldLine(selectedLines[0], foldingModel);\n            if (startLineNumber !== null) {\n                editor.setSelection({\n                    startLineNumber: startLineNumber,\n                    startColumn: 1,\n                    endLineNumber: startLineNumber,\n                    endColumn: 1\n                });\n            }\n        }\n    }\n}\n/** Action to go to the previous fold of current line */\nclass GotoPreviousFoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.gotoPreviousFold',\n            label: nls.localize('gotoPreviousFold.label', \"Go to Previous Folding Range\"),\n            alias: 'Go to Previous Folding Range',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        if (selectedLines.length > 0) {\n            const startLineNumber = getPreviousFoldLine(selectedLines[0], foldingModel);\n            if (startLineNumber !== null) {\n                editor.setSelection({\n                    startLineNumber: startLineNumber,\n                    startColumn: 1,\n                    endLineNumber: startLineNumber,\n                    endColumn: 1\n                });\n            }\n        }\n    }\n}\n/** Action to go to the next fold of current line */\nclass GotoNextFoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.gotoNextFold',\n            label: nls.localize('gotoNextFold.label', \"Go to Next Folding Range\"),\n            alias: 'Go to Next Folding Range',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        if (selectedLines.length > 0) {\n            const startLineNumber = getNextFoldLine(selectedLines[0], foldingModel);\n            if (startLineNumber !== null) {\n                editor.setSelection({\n                    startLineNumber: startLineNumber,\n                    startColumn: 1,\n                    endLineNumber: startLineNumber,\n                    endColumn: 1\n                });\n            }\n        }\n    }\n}\nclass FoldRangeFromSelectionAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.createFoldingRangeFromSelection',\n            label: nls.localize('createManualFoldRange.label', \"Create Folding Range from Selection\"),\n            alias: 'Create Folding Range from Selection',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 82 /* KeyCode.Comma */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        var _a;\n        const collapseRanges = [];\n        const selections = editor.getSelections();\n        if (selections) {\n            for (const selection of selections) {\n                let endLineNumber = selection.endLineNumber;\n                if (selection.endColumn === 1) {\n                    --endLineNumber;\n                }\n                if (endLineNumber > selection.startLineNumber) {\n                    collapseRanges.push({\n                        startLineNumber: selection.startLineNumber,\n                        endLineNumber: endLineNumber,\n                        type: undefined,\n                        isCollapsed: true,\n                        source: 1 /* FoldSource.userDefined */\n                    });\n                    editor.setSelection({\n                        startLineNumber: selection.startLineNumber,\n                        startColumn: 1,\n                        endLineNumber: selection.startLineNumber,\n                        endColumn: 1\n                    });\n                }\n            }\n            if (collapseRanges.length > 0) {\n                collapseRanges.sort((a, b) => {\n                    return a.startLineNumber - b.startLineNumber;\n                });\n                const newRanges = FoldingRegions.sanitizeAndMerge(foldingModel.regions, collapseRanges, (_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.getLineCount());\n                foldingModel.updatePost(FoldingRegions.fromFoldRanges(newRanges));\n            }\n        }\n    }\n}\nclass RemoveFoldRangeFromSelectionAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.removeManualFoldingRanges',\n            label: nls.localize('removeManualFoldingRanges.label', \"Remove Manual Folding Ranges\"),\n            alias: 'Remove Manual Folding Ranges',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 84 /* KeyCode.Period */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(foldingController, foldingModel, editor) {\n        const selections = editor.getSelections();\n        if (selections) {\n            const ranges = [];\n            for (const selection of selections) {\n                const { startLineNumber, endLineNumber } = selection;\n                ranges.push(endLineNumber >= startLineNumber ? { startLineNumber, endLineNumber } : { endLineNumber, startLineNumber });\n            }\n            foldingModel.removeManualRanges(ranges);\n            foldingController.triggerFoldingModelChanged();\n        }\n    }\n}\nregisterEditorContribution(FoldingController.ID, FoldingController, 0 /* EditorContributionInstantiation.Eager */); // eager because it uses `saveViewState`/`restoreViewState`\nregisterEditorAction(UnfoldAction);\nregisterEditorAction(UnFoldRecursivelyAction);\nregisterEditorAction(FoldAction);\nregisterEditorAction(FoldRecursivelyAction);\nregisterEditorAction(FoldAllAction);\nregisterEditorAction(UnfoldAllAction);\nregisterEditorAction(FoldAllBlockCommentsAction);\nregisterEditorAction(FoldAllRegionsAction);\nregisterEditorAction(UnfoldAllRegionsAction);\nregisterEditorAction(FoldAllRegionsExceptAction);\nregisterEditorAction(UnfoldAllRegionsExceptAction);\nregisterEditorAction(ToggleFoldAction);\nregisterEditorAction(GotoParentFoldAction);\nregisterEditorAction(GotoPreviousFoldAction);\nregisterEditorAction(GotoNextFoldAction);\nregisterEditorAction(FoldRangeFromSelectionAction);\nregisterEditorAction(RemoveFoldRangeFromSelectionAction);\nfor (let i = 1; i <= 7; i++) {\n    registerInstantiatedEditorAction(new FoldLevelAction({\n        id: FoldLevelAction.ID(i),\n        label: nls.localize('foldLevelAction.label', \"Fold Level {0}\", i),\n        alias: `Fold Level ${i}`,\n        precondition: CONTEXT_FOLDING_ENABLED,\n        kbOpts: {\n            kbExpr: EditorContextKeys.editorTextFocus,\n            primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | (21 /* KeyCode.Digit0 */ + i)),\n            weight: 100 /* KeybindingWeight.EditorContrib */\n        }\n    }));\n}\nCommandsRegistry.registerCommand('_executeFoldingRangeProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource] = args;\n        if (!(resource instanceof URI)) {\n            throw illegalArgument();\n        }\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const model = accessor.get(IModelService).getModel(resource);\n        if (!model) {\n            throw illegalArgument();\n        }\n        const configurationService = accessor.get(IConfigurationService);\n        if (!configurationService.getValue('editor.folding', { resource })) {\n            return [];\n        }\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        const strategy = configurationService.getValue('editor.foldingStrategy', { resource });\n        const foldingLimitReporter = {\n            get limit() {\n                return configurationService.getValue('editor.foldingMaximumRegions', { resource });\n            },\n            update: (computed, limited) => { }\n        };\n        const indentRangeProvider = new IndentRangeProvider(model, languageConfigurationService, foldingLimitReporter);\n        let rangeProvider = indentRangeProvider;\n        if (strategy !== 'indentation') {\n            const providers = FoldingController.getFoldingRangeProviders(languageFeaturesService, model);\n            if (providers.length) {\n                rangeProvider = new SyntaxRangeProvider(model, providers, () => { }, foldingLimitReporter, indentRangeProvider);\n            }\n        }\n        const ranges = yield rangeProvider.compute(CancellationToken.None);\n        const result = [];\n        try {\n            if (ranges) {\n                for (let i = 0; i < ranges.length; i++) {\n                    const type = ranges.getType(i);\n                    result.push({ start: ranges.getStartLineNumber(i), end: ranges.getEndLineNumber(i), kind: type ? FoldingRangeKind.fromValue(type) : undefined });\n                }\n            }\n            return result;\n        }\n        finally {\n            rangeProvider.dispose();\n        }\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorZoom } from '../../../common/config/editorZoom.js';\nimport * as nls from '../../../../nls.js';\nclass EditorFontZoomIn extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomIn',\n            label: nls.localize('EditorFontZoomIn.label', \"Editor Font Zoom In\"),\n            alias: 'Editor Font Zoom In',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() + 1);\n    }\n}\nclass EditorFontZoomOut extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomOut',\n            label: nls.localize('EditorFontZoomOut.label', \"Editor Font Zoom Out\"),\n            alias: 'Editor Font Zoom Out',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() - 1);\n    }\n}\nclass EditorFontZoomReset extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomReset',\n            label: nls.localize('EditorFontZoomReset.label', \"Editor Font Zoom Reset\"),\n            alias: 'Editor Font Zoom Reset',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(0);\n    }\n}\nregisterEditorAction(EditorFontZoomIn);\nregisterEditorAction(EditorFontZoomOut);\nregisterEditorAction(EditorFontZoomReset);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { asArray, isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource, TextModelCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { isCodeEditor } from '../../../browser/editorBrowser.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { FormattingEdit } from './formattingEdit.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ExtensionIdentifier } from '../../../../platform/extensions/common/extensions.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nexport function alertFormattingEdits(edits) {\n    edits = edits.filter(edit => edit.range);\n    if (!edits.length) {\n        return;\n    }\n    let { range } = edits[0];\n    for (let i = 1; i < edits.length; i++) {\n        range = Range.plusRange(range, edits[i].range);\n    }\n    const { startLineNumber, endLineNumber } = range;\n    if (startLineNumber === endLineNumber) {\n        if (edits.length === 1) {\n            alert(nls.localize('hint11', \"Made 1 formatting edit on line {0}\", startLineNumber));\n        }\n        else {\n            alert(nls.localize('hintn1', \"Made {0} formatting edits on line {1}\", edits.length, startLineNumber));\n        }\n    }\n    else {\n        if (edits.length === 1) {\n            alert(nls.localize('hint1n', \"Made 1 formatting edit between lines {0} and {1}\", startLineNumber, endLineNumber));\n        }\n        else {\n            alert(nls.localize('hintnn', \"Made {0} formatting edits between lines {1} and {2}\", edits.length, startLineNumber, endLineNumber));\n        }\n    }\n}\nexport function getRealAndSyntheticDocumentFormattersOrdered(documentFormattingEditProvider, documentRangeFormattingEditProvider, model) {\n    const result = [];\n    const seen = new Set();\n    // (1) add all document formatter\n    const docFormatter = documentFormattingEditProvider.ordered(model);\n    for (const formatter of docFormatter) {\n        result.push(formatter);\n        if (formatter.extensionId) {\n            seen.add(ExtensionIdentifier.toKey(formatter.extensionId));\n        }\n    }\n    // (2) add all range formatter as document formatter (unless the same extension already did that)\n    const rangeFormatter = documentRangeFormattingEditProvider.ordered(model);\n    for (const formatter of rangeFormatter) {\n        if (formatter.extensionId) {\n            if (seen.has(ExtensionIdentifier.toKey(formatter.extensionId))) {\n                continue;\n            }\n            seen.add(ExtensionIdentifier.toKey(formatter.extensionId));\n        }\n        result.push({\n            displayName: formatter.displayName,\n            extensionId: formatter.extensionId,\n            provideDocumentFormattingEdits(model, options, token) {\n                return formatter.provideDocumentRangeFormattingEdits(model, model.getFullModelRange(), options, token);\n            }\n        });\n    }\n    return result;\n}\nclass FormattingConflicts {\n    static setFormatterSelector(selector) {\n        const remove = FormattingConflicts._selectors.unshift(selector);\n        return { dispose: remove };\n    }\n    static select(formatter, document, mode) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (formatter.length === 0) {\n                return undefined;\n            }\n            const selector = Iterable.first(FormattingConflicts._selectors);\n            if (selector) {\n                return yield selector(formatter, document, mode);\n            }\n            return undefined;\n        });\n    }\n}\nFormattingConflicts._selectors = new LinkedList();\nexport { FormattingConflicts };\nexport function formatDocumentRangesWithSelectedProvider(accessor, editorOrModel, rangeOrRanges, mode, progress, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const instaService = accessor.get(IInstantiationService);\n        const { documentRangeFormattingEditProvider: documentRangeFormattingEditProviderRegistry } = accessor.get(ILanguageFeaturesService);\n        const model = isCodeEditor(editorOrModel) ? editorOrModel.getModel() : editorOrModel;\n        const provider = documentRangeFormattingEditProviderRegistry.ordered(model);\n        const selected = yield FormattingConflicts.select(provider, model, mode);\n        if (selected) {\n            progress.report(selected);\n            yield instaService.invokeFunction(formatDocumentRangesWithProvider, selected, editorOrModel, rangeOrRanges, token);\n        }\n    });\n}\nexport function formatDocumentRangesWithProvider(accessor, provider, editorOrModel, rangeOrRanges, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const workerService = accessor.get(IEditorWorkerService);\n        const logService = accessor.get(ILogService);\n        let model;\n        let cts;\n        if (isCodeEditor(editorOrModel)) {\n            model = editorOrModel.getModel();\n            cts = new EditorStateCancellationTokenSource(editorOrModel, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */, undefined, token);\n        }\n        else {\n            model = editorOrModel;\n            cts = new TextModelCancellationTokenSource(editorOrModel, token);\n        }\n        // make sure that ranges don't overlap nor touch each other\n        const ranges = [];\n        let len = 0;\n        for (const range of asArray(rangeOrRanges).sort(Range.compareRangesUsingStarts)) {\n            if (len > 0 && Range.areIntersectingOrTouching(ranges[len - 1], range)) {\n                ranges[len - 1] = Range.fromPositions(ranges[len - 1].getStartPosition(), range.getEndPosition());\n            }\n            else {\n                len = ranges.push(range);\n            }\n        }\n        const computeEdits = (range) => __awaiter(this, void 0, void 0, function* () {\n            var _a, _b;\n            logService.trace(`[format][provideDocumentRangeFormattingEdits] (request)`, (_a = provider.extensionId) === null || _a === void 0 ? void 0 : _a.value, range);\n            const result = (yield provider.provideDocumentRangeFormattingEdits(model, range, model.getFormattingOptions(), cts.token)) || [];\n            logService.trace(`[format][provideDocumentRangeFormattingEdits] (response)`, (_b = provider.extensionId) === null || _b === void 0 ? void 0 : _b.value, result);\n            return result;\n        });\n        const hasIntersectingEdit = (a, b) => {\n            if (!a.length || !b.length) {\n                return false;\n            }\n            // quick exit if the list of ranges are completely unrelated [O(n)]\n            const mergedA = a.reduce((acc, val) => { return Range.plusRange(acc, val.range); }, a[0].range);\n            if (!b.some(x => { return Range.intersectRanges(mergedA, x.range); })) {\n                return false;\n            }\n            // fallback to a complete check [O(n^2)]\n            for (const edit of a) {\n                for (const otherEdit of b) {\n                    if (Range.intersectRanges(edit.range, otherEdit.range)) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        };\n        const allEdits = [];\n        const rawEditsList = [];\n        try {\n            for (const range of ranges) {\n                if (cts.token.isCancellationRequested) {\n                    return true;\n                }\n                rawEditsList.push(yield computeEdits(range));\n            }\n            for (let i = 0; i < ranges.length; ++i) {\n                for (let j = i + 1; j < ranges.length; ++j) {\n                    if (cts.token.isCancellationRequested) {\n                        return true;\n                    }\n                    if (hasIntersectingEdit(rawEditsList[i], rawEditsList[j])) {\n                        // Merge ranges i and j into a single range, recompute the associated edits\n                        const mergedRange = Range.plusRange(ranges[i], ranges[j]);\n                        const edits = yield computeEdits(mergedRange);\n                        ranges.splice(j, 1);\n                        ranges.splice(i, 1);\n                        ranges.push(mergedRange);\n                        rawEditsList.splice(j, 1);\n                        rawEditsList.splice(i, 1);\n                        rawEditsList.push(edits);\n                        // Restart scanning\n                        i = 0;\n                        j = 0;\n                    }\n                }\n            }\n            for (const rawEdits of rawEditsList) {\n                if (cts.token.isCancellationRequested) {\n                    return true;\n                }\n                const minimalEdits = yield workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n                if (minimalEdits) {\n                    allEdits.push(...minimalEdits);\n                }\n            }\n        }\n        finally {\n            cts.dispose();\n        }\n        if (allEdits.length === 0) {\n            return false;\n        }\n        if (isCodeEditor(editorOrModel)) {\n            // use editor to apply edits\n            FormattingEdit.execute(editorOrModel, allEdits, true);\n            alertFormattingEdits(allEdits);\n            editorOrModel.revealPositionInCenterIfOutsideViewport(editorOrModel.getPosition(), 1 /* ScrollType.Immediate */);\n        }\n        else {\n            // use model to apply edits\n            const [{ range }] = allEdits;\n            const initialSelection = new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\n            model.pushEditOperations([initialSelection], allEdits.map(edit => {\n                return {\n                    text: edit.text,\n                    range: Range.lift(edit.range),\n                    forceMoveMarkers: true\n                };\n            }), undoEdits => {\n                for (const { range } of undoEdits) {\n                    if (Range.areIntersectingOrTouching(range, initialSelection)) {\n                        return [new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn)];\n                    }\n                }\n                return null;\n            });\n        }\n        return true;\n    });\n}\nexport function formatDocumentWithSelectedProvider(accessor, editorOrModel, mode, progress, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const instaService = accessor.get(IInstantiationService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const model = isCodeEditor(editorOrModel) ? editorOrModel.getModel() : editorOrModel;\n        const provider = getRealAndSyntheticDocumentFormattersOrdered(languageFeaturesService.documentFormattingEditProvider, languageFeaturesService.documentRangeFormattingEditProvider, model);\n        const selected = yield FormattingConflicts.select(provider, model, mode);\n        if (selected) {\n            progress.report(selected);\n            yield instaService.invokeFunction(formatDocumentWithProvider, selected, editorOrModel, mode, token);\n        }\n    });\n}\nexport function formatDocumentWithProvider(accessor, provider, editorOrModel, mode, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const workerService = accessor.get(IEditorWorkerService);\n        let model;\n        let cts;\n        if (isCodeEditor(editorOrModel)) {\n            model = editorOrModel.getModel();\n            cts = new EditorStateCancellationTokenSource(editorOrModel, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */, undefined, token);\n        }\n        else {\n            model = editorOrModel;\n            cts = new TextModelCancellationTokenSource(editorOrModel, token);\n        }\n        let edits;\n        try {\n            const rawEdits = yield provider.provideDocumentFormattingEdits(model, model.getFormattingOptions(), cts.token);\n            edits = yield workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n            if (cts.token.isCancellationRequested) {\n                return true;\n            }\n        }\n        finally {\n            cts.dispose();\n        }\n        if (!edits || edits.length === 0) {\n            return false;\n        }\n        if (isCodeEditor(editorOrModel)) {\n            // use editor to apply edits\n            FormattingEdit.execute(editorOrModel, edits, mode !== 2 /* FormattingMode.Silent */);\n            if (mode !== 2 /* FormattingMode.Silent */) {\n                alertFormattingEdits(edits);\n                editorOrModel.revealPositionInCenterIfOutsideViewport(editorOrModel.getPosition(), 1 /* ScrollType.Immediate */);\n            }\n        }\n        else {\n            // use model to apply edits\n            const [{ range }] = edits;\n            const initialSelection = new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\n            model.pushEditOperations([initialSelection], edits.map(edit => {\n                return {\n                    text: edit.text,\n                    range: Range.lift(edit.range),\n                    forceMoveMarkers: true\n                };\n            }), undoEdits => {\n                for (const { range } of undoEdits) {\n                    if (Range.areIntersectingOrTouching(range, initialSelection)) {\n                        return [new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn)];\n                    }\n                }\n                return null;\n            });\n        }\n        return true;\n    });\n}\nexport function getDocumentRangeFormattingEditsUntilResult(workerService, languageFeaturesService, model, range, options, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = languageFeaturesService.documentRangeFormattingEditProvider.ordered(model);\n        for (const provider of providers) {\n            const rawEdits = yield Promise.resolve(provider.provideDocumentRangeFormattingEdits(model, range, options, token)).catch(onUnexpectedExternalError);\n            if (isNonEmptyArray(rawEdits)) {\n                return yield workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n            }\n        }\n        return undefined;\n    });\n}\nexport function getDocumentFormattingEditsUntilResult(workerService, languageFeaturesService, model, options, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = getRealAndSyntheticDocumentFormattersOrdered(languageFeaturesService.documentFormattingEditProvider, languageFeaturesService.documentRangeFormattingEditProvider, model);\n        for (const provider of providers) {\n            const rawEdits = yield Promise.resolve(provider.provideDocumentFormattingEdits(model, options, token)).catch(onUnexpectedExternalError);\n            if (isNonEmptyArray(rawEdits)) {\n                return yield workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n            }\n        }\n        return undefined;\n    });\n}\nexport function getOnTypeFormattingEdits(workerService, languageFeaturesService, model, position, ch, options, token) {\n    const providers = languageFeaturesService.onTypeFormattingEditProvider.ordered(model);\n    if (providers.length === 0) {\n        return Promise.resolve(undefined);\n    }\n    if (providers[0].autoFormatTriggerCharacters.indexOf(ch) < 0) {\n        return Promise.resolve(undefined);\n    }\n    return Promise.resolve(providers[0].provideOnTypeFormattingEdits(model, position, ch, options, token)).catch(onUnexpectedExternalError).then(edits => {\n        return workerService.computeMoreMinimalEdits(model.uri, edits);\n    });\n}\nCommandsRegistry.registerCommand('_executeFormatRangeProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, range, options] = args;\n        assertType(URI.isUri(resource));\n        assertType(Range.isIRange(range));\n        const resolverService = accessor.get(ITextModelService);\n        const workerService = accessor.get(IEditorWorkerService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const reference = yield resolverService.createModelReference(resource);\n        try {\n            return getDocumentRangeFormattingEditsUntilResult(workerService, languageFeaturesService, reference.object.textEditorModel, Range.lift(range), options, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\nCommandsRegistry.registerCommand('_executeFormatDocumentProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, options] = args;\n        assertType(URI.isUri(resource));\n        const resolverService = accessor.get(ITextModelService);\n        const workerService = accessor.get(IEditorWorkerService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const reference = yield resolverService.createModelReference(resource);\n        try {\n            return getDocumentFormattingEditsUntilResult(workerService, languageFeaturesService, reference.object.textEditorModel, options, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\nCommandsRegistry.registerCommand('_executeFormatOnTypeProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, position, ch, options] = args;\n        assertType(URI.isUri(resource));\n        assertType(Position.isIPosition(position));\n        assertType(typeof ch === 'string');\n        const resolverService = accessor.get(ITextModelService);\n        const workerService = accessor.get(IEditorWorkerService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const reference = yield resolverService.createModelReference(resource);\n        try {\n            return getOnTypeFormattingEdits(workerService, languageFeaturesService, reference.object.textEditorModel, Position.lift(position), ch, options, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { alertFormattingEdits, formatDocumentRangesWithSelectedProvider, formatDocumentWithSelectedProvider, getOnTypeFormattingEdits } from './format.js';\nimport { FormattingEdit } from './formattingEdit.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IEditorProgressService, Progress } from '../../../../platform/progress/common/progress.js';\nlet FormatOnType = class FormatOnType {\n    constructor(_editor, _languageFeaturesService, _workerService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._workerService = _workerService;\n        this._disposables = new DisposableStore();\n        this._sessionDisposables = new DisposableStore();\n        this._disposables.add(_languageFeaturesService.onTypeFormattingEditProvider.onDidChange(this._update, this));\n        this._disposables.add(_editor.onDidChangeModel(() => this._update()));\n        this._disposables.add(_editor.onDidChangeModelLanguage(() => this._update()));\n        this._disposables.add(_editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(53 /* EditorOption.formatOnType */)) {\n                this._update();\n            }\n        }));\n        this._update();\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._sessionDisposables.dispose();\n    }\n    _update() {\n        // clean up\n        this._sessionDisposables.clear();\n        // we are disabled\n        if (!this._editor.getOption(53 /* EditorOption.formatOnType */)) {\n            return;\n        }\n        // no model\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        // no support\n        const [support] = this._languageFeaturesService.onTypeFormattingEditProvider.ordered(model);\n        if (!support || !support.autoFormatTriggerCharacters) {\n            return;\n        }\n        // register typing listeners that will trigger the format\n        const triggerChars = new CharacterSet();\n        for (const ch of support.autoFormatTriggerCharacters) {\n            triggerChars.add(ch.charCodeAt(0));\n        }\n        this._sessionDisposables.add(this._editor.onDidType((text) => {\n            const lastCharCode = text.charCodeAt(text.length - 1);\n            if (triggerChars.has(lastCharCode)) {\n                this._trigger(String.fromCharCode(lastCharCode));\n            }\n        }));\n    }\n    _trigger(ch) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (this._editor.getSelections().length > 1 || !this._editor.getSelection().isEmpty()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const position = this._editor.getPosition();\n        const cts = new CancellationTokenSource();\n        // install a listener that checks if edits happens before the\n        // position on which we format right now. If so, we won't\n        // apply the format edits\n        const unbind = this._editor.onDidChangeModelContent((e) => {\n            if (e.isFlush) {\n                // a model.setValue() was called\n                // cancel only once\n                cts.cancel();\n                unbind.dispose();\n                return;\n            }\n            for (let i = 0, len = e.changes.length; i < len; i++) {\n                const change = e.changes[i];\n                if (change.range.endLineNumber <= position.lineNumber) {\n                    // cancel only once\n                    cts.cancel();\n                    unbind.dispose();\n                    return;\n                }\n            }\n        });\n        getOnTypeFormattingEdits(this._workerService, this._languageFeaturesService, model, position, ch, model.getFormattingOptions(), cts.token).then(edits => {\n            if (cts.token.isCancellationRequested) {\n                return;\n            }\n            if (isNonEmptyArray(edits)) {\n                FormattingEdit.execute(this._editor, edits, true);\n                alertFormattingEdits(edits);\n            }\n        }).finally(() => {\n            unbind.dispose();\n        });\n    }\n};\nFormatOnType.ID = 'editor.contrib.autoFormat';\nFormatOnType = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IEditorWorkerService)\n], FormatOnType);\nlet FormatOnPaste = class FormatOnPaste {\n    constructor(editor, _languageFeaturesService, _instantiationService) {\n        this.editor = editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._instantiationService = _instantiationService;\n        this._callOnDispose = new DisposableStore();\n        this._callOnModel = new DisposableStore();\n        this._callOnDispose.add(editor.onDidChangeConfiguration(() => this._update()));\n        this._callOnDispose.add(editor.onDidChangeModel(() => this._update()));\n        this._callOnDispose.add(editor.onDidChangeModelLanguage(() => this._update()));\n        this._callOnDispose.add(_languageFeaturesService.documentRangeFormattingEditProvider.onDidChange(this._update, this));\n    }\n    dispose() {\n        this._callOnDispose.dispose();\n        this._callOnModel.dispose();\n    }\n    _update() {\n        // clean up\n        this._callOnModel.clear();\n        // we are disabled\n        if (!this.editor.getOption(52 /* EditorOption.formatOnPaste */)) {\n            return;\n        }\n        // no model\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        // no formatter\n        if (!this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())) {\n            return;\n        }\n        this._callOnModel.add(this.editor.onDidPaste(({ range }) => this._trigger(range)));\n    }\n    _trigger(range) {\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        if (this.editor.getSelections().length > 1) {\n            return;\n        }\n        this._instantiationService.invokeFunction(formatDocumentRangesWithSelectedProvider, this.editor, range, 2 /* FormattingMode.Silent */, Progress.None, CancellationToken.None).catch(onUnexpectedError);\n    }\n};\nFormatOnPaste.ID = 'editor.contrib.formatOnPaste';\nFormatOnPaste = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IInstantiationService)\n], FormatOnPaste);\nclass FormatDocumentAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.formatDocument',\n            label: nls.localize('formatDocument.label', \"Format Document\"),\n            alias: 'Format Document',\n            precondition: ContextKeyExpr.and(EditorContextKeys.notInCompositeEditor, EditorContextKeys.writable, EditorContextKeys.hasDocumentFormattingProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 36 /* KeyCode.KeyF */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 39 /* KeyCode.KeyI */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.3\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (editor.hasModel()) {\n                const instaService = accessor.get(IInstantiationService);\n                const progressService = accessor.get(IEditorProgressService);\n                yield progressService.showWhile(instaService.invokeFunction(formatDocumentWithSelectedProvider, editor, 1 /* FormattingMode.Explicit */, Progress.None, CancellationToken.None), 250);\n            }\n        });\n    }\n}\nclass FormatSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.formatSelection',\n            label: nls.localize('formatSelection.label', \"Format Selection\"),\n            alias: 'Format Selection',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasDocumentSelectionFormattingProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 36 /* KeyCode.KeyF */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                when: EditorContextKeys.hasNonEmptySelection,\n                group: '1_modification',\n                order: 1.31\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.hasModel()) {\n                return;\n            }\n            const instaService = accessor.get(IInstantiationService);\n            const model = editor.getModel();\n            const ranges = editor.getSelections().map(range => {\n                return range.isEmpty()\n                    ? new Range(range.startLineNumber, 1, range.startLineNumber, model.getLineMaxColumn(range.startLineNumber))\n                    : range;\n            });\n            const progressService = accessor.get(IEditorProgressService);\n            yield progressService.showWhile(instaService.invokeFunction(formatDocumentRangesWithSelectedProvider, editor, ranges, 1 /* FormattingMode.Explicit */, Progress.None, CancellationToken.None), 250);\n        });\n    }\n}\nregisterEditorContribution(FormatOnType.ID, FormatOnType, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorContribution(FormatOnPaste.ID, FormatOnPaste, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(FormatDocumentAction);\nregisterEditorAction(FormatSelectionAction);\n// this is the old format action that does both (format document OR format selection)\n// and we keep it here such that existing keybinding configurations etc will still work\nCommandsRegistry.registerCommand('editor.action.format', (accessor) => __awaiter(void 0, void 0, void 0, function* () {\n    const editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n    if (!editor || !editor.hasModel()) {\n        return;\n    }\n    const commandService = accessor.get(ICommandService);\n    if (editor.getSelection().isEmpty()) {\n        yield commandService.executeCommand('editor.action.formatDocument');\n    }\n    else {\n        yield commandService.executeCommand('editor.action.formatSelection');\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nexport class FormattingEdit {\n    static _handleEolEdits(editor, edits) {\n        let newEol = undefined;\n        const singleEdits = [];\n        for (const edit of edits) {\n            if (typeof edit.eol === 'number') {\n                newEol = edit.eol;\n            }\n            if (edit.range && typeof edit.text === 'string') {\n                singleEdits.push(edit);\n            }\n        }\n        if (typeof newEol === 'number') {\n            if (editor.hasModel()) {\n                editor.getModel().pushEOL(newEol);\n            }\n        }\n        return singleEdits;\n    }\n    static _isFullModelReplaceEdit(editor, edit) {\n        if (!editor.hasModel()) {\n            return false;\n        }\n        const model = editor.getModel();\n        const editRange = model.validateRange(edit.range);\n        const fullModelRange = model.getFullModelRange();\n        return fullModelRange.equalsRange(editRange);\n    }\n    static execute(editor, _edits, addUndoStops) {\n        if (addUndoStops) {\n            editor.pushUndoStop();\n        }\n        const scrollState = StableEditorScrollState.capture(editor);\n        const edits = FormattingEdit._handleEolEdits(editor, _edits);\n        if (edits.length === 1 && FormattingEdit._isFullModelReplaceEdit(editor, edits[0])) {\n            // We use replace semantics and hope that markers stay put...\n            editor.executeEdits('formatEditsCommand', edits.map(edit => EditOperation.replace(Range.lift(edit.range), edit.text)));\n        }\n        else {\n            editor.executeEdits('formatEditsCommand', edits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n        }\n        if (addUndoStops) {\n            editor.pushUndoStop();\n        }\n        scrollState.restoreRelativeVerticalPositionOfCursor(editor);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { binarySearch } from '../../../../base/common/arrays.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { compare } from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport class MarkerCoordinate {\n    constructor(marker, index, total) {\n        this.marker = marker;\n        this.index = index;\n        this.total = total;\n    }\n}\nlet MarkerList = class MarkerList {\n    constructor(resourceFilter, _markerService, _configService) {\n        this._markerService = _markerService;\n        this._configService = _configService;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._dispoables = new DisposableStore();\n        this._markers = [];\n        this._nextIdx = -1;\n        if (URI.isUri(resourceFilter)) {\n            this._resourceFilter = uri => uri.toString() === resourceFilter.toString();\n        }\n        else if (resourceFilter) {\n            this._resourceFilter = resourceFilter;\n        }\n        const compareOrder = this._configService.getValue('problems.sortOrder');\n        const compareMarker = (a, b) => {\n            let res = compare(a.resource.toString(), b.resource.toString());\n            if (res === 0) {\n                if (compareOrder === 'position') {\n                    res = Range.compareRangesUsingStarts(a, b) || MarkerSeverity.compare(a.severity, b.severity);\n                }\n                else {\n                    res = MarkerSeverity.compare(a.severity, b.severity) || Range.compareRangesUsingStarts(a, b);\n                }\n            }\n            return res;\n        };\n        const updateMarker = () => {\n            this._markers = this._markerService.read({\n                resource: URI.isUri(resourceFilter) ? resourceFilter : undefined,\n                severities: MarkerSeverity.Error | MarkerSeverity.Warning | MarkerSeverity.Info\n            });\n            if (typeof resourceFilter === 'function') {\n                this._markers = this._markers.filter(m => this._resourceFilter(m.resource));\n            }\n            this._markers.sort(compareMarker);\n        };\n        updateMarker();\n        this._dispoables.add(_markerService.onMarkerChanged(uris => {\n            if (!this._resourceFilter || uris.some(uri => this._resourceFilter(uri))) {\n                updateMarker();\n                this._nextIdx = -1;\n                this._onDidChange.fire();\n            }\n        }));\n    }\n    dispose() {\n        this._dispoables.dispose();\n        this._onDidChange.dispose();\n    }\n    matches(uri) {\n        if (!this._resourceFilter && !uri) {\n            return true;\n        }\n        if (!this._resourceFilter || !uri) {\n            return false;\n        }\n        return this._resourceFilter(uri);\n    }\n    get selected() {\n        const marker = this._markers[this._nextIdx];\n        return marker && new MarkerCoordinate(marker, this._nextIdx + 1, this._markers.length);\n    }\n    _initIdx(model, position, fwd) {\n        let found = false;\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === model.uri.toString());\n        if (idx < 0) {\n            idx = binarySearch(this._markers, { resource: model.uri }, (a, b) => compare(a.resource.toString(), b.resource.toString()));\n            if (idx < 0) {\n                idx = ~idx;\n            }\n        }\n        for (let i = idx; i < this._markers.length; i++) {\n            let range = Range.lift(this._markers[i]);\n            if (range.isEmpty()) {\n                const word = model.getWordAtPosition(range.getStartPosition());\n                if (word) {\n                    range = new Range(range.startLineNumber, word.startColumn, range.startLineNumber, word.endColumn);\n                }\n            }\n            if (position && (range.containsPosition(position) || position.isBeforeOrEqual(range.getStartPosition()))) {\n                this._nextIdx = i;\n                found = true;\n                break;\n            }\n            if (this._markers[i].resource.toString() !== model.uri.toString()) {\n                break;\n            }\n        }\n        if (!found) {\n            // after the last change\n            this._nextIdx = fwd ? 0 : this._markers.length - 1;\n        }\n        if (this._nextIdx < 0) {\n            this._nextIdx = this._markers.length - 1;\n        }\n    }\n    resetIndex() {\n        this._nextIdx = -1;\n    }\n    move(fwd, model, position) {\n        if (this._markers.length === 0) {\n            return false;\n        }\n        const oldIdx = this._nextIdx;\n        if (this._nextIdx === -1) {\n            this._initIdx(model, position, fwd);\n        }\n        else if (fwd) {\n            this._nextIdx = (this._nextIdx + 1) % this._markers.length;\n        }\n        else if (!fwd) {\n            this._nextIdx = (this._nextIdx - 1 + this._markers.length) % this._markers.length;\n        }\n        if (oldIdx !== this._nextIdx) {\n            return true;\n        }\n        return false;\n    }\n    find(uri, position) {\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === uri.toString());\n        if (idx < 0) {\n            return undefined;\n        }\n        for (; idx < this._markers.length; idx++) {\n            if (Range.containsPosition(this._markers[idx], position)) {\n                return new MarkerCoordinate(this._markers[idx], idx + 1, this._markers.length);\n            }\n        }\n        return undefined;\n    }\n};\nMarkerList = __decorate([\n    __param(1, IMarkerService),\n    __param(2, IConfigurationService)\n], MarkerList);\nexport { MarkerList };\nexport const IMarkerNavigationService = createDecorator('IMarkerNavigationService');\nlet MarkerNavigationService = class MarkerNavigationService {\n    constructor(_markerService, _configService) {\n        this._markerService = _markerService;\n        this._configService = _configService;\n        this._provider = new LinkedList();\n    }\n    getMarkerList(resource) {\n        for (const provider of this._provider) {\n            const result = provider.getMarkerList(resource);\n            if (result) {\n                return result;\n            }\n        }\n        // default\n        return new MarkerList(resource, this._markerService, this._configService);\n    }\n};\nMarkerNavigationService = __decorate([\n    __param(0, IMarkerService),\n    __param(1, IConfigurationService)\n], MarkerNavigationService);\nregisterSingleton(IMarkerNavigationService, MarkerNavigationService, 1 /* InstantiationType.Delayed */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { splitLines } from '../../../../base/common/strings.js';\nimport './media/gotoErrorWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { peekViewTitleForeground, peekViewTitleInfoForeground, PeekViewWidget } from '../../peekView/browser/peekView.js';\nimport * as nls from '../../../../nls.js';\nimport { createAndFillInActionBarActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { SeverityIcon } from '../../../../platform/severityIcon/browser/severityIcon.js';\nimport { contrastBorder, editorBackground, editorErrorBorder, editorErrorForeground, editorInfoBorder, editorInfoForeground, editorWarningBorder, editorWarningForeground, oneOf, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nclass MessageWidget {\n    constructor(parent, editor, onRelatedInformation, _openerService, _labelService) {\n        this._openerService = _openerService;\n        this._labelService = _labelService;\n        this._lines = 0;\n        this._longestLineLength = 0;\n        this._relatedDiagnostics = new WeakMap();\n        this._disposables = new DisposableStore();\n        this._editor = editor;\n        const domNode = document.createElement('div');\n        domNode.className = 'descriptioncontainer';\n        this._messageBlock = document.createElement('div');\n        this._messageBlock.classList.add('message');\n        this._messageBlock.setAttribute('aria-live', 'assertive');\n        this._messageBlock.setAttribute('role', 'alert');\n        domNode.appendChild(this._messageBlock);\n        this._relatedBlock = document.createElement('div');\n        domNode.appendChild(this._relatedBlock);\n        this._disposables.add(dom.addStandardDisposableListener(this._relatedBlock, 'click', event => {\n            event.preventDefault();\n            const related = this._relatedDiagnostics.get(event.target);\n            if (related) {\n                onRelatedInformation(related);\n            }\n        }));\n        this._scrollable = new ScrollableElement(domNode, {\n            horizontal: 1 /* ScrollbarVisibility.Auto */,\n            vertical: 1 /* ScrollbarVisibility.Auto */,\n            useShadows: false,\n            horizontalScrollbarSize: 6,\n            verticalScrollbarSize: 6\n        });\n        parent.appendChild(this._scrollable.getDomNode());\n        this._disposables.add(this._scrollable.onScroll(e => {\n            domNode.style.left = `-${e.scrollLeft}px`;\n            domNode.style.top = `-${e.scrollTop}px`;\n        }));\n        this._disposables.add(this._scrollable);\n    }\n    dispose() {\n        dispose(this._disposables);\n    }\n    update(marker) {\n        const { source, message, relatedInformation, code } = marker;\n        let sourceAndCodeLength = ((source === null || source === void 0 ? void 0 : source.length) || 0) + '()'.length;\n        if (code) {\n            if (typeof code === 'string') {\n                sourceAndCodeLength += code.length;\n            }\n            else {\n                sourceAndCodeLength += code.value.length;\n            }\n        }\n        const lines = splitLines(message);\n        this._lines = lines.length;\n        this._longestLineLength = 0;\n        for (const line of lines) {\n            this._longestLineLength = Math.max(line.length + sourceAndCodeLength, this._longestLineLength);\n        }\n        dom.clearNode(this._messageBlock);\n        this._messageBlock.setAttribute('aria-label', this.getAriaLabel(marker));\n        this._editor.applyFontInfo(this._messageBlock);\n        let lastLineElement = this._messageBlock;\n        for (const line of lines) {\n            lastLineElement = document.createElement('div');\n            lastLineElement.innerText = line;\n            if (line === '') {\n                lastLineElement.style.height = this._messageBlock.style.lineHeight;\n            }\n            this._messageBlock.appendChild(lastLineElement);\n        }\n        if (source || code) {\n            const detailsElement = document.createElement('span');\n            detailsElement.classList.add('details');\n            lastLineElement.appendChild(detailsElement);\n            if (source) {\n                const sourceElement = document.createElement('span');\n                sourceElement.innerText = source;\n                sourceElement.classList.add('source');\n                detailsElement.appendChild(sourceElement);\n            }\n            if (code) {\n                if (typeof code === 'string') {\n                    const codeElement = document.createElement('span');\n                    codeElement.innerText = `(${code})`;\n                    codeElement.classList.add('code');\n                    detailsElement.appendChild(codeElement);\n                }\n                else {\n                    this._codeLink = dom.$('a.code-link');\n                    this._codeLink.setAttribute('href', `${code.target.toString()}`);\n                    this._codeLink.onclick = (e) => {\n                        this._openerService.open(code.target, { allowCommands: true });\n                        e.preventDefault();\n                        e.stopPropagation();\n                    };\n                    const codeElement = dom.append(this._codeLink, dom.$('span'));\n                    codeElement.innerText = code.value;\n                    detailsElement.appendChild(this._codeLink);\n                }\n            }\n        }\n        dom.clearNode(this._relatedBlock);\n        this._editor.applyFontInfo(this._relatedBlock);\n        if (isNonEmptyArray(relatedInformation)) {\n            const relatedInformationNode = this._relatedBlock.appendChild(document.createElement('div'));\n            relatedInformationNode.style.paddingTop = `${Math.floor(this._editor.getOption(63 /* EditorOption.lineHeight */) * 0.66)}px`;\n            this._lines += 1;\n            for (const related of relatedInformation) {\n                const container = document.createElement('div');\n                const relatedResource = document.createElement('a');\n                relatedResource.classList.add('filename');\n                relatedResource.innerText = `${this._labelService.getUriBasenameLabel(related.resource)}(${related.startLineNumber}, ${related.startColumn}): `;\n                relatedResource.title = this._labelService.getUriLabel(related.resource);\n                this._relatedDiagnostics.set(relatedResource, related);\n                const relatedMessage = document.createElement('span');\n                relatedMessage.innerText = related.message;\n                container.appendChild(relatedResource);\n                container.appendChild(relatedMessage);\n                this._lines += 1;\n                relatedInformationNode.appendChild(container);\n            }\n        }\n        const fontInfo = this._editor.getOption(47 /* EditorOption.fontInfo */);\n        const scrollWidth = Math.ceil(fontInfo.typicalFullwidthCharacterWidth * this._longestLineLength * 0.75);\n        const scrollHeight = fontInfo.lineHeight * this._lines;\n        this._scrollable.setScrollDimensions({ scrollWidth, scrollHeight });\n    }\n    layout(height, width) {\n        this._scrollable.getDomNode().style.height = `${height}px`;\n        this._scrollable.getDomNode().style.width = `${width}px`;\n        this._scrollable.setScrollDimensions({ width, height });\n    }\n    getHeightInLines() {\n        return Math.min(17, this._lines);\n    }\n    getAriaLabel(marker) {\n        let severityLabel = '';\n        switch (marker.severity) {\n            case MarkerSeverity.Error:\n                severityLabel = nls.localize('Error', \"Error\");\n                break;\n            case MarkerSeverity.Warning:\n                severityLabel = nls.localize('Warning', \"Warning\");\n                break;\n            case MarkerSeverity.Info:\n                severityLabel = nls.localize('Info', \"Info\");\n                break;\n            case MarkerSeverity.Hint:\n                severityLabel = nls.localize('Hint', \"Hint\");\n                break;\n        }\n        let ariaLabel = nls.localize('marker aria', \"{0} at {1}. \", severityLabel, marker.startLineNumber + ':' + marker.startColumn);\n        const model = this._editor.getModel();\n        if (model && (marker.startLineNumber <= model.getLineCount()) && (marker.startLineNumber >= 1)) {\n            const lineContent = model.getLineContent(marker.startLineNumber);\n            ariaLabel = `${lineContent}, ${ariaLabel}`;\n        }\n        return ariaLabel;\n    }\n}\nlet MarkerNavigationWidget = class MarkerNavigationWidget extends PeekViewWidget {\n    constructor(editor, _themeService, _openerService, _menuService, instantiationService, _contextKeyService, _labelService) {\n        super(editor, { showArrow: true, showFrame: true, isAccessible: true, frameWidth: 1 }, instantiationService);\n        this._themeService = _themeService;\n        this._openerService = _openerService;\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._labelService = _labelService;\n        this._callOnDispose = new DisposableStore();\n        this._onDidSelectRelatedInformation = new Emitter();\n        this.onDidSelectRelatedInformation = this._onDidSelectRelatedInformation.event;\n        this._severity = MarkerSeverity.Warning;\n        this._backgroundColor = Color.white;\n        this._applyTheme(_themeService.getColorTheme());\n        this._callOnDispose.add(_themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this.create();\n    }\n    _applyTheme(theme) {\n        this._backgroundColor = theme.getColor(editorMarkerNavigationBackground);\n        let colorId = editorMarkerNavigationError;\n        let headerBackground = editorMarkerNavigationErrorHeader;\n        if (this._severity === MarkerSeverity.Warning) {\n            colorId = editorMarkerNavigationWarning;\n            headerBackground = editorMarkerNavigationWarningHeader;\n        }\n        else if (this._severity === MarkerSeverity.Info) {\n            colorId = editorMarkerNavigationInfo;\n            headerBackground = editorMarkerNavigationInfoHeader;\n        }\n        const frameColor = theme.getColor(colorId);\n        const headerBg = theme.getColor(headerBackground);\n        this.style({\n            arrowColor: frameColor,\n            frameColor: frameColor,\n            headerBackgroundColor: headerBg,\n            primaryHeadingColor: theme.getColor(peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(peekViewTitleInfoForeground)\n        }); // style() will trigger _applyStyles\n    }\n    _applyStyles() {\n        if (this._parentContainer) {\n            this._parentContainer.style.backgroundColor = this._backgroundColor ? this._backgroundColor.toString() : '';\n        }\n        super._applyStyles();\n    }\n    dispose() {\n        this._callOnDispose.dispose();\n        super.dispose();\n    }\n    _fillHead(container) {\n        super._fillHead(container);\n        this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(e => this.editor.focus()));\n        const actions = [];\n        const menu = this._menuService.createMenu(MarkerNavigationWidget.TitleMenu, this._contextKeyService);\n        createAndFillInActionBarActions(menu, undefined, actions);\n        this._actionbarWidget.push(actions, { label: false, icon: true, index: 0 });\n        menu.dispose();\n    }\n    _fillTitleIcon(container) {\n        this._icon = dom.append(container, dom.$(''));\n    }\n    _fillBody(container) {\n        this._parentContainer = container;\n        container.classList.add('marker-widget');\n        this._parentContainer.tabIndex = 0;\n        this._parentContainer.setAttribute('role', 'tooltip');\n        this._container = document.createElement('div');\n        container.appendChild(this._container);\n        this._message = new MessageWidget(this._container, this.editor, related => this._onDidSelectRelatedInformation.fire(related), this._openerService, this._labelService);\n        this._disposables.add(this._message);\n    }\n    show() {\n        throw new Error('call showAtMarker');\n    }\n    showAtMarker(marker, markerIdx, markerCount) {\n        // update:\n        // * title\n        // * message\n        this._container.classList.remove('stale');\n        this._message.update(marker);\n        // update frame color (only applied on 'show')\n        this._severity = marker.severity;\n        this._applyTheme(this._themeService.getColorTheme());\n        // show\n        const range = Range.lift(marker);\n        const editorPosition = this.editor.getPosition();\n        const position = editorPosition && range.containsPosition(editorPosition) ? editorPosition : range.getStartPosition();\n        super.show(position, this.computeRequiredHeight());\n        const model = this.editor.getModel();\n        if (model) {\n            const detail = markerCount > 1\n                ? nls.localize('problems', \"{0} of {1} problems\", markerIdx, markerCount)\n                : nls.localize('change', \"{0} of {1} problem\", markerIdx, markerCount);\n            this.setTitle(basename(model.uri), detail);\n        }\n        this._icon.className = `codicon ${SeverityIcon.className(MarkerSeverity.toSeverity(this._severity))}`;\n        this.editor.revealPositionNearTop(position, 0 /* ScrollType.Smooth */);\n        this.editor.focus();\n    }\n    updateMarker(marker) {\n        this._container.classList.remove('stale');\n        this._message.update(marker);\n    }\n    showStale() {\n        this._container.classList.add('stale');\n        this._relayout();\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        super._doLayoutBody(heightInPixel, widthInPixel);\n        this._heightInPixel = heightInPixel;\n        this._message.layout(heightInPixel, widthInPixel);\n        this._container.style.height = `${heightInPixel}px`;\n    }\n    _onWidth(widthInPixel) {\n        this._message.layout(this._heightInPixel, widthInPixel);\n    }\n    _relayout() {\n        super._relayout(this.computeRequiredHeight());\n    }\n    computeRequiredHeight() {\n        return 3 + this._message.getHeightInLines();\n    }\n};\nMarkerNavigationWidget.TitleMenu = new MenuId('gotoErrorTitleMenu');\nMarkerNavigationWidget = __decorate([\n    __param(1, IThemeService),\n    __param(2, IOpenerService),\n    __param(3, IMenuService),\n    __param(4, IInstantiationService),\n    __param(5, IContextKeyService),\n    __param(6, ILabelService)\n], MarkerNavigationWidget);\nexport { MarkerNavigationWidget };\n// theming\nconst errorDefault = oneOf(editorErrorForeground, editorErrorBorder);\nconst warningDefault = oneOf(editorWarningForeground, editorWarningBorder);\nconst infoDefault = oneOf(editorInfoForeground, editorInfoBorder);\nconst editorMarkerNavigationError = registerColor('editorMarkerNavigationError.background', { dark: errorDefault, light: errorDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationError', 'Editor marker navigation widget error color.'));\nconst editorMarkerNavigationErrorHeader = registerColor('editorMarkerNavigationError.headerBackground', { dark: transparent(editorMarkerNavigationError, .1), light: transparent(editorMarkerNavigationError, .1), hcDark: null, hcLight: null }, nls.localize('editorMarkerNavigationErrorHeaderBackground', 'Editor marker navigation widget error heading background.'));\nconst editorMarkerNavigationWarning = registerColor('editorMarkerNavigationWarning.background', { dark: warningDefault, light: warningDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationWarning', 'Editor marker navigation widget warning color.'));\nconst editorMarkerNavigationWarningHeader = registerColor('editorMarkerNavigationWarning.headerBackground', { dark: transparent(editorMarkerNavigationWarning, .1), light: transparent(editorMarkerNavigationWarning, .1), hcDark: '#0C141F', hcLight: transparent(editorMarkerNavigationWarning, .2) }, nls.localize('editorMarkerNavigationWarningBackground', 'Editor marker navigation widget warning heading background.'));\nconst editorMarkerNavigationInfo = registerColor('editorMarkerNavigationInfo.background', { dark: infoDefault, light: infoDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationInfo', 'Editor marker navigation widget info color.'));\nconst editorMarkerNavigationInfoHeader = registerColor('editorMarkerNavigationInfo.headerBackground', { dark: transparent(editorMarkerNavigationInfo, .1), light: transparent(editorMarkerNavigationInfo, .1), hcDark: null, hcLight: null }, nls.localize('editorMarkerNavigationInfoHeaderBackground', 'Editor marker navigation widget info heading background.'));\nconst editorMarkerNavigationBackground = registerColor('editorMarkerNavigation.background', { dark: editorBackground, light: editorBackground, hcDark: editorBackground, hcLight: editorBackground }, nls.localize('editorMarkerNavigationBackground', 'Editor marker navigation widget background.'));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IMarkerNavigationService } from './markerNavigationService.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { MarkerNavigationWidget } from './gotoErrorWidget.js';\nlet MarkerController = class MarkerController {\n    static get(editor) {\n        return editor.getContribution(MarkerController.ID);\n    }\n    constructor(editor, _markerNavigationService, _contextKeyService, _editorService, _instantiationService) {\n        this._markerNavigationService = _markerNavigationService;\n        this._contextKeyService = _contextKeyService;\n        this._editorService = _editorService;\n        this._instantiationService = _instantiationService;\n        this._sessionDispoables = new DisposableStore();\n        this._editor = editor;\n        this._widgetVisible = CONTEXT_MARKERS_NAVIGATION_VISIBLE.bindTo(this._contextKeyService);\n    }\n    dispose() {\n        this._cleanUp();\n        this._sessionDispoables.dispose();\n    }\n    _cleanUp() {\n        this._widgetVisible.reset();\n        this._sessionDispoables.clear();\n        this._widget = undefined;\n        this._model = undefined;\n    }\n    _getOrCreateModel(uri) {\n        if (this._model && this._model.matches(uri)) {\n            return this._model;\n        }\n        let reusePosition = false;\n        if (this._model) {\n            reusePosition = true;\n            this._cleanUp();\n        }\n        this._model = this._markerNavigationService.getMarkerList(uri);\n        if (reusePosition) {\n            this._model.move(true, this._editor.getModel(), this._editor.getPosition());\n        }\n        this._widget = this._instantiationService.createInstance(MarkerNavigationWidget, this._editor);\n        this._widget.onDidClose(() => this.close(), this, this._sessionDispoables);\n        this._widgetVisible.set(true);\n        this._sessionDispoables.add(this._model);\n        this._sessionDispoables.add(this._widget);\n        // follow cursor\n        this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(e => {\n            var _a, _b, _c;\n            if (!((_a = this._model) === null || _a === void 0 ? void 0 : _a.selected) || !Range.containsPosition((_b = this._model) === null || _b === void 0 ? void 0 : _b.selected.marker, e.position)) {\n                (_c = this._model) === null || _c === void 0 ? void 0 : _c.resetIndex();\n            }\n        }));\n        // update markers\n        this._sessionDispoables.add(this._model.onDidChange(() => {\n            if (!this._widget || !this._widget.position || !this._model) {\n                return;\n            }\n            const info = this._model.find(this._editor.getModel().uri, this._widget.position);\n            if (info) {\n                this._widget.updateMarker(info.marker);\n            }\n            else {\n                this._widget.showStale();\n            }\n        }));\n        // open related\n        this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(related => {\n            this._editorService.openCodeEditor({\n                resource: related.resource,\n                options: { pinned: true, revealIfOpened: true, selection: Range.lift(related).collapseToStart() }\n            }, this._editor);\n            this.close(false);\n        }));\n        this._sessionDispoables.add(this._editor.onDidChangeModel(() => this._cleanUp()));\n        return this._model;\n    }\n    close(focusEditor = true) {\n        this._cleanUp();\n        if (focusEditor) {\n            this._editor.focus();\n        }\n    }\n    showAtMarker(marker) {\n        if (this._editor.hasModel()) {\n            const model = this._getOrCreateModel(this._editor.getModel().uri);\n            model.resetIndex();\n            model.move(true, this._editor.getModel(), new Position(marker.startLineNumber, marker.startColumn));\n            if (model.selected) {\n                this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n            }\n        }\n    }\n    nagivate(next, multiFile) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._editor.hasModel()) {\n                const model = this._getOrCreateModel(multiFile ? undefined : this._editor.getModel().uri);\n                model.move(next, this._editor.getModel(), this._editor.getPosition());\n                if (!model.selected) {\n                    return;\n                }\n                if (model.selected.marker.resource.toString() !== this._editor.getModel().uri.toString()) {\n                    // show in different editor\n                    this._cleanUp();\n                    const otherEditor = yield this._editorService.openCodeEditor({\n                        resource: model.selected.marker.resource,\n                        options: { pinned: false, revealIfOpened: true, selectionRevealType: 2 /* TextEditorSelectionRevealType.NearTop */, selection: model.selected.marker }\n                    }, this._editor);\n                    if (otherEditor) {\n                        (_a = MarkerController.get(otherEditor)) === null || _a === void 0 ? void 0 : _a.close();\n                        (_b = MarkerController.get(otherEditor)) === null || _b === void 0 ? void 0 : _b.nagivate(next, multiFile);\n                    }\n                }\n                else {\n                    // show in this editor\n                    this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n                }\n            }\n        });\n    }\n};\nMarkerController.ID = 'editor.contrib.markerController';\nMarkerController = __decorate([\n    __param(1, IMarkerNavigationService),\n    __param(2, IContextKeyService),\n    __param(3, ICodeEditorService),\n    __param(4, IInstantiationService)\n], MarkerController);\nexport { MarkerController };\nclass MarkerNavigationAction extends EditorAction {\n    constructor(_next, _multiFile, opts) {\n        super(opts);\n        this._next = _next;\n        this._multiFile = _multiFile;\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (editor.hasModel()) {\n                (_a = MarkerController.get(editor)) === null || _a === void 0 ? void 0 : _a.nagivate(this._next, this._multiFile);\n            }\n        });\n    }\n}\nclass NextMarkerAction extends MarkerNavigationAction {\n    constructor() {\n        super(true, false, {\n            id: NextMarkerAction.ID,\n            label: NextMarkerAction.LABEL,\n            alias: 'Go to Next Problem (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 512 /* KeyMod.Alt */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MarkerNavigationWidget.TitleMenu,\n                title: NextMarkerAction.LABEL,\n                icon: registerIcon('marker-navigation-next', Codicon.arrowDown, nls.localize('nextMarkerIcon', 'Icon for goto next marker.')),\n                group: 'navigation',\n                order: 1\n            }\n        });\n    }\n}\nNextMarkerAction.ID = 'editor.action.marker.next';\nNextMarkerAction.LABEL = nls.localize('markerAction.next.label', \"Go to Next Problem (Error, Warning, Info)\");\nexport { NextMarkerAction };\nclass PrevMarkerAction extends MarkerNavigationAction {\n    constructor() {\n        super(false, false, {\n            id: PrevMarkerAction.ID,\n            label: PrevMarkerAction.LABEL,\n            alias: 'Go to Previous Problem (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MarkerNavigationWidget.TitleMenu,\n                title: PrevMarkerAction.LABEL,\n                icon: registerIcon('marker-navigation-previous', Codicon.arrowUp, nls.localize('previousMarkerIcon', 'Icon for goto previous marker.')),\n                group: 'navigation',\n                order: 2\n            }\n        });\n    }\n}\nPrevMarkerAction.ID = 'editor.action.marker.prev';\nPrevMarkerAction.LABEL = nls.localize('markerAction.previous.label', \"Go to Previous Problem (Error, Warning, Info)\");\nclass NextMarkerInFilesAction extends MarkerNavigationAction {\n    constructor() {\n        super(true, true, {\n            id: 'editor.action.marker.nextInFiles',\n            label: nls.localize('markerAction.nextInFiles.label', \"Go to Next Problem in Files (Error, Warning, Info)\"),\n            alias: 'Go to Next Problem in Files (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarGoMenu,\n                title: nls.localize({ key: 'miGotoNextProblem', comment: ['&& denotes a mnemonic'] }, \"Next &&Problem\"),\n                group: '6_problem_nav',\n                order: 1\n            }\n        });\n    }\n}\nclass PrevMarkerInFilesAction extends MarkerNavigationAction {\n    constructor() {\n        super(false, true, {\n            id: 'editor.action.marker.prevInFiles',\n            label: nls.localize('markerAction.previousInFiles.label', \"Go to Previous Problem in Files (Error, Warning, Info)\"),\n            alias: 'Go to Previous Problem in Files (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 1024 /* KeyMod.Shift */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarGoMenu,\n                title: nls.localize({ key: 'miGotoPreviousProblem', comment: ['&& denotes a mnemonic'] }, \"Previous &&Problem\"),\n                group: '6_problem_nav',\n                order: 2\n            }\n        });\n    }\n}\nregisterEditorContribution(MarkerController.ID, MarkerController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(NextMarkerAction);\nregisterEditorAction(PrevMarkerAction);\nregisterEditorAction(NextMarkerInFilesAction);\nregisterEditorAction(PrevMarkerInFilesAction);\nconst CONTEXT_MARKERS_NAVIGATION_VISIBLE = new RawContextKey('markersNavigationVisible', false);\nconst MarkerCommand = EditorCommand.bindToContribution(MarkerController.get);\nregisterEditorCommand(new MarkerCommand({\n    id: 'closeMarkersNavigation',\n    precondition: CONTEXT_MARKERS_NAVIGATION_VISIBLE,\n    handler: x => x.close(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 50,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Emitter } from '../../../../base/common/event.js';\nimport { combinedDisposable, DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { EditorCommand, registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { KeybindingsRegistry } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nexport const ctxHasSymbols = new RawContextKey('hasSymbols', false, localize('hasSymbols', \"Whether there are symbol locations that can be navigated via keyboard-only.\"));\nexport const ISymbolNavigationService = createDecorator('ISymbolNavigationService');\nlet SymbolNavigationService = class SymbolNavigationService {\n    constructor(contextKeyService, _editorService, _notificationService, _keybindingService) {\n        this._editorService = _editorService;\n        this._notificationService = _notificationService;\n        this._keybindingService = _keybindingService;\n        this._currentModel = undefined;\n        this._currentIdx = -1;\n        this._ignoreEditorChange = false;\n        this._ctxHasSymbols = ctxHasSymbols.bindTo(contextKeyService);\n    }\n    reset() {\n        var _a, _b;\n        this._ctxHasSymbols.reset();\n        (_a = this._currentState) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._currentMessage) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._currentModel = undefined;\n        this._currentIdx = -1;\n    }\n    put(anchor) {\n        const refModel = anchor.parent.parent;\n        if (refModel.references.length <= 1) {\n            this.reset();\n            return;\n        }\n        this._currentModel = refModel;\n        this._currentIdx = refModel.references.indexOf(anchor);\n        this._ctxHasSymbols.set(true);\n        this._showMessage();\n        const editorState = new EditorState(this._editorService);\n        const listener = editorState.onDidChange(_ => {\n            if (this._ignoreEditorChange) {\n                return;\n            }\n            const editor = this._editorService.getActiveCodeEditor();\n            if (!editor) {\n                return;\n            }\n            const model = editor.getModel();\n            const position = editor.getPosition();\n            if (!model || !position) {\n                return;\n            }\n            let seenUri = false;\n            let seenPosition = false;\n            for (const reference of refModel.references) {\n                if (isEqual(reference.uri, model.uri)) {\n                    seenUri = true;\n                    seenPosition = seenPosition || Range.containsPosition(reference.range, position);\n                }\n                else if (seenUri) {\n                    break;\n                }\n            }\n            if (!seenUri || !seenPosition) {\n                this.reset();\n            }\n        });\n        this._currentState = combinedDisposable(editorState, listener);\n    }\n    revealNext(source) {\n        if (!this._currentModel) {\n            return Promise.resolve();\n        }\n        // get next result and advance\n        this._currentIdx += 1;\n        this._currentIdx %= this._currentModel.references.length;\n        const reference = this._currentModel.references[this._currentIdx];\n        // status\n        this._showMessage();\n        // open editor, ignore events while that happens\n        this._ignoreEditorChange = true;\n        return this._editorService.openCodeEditor({\n            resource: reference.uri,\n            options: {\n                selection: Range.collapseToStart(reference.range),\n                selectionRevealType: 3 /* TextEditorSelectionRevealType.NearTopIfOutsideViewport */\n            }\n        }, source).finally(() => {\n            this._ignoreEditorChange = false;\n        });\n    }\n    _showMessage() {\n        var _a;\n        (_a = this._currentMessage) === null || _a === void 0 ? void 0 : _a.dispose();\n        const kb = this._keybindingService.lookupKeybinding('editor.gotoNextSymbolFromResult');\n        const message = kb\n            ? localize('location.kb', \"Symbol {0} of {1}, {2} for next\", this._currentIdx + 1, this._currentModel.references.length, kb.getLabel())\n            : localize('location', \"Symbol {0} of {1}\", this._currentIdx + 1, this._currentModel.references.length);\n        this._currentMessage = this._notificationService.status(message);\n    }\n};\nSymbolNavigationService = __decorate([\n    __param(0, IContextKeyService),\n    __param(1, ICodeEditorService),\n    __param(2, INotificationService),\n    __param(3, IKeybindingService)\n], SymbolNavigationService);\nregisterSingleton(ISymbolNavigationService, SymbolNavigationService, 1 /* InstantiationType.Delayed */);\nregisterEditorCommand(new class extends EditorCommand {\n    constructor() {\n        super({\n            id: 'editor.gotoNextSymbolFromResult',\n            precondition: ctxHasSymbols,\n            kbOpts: {\n                weight: 100 /* KeybindingWeight.EditorContrib */,\n                primary: 70 /* KeyCode.F12 */\n            }\n        });\n    }\n    runEditorCommand(accessor, editor) {\n        return accessor.get(ISymbolNavigationService).revealNext(editor);\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'editor.gotoNextSymbolFromResult.cancel',\n    weight: 100 /* KeybindingWeight.EditorContrib */,\n    when: ctxHasSymbols,\n    primary: 9 /* KeyCode.Escape */,\n    handler(accessor) {\n        accessor.get(ISymbolNavigationService).reset();\n    }\n});\n//\nlet EditorState = class EditorState {\n    constructor(editorService) {\n        this._listener = new Map();\n        this._disposables = new DisposableStore();\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._disposables.add(editorService.onCodeEditorRemove(this._onDidRemoveEditor, this));\n        this._disposables.add(editorService.onCodeEditorAdd(this._onDidAddEditor, this));\n        editorService.listCodeEditors().forEach(this._onDidAddEditor, this);\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._onDidChange.dispose();\n        dispose(this._listener.values());\n    }\n    _onDidAddEditor(editor) {\n        this._listener.set(editor, combinedDisposable(editor.onDidChangeCursorPosition(_ => this._onDidChange.fire({ editor })), editor.onDidChangeModelContent(_ => this._onDidChange.fire({ editor }))));\n    }\n    _onDidRemoveEditor(editor) {\n        var _a;\n        (_a = this._listener.get(editor)) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._listener.delete(editor);\n    }\n};\nEditorState = __decorate([\n    __param(0, ICodeEditorService)\n], EditorState);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar _a, _b, _c, _d, _e, _f, _g, _h;\nimport { isStandalone } from '../../../../base/browser/browser.js';\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { createCancelablePromise, raceCancellation } from '../../../../base/common/async.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { isWeb } from '../../../../base/common/platform.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { isCodeEditor } from '../../../browser/editorBrowser.js';\nimport { EditorAction2 } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport * as corePosition from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { isLocationLink } from '../../../common/languages.js';\nimport { ReferencesController } from './peek/referencesController.js';\nimport { ReferencesModel } from './referencesModel.js';\nimport { ISymbolNavigationService } from './symbolNavigation.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport { PeekContext } from '../../peekView/browser/peekView.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { getDeclarationsAtPosition, getDefinitionsAtPosition, getImplementationsAtPosition, getReferencesAtPosition, getTypeDefinitionsAtPosition } from './goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nMenuRegistry.appendMenuItem(MenuId.EditorContext, {\n    submenu: MenuId.EditorContextPeek,\n    title: nls.localize('peek.submenu', \"Peek\"),\n    group: 'navigation',\n    order: 100\n});\nexport class SymbolNavigationAnchor {\n    static is(thing) {\n        if (!thing || typeof thing !== 'object') {\n            return false;\n        }\n        if (thing instanceof SymbolNavigationAnchor) {\n            return true;\n        }\n        if (corePosition.Position.isIPosition(thing.position) && thing.model) {\n            return true;\n        }\n        return false;\n    }\n    constructor(model, position) {\n        this.model = model;\n        this.position = position;\n    }\n}\nclass SymbolNavigationAction extends EditorAction2 {\n    static all() {\n        return SymbolNavigationAction._allSymbolNavigationCommands.values();\n    }\n    static _patchConfig(opts) {\n        const result = Object.assign(Object.assign({}, opts), { f1: true });\n        // patch context menu when clause\n        if (result.menu) {\n            for (const item of Iterable.wrap(result.menu)) {\n                if (item.id === MenuId.EditorContext || item.id === MenuId.EditorContextPeek) {\n                    item.when = ContextKeyExpr.and(opts.precondition, item.when);\n                }\n            }\n        }\n        return result;\n    }\n    constructor(configuration, opts) {\n        super(SymbolNavigationAction._patchConfig(opts));\n        this.configuration = configuration;\n        SymbolNavigationAction._allSymbolNavigationCommands.set(opts.id, this);\n    }\n    runEditorCommand(accessor, editor, arg, range) {\n        if (!editor.hasModel()) {\n            return Promise.resolve(undefined);\n        }\n        const notificationService = accessor.get(INotificationService);\n        const editorService = accessor.get(ICodeEditorService);\n        const progressService = accessor.get(IEditorProgressService);\n        const symbolNavService = accessor.get(ISymbolNavigationService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const instaService = accessor.get(IInstantiationService);\n        const model = editor.getModel();\n        const position = editor.getPosition();\n        const anchor = SymbolNavigationAnchor.is(arg) ? arg : new SymbolNavigationAnchor(model, position);\n        const cts = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */);\n        const promise = raceCancellation(this._getLocationModel(languageFeaturesService, anchor.model, anchor.position, cts.token), cts.token).then((references) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            if (!references || cts.token.isCancellationRequested) {\n                return;\n            }\n            alert(references.ariaMessage);\n            let altAction;\n            if (references.referenceAt(model.uri, position)) {\n                const altActionId = this._getAlternativeCommand(editor);\n                if (!SymbolNavigationAction._activeAlternativeCommands.has(altActionId) && SymbolNavigationAction._allSymbolNavigationCommands.has(altActionId)) {\n                    altAction = SymbolNavigationAction._allSymbolNavigationCommands.get(altActionId);\n                }\n            }\n            const referenceCount = references.references.length;\n            if (referenceCount === 0) {\n                // no result -> show message\n                if (!this.configuration.muteMessage) {\n                    const info = model.getWordAtPosition(position);\n                    (_a = MessageController.get(editor)) === null || _a === void 0 ? void 0 : _a.showMessage(this._getNoResultFoundMessage(info), position);\n                }\n            }\n            else if (referenceCount === 1 && altAction) {\n                // already at the only result, run alternative\n                SymbolNavigationAction._activeAlternativeCommands.add(this.desc.id);\n                instaService.invokeFunction((accessor) => altAction.runEditorCommand(accessor, editor, arg, range).finally(() => {\n                    SymbolNavigationAction._activeAlternativeCommands.delete(this.desc.id);\n                }));\n            }\n            else {\n                // normal results handling\n                return this._onResult(editorService, symbolNavService, editor, references, range);\n            }\n        }), (err) => {\n            // report an error\n            notificationService.error(err);\n        }).finally(() => {\n            cts.dispose();\n        });\n        progressService.showWhile(promise, 250);\n        return promise;\n    }\n    _onResult(editorService, symbolNavService, editor, model, range) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const gotoLocation = this._getGoToPreference(editor);\n            if (!(editor instanceof EmbeddedCodeEditorWidget) && (this.configuration.openInPeek || (gotoLocation === 'peek' && model.references.length > 1))) {\n                this._openInPeek(editor, model, range);\n            }\n            else {\n                const next = model.firstReference();\n                const peek = model.references.length > 1 && gotoLocation === 'gotoAndPeek';\n                const targetEditor = yield this._openReference(editor, editorService, next, this.configuration.openToSide, !peek);\n                if (peek && targetEditor) {\n                    this._openInPeek(targetEditor, model, range);\n                }\n                else {\n                    model.dispose();\n                }\n                // keep remaining locations around when using\n                // 'goto'-mode\n                if (gotoLocation === 'goto') {\n                    symbolNavService.put(next);\n                }\n            }\n        });\n    }\n    _openReference(editor, editorService, reference, sideBySide, highlight) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // range is the target-selection-range when we have one\n            // and the fallback is the 'full' range\n            let range = undefined;\n            if (isLocationLink(reference)) {\n                range = reference.targetSelectionRange;\n            }\n            if (!range) {\n                range = reference.range;\n            }\n            if (!range) {\n                return undefined;\n            }\n            const targetEditor = yield editorService.openCodeEditor({\n                resource: reference.uri,\n                options: {\n                    selection: Range.collapseToStart(range),\n                    selectionRevealType: 3 /* TextEditorSelectionRevealType.NearTopIfOutsideViewport */,\n                    selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */\n                }\n            }, editor, sideBySide);\n            if (!targetEditor) {\n                return undefined;\n            }\n            if (highlight) {\n                const modelNow = targetEditor.getModel();\n                const decorations = targetEditor.createDecorationsCollection([{ range, options: { description: 'symbol-navigate-action-highlight', className: 'symbolHighlight' } }]);\n                setTimeout(() => {\n                    if (targetEditor.getModel() === modelNow) {\n                        decorations.clear();\n                    }\n                }, 350);\n            }\n            return targetEditor;\n        });\n    }\n    _openInPeek(target, model, range) {\n        const controller = ReferencesController.get(target);\n        if (controller && target.hasModel()) {\n            controller.toggleWidget(range !== null && range !== void 0 ? range : target.getSelection(), createCancelablePromise(_ => Promise.resolve(model)), this.configuration.openInPeek);\n        }\n        else {\n            model.dispose();\n        }\n    }\n}\nSymbolNavigationAction._allSymbolNavigationCommands = new Map();\nSymbolNavigationAction._activeAlternativeCommands = new Set();\nexport { SymbolNavigationAction };\n//#region --- DEFINITION\nexport class DefinitionAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, token), nls.localize('def.title', 'Definitions'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('noResultWord', \"No definition found for '{0}'\", info.word)\n            : nls.localize('generic.noResults', \"No definition found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(55 /* EditorOption.gotoLocation */).alternativeDefinitionCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(55 /* EditorOption.gotoLocation */).multipleDefinitions;\n    }\n}\nconst goToDefinitionKb = isWeb && !isStandalone()\n    ? 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */\n    : 70 /* KeyCode.F12 */;\nregisterAction2((_a = class GoToDefinitionAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToDefinitionAction.id,\n                title: {\n                    value: nls.localize('actions.goToDecl.label', \"Go to Definition\"),\n                    original: 'Go to Definition',\n                    mnemonicTitle: nls.localize({ key: 'miGotoDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Definition\")\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: {\n                    when: EditorContextKeys.editorTextFocus,\n                    primary: goToDefinitionKb,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                menu: [{\n                        id: MenuId.EditorContext,\n                        group: 'navigation',\n                        order: 1.1\n                    }, {\n                        id: MenuId.MenubarGoMenu,\n                        precondition: null,\n                        group: '4_symbol_nav',\n                        order: 2,\n                    }]\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.goToDeclaration', GoToDefinitionAction.id);\n        }\n    },\n    _a.id = 'editor.action.revealDefinition',\n    _a));\nregisterAction2((_b = class OpenDefinitionToSideAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: true,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: OpenDefinitionToSideAction.id,\n                title: {\n                    value: nls.localize('actions.goToDeclToSide.label', \"Open Definition to the Side\"),\n                    original: 'Open Definition to the Side'\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: {\n                    when: EditorContextKeys.editorTextFocus,\n                    primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, goToDefinitionKb),\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.openDeclarationToTheSide', OpenDefinitionToSideAction.id);\n        }\n    },\n    _b.id = 'editor.action.revealDefinitionAside',\n    _b));\nregisterAction2((_c = class PeekDefinitionAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: PeekDefinitionAction.id,\n                title: {\n                    value: nls.localize('actions.previewDecl.label', \"Peek Definition\"),\n                    original: 'Peek Definition'\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: {\n                    when: EditorContextKeys.editorTextFocus,\n                    primary: 512 /* KeyMod.Alt */ | 70 /* KeyCode.F12 */,\n                    linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */ },\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                menu: {\n                    id: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 2\n                }\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.previewDeclaration', PeekDefinitionAction.id);\n        }\n    },\n    _c.id = 'editor.action.peekDefinition',\n    _c));\n//#endregion\n//#region --- DECLARATION\nclass DeclarationAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, token), nls.localize('decl.title', 'Declarations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\n            : nls.localize('decl.generic.noResults', \"No declaration found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(55 /* EditorOption.gotoLocation */).alternativeDeclarationCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(55 /* EditorOption.gotoLocation */).multipleDeclarations;\n    }\n}\nregisterAction2((_d = class GoToDeclarationAction extends DeclarationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToDeclarationAction.id,\n                title: {\n                    value: nls.localize('actions.goToDeclaration.label', \"Go to Declaration\"),\n                    original: 'Go to Declaration',\n                    mnemonicTitle: nls.localize({ key: 'miGotoDeclaration', comment: ['&& denotes a mnemonic'] }, \"Go to &&Declaration\")\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                menu: [{\n                        id: MenuId.EditorContext,\n                        group: 'navigation',\n                        order: 1.3\n                    }, {\n                        id: MenuId.MenubarGoMenu,\n                        precondition: null,\n                        group: '4_symbol_nav',\n                        order: 3,\n                    }],\n            });\n        }\n        _getNoResultFoundMessage(info) {\n            return info && info.word\n                ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\n                : nls.localize('decl.generic.noResults', \"No declaration found\");\n        }\n    },\n    _d.id = 'editor.action.revealDeclaration',\n    _d));\nregisterAction2(class PeekDeclarationAction extends DeclarationAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: true,\n            muteMessage: false\n        }, {\n            id: 'editor.action.peekDeclaration',\n            title: {\n                value: nls.localize('actions.peekDecl.label', \"Peek Declaration\"),\n                original: 'Peek Declaration'\n            },\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            menu: {\n                id: MenuId.EditorContextPeek,\n                group: 'peek',\n                order: 3\n            }\n        });\n    }\n});\n//#endregion\n//#region --- TYPE DEFINITION\nclass TypeDefinitionAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, token), nls.localize('typedef.title', 'Type Definitions'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('goToTypeDefinition.noResultWord', \"No type definition found for '{0}'\", info.word)\n            : nls.localize('goToTypeDefinition.generic.noResults', \"No type definition found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(55 /* EditorOption.gotoLocation */).alternativeTypeDefinitionCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(55 /* EditorOption.gotoLocation */).multipleTypeDefinitions;\n    }\n}\nregisterAction2((_e = class GoToTypeDefinitionAction extends TypeDefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToTypeDefinitionAction.ID,\n                title: {\n                    value: nls.localize('actions.goToTypeDefinition.label', \"Go to Type Definition\"),\n                    original: 'Go to Type Definition',\n                    mnemonicTitle: nls.localize({ key: 'miGotoTypeDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Type Definition\")\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: {\n                    when: EditorContextKeys.editorTextFocus,\n                    primary: 0,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                menu: [{\n                        id: MenuId.EditorContext,\n                        group: 'navigation',\n                        order: 1.4\n                    }, {\n                        id: MenuId.MenubarGoMenu,\n                        precondition: null,\n                        group: '4_symbol_nav',\n                        order: 3,\n                    }]\n            });\n        }\n    },\n    _e.ID = 'editor.action.goToTypeDefinition',\n    _e));\nregisterAction2((_f = class PeekTypeDefinitionAction extends TypeDefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: PeekTypeDefinitionAction.ID,\n                title: {\n                    value: nls.localize('actions.peekTypeDefinition.label', \"Peek Type Definition\"),\n                    original: 'Peek Type Definition'\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                menu: {\n                    id: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 4\n                }\n            });\n        }\n    },\n    _f.ID = 'editor.action.peekTypeDefinition',\n    _f));\n//#endregion\n//#region --- IMPLEMENTATION\nclass ImplementationAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, token), nls.localize('impl.title', 'Implementations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('goToImplementation.noResultWord', \"No implementation found for '{0}'\", info.word)\n            : nls.localize('goToImplementation.generic.noResults', \"No implementation found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(55 /* EditorOption.gotoLocation */).alternativeImplementationCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(55 /* EditorOption.gotoLocation */).multipleImplementations;\n    }\n}\nregisterAction2((_g = class GoToImplementationAction extends ImplementationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToImplementationAction.ID,\n                title: {\n                    value: nls.localize('actions.goToImplementation.label', \"Go to Implementations\"),\n                    original: 'Go to Implementations',\n                    mnemonicTitle: nls.localize({ key: 'miGotoImplementation', comment: ['&& denotes a mnemonic'] }, \"Go to &&Implementations\")\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: {\n                    when: EditorContextKeys.editorTextFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                menu: [{\n                        id: MenuId.EditorContext,\n                        group: 'navigation',\n                        order: 1.45\n                    }, {\n                        id: MenuId.MenubarGoMenu,\n                        precondition: null,\n                        group: '4_symbol_nav',\n                        order: 4,\n                    }]\n            });\n        }\n    },\n    _g.ID = 'editor.action.goToImplementation',\n    _g));\nregisterAction2((_h = class PeekImplementationAction extends ImplementationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: PeekImplementationAction.ID,\n                title: {\n                    value: nls.localize('actions.peekImplementation.label', \"Peek Implementations\"),\n                    original: 'Peek Implementations'\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: {\n                    when: EditorContextKeys.editorTextFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                menu: {\n                    id: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 5\n                }\n            });\n        }\n    },\n    _h.ID = 'editor.action.peekImplementation',\n    _h));\n//#endregion\n//#region --- REFERENCES\nclass ReferencesAction extends SymbolNavigationAction {\n    _getNoResultFoundMessage(info) {\n        return info\n            ? nls.localize('references.no', \"No references found for '{0}'\", info.word)\n            : nls.localize('references.noGeneric', \"No references found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(55 /* EditorOption.gotoLocation */).alternativeReferenceCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(55 /* EditorOption.gotoLocation */).multipleReferences;\n    }\n}\nregisterAction2(class GoToReferencesAction extends ReferencesAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: false,\n            muteMessage: false\n        }, {\n            id: 'editor.action.goToReferences',\n            title: {\n                value: nls.localize('goToReferences.label', \"Go to References\"),\n                original: 'Go to References',\n                mnemonicTitle: nls.localize({ key: 'miGotoReference', comment: ['&& denotes a mnemonic'] }, \"Go to &&References\")\n            },\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            keybinding: {\n                when: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menu: [{\n                    id: MenuId.EditorContext,\n                    group: 'navigation',\n                    order: 1.45\n                }, {\n                    id: MenuId.MenubarGoMenu,\n                    precondition: null,\n                    group: '4_symbol_nav',\n                    order: 5,\n                }]\n        });\n    }\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, true, token), nls.localize('ref.title', 'References'));\n        });\n    }\n});\nregisterAction2(class PeekReferencesAction extends ReferencesAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: true,\n            muteMessage: false\n        }, {\n            id: 'editor.action.referenceSearch.trigger',\n            title: {\n                value: nls.localize('references.action.label', \"Peek References\"),\n                original: 'Peek References'\n            },\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            menu: {\n                id: MenuId.EditorContextPeek,\n                group: 'peek',\n                order: 6\n            }\n        });\n    }\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, token), nls.localize('ref.title', 'References'));\n        });\n    }\n});\n//#endregion\n//#region --- GENERIC goto symbols command\nclass GenericGoToLocationAction extends SymbolNavigationAction {\n    constructor(config, _references, _gotoMultipleBehaviour) {\n        super(config, {\n            id: 'editor.action.goToLocation',\n            title: {\n                value: nls.localize('label.generic', \"Go to Any Symbol\"),\n                original: 'Go to Any Symbol'\n            },\n            precondition: ContextKeyExpr.and(PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n        });\n        this._references = _references;\n        this._gotoMultipleBehaviour = _gotoMultipleBehaviour;\n    }\n    _getLocationModel(languageFeaturesService, _model, _position, _token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(this._references, nls.localize('generic.title', 'Locations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && nls.localize('generic.noResult', \"No results for '{0}'\", info.word) || '';\n    }\n    _getGoToPreference(editor) {\n        var _a;\n        return (_a = this._gotoMultipleBehaviour) !== null && _a !== void 0 ? _a : editor.getOption(55 /* EditorOption.gotoLocation */).multipleReferences;\n    }\n    _getAlternativeCommand() { return ''; }\n}\nCommandsRegistry.registerCommand({\n    id: 'editor.action.goToLocations',\n    description: {\n        description: 'Go to locations from a position in a file',\n        args: [\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\n            { name: 'noResultsMessage', description: 'Human readable message that shows when locations is empty.' },\n        ]\n    },\n    handler: (accessor, resource, position, references, multiple, noResultsMessage, openInPeek) => __awaiter(void 0, void 0, void 0, function* () {\n        assertType(URI.isUri(resource));\n        assertType(corePosition.Position.isIPosition(position));\n        assertType(Array.isArray(references));\n        assertType(typeof multiple === 'undefined' || typeof multiple === 'string');\n        assertType(typeof openInPeek === 'undefined' || typeof openInPeek === 'boolean');\n        const editorService = accessor.get(ICodeEditorService);\n        const editor = yield editorService.openCodeEditor({ resource }, editorService.getFocusedCodeEditor());\n        if (isCodeEditor(editor)) {\n            editor.setPosition(position);\n            editor.revealPositionInCenterIfOutsideViewport(position, 0 /* ScrollType.Smooth */);\n            return editor.invokeWithinContext(accessor => {\n                const command = new class extends GenericGoToLocationAction {\n                    _getNoResultFoundMessage(info) {\n                        return noResultsMessage || super._getNoResultFoundMessage(info);\n                    }\n                }({\n                    muteMessage: !Boolean(noResultsMessage),\n                    openInPeek: Boolean(openInPeek),\n                    openToSide: false\n                }, references, multiple);\n                accessor.get(IInstantiationService).invokeFunction(command.run.bind(command), editor);\n            });\n        }\n    })\n});\nCommandsRegistry.registerCommand({\n    id: 'editor.action.peekLocations',\n    description: {\n        description: 'Peek locations from a position in a file',\n        args: [\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\n        ]\n    },\n    handler: (accessor, resource, position, references, multiple) => __awaiter(void 0, void 0, void 0, function* () {\n        accessor.get(ICommandService).executeCommand('editor.action.goToLocations', resource, position, references, multiple, undefined, true);\n    })\n});\n//#endregion\n//#region --- REFERENCE search special commands\nCommandsRegistry.registerCommand({\n    id: 'editor.action.findReferences',\n    handler: (accessor, resource, position) => {\n        assertType(URI.isUri(resource));\n        assertType(corePosition.Position.isIPosition(position));\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const codeEditorService = accessor.get(ICodeEditorService);\n        return codeEditorService.openCodeEditor({ resource }, codeEditorService.getFocusedCodeEditor()).then(control => {\n            if (!isCodeEditor(control) || !control.hasModel()) {\n                return undefined;\n            }\n            const controller = ReferencesController.get(control);\n            if (!controller) {\n                return undefined;\n            }\n            const references = createCancelablePromise(token => getReferencesAtPosition(languageFeaturesService.referenceProvider, control.getModel(), corePosition.Position.lift(position), false, token).then(references => new ReferencesModel(references, nls.localize('ref.title', 'References'))));\n            const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n            return Promise.resolve(controller.toggleWidget(range, references, false));\n        });\n    }\n});\n// use NEW command\nCommandsRegistry.registerCommandAlias('editor.action.showReferences', 'editor.action.peekLocations');\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ReferencesModel } from './referencesModel.js';\nfunction getLocationLinks(model, position, registry, provide) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const provider = registry.ordered(model);\n        // get results\n        const promises = provider.map((provider) => {\n            return Promise.resolve(provide(provider, model, position)).then(undefined, err => {\n                onUnexpectedExternalError(err);\n                return undefined;\n            });\n        });\n        const values = yield Promise.all(promises);\n        return coalesce(values.flat());\n    });\n}\nexport function getDefinitionsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideDefinition(model, position, token);\n    });\n}\nexport function getDeclarationsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideDeclaration(model, position, token);\n    });\n}\nexport function getImplementationsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideImplementation(model, position, token);\n    });\n}\nexport function getTypeDefinitionsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideTypeDefinition(model, position, token);\n    });\n}\nexport function getReferencesAtPosition(registry, model, position, compact, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => __awaiter(this, void 0, void 0, function* () {\n        const result = yield provider.provideReferences(model, position, { includeDeclaration: true }, token);\n        if (!compact || !result || result.length !== 2) {\n            return result;\n        }\n        const resultWithoutDeclaration = yield provider.provideReferences(model, position, { includeDeclaration: false }, token);\n        if (resultWithoutDeclaration && resultWithoutDeclaration.length === 1) {\n            return resultWithoutDeclaration;\n        }\n        return result;\n    }));\n}\n// -- API commands ----\nfunction _sortedAndDeduped(callback) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const rawLinks = yield callback();\n        const model = new ReferencesModel(rawLinks, '');\n        const modelLinks = model.references.map(ref => ref.link);\n        model.dispose();\n        return modelLinks;\n    });\n}\nregisterModelAndPositionCommand('_executeDefinitionProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeTypeDefinitionProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeDeclarationProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeReferenceProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeImplementationProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../../base/common/platform.js';\nfunction hasModifier(e, modifier) {\n    return !!e[modifier];\n}\n/**\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\n */\nexport class ClickLinkMouseEvent {\n    constructor(source, opts) {\n        this.target = source.target;\n        this.isLeftClick = source.event.leftButton;\n        this.isMiddleClick = source.event.middleButton;\n        this.isRightClick = source.event.rightButton;\n        this.hasTriggerModifier = hasModifier(source.event, opts.triggerModifier);\n        this.hasSideBySideModifier = hasModifier(source.event, opts.triggerSideBySideModifier);\n        this.isNoneOrSingleMouseDown = (source.event.detail <= 1);\n    }\n}\n/**\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\n */\nexport class ClickLinkKeyboardEvent {\n    constructor(source, opts) {\n        this.keyCodeIsTriggerKey = (source.keyCode === opts.triggerKey);\n        this.keyCodeIsSideBySideKey = (source.keyCode === opts.triggerSideBySideKey);\n        this.hasTriggerModifier = hasModifier(source, opts.triggerModifier);\n    }\n}\nexport class ClickLinkOptions {\n    constructor(triggerKey, triggerModifier, triggerSideBySideKey, triggerSideBySideModifier) {\n        this.triggerKey = triggerKey;\n        this.triggerModifier = triggerModifier;\n        this.triggerSideBySideKey = triggerSideBySideKey;\n        this.triggerSideBySideModifier = triggerSideBySideModifier;\n    }\n    equals(other) {\n        return (this.triggerKey === other.triggerKey\n            && this.triggerModifier === other.triggerModifier\n            && this.triggerSideBySideKey === other.triggerSideBySideKey\n            && this.triggerSideBySideModifier === other.triggerSideBySideModifier);\n    }\n}\nfunction createOptions(multiCursorModifier) {\n    if (multiCursorModifier === 'altKey') {\n        if (platform.isMacintosh) {\n            return new ClickLinkOptions(57 /* KeyCode.Meta */, 'metaKey', 6 /* KeyCode.Alt */, 'altKey');\n        }\n        return new ClickLinkOptions(5 /* KeyCode.Ctrl */, 'ctrlKey', 6 /* KeyCode.Alt */, 'altKey');\n    }\n    if (platform.isMacintosh) {\n        return new ClickLinkOptions(6 /* KeyCode.Alt */, 'altKey', 57 /* KeyCode.Meta */, 'metaKey');\n    }\n    return new ClickLinkOptions(6 /* KeyCode.Alt */, 'altKey', 5 /* KeyCode.Ctrl */, 'ctrlKey');\n}\nexport class ClickLinkGesture extends Disposable {\n    constructor(editor, alwaysFireOnMouseUp) {\n        super();\n        this._onMouseMoveOrRelevantKeyDown = this._register(new Emitter());\n        this.onMouseMoveOrRelevantKeyDown = this._onMouseMoveOrRelevantKeyDown.event;\n        this._onExecute = this._register(new Emitter());\n        this.onExecute = this._onExecute.event;\n        this._onCancel = this._register(new Emitter());\n        this.onCancel = this._onCancel.event;\n        this._editor = editor;\n        this._alwaysFireExecuteOnMouseUp = alwaysFireOnMouseUp;\n        this._opts = createOptions(this._editor.getOption(74 /* EditorOption.multiCursorModifier */));\n        this._lastMouseMoveEvent = null;\n        this._hasTriggerKeyOnMouseDown = false;\n        this._lineNumberOnMouseDown = 0;\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(74 /* EditorOption.multiCursorModifier */)) {\n                const newOpts = createOptions(this._editor.getOption(74 /* EditorOption.multiCursorModifier */));\n                if (this._opts.equals(newOpts)) {\n                    return;\n                }\n                this._opts = newOpts;\n                this._lastMouseMoveEvent = null;\n                this._hasTriggerKeyOnMouseDown = false;\n                this._lineNumberOnMouseDown = 0;\n                this._onCancel.fire();\n            }\n        }));\n        this._register(this._editor.onMouseMove((e) => this._onEditorMouseMove(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onMouseDown((e) => this._onEditorMouseDown(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onMouseUp((e) => this._onEditorMouseUp(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onKeyDown((e) => this._onEditorKeyDown(new ClickLinkKeyboardEvent(e, this._opts))));\n        this._register(this._editor.onKeyUp((e) => this._onEditorKeyUp(new ClickLinkKeyboardEvent(e, this._opts))));\n        this._register(this._editor.onMouseDrag(() => this._resetHandler()));\n        this._register(this._editor.onDidChangeCursorSelection((e) => this._onDidChangeCursorSelection(e)));\n        this._register(this._editor.onDidChangeModel((e) => this._resetHandler()));\n        this._register(this._editor.onDidChangeModelContent(() => this._resetHandler()));\n        this._register(this._editor.onDidScrollChange((e) => {\n            if (e.scrollTopChanged || e.scrollLeftChanged) {\n                this._resetHandler();\n            }\n        }));\n    }\n    _onDidChangeCursorSelection(e) {\n        if (e.selection && e.selection.startColumn !== e.selection.endColumn) {\n            this._resetHandler(); // immediately stop this feature if the user starts to select (https://github.com/microsoft/vscode/issues/7827)\n        }\n    }\n    _onEditorMouseMove(mouseEvent) {\n        this._lastMouseMoveEvent = mouseEvent;\n        this._onMouseMoveOrRelevantKeyDown.fire([mouseEvent, null]);\n    }\n    _onEditorMouseDown(mouseEvent) {\n        // We need to record if we had the trigger key on mouse down because someone might select something in the editor\n        // holding the mouse down and then while mouse is down start to press Ctrl/Cmd to start a copy operation and then\n        // release the mouse button without wanting to do the navigation.\n        // With this flag we prevent goto definition if the mouse was down before the trigger key was pressed.\n        this._hasTriggerKeyOnMouseDown = mouseEvent.hasTriggerModifier;\n        this._lineNumberOnMouseDown = mouseEvent.target.position ? mouseEvent.target.position.lineNumber : 0;\n    }\n    _onEditorMouseUp(mouseEvent) {\n        const currentLineNumber = mouseEvent.target.position ? mouseEvent.target.position.lineNumber : 0;\n        if (this._hasTriggerKeyOnMouseDown && this._lineNumberOnMouseDown && this._lineNumberOnMouseDown === currentLineNumber || this._alwaysFireExecuteOnMouseUp) {\n            this._onExecute.fire(mouseEvent);\n        }\n    }\n    _onEditorKeyDown(e) {\n        if (this._lastMouseMoveEvent\n            && (e.keyCodeIsTriggerKey // User just pressed Ctrl/Cmd (normal goto definition)\n                || (e.keyCodeIsSideBySideKey && e.hasTriggerModifier) // User pressed Ctrl/Cmd+Alt (goto definition to the side)\n            )) {\n            this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent, e]);\n        }\n        else if (e.hasTriggerModifier) {\n            this._onCancel.fire(); // remove decorations if user holds another key with ctrl/cmd to prevent accident goto declaration\n        }\n    }\n    _onEditorKeyUp(e) {\n        if (e.keyCodeIsTriggerKey) {\n            this._onCancel.fire();\n        }\n    }\n    _resetHandler() {\n        this._lastMouseMoveEvent = null;\n        this._hasTriggerKeyOnMouseDown = false;\n        this._onCancel.fire();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { withNullAsUndefined } from '../../../../../base/common/types.js';\nimport './goToDefinitionAtPosition.css';\nimport { EditorState } from '../../../editorState/browser/editorState.js';\nimport { registerEditorContribution } from '../../../../browser/editorExtensions.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { ClickLinkGesture } from './clickLinkGesture.js';\nimport { PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { DefinitionAction } from '../goToCommands.js';\nimport { getDefinitionsAtPosition } from '../goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../../common/services/languageFeatures.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../../common/model/textModel.js';\nlet GotoDefinitionAtPositionEditorContribution = class GotoDefinitionAtPositionEditorContribution {\n    constructor(editor, textModelResolverService, languageService, languageFeaturesService) {\n        this.textModelResolverService = textModelResolverService;\n        this.languageService = languageService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.toUnhook = new DisposableStore();\n        this.toUnhookForKeyboard = new DisposableStore();\n        this.currentWordAtPosition = null;\n        this.previousPromise = null;\n        this.editor = editor;\n        this.linkDecorations = this.editor.createDecorationsCollection();\n        const linkGesture = new ClickLinkGesture(editor);\n        this.toUnhook.add(linkGesture);\n        this.toUnhook.add(linkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n            this.startFindDefinitionFromMouse(mouseEvent, withNullAsUndefined(keyboardEvent));\n        }));\n        this.toUnhook.add(linkGesture.onExecute((mouseEvent) => {\n            if (this.isEnabled(mouseEvent)) {\n                this.gotoDefinition(mouseEvent.target.position, mouseEvent.hasSideBySideModifier)\n                    .catch((error) => {\n                    onUnexpectedError(error);\n                })\n                    .finally(() => {\n                    this.removeLinkDecorations();\n                });\n            }\n        }));\n        this.toUnhook.add(linkGesture.onCancel(() => {\n            this.removeLinkDecorations();\n            this.currentWordAtPosition = null;\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(GotoDefinitionAtPositionEditorContribution.ID);\n    }\n    startFindDefinitionFromCursor(position) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // For issue: https://github.com/microsoft/vscode/issues/46257\n            // equivalent to mouse move with meta/ctrl key\n            // First find the definition and add decorations\n            // to the editor to be shown with the content hover widget\n            yield this.startFindDefinition(position);\n            // Add listeners for editor cursor move and key down events\n            // Dismiss the \"extended\" editor decorations when the user hides\n            // the hover widget. There is no event for the widget itself so these\n            // serve as a best effort. After removing the link decorations, the hover\n            // widget is clean and will only show declarations per next request.\n            this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(() => {\n                this.currentWordAtPosition = null;\n                this.removeLinkDecorations();\n                this.toUnhookForKeyboard.clear();\n            }));\n            this.toUnhookForKeyboard.add(this.editor.onKeyDown((e) => {\n                if (e) {\n                    this.currentWordAtPosition = null;\n                    this.removeLinkDecorations();\n                    this.toUnhookForKeyboard.clear();\n                }\n            }));\n        });\n    }\n    startFindDefinitionFromMouse(mouseEvent, withKey) {\n        // check if we are active and on a content widget\n        if (mouseEvent.target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && this.linkDecorations.length > 0) {\n            return;\n        }\n        if (!this.editor.hasModel() || !this.isEnabled(mouseEvent, withKey)) {\n            this.currentWordAtPosition = null;\n            this.removeLinkDecorations();\n            return;\n        }\n        const position = mouseEvent.target.position;\n        this.startFindDefinition(position);\n    }\n    startFindDefinition(position) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            // Dispose listeners for updating decorations when using keyboard to show definition hover\n            this.toUnhookForKeyboard.clear();\n            // Find word at mouse position\n            const word = position ? (_a = this.editor.getModel()) === null || _a === void 0 ? void 0 : _a.getWordAtPosition(position) : null;\n            if (!word) {\n                this.currentWordAtPosition = null;\n                this.removeLinkDecorations();\n                return;\n            }\n            // Return early if word at position is still the same\n            if (this.currentWordAtPosition && this.currentWordAtPosition.startColumn === word.startColumn && this.currentWordAtPosition.endColumn === word.endColumn && this.currentWordAtPosition.word === word.word) {\n                return;\n            }\n            this.currentWordAtPosition = word;\n            // Find definition and decorate word if found\n            const state = new EditorState(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */ | 8 /* CodeEditorStateFlag.Scroll */);\n            if (this.previousPromise) {\n                this.previousPromise.cancel();\n                this.previousPromise = null;\n            }\n            this.previousPromise = createCancelablePromise(token => this.findDefinition(position, token));\n            let results;\n            try {\n                results = yield this.previousPromise;\n            }\n            catch (error) {\n                onUnexpectedError(error);\n                return;\n            }\n            if (!results || !results.length || !state.validate(this.editor)) {\n                this.removeLinkDecorations();\n                return;\n            }\n            const linkRange = results[0].originSelectionRange\n                ? Range.lift(results[0].originSelectionRange)\n                : new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n            // Multiple results\n            if (results.length > 1) {\n                let combinedRange = linkRange;\n                for (const { originSelectionRange } of results) {\n                    if (originSelectionRange) {\n                        combinedRange = Range.plusRange(combinedRange, originSelectionRange);\n                    }\n                }\n                this.addDecoration(combinedRange, new MarkdownString().appendText(nls.localize('multipleResults', \"Click to show {0} definitions.\", results.length)));\n            }\n            else {\n                // Single result\n                const result = results[0];\n                if (!result.uri) {\n                    return;\n                }\n                this.textModelResolverService.createModelReference(result.uri).then(ref => {\n                    if (!ref.object || !ref.object.textEditorModel) {\n                        ref.dispose();\n                        return;\n                    }\n                    const { object: { textEditorModel } } = ref;\n                    const { startLineNumber } = result.range;\n                    if (startLineNumber < 1 || startLineNumber > textEditorModel.getLineCount()) {\n                        // invalid range\n                        ref.dispose();\n                        return;\n                    }\n                    const previewValue = this.getPreviewValue(textEditorModel, startLineNumber, result);\n                    const languageId = this.languageService.guessLanguageIdByFilepathOrFirstLine(textEditorModel.uri);\n                    this.addDecoration(linkRange, previewValue ? new MarkdownString().appendCodeblock(languageId ? languageId : '', previewValue) : undefined);\n                    ref.dispose();\n                });\n            }\n        });\n    }\n    getPreviewValue(textEditorModel, startLineNumber, result) {\n        let rangeToUse = result.range;\n        const numberOfLinesInRange = rangeToUse.endLineNumber - rangeToUse.startLineNumber;\n        if (numberOfLinesInRange >= GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES) {\n            rangeToUse = this.getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber);\n        }\n        const previewValue = this.stripIndentationFromPreviewRange(textEditorModel, startLineNumber, rangeToUse);\n        return previewValue;\n    }\n    stripIndentationFromPreviewRange(textEditorModel, startLineNumber, previewRange) {\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n        let minIndent = startIndent;\n        for (let endLineNumber = startLineNumber + 1; endLineNumber < previewRange.endLineNumber; endLineNumber++) {\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n            minIndent = Math.min(minIndent, endIndent);\n        }\n        const previewValue = textEditorModel.getValueInRange(previewRange).replace(new RegExp(`^\\\\s{${minIndent - 1}}`, 'gm'), '').trim();\n        return previewValue;\n    }\n    getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber) {\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n        const maxLineNumber = Math.min(textEditorModel.getLineCount(), startLineNumber + GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES);\n        let endLineNumber = startLineNumber + 1;\n        for (; endLineNumber < maxLineNumber; endLineNumber++) {\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n            if (startIndent === endIndent) {\n                break;\n            }\n        }\n        return new Range(startLineNumber, 1, endLineNumber + 1, 1);\n    }\n    addDecoration(range, hoverMessage) {\n        const newDecorations = {\n            range: range,\n            options: {\n                description: 'goto-definition-link',\n                inlineClassName: 'goto-definition-link',\n                hoverMessage\n            }\n        };\n        this.linkDecorations.set([newDecorations]);\n    }\n    removeLinkDecorations() {\n        this.linkDecorations.clear();\n    }\n    isEnabled(mouseEvent, withKey) {\n        var _a;\n        return this.editor.hasModel()\n            && mouseEvent.isLeftClick\n            && mouseEvent.isNoneOrSingleMouseDown\n            && mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */\n            && !(((_a = mouseEvent.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options) instanceof ModelDecorationInjectedTextOptions)\n            && (mouseEvent.hasTriggerModifier || (withKey ? withKey.keyCodeIsTriggerKey : false))\n            && this.languageFeaturesService.definitionProvider.has(this.editor.getModel());\n    }\n    findDefinition(position, token) {\n        const model = this.editor.getModel();\n        if (!model) {\n            return Promise.resolve(null);\n        }\n        return getDefinitionsAtPosition(this.languageFeaturesService.definitionProvider, model, position, token);\n    }\n    gotoDefinition(position, openToSide) {\n        this.editor.setPosition(position);\n        return this.editor.invokeWithinContext((accessor) => {\n            const canPeek = !openToSide && this.editor.getOption(83 /* EditorOption.definitionLinkOpensInPeek */) && !this.isInPeekEditor(accessor);\n            const action = new DefinitionAction({ openToSide, openInPeek: canPeek, muteMessage: true }, { title: { value: '', original: '' }, id: '', precondition: undefined });\n            return action.run(accessor);\n        });\n    }\n    isInPeekEditor(accessor) {\n        const contextKeyService = accessor.get(IContextKeyService);\n        return PeekContext.inPeekEditor.getValue(contextKeyService);\n    }\n    dispose() {\n        this.toUnhook.dispose();\n        this.toUnhookForKeyboard.dispose();\n    }\n};\nGotoDefinitionAtPositionEditorContribution.ID = 'editor.contrib.gotodefinitionatposition';\nGotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES = 8;\nGotoDefinitionAtPositionEditorContribution = __decorate([\n    __param(1, ITextModelService),\n    __param(2, ILanguageService),\n    __param(3, ILanguageFeaturesService)\n], GotoDefinitionAtPositionEditorContribution);\nexport { GotoDefinitionAtPositionEditorContribution };\nregisterEditorContribution(GotoDefinitionAtPositionEditorContribution.ID, GotoDefinitionAtPositionEditorContribution, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { CountBadge } from '../../../../../base/browser/ui/countBadge/countBadge.js';\nimport { HighlightedLabel } from '../../../../../base/browser/ui/highlightedlabel/highlightedLabel.js';\nimport { IconLabel } from '../../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { createMatches, FuzzyScore } from '../../../../../base/common/filters.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { basename, dirname } from '../../../../../base/common/resources.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { localize } from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { defaultCountBadgeStyles } from '../../../../../platform/theme/browser/defaultStyles.js';\nimport { FileReferences, OneReference, ReferencesModel } from '../referencesModel.js';\nlet DataSource = class DataSource {\n    constructor(_resolverService) {\n        this._resolverService = _resolverService;\n    }\n    hasChildren(element) {\n        if (element instanceof ReferencesModel) {\n            return true;\n        }\n        if (element instanceof FileReferences) {\n            return true;\n        }\n        return false;\n    }\n    getChildren(element) {\n        if (element instanceof ReferencesModel) {\n            return element.groups;\n        }\n        if (element instanceof FileReferences) {\n            return element.resolve(this._resolverService).then(val => {\n                // if (element.failure) {\n                // \t// refresh the element on failure so that\n                // \t// we can update its rendering\n                // \treturn tree.refresh(element).then(() => val.children);\n                // }\n                return val.children;\n            });\n        }\n        throw new Error('bad tree');\n    }\n};\nDataSource = __decorate([\n    __param(0, ITextModelService)\n], DataSource);\nexport { DataSource };\n//#endregion\nexport class Delegate {\n    getHeight() {\n        return 23;\n    }\n    getTemplateId(element) {\n        if (element instanceof FileReferences) {\n            return FileReferencesRenderer.id;\n        }\n        else {\n            return OneReferenceRenderer.id;\n        }\n    }\n}\nlet StringRepresentationProvider = class StringRepresentationProvider {\n    constructor(_keybindingService) {\n        this._keybindingService = _keybindingService;\n    }\n    getKeyboardNavigationLabel(element) {\n        var _a;\n        if (element instanceof OneReference) {\n            const parts = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\n            if (parts) {\n                return parts.value;\n            }\n        }\n        // FileReferences or unresolved OneReference\n        return basename(element.uri);\n    }\n};\nStringRepresentationProvider = __decorate([\n    __param(0, IKeybindingService)\n], StringRepresentationProvider);\nexport { StringRepresentationProvider };\nexport class IdentityProvider {\n    getId(element) {\n        return element instanceof OneReference ? element.id : element.uri;\n    }\n}\n//#region render: File\nlet FileReferencesTemplate = class FileReferencesTemplate extends Disposable {\n    constructor(container, _labelService) {\n        super();\n        this._labelService = _labelService;\n        const parent = document.createElement('div');\n        parent.classList.add('reference-file');\n        this.file = this._register(new IconLabel(parent, { supportHighlights: true }));\n        this.badge = new CountBadge(dom.append(parent, dom.$('.count')), {}, defaultCountBadgeStyles);\n        container.appendChild(parent);\n    }\n    set(element, matches) {\n        const parent = dirname(element.uri);\n        this.file.setLabel(this._labelService.getUriBasenameLabel(element.uri), this._labelService.getUriLabel(parent, { relative: true }), { title: this._labelService.getUriLabel(element.uri), matches });\n        const len = element.children.length;\n        this.badge.setCount(len);\n        if (len > 1) {\n            this.badge.setTitleFormat(localize('referencesCount', \"{0} references\", len));\n        }\n        else {\n            this.badge.setTitleFormat(localize('referenceCount', \"{0} reference\", len));\n        }\n    }\n};\nFileReferencesTemplate = __decorate([\n    __param(1, ILabelService)\n], FileReferencesTemplate);\nlet FileReferencesRenderer = class FileReferencesRenderer {\n    constructor(_instantiationService) {\n        this._instantiationService = _instantiationService;\n        this.templateId = FileReferencesRenderer.id;\n    }\n    renderTemplate(container) {\n        return this._instantiationService.createInstance(FileReferencesTemplate, container);\n    }\n    renderElement(node, index, template) {\n        template.set(node.element, createMatches(node.filterData));\n    }\n    disposeTemplate(templateData) {\n        templateData.dispose();\n    }\n};\nFileReferencesRenderer.id = 'FileReferencesRenderer';\nFileReferencesRenderer = __decorate([\n    __param(0, IInstantiationService)\n], FileReferencesRenderer);\nexport { FileReferencesRenderer };\n//#endregion\n//#region render: Reference\nclass OneReferenceTemplate {\n    constructor(container) {\n        this.label = new HighlightedLabel(container);\n    }\n    set(element, score) {\n        var _a;\n        const preview = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\n        if (!preview || !preview.value) {\n            // this means we FAILED to resolve the document or the value is the empty string\n            this.label.set(`${basename(element.uri)}:${element.range.startLineNumber + 1}:${element.range.startColumn + 1}`);\n        }\n        else {\n            // render search match as highlight unless\n            // we have score, then render the score\n            const { value, highlight } = preview;\n            if (score && !FuzzyScore.isDefault(score)) {\n                this.label.element.classList.toggle('referenceMatch', false);\n                this.label.set(value, createMatches(score));\n            }\n            else {\n                this.label.element.classList.toggle('referenceMatch', true);\n                this.label.set(value, [highlight]);\n            }\n        }\n    }\n}\nclass OneReferenceRenderer {\n    constructor() {\n        this.templateId = OneReferenceRenderer.id;\n    }\n    renderTemplate(container) {\n        return new OneReferenceTemplate(container);\n    }\n    renderElement(node, index, templateData) {\n        templateData.set(node.element, node.filterData);\n    }\n    disposeTemplate() {\n    }\n}\nOneReferenceRenderer.id = 'OneReferenceRenderer';\nexport { OneReferenceRenderer };\n//#endregion\nexport class AccessibilityProvider {\n    getWidgetAriaLabel() {\n        return localize('treeAriaLabel', \"References\");\n    }\n    getAriaLabel(element) {\n        return element.ariaMessage;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { Sizing, SplitView } from '../../../../../base/browser/ui/splitview/splitview.js';\nimport { Color } from '../../../../../base/common/color.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { basenameOrAuthority, dirname } from '../../../../../base/common/resources.js';\nimport './referencesWidget.css';\nimport { EmbeddedCodeEditorWidget } from '../../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ModelDecorationOptions, TextModel } from '../../../../common/model/textModel.js';\nimport { ILanguageConfigurationService } from '../../../../common/languages/languageConfigurationRegistry.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../common/languages/modesRegistry.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { AccessibilityProvider, DataSource, Delegate, FileReferencesRenderer, IdentityProvider, OneReferenceRenderer, StringRepresentationProvider } from './referencesTree.js';\nimport * as peekView from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { WorkbenchAsyncDataTree } from '../../../../../platform/list/browser/listService.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { IUndoRedoService } from '../../../../../platform/undoRedo/common/undoRedo.js';\nimport { FileReferences, OneReference } from '../referencesModel.js';\nclass DecorationsManager {\n    constructor(_editor, _model) {\n        this._editor = _editor;\n        this._model = _model;\n        this._decorations = new Map();\n        this._decorationIgnoreSet = new Set();\n        this._callOnDispose = new DisposableStore();\n        this._callOnModelChange = new DisposableStore();\n        this._callOnDispose.add(this._editor.onDidChangeModel(() => this._onModelChanged()));\n        this._onModelChanged();\n    }\n    dispose() {\n        this._callOnModelChange.dispose();\n        this._callOnDispose.dispose();\n        this.removeDecorations();\n    }\n    _onModelChanged() {\n        this._callOnModelChange.clear();\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const ref of this._model.references) {\n            if (ref.uri.toString() === model.uri.toString()) {\n                this._addDecorations(ref.parent);\n                return;\n            }\n        }\n    }\n    _addDecorations(reference) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(() => this._onDecorationChanged()));\n        const newDecorations = [];\n        const newDecorationsActualIndex = [];\n        for (let i = 0, len = reference.children.length; i < len; i++) {\n            const oneReference = reference.children[i];\n            if (this._decorationIgnoreSet.has(oneReference.id)) {\n                continue;\n            }\n            if (oneReference.uri.toString() !== this._editor.getModel().uri.toString()) {\n                continue;\n            }\n            newDecorations.push({\n                range: oneReference.range,\n                options: DecorationsManager.DecorationOptions\n            });\n            newDecorationsActualIndex.push(i);\n        }\n        this._editor.changeDecorations((changeAccessor) => {\n            const decorations = changeAccessor.deltaDecorations([], newDecorations);\n            for (let i = 0; i < decorations.length; i++) {\n                this._decorations.set(decorations[i], reference.children[newDecorationsActualIndex[i]]);\n            }\n        });\n    }\n    _onDecorationChanged() {\n        const toRemove = [];\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const [decorationId, reference] of this._decorations) {\n            const newRange = model.getDecorationRange(decorationId);\n            if (!newRange) {\n                continue;\n            }\n            let ignore = false;\n            if (Range.equalsRange(newRange, reference.range)) {\n                continue;\n            }\n            if (Range.spansMultipleLines(newRange)) {\n                ignore = true;\n            }\n            else {\n                const lineLength = reference.range.endColumn - reference.range.startColumn;\n                const newLineLength = newRange.endColumn - newRange.startColumn;\n                if (lineLength !== newLineLength) {\n                    ignore = true;\n                }\n            }\n            if (ignore) {\n                this._decorationIgnoreSet.add(reference.id);\n                toRemove.push(decorationId);\n            }\n            else {\n                reference.range = newRange;\n            }\n        }\n        for (let i = 0, len = toRemove.length; i < len; i++) {\n            this._decorations.delete(toRemove[i]);\n        }\n        this._editor.removeDecorations(toRemove);\n    }\n    removeDecorations() {\n        this._editor.removeDecorations([...this._decorations.keys()]);\n        this._decorations.clear();\n    }\n}\nDecorationsManager.DecorationOptions = ModelDecorationOptions.register({\n    description: 'reference-decoration',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'reference-decoration'\n});\nexport class LayoutData {\n    constructor() {\n        this.ratio = 0.7;\n        this.heightInLines = 18;\n    }\n    static fromJSON(raw) {\n        let ratio;\n        let heightInLines;\n        try {\n            const data = JSON.parse(raw);\n            ratio = data.ratio;\n            heightInLines = data.heightInLines;\n        }\n        catch (_a) {\n            //\n        }\n        return {\n            ratio: ratio || 0.7,\n            heightInLines: heightInLines || 18\n        };\n    }\n}\nclass ReferencesTree extends WorkbenchAsyncDataTree {\n}\n/**\n * ZoneWidget that is shown inside the editor\n */\nlet ReferenceWidget = class ReferenceWidget extends peekView.PeekViewWidget {\n    constructor(editor, _defaultTreeKeyboardSupport, layoutData, themeService, _textModelResolverService, _instantiationService, _peekViewService, _uriLabel, _undoRedoService, _keybindingService, _languageService, _languageConfigurationService) {\n        super(editor, { showFrame: false, showArrow: true, isResizeable: true, isAccessible: true, supportOnTitleClick: true }, _instantiationService);\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n        this.layoutData = layoutData;\n        this._textModelResolverService = _textModelResolverService;\n        this._instantiationService = _instantiationService;\n        this._peekViewService = _peekViewService;\n        this._uriLabel = _uriLabel;\n        this._undoRedoService = _undoRedoService;\n        this._keybindingService = _keybindingService;\n        this._languageService = _languageService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._disposeOnNewModel = new DisposableStore();\n        this._callOnDispose = new DisposableStore();\n        this._onDidSelectReference = new Emitter();\n        this.onDidSelectReference = this._onDidSelectReference.event;\n        this._dim = new dom.Dimension(0, 0);\n        this._applyTheme(themeService.getColorTheme());\n        this._callOnDispose.add(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this._peekViewService.addExclusiveWidget(editor, this);\n        this.create();\n    }\n    dispose() {\n        this.setModel(undefined);\n        this._callOnDispose.dispose();\n        this._disposeOnNewModel.dispose();\n        dispose(this._preview);\n        dispose(this._previewNotAvailableMessage);\n        dispose(this._tree);\n        dispose(this._previewModelReference);\n        this._splitView.dispose();\n        super.dispose();\n    }\n    _applyTheme(theme) {\n        const borderColor = theme.getColor(peekView.peekViewBorder) || Color.transparent;\n        this.style({\n            arrowColor: borderColor,\n            frameColor: borderColor,\n            headerBackgroundColor: theme.getColor(peekView.peekViewTitleBackground) || Color.transparent,\n            primaryHeadingColor: theme.getColor(peekView.peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(peekView.peekViewTitleInfoForeground)\n        });\n    }\n    show(where) {\n        super.show(where, this.layoutData.heightInLines || 18);\n    }\n    focusOnReferenceTree() {\n        this._tree.domFocus();\n    }\n    focusOnPreviewEditor() {\n        this._preview.focus();\n    }\n    isPreviewEditorFocused() {\n        return this._preview.hasTextFocus();\n    }\n    _onTitleClick(e) {\n        if (this._preview && this._preview.getModel()) {\n            this._onDidSelectReference.fire({\n                element: this._getFocusedReference(),\n                kind: e.ctrlKey || e.metaKey || e.altKey ? 'side' : 'open',\n                source: 'title'\n            });\n        }\n    }\n    _fillBody(containerElement) {\n        this.setCssClass('reference-zone-widget');\n        // message pane\n        this._messageContainer = dom.append(containerElement, dom.$('div.messages'));\n        dom.hide(this._messageContainer);\n        this._splitView = new SplitView(containerElement, { orientation: 1 /* Orientation.HORIZONTAL */ });\n        // editor\n        this._previewContainer = dom.append(containerElement, dom.$('div.preview.inline'));\n        const options = {\n            scrollBeyondLastLine: false,\n            scrollbar: {\n                verticalScrollbarSize: 14,\n                horizontal: 'auto',\n                useShadows: true,\n                verticalHasArrows: false,\n                horizontalHasArrows: false,\n                alwaysConsumeMouseWheel: false\n            },\n            overviewRulerLanes: 2,\n            fixedOverflowWidgets: true,\n            minimap: {\n                enabled: false\n            }\n        };\n        this._preview = this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._previewContainer, options, this.editor);\n        dom.hide(this._previewContainer);\n        this._previewNotAvailableMessage = new TextModel(nls.localize('missingPreviewMessage', \"no preview available\"), PLAINTEXT_LANGUAGE_ID, TextModel.DEFAULT_CREATION_OPTIONS, null, this._undoRedoService, this._languageService, this._languageConfigurationService);\n        // tree\n        this._treeContainer = dom.append(containerElement, dom.$('div.ref-tree.inline'));\n        const treeOptions = {\n            keyboardSupport: this._defaultTreeKeyboardSupport,\n            accessibilityProvider: new AccessibilityProvider(),\n            keyboardNavigationLabelProvider: this._instantiationService.createInstance(StringRepresentationProvider),\n            identityProvider: new IdentityProvider(),\n            openOnSingleClick: true,\n            selectionNavigation: true,\n            overrideStyles: {\n                listBackground: peekView.peekViewResultsBackground\n            }\n        };\n        if (this._defaultTreeKeyboardSupport) {\n            // the tree will consume `Escape` and prevent the widget from closing\n            this._callOnDispose.add(dom.addStandardDisposableListener(this._treeContainer, 'keydown', (e) => {\n                if (e.equals(9 /* KeyCode.Escape */)) {\n                    this._keybindingService.dispatchEvent(e, e.target);\n                    e.stopPropagation();\n                }\n            }, true));\n        }\n        this._tree = this._instantiationService.createInstance(ReferencesTree, 'ReferencesWidget', this._treeContainer, new Delegate(), [\n            this._instantiationService.createInstance(FileReferencesRenderer),\n            this._instantiationService.createInstance(OneReferenceRenderer),\n        ], this._instantiationService.createInstance(DataSource), treeOptions);\n        // split stuff\n        this._splitView.addView({\n            onDidChange: Event.None,\n            element: this._previewContainer,\n            minimumSize: 200,\n            maximumSize: Number.MAX_VALUE,\n            layout: (width) => {\n                this._preview.layout({ height: this._dim.height, width });\n            }\n        }, Sizing.Distribute);\n        this._splitView.addView({\n            onDidChange: Event.None,\n            element: this._treeContainer,\n            minimumSize: 100,\n            maximumSize: Number.MAX_VALUE,\n            layout: (width) => {\n                this._treeContainer.style.height = `${this._dim.height}px`;\n                this._treeContainer.style.width = `${width}px`;\n                this._tree.layout(this._dim.height, width);\n            }\n        }, Sizing.Distribute);\n        this._disposables.add(this._splitView.onDidSashChange(() => {\n            if (this._dim.width) {\n                this.layoutData.ratio = this._splitView.getViewSize(0) / this._dim.width;\n            }\n        }, undefined));\n        // listen on selection and focus\n        const onEvent = (element, kind) => {\n            if (element instanceof OneReference) {\n                if (kind === 'show') {\n                    this._revealReference(element, false);\n                }\n                this._onDidSelectReference.fire({ element, kind, source: 'tree' });\n            }\n        };\n        this._tree.onDidOpen(e => {\n            if (e.sideBySide) {\n                onEvent(e.element, 'side');\n            }\n            else if (e.editorOptions.pinned) {\n                onEvent(e.element, 'goto');\n            }\n            else {\n                onEvent(e.element, 'show');\n            }\n        });\n        dom.hide(this._treeContainer);\n    }\n    _onWidth(width) {\n        if (this._dim) {\n            this._doLayoutBody(this._dim.height, width);\n        }\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        super._doLayoutBody(heightInPixel, widthInPixel);\n        this._dim = new dom.Dimension(widthInPixel, heightInPixel);\n        this.layoutData.heightInLines = this._viewZone ? this._viewZone.heightInLines : this.layoutData.heightInLines;\n        this._splitView.layout(widthInPixel);\n        this._splitView.resizeView(0, widthInPixel * this.layoutData.ratio);\n    }\n    setSelection(selection) {\n        return this._revealReference(selection, true).then(() => {\n            if (!this._model) {\n                // disposed\n                return;\n            }\n            // show in tree\n            this._tree.setSelection([selection]);\n            this._tree.setFocus([selection]);\n        });\n    }\n    setModel(newModel) {\n        // clean up\n        this._disposeOnNewModel.clear();\n        this._model = newModel;\n        if (this._model) {\n            return this._onNewModel();\n        }\n        return Promise.resolve();\n    }\n    _onNewModel() {\n        if (!this._model) {\n            return Promise.resolve(undefined);\n        }\n        if (this._model.isEmpty) {\n            this.setTitle('');\n            this._messageContainer.innerText = nls.localize('noResults', \"No results\");\n            dom.show(this._messageContainer);\n            return Promise.resolve(undefined);\n        }\n        dom.hide(this._messageContainer);\n        this._decorationsManager = new DecorationsManager(this._preview, this._model);\n        this._disposeOnNewModel.add(this._decorationsManager);\n        // listen on model changes\n        this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(reference => this._tree.rerender(reference)));\n        // listen on editor\n        this._disposeOnNewModel.add(this._preview.onMouseDown(e => {\n            const { event, target } = e;\n            if (event.detail !== 2) {\n                return;\n            }\n            const element = this._getFocusedReference();\n            if (!element) {\n                return;\n            }\n            this._onDidSelectReference.fire({\n                element: { uri: element.uri, range: target.range },\n                kind: (event.ctrlKey || event.metaKey || event.altKey) ? 'side' : 'open',\n                source: 'editor'\n            });\n        }));\n        // make sure things are rendered\n        this.container.classList.add('results-loaded');\n        dom.show(this._treeContainer);\n        dom.show(this._previewContainer);\n        this._splitView.layout(this._dim.width);\n        this.focusOnReferenceTree();\n        // pick input and a reference to begin with\n        return this._tree.setInput(this._model.groups.length === 1 ? this._model.groups[0] : this._model);\n    }\n    _getFocusedReference() {\n        const [element] = this._tree.getFocus();\n        if (element instanceof OneReference) {\n            return element;\n        }\n        else if (element instanceof FileReferences) {\n            if (element.children.length > 0) {\n                return element.children[0];\n            }\n        }\n        return undefined;\n    }\n    revealReference(reference) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._revealReference(reference, false);\n            this._onDidSelectReference.fire({ element: reference, kind: 'goto', source: 'tree' });\n        });\n    }\n    _revealReference(reference, revealParent) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // check if there is anything to do...\n            if (this._revealedReference === reference) {\n                return;\n            }\n            this._revealedReference = reference;\n            // Update widget header\n            if (reference.uri.scheme !== Schemas.inMemory) {\n                this.setTitle(basenameOrAuthority(reference.uri), this._uriLabel.getUriLabel(dirname(reference.uri)));\n            }\n            else {\n                this.setTitle(nls.localize('peekView.alternateTitle', \"References\"));\n            }\n            const promise = this._textModelResolverService.createModelReference(reference.uri);\n            if (this._tree.getInput() === reference.parent) {\n                this._tree.reveal(reference);\n            }\n            else {\n                if (revealParent) {\n                    this._tree.reveal(reference.parent);\n                }\n                yield this._tree.expand(reference.parent);\n                this._tree.reveal(reference);\n            }\n            const ref = yield promise;\n            if (!this._model) {\n                // disposed\n                ref.dispose();\n                return;\n            }\n            dispose(this._previewModelReference);\n            // show in editor\n            const model = ref.object;\n            if (model) {\n                const scrollType = this._preview.getModel() === model.textEditorModel ? 0 /* ScrollType.Smooth */ : 1 /* ScrollType.Immediate */;\n                const sel = Range.lift(reference.range).collapseToStart();\n                this._previewModelReference = ref;\n                this._preview.setModel(model.textEditorModel);\n                this._preview.setSelection(sel);\n                this._preview.revealRangeInCenter(sel, scrollType);\n            }\n            else {\n                this._preview.setModel(this._previewNotAvailableMessage);\n                ref.dispose();\n            }\n        });\n    }\n};\nReferenceWidget = __decorate([\n    __param(3, IThemeService),\n    __param(4, ITextModelService),\n    __param(5, IInstantiationService),\n    __param(6, peekView.IPeekViewService),\n    __param(7, ILabelService),\n    __param(8, IUndoRedoService),\n    __param(9, IKeybindingService),\n    __param(10, ILanguageService),\n    __param(11, ILanguageConfigurationService)\n], ReferenceWidget);\nexport { ReferenceWidget };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { ICodeEditorService } from '../../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { getOuterEditor, PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { CommandsRegistry } from '../../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { IListService, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse, WorkbenchTreeElementCanExpand } from '../../../../../platform/list/browser/listService.js';\nimport { INotificationService } from '../../../../../platform/notification/common/notification.js';\nimport { IStorageService } from '../../../../../platform/storage/common/storage.js';\nimport { OneReference } from '../referencesModel.js';\nimport { LayoutData, ReferenceWidget } from './referencesWidget.js';\nexport const ctxReferenceSearchVisible = new RawContextKey('referenceSearchVisible', false, nls.localize('referenceSearchVisible', \"Whether reference peek is visible, like 'Peek References' or 'Peek Definition'\"));\nlet ReferencesController = class ReferencesController {\n    static get(editor) {\n        return editor.getContribution(ReferencesController.ID);\n    }\n    constructor(_defaultTreeKeyboardSupport, _editor, contextKeyService, _editorService, _notificationService, _instantiationService, _storageService, _configurationService) {\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n        this._editor = _editor;\n        this._editorService = _editorService;\n        this._notificationService = _notificationService;\n        this._instantiationService = _instantiationService;\n        this._storageService = _storageService;\n        this._configurationService = _configurationService;\n        this._disposables = new DisposableStore();\n        this._requestIdPool = 0;\n        this._ignoreModelChangeEvent = false;\n        this._referenceSearchVisible = ctxReferenceSearchVisible.bindTo(contextKeyService);\n    }\n    dispose() {\n        var _a, _b;\n        this._referenceSearchVisible.reset();\n        this._disposables.dispose();\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._model) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._widget = undefined;\n        this._model = undefined;\n    }\n    toggleWidget(range, modelPromise, peekMode) {\n        // close current widget and return early is position didn't change\n        let widgetPosition;\n        if (this._widget) {\n            widgetPosition = this._widget.position;\n        }\n        this.closeWidget();\n        if (!!widgetPosition && range.containsPosition(widgetPosition)) {\n            return;\n        }\n        this._peekMode = peekMode;\n        this._referenceSearchVisible.set(true);\n        // close the widget on model/mode changes\n        this._disposables.add(this._editor.onDidChangeModelLanguage(() => { this.closeWidget(); }));\n        this._disposables.add(this._editor.onDidChangeModel(() => {\n            if (!this._ignoreModelChangeEvent) {\n                this.closeWidget();\n            }\n        }));\n        const storageKey = 'peekViewLayout';\n        const data = LayoutData.fromJSON(this._storageService.get(storageKey, 0 /* StorageScope.PROFILE */, '{}'));\n        this._widget = this._instantiationService.createInstance(ReferenceWidget, this._editor, this._defaultTreeKeyboardSupport, data);\n        this._widget.setTitle(nls.localize('labelLoading', \"Loading...\"));\n        this._widget.show(range);\n        this._disposables.add(this._widget.onDidClose(() => {\n            modelPromise.cancel();\n            if (this._widget) {\n                this._storageService.store(storageKey, JSON.stringify(this._widget.layoutData), 0 /* StorageScope.PROFILE */, 1 /* StorageTarget.MACHINE */);\n                this._widget = undefined;\n            }\n            this.closeWidget();\n        }));\n        this._disposables.add(this._widget.onDidSelectReference(event => {\n            const { element, kind } = event;\n            if (!element) {\n                return;\n            }\n            switch (kind) {\n                case 'open':\n                    if (event.source !== 'editor' || !this._configurationService.getValue('editor.stablePeek')) {\n                        // when stable peek is configured we don't close\n                        // the peek window on selecting the editor\n                        this.openReference(element, false, false);\n                    }\n                    break;\n                case 'side':\n                    this.openReference(element, true, false);\n                    break;\n                case 'goto':\n                    if (peekMode) {\n                        this._gotoReference(element, true);\n                    }\n                    else {\n                        this.openReference(element, false, true);\n                    }\n                    break;\n            }\n        }));\n        const requestId = ++this._requestIdPool;\n        modelPromise.then(model => {\n            var _a;\n            // still current request? widget still open?\n            if (requestId !== this._requestIdPool || !this._widget) {\n                model.dispose();\n                return undefined;\n            }\n            (_a = this._model) === null || _a === void 0 ? void 0 : _a.dispose();\n            this._model = model;\n            // show widget\n            return this._widget.setModel(this._model).then(() => {\n                if (this._widget && this._model && this._editor.hasModel()) { // might have been closed\n                    // set title\n                    if (!this._model.isEmpty) {\n                        this._widget.setMetaTitle(nls.localize('metaTitle.N', \"{0} ({1})\", this._model.title, this._model.references.length));\n                    }\n                    else {\n                        this._widget.setMetaTitle('');\n                    }\n                    // set 'best' selection\n                    const uri = this._editor.getModel().uri;\n                    const pos = new Position(range.startLineNumber, range.startColumn);\n                    const selection = this._model.nearestReference(uri, pos);\n                    if (selection) {\n                        return this._widget.setSelection(selection).then(() => {\n                            if (this._widget && this._editor.getOption(82 /* EditorOption.peekWidgetDefaultFocus */) === 'editor') {\n                                this._widget.focusOnPreviewEditor();\n                            }\n                        });\n                    }\n                }\n                return undefined;\n            });\n        }, error => {\n            this._notificationService.error(error);\n        });\n    }\n    changeFocusBetweenPreviewAndReferences() {\n        if (!this._widget) {\n            // can be called while still resolving...\n            return;\n        }\n        if (this._widget.isPreviewEditorFocused()) {\n            this._widget.focusOnReferenceTree();\n        }\n        else {\n            this._widget.focusOnPreviewEditor();\n        }\n    }\n    goToNextOrPreviousReference(fwd) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel() || !this._model || !this._widget) {\n                // can be called while still resolving...\n                return;\n            }\n            const currentPosition = this._widget.position;\n            if (!currentPosition) {\n                return;\n            }\n            const source = this._model.nearestReference(this._editor.getModel().uri, currentPosition);\n            if (!source) {\n                return;\n            }\n            const target = this._model.nextOrPreviousReference(source, fwd);\n            const editorFocus = this._editor.hasTextFocus();\n            const previewEditorFocus = this._widget.isPreviewEditorFocused();\n            yield this._widget.setSelection(target);\n            yield this._gotoReference(target, false);\n            if (editorFocus) {\n                this._editor.focus();\n            }\n            else if (this._widget && previewEditorFocus) {\n                this._widget.focusOnPreviewEditor();\n            }\n        });\n    }\n    revealReference(reference) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel() || !this._model || !this._widget) {\n                // can be called while still resolving...\n                return;\n            }\n            yield this._widget.revealReference(reference);\n        });\n    }\n    closeWidget(focusEditor = true) {\n        var _a, _b;\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._model) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._referenceSearchVisible.reset();\n        this._disposables.clear();\n        this._widget = undefined;\n        this._model = undefined;\n        if (focusEditor) {\n            this._editor.focus();\n        }\n        this._requestIdPool += 1; // Cancel pending requests\n    }\n    _gotoReference(ref, pinned) {\n        var _a;\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.hide();\n        this._ignoreModelChangeEvent = true;\n        const range = Range.lift(ref.range).collapseToStart();\n        return this._editorService.openCodeEditor({\n            resource: ref.uri,\n            options: { selection: range, selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */, pinned }\n        }, this._editor).then(openedEditor => {\n            var _a;\n            this._ignoreModelChangeEvent = false;\n            if (!openedEditor || !this._widget) {\n                // something went wrong...\n                this.closeWidget();\n                return;\n            }\n            if (this._editor === openedEditor) {\n                //\n                this._widget.show(range);\n                this._widget.focusOnReferenceTree();\n            }\n            else {\n                // we opened a different editor instance which means a different controller instance.\n                // therefore we stop with this controller and continue with the other\n                const other = ReferencesController.get(openedEditor);\n                const model = this._model.clone();\n                this.closeWidget();\n                openedEditor.focus();\n                other === null || other === void 0 ? void 0 : other.toggleWidget(range, createCancelablePromise(_ => Promise.resolve(model)), (_a = this._peekMode) !== null && _a !== void 0 ? _a : false);\n            }\n        }, (err) => {\n            this._ignoreModelChangeEvent = false;\n            onUnexpectedError(err);\n        });\n    }\n    openReference(ref, sideBySide, pinned) {\n        // clear stage\n        if (!sideBySide) {\n            this.closeWidget();\n        }\n        const { uri, range } = ref;\n        this._editorService.openCodeEditor({\n            resource: uri,\n            options: { selection: range, selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */, pinned }\n        }, this._editor, sideBySide);\n    }\n};\nReferencesController.ID = 'editor.contrib.referencesController';\nReferencesController = __decorate([\n    __param(2, IContextKeyService),\n    __param(3, ICodeEditorService),\n    __param(4, INotificationService),\n    __param(5, IInstantiationService),\n    __param(6, IStorageService),\n    __param(7, IConfigurationService)\n], ReferencesController);\nexport { ReferencesController };\nfunction withController(accessor, fn) {\n    const outerEditor = getOuterEditor(accessor);\n    if (!outerEditor) {\n        return;\n    }\n    const controller = ReferencesController.get(outerEditor);\n    if (controller) {\n        fn(controller);\n    }\n}\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'togglePeekWidgetFocus',\n    weight: 100 /* KeybindingWeight.EditorContrib */,\n    primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 60 /* KeyCode.F2 */),\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.changeFocusBetweenPreviewAndReferences();\n        });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'goToNextReference',\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 10,\n    primary: 62 /* KeyCode.F4 */,\n    secondary: [70 /* KeyCode.F12 */],\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.goToNextOrPreviousReference(true);\n        });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'goToPreviousReference',\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 10,\n    primary: 1024 /* KeyMod.Shift */ | 62 /* KeyCode.F4 */,\n    secondary: [1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */],\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.goToNextOrPreviousReference(false);\n        });\n    }\n});\n// commands that aren't needed anymore because there is now ContextKeyExpr.OR\nCommandsRegistry.registerCommandAlias('goToNextReferenceFromEmbeddedEditor', 'goToNextReference');\nCommandsRegistry.registerCommandAlias('goToPreviousReferenceFromEmbeddedEditor', 'goToPreviousReference');\n// close\nCommandsRegistry.registerCommandAlias('closeReferenceSearchEditor', 'closeReferenceSearch');\nCommandsRegistry.registerCommand('closeReferenceSearch', accessor => withController(accessor, controller => controller.closeWidget()));\nKeybindingsRegistry.registerKeybindingRule({\n    id: 'closeReferenceSearch',\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 101,\n    primary: 9 /* KeyCode.Escape */,\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */],\n    when: ContextKeyExpr.and(PeekContext.inPeekEditor, ContextKeyExpr.not('config.editor.stablePeek'))\n});\nKeybindingsRegistry.registerKeybindingRule({\n    id: 'closeReferenceSearch',\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */ + 50,\n    primary: 9 /* KeyCode.Escape */,\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */],\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, ContextKeyExpr.not('config.editor.stablePeek'))\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'revealReference',\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */,\n    primary: 3 /* KeyCode.Enter */,\n    mac: {\n        primary: 3 /* KeyCode.Enter */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */]\n    },\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse.negate(), WorkbenchTreeElementCanExpand.negate()),\n    handler(accessor) {\n        var _a;\n        const listService = accessor.get(IListService);\n        const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n        if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n            withController(accessor, controller => controller.revealReference(focus[0]));\n        }\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'openReferenceToSide',\n    weight: 100 /* KeybindingWeight.EditorContrib */,\n    primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n    mac: {\n        primary: 256 /* KeyMod.WinCtrl */ | 3 /* KeyCode.Enter */\n    },\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse.negate(), WorkbenchTreeElementCanExpand.negate()),\n    handler(accessor) {\n        var _a;\n        const listService = accessor.get(IListService);\n        const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n        if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n            withController(accessor, controller => controller.openReference(focus[0], true, true));\n        }\n    }\n});\nCommandsRegistry.registerCommand('openReference', (accessor) => {\n    var _a;\n    const listService = accessor.get(IListService);\n    const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n    if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n        withController(accessor, controller => controller.openReference(focus[0], false, true));\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { defaultGenerator } from '../../../../base/common/idGenerator.js';\nimport { dispose } from '../../../../base/common/lifecycle.js';\nimport { ResourceMap } from '../../../../base/common/map.js';\nimport { basename, extUri } from '../../../../base/common/resources.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nexport class OneReference {\n    constructor(isProviderFirst, parent, link, _rangeCallback) {\n        this.isProviderFirst = isProviderFirst;\n        this.parent = parent;\n        this.link = link;\n        this._rangeCallback = _rangeCallback;\n        this.id = defaultGenerator.nextId();\n    }\n    get uri() {\n        return this.link.uri;\n    }\n    get range() {\n        var _a, _b;\n        return (_b = (_a = this._range) !== null && _a !== void 0 ? _a : this.link.targetSelectionRange) !== null && _b !== void 0 ? _b : this.link.range;\n    }\n    set range(value) {\n        this._range = value;\n        this._rangeCallback(this);\n    }\n    get ariaMessage() {\n        var _a;\n        const preview = (_a = this.parent.getPreview(this)) === null || _a === void 0 ? void 0 : _a.preview(this.range);\n        if (!preview) {\n            return localize('aria.oneReference', \"symbol in {0} on line {1} at column {2}\", basename(this.uri), this.range.startLineNumber, this.range.startColumn);\n        }\n        else {\n            return localize({ key: 'aria.oneReference.preview', comment: ['Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code'] }, \"symbol in {0} on line {1} at column {2}, {3}\", basename(this.uri), this.range.startLineNumber, this.range.startColumn, preview.value);\n        }\n    }\n}\nexport class FilePreview {\n    constructor(_modelReference) {\n        this._modelReference = _modelReference;\n    }\n    dispose() {\n        this._modelReference.dispose();\n    }\n    preview(range, n = 8) {\n        const model = this._modelReference.object.textEditorModel;\n        if (!model) {\n            return undefined;\n        }\n        const { startLineNumber, startColumn, endLineNumber, endColumn } = range;\n        const word = model.getWordUntilPosition({ lineNumber: startLineNumber, column: startColumn - n });\n        const beforeRange = new Range(startLineNumber, word.startColumn, startLineNumber, startColumn);\n        const afterRange = new Range(endLineNumber, endColumn, endLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        const before = model.getValueInRange(beforeRange).replace(/^\\s+/, '');\n        const inside = model.getValueInRange(range);\n        const after = model.getValueInRange(afterRange).replace(/\\s+$/, '');\n        return {\n            value: before + inside + after,\n            highlight: { start: before.length, end: before.length + inside.length }\n        };\n    }\n}\nexport class FileReferences {\n    constructor(parent, uri) {\n        this.parent = parent;\n        this.uri = uri;\n        this.children = [];\n        this._previews = new ResourceMap();\n    }\n    dispose() {\n        dispose(this._previews.values());\n        this._previews.clear();\n    }\n    getPreview(child) {\n        return this._previews.get(child.uri);\n    }\n    get ariaMessage() {\n        const len = this.children.length;\n        if (len === 1) {\n            return localize('aria.fileReferences.1', \"1 symbol in {0}, full path {1}\", basename(this.uri), this.uri.fsPath);\n        }\n        else {\n            return localize('aria.fileReferences.N', \"{0} symbols in {1}, full path {2}\", len, basename(this.uri), this.uri.fsPath);\n        }\n    }\n    resolve(textModelResolverService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._previews.size !== 0) {\n                return this;\n            }\n            for (const child of this.children) {\n                if (this._previews.has(child.uri)) {\n                    continue;\n                }\n                try {\n                    const ref = yield textModelResolverService.createModelReference(child.uri);\n                    this._previews.set(child.uri, new FilePreview(ref));\n                }\n                catch (err) {\n                    onUnexpectedError(err);\n                }\n            }\n            return this;\n        });\n    }\n}\nexport class ReferencesModel {\n    constructor(links, title) {\n        this.groups = [];\n        this.references = [];\n        this._onDidChangeReferenceRange = new Emitter();\n        this.onDidChangeReferenceRange = this._onDidChangeReferenceRange.event;\n        this._links = links;\n        this._title = title;\n        // grouping and sorting\n        const [providersFirst] = links;\n        links.sort(ReferencesModel._compareReferences);\n        let current;\n        for (const link of links) {\n            if (!current || !extUri.isEqual(current.uri, link.uri, true)) {\n                // new group\n                current = new FileReferences(this, link.uri);\n                this.groups.push(current);\n            }\n            // append, check for equality first!\n            if (current.children.length === 0 || ReferencesModel._compareReferences(link, current.children[current.children.length - 1]) !== 0) {\n                const oneRef = new OneReference(providersFirst === link, current, link, ref => this._onDidChangeReferenceRange.fire(ref));\n                this.references.push(oneRef);\n                current.children.push(oneRef);\n            }\n        }\n    }\n    dispose() {\n        dispose(this.groups);\n        this._onDidChangeReferenceRange.dispose();\n        this.groups.length = 0;\n    }\n    clone() {\n        return new ReferencesModel(this._links, this._title);\n    }\n    get title() {\n        return this._title;\n    }\n    get isEmpty() {\n        return this.groups.length === 0;\n    }\n    get ariaMessage() {\n        if (this.isEmpty) {\n            return localize('aria.result.0', \"No results found\");\n        }\n        else if (this.references.length === 1) {\n            return localize('aria.result.1', \"Found 1 symbol in {0}\", this.references[0].uri.fsPath);\n        }\n        else if (this.groups.length === 1) {\n            return localize('aria.result.n1', \"Found {0} symbols in {1}\", this.references.length, this.groups[0].uri.fsPath);\n        }\n        else {\n            return localize('aria.result.nm', \"Found {0} symbols in {1} files\", this.references.length, this.groups.length);\n        }\n    }\n    nextOrPreviousReference(reference, next) {\n        const { parent } = reference;\n        let idx = parent.children.indexOf(reference);\n        const childCount = parent.children.length;\n        const groupCount = parent.parent.groups.length;\n        if (groupCount === 1 || next && idx + 1 < childCount || !next && idx > 0) {\n            // cycling within one file\n            if (next) {\n                idx = (idx + 1) % childCount;\n            }\n            else {\n                idx = (idx + childCount - 1) % childCount;\n            }\n            return parent.children[idx];\n        }\n        idx = parent.parent.groups.indexOf(parent);\n        if (next) {\n            idx = (idx + 1) % groupCount;\n            return parent.parent.groups[idx].children[0];\n        }\n        else {\n            idx = (idx + groupCount - 1) % groupCount;\n            return parent.parent.groups[idx].children[parent.parent.groups[idx].children.length - 1];\n        }\n    }\n    nearestReference(resource, position) {\n        const nearest = this.references.map((ref, idx) => {\n            return {\n                idx,\n                prefixLen: strings.commonPrefixLength(ref.uri.toString(), resource.toString()),\n                offsetDist: Math.abs(ref.range.startLineNumber - position.lineNumber) * 100 + Math.abs(ref.range.startColumn - position.column)\n            };\n        }).sort((a, b) => {\n            if (a.prefixLen > b.prefixLen) {\n                return -1;\n            }\n            else if (a.prefixLen < b.prefixLen) {\n                return 1;\n            }\n            else if (a.offsetDist < b.offsetDist) {\n                return -1;\n            }\n            else if (a.offsetDist > b.offsetDist) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        })[0];\n        if (nearest) {\n            return this.references[nearest.idx];\n        }\n        return undefined;\n    }\n    referenceAt(resource, position) {\n        for (const ref of this.references) {\n            if (ref.uri.toString() === resource.toString()) {\n                if (Range.containsPosition(ref.range, position)) {\n                    return ref;\n                }\n            }\n        }\n        return undefined;\n    }\n    firstReference() {\n        for (const ref of this.references) {\n            if (ref.isProviderFirst) {\n                return ref;\n            }\n        }\n        return this.references[0];\n    }\n    static _compareReferences(a, b) {\n        return extUri.compare(a.uri, b.uri) || Range.compareRangesUsingStarts(a.range, b.range);\n    }\n}\n"],"names":["foldSourceAbbr","_foldSourceAbbr","_defineProperty","MAX_LINE_NUMBER","MASK_INDENT","BitField","size","_classCallCheck","numWords","Math","ceil","this","_states","Uint32Array","_createClass","key","value","index","arrayIndex","bit","newState","FoldingRegions","startIndexes","endIndexes","types","length","Error","_startIndexes","_endIndexes","_collapseStates","_userDefinedStates","_recoveredStates","_types","_parentsComputed","_this","parentIndexes","isInsideLast","startLineNumber","endLineNumber","getStartLineNumber","getEndLineNumber","i","len","pop","parentIndex","push","get","undefined","set","isUserDefined","isRecovered","source","setUserDefined","setRecovered","type","hasChanged","setCollapsed","FoldingRegion","ensureParentIndices","parent","line","low","high","mid","floor","findIndex","getParentIndex","contains","res","concat","getSource","isCollapsed","join","ranges","rangesLength","gotTypes","range","regions","setSource","rangesA","rangesB","maxLineNumber","Number","MAX_VALUE","topStackedRange","getIndexedFunction","r","limit","Array","isArray","toFoldRange","getA","getB","indexA","indexB","nextA","nextB","stackedRanges","prevLineNumber","resultRanges","useRange","scanIndex","prescanB","lineNumber","FoldingModel","textModel","decorationProvider","_updateEventEmitter","Emitter","onDidChange","event","_textModel","_decorationProvider","_regions","_editorDecorationIds","toggledRegions","sort","r1","r2","regionIndex","processed","changeDecorations","accessor","_step","k","dirtyRegionEndLine","lastHiddenLine","updateDecorationsUntil","isManual","changeDecorationOptions","getDecorationOption","_iterator","_createForOfIteratorHelper","s","n","done","editorDecorationId","newCollapseState","max","err","e","f","fire","model","collapseStateChanged","newFoldingRanges","intersects","foldRange","_step2","_iterator2","updatePost","fromFoldRanges","newRegions","blockedLineNumers","arguments","foldedOrManualRanges","_currentFoldedOrManualRanges","newRanges","sanitizeAndMerge","getLineCount","_this2","newEditorDecorations","decorationRange","startColumn","getLineMaxColumn","endColumn","options","deltaDecorations","isBlocked","_step3","_iterator3","blockedLineNumber","foldedRanges","decRange","getDecorationRange","result","checksum","_getLinesChecksum","state","_a","_b","_step4","rangesToRestore","_iterator4","lineNumber1","lineNumber2","hash","getLineContent","removeDecorations","filter","findRange","level","current","toRegion","region","levelStack","containedBy","setCollapseStateLevelsDown","foldingModel","doCollapse","levels","lineNumbers","toToggle","_step6","_iterator6","getRegionAtLine","regionsInside","getRegionsInside","apply","_toConsumableArray","toggleCollapseState","setCollapseStateLevelsUp","_step7","_iterator7","getAllRegionsAtLine","setCollapseStateForRest","blockedLineNumbers","_step9","filteredRegions","_iterator9","every","filteredRegion","setCollapseStateForMatchingLines","regExp","editorModel","test","setCollapseStateForType","getType","HiddenRangeModel","_hasLineChanges","_foldingModel","_foldingModelListener","_","updateHiddenRanges","_hiddenRanges","changes","some","change","countEOL","text","updateHiddenAreas","newHiddenAreas","lastCollapsedStart","lastCollapsedEnd","Range","applyHiddenRanges","selections","hasChanges","lastRange","adjustLine","isInside","selection","adjustedStartLine","setStartPosition","adjustedEndLine","setEndPosition","hiddenRanges","dispose","findFirstInSorted","IndentRangeProvider","languageConfigurationService","foldingRangesLimit","id","cancelationToken","foldingRules","getLanguageConfiguration","getLanguageId","offSide","markers","Promise","resolve","foldingRangesLimitDefault","tabSize","getOptions","RangesCollector","pattern","RegExp","start","end","previousRegions","indent","endAbove","lineContent","computeIndentLevel","previous","m","match","insertFirst","toIndentRanges","computeRanges","_indentOccurrences","_length","_foldingRangesLimit","update","entries","maxIndent","startIndex","foldBackground","registerColor","light","transparent","editorSelectionBackground","dark","hcDark","hcLight","localize","iconForeground","foldingExpandedIcon","registerIcon","Codicon","chevronDown","foldingCollapsedIcon","chevronRight","foldingManualCollapsedIcon","foldingManualExpandedIcon","foldedBackgroundMinimap","color","themeColorFromId","position","MinimapPosition","Inline","FoldingDecorationProvider","editor","showFoldingControls","showFoldingHighlights","isHidden","HIDDEN_RANGE_DECORATION","NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION","NO_CONTROLS_COLLAPSED_RANGE_DECORATION","NO_CONTROLS_EXPANDED_RANGE_DECORATION","MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION","MANUALLY_COLLAPSED_VISUAL_DECORATION","COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION","COLLAPSED_VISUAL_DECORATION","MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION","EXPANDED_AUTO_HIDE_VISUAL_DECORATION","MANUALLY_EXPANDED_VISUAL_DECORATION","EXPANDED_VISUAL_DECORATION","callback","decorationIds","ModelDecorationOptions","register","description","stickiness","afterContentClassName","isWholeLine","firstLineDecorationClassName","ThemeIcon","asClassName","className","minimap","foldingContext","SyntaxRangeProvider","providers","handleFoldingRangesChange","fallbackRangeProvider","disposables","DisposableStore","add","provider","cancellationToken","rangeData","promises","map","provideFoldingRanges","then","isCancellationRequested","nLines","rank","kind","onUnexpectedExternalError","all","collectSyntaxRanges","sorted","d1","d2","diff","collector","top","entry","sanitizeRanges","compute","_nestingLevels","_nestingLevelCounts","nestingLevel","maxLevel","__decorate","decorators","target","desc","d","c","Object","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","reject","fulfilled","step","next","rejected","CONTEXT_FOLDING_ENABLED","RawContextKey","FoldingController","_Disposable","_inherits","_super","_createSuper","contextKeyService","notificationService","languageFeatureDebounceService","languageFeaturesService","call","localToDispose","_register","_foldingLimitReporter","RangesLimitReporter","_isEnabled","_useFoldingProviders","_unfoldOnClickAfterEndOfLine","_restoringViewState","_currentModelHasFoldedImports","_foldingImportsByDefault","updateDebounceInfo","for","foldingRangeProvider","min","hiddenRangeModel","rangeProvider","foldingRegionPromise","foldingModelPromise","updateScheduler","cursorChangedScheduler","mouseDownInfo","foldingDecorationProvider","foldingEnabled","bindTo","onDidChangeModel","onModelChanged","onDidChangeConfiguration","triggerFoldingModelChanged","onFoldingStrategyChanged","getModel","isTooLargeForTokenization","collapsedRegions","getMemento","lineCount","foldedImports","applyMemento","clear","hr","onHiddenRangesChanges","Delayer","RunOnceScheduler","revealCursor","onDidChangeModelLanguageConfiguration","onDidChangeModelContent","onDidChangeCursorPosition","onCursorPositionChanged","onMouseDown","onEditorMouseDown","onMouseUp","onEditorMouseUp","cancel","_this3","indentRangeProvider","selectedProviders","getFoldingRangeProviders","notifyChangeModelContent","_this4","trigger","sw","StopWatch","getRangeProvider","createCancelablePromise","token","foldingRanges","scrollState","setCollapsedAllOfType","FoldingRangeKind","Imports","StableEditorScrollState","capture","getSelections","selectionLineNumbers","restore","newValue","elapsed","defaultDelay","onUnexpectedError","adjustSelections","setSelections","setHiddenAreas","hasRanges","schedule","_this5","getFoldingModel","_loop","selectionStartLineNumber","reveal","getPosition","leftButton","middleButton","iconClicked","data","detail","offsetLeftInGutter","element","offsetLeft","offsetX","isAfterLines","altKey","toMaybeToggle","otherRegion","recursive","shiftKey","column","revealPositionInCenterIfOutsideViewport","getContribution","ID","foldingRangeProviders","ordered","_foldingRangeSelector","Disposable","IContextKeyService","ILanguageConfigurationService","INotificationService","ILanguageFeatureDebounceService","ILanguageFeaturesService","_onDidChange","_computed","_limited","computed","limited","FoldingAction","_EditorAction","_super2","args","_this6","foldingController","reportTelemetry","invoke","getSelection","getStartPosition","selectionLines","l","getSelectedLines","_accessor","_editor","EditorAction","foldingArgumentsConstraint","foldingArgs","direction","UnfoldAction","_FoldingAction","_super3","label","nls","alias","precondition","kbOpts","kbExpr","EditorContextKeys","editorTextFocus","primary","mac","weight","name","constraint","schema","_foldingController","getLineNumbers","UnFoldRecursivelyAction","_FoldingAction2","_super4","KeyChord","_args","FoldAction","_FoldingAction3","_super5","_step8","_iterator8","setCollapseStateUp","ToggleFoldAction","_FoldingAction4","_super6","_step5","_iterator5","FoldRecursivelyAction","_FoldingAction5","_super7","selectedLines","FoldAllBlockCommentsAction","_FoldingAction6","_super8","hasTypes","Comment","comments","blockCommentStartToken","escapeRegExpCharacters","FoldAllRegionsAction","_FoldingAction7","_super9","Region","UnfoldAllRegionsAction","_FoldingAction8","_super10","FoldAllRegionsExceptAction","_FoldingAction9","_super11","UnfoldAllRegionsExceptAction","_FoldingAction10","_super12","FoldAllAction","_FoldingAction11","_super13","UnfoldAllAction","_FoldingAction12","_super14","FoldLevelAction","_FoldingAction13","_super15","parseInt","substr","ID_PREFIX","foldLevel","containsLine","setCollapseStateAtLevel","getFoldingLevel","GotoParentFoldAction","_FoldingAction14","_super16","foldingRegion","parentFoldingIdx","getParentFoldLine","setSelection","GotoPreviousFoldAction","_FoldingAction15","_super17","expectedParentIndex","minLineNumber","getPreviousFoldLine","GotoNextFoldAction","_FoldingAction16","_super18","getNextFoldLine","FoldRangeFromSelectionAction","_FoldingAction17","_super19","collapseRanges","a","b","RemoveFoldRangeFromSelectionAction","_FoldingAction18","_super20","removeManualRanges","registerEditorContribution","registerEditorAction","registerInstantiatedEditorAction","CommandsRegistry","registerCommand","_len","_key","_regeneratorRuntime","mark","_callee","resource","configurationService","strategy","foldingLimitReporter","_i","wrap","_context","prev","URI","illegalArgument","IModelService","IConfigurationService","getValue","abrupt","t0","CancellationToken","None","sent","fromValue","finish","stop","EditorFontZoomIn","EditorZoom","setZoomLevel","getZoomLevel","EditorFontZoomOut","_EditorAction2","EditorFontZoomReset","_EditorAction3","alertFormattingEdits","edits","edit","plusRange","_range","alert","getRealAndSyntheticDocumentFormattersOrdered","documentFormattingEditProvider","documentRangeFormattingEditProvider","seen","Set","docFormatter","formatter","extensionId","ExtensionIdentifier","toKey","rangeFormatter","has","displayName","provideDocumentFormattingEdits","provideDocumentRangeFormattingEdits","getFullModelRange","FormattingConflicts","selector","_selectors","unshift","document","mode","Iterable","first","formatDocumentRangesWithSelectedProvider","editorOrModel","rangeOrRanges","progress","_callee2","instaService","_accessor$get","documentRangeFormattingEditProviderRegistry","selected","_context2","IInstantiationService","isCodeEditor","select","report","invokeFunction","formatDocumentRangesWithProvider","_callee4","workerService","logService","cts","_range4","computeEdits","hasIntersectingEdit","allEdits","rawEditsList","_ranges","j","mergedRange","_i2","_rawEditsList","rawEdits","minimalEdits","_range2","initialSelection","_context4","IEditorWorkerService","ILogService","EditorStateCancellationTokenSource","TextModelCancellationTokenSource","asArray","compareRangesUsingStarts","areIntersectingOrTouching","fromPositions","getEndPosition","_callee3","_context3","trace","getFormattingOptions","mergedA","reduce","acc","val","x","intersectRanges","otherEdit","t1","splice","computeMoreMinimalEdits","uri","FormattingEdit","execute","Selection","pushEditOperations","lift","forceMoveMarkers","undoEdits","formatDocumentWithSelectedProvider","_callee5","_context5","formatDocumentWithProvider","_callee6","_edits","_edits2","_context6","_slicedToArray","getDocumentRangeFormattingEditsUntilResult","_callee7","_context7","catch","isNonEmptyArray","getDocumentFormattingEditsUntilResult","_callee8","_context8","getOnTypeFormattingEdits","ch","onTypeFormattingEditProvider","autoFormatTriggerCharacters","indexOf","provideOnTypeFormattingEdits","LinkedList","_callee9","resolverService","reference","_context9","assertType","isUri","isIRange","ITextModelService","createModelReference","object","textEditorModel","_len2","_key2","_callee10","_context10","_len3","_key3","_callee11","_context11","Position","isIPosition","FormatOnType","_languageFeaturesService","_workerService","_disposables","_sessionDisposables","_update","onDidChangeModelLanguage","getOption","hasModel","_this$_languageFeatur","support","triggerChars","CharacterSet","charCodeAt","onDidType","lastCharCode","_trigger","String","fromCharCode","isEmpty","CancellationTokenSource","unbind","isFlush","finally","FormatOnPaste","_instantiationService","_callOnDispose","_callOnModel","onDidPaste","_ref","Progress","FormatDocumentAction","ContextKeyExpr","and","notInCompositeEditor","writable","hasDocumentFormattingProvider","linux","contextMenuOpts","group","order","progressService","IEditorProgressService","showWhile","FormatSelectionAction","hasDocumentSelectionFormattingProvider","when","hasNonEmptySelection","commandService","ICodeEditorService","getFocusedCodeEditor","ICommandService","executeCommand","newEol","singleEdits","eol","pushEOL","editRange","validateRange","equalsRange","addUndoStops","pushUndoStop","_handleEolEdits","_isFullModelReplaceEdit","executeEdits","EditOperation","replace","replaceMove","restoreRelativeVerticalPositionOfCursor","MarkerCoordinate","marker","total","MarkerList","resourceFilter","_markerService","_configService","_dispoables","_markers","_nextIdx","_resourceFilter","toString","compareOrder","compareMarker","compare","MarkerSeverity","severity","updateMarker","read","severities","Warning","Info","onMarkerChanged","uris","fwd","found","idx","binarySearch","word","getWordAtPosition","containsPosition","isBeforeOrEqual","oldIdx","_initIdx","IMarkerService","IMarkerNavigationService","createDecorator","MarkerNavigationService","_provider","getMarkerList","registerSingleton","MessageWidget","onRelatedInformation","_openerService","_labelService","_lines","_longestLineLength","_relatedDiagnostics","WeakMap","domNode","createElement","_messageBlock","classList","setAttribute","appendChild","_relatedBlock","dom","addStandardDisposableListener","preventDefault","related","_scrollable","ScrollableElement","horizontal","vertical","useShadows","horizontalScrollbarSize","verticalScrollbarSize","getDomNode","onScroll","style","left","scrollLeft","scrollTop","message","relatedInformation","code","sourceAndCodeLength","lines","splitLines","clearNode","getAriaLabel","applyFontInfo","lastLineElement","innerText","height","lineHeight","detailsElement","sourceElement","codeElement","_codeLink","$","onclick","open","allowCommands","stopPropagation","append","relatedInformationNode","paddingTop","container","relatedResource","getUriBasenameLabel","title","getUriLabel","relatedMessage","fontInfo","scrollWidth","typicalFullwidthCharacterWidth","scrollHeight","setScrollDimensions","width","severityLabel","Hint","ariaLabel","MarkerNavigationWidget","_PeekViewWidget","_themeService","_menuService","instantiationService","_contextKeyService","showArrow","showFrame","isAccessible","frameWidth","_onDidSelectRelatedInformation","onDidSelectRelatedInformation","_severity","_backgroundColor","Color","white","_applyTheme","getColorTheme","onDidColorThemeChange","bind","_assertThisInitialized","create","theme","getColor","editorMarkerNavigationBackground","colorId","editorMarkerNavigationError","headerBackground","editorMarkerNavigationErrorHeader","editorMarkerNavigationWarning","editorMarkerNavigationWarningHeader","editorMarkerNavigationInfo","editorMarkerNavigationInfoHeader","frameColor","headerBg","arrowColor","headerBackgroundColor","primaryHeadingColor","peekViewTitleForeground","secondaryHeadingColor","peekViewTitleInfoForeground","_parentContainer","backgroundColor","_get","_getPrototypeOf","prototype","_actionbarWidget","actionRunner","onWillRun","focus","actions","menu","createMenu","TitleMenu","createAndFillInActionBarActions","icon","_icon","tabIndex","_container","_message","markerIdx","markerCount","remove","editorPosition","computeRequiredHeight","setTitle","basename","SeverityIcon","toSeverity","revealPositionNearTop","_relayout","heightInPixel","widthInPixel","_heightInPixel","layout","getHeightInLines","PeekViewWidget","MenuId","IThemeService","IOpenerService","IMenuService","ILabelService","errorDefault","oneOf","editorErrorForeground","editorErrorBorder","warningDefault","editorWarningForeground","editorWarningBorder","infoDefault","editorInfoForeground","editorInfoBorder","contrastBorder","editorBackground","MarkerController","_markerNavigationService","_editorService","_sessionDispoables","_widgetVisible","CONTEXT_MARKERS_NAVIGATION_VISIBLE","_cleanUp","reset","_widget","_model","matches","reusePosition","move","createInstance","onDidClose","close","_c","resetIndex","info","find","showStale","openCodeEditor","pinned","revealIfOpened","collapseToStart","focusEditor","_getOrCreateModel","showAtMarker","multiFile","otherEditor","selectionRevealType","nagivate","MarkerNavigationAction","_next","_multiFile","opts","NextMarkerAction","_MarkerNavigationActi","LABEL","menuOpts","menuId","arrowDown","PrevMarkerAction","_MarkerNavigationActi2","arrowUp","NextMarkerInFilesAction","_MarkerNavigationActi3","MenubarGoMenu","comment","PrevMarkerInFilesAction","_MarkerNavigationActi4","MarkerCommand","EditorCommand","bindToContribution","registerEditorCommand","handler","secondary","ctxHasSymbols","ISymbolNavigationService","SymbolNavigationService","_notificationService","_keybindingService","_currentModel","_currentIdx","_ignoreEditorChange","_ctxHasSymbols","_currentState","_currentMessage","anchor","refModel","references","_showMessage","editorState","EditorState","listener","getActiveCodeEditor","seenUri","seenPosition","isEqual","combinedDisposable","kb","lookupKeybinding","getLabel","status","IKeybindingService","_EditorCommand","_class","revealNext","KeybindingsRegistry","registerCommandAndKeybindingRule","editorService","_listener","Map","onCodeEditorRemove","_onDidRemoveEditor","onCodeEditorAdd","_onDidAddEditor","listCodeEditors","forEach","values","delete","_d","_e","_f","_g","_h","MenuRegistry","appendMenuItem","EditorContext","submenu","EditorContextPeek","SymbolNavigationAnchor","thing","corePosition","SymbolNavigationAction","configuration","_patchConfig","_allSymbolNavigationCommands","arg","symbolNavService","is","promise","raceCancellation","_getLocationModel","altAction","altActionId","referenceCount","ariaMessage","referenceAt","_getAlternativeCommand","_activeAlternativeCommands","muteMessage","MessageController","showMessage","_getNoResultFoundMessage","runEditorCommand","_onResult","error","gotoLocation","peek","targetEditor","_getGoToPreference","EmbeddedCodeEditorWidget","openInPeek","_openInPeek","firstReference","_openReference","openToSide","put","sideBySide","highlight","modelNow","decorations","isLocationLink","targetSelectionRange","selectionSource","createDecorationsCollection","setTimeout","controller","ReferencesController","toggleWidget","assign","f1","item","EditorAction2","DefinitionAction","_SymbolNavigationActi","ReferencesModel","getDefinitionsAtPosition","definitionProvider","t2","alternativeDefinitionCommand","multipleDefinitions","goToDefinitionKb","isWeb","isStandalone","registerAction2","_DefinitionAction","GoToDefinitionAction","original","mnemonicTitle","hasDefinitionProvider","isInWalkThroughSnippet","toNegated","keybinding","registerCommandAlias","_DefinitionAction2","OpenDefinitionToSideAction","_DefinitionAction3","PeekDefinitionAction","PeekContext","notInPeekEditor","DeclarationAction","_SymbolNavigationActi2","getDeclarationsAtPosition","declarationProvider","alternativeDeclarationCommand","multipleDeclarations","_DeclarationAction","GoToDeclarationAction","hasDeclarationProvider","_DeclarationAction2","PeekDeclarationAction","TypeDefinitionAction","_SymbolNavigationActi3","getTypeDefinitionsAtPosition","typeDefinitionProvider","alternativeTypeDefinitionCommand","multipleTypeDefinitions","_TypeDefinitionAction","GoToTypeDefinitionAction","hasTypeDefinitionProvider","_TypeDefinitionAction2","PeekTypeDefinitionAction","ImplementationAction","_SymbolNavigationActi4","getImplementationsAtPosition","implementationProvider","alternativeImplementationCommand","multipleImplementations","_ImplementationAction","GoToImplementationAction","hasImplementationProvider","_ImplementationAction2","PeekImplementationAction","ReferencesAction","_SymbolNavigationActi5","alternativeReferenceCommand","multipleReferences","_ReferencesAction","GoToReferencesAction","hasReferenceProvider","getReferencesAtPosition","referenceProvider","_ReferencesAction2","PeekReferencesAction","GenericGoToLocationAction","_SymbolNavigationActi6","config","_references","_gotoMultipleBehaviour","_this7","_position","_token","multiple","noResultsMessage","setPosition","invokeWithinContext","command","_GenericGoToLocationA","Boolean","run","_callee12","_context12","codeEditorService","control","getLocationLinks","registry","provide","coalesce","flat","provideDefinition","provideDeclaration","provideImplementation","provideTypeDefinition","compact","resultWithoutDeclaration","provideReferences","includeDeclaration","_sortedAndDeduped","rawLinks","modelLinks","ref","link","registerModelAndPositionCommand","hasModifier","modifier","ClickLinkMouseEvent","isLeftClick","isMiddleClick","isRightClick","rightButton","hasTriggerModifier","triggerModifier","hasSideBySideModifier","triggerSideBySideModifier","isNoneOrSingleMouseDown","ClickLinkKeyboardEvent","keyCodeIsTriggerKey","keyCode","triggerKey","keyCodeIsSideBySideKey","triggerSideBySideKey","ClickLinkOptions","other","createOptions","multiCursorModifier","platform","ClickLinkGesture","alwaysFireOnMouseUp","_onMouseMoveOrRelevantKeyDown","onMouseMoveOrRelevantKeyDown","_onExecute","onExecute","_onCancel","onCancel","_alwaysFireExecuteOnMouseUp","_opts","_lastMouseMoveEvent","_hasTriggerKeyOnMouseDown","_lineNumberOnMouseDown","newOpts","equals","onMouseMove","_onEditorMouseMove","_onEditorMouseDown","_onEditorMouseUp","onKeyDown","_onEditorKeyDown","onKeyUp","_onEditorKeyUp","onMouseDrag","_resetHandler","onDidChangeCursorSelection","_onDidChangeCursorSelection","onDidScrollChange","scrollTopChanged","scrollLeftChanged","mouseEvent","currentLineNumber","GotoDefinitionAtPositionEditorContribution","textModelResolverService","languageService","toUnhook","toUnhookForKeyboard","currentWordAtPosition","previousPromise","linkDecorations","linkGesture","_ref2","keyboardEvent","startFindDefinitionFromMouse","withNullAsUndefined","isEnabled","gotoDefinition","removeLinkDecorations","startFindDefinition","withKey","results","linkRange","combinedRange","originSelectionRange","findDefinition","validate","addDecoration","MarkdownString","appendText","previewValue","getPreviewValue","languageId","guessLanguageIdByFilepathOrFirstLine","appendCodeblock","rangeToUse","MAX_SOURCE_PREVIEW_LINES","getPreviewRangeBasedOnIndentation","stripIndentationFromPreviewRange","previewRange","minIndent","getLineFirstNonWhitespaceColumn","endIndent","getValueInRange","trim","startIndent","hoverMessage","newDecorations","inlineClassName","injectedText","ModelDecorationInjectedTextOptions","canPeek","isInPeekEditor","inPeekEditor","ILanguageService","DataSource","_resolverService","FileReferences","groups","children","Delegate","FileReferencesRenderer","OneReferenceRenderer","StringRepresentationProvider","OneReference","parts","getPreview","preview","IdentityProvider","FileReferencesTemplate","file","IconLabel","supportHighlights","badge","CountBadge","defaultCountBadgeStyles","dirname","setLabel","relative","setCount","setTitleFormat","templateId","node","template","createMatches","filterData","templateData","OneReferenceTemplate","HighlightedLabel","score","FuzzyScore","isDefault","toggle","AccessibilityProvider","DecorationsManager","_decorations","_decorationIgnoreSet","_callOnModelChange","_onModelChanged","_addDecorations","onDidChangeDecorations","_onDecorationChanged","newDecorationsActualIndex","oneReference","DecorationOptions","changeAccessor","toRemove","_step2$value","decorationId","newRange","ignore","spansMultipleLines","keys","LayoutData","ratio","heightInLines","raw","JSON","parse","ReferencesTree","_WorkbenchAsyncDataTr","WorkbenchAsyncDataTree","ReferenceWidget","_peekView$PeekViewWid","_defaultTreeKeyboardSupport","layoutData","themeService","_textModelResolverService","_peekViewService","_uriLabel","_undoRedoService","_languageService","_languageConfigurationService","isResizeable","supportOnTitleClick","_disposeOnNewModel","_onDidSelectReference","onDidSelectReference","_dim","Dimension","addExclusiveWidget","setModel","_preview","_previewNotAvailableMessage","_tree","_previewModelReference","_splitView","borderColor","peekView","where","domFocus","hasTextFocus","_getFocusedReference","ctrlKey","metaKey","containerElement","setCssClass","_messageContainer","hide","SplitView","orientation","_previewContainer","scrollBeyondLastLine","scrollbar","verticalHasArrows","horizontalHasArrows","alwaysConsumeMouseWheel","overviewRulerLanes","fixedOverflowWidgets","enabled","TextModel","PLAINTEXT_LANGUAGE_ID","DEFAULT_CREATION_OPTIONS","_treeContainer","treeOptions","keyboardSupport","accessibilityProvider","keyboardNavigationLabelProvider","identityProvider","openOnSingleClick","selectionNavigation","overrideStyles","listBackground","dispatchEvent","addView","Event","minimumSize","maximumSize","Sizing","Distribute","onDidSashChange","getViewSize","onEvent","_revealReference","onDidOpen","editorOptions","_doLayoutBody","_viewZone","resizeView","setFocus","newModel","_onNewModel","show","_decorationsManager","onDidChangeReferenceRange","rerender","focusOnReferenceTree","setInput","_this$_tree$getFocus","getFocus","revealParent","scrollType","sel","_revealedReference","scheme","Schemas","inMemory","basenameOrAuthority","getInput","expand","revealRangeInCenter","IUndoRedoService","ctxReferenceSearchVisible","_storageService","_configurationService","_requestIdPool","_ignoreModelChangeEvent","_referenceSearchVisible","modelPromise","peekMode","widgetPosition","closeWidget","_peekMode","storageKey","fromJSON","store","stringify","openReference","_gotoReference","requestId","setMetaTitle","pos","nearestReference","focusOnPreviewEditor","isPreviewEditorFocused","currentPosition","editorFocus","previewEditorFocus","nextOrPreviousReference","revealReference","openedEditor","clone","withController","fn","outerEditor","getOuterEditor","IStorageService","or","changeFocusBetweenPreviewAndReferences","goToNextOrPreviousReference","registerKeybindingRule","not","WorkbenchListFocusContextKey","WorkbenchTreeElementCanCollapse","negate","WorkbenchTreeElementCanExpand","IListService","lastFocusedList","isProviderFirst","_rangeCallback","defaultGenerator","nextId","FilePreview","_modelReference","getWordUntilPosition","beforeRange","afterRange","before","inside","_previews","ResourceMap","child","fsPath","links","_onDidChangeReferenceRange","_links","_title","providersFirst","_compareReferences","extUri","oneRef","childCount","groupCount","nearest","prefixLen","strings","offsetDist","abs"],"sourceRoot":""}