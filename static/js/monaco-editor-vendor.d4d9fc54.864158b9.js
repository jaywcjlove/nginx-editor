"use strict";(self.webpackChunkmonaco_editor_nginx=self.webpackChunkmonaco_editor_nginx||[]).push([[9233],{92737:function(e,t,n){n.r(t);var i=n(95253),r=n(24250),o=n(4942),a=n(93433),s=n(29439),u=n(74165),l=n(37762),c=n(15671),d=n(43144),h=n(32959),g=n(38102),f=n(71049),v=n(7388),p=n(74146),m=n(65096),b=n(29413),y=n(63021),C=n(38821),_=n(47583),x=n(49039),w=n(17683),k=n(62557),S=n(17429),L=n(70133),Z=n(20329),I=n(78519),N=n(68200),T=n(65441),R=n(7787),D=n(64124),P=n(65631),M=n(37649),O=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},A=(0,d.Z)((function e(t,n){(0,c.Z)(this,e),this.range=t,this.direction=n})),E=function(){function e(t,n,i){(0,c.Z)(this,e),this.hint=t,this.anchor=n,this.provider=i,this._isResolved=!1}return(0,d.Z)(e,[{key:"with",value:function(t){var n=new e(this.hint,t.anchor,this.provider);return n._isResolved=this._isResolved,n._currentResolve=this._currentResolve,n}},{key:"resolve",value:function(e){return O(this,void 0,void 0,(0,u.Z)().mark((function t(){var n=this;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"===typeof this.provider.resolveInlayHint){t.next=2;break}return t.abrupt("return");case 2:if(!this._currentResolve){t.next=8;break}return t.next=5,this._currentResolve;case 5:if(!e.isCancellationRequested){t.next=7;break}return t.abrupt("return");case 7:return t.abrupt("return",this.resolve(e));case 8:return this._isResolved||(this._currentResolve=this._doResolve(e).finally((function(){return n._currentResolve=void 0}))),t.next=11,this._currentResolve;case 11:case"end":return t.stop()}}),t,this)})))}},{key:"_doResolve",value:function(e){var t,n;return O(this,void 0,void 0,(0,u.Z)().mark((function i(){var r;return(0,u.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Promise.resolve(this.provider.resolveInlayHint(this.hint,e));case 3:r=i.sent,this.hint.tooltip=null!==(t=null===r||void 0===r?void 0:r.tooltip)&&void 0!==t?t:this.hint.tooltip,this.hint.label=null!==(n=null===r||void 0===r?void 0:r.label)&&void 0!==n?n:this.hint.label,this._isResolved=!0,i.next=13;break;case 9:i.prev=9,i.t0=i.catch(0),(0,p.Cp)(i.t0),this._isResolved=!1;case 13:case"end":return i.stop()}}),i,this,[[0,9]])})))}}]),e}(),V=function(){function e(t,n,i){(0,c.Z)(this,e),this._disposables=new m.SL,this.ranges=t,this.provider=new Set;var r,o=[],a=(0,l.Z)(n);try{for(a.s();!(r=a.n()).done;){var u=(0,s.Z)(r.value,2),d=u[0],h=u[1];this._disposables.add(d),this.provider.add(h);var g,f=(0,l.Z)(d.hints);try{for(f.s();!(g=f.n()).done;){var v=g.value,p=i.validatePosition(v.position),b="before",y=e._getRangeAtPosition(i,p),C=void 0;y.getStartPosition().isBefore(p)?(C=S.e.fromPositions(y.getStartPosition(),p),b="after"):(C=S.e.fromPositions(p,y.getEndPosition()),b="before"),o.push(new E(v,new A(C,b),h))}}catch(_){f.e(_)}finally{f.f()}}}catch(_){a.e(_)}finally{a.f()}this.items=o.sort((function(e,t){return P.L.compare(e.hint.position,t.hint.position)}))}return(0,d.Z)(e,[{key:"dispose",value:function(){this._disposables.dispose()}}],[{key:"create",value:function(t,n,i,r){return O(this,void 0,void 0,(0,u.Z)().mark((function o(){var a,s,l=this;return(0,u.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return a=[],s=t.ordered(n).reverse().map((function(e){return i.map((function(t){return O(l,void 0,void 0,(0,u.Z)().mark((function i(){var o;return(0,u.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e.provideInlayHints(n,t,r);case 3:(null===(o=i.sent)||void 0===o?void 0:o.hints.length)&&a.push([o,e]),i.next=10;break;case 7:i.prev=7,i.t0=i.catch(0),(0,p.Cp)(i.t0);case 10:case"end":return i.stop()}}),i,null,[[0,7]])})))}))})),o.next=4,Promise.all(s.flat());case 4:if(!r.isCancellationRequested&&!n.isDisposed()){o.next=6;break}throw new p.FU;case 6:return o.abrupt("return",new e(i,a,n));case 7:case"end":return o.stop()}}),o)})))}},{key:"_getRangeAtPosition",value:function(e,t){var n=t.lineNumber,i=e.getWordAtPosition(t);if(i)return new S.e(n,i.startColumn,n,i.endColumn);e.tokenization.tokenizeIfCheap(n);var r=e.tokenization.getLineTokens(n),o=t.column-1,a=r.findTokenIndexAtOffset(o),s=r.getStartOffset(a),u=r.getEndOffset(a);return u-s===1&&(s===o&&a>1?(s=r.getStartOffset(a-1),u=r.getEndOffset(a-1)):u===o&&a<r.getCount()-1&&(s=r.getStartOffset(a+1),u=r.getEndOffset(a+1))),new S.e(n,s+1,n,u+1)}}]),e}();var H,U=n(32993),W=n(99740),F=n(57832),K=n(64606),B=n(49431),q=n(43980),j=n(41335),Y=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},z=function(e,t){return function(n,i){t(n,i,e)}},Q=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},G=function(){function e(){(0,c.Z)(this,e),this._entries=new b.z6(50)}return(0,d.Z)(e,[{key:"get",value:function(t){var n=e._key(t);return this._entries.get(n)}},{key:"set",value:function(t,n){var i=e._key(t);this._entries.set(i,n)}}],[{key:"_key",value:function(e){return"".concat(e.uri.toString(),"/").concat(e.getVersionId())}}]),e}(),J=(0,K.yh)("IInlayHintsCache");(0,F.z)(J,G,1);var $=function(){function e(t,n){(0,c.Z)(this,e),this.item=t,this.index=n}return(0,d.Z)(e,[{key:"part",get:function(){var e=this.item.hint.label;return"string"===typeof e?{label:e}:e[this.index]}}]),e}(),X=(0,d.Z)((function e(t,n){(0,c.Z)(this,e),this.part=t,this.hasTriggerModifier=n})),ee=H=function(){function e(t,n,i,r,o,a,s){var u=this;(0,c.Z)(this,e),this._editor=t,this._languageFeaturesService=n,this._inlayHintsCache=r,this._commandService=o,this._notificationService=a,this._instaService=s,this._disposables=new m.SL,this._sessionDisposables=new m.SL,this._decorationsMetadata=new Map,this._ruleFactory=new _.t7(this._editor),this._activeRenderMode=0,this._debounceInfo=i.for(n.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(n.inlayHintsProvider.onDidChange((function(){return u._update()}))),this._disposables.add(t.onDidChangeModel((function(){return u._update()}))),this._disposables.add(t.onDidChangeModelLanguage((function(){return u._update()}))),this._disposables.add(t.onDidChangeConfiguration((function(e){e.hasChanged(139)&&u._update()}))),this._update()}return(0,d.Z)(e,[{key:"dispose",value:function(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}},{key:"_update",value:function(){var e=this;this._sessionDisposables.clear(),this._removeAllDecorations();var t=this._editor.getOption(139);if("off"!==t.enabled){var n=this._editor.getModel();if(n&&this._languageFeaturesService.inlayHintsProvider.has(n)){var i,r=this._inlayHintsCache.get(n);r&&this._updateHintsDecorators([n.getFullModelRange()],r),this._sessionDisposables.add((0,m.OF)((function(){n.isDisposed()||e._cacheHintsForFastRestore(n)})));var o,a,s=new Set,c=new f.pY((function(){return Q(e,void 0,void 0,(0,u.Z)().mark((function e(){var t,r,o,a,d,h,g;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Date.now(),null===i||void 0===i||i.dispose(!0),i=new v.A,r=n.onWillDispose((function(){return null===i||void 0===i?void 0:i.cancel()})),e.prev=4,o=i.token,e.next=8,V.create(this._languageFeaturesService.inlayHintsProvider,n,this._getHintsRanges(),o);case 8:if(a=e.sent,c.delay=this._debounceInfo.update(n,Date.now()-t),!o.isCancellationRequested){e.next=13;break}return a.dispose(),e.abrupt("return");case 13:d=(0,l.Z)(a.provider);try{for(d.s();!(h=d.n()).done;)"function"!==typeof(g=h.value).onDidChangeInlayHints||s.has(g)||(s.add(g),this._sessionDisposables.add(g.onDidChangeInlayHints((function(){c.isScheduled()||c.schedule()}))))}catch(u){d.e(u)}finally{d.f()}this._sessionDisposables.add(a),this._updateHintsDecorators(a.ranges,a.items),this._cacheHintsForFastRestore(n),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(4),(0,p.dL)(e.t0);case 23:return e.prev=23,i.dispose(),r.dispose(),e.finish(23);case 27:case"end":return e.stop()}}),e,this,[[4,20,23,27]])})))}),this._debounceInfo.get(n));if(this._sessionDisposables.add(c),this._sessionDisposables.add((0,m.OF)((function(){return null===i||void 0===i?void 0:i.dispose(!0)}))),c.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange((function(e){!e.scrollTopChanged&&c.isScheduled()||c.schedule()}))),this._sessionDisposables.add(this._editor.onDidChangeModelContent((function(e){var t=Math.max(c.delay,1250);c.schedule(t)}))),"on"===t.enabled)this._activeRenderMode=0;else"onUnlessPressed"===t.enabled?(o=0,a=1):(o=1,a=0),this._activeRenderMode=o,this._sessionDisposables.add(h.ModifierKeyEmitter.getInstance().event((function(t){if(e._editor.hasModel()){var n=t.altKey&&t.ctrlKey&&!t.shiftKey&&!t.metaKey?a:o;if(n!==e._activeRenderMode){e._activeRenderMode=n;var i=e._editor.getModel(),r=e._copyInlayHintsWithCurrentAnchor(i);e._updateHintsDecorators([i.getFullModelRange()],r),c.schedule(0)}}})));this._sessionDisposables.add(this._installDblClickGesture((function(){return c.schedule(0)}))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}}}},{key:"_installLinkGesture",value:function(){var e=this,t=new m.SL,n=t.add(new D.yN(this._editor)),i=new m.SL;return t.add(i),t.add(n.onMouseMoveOrRelevantKeyDown((function(t){var n=(0,s.Z)(t,1)[0],r=e._getInlayHintLabelPart(n),o=e._editor.getModel();if(r&&o){var a=new v.A;i.add((0,m.OF)((function(){return a.dispose(!0)}))),r.item.resolve(a.token),e._activeInlayHintPart=r.part.command||r.part.location?new X(r,n.hasTriggerModifier):void 0;var u=o.validatePosition(r.item.hint.position).lineNumber,l=new S.e(u,1,u,o.getLineMaxColumn(u)),c=e._getInlineHintsForRange(l);e._updateHintsDecorators([l],c),i.add((0,m.OF)((function(){e._activeInlayHintPart=void 0,e._updateHintsDecorators([l],c)})))}else i.clear()}))),t.add(n.onCancel((function(){return i.clear()}))),t.add(n.onExecute((function(t){return Q(e,void 0,void 0,(0,u.Z)().mark((function e(){var n,i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this._getInlayHintLabelPart(t))){e.next=10;break}if(!(i=n.part).location){e.next=7;break}this._instaService.invokeFunction(U.K,t,this._editor,i.location),e.next=10;break;case 7:if(!L.mY.is(i.command)){e.next=10;break}return e.next=10,this._invokeCommand(i.command,n.item);case 10:case"end":return e.stop()}}),e,this)})))}))),t}},{key:"_getInlineHintsForRange",value:function(e){var t,n=new Set,i=(0,l.Z)(this._decorationsMetadata.values());try{for(i.s();!(t=i.n()).done;){var r=t.value;e.containsRange(r.item.anchor.range)&&n.add(r.item)}}catch(o){i.e(o)}finally{i.f()}return Array.from(n)}},{key:"_installDblClickGesture",value:function(e){var t=this;return this._editor.onMouseUp((function(n){return Q(t,void 0,void 0,(0,u.Z)().mark((function t(){var i,r;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(2===n.event.detail){t.next=2;break}return t.abrupt("return");case 2:if(i=this._getInlayHintLabelPart(n)){t.next=5;break}return t.abrupt("return");case 5:return n.event.preventDefault(),t.next=8,i.item.resolve(v.T.None);case 8:(0,g.Of)(i.item.hint.textEdits)&&(r=i.item.hint.textEdits.map((function(e){return k.h.replace(S.e.lift(e.range),e.text)})),this._editor.executeEdits("inlayHint.default",r),e());case 9:case"end":return t.stop()}}),t,this)})))}))}},{key:"_installContextMenu",value:function(){var e=this;return this._editor.onContextMenu((function(t){return Q(e,void 0,void 0,(0,u.Z)().mark((function e(){var n;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.event.target instanceof HTMLElement){e.next=2;break}return e.abrupt("return");case 2:if(!(n=this._getInlayHintLabelPart(t))){e.next=6;break}return e.next=6,this._instaService.invokeFunction(U.u,this._editor,t.event.target,n);case 6:case"end":return e.stop()}}),e,this)})))}))}},{key:"_getInlayHintLabelPart",value:function(e){var t;if(6===e.target.type){var n=null===(t=e.target.detail.injectedText)||void 0===t?void 0:t.options;return n instanceof I.HS&&(null===n||void 0===n?void 0:n.attachedData)instanceof $?n.attachedData:void 0}}},{key:"_invokeCommand",value:function(e,t){var n;return Q(this,void 0,void 0,(0,u.Z)().mark((function i(){var r;return(0,u.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(r=this._commandService).executeCommand.apply(r,[e.id].concat((0,a.Z)(null!==(n=e.arguments)&&void 0!==n?n:[])));case 3:i.next=8;break;case 5:i.prev=5,i.t0=i.catch(0),this._notificationService.notify({severity:B.zb.Error,source:t.provider.displayName,message:i.t0});case 8:case"end":return i.stop()}}),i,this,[[0,5]])})))}},{key:"_cacheHintsForFastRestore",value:function(e){var t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}},{key:"_copyInlayHintsWithCurrentAnchor",value:function(e){var t,n=new Map,i=(0,l.Z)(this._decorationsMetadata);try{for(i.s();!(t=i.n()).done;){var r=(0,s.Z)(t.value,2),o=r[0],a=r[1];if(!n.has(a.item)){var u=e.getDecorationRange(o);if(u){var c=new A(u,a.item.anchor.direction),d=a.item.with({anchor:c});n.set(a.item,d)}}}}catch(h){i.e(h)}finally{i.f()}return Array.from(n.values())}},{key:"_getHintsRanges",value:function(){var e,t=this._editor.getModel(),n=this._editor.getVisibleRangesPlusViewportAboveBelow(),i=[],r=(0,l.Z)(n.sort(S.e.compareRangesUsingStarts));try{for(r.s();!(e=r.n()).done;){var o=e.value,a=t.validateRange(new S.e(o.startLineNumber-30,o.startColumn,o.endLineNumber+30,o.endColumn));0!==i.length&&S.e.areIntersectingOrTouching(i[i.length-1],a)?i[i.length-1]=S.e.plusRange(i[i.length-1],a):i.push(a)}}catch(s){r.e(s)}finally{r.f()}return i}},{key:"_updateHintsDecorators",value:function(e,t){var n,i,r=this,a=[],s=function(e,t,n,i,s){var u={content:n,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:t.className,cursorStops:i,attachedData:s};a.push({item:e,classNameRef:t,decoration:{range:e.anchor.range,options:(0,o.Z)({description:"InlayHint",showIfCollapsed:e.anchor.range.isEmpty(),collapseOnReplaceEdit:!e.anchor.range.isEmpty(),stickiness:0},e.anchor.direction,0===r._activeRenderMode?u:void 0)}})},u=function(e,t){var n=r._ruleFactory.createClassNameRef({width:"".concat(d/3|0,"px"),display:"inline-block"});s(e,n,"\u200a",t?Z.RM.Right:Z.RM.None)},c=this._getLayoutInfo(),d=c.fontSize,h=c.fontFamily,f=c.padding,v=c.isUniform,p="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(p,h);var m,b=(0,l.Z)(t);try{for(b.s();!(m=b.n()).done;){var y=m.value;y.hint.paddingLeft&&u(y,!1);for(var C="string"===typeof y.hint.label?[{label:y.hint.label}]:y.hint.label,_=0;_<C.length;_++){var k=C[_],S=0===_,L=_===C.length-1,I={fontSize:"".concat(d,"px"),fontFamily:"var(".concat(p,"), ").concat(w.hL.fontFamily),verticalAlign:v?"baseline":"middle",unicodeBidi:"isolate"};(0,g.Of)(y.hint.textEdits)&&(I.cursor="default"),this._fillInColors(I,y.hint),(k.command||k.location)&&(null===(n=this._activeInlayHintPart)||void 0===n?void 0:n.part.item)===y&&this._activeInlayHintPart.part.index===_&&(I.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(I.color=(0,j.EN)(q._Yy),I.cursor="pointer")),f&&(S&&L?(I.padding="1px ".concat(0|Math.max(1,d/4),"px"),I.borderRadius="".concat(d/4|0,"px")):S?(I.padding="1px 0 1px ".concat(0|Math.max(1,d/4),"px"),I.borderRadius="".concat(d/4|0,"px 0 0 ").concat(d/4|0,"px")):L?(I.padding="1px ".concat(0|Math.max(1,d/4),"px 1px 0"),I.borderRadius="0 ".concat(d/4|0,"px ").concat(d/4|0,"px 0")):I.padding="1px 0 1px 0"),s(y,this._ruleFactory.createClassNameRef(I),te(k.label),L&&!y.hint.paddingRight?Z.RM.Right:Z.RM.None,new $(y,_))}if(y.hint.paddingRight&&u(y,!0),a.length>H._MAX_DECORATORS)break}}catch(V){b.e(V)}finally{b.f()}var N,T=[],R=(0,l.Z)(e);try{for(R.s();!(N=R.n()).done;){var D,P=N.value,M=(0,l.Z)(null!==(i=this._editor.getDecorationsInRange(P))&&void 0!==i?i:[]);try{for(M.s();!(D=M.n()).done;){var O=D.value.id,A=this._decorationsMetadata.get(O);A&&(T.push(O),A.classNameRef.dispose(),this._decorationsMetadata.delete(O))}}catch(V){M.e(V)}finally{M.f()}}}catch(V){R.e(V)}finally{R.f()}var E=x.Z.capture(this._editor);this._editor.changeDecorations((function(e){for(var t=e.deltaDecorations(T,a.map((function(e){return e.decoration}))),n=0;n<t.length;n++){var i=a[n];r._decorationsMetadata.set(t[n],i)}})),E.restore(this._editor)}},{key:"_fillInColors",value:function(e,t){t.kind===L.gl.Parameter?(e.backgroundColor=(0,j.EN)(q.phM),e.color=(0,j.EN)(q.HCL)):t.kind===L.gl.Type?(e.backgroundColor=(0,j.EN)(q.bKB),e.color=(0,j.EN)(q.hX8)):(e.backgroundColor=(0,j.EN)(q.PpC),e.color=(0,j.EN)(q.VVv))}},{key:"_getLayoutInfo",value:function(){var e=this._editor.getOption(139),t=e.padding,n=this._editor.getOption(52),i=this._editor.getOption(49),r=e.fontSize;(!r||r<5||r>n)&&(r=n);var o=e.fontFamily||i;return{fontSize:r,fontFamily:o,padding:t,isUniform:!t&&o===i&&r===n}}},{key:"_removeAllDecorations",value:function(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));var e,t=(0,l.Z)(this._decorationsMetadata.values());try{for(t.s();!(e=t.n()).done;){e.value.classNameRef.dispose()}}catch(n){t.e(n)}finally{t.f()}this._decorationsMetadata.clear()}}],[{key:"get",value:function(e){var t;return null!==(t=e.getContribution(H.ID))&&void 0!==t?t:void 0}}]),e}();function te(e){return e.replace(/[ \t]/g,"\xa0")}ee.ID="editor.contrib.InlayHints",ee._MAX_DECORATORS=1500,ee=H=Y([z(1,T.p),z(2,N.A),z(3,J),z(4,W.H),z(5,B.lT),z(6,K.TG)],ee),W.P.registerCommand("_executeInlayHintProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Q(void 0,void 0,void 0,(0,u.Z)().mark((function t(){var i,r,o,a,s,l,c;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n[0],r=n[1],(0,y.p_)(C.o.isUri(i)),(0,y.p_)(S.e.isIRange(r)),o=e.get(T.p),a=o.inlayHintsProvider,t.next=6,e.get(R.S).createModelReference(i);case 6:return s=t.sent,t.prev=7,t.next=10,V.create(a,s.object.textEditorModel,[S.e.lift(r)],v.T.None);case 10:return l=t.sent,c=l.items.map((function(e){return e.hint})),setTimeout((function(){return l.dispose()}),0),t.abrupt("return",c);case 14:return t.prev=14,s.dispose(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[7,,14,17]])})))}));var ne=n(60136),ie=n(27277),re=n(71047),oe=n(58188),ae=n(93630),se=n(80592),ue=n(77819),le=n(51713),ce=n(18420),de=n(90650),he=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ge=function(e,t){return function(n,i){t(n,i,e)}},fe=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},ve=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"===typeof __values?__values(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,r,(t=e[n](t)).done,t.value)}))}}},pe=function(e){(0,ne.Z)(n,e);var t=(0,ie.Z)(n);function n(e,i,r,o){var a;return(0,c.Z)(this,n),(a=t.call(this,10,i,e.item.anchor.range,r,o,!0)).part=e,a}return(0,d.Z)(n)}(r.YM),me=function(e){(0,ne.Z)(n,e);var t=(0,ie.Z)(n);function n(e,i,r,o,a,s){var u;return(0,c.Z)(this,n),(u=t.call(this,e,i,r,o,s))._resolverService=a,u.hoverOrdinal=6,u}return(0,d.Z)(n,[{key:"suggestHoverAnchor",value:function(e){var t;if(!ee.get(this._editor))return null;if(6!==e.target.type)return null;var n=null===(t=e.target.detail.injectedText)||void 0===t?void 0:t.options;return n instanceof I.HS&&n.attachedData instanceof $?new pe(n.attachedData,this,e.event.posx,e.event.posy):null}},{key:"computeSync",value:function(){return[]}},{key:"computeAsync",value:function(e,t,n){var i=this;return e instanceof pe?new f.Aq((function(t){return fe(i,void 0,void 0,(0,u.Z)().mark((function i(){var r,o,a,s,l,c,d,h,f,v,p,m,b,y,_;return(0,u.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return l=e.part,i.next=3,l.item.resolve(n);case 3:if(!n.isCancellationRequested){i.next=5;break}return i.abrupt("return");case 5:return"string"===typeof l.item.hint.tooltip?c=(new re.W5).appendText(l.item.hint.tooltip):l.item.hint.tooltip&&(c=l.item.hint.tooltip),c&&t.emitOne(new se.hU(this,e.range,[c],!1,0)),(0,g.Of)(l.item.hint.textEdits)&&t.emitOne(new se.hU(this,e.range,[(new re.W5).appendText((0,ce.NC)("hint.dbl","Double-click to insert"))],!1,10001)),"string"===typeof l.part.tooltip?d=(new re.W5).appendText(l.part.tooltip):l.part.tooltip&&(d=l.part.tooltip),d&&t.emitOne(new se.hU(this,e.range,[d],!1,1)),(l.part.location||l.part.command)&&(f="altKey"===this._editor.getOption(77),v=f?de.dz?(0,ce.NC)("links.navigate.kb.meta.mac","cmd + click"):(0,ce.NC)("links.navigate.kb.meta","ctrl + click"):de.dz?(0,ce.NC)("links.navigate.kb.alt.mac","option + click"):(0,ce.NC)("links.navigate.kb.alt","alt + click"),l.part.location&&l.part.command?h=(new re.W5).appendText((0,ce.NC)("hint.defAndCommand","Go to Definition ({0}), right click for more",v)):l.part.location?h=(new re.W5).appendText((0,ce.NC)("hint.def","Go to Definition ({0})",v)):l.part.command&&(h=new re.W5("[".concat((0,ce.NC)("hint.cmd","Execute Command"),"](").concat((u=l.part.command,C.o.from({scheme:M.lg.command,path:u.id,query:u.arguments&&encodeURIComponent(JSON.stringify(u.arguments))}).toString()),' "').concat(l.part.command.title,'") (').concat(v,")"),{isTrusted:!0})),h&&t.emitOne(new se.hU(this,e.range,[h],!1,1e4))),i.next=13,this._resolveInlayHintLabelPartHover(l,n);case 13:p=i.sent,i.prev=14,m=!0,b=ve(p);case 16:return i.next=18,b.next();case 18:if(y=i.sent,r=y.done){i.next=28;break}s=y.value,m=!1,_=s,t.emitOne(_);case 25:m=!0,i.next=16;break;case 28:i.next=33;break;case 30:i.prev=30,i.t0=i.catch(14),o={error:i.t0};case 33:if(i.prev=33,i.prev=34,m||r||!(a=b.return)){i.next=38;break}return i.next=38,a.call(b);case 38:if(i.prev=38,!o){i.next=41;break}throw o.error;case 41:return i.finish(38);case 42:return i.finish(33);case 43:case"end":return i.stop()}var u}),i,this,[[14,30,33,43],[34,,38,42]])})))})):f.Aq.EMPTY}},{key:"_resolveInlayHintLabelPartHover",value:function(e,t){return fe(this,void 0,void 0,(0,u.Z)().mark((function n(){var i,r,o,a,s,l=this;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.part.location){n.next=2;break}return n.abrupt("return",f.Aq.EMPTY);case 2:return i=e.part.location,r=i.uri,o=i.range,n.next=5,this._resolverService.createModelReference(r);case 5:if(a=n.sent,n.prev=6,s=a.object.textEditorModel,this._languageFeaturesService.hoverProvider.has(s)){n.next=10;break}return n.abrupt("return",f.Aq.EMPTY);case 10:return n.abrupt("return",(0,ae.R8)(this._languageFeaturesService.hoverProvider,s,new P.L(o.startLineNumber,o.startColumn),t).filter((function(e){return!(0,re.CP)(e.hover.contents)})).map((function(t){return new se.hU(l,e.item.anchor.range,t.hover.contents,!1,2+t.ordinal)})));case 11:return n.prev=11,a.dispose(),n.finish(11);case 14:case"end":return n.stop()}}),n,this,[[6,,11,14]])})))}}]),n}(se.D5);me=he([ge(1,oe.O),ge(2,le.v4),ge(3,ue.Ui),ge(4,R.S),ge(5,T.p)],me),(0,i._K)(ee.ID,ee,1),r.Ae.register(me)},32993:function(e,t,n){n.d(t,{K:function(){return x},u:function(){return _}});var i=n(74165),r=n(93433),o=n(37762),a=n(32959),s=n(93720),u=n(7388),l=n(74812),c=n(17429),d=n(7787),h=n(14028),g=n(52042),f=n(14443),v=n(99740),p=n(8022),m=n(92361),b=n(64606),y=n(49431),C=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))};function _(e,t,n,g){var p;return C(this,void 0,void 0,(0,i.Z)().mark((function _(){var x,w,k,S,L,Z,I,N,T,R,D,P,M,O=this;return(0,i.Z)().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return x=e.get(d.S),w=e.get(m.i),k=e.get(v.H),S=e.get(b.TG),L=e.get(y.lT),_.next=7,g.item.resolve(u.T.None);case 7:if(g.part.location){_.next=9;break}return _.abrupt("return");case 9:Z=g.part.location,I=[],N=new Set(f.BH.getMenuItems(f.eH.EditorContext).map((function(e){return(0,f.vr)(e)?e.command.id:(0,l.R)()}))),T=(0,o.Z)(h.SymbolNavigationAction.all()),_.prev=13,D=(0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=R.value,N.has(n.desc.id)&&I.push(new s.aU(n.desc.id,f.U8.label(n.desc,{renderShortTitle:!0}),void 0,!0,(function(){return C(O,void 0,void 0,(0,i.Z)().mark((function e(){var r,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.createModelReference(Z.uri);case 2:return r=e.sent,e.prev=3,o=new h.SymbolNavigationAnchor(r.object.textEditorModel,c.e.getStartPosition(Z.range)),a=g.item.anchor.range,e.next=8,S.invokeFunction(n.runEditorCommand.bind(n),t,o,a);case 8:return e.prev=8,r.dispose(),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[3,,8,11]])})))})));case 2:case"end":return e.stop()}}),e)})),T.s();case 16:if((R=T.n()).done){_.next=20;break}return _.delegateYield(D(),"t0",18);case 18:_.next=16;break;case 20:_.next=25;break;case 22:_.prev=22,_.t1=_.catch(13),T.e(_.t1);case 25:return _.prev=25,T.f(),_.finish(25);case 28:g.part.command&&(P=g.part.command,I.push(new s.Z0),I.push(new s.aU(P.id,P.title,void 0,!0,(function(){return C(O,void 0,void 0,(0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.executeCommand.apply(k,[P.id].concat((0,r.Z)(null!==(t=P.arguments)&&void 0!==t?t:[])));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),L.notify({severity:y.zb.Error,source:g.item.provider.displayName,message:e.t0});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))})))),M=t.getOption(126),w.showContextMenu({domForShadowRoot:M&&null!==(p=t.getDomNode())&&void 0!==p?p:void 0,getAnchor:function(){var e=a.getDomNodePagePosition(n);return{x:e.left,y:e.top+e.height+8}},getActions:function(){return I},onHide:function(){t.focus()},autoSelectFirstItem:!0});case 31:case"end":return _.stop()}}),_,null,[[13,22,25,28]])})))}function x(e,t,n,r){return C(this,void 0,void 0,(0,i.Z)().mark((function o(){var a,s,u=this;return(0,i.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return a=e.get(d.S),o.next=3,a.createModelReference(r.uri);case 3:return s=o.sent,o.next=6,n.invokeWithinContext((function(e){return C(u,void 0,void 0,(0,i.Z)().mark((function o(){var a,u,l,d,f;return(0,i.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.hasSideBySideModifier,u=e.get(p.i6),l=g.Jy.inPeekEditor.getValue(u),d=!a&&n.getOption(87)&&!l,f=new h.DefinitionAction({openToSide:a,openInPeek:d,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}),i.abrupt("return",f.run(e,new h.SymbolNavigationAnchor(s.object.textEditorModel,c.e.getStartPosition(r.range)),c.e.lift(r.range)));case 6:case"end":return i.stop()}}),o)})))}));case 6:s.dispose();case 7:case"end":return o.stop()}}),o)})))}},51053:function(e,t,n){n.d(t,{Np:function(){return r},OW:function(){return o},Ou:function(){return i}});var i="editor.action.inlineSuggest.commit",r="editor.action.inlineSuggest.showPrevious",o="editor.action.inlineSuggest.showNext"},2736:function(e,t,n){n.d(t,{f:function(){return g}});var i=n(43144),r=n(15671),o=n(60136),a=n(27277),s=n(1370),u=n(31906),l=n(30697),c=n(8022),d=n(65096),h=n(18420),g=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,i){var o;return(0,r.Z)(this,n),(o=t.call(this)).contextKeyService=e,o.model=i,o.inlineCompletionVisible=n.inlineSuggestionVisible.bindTo(o.contextKeyService),o.inlineCompletionSuggestsIndentation=n.inlineSuggestionHasIndentation.bindTo(o.contextKeyService),o.inlineCompletionSuggestsIndentationLessThanTabSize=n.inlineSuggestionHasIndentationLessThanTabSize.bindTo(o.contextKeyService),o.suppressSuggestions=n.suppressSuggestions.bindTo(o.contextKeyService),o._register((0,s.EH)((function(e){var t=o.model.read(e),n=null===t||void 0===t?void 0:t.state.read(e),i=!!(null===n||void 0===n?void 0:n.inlineCompletion)&&void 0!==(null===n||void 0===n?void 0:n.ghostText)&&!(null===n||void 0===n?void 0:n.ghostText.isEmpty());o.inlineCompletionVisible.set(i),(null===n||void 0===n?void 0:n.ghostText)&&(null===n||void 0===n?void 0:n.inlineCompletion)&&o.suppressSuggestions.set(n.inlineCompletion.inlineCompletion.source.inlineCompletions.suppressSuggestions)}))),o._register((0,s.EH)((function(e){var t=o.model.read(e),n=!1,i=!0,r=null===t||void 0===t?void 0:t.ghostText.read(e);if((null===t||void 0===t?void 0:t.selectedSuggestItem)&&r&&r.parts.length>0){var a=r.parts[0],s=a.column,c=a.lines[0];if(s<=t.textModel.getLineIndentColumn(r.lineNumber)){var d=(0,u.LC)(c);-1===d&&(d=c.length-1),n=d>0;var h=t.textModel.getOptions().tabSize;i=l.i.visibleColumnFromColumn(c,d+1,h)<h}}o.inlineCompletionSuggestsIndentation.set(n),o.inlineCompletionSuggestsIndentationLessThanTabSize.set(i)}))),o}return(0,i.Z)(n)}(d.JT);g.inlineSuggestionVisible=new c.uy("inlineSuggestionVisible",!1,(0,h.NC)("inlineSuggestionVisible","Whether an inline suggestion is visible")),g.inlineSuggestionHasIndentation=new c.uy("inlineSuggestionHasIndentation",!1,(0,h.NC)("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace")),g.inlineSuggestionHasIndentationLessThanTabSize=new c.uy("inlineSuggestionHasIndentationLessThanTabSize",!0,(0,h.NC)("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab")),g.suppressSuggestions=new c.uy("inlineSuggestionSuppressSuggestions",void 0,(0,h.NC)("suppressSuggestions","Whether suggestions should be suppressed for the current suggestion"))},60347:function(e,t,n){n.r(t);var i=n(95253),r=n(24250),o=n(74165),a=n(15671),s=n(43144),u=n(60136),l=n(27277),c=n(1370),d=n(98926),h=n(51053),g=n(2736),f=n(97326),v=n(46403),p=n(13880),m=n(65096),b=n(53651),y=n(65631),C=n(68200),_=n(65441),x=n(11752),w=n(61120),k=n(37762),S=n(81200),L=n(31906),Z=n(88616),I=n(17683),N=n(17429),T=n(53603),R=n(58188),D=n(20329),P=n(51373),M=n(63465),O=n(56606),A=n(74146);var E=function(){function e(t){(0,a.Z)(this,e),this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(var n=0;n<t.length;n++)"\n"===t.charAt(n)&&this.lineStartOffsetByLineIdx.push(n+1)}return(0,s.Z)(e,[{key:"getOffset",value:function(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}]),e}(),V=[];var H=function(){function e(t,n){if((0,a.Z)(this,e),this.startColumn=t,this.endColumnExclusive=n,t>n)throw new A.he("startColumn ".concat(t," cannot be after endColumnExclusive ").concat(n))}return(0,s.Z)(e,[{key:"toRange",value:function(e){return new N.e(e,this.startColumn,e,this.endColumnExclusive)}},{key:"equals",value:function(e){return this.startColumn===e.startColumn&&this.endColumnExclusive===e.endColumnExclusive}}]),e}();function U(e,t){return new y.L(e.lineNumber+t.lineNumber-1,1===t.lineNumber?e.column+t.column-1:t.column)}function W(e){var t,n=1,i=1,r=(0,k.Z)(e);try{for(r.s();!(t=r.n()).done;){"\n"===t.value?(n++,i=1):i++}}catch(o){r.e(o)}finally{r.f()}return new y.L(n,i)}var F=function(){function e(t,n){(0,a.Z)(this,e),this.lineNumber=t,this.parts=n}return(0,s.Z)(e,[{key:"equals",value:function(e){return this.lineNumber===e.lineNumber&&this.parts.length===e.parts.length&&this.parts.every((function(t,n){return t.equals(e.parts[n])}))}},{key:"renderForScreenReader",value:function(e){if(0===this.parts.length)return"";var t=this.parts[this.parts.length-1];return function(e,t){var n=new E(e),i=t.map((function(e){var t=N.e.lift(e.range);return{startOffset:n.getOffset(t.getStartPosition()),endOffset:n.getOffset(t.getEndPosition()),text:e.text}}));i.sort((function(e,t){return t.startOffset-e.startOffset}));var r,o=(0,k.Z)(i);try{for(o.s();!(r=o.n()).done;){var a=r.value;e=e.substring(0,a.startOffset)+a.text+e.substring(a.endOffset)}}catch(s){o.e(s)}finally{o.f()}return e}(e.substr(0,t.column-1),this.parts.map((function(e){return{range:{startLineNumber:1,endLineNumber:1,startColumn:e.column,endColumn:e.column},text:e.lines.join("\n")}}))).substring(this.parts[0].column-1)}},{key:"isEmpty",value:function(){return this.parts.every((function(e){return 0===e.lines.length}))}},{key:"lineCount",get:function(){return 1+this.parts.reduce((function(e,t){return e+t.lines.length-1}),0)}}]),e}(),K=function(){function e(t,n,i){(0,a.Z)(this,e),this.column=t,this.lines=n,this.preview=i}return(0,s.Z)(e,[{key:"equals",value:function(e){return this.column===e.column&&this.lines.length===e.lines.length&&this.lines.every((function(t,n){return t===e.lines[n]}))}}]),e}(),B=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,a.Z)(this,e),this.lineNumber=t,this.columnRange=n,this.newLines=i,this.additionalReservedLineCount=r,this.parts=[new K(this.columnRange.endColumnExclusive,this.newLines,!1)]}return(0,s.Z)(e,[{key:"renderForScreenReader",value:function(e){return this.newLines.join("\n")}},{key:"lineCount",get:function(){return this.newLines.length}},{key:"isEmpty",value:function(){return this.parts.every((function(e){return 0===e.lines.length}))}},{key:"equals",value:function(e){return this.lineNumber===e.lineNumber&&this.columnRange.equals(e.columnRange)&&this.newLines.length===e.newLines.length&&this.newLines.every((function(t,n){return t===e.newLines[n]}))&&this.additionalReservedLineCount===e.additionalReservedLineCount}}]),e}();function q(e,t){return e===t||!(!e||!t)&&((e instanceof F&&t instanceof F||e instanceof B&&t instanceof B)&&e.equals(t))}var j=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Y=function(e,t){return function(n,i){t(n,i,e)}},z="ghost-text",Q=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e,i,r){var o;return(0,a.Z)(this,n),(o=t.call(this)).editor=e,o.model=i,o.languageService=r,o.isDisposed=(0,c.uh)((0,f.Z)(o),!1),o.currentTextModel=(0,c.rD)(o.editor.onDidChangeModel,(function(){return o.editor.getModel()})),o.uiState=(0,c.nK)((0,f.Z)(o),(function(e){if(!o.isDisposed.read(e)){var t=o.currentTextModel.read(e);if(t===o.model.targetTextModel.read(e)){var n=o.model.ghostText.read(e);if(n){var i,r=n instanceof B?n.columnRange:void 0,a=[],s=[],u=t.getLineContent(n.lineNumber),l=void 0,c=0,d=(0,k.Z)(n.parts);try{for(d.s();!(i=d.n()).done;){var h=i.value,g=h.lines;void 0===l?(a.push({column:h.column,text:g[0],preview:h.preview}),g=g.slice(1)):v([u.substring(c,h.column-1)],void 0),g.length>0&&(v(g,z),void 0===l&&h.column<=u.length&&(l=h.column)),c=h.column-1}}catch(p){d.e(p)}finally{d.f()}void 0!==l&&v([u.substring(c)],void 0);var f=void 0!==l?new H(l,u.length+1):void 0;return{replacedRange:r,inlineTexts:a,additionalLines:s,hiddenRange:f,lineNumber:n.lineNumber,additionalReservedLineCount:o.model.minReservedLineCount.read(e),targetTextModel:t}}}}function v(e,t){if(s.length>0){var n=s[s.length-1];t&&n.decorations.push(new M.Kp(n.content.length+1,n.content.length+1+e[0].length,t,0)),n.content+=e[0],e=e.slice(1)}var i,r=(0,k.Z)(e);try{for(r.s();!(i=r.n()).done;){var o=i.value;s.push({content:o,decorations:t?[new M.Kp(1,o.length+1,t,0)]:[]})}}catch(p){r.e(p)}finally{r.f()}}})),o.decorations=(0,c.nK)((0,f.Z)(o),(function(e){var t=o.uiState.read(e);if(!t)return[];var n=[];t.replacedRange&&n.push({range:t.replacedRange.toRange(t.lineNumber),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}),t.hiddenRange&&n.push({range:t.hiddenRange.toRange(t.lineNumber),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});var i,r=(0,k.Z)(t.inlineTexts);try{for(r.s();!(i=r.n()).done;){var a=i.value;n.push({range:N.e.fromPositions(new y.L(t.lineNumber,a.column)),options:{description:z,after:{content:a.text,inlineClassName:a.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:D.RM.Left},showIfCollapsed:!0}})}}catch(s){r.e(s)}finally{r.f()}return n})),o.additionalLinesWidget=o._register(new G(o.editor,o.languageService.languageIdCodec,(0,c.nK)((function(e){var t=o.uiState.read(e);return t?{lineNumber:t.lineNumber,additionalLines:t.additionalLines,minReservedLineCount:t.additionalReservedLineCount,targetTextModel:t.targetTextModel}:void 0})))),o._register((0,m.OF)((function(){o.isDisposed.set(!0,void 0)}))),o._register(function(e,t){var n=new m.SL,i=e.createDecorationsCollection();return n.add((0,c.UV)({debugName:function(){return"Apply decorations from ".concat(t.debugName)}},(function(e){var n=t.read(e);i.set(n)}))),n.add({dispose:function(){i.clear()}}),n}(o.editor,o.decorations)),o}return(0,s.Z)(n,[{key:"ownsViewZone",value:function(e){return this.additionalLinesWidget.viewZoneId===e}}]),n}(m.JT);Q=j([Y(2,R.O)],Q);var G=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e,i,r){var o;return(0,a.Z)(this,n),(o=t.call(this)).editor=e,o.languageIdCodec=i,o.lines=r,o._viewZoneId=void 0,o.editorOptionsChanged=(0,c.aq)("editorOptionChanged",p.ju.filter(o.editor.onDidChangeConfiguration,(function(e){return e.hasChanged(33)||e.hasChanged(116)||e.hasChanged(98)||e.hasChanged(93)||e.hasChanged(51)||e.hasChanged(50)||e.hasChanged(66)}))),o._register((0,c.EH)((function(e){var t=o.lines.read(e);o.editorOptionsChanged.read(e),t?o.updateLines(t.lineNumber,t.additionalLines,t.minReservedLineCount):o.clear()}))),o}return(0,s.Z)(n,[{key:"viewZoneId",get:function(){return this._viewZoneId}},{key:"dispose",value:function(){(0,x.Z)((0,w.Z)(n.prototype),"dispose",this).call(this),this.clear()}},{key:"clear",value:function(){var e=this;this.editor.changeViewZones((function(t){e._viewZoneId&&(t.removeZone(e._viewZoneId),e._viewZoneId=void 0)}))}},{key:"updateLines",value:function(e,t,n){var i=this,r=this.editor.getModel();if(r){var o=r.getOptions().tabSize;this.editor.changeViewZones((function(r){i._viewZoneId&&(r.removeZone(i._viewZoneId),i._viewZoneId=void 0);var a=Math.max(t.length,n);if(a>0){var s=document.createElement("div");!function(e,t,n,i,r){var o=i.get(33),a=i.get(116),s="none",u=i.get(93),l=i.get(51),c=i.get(50),d=i.get(66),h=new T.HT(1e4);h.appendString('<div class="suggest-preview-text">');for(var g=0,f=n.length;g<f;g++){var v=n[g],p=v.content;h.appendString('<div class="view-line'),h.appendString('" style="top:'),h.appendString(String(g*d)),h.appendString('px;width:1000000px;">');var m=L.$i(p),b=L.Ut(p),y=P.A.createEmpty(p,r);(0,O.d1)(new O.IJ(c.isMonospace&&!o,c.canUseHalfwidthRightwardsArrow,p,!1,m,b,0,y,v.decorations,t,0,c.spaceWidth,c.middotWidth,c.wsmiddotWidth,a,s,u,l!==I.n0.OFF,null),h),h.appendString("</div>")}h.appendString("</div>"),(0,Z.N)(e,c);var C=h.build(),_=J?J.createHTML(C):C;e.innerHTML=_}(s,o,t,i.editor.getOptions(),i.languageIdCodec),i._viewZoneId=r.addZone({afterLineNumber:e,heightInLines:a,domNode:s,afterColumnAffinity:1})}}))}}}]),n}(m.JT);var J=(0,S.Z)("editorGhostText",{createHTML:function(e){return e}}),$=n(26755),X=n(93433),ee=n(85928),te=n(63021),ne=n(62557),ie=n(70133),re=n(19536),oe=n(7388),ae=n(21973),se=n(17397),ue=n(71049),le=n(29413),ce=n(45746),de=n(88324),he=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))};function ge(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:oe.T.None,a=arguments.length>5?arguments[5]:void 0;return he(this,void 0,void 0,(0,o.Z)().mark((function s(){var u,l,c,d,h,g,f,v,p,m,b,y,C,_,x,w,S,L,Z,I,N,T,R,D=this;return(0,o.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:b=function(e){var a=this,s=v.get(e);if(s)return s;var u=m(e,[]);u&&(0,A.Cp)(new Error("Inline completions: cyclic yield-to dependency detected. Path: ".concat(u.map((function(e){return e.toString?e.toString():""+e})).join(" -> "))));var l=new ue.CR;return v.set(e,l.p),he(a,void 0,void 0,(0,o.Z)().mark((function a(){var s,l,c,d,h,g;return(0,o.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(u){o.next=22;break}s=f(e),l=(0,k.Z)(s),o.prev=3,l.s();case 5:if((c=l.n()).done){o.next=14;break}return d=c.value,o.next=9,b(d);case 9:if(!((h=o.sent)&&h.items.length>0)){o.next=12;break}return o.abrupt("return",void 0);case 12:o.next=5;break;case 14:o.next=19;break;case 16:o.prev=16,o.t0=o.catch(3),l.e(o.t0);case 19:return o.prev=19,l.f(),o.finish(19);case 22:return o.prev=22,o.next=25,e.provideInlineCompletions(n,t,i,r);case 25:return g=o.sent,o.abrupt("return",g);case 29:return o.prev=29,o.t1=o.catch(22),(0,A.Cp)(o.t1),o.abrupt("return",void 0);case 33:case"end":return o.stop()}}),a,null,[[3,16,19,22],[22,29]])}))).then((function(e){return l.complete(e)}),(function(e){return l.error(e)})),l.p},m=function(e,t){if(t=[].concat((0,X.Z)(t),[e]),p.has(e))return t;p.add(e);try{var n,i=f(e),r=(0,k.Z)(i);try{for(r.s();!(n=r.n()).done;){var o=n.value,a=m(o,t);if(a)return a}}catch(s){r.e(s)}finally{r.f()}}finally{p.delete(e)}},f=function(e){if(!e.yieldsToGroupIds)return[];var t,n=[],i=(0,k.Z)(e.yieldsToGroupIds||[]);try{for(i.s();!(t=i.n()).done;){var r,o=t.value,a=c.get(o),s=(0,k.Z)(a);try{for(s.s();!(r=s.n()).done;){var u=r.value;n.push(u)}}catch(l){s.e(l)}finally{s.f()}}}catch(l){i.e(l)}finally{i.f()}return n},u=me(t,n),l=e.all(n),c=new le.ri,d=(0,k.Z)(l);try{for(d.s();!(h=d.n()).done;)(g=h.value).groupId&&c.add(g.groupId,g)}catch(P){d.e(P)}finally{d.f()}return v=new Map,p=new Set,s.next=12,Promise.all(l.map((function(e){return he(D,void 0,void 0,(0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,b(e);case 3:return t.t1=t.sent,t.abrupt("return",{provider:t.t0,completions:t.t1});case 5:case"end":return t.stop()}}),t)})))})));case 12:y=s.sent,C=new Map,_=[],x=(0,k.Z)(y),s.prev=16,x.s();case 18:if((w=x.n()).done){s.next=29;break}if(S=w.value,L=S.completions){s.next=23;break}return s.abrupt("continue",27);case 23:Z=new ve(L,S.provider),_.push(Z),I=(0,k.Z)(L.items);try{for(I.s();!(N=I.n()).done;)T=N.value,R=pe.from(T,Z,u,n,a),C.set(R.hash(),R)}catch(P){I.e(P)}finally{I.f()}case 27:s.next=18;break;case 29:s.next=34;break;case 31:s.prev=31,s.t0=s.catch(16),x.e(s.t0);case 34:return s.prev=34,x.f(),s.finish(34);case 37:return s.abrupt("return",new fe(Array.from(C.values()),new Set(C.keys()),_));case 38:case"end":return s.stop()}}),s,null,[[16,31,34,37]])})))}var fe=function(){function e(t,n,i){(0,a.Z)(this,e),this.completions=t,this.hashs=n,this.providerResults=i}return(0,s.Z)(e,[{key:"has",value:function(e){return this.hashs.has(e.hash())}},{key:"dispose",value:function(){var e,t=(0,k.Z)(this.providerResults);try{for(t.s();!(e=t.n()).done;){e.value.removeRef()}}catch(n){t.e(n)}finally{t.f()}}}]),e}(),ve=function(){function e(t,n){(0,a.Z)(this,e),this.inlineCompletions=t,this.provider=n,this.refCount=1}return(0,s.Z)(e,[{key:"addRef",value:function(){this.refCount++}},{key:"removeRef",value:function(){this.refCount--,0===this.refCount&&this.provider.freeInlineCompletions(this.inlineCompletions)}}]),e}(),pe=function(){function e(t,n,i,r,o,s,u,l){(0,a.Z)(this,e),this.filterText=t,this.command=n,this.range=i,this.insertText=r,this.snippetInfo=o,this.additionalTextEdits=s,this.sourceInlineCompletion=u,this.source=l,r=(t=t.replace(/\r\n|\r/g,"\n")).replace(/\r\n|\r/g,"\n")}return(0,s.Z)(e,[{key:"withRange",value:function(t){return new e(this.filterText,this.command,t,this.insertText,this.snippetInfo,this.additionalTextEdits,this.sourceInlineCompletion,this.source)}},{key:"hash",value:function(){return JSON.stringify({insertText:this.insertText,range:this.range.toString()})}}],[{key:"from",value:function(t,n,i,r,o){var a,s,u=t.range?N.e.lift(t.range):i;if("string"===typeof t.insertText){if(a=t.insertText,o&&t.completeBracketPairs){var l=(a=be(a,u.getStartPosition(),r,o)).length-t.insertText.length;0!==l&&(u=new N.e(u.startLineNumber,u.startColumn,u.endLineNumber,u.endColumn+l))}s=void 0}else if("snippet"in t.insertText){var c=t.insertText.snippet.length;if(o&&t.completeBracketPairs){t.insertText.snippet=be(t.insertText.snippet,u.getStartPosition(),r,o);var d=t.insertText.snippet.length-c;0!==d&&(u=new N.e(u.startLineNumber,u.startColumn,u.endLineNumber,u.endColumn+d))}var h=(new de.Yj).parse(t.insertText.snippet);1===h.children.length&&h.children[0]instanceof de.xv?(a=h.children[0].value,s=void 0):(a=h.toString(),s={snippet:t.insertText.snippet,range:u})}else(0,se.vE)(t.insertText);return new e(a,t.command,u,a,s,t.additionalTextEdits||V,t,n)}}]),e}();function me(e,t){var n=t.getWordAtPosition(e),i=t.getLineMaxColumn(e.lineNumber);return n?new N.e(e.lineNumber,n.startColumn,e.lineNumber,i):N.e.fromPositions(e,e.with(void 0,i))}function be(e,t,n,i){var r=n.getLineContent(t.lineNumber).substring(0,t.column-1)+e,o=n.tokenization.tokenizeLineWithEdit(t,r.length-(t.column-1),e),a=null===o||void 0===o?void 0:o.sliceAndInflate(t.column-1,r.length,0);return a?(0,ce.r)(a,i):e}var ye=n(94365),Ce=function(){function e(t,n){(0,a.Z)(this,e),this.range=t,this.text=n}return(0,s.Z)(e,[{key:"removeCommonPrefix",value:function(t,n){var i=n?this.range.intersectRanges(n):this.range;if(!i)return this;var r=t.getValueInRange(i,1),o=(0,L.Mh)(r,this.text),a=U(this.range.getStartPosition(),W(r.substring(0,o))),s=this.text.substring(o);return new e(N.e.fromPositions(a,this.range.getEndPosition()),s)}},{key:"augments",value:function(e){return this.text.startsWith(e.text)&&(t=this.range,(n=e.range).getStartPosition().equals(t.getStartPosition())&&n.getEndPosition().isBeforeOrEqual(t.getEndPosition()));var t,n}},{key:"computeGhostText",value:function(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=this.removeCommonPrefix(t);if(o.range.endLineNumber===o.range.startLineNumber){var a=t.getLineContent(o.range.startLineNumber),s=(0,L.V8)(a).length;if(o.range.startColumn-1<=s){var u=(0,L.V8)(o.text).length,l=a.substring(o.range.startColumn-1,s),c=[o.range.getStartPosition(),o.range.getEndPosition()],d=c[0],h=c[1],g=d.column+l.length<=h.column?d.delta(0,l.length):h,f=N.e.fromPositions(g,h),v=o.text.startsWith(l)?o.text.substring(l.length):o.text.substring(u);o=new e(f,v)}var p=t.getValueInRange(o.range),m=function(e,t){if((null===_e||void 0===_e?void 0:_e.originalValue)===e&&(null===_e||void 0===_e?void 0:_e.newValue)===t)return null===_e||void 0===_e?void 0:_e.changes;var n=we(e,t,!0);if(n){var i=xe(n);if(i>0){var r=we(e,t,!1);r&&xe(r)<i&&(n=r)}}return _e={originalValue:e,newValue:t,changes:n},n}(p,o.text);if(m){var b=o.range.startLineNumber,y=new Array;if("prefix"===n){var C=m.filter((function(e){return 0===e.originalLength}));if(C.length>1||1===C.length&&C[0].originalStart!==p.length)return}var _,x=o.text.length-r,w=(0,k.Z)(m);try{for(w.s();!(_=w.n()).done;){var S=_.value,Z=o.range.startColumn+S.originalStart+S.originalLength;if("subwordSmart"===n&&i&&i.lineNumber===o.range.startLineNumber&&Z<i.column)return;if(S.originalLength>0)return;if(0!==S.modifiedLength){var I=S.modifiedStart+S.modifiedLength,T=Math.max(S.modifiedStart,Math.min(I,x)),R=o.text.substring(S.modifiedStart,T),D=o.text.substring(T,Math.max(S.modifiedStart,I));if(R.length>0){var P=(0,L.uq)(R);y.push(new K(Z,P,!1))}if(D.length>0){var M=(0,L.uq)(D);y.push(new K(Z,M,!0))}}}}catch(O){w.e(O)}finally{w.f()}return new F(b,y)}}}}]),e}();var _e=void 0;function xe(e){var t,n=0,i=(0,k.Z)(e);try{for(i.s();!(t=i.n()).done;){n+=t.value.originalLength}}catch(r){i.e(r)}finally{i.f()}return n}function we(e,t,n){if(!(e.length>5e3||t.length>5e3)){var i=Math.max(a(e),a(t)),r=u(e),o=u(t);return new ye.Hs({getElements:function(){return r}},{getElements:function(){return o}}).ComputeDiff(!1).changes}function a(e){for(var t=0,n=0,i=e.length;n<i;n++){var r=e.charCodeAt(n);r>t&&(t=r)}return t}function s(e){if(e<0)throw new Error("unexpected");return i+e+1}function u(e){for(var t=0,i=0,r=new Int32Array(e.length),o=0,a=e.length;o<a;o++)if(n&&"("===e[o]){var u=100*i+t;r[o]=s(2*u),t++}else if(n&&")"===e[o]){var l=100*i+(t=Math.max(t-1,0));r[o]=s(2*l+1),0===t&&i++}else r[o]=e.charCodeAt(o);return r}}var ke=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Se=function(e,t){return function(n,i){t(n,i,e)}},Le=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},Ze=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e,i,r,o,s){var u;return(0,a.Z)(this,n),(u=t.call(this)).textModel=e,u.versionId=i,u._debounceValue=r,u.languageFeaturesService=o,u.languageConfigurationService=s,u._updateOperation=u._register(new m.XK),u.inlineCompletions=(0,c.DN)("inlineCompletions",void 0),u.suggestWidgetInlineCompletions=(0,c.DN)("suggestWidgetInlineCompletions",void 0),u._register(u.textModel.onDidChangeContent((function(){u._updateOperation.clear()}))),u}return(0,s.Z)(n,[{key:"fetch",value:function(e,t,n){var i,r,a=this,s=new Ne(e,t,this.textModel.getVersionId()),u=t.selectedSuggestionInfo?this.suggestWidgetInlineCompletions:this.inlineCompletions;if(null===(i=this._updateOperation.value)||void 0===i?void 0:i.request.satisfies(s))return this._updateOperation.value.promise;if(null===(r=u.get())||void 0===r?void 0:r.request.satisfies(s))return Promise.resolve(!0);var l=!!this._updateOperation.value;this._updateOperation.clear();var d=new oe.A,h=Le(a,void 0,void 0,(0,o.Z)().mark((function i(){var r,a,h,g,f;return(0,o.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!l&&t.triggerKind!==ie.bw.Automatic){i.next=4;break}return i.next=4,Ie(this._debounceValue.get(this.textModel));case 4:if(!d.token.isCancellationRequested&&this.textModel.getVersionId()===s.versionId){i.next=6;break}return i.abrupt("return",!1);case 6:return r=new Date,i.next=9,ge(this.languageFeaturesService.inlineCompletionsProvider,e,this.textModel,t,d.token,this.languageConfigurationService);case 9:if(a=i.sent,!d.token.isCancellationRequested&&this.textModel.getVersionId()===s.versionId){i.next=12;break}return i.abrupt("return",!1);case 12:return h=new Date,this._debounceValue.update(this.textModel,h.getTime()-r.getTime()),g=new Re(a,s,this.textModel,this.versionId),n&&(f=n.toInlineCompletion(void 0),n.canBeReused(this.textModel,e)&&!a.has(f)&&g.prepend(n.inlineCompletion,f.range,!0)),this._updateOperation.clear(),(0,c.PS)((function(e){u.set(g,e)})),i.abrupt("return",!0);case 19:case"end":return i.stop()}}),i,this)}))),g=new Te(s,d,h);return this._updateOperation.value=g,h}},{key:"clear",value:function(e){this._updateOperation.clear(),this.inlineCompletions.set(void 0,e),this.suggestWidgetInlineCompletions.set(void 0,e)}},{key:"clearSuggestWidgetInlineCompletions",value:function(e){var t;(null===(t=this._updateOperation.value)||void 0===t?void 0:t.request.context.selectedSuggestionInfo)&&this._updateOperation.clear(),this.suggestWidgetInlineCompletions.set(void 0,e)}},{key:"cancelUpdate",value:function(){this._updateOperation.clear()}}]),n}(m.JT);function Ie(e,t){return new Promise((function(n){var i=void 0,r=setTimeout((function(){i&&i.dispose(),n()}),e);t&&(i=t.onCancellationRequested((function(){clearTimeout(r),i&&i.dispose(),n()})))}))}Ze=ke([Se(3,_.p),Se(4,re.c_)],Ze);var Ne=function(){function e(t,n,i){(0,a.Z)(this,e),this.position=t,this.context=n,this.versionId=i}return(0,s.Z)(e,[{key:"satisfies",value:function(e){return this.position.equals(e.position)&&function(e,t,n){if(!e||!t)return e===t;return n(e,t)}(this.context.selectedSuggestionInfo,e.context.selectedSuggestionInfo,(function(e,t){return e.equals(t)}))&&(e.context.triggerKind===ie.bw.Automatic||this.context.triggerKind===ie.bw.Explicit)&&this.versionId===e.versionId}}]),e}();var Te=function(){function e(t,n,i){(0,a.Z)(this,e),this.request=t,this.cancellationTokenSource=n,this.promise=i}return(0,s.Z)(e,[{key:"dispose",value:function(){this.cancellationTokenSource.cancel()}}]),e}(),Re=function(){function e(t,n,i,r){var o=this;(0,a.Z)(this,e),this.inlineCompletionProviderResult=t,this.request=n,this.textModel=i,this.versionId=r,this._refCount=1,this._prependedInlineCompletionItems=[],this._rangeVersionIdValue=0,this._rangeVersionId=(0,c.nK)(this,(function(e){o.versionId.read(e);var t,n=!1,i=(0,k.Z)(o._inlineCompletions);try{for(i.s();!(t=i.n()).done;){var r=t.value;n=n||r._updateRange(o.textModel)}}catch(a){i.e(a)}finally{i.f()}return n&&o._rangeVersionIdValue++,o._rangeVersionIdValue}));var s=i.deltaDecorations([],t.completions.map((function(e){return{range:e.range,options:{description:"inline-completion-tracking-range"}}})));this._inlineCompletions=t.completions.map((function(e,t){return new De(e,s[t],o._rangeVersionId)}))}return(0,s.Z)(e,[{key:"inlineCompletions",get:function(){return this._inlineCompletions}},{key:"clone",value:function(){return this._refCount++,this}},{key:"dispose",value:function(){var e=this;if(this._refCount--,0===this._refCount){setTimeout((function(){e.textModel.isDisposed()||e.textModel.deltaDecorations(e._inlineCompletions.map((function(e){return e.decorationId})),[])}),0),this.inlineCompletionProviderResult.dispose();var t,n=(0,k.Z)(this._prependedInlineCompletionItems);try{for(n.s();!(t=n.n()).done;){t.value.source.removeRef()}}catch(i){n.e(i)}finally{n.f()}}}},{key:"prepend",value:function(e,t,n){n&&e.source.addRef();var i=this.textModel.deltaDecorations([],[{range:t,options:{description:"inline-completion-tracking-range"}}])[0];this._inlineCompletions.unshift(new De(e,i,this._rangeVersionId,t)),this._prependedInlineCompletionItems.push(e)}}]),e}(),De=function(){function e(t,n,i,r){(0,a.Z)(this,e),this.inlineCompletion=t,this.decorationId=n,this.rangeVersion=i,this.semanticId=JSON.stringify([this.inlineCompletion.filterText,this.inlineCompletion.insertText,this.inlineCompletion.range.getStartPosition().toString()]),this._isValid=!0,this._updatedRange=null!==r&&void 0!==r?r:t.range}return(0,s.Z)(e,[{key:"forwardStable",get:function(){var e;return null!==(e=this.inlineCompletion.source.inlineCompletions.enableForwardStability)&&void 0!==e&&e}},{key:"toInlineCompletion",value:function(e){return this.inlineCompletion.withRange(this._getUpdatedRange(e))}},{key:"toSingleTextEdit",value:function(e){return new Ce(this._getUpdatedRange(e),this.inlineCompletion.insertText)}},{key:"isVisible",value:function(e,t,n){var i=this._toFilterTextReplacement(n).removeCommonPrefix(e);if(!this._isValid||!this.inlineCompletion.range.getStartPosition().equals(this._getUpdatedRange(n).getStartPosition())||t.lineNumber!==i.range.startLineNumber)return!1;var r=e.getValueInRange(i.range,1).toLowerCase(),o=i.text.toLowerCase(),a=Math.max(0,t.column-i.range.startColumn),s=o.substring(0,a),u=o.substring(a),l=r.substring(0,a),c=r.substring(a),d=e.getLineIndentColumn(i.range.startLineNumber);return i.range.startColumn<=d&&(0===(l=l.trimStart()).length&&(c=c.trimStart()),0===(s=s.trimStart()).length&&(u=u.trimStart())),s.startsWith(l)&&!!(0,ae.Sy)(c,u)}},{key:"canBeReused",value:function(e,t){return this._isValid&&this._getUpdatedRange(void 0).containsPosition(t)&&this.isVisible(e,t,void 0)&&!this._isSmallerThanOriginal(void 0)}},{key:"_toFilterTextReplacement",value:function(e){return new Ce(this._getUpdatedRange(e),this.inlineCompletion.filterText)}},{key:"_isSmallerThanOriginal",value:function(e){return Pe(this._getUpdatedRange(e)).isBefore(Pe(this.inlineCompletion.range))}},{key:"_getUpdatedRange",value:function(e){return this.rangeVersion.read(e),this._updatedRange}},{key:"_updateRange",value:function(e){var t=e.getDecorationRange(this.decorationId);return t?!this._updatedRange.equalsRange(t)&&(this._updatedRange=t,!0):(this._isValid=!1,!0)}}]),e}();function Pe(e){return e.startLineNumber===e.endLineNumber?new y.L(1,1+e.endColumn-e.startColumn):new y.L(1+e.endLineNumber-e.startLineNumber,e.endColumn)}var Me,Oe=n(55261),Ae=n(99740),Ee=n(64606),Ve=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},He=function(e,t){return function(n,i){t(n,i,e)}},Ue=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))};!function(e){e[e.Undo=0]="Undo",e[e.Redo=1]="Redo",e[e.AcceptWord=2]="AcceptWord",e[e.Other=3]="Other"}(Me||(Me={}));var We=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e,i,r,o,s,u,l,d,h,g,v,p){var m;(0,a.Z)(this,n),(m=t.call(this)).textModel=e,m.selectedSuggestItem=i,m.cursorPosition=r,m.textModelVersionId=o,m._debounceValue=s,m._suggestPreviewEnabled=u,m._suggestPreviewMode=l,m._inlineSuggestMode=d,m._enabled=h,m._instantiationService=g,m._commandService=v,m._languageConfigurationService=p,m._source=m._register(m._instantiationService.createInstance(Ze,m.textModel,m.textModelVersionId,m._debounceValue)),m._isActive=(0,c.uh)((0,f.Z)(m),!1),m._forceUpdate=(0,c.GN)("forceUpdate"),m._selectedInlineCompletionId=(0,c.uh)((0,f.Z)(m),void 0),m._isAcceptingPartially=!1,m._preserveCurrentCompletionReasons=new Set([Me.Redo,Me.Undo,Me.AcceptWord]),m._fetchInlineCompletions=(0,c.aK)({owner:(0,f.Z)(m),createEmptyChangeSummary:function(){return{preserveCurrentCompletion:!1,inlineCompletionTriggerKind:ie.bw.Automatic}},handleChange:function(e,t){return e.didChange(m.textModelVersionId)&&m._preserveCurrentCompletionReasons.has(e.change)?t.preserveCurrentCompletion=!0:e.didChange(m._forceUpdate)&&(t.inlineCompletionTriggerKind=e.change),!0}},(function(e,t){if(m._forceUpdate.read(e),m._enabled.read(e)&&m.selectedSuggestItem.read(e)||m._isActive.read(e)){m.textModelVersionId.read(e);var n=m.selectedInlineCompletion.get(),i=t.preserveCurrentCompletion||(null===n||void 0===n?void 0:n.forwardStable)?n:void 0,r=m._source.suggestWidgetInlineCompletions.get(),o=m.selectedSuggestItem.read(e);if(r&&!o){var a=m._source.inlineCompletions.get();(0,c.PS)((function(e){a&&r.request.versionId>a.request.versionId&&m._source.inlineCompletions.set(r.clone(),e),m._source.clearSuggestWidgetInlineCompletions(e)}))}var s=m.cursorPosition.read(e),u={triggerKind:t.inlineCompletionTriggerKind,selectedSuggestionInfo:null===o||void 0===o?void 0:o.toSelectedSuggestionInfo()};return m._source.fetch(s,u,i)}m._source.cancelUpdate()})),m._filteredInlineCompletionItems=(0,c.nK)((0,f.Z)(m),(function(e){var t=m._source.inlineCompletions.read(e);if(!t)return[];var n=m.cursorPosition.read(e),i=t.inlineCompletions.filter((function(t){return t.isVisible(m.textModel,n,e)}));return i})),m.selectedInlineCompletionIndex=(0,c.nK)((0,f.Z)(m),(function(e){var t=m._selectedInlineCompletionId.read(e),n=m._filteredInlineCompletionItems.read(e),i=void 0===m._selectedInlineCompletionId?-1:n.findIndex((function(e){return e.semanticId===t}));return-1===i?(m._selectedInlineCompletionId.set(void 0,void 0),0):i})),m.selectedInlineCompletion=(0,c.nK)((0,f.Z)(m),(function(e){return m._filteredInlineCompletionItems.read(e)[m.selectedInlineCompletionIndex.read(e)]})),m.lastTriggerKind=m._source.inlineCompletions.map((function(e){return null===e||void 0===e?void 0:e.request.context.triggerKind})),m.inlineCompletionsCount=(0,c.nK)((0,f.Z)(m),(function(e){return m.lastTriggerKind.read(e)===ie.bw.Explicit?m._filteredInlineCompletionItems.read(e).length:void 0})),m.state=(0,c.bk)({owner:(0,f.Z)(m),equalityComparer:function(e,t){return e&&t?q(e.ghostText,t.ghostText)&&e.inlineCompletion===t.inlineCompletion&&e.suggestItem===t.suggestItem:e===t}},(function(e){var t,n=m.textModel,i=m.selectedSuggestItem.read(e);if(i){var r=i.toSingleTextEdit().removeCommonPrefix(n),o=m._computeAugmentedCompletion(r,e);if(!m._suggestPreviewEnabled.read(e)&&!o)return;var a=null!==(t=null===o||void 0===o?void 0:o.edit)&&void 0!==t?t:r,s=o?o.edit.text.length-r.text.length:0,u=m._suggestPreviewMode.read(e),l=m.cursorPosition.read(e),c=a.computeGhostText(n,u,l,s);return{ghostText:null!==c&&void 0!==c?c:new F(a.range.endLineNumber,[]),inlineCompletion:null===o||void 0===o?void 0:o.completion,suggestItem:i}}if(m._isActive.read(e)){var d=m.selectedInlineCompletion.read(e);if(d){var h=d.toSingleTextEdit(e),g=m._inlineSuggestMode.read(e),f=m.cursorPosition.read(e),v=h.computeGhostText(n,g,f);return v?{ghostText:v,inlineCompletion:d,suggestItem:void 0}:void 0}}})),m.ghostText=(0,c.bk)({owner:(0,f.Z)(m),equalityComparer:q},(function(e){var t=m.state.read(e);if(t)return t.ghostText})),m._register((0,c.jx)(m._fetchInlineCompletions));var b=void 0;return m._register((0,c.EH)((function(e){var t,n,i=m.state.read(e),r=null===i||void 0===i?void 0:i.inlineCompletion;if((null===r||void 0===r?void 0:r.semanticId)!==(null===b||void 0===b?void 0:b.semanticId)&&(b=r,r)){var o=r.inlineCompletion,a=o.source;null===(n=(t=a.provider).handleItemDidShow)||void 0===n||n.call(t,a.inlineCompletions,o.sourceInlineCompletion,o.insertText)}}))),m}return(0,s.Z)(n,[{key:"isAcceptingPartially",get:function(){return this._isAcceptingPartially}},{key:"trigger",value:function(e){return Ue(this,void 0,void 0,(0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._isActive.set(!0,e),t.next=3,this._fetchInlineCompletions.get();case 3:case"end":return t.stop()}}),t,this)})))}},{key:"triggerExplicitly",value:function(e){return Ue(this,void 0,void 0,(0,o.Z)().mark((function t(){var n=this;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,c.c8)(e,(function(e){n._isActive.set(!0,e),n._forceUpdate.trigger(e,ie.bw.Explicit)})),t.next=3,this._fetchInlineCompletions.get();case 3:case"end":return t.stop()}}),t,this)})))}},{key:"stop",value:function(e){var t=this;(0,c.c8)(e,(function(e){t._isActive.set(!1,e),t._source.clear(e)}))}},{key:"_computeAugmentedCompletion",value:function(e,t){var n=this.textModel,i=this._source.suggestWidgetInlineCompletions.read(t),r=i?i.inlineCompletions:[this.selectedInlineCompletion.read(t)].filter(te.$K);return(0,ee.Fr)(r,(function(i){var r=i.toSingleTextEdit(t);return(r=r.removeCommonPrefix(n,N.e.fromPositions(r.range.getStartPosition(),e.range.getEndPosition()))).augments(e)?{edit:r,completion:i}:void 0}))}},{key:"_deltaSelectedInlineCompletionIndex",value:function(e){return Ue(this,void 0,void 0,(0,o.Z)().mark((function t(){var n,i;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.triggerExplicitly();case 2:(n=this._filteredInlineCompletionItems.get()||[]).length>0?(i=(this.selectedInlineCompletionIndex.get()+e+n.length)%n.length,this._selectedInlineCompletionId.set(n[i].semanticId,void 0)):this._selectedInlineCompletionId.set(void 0,void 0);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"next",value:function(){return Ue(this,void 0,void 0,(0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._deltaSelectedInlineCompletionIndex(1);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"previous",value:function(){return Ue(this,void 0,void 0,(0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._deltaSelectedInlineCompletionIndex(-1);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"accept",value:function(e){var t;return Ue(this,void 0,void 0,(0,o.Z)().mark((function n(){var i,r,a,s=this;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.getModel()===this.textModel){n.next=2;break}throw new A.he;case 2:if((i=this.state.get())&&!i.ghostText.isEmpty()&&i.inlineCompletion){n.next=5;break}return n.abrupt("return");case 5:if(r=i.inlineCompletion.toInlineCompletion(void 0),e.pushUndoStop(),r.snippetInfo?(e.executeEdits("inlineSuggestion.accept",[ne.h.replaceMove(r.range,"")].concat((0,X.Z)(r.additionalTextEdits))),e.setPosition(r.snippetInfo.range.getStartPosition()),null===(t=Oe.SnippetController2.get(e))||void 0===t||t.insert(r.snippetInfo.snippet,{undoStopBefore:!1})):e.executeEdits("inlineSuggestion.accept",[ne.h.replaceMove(r.range,r.insertText)].concat((0,X.Z)(r.additionalTextEdits))),r.command&&r.source.addRef(),(0,c.PS)((function(e){s._source.clear(e),s._isActive.set(!1,e)})),!r.command){n.next=14;break}return n.next=13,(a=this._commandService).executeCommand.apply(a,[r.command.id].concat((0,X.Z)(r.command.arguments||[]))).then(void 0,A.Cp);case 13:r.source.removeRef();case 14:case"end":return n.stop()}}),n,this)})))}},{key:"acceptNextWord",value:function(e){return Ue(this,void 0,void 0,(0,o.Z)().mark((function t(){var n=this;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._acceptNext(e,(function(e,t){var i=n.textModel.getLanguageIdAtPosition(e.lineNumber,e.column),r=n._languageConfigurationService.getLanguageConfiguration(i),o=new RegExp(r.wordDefinition.source,r.wordDefinition.flags.replace("g","")),a=t.match(o),s=0;s=a&&void 0!==a.index?0===a.index?a[0].length:a.index:t.length;var u=/\s+/g.exec(t);return u&&void 0!==u.index&&u.index+u[0].length<s&&(s=u.index+u[0].length),s}));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"acceptNextLine",value:function(e){return Ue(this,void 0,void 0,(0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._acceptNext(e,(function(e,t){var n=t.match(/\n/);return n&&void 0!==n.index?n.index+1:t.length}));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"_acceptNext",value:function(e,t){return Ue(this,void 0,void 0,(0,o.Z)().mark((function n(){var i,r,a,s,u,l,c,d,h,g,f;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.getModel()===this.textModel){n.next=2;break}throw new A.he;case 2:if((i=this.state.get())&&!i.ghostText.isEmpty()&&i.inlineCompletion){n.next=5;break}return n.abrupt("return");case 5:if(r=i.ghostText,!(a=i.inlineCompletion.toInlineCompletion(void 0)).snippetInfo&&a.filterText===a.insertText){n.next=11;break}return n.next=10,this.accept(e);case 10:return n.abrupt("return");case 11:if(s=r.parts[0],u=new y.L(r.lineNumber,s.column),l=s.lines.join("\n"),(c=t(u,l))!==l.length||1!==r.parts.length){n.next=18;break}return this.accept(e),n.abrupt("return");case 18:d=l.substring(0,c),this._isAcceptingPartially=!0;try{e.pushUndoStop(),e.executeEdits("inlineSuggestion.accept",[ne.h.replace(N.e.fromPositions(u),d)]),h=W(d),e.setPosition(U(u,h))}finally{this._isAcceptingPartially=!1}a.source.provider.handlePartialAccept&&(g=N.e.fromPositions(a.range.getStartPosition(),U(u,W(d))),f=e.getModel().getValueInRange(g,1),a.source.provider.handlePartialAccept(a.source.inlineCompletions,a.sourceInlineCompletion,f.length));case 22:case"end":return n.stop()}}),n,this)})))}},{key:"handleSuggestAccepted",value:function(e){var t,n,i=e.toSingleTextEdit().removeCommonPrefix(this.textModel),r=this._computeAugmentedCompletion(i,void 0);if(r){var o=r.completion.inlineCompletion;null===(n=(t=o.source.provider).handlePartialAccept)||void 0===n||n.call(t,o.source.inlineCompletions,o.sourceInlineCompletion,i.text.length)}}}]),n}(m.JT);We=Ve([He(9,Ee.TG),He(10,Ae.H),He(11,re.c_)],We);var Fe=n(47585),Ke=n(54125),Be=n(38102),qe=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e,i,r,o){var s;(0,a.Z)(this,n),(s=t.call(this)).editor=e,s.suggestControllerPreselector=i,s.checkModelVersion=r,s.onWillAccept=o,s.isSuggestWidgetVisible=!1,s.isShiftKeyPressed=!1,s._isActive=!1,s._currentSuggestItemInfo=void 0,s._selectedItem=(0,c.uh)((0,f.Z)(s),void 0),s._register(e.onKeyDown((function(e){e.shiftKey&&!s.isShiftKeyPressed&&(s.isShiftKeyPressed=!0,s.update(s._isActive))}))),s._register(e.onKeyUp((function(e){e.shiftKey&&s.isShiftKeyPressed&&(s.isShiftKeyPressed=!1,s.update(s._isActive))})));var u=Ke.SuggestController.get(s.editor);if(u){s._register(u.registerSelector({priority:100,select:function(e,t,n){var i;(0,c.PS)((function(e){return s.checkModelVersion(e)}));var r=s.editor.getModel();if(!r)return-1;var o=null===(i=s.suggestControllerPreselector())||void 0===i?void 0:i.removeCommonPrefix(r);if(!o)return-1;var a=y.L.lift(t),l=n.map((function(e,t){var n=je.fromSuggestion(u,r,a,e,s.isShiftKeyPressed).toSingleTextEdit().removeCommonPrefix(r);return{index:t,valid:o.augments(n),prefixLength:n.text.length,suggestItem:e}})).filter((function(e){return e&&e.valid&&e.prefixLength>0})),d=(0,ee.dI)(l,(0,Be.tT)((function(e){return e.prefixLength}),Be.fv));return d?d.index:-1}}));var l=!1;s._register(p.ju.once(u.model.onDidTrigger)((function(e){l||(l=!0,s._register(u.widget.value.onDidShow((function(){s.isSuggestWidgetVisible=!0,s.update(!0)}))),s._register(u.widget.value.onDidHide((function(){s.isSuggestWidgetVisible=!1,s.update(!1)}))),s._register(u.widget.value.onDidFocus((function(){s.isSuggestWidgetVisible=!0,s.update(!0)}))))}))),s._register(u.onWillInsertSuggestItem((function(e){var t=s.editor.getPosition(),n=s.editor.getModel();if(t&&n){var i=je.fromSuggestion(u,n,t,e.item,s.isShiftKeyPressed);s.onWillAccept(i)}})))}return s.update(s._isActive),s}return(0,s.Z)(n,[{key:"selectedItem",get:function(){return this._selectedItem}},{key:"update",value:function(e){var t=this,n=this.getSuggestItemInfo();this._isActive===e&&function(e,t){if(e===t)return!0;if(!e||!t)return!1;return e.equals(t)}(this._currentSuggestItemInfo,n)||(this._isActive=e,this._currentSuggestItemInfo=n,(0,c.PS)((function(e){t.checkModelVersion(e),t._selectedItem.set(t._isActive?t._currentSuggestItemInfo:void 0,e)})))}},{key:"getSuggestItemInfo",value:function(){var e=Ke.SuggestController.get(this.editor);if(e&&this.isSuggestWidgetVisible){var t=e.widget.value.getFocusedItem(),n=this.editor.getPosition(),i=this.editor.getModel();if(t&&n&&i)return je.fromSuggestion(e,i,n,t.item,this.isShiftKeyPressed)}}},{key:"stopForceRenderingAbove",value:function(){var e=Ke.SuggestController.get(this.editor);null===e||void 0===e||e.stopForceRenderingAbove()}},{key:"forceRenderingAbove",value:function(){var e=Ke.SuggestController.get(this.editor);null===e||void 0===e||e.forceRenderingAbove()}}]),n}(m.JT),je=function(){function e(t,n,i,r){(0,a.Z)(this,e),this.range=t,this.insertText=n,this.completionItemKind=i,this.isSnippetText=r}return(0,s.Z)(e,[{key:"equals",value:function(e){return this.range.equalsRange(e.range)&&this.insertText===e.insertText&&this.completionItemKind===e.completionItemKind&&this.isSnippetText===e.isSnippetText}},{key:"toSelectedSuggestionInfo",value:function(){return new ie.ln(this.range,this.insertText,this.completionItemKind,this.isSnippetText)}},{key:"toSingleTextEdit",value:function(){return new Ce(this.range,this.insertText)}}],[{key:"fromSuggestion",value:function(t,n,i,r,o){var a=r.completion.insertText,s=!1;if(4&r.completion.insertTextRules){var u=(new de.Yj).parse(a);u.children.length<100&&Fe.l.adjustWhitespace(n,i,!0,u),a=u.toString(),s=!0}var l=t.getOverwriteInfo(r,o);return new e(N.e.fromPositions(i.delta(0,-l.overwriteBefore),i.delta(0,Math.max(l.overwriteAfter,0))),a,r.completion.kind,s)}}]),e}();var Ye,ze=n(18420),Qe=n(93574),Ge=n(77819),Je=n(8022),$e=n(75256),Xe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},et=function(e,t){return function(n,i){t(n,i,e)}},tt=Ye=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e,i,r,o,s,u,l,d,v){var C;(0,a.Z)(this,n),(C=t.call(this)).editor=e,C.instantiationService=i,C.contextKeyService=r,C.configurationService=o,C.commandService=s,C.debounceService=u,C.languageFeaturesService=l,C.audioCueService=d,C._keybindingService=v,C.model=(0,c.DN)("inlineCompletionModel",void 0),C.textModelVersionId=(0,c.uh)((0,f.Z)(C),-1),C.cursorPosition=(0,c.uh)((0,f.Z)(C),new y.L(1,1)),C.suggestWidgetAdaptor=C._register(new qe(C.editor,(function(){var e,t;return null===(t=null===(e=C.model.get())||void 0===e?void 0:e.selectedInlineCompletion.get())||void 0===t?void 0:t.toSingleTextEdit(void 0)}),(function(e){return C.updateObservables(e,Me.Other)}),(function(e){(0,c.PS)((function(t){var n;C.updateObservables(t,Me.Other),null===(n=C.model.get())||void 0===n||n.handleSuggestAccepted(e)}))}))),C._enabled=(0,c.rD)(C.editor.onDidChangeConfiguration,(function(){return C.editor.getOption(62).enabled})),C.ghostTextWidget=C._register(C.instantiationService.createInstance(Q,C.editor,{ghostText:C.model.map((function(e,t){return null===e||void 0===e?void 0:e.ghostText.read(t)})),minReservedLineCount:(0,c.Dz)(0),targetTextModel:C.model.map((function(e){return null===e||void 0===e?void 0:e.textModel}))})),C._debounceValue=C.debounceService.for(C.languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),C._register(new g.f(C.contextKeyService,C.model)),C._register(p.ju.runAndSubscribe(e.onDidChangeModel,(function(){return(0,c.PS)((function(t){C.model.set(void 0,t),C.updateObservables(t,Me.Other);var n=e.getModel();if(n){var r=i.createInstance(We,n,C.suggestWidgetAdaptor.selectedItem,C.cursorPosition,C.textModelVersionId,C._debounceValue,(0,c.rD)(e.onDidChangeConfiguration,(function(){return e.getOption(117).preview})),(0,c.rD)(e.onDidChangeConfiguration,(function(){return e.getOption(117).previewMode})),(0,c.rD)(e.onDidChangeConfiguration,(function(){return e.getOption(62).mode})),C._enabled);C.model.set(r,t)}}))})));C._register(e.onDidChangeModelContent((function(e){return(0,c.PS)((function(t){return C.updateObservables(t,function(e){var t;return e.isUndoing?Me.Undo:e.isRedoing?Me.Redo:(null===(t=C.model.get())||void 0===t?void 0:t.isAcceptingPartially)?Me.AcceptWord:Me.Other}(e))}))}))),C._register(e.onDidChangeCursorPosition((function(e){return(0,c.PS)((function(t){var n;C.updateObservables(t,Me.Other),3!==e.reason&&"api"!==e.source||null===(n=C.model.get())||void 0===n||n.stop(t)}))}))),C._register(e.onDidType((function(){return(0,c.PS)((function(e){var t;C.updateObservables(e,Me.Other),C._enabled.get()&&(null===(t=C.model.get())||void 0===t||t.trigger(e))}))}))),C._register(C.commandService.onDidExecuteCommand((function(t){new Set([b.CoreEditingCommands.Tab.id,b.CoreEditingCommands.DeleteLeft.id,b.CoreEditingCommands.DeleteRight.id,h.Ou,"acceptSelectedSuggestion"]).has(t.commandId)&&e.hasTextFocus()&&C._enabled.get()&&(0,c.PS)((function(e){var t;null===(t=C.model.get())||void 0===t||t.trigger(e)}))}))),C._register(C.editor.onDidBlurEditorWidget((function(){C.contextKeyService.getContextKeyValue("accessibleViewIsShown")||C.configurationService.getValue("editor.inlineSuggest.keepOnBlur")||e.getOption(62).keepOnBlur||$.QG.dropDownVisible||(0,c.PS)((function(e){var t;null===(t=C.model.get())||void 0===t||t.stop(e)}))}))),C._register((0,c.EH)((function(e){var t,n=null===(t=C.model.read(e))||void 0===t?void 0:t.state.read(e);(null===n||void 0===n?void 0:n.suggestItem)?n.ghostText.lineCount>=2&&C.suggestWidgetAdaptor.forceRenderingAbove():C.suggestWidgetAdaptor.stopForceRenderingAbove()}))),C._register((0,m.OF)((function(){C.suggestWidgetAdaptor.stopForceRenderingAbove()})));var _=void 0;return C._register((0,c.EH)((function(e){var t=C.model.read(e),n=null===t||void 0===t?void 0:t.state.read(e);if(t&&n&&n.inlineCompletion){if(n.inlineCompletion.semanticId!==_){_=n.inlineCompletion.semanticId;var i=t.textModel.getLineContent(n.ghostText.lineNumber);C.audioCueService.playAudioCue(Qe.y$.inlineSuggestion).then((function(){C.editor.getOption(8)&&C.provideScreenReaderUpdate(n.ghostText.renderForScreenReader(i))}))}}else _=void 0}))),C._register(new $.oU(C.editor,C.model,C.instantiationService)),C._register(C.configurationService.onDidChangeConfiguration((function(e){e.affectsConfiguration("accessibility.verbosity.inlineCompletions")&&C.editor.updateOptions({inlineCompletionsAccessibilityVerbose:C.configurationService.getValue("accessibility.verbosity.inlineCompletions")})}))),C.editor.updateOptions({inlineCompletionsAccessibilityVerbose:C.configurationService.getValue("accessibility.verbosity.inlineCompletions")}),C}return(0,s.Z)(n,[{key:"provideScreenReaderUpdate",value:function(e){var t,n=this.contextKeyService.getContextKeyValue("accessibleViewIsShown"),i=this._keybindingService.lookupKeybinding("editor.action.accessibleView");!n&&i&&this.editor.getOption(147)&&(t=(0,ze.NC)("showAccessibleViewHint","Inspect this in the accessible view ({0})",i.getAriaLabel())),t?(0,v.Z9)(e+", "+t):(0,v.Z9)(e)}},{key:"updateObservables",value:function(e,t){var n,i,r=this.editor.getModel();this.textModelVersionId.set(null!==(n=null===r||void 0===r?void 0:r.getVersionId())&&void 0!==n?n:-1,e,t),this.cursorPosition.set(null!==(i=this.editor.getPosition())&&void 0!==i?i:new y.L(1,1),e)}},{key:"shouldShowHoverAt",value:function(e){var t,n=null===(t=this.model.get())||void 0===t?void 0:t.ghostText.get();return!!n&&n.parts.some((function(t){return e.containsPosition(new y.L(n.lineNumber,t.column))}))}},{key:"shouldShowHoverAtViewZone",value:function(e){return this.ghostTextWidget.ownsViewZone(e)}}],[{key:"get",value:function(e){return e.getContribution(Ye.ID)}}]),n}(m.JT);tt.ID="editor.contrib.inlineCompletionsController",tt=Ye=Xe([et(1,Ee.TG),et(2,Je.i6),et(3,Ge.Ui),et(4,Ae.H),et(5,C.A),et(6,_.p),et(7,Qe.e7),et(8,$e.d)],tt);var nt=n(51211),it=n(14443),rt=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},ot=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:n.ID,label:ze.NC("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:Je.Ao.and(d.u.writable,g.f.inlineSuggestionVisible),kbOpts:{weight:100,primary:606}})}return(0,s.Z)(n,[{key:"run",value:function(e,t){var n;return rt(this,void 0,void 0,(0,o.Z)().mark((function e(){var i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=tt.get(t),null===(n=null===i||void 0===i?void 0:i.model.get())||void 0===n||n.next();case 2:case"end":return e.stop()}}),e)})))}}]),n}(i.R6);ot.ID=h.OW;var at=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:n.ID,label:ze.NC("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:Je.Ao.and(d.u.writable,g.f.inlineSuggestionVisible),kbOpts:{weight:100,primary:604}})}return(0,s.Z)(n,[{key:"run",value:function(e,t){var n;return rt(this,void 0,void 0,(0,o.Z)().mark((function e(){var i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=tt.get(t),null===(n=null===i||void 0===i?void 0:i.model.get())||void 0===n||n.previous();case 2:case"end":return e.stop()}}),e)})))}}]),n}(i.R6);at.ID=h.Np;var st=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"editor.action.inlineSuggest.trigger",label:ze.NC("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:d.u.writable})}return(0,s.Z)(n,[{key:"run",value:function(e,t){var n;return rt(this,void 0,void 0,(0,o.Z)().mark((function e(){var i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=tt.get(t),null===(n=null===i||void 0===i?void 0:i.model.get())||void 0===n||n.triggerExplicitly();case 2:case"end":return e.stop()}}),e)})))}}]),n}(i.R6),ut=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"editor.action.inlineSuggest.acceptNextWord",label:ze.NC("action.inlineSuggest.acceptNextWord","Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:Je.Ao.and(d.u.writable,g.f.inlineSuggestionVisible),kbOpts:{weight:101,primary:2065,kbExpr:Je.Ao.and(d.u.writable,g.f.inlineSuggestionVisible)},menuOpts:[{menuId:it.eH.InlineSuggestionToolbar,title:ze.NC("acceptWord","Accept Word"),group:"primary",order:2}]})}return(0,s.Z)(n,[{key:"run",value:function(e,t){var n;return rt(this,void 0,void 0,(0,o.Z)().mark((function e(){var i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=tt.get(t),e.next=3,null===(n=null===i||void 0===i?void 0:i.model.get())||void 0===n?void 0:n.acceptNextWord(i.editor);case 3:case"end":return e.stop()}}),e)})))}}]),n}(i.R6),lt=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"editor.action.inlineSuggest.acceptNextLine",label:ze.NC("action.inlineSuggest.acceptNextLine","Accept Next Line Of Inline Suggestion"),alias:"Accept Next Line Of Inline Suggestion",precondition:Je.Ao.and(d.u.writable,g.f.inlineSuggestionVisible),kbOpts:{weight:101},menuOpts:[{menuId:it.eH.InlineSuggestionToolbar,title:ze.NC("acceptLine","Accept Line"),group:"secondary",order:2}]})}return(0,s.Z)(n,[{key:"run",value:function(e,t){var n;return rt(this,void 0,void 0,(0,o.Z)().mark((function e(){var i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=tt.get(t),e.next=3,null===(n=null===i||void 0===i?void 0:i.model.get())||void 0===n?void 0:n.acceptNextLine(i.editor);case 3:case"end":return e.stop()}}),e)})))}}]),n}(i.R6),ct=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:h.Ou,label:ze.NC("action.inlineSuggest.accept","Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:g.f.inlineSuggestionVisible,menuOpts:[{menuId:it.eH.InlineSuggestionToolbar,title:ze.NC("accept","Accept"),group:"primary",order:1}],kbOpts:{primary:2,weight:200,kbExpr:Je.Ao.and(g.f.inlineSuggestionVisible,d.u.tabMovesFocus.toNegated(),g.f.inlineSuggestionHasIndentationLessThanTabSize,nt._y.Visible.toNegated(),d.u.hoverFocused.toNegated())}})}return(0,s.Z)(n,[{key:"run",value:function(e,t){var n;return rt(this,void 0,void 0,(0,o.Z)().mark((function e(){var i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(i=tt.get(t))&&(null===(n=i.model.get())||void 0===n||n.accept(i.editor),i.editor.focus());case 2:case"end":return e.stop()}}),e)})))}}]),n}(i.R6),dt=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:n.ID,label:ze.NC("action.inlineSuggest.hide","Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:g.f.inlineSuggestionVisible,kbOpts:{weight:100,primary:9}})}return(0,s.Z)(n,[{key:"run",value:function(e,t){return rt(this,void 0,void 0,(0,o.Z)().mark((function e(){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=tt.get(t),(0,c.PS)((function(e){var t;null===(t=null===n||void 0===n?void 0:n.model.get())||void 0===t||t.stop(e)}));case 2:case"end":return e.stop()}}),e)})))}}]),n}(i.R6);dt.ID="editor.action.inlineSuggest.hide";var ht=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:n.ID,title:ze.NC("action.inlineSuggest.alwaysShowToolbar","Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:it.eH.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:Je.Ao.equals("config.editor.inlineSuggest.showToolbar","always")})}return(0,s.Z)(n,[{key:"run",value:function(e,t){return rt(this,void 0,void 0,(0,o.Z)().mark((function t(){var n,i,r;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.get(Ge.Ui),i=n.getValue("editor.inlineSuggest.showToolbar"),r="always"===i?"onHover":"always",n.updateValue("editor.inlineSuggest.showToolbar",r);case 4:case"end":return t.stop()}}),t)})))}}]),n}(it.Ke);ht.ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar";var gt=n(4942),ft=n(32959),vt=n(71047),pt=n(46757),mt=n(93897),bt=n(51713),yt=n(45536),Ct=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},_t=function(e,t){return function(n,i){t(n,i,e)}},xt=function(){function e(t,n,i){(0,a.Z)(this,e),this.owner=t,this.range=n,this.controller=i}return(0,s.Z)(e,[{key:"isValidForHoverAnchor",value:function(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}]),e}(),wt=function(){function e(t,n,i,r,o,s){(0,a.Z)(this,e),this._editor=t,this._languageService=n,this._openerService=i,this.accessibilityService=r,this._instantiationService=o,this._telemetryService=s,this.hoverOrdinal=4}return(0,s.Z)(e,[{key:"suggestHoverAnchor",value:function(e){var t=tt.get(this._editor);if(!t)return null;var n=e.target;if(8===n.type){var i=n.detail;if(t.shouldShowHoverAtViewZone(i.viewZoneId))return new r.YM(1e3,this,N.e.fromPositions(this._editor.getModel().validatePosition(i.positionBefore||i.position)),e.event.posx,e.event.posy,!1)}if(7===n.type&&t.shouldShowHoverAt(n.range))return new r.YM(1e3,this,n.range,e.event.posx,e.event.posy,!1);if(6===n.type&&(n.detail.mightBeForeignElement&&t.shouldShowHoverAt(n.range)))return new r.YM(1e3,this,n.range,e.event.posx,e.event.posy,!1);return null}},{key:"computeSync",value:function(e,t){if("always"===this._editor.getOption(62).showToolbar)return[];var n=tt.get(this._editor);return n&&n.shouldShowHoverAt(e.range)?[new xt(this,e.range,n)]:[]}},{key:"renderHoverParts",value:function(e,t){var n=new m.SL,i=t[0];this._telemetryService.publicLog2("inlineCompletionHover.shown"),this.accessibilityService.isScreenReaderOptimized()&&!this._editor.getOption(8)&&this.renderScreenReaderText(e,i,n);var r=i.controller.model.get(),o=this._instantiationService.createInstance($.QG,this._editor,!1,(0,c.Dz)(null),r.selectedInlineCompletionIndex,r.inlineCompletionsCount,r.selectedInlineCompletion.map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.inlineCompletion.source.inlineCompletions.commands)&&void 0!==t?t:[]})));return e.fragment.appendChild(o.getDomNode()),r.triggerExplicitly(),n.add(o),n}},{key:"renderScreenReaderText",value:function(e,t,n){var i=this,r=ft.$,o=r("div.hover-row.markdown-hover"),a=ft.append(o,r("div.hover-contents",(0,gt.Z)({},"aria-live","assertive"))),s=n.add(new pt.$({editor:this._editor},this._languageService,this._openerService));n.add((0,c.EH)((function(r){var o,u=null===(o=t.controller.model.read(r))||void 0===o?void 0:o.ghostText.read(r);if(u){var l=i._editor.getModel().getLineContent(u.lineNumber);!function(t){n.add(s.onDidRenderAsync((function(){a.className="hover-contents code-hover-contents",e.onContentsChanged()})));var i=ze.NC("inlineSuggestionFollows","Suggestion:"),r=n.add(s.render((new vt.W5).appendText(i).appendCodeblock("text",t)));a.replaceChildren(r.element)}(u.renderForScreenReader(l))}else ft.reset(a)}))),e.fragment.appendChild(o)}}]),e}();wt=Ct([_t(1,R.O),_t(2,bt.v4),_t(3,mt.F),_t(4,Ee.TG),_t(5,yt.b)],wt),(0,i._K)(tt.ID,tt,3),(0,i.Qr)(st),(0,i.Qr)(ot),(0,i.Qr)(at),(0,i.Qr)(ut),(0,i.Qr)(lt),(0,i.Qr)(ct),(0,i.Qr)(dt),(0,it.r1)(ht),r.Ae.register(wt)},26755:function(e,t,n){n.d(t,{oU:function(){return W},QG:function(){return B}});var i,r=n(93433),o=n(11752),a=n(61120),s=n(29439),u=n(37762),l=n(43144),c=n(15671),d=n(97326),h=n(60136),g=n(27277),f=n(32959),v=n(6035),p=n(89921),m=n(93720),b=n(38102),y=n(71049),C=n(77409),_=n(65096),x=n(1370),w=n(90650),k=n(79730),S=n(65631),L=n(70133),Z=n(51053),I=n(18420),N=n(12858),T=n(30400),R=n(14443),D=n(99740),P=n(8022),M=n(92361),O=n(64606),A=n(75256),E=n(45536),V=n(87288),H=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},U=function(e,t){return function(n,i){t(n,i,e)}},W=function(e){(0,h.Z)(n,e);var t=(0,g.Z)(n);function n(e,i,r){var o;return(0,c.Z)(this,n),(o=t.call(this)).editor=e,o.model=i,o.instantiationService=r,o.alwaysShowToolbar=(0,x.rD)(o.editor.onDidChangeConfiguration,(function(){return"always"===o.editor.getOption(62).showToolbar})),o.sessionPosition=void 0,o.position=(0,x.nK)((0,d.Z)(o),(function(e){var t,n,i,r=null===(t=o.model.read(e))||void 0===t?void 0:t.ghostText.read(e);if(!o.alwaysShowToolbar.read(e)||!r||0===r.parts.length)return o.sessionPosition=void 0,null;var a=r.parts[0].column;o.sessionPosition&&o.sessionPosition.lineNumber!==r.lineNumber&&(o.sessionPosition=void 0);var s=new S.L(r.lineNumber,Math.min(a,null!==(i=null===(n=o.sessionPosition)||void 0===n?void 0:n.column)&&void 0!==i?i:Number.MAX_SAFE_INTEGER));return o.sessionPosition=s,s})),o._register((0,x.gp)((function(t,n){var i=o.model.read(t);if(i&&o.alwaysShowToolbar.read(t)){var r=n.add(o.instantiationService.createInstance(B,o.editor,!0,o.position,i.selectedInlineCompletionIndex,i.inlineCompletionsCount,i.selectedInlineCompletion.map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.inlineCompletion.source.inlineCompletions.commands)&&void 0!==t?t:[]}))));e.addContentWidget(r),n.add((0,_.OF)((function(){return e.removeContentWidget(r)}))),n.add((0,x.EH)((function(e){o.position.read(e)&&i.lastTriggerKind.read(e)!==L.bw.Explicit&&i.triggerExplicitly()})))}}))),o}return(0,l.Z)(n)}(_.JT);W=H([U(2,O.TG)],W);var F=(0,V.q5)("inline-suggestion-hints-next",C.l.chevronRight,(0,I.NC)("parameterHintsNextIcon","Icon for show next parameter hint.")),K=(0,V.q5)("inline-suggestion-hints-previous",C.l.chevronLeft,(0,I.NC)("parameterHintsPreviousIcon","Icon for show previous parameter hint.")),B=i=function(e){(0,h.Z)(n,e);var t=(0,g.Z)(n);function n(e,r,o,a,l,h,g,v,p,C,_){var w;return(0,c.Z)(this,n),(w=t.call(this)).editor=e,w.withBorder=r,w._position=o,w._currentSuggestionIdx=a,w._suggestionCount=l,w._extraCommands=h,w._commandService=g,w.keybindingService=p,w._contextKeyService=C,w._menuService=_,w.id="InlineSuggestionHintsContentWidget".concat(i.id++),w.allowEditorOverflow=!0,w.suppressMouseDown=!1,w.nodes=(0,f.h)("div.inlineSuggestionsHints",{className:w.withBorder?".withBorder":""},[(0,f.h)("div@toolBar")]),w.previousAction=w.createCommandAction(Z.Np,(0,I.NC)("previous","Previous"),k.k.asClassName(K)),w.availableSuggestionCountAction=new m.aU("inlineSuggestionHints.availableSuggestionCount","",void 0,!1),w.nextAction=w.createCommandAction(Z.OW,(0,I.NC)("next","Next"),k.k.asClassName(F)),w.inlineCompletionsActionsMenus=w._register(w._menuService.createMenu(R.eH.InlineCompletionsActions,w._contextKeyService)),w.clearAvailableSuggestionCountLabelDebounced=w._register(new y.pY((function(){w.availableSuggestionCountAction.label=""}),100)),w.disableButtonsDebounced=w._register(new y.pY((function(){w.previousAction.enabled=w.nextAction.enabled=!1}),100)),w.lastCommands=[],w.toolBar=w._register(v.createInstance(Y,w.nodes.toolBar,R.eH.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:function(e){return e.startsWith("primary")}},actionViewItemProvider:function(e,t){if(e instanceof R.U8)return v.createInstance(j,e,void 0);if(e===w.availableSuggestionCountAction){var n=new q(void 0,e,{label:!0,icon:!1});return n.setClass("availableSuggestionCount"),n}},telemetrySource:"InlineSuggestionToolbar"})),w.toolBar.setPrependedPrimaryActions([w.previousAction,w.availableSuggestionCountAction,w.nextAction]),w._register(w.toolBar.onDidChangeDropdownVisibility((function(e){i._dropDownVisible=e}))),w._register((0,x.EH)((function(e){w._position.read(e),w.editor.layoutContentWidget((0,d.Z)(w))}))),w._register((0,x.EH)((function(e){var t=w._suggestionCount.read(e),n=w._currentSuggestionIdx.read(e);void 0!==t?(w.clearAvailableSuggestionCountLabelDebounced.cancel(),w.availableSuggestionCountAction.label="".concat(n+1,"/").concat(t)):w.clearAvailableSuggestionCountLabelDebounced.schedule(),void 0!==t&&t>1?(w.disableButtonsDebounced.cancel(),w.previousAction.enabled=w.nextAction.enabled=!0):w.disableButtonsDebounced.schedule()}))),w._register((0,x.EH)((function(e){var t=w._extraCommands.read(e);if(!(0,b.fS)(w.lastCommands,t)){w.lastCommands=t;var n,i=t.map((function(e){return{class:void 0,id:e.id,enabled:!0,tooltip:e.tooltip||"",label:e.title,run:function(t){return w._commandService.executeCommand(e.id)}}})),r=(0,u.Z)(w.inlineCompletionsActionsMenus.getActions());try{for(r.s();!(n=r.n()).done;){var o,a=(0,s.Z)(n.value,2),l=(a[0],a[1]),c=(0,u.Z)(l);try{for(c.s();!(o=c.n()).done;){var d=o.value;d instanceof R.U8&&i.push(d)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){r.e(h)}finally{r.f()}i.length>0&&i.unshift(new m.Z0),w.toolBar.setAdditionalSecondaryActions(i)}}))),w}return(0,l.Z)(n,[{key:"createCommandAction",value:function(e,t,n){var i=this,r=new m.aU(e,t,n,!0,(function(){return i._commandService.executeCommand(e)})),o=this.keybindingService.lookupKeybinding(e,this._contextKeyService),a=t;return o&&(a=(0,I.NC)({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",t,o.getLabel())),r.tooltip=a,r}},{key:"getId",value:function(){return this.id}},{key:"getDomNode",value:function(){return this.nodes.root}},{key:"getPosition",value:function(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}}],[{key:"dropDownVisible",get:function(){return this._dropDownVisible}}]),n}(_.JT);B._dropDownVisible=!1,B.id=0,B=i=H([U(6,D.H),U(7,O.TG),U(8,A.d),U(9,P.i6),U(10,R.co)],B);var q=function(e){(0,h.Z)(n,e);var t=(0,g.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.apply(this,arguments))._className=void 0,e}return(0,l.Z)(n,[{key:"setClass",value:function(e){this._className=e}},{key:"render",value:function(e){(0,o.Z)((0,a.Z)(n.prototype),"render",this).call(this,e),this._className&&e.classList.add(this._className)}}]),n}(v.gU),j=function(e){(0,h.Z)(n,e);var t=(0,g.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"updateLabel",value:function(){var e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return(0,o.Z)((0,a.Z)(n.prototype),"updateLabel",this).call(this);if(this.label){var t=(0,f.h)("div.keybinding").root;new p.e(t,w.OS,Object.assign({disableTitle:!0},p.F)).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineSuggestionStatusBarItemLabel")}}}]),n}(N.Mm),Y=function(e){(0,h.Z)(n,e);var t=(0,g.Z)(n);function n(e,i,r,o,a,s,u,l){var d;return(0,c.Z)(this,n),(d=t.call(this,e,Object.assign({resetMenu:i},r),o,a,s,u,l)).menuId=i,d.options2=r,d.menuService=o,d.contextKeyService=a,d.menu=d._store.add(d.menuService.createMenu(d.menuId,d.contextKeyService,{emitEventsForSubmenuChanges:!0})),d.additionalActions=[],d.prependedPrimaryActions=[],d._store.add(d.menu.onDidChange((function(){return d.updateToolbar()}))),d.updateToolbar(),d}return(0,l.Z)(n,[{key:"updateToolbar",value:function(){var e,t,n,i,o,a,s,u=[],l=[];(0,N.vr)(this.menu,null===(e=this.options2)||void 0===e?void 0:e.menuOptions,{primary:u,secondary:l},null===(n=null===(t=this.options2)||void 0===t?void 0:t.toolbarOptions)||void 0===n?void 0:n.primaryGroup,null===(o=null===(i=this.options2)||void 0===i?void 0:i.toolbarOptions)||void 0===o?void 0:o.shouldInlineSubmenu,null===(s=null===(a=this.options2)||void 0===a?void 0:a.toolbarOptions)||void 0===s?void 0:s.useSeparatorsInPrimaryActions),l.push.apply(l,(0,r.Z)(this.additionalActions)),u.unshift.apply(u,(0,r.Z)(this.prependedPrimaryActions)),this.setActions(u,l)}},{key:"setPrependedPrimaryActions",value:function(e){(0,b.fS)(this.prependedPrimaryActions,e,(function(e,t){return e===t}))||(this.prependedPrimaryActions=e,this.updateToolbar())}},{key:"setAdditionalSecondaryActions",value:function(e){(0,b.fS)(this.additionalActions,e,(function(e,t){return e===t}))||(this.additionalActions=e,this.updateToolbar())}}]),n}(T.T);Y=H([U(3,R.co),U(4,P.i6),U(5,M.i),U(6,A.d),U(7,E.b)],Y)},92303:function(e,t,n){n.r(t),n.d(t,{InlineProgressManager:function(){return L}});var i=n(74165),r=n(93433),o=n(15671),a=n(43144),s=n(97326),u=n(11752),l=n(61120),c=n(60136),d=n(27277),h=n(32959),g=n(71049),f=n(77409),v=n(65096),p=n(31906),m=n(79730),b=n(17429),y=n(78519),C=n(64606),_=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},x=function(e,t){return function(n,i){t(n,i,e)}},w=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},k=y.qx.register({description:"inline-progress-widget",stickiness:1,showIfCollapsed:!0,after:{content:p.B4,inlineClassName:"inline-editor-progress-decoration",inlineClassNameAffectsLetterSpacing:!0}}),S=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e,i,r,a,u){var l;return(0,o.Z)(this,n),(l=t.call(this)).typeId=e,l.editor=i,l.range=r,l.delegate=u,l.allowEditorOverflow=!1,l.suppressMouseDown=!0,l.create(a),l.editor.addContentWidget((0,s.Z)(l)),l.editor.layoutContentWidget((0,s.Z)(l)),l}return(0,a.Z)(n,[{key:"create",value:function(e){var t,n=this;this.domNode=h.$(".inline-progress-widget"),this.domNode.role="button",this.domNode.title=e;var i=h.$("span.icon");this.domNode.append(i),(t=i.classList).add.apply(t,(0,r.Z)(m.k.asClassNameArray(f.l.loading)).concat(["codicon-modifier-spin"]));var o=function(){var e=n.editor.getOption(66);n.domNode.style.height="".concat(e,"px"),n.domNode.style.width="".concat(Math.ceil(.8*e),"px")};o(),this._register(this.editor.onDidChangeConfiguration((function(e){(e.hasChanged(52)||e.hasChanged(66))&&o()}))),this._register(h.addDisposableListener(this.domNode,h.EventType.CLICK,(function(e){n.delegate.cancel()})))}},{key:"getId",value:function(){return n.baseId+"."+this.typeId}},{key:"getDomNode",value:function(){return this.domNode}},{key:"getPosition",value:function(){return{position:{lineNumber:this.range.startLineNumber,column:this.range.startColumn},preference:[0]}}},{key:"dispose",value:function(){(0,u.Z)((0,l.Z)(n.prototype),"dispose",this).call(this),this.editor.removeContentWidget(this)}}]),n}(v.JT);S.baseId="editor.widget.inlineProgressWidget";var L=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e,i,r){var a;return(0,o.Z)(this,n),(a=t.call(this)).id=e,a._editor=i,a._instantiationService=r,a._showDelay=500,a._showPromise=a._register(new v.XK),a._currentWidget=new v.XK,a._operationIdPool=0,a._currentDecorations=i.createDecorationsCollection(),a}return(0,a.Z)(n,[{key:"showWhile",value:function(e,t,n){return w(this,void 0,void 0,(0,i.Z)().mark((function r(){var o,a=this;return(0,i.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=this._operationIdPool++,this._currentOperation=o,this.clear(),this._showPromise.value=(0,g.Vg)((function(){var i=b.e.fromPositions(e);a._currentDecorations.set([{range:i,options:k}]).length>0&&(a._currentWidget.value=a._instantiationService.createInstance(S,a.id,a._editor,i,t,n))}),this._showDelay),i.prev=4,i.next=7,n;case 7:return i.abrupt("return",i.sent);case 8:return i.prev=8,this._currentOperation===o&&(this.clear(),this._currentOperation=void 0),i.finish(8);case 11:case"end":return i.stop()}}),r,this,[[4,,8,11]])})))}},{key:"clear",value:function(){this._showPromise.clear(),this._currentDecorations.clear(),this._currentWidget.clear()}}]),n}(v.JT);L=_([x(2,C.TG)],L)},83833:function(e,t,n){n.r(t),n.d(t,{ExpandLineSelectionAction:function(){return d}});var i=n(15671),r=n(43144),o=n(60136),a=n(27277),s=n(95253),u=n(81672),l=n(98926),c=n(18420),d=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.call(this,{id:"expandLineSelection",label:c.NC("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:l.u.textInputFocus,primary:2090}})}return(0,r.Z)(n,[{key:"run",value:function(e,t,n){if(n=n||{},t.hasModel()){var i=t._getViewModel();i.model.pushStackElement(),i.setCursorStates(n.source,3,u.P.expandLineSelection(i,i.getCursorStates())),i.revealPrimaryCursor(n.source,!0)}}}]),n}(s.R6);(0,s.Qr)(d)},83194:function(e,t,n){n.r(t),n.d(t,{AbstractCaseAction:function(){return ne},AbstractDeleteAllToBoundaryAction:function(){return J},AbstractSortLinesAction:function(){return W},CamelCaseAction:function(){return ue},DeleteAllLeftAction:function(){return $},DeleteAllRightAction:function(){return X},DeleteDuplicateLinesAction:function(){return B},DeleteLinesAction:function(){return j},DuplicateSelectionAction:function(){return E},IndentLinesAction:function(){return Y},InsertLineAfterAction:function(){return G},InsertLineBeforeAction:function(){return Q},JoinLinesAction:function(){return ee},KebabCaseAction:function(){return le},LowerCaseAction:function(){return re},SnakeCaseAction:function(){return se},SortLinesAscendingAction:function(){return F},SortLinesDescendingAction:function(){return K},TitleCaseAction:function(){return ae},TransposeAction:function(){return te},TrimTrailingWhitespaceAction:function(){return q},UpperCaseAction:function(){return ie}});var i=n(37762),r=n(15671),o=n(43144),a=n(60136),s=n(27277),u=n(89490),l=n(53651),c=n(95253),d=n(18424),h=n(58714),g=n(52081),f=n(62557),v=n(65631),p=n(17429),m=n(96601),b=n(98926),y=function(){function e(t,n,i){(0,r.Z)(this,e),this._selection=t,this._isCopyingDown=n,this._noop=i||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}return(0,o.Z)(e,[{key:"getEditOperations",value:function(e,t){var n=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,n.startLineNumber<n.endLineNumber&&1===n.endColumn&&(this._endLineNumberDelta=1,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));for(var i=[],r=n.startLineNumber;r<=n.endLineNumber;r++)i.push(e.getLineContent(r));var o=i.join("\n");""===o&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new p.e(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber+1,1),n.endLineNumber===e.getLineCount()?"":"\n"):this._isCopyingDown?t.addEditOperation(new p.e(n.startLineNumber,1,n.startLineNumber,1),o+"\n"):t.addEditOperation(new p.e(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),"\n"+o),this._selectionId=t.trackSelection(n),this._selectionDirection=this._selection.getDirection()}},{key:"computeCursorState",value:function(e,t){var n=t.getTrackedSelection(this._selectionId);if(0!==this._startLineNumberDelta||0!==this._endLineNumberDelta){var i=n.startLineNumber,r=n.startColumn,o=n.endLineNumber,a=n.endColumn;0!==this._startLineNumberDelta&&(i+=this._startLineNumberDelta,r=1),0!==this._endLineNumberDelta&&(o+=this._endLineNumberDelta,a=1),n=m.Y.createWithDirection(i,r,o,a,this._selectionDirection)}return n}}]),e}(),C=n(31906),_=n(2413),x=n(48607),w=n(19536),k=n(25494),S=n(40469),L=n(98657),Z=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},I=function(e,t){return function(n,i){t(n,i,e)}},N=function(){function e(t,n,i,o){(0,r.Z)(this,e),this._languageConfigurationService=o,this._selection=t,this._isMovingDown=n,this._autoIndent=i,this._selectionId=null,this._moveEndLineSelectionShrink=!1}return(0,o.Z)(e,[{key:"getEditOperations",value:function(e,t){var n=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===n)this._selectionId=t.trackSelection(this._selection);else if(this._isMovingDown||1!==this._selection.startLineNumber){this._moveEndPositionDown=!1;var i=this._selection;i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));var r=e.getOptions(),o=r.tabSize,a=r.indentSize,s=r.insertSpaces,u=this.buildIndentConverter(o,a,s),l={tokenization:{getLineTokens:function(t){return e.tokenization.getLineTokens(t)},getLanguageId:function(){return e.getLanguageId()},getLanguageIdAtPosition:function(t,n){return e.getLanguageIdAtPosition(t,n)}},getLineContent:null};if(i.startLineNumber===i.endLineNumber&&1===e.getLineMaxColumn(i.startLineNumber)){var c=i.startLineNumber,d=this._isMovingDown?c+1:c-1;1===e.getLineMaxColumn(d)?t.addEditOperation(new p.e(1,1,1,1),null):(t.addEditOperation(new p.e(c,1,c,1),e.getLineContent(d)),t.addEditOperation(new p.e(d,1,d,e.getLineMaxColumn(d)),null)),i=new m.Y(d,1,d,1)}else{var h,g;if(this._isMovingDown){h=i.endLineNumber+1,g=e.getLineContent(h),t.addEditOperation(new p.e(h-1,e.getLineMaxColumn(h-1),h,e.getLineMaxColumn(h)),null);var f=g;if(this.shouldAutoIndent(e,i)){var v=this.matchEnterRule(e,u,o,h,i.startLineNumber-1);if(null!==v){var b=C.V8(e.getLineContent(h)),y=v+k.Y(b,o),_=k.J(y,o,s);f=_+this.trimStart(g)}else{l.getLineContent=function(t){return t===i.startLineNumber?e.getLineContent(h):e.getLineContent(t)};var x=(0,S.n8)(this._autoIndent,l,e.getLanguageIdAtPosition(h,1),i.startLineNumber,u,this._languageConfigurationService);if(null!==x){var w=C.V8(e.getLineContent(h)),L=k.Y(x,o);if(L!==k.Y(w,o)){var Z=k.J(L,o,s);f=Z+this.trimStart(g)}}}t.addEditOperation(new p.e(i.startLineNumber,1,i.startLineNumber,1),f+"\n");var I=this.matchEnterRuleMovingDown(e,u,o,i.startLineNumber,h,f);if(null!==I)0!==I&&this.getIndentEditsOfMovingBlock(e,t,i,o,s,I);else{l.getLineContent=function(t){return t===i.startLineNumber?f:t>=i.startLineNumber+1&&t<=i.endLineNumber+1?e.getLineContent(t-1):e.getLineContent(t)};var N=(0,S.n8)(this._autoIndent,l,e.getLanguageIdAtPosition(h,1),i.startLineNumber+1,u,this._languageConfigurationService);if(null!==N){var T=C.V8(e.getLineContent(i.startLineNumber)),R=k.Y(N,o),D=k.Y(T,o);if(R!==D){var P=R-D;this.getIndentEditsOfMovingBlock(e,t,i,o,s,P)}}}}else t.addEditOperation(new p.e(i.startLineNumber,1,i.startLineNumber,1),f+"\n")}else if(h=i.startLineNumber-1,g=e.getLineContent(h),t.addEditOperation(new p.e(h,1,h+1,1),null),t.addEditOperation(new p.e(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),"\n"+g),this.shouldAutoIndent(e,i)){l.getLineContent=function(t){return t===h?e.getLineContent(i.startLineNumber):e.getLineContent(t)};var M=this.matchEnterRule(e,u,o,i.startLineNumber,i.startLineNumber-2);if(null!==M)0!==M&&this.getIndentEditsOfMovingBlock(e,t,i,o,s,M);else{var O=(0,S.n8)(this._autoIndent,l,e.getLanguageIdAtPosition(i.startLineNumber,1),h,u,this._languageConfigurationService);if(null!==O){var A=C.V8(e.getLineContent(i.startLineNumber)),E=k.Y(O,o),V=k.Y(A,o);if(E!==V){var H=E-V;this.getIndentEditsOfMovingBlock(e,t,i,o,s,H)}}}}}this._selectionId=t.trackSelection(i)}else this._selectionId=t.trackSelection(this._selection)}},{key:"buildIndentConverter",value:function(e,t,n){return{shiftIndent:function(i){return _.U.shiftIndent(i,i.length+1,e,t,n)},unshiftIndent:function(i){return _.U.unshiftIndent(i,i.length+1,e,t,n)}}}},{key:"parseEnterResult",value:function(e,t,n,i,r){if(r){var o=r.indentation;r.indentAction===x.wU.None||r.indentAction===x.wU.Indent?o=r.indentation+r.appendText:r.indentAction===x.wU.IndentOutdent?o=r.indentation:r.indentAction===x.wU.Outdent&&(o=t.unshiftIndent(r.indentation)+r.appendText);var a=e.getLineContent(i);if(this.trimStart(a).indexOf(this.trimStart(o))>=0){var s=C.V8(e.getLineContent(i)),u=C.V8(o),l=(0,S.tI)(e,i,this._languageConfigurationService);return null!==l&&2&l&&(u=t.unshiftIndent(u)),k.Y(u,n)-k.Y(s,n)}}return null}},{key:"matchEnterRuleMovingDown",value:function(e,t,n,i,r,o){if(C.ow(o)>=0){var a=e.getLineMaxColumn(r),s=(0,L.A)(this._autoIndent,e,new p.e(r,a,r,a),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,s)}for(var u=i-1;u>=1;){var l=e.getLineContent(u);if(C.ow(l)>=0)break;u--}if(u<1||i>e.getLineCount())return null;var c=e.getLineMaxColumn(u),d=(0,L.A)(this._autoIndent,e,new p.e(u,c,u,c),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,d)}},{key:"matchEnterRule",value:function(e,t,n,i,r,o){for(var a=r;a>=1;){var s=void 0;if(s=a===r&&void 0!==o?o:e.getLineContent(a),C.ow(s)>=0)break;a--}if(a<1||i>e.getLineCount())return null;var u=e.getLineMaxColumn(a),l=(0,L.A)(this._autoIndent,e,new p.e(a,u,a,u),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,l)}},{key:"trimStart",value:function(e){return e.replace(/^\s+/,"")}},{key:"shouldAutoIndent",value:function(e,t){if(this._autoIndent<4)return!1;if(!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;var n=e.getLanguageIdAtPosition(t.startLineNumber,1);return n===e.getLanguageIdAtPosition(t.endLineNumber,1)&&null!==this._languageConfigurationService.getLanguageConfiguration(n).indentRulesSupport}},{key:"getIndentEditsOfMovingBlock",value:function(e,t,n,i,r,o){for(var a=n.startLineNumber;a<=n.endLineNumber;a++){var s=e.getLineContent(a),u=C.V8(s),l=k.Y(u,i)+o,c=k.J(l,i,r);c!==u&&(t.addEditOperation(new p.e(a,1,a,u.length+1),c),a===n.endLineNumber&&n.endColumn<=u.length+1&&""===c&&(this._moveEndLineSelectionShrink=!0))}}},{key:"computeCursorState",value:function(e,t){var n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&n.startLineNumber<n.endLineNumber&&(n=n.setEndPosition(n.endLineNumber,2)),n}}]),e}();N=Z([I(3,w.c_)],N);var T=function(){function e(t,n){(0,r.Z)(this,e),this.selection=t,this.descending=n,this.selectionId=null}return(0,o.Z)(e,[{key:"getEditOperations",value:function(e,t){var n=function(e,t,n){var i=R(e,t,n);if(!i)return null;return f.h.replace(new p.e(i.startLineNumber,1,i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),i.after.join("\n"))}(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this.selectionId)}}],[{key:"getCollator",value:function(){return e._COLLATOR||(e._COLLATOR=new Intl.Collator),e._COLLATOR}},{key:"canRun",value:function(e,t,n){if(null===e)return!1;var i=R(e,t,n);if(!i)return!1;for(var r=0,o=i.before.length;r<o;r++)if(i.before[r]!==i.after[r])return!0;return!1}}]),e}();function R(e,t,n){var i=t.startLineNumber,r=t.endLineNumber;if(1===t.endColumn&&r--,i>=r)return null;for(var o=[],a=i;a<=r;a++)o.push(e.getLineContent(a));var s=o.slice(0);return s.sort(T.getCollator().compare),!0===n&&(s=s.reverse()),{startLineNumber:i,endLineNumber:r,before:o,after:s}}T._COLLATOR=null;var D=n(18420),P=n(14443),M=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,i){var o;return(0,r.Z)(this,n),(o=t.call(this,i)).down=e,o}return(0,o.Z)(n,[{key:"run",value:function(e,t){if(t.hasModel()){var n=t.getSelections().map((function(e,t){return{selection:e,index:t,ignore:!1}}));n.sort((function(e,t){return p.e.compareRangesUsingStarts(e.selection,t.selection)}));for(var r=n[0],o=1;o<n.length;o++){var a=n[o];r.selection.endLineNumber===a.selection.startLineNumber&&(r.index<a.index?a.ignore=!0:(r.ignore=!0,r=a))}var s,u=[],l=(0,i.Z)(n);try{for(l.s();!(s=l.n()).done;){var c=s.value;u.push(new y(c.selection,this.down,c.ignore))}}catch(d){l.e(d)}finally{l.f()}t.pushUndoStop(),t.executeCommands(this.id,u),t.pushUndoStop()}}}]),n}(c.R6),O=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,!1,{id:"editor.action.copyLinesUpAction",label:D.NC("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:b.u.writable,kbOpts:{kbExpr:b.u.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:P.eH.MenubarSelectionMenu,group:"2_line",title:D.NC({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}return(0,o.Z)(n)}(M),A=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,!0,{id:"editor.action.copyLinesDownAction",label:D.NC("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:b.u.writable,kbOpts:{kbExpr:b.u.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:P.eH.MenubarSelectionMenu,group:"2_line",title:D.NC({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}return(0,o.Z)(n)}(M),E=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.duplicateSelection",label:D.NC("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:b.u.writable,menuOpts:{menuId:P.eH.MenubarSelectionMenu,group:"2_line",title:D.NC({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}return(0,o.Z)(n,[{key:"run",value:function(e,t,n){if(t.hasModel()){var r,o=[],a=t.getSelections(),s=t.getModel(),u=(0,i.Z)(a);try{for(u.s();!(r=u.n()).done;){var l=r.value;if(l.isEmpty())o.push(new y(l,!0));else{var c=new m.Y(l.endLineNumber,l.endColumn,l.endLineNumber,l.endColumn);o.push(new d.OY(c,s.getValueInRange(l)))}}}catch(h){u.e(h)}finally{u.f()}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}}]),n}(c.R6),V=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,i){var o;return(0,r.Z)(this,n),(o=t.call(this,i)).down=e,o}return(0,o.Z)(n,[{key:"run",value:function(e,t){var n,r=e.get(w.c_),o=[],a=t.getSelections()||[],s=t.getOption(12),u=(0,i.Z)(a);try{for(u.s();!(n=u.n()).done;){var l=n.value;o.push(new N(l,this.down,s,r))}}catch(c){u.e(c)}finally{u.f()}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}]),n}(c.R6),H=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,!1,{id:"editor.action.moveLinesUpAction",label:D.NC("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:b.u.writable,kbOpts:{kbExpr:b.u.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:P.eH.MenubarSelectionMenu,group:"2_line",title:D.NC({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}return(0,o.Z)(n)}(V),U=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,!0,{id:"editor.action.moveLinesDownAction",label:D.NC("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:b.u.writable,kbOpts:{kbExpr:b.u.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:P.eH.MenubarSelectionMenu,group:"2_line",title:D.NC({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}return(0,o.Z)(n)}(V),W=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,i){var o;return(0,r.Z)(this,n),(o=t.call(this,i)).descending=e,o}return(0,o.Z)(n,[{key:"run",value:function(e,t){var n,r=t.getSelections()||[],o=(0,i.Z)(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(!T.canRun(t.getModel(),a,this.descending))return}}catch(c){o.e(c)}finally{o.f()}for(var s=[],u=0,l=r.length;u<l;u++)s[u]=new T(r[u],this.descending);t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}]),n}(c.R6),F=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,!1,{id:"editor.action.sortLinesAscending",label:D.NC("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:b.u.writable})}return(0,o.Z)(n)}(W),K=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,!0,{id:"editor.action.sortLinesDescending",label:D.NC("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:b.u.writable})}return(0,o.Z)(n)}(W),B=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.removeDuplicateLines",label:D.NC("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:b.u.writable})}return(0,o.Z)(n,[{key:"run",value:function(e,t){if(t.hasModel()){var n=t.getModel();if(1!==n.getLineCount()||1!==n.getLineMaxColumn(1)){var r,o=[],a=[],s=0,u=(0,i.Z)(t.getSelections());try{for(u.s();!(r=u.n()).done;){for(var l=r.value,c=new Set,d=[],h=l.startLineNumber;h<=l.endLineNumber;h++){var g=n.getLineContent(h);c.has(g)||(d.push(g),c.add(g))}var v=new m.Y(l.startLineNumber,1,l.endLineNumber,n.getLineMaxColumn(l.endLineNumber)),p=l.startLineNumber-s,b=new m.Y(p,1,p+d.length-1,d[d.length-1].length);o.push(f.h.replace(v,d.join("\n"))),a.push(b),s+=l.endLineNumber-l.startLineNumber+1-d.length}}catch(y){u.e(y)}finally{u.f()}t.pushUndoStop(),t.executeEdits(this.id,o,a),t.pushUndoStop()}}}}]),n}(c.R6),q=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:n.ID,label:D.NC("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:b.u.writable,kbOpts:{kbExpr:b.u.editorTextFocus,primary:(0,u.gx)(2089,2102),weight:100}})}return(0,o.Z)(n,[{key:"run",value:function(e,t,n){var i=[];"auto-save"===n.reason&&(i=(t.getSelections()||[]).map((function(e){return new v.L(e.positionLineNumber,e.positionColumn)})));var r=t.getSelection();if(null!==r){var o=new h.V(r,i);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop()}}}]),n}(c.R6);q.ID="editor.action.trimTrailingWhitespace";var j=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.deleteLines",label:D.NC("lines.delete","Delete Line"),alias:"Delete Line",precondition:b.u.writable,kbOpts:{kbExpr:b.u.textInputFocus,primary:3113,weight:100}})}return(0,o.Z)(n,[{key:"run",value:function(e,t){if(t.hasModel()){var n=this._getLinesToRemove(t),i=t.getModel();if(1!==i.getLineCount()||1!==i.getLineMaxColumn(1)){for(var r=0,o=[],a=[],s=0,u=n.length;s<u;s++){var l=n[s],c=l.startLineNumber,d=l.endLineNumber,h=1,g=i.getLineMaxColumn(d);d<i.getLineCount()?(d+=1,g=1):c>1&&(c-=1,h=i.getLineMaxColumn(c)),o.push(f.h.replace(new m.Y(c,h,d,g),"")),a.push(new m.Y(c-r,l.positionColumn,c-r,l.positionColumn)),r+=l.endLineNumber-l.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,o,a),t.pushUndoStop()}}}},{key:"_getLinesToRemove",value:function(e){var t=e.getSelections().map((function(e){var t=e.endLineNumber;return e.startLineNumber<e.endLineNumber&&1===e.endColumn&&(t-=1),{startLineNumber:e.startLineNumber,selectionStartColumn:e.selectionStartColumn,endLineNumber:t,positionColumn:e.positionColumn}}));t.sort((function(e,t){return e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber}));for(var n=[],i=t[0],r=1;r<t.length;r++)i.endLineNumber+1>=t[r].startLineNumber?i.endLineNumber=t[r].endLineNumber:(n.push(i),i=t[r]);return n.push(i),n}}]),n}(c.R6),Y=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.indentLines",label:D.NC("lines.indent","Indent Line"),alias:"Indent Line",precondition:b.u.writable,kbOpts:{kbExpr:b.u.editorTextFocus,primary:2142,weight:100}})}return(0,o.Z)(n,[{key:"run",value:function(e,t){var n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,g.u6.indent(n.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}]),n}(c.R6),z=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.outdentLines",label:D.NC("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:b.u.writable,kbOpts:{kbExpr:b.u.editorTextFocus,primary:2140,weight:100}})}return(0,o.Z)(n,[{key:"run",value:function(e,t){l.CoreEditingCommands.Outdent.runEditorCommand(e,t,null)}}]),n}(c.R6),Q=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.insertLineBefore",label:D.NC("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:b.u.writable,kbOpts:{kbExpr:b.u.editorTextFocus,primary:3075,weight:100}})}return(0,o.Z)(n,[{key:"run",value:function(e,t){var n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,g.u6.lineInsertBefore(n.cursorConfig,t.getModel(),t.getSelections())))}}]),n}(c.R6),G=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.insertLineAfter",label:D.NC("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:b.u.writable,kbOpts:{kbExpr:b.u.editorTextFocus,primary:2051,weight:100}})}return(0,o.Z)(n,[{key:"run",value:function(e,t){var n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,g.u6.lineInsertAfter(n.cursorConfig,t.getModel(),t.getSelections())))}}]),n}(c.R6),J=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"run",value:function(e,t){if(t.hasModel()){for(var n=t.getSelection(),i=this._getRangesToDelete(t),r=[],o=0,a=i.length-1;o<a;o++){var s=i[o],u=i[o+1];null===p.e.intersectRanges(s,u)?r.push(s):i[o+1]=p.e.plusRange(s,u)}r.push(i[i.length-1]);var l=this._getEndCursorState(n,r),c=r.map((function(e){return f.h.replace(e,"")}));t.pushUndoStop(),t.executeEdits(this.id,c,l),t.pushUndoStop()}}}]),n}(c.R6),$=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"deleteAllLeft",label:D.NC("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:b.u.writable,kbOpts:{kbExpr:b.u.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}return(0,o.Z)(n,[{key:"_getEndCursorState",value:function(e,t){var n=null,i=[],r=0;return t.forEach((function(t){var o;if(1===t.endColumn&&r>0){var a=t.startLineNumber-r;o=new m.Y(a,t.startColumn,a,t.startColumn)}else o=new m.Y(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn);r+=t.endLineNumber-t.startLineNumber,t.intersectRanges(e)?n=o:i.push(o)})),n&&i.unshift(n),i}},{key:"_getRangesToDelete",value:function(e){var t=e.getSelections();if(null===t)return[];var n=t,i=e.getModel();return null===i?[]:(n.sort(p.e.compareRangesUsingStarts),n=n.map((function(e){if(e.isEmpty()){if(1===e.startColumn){var t=Math.max(1,e.startLineNumber-1),n=1===e.startLineNumber?1:i.getLineLength(t)+1;return new p.e(t,n,e.startLineNumber,1)}return new p.e(e.startLineNumber,1,e.startLineNumber,e.startColumn)}return new p.e(e.startLineNumber,1,e.endLineNumber,e.endColumn)})))}}]),n}(J),X=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"deleteAllRight",label:D.NC("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:b.u.writable,kbOpts:{kbExpr:b.u.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}return(0,o.Z)(n,[{key:"_getEndCursorState",value:function(e,t){for(var n=null,i=[],r=0,o=t.length;r<o;r++){var a=t[r],s=new m.Y(a.startLineNumber-0,a.startColumn,a.startLineNumber-0,a.startColumn);a.intersectRanges(e)?n=s:i.push(s)}return n&&i.unshift(n),i}},{key:"_getRangesToDelete",value:function(e){var t=e.getModel();if(null===t)return[];var n=e.getSelections();if(null===n)return[];var i=n.map((function(e){if(e.isEmpty()){var n=t.getLineMaxColumn(e.startLineNumber);return e.startColumn===n?new p.e(e.startLineNumber,e.startColumn,e.startLineNumber+1,1):new p.e(e.startLineNumber,e.startColumn,e.startLineNumber,n)}return e}));return i.sort(p.e.compareRangesUsingStarts),i}}]),n}(J),ee=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.joinLines",label:D.NC("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:b.u.writable,kbOpts:{kbExpr:b.u.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}return(0,o.Z)(n,[{key:"run",value:function(e,t){var n=t.getSelections();if(null!==n){var i=t.getSelection();if(null!==i){n.sort(p.e.compareRangesUsingStarts);var r=[],o=n.reduce((function(e,t){return e.isEmpty()?e.endLineNumber===t.startLineNumber?(i.equalsSelection(e)&&(i=t),t):t.startLineNumber>e.endLineNumber+1?(r.push(e),t):new m.Y(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn):t.startLineNumber>e.endLineNumber?(r.push(e),t):new m.Y(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn)}));r.push(o);var a=t.getModel();if(null!==a){for(var s=[],u=[],l=i,c=0,d=0,h=r.length;d<h;d++){var g=r[d],v=g.startLineNumber,b=0,y=void 0,C=void 0,_=a.getLineLength(g.endLineNumber)-g.endColumn;if(g.isEmpty()||g.startLineNumber===g.endLineNumber){var x=g.getStartPosition();x.lineNumber<a.getLineCount()?(y=v+1,C=a.getLineMaxColumn(y)):(y=x.lineNumber,C=a.getLineMaxColumn(x.lineNumber))}else y=g.endLineNumber,C=a.getLineMaxColumn(y);for(var w=a.getLineContent(v),k=v+1;k<=y;k++){var S=a.getLineContent(k),L=a.getLineFirstNonWhitespaceColumn(k);if(L>=1){var Z=!0;""===w&&(Z=!1),!Z||" "!==w.charAt(w.length-1)&&"\t"!==w.charAt(w.length-1)||(Z=!1,w=w.replace(/[\s\uFEFF\xA0]+$/g," "));var I=S.substr(L-1);w+=(Z?" ":"")+I,b=Z?I.length+1:I.length}else b=0}var N=new p.e(v,1,y,C);if(!N.isEmpty()){var T=void 0;g.isEmpty()?(s.push(f.h.replace(N,w)),T=new m.Y(N.startLineNumber-c,w.length-b+1,v-c,w.length-b+1)):g.startLineNumber===g.endLineNumber?(s.push(f.h.replace(N,w)),T=new m.Y(g.startLineNumber-c,g.startColumn,g.endLineNumber-c,g.endColumn)):(s.push(f.h.replace(N,w)),T=new m.Y(g.startLineNumber-c,g.startColumn,g.startLineNumber-c,w.length-_)),null!==p.e.intersectRanges(N,i)?l=T:u.push(T)}c+=N.endLineNumber-N.startLineNumber}u.unshift(l),t.pushUndoStop(),t.executeEdits(this.id,s,u),t.pushUndoStop()}}}}}]),n}(c.R6),te=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.transpose",label:D.NC("editor.transpose","Transpose Characters around the Cursor"),alias:"Transpose Characters around the Cursor",precondition:b.u.writable})}return(0,o.Z)(n,[{key:"run",value:function(e,t){var n=t.getSelections();if(null!==n){var i=t.getModel();if(null!==i){for(var r=[],o=0,a=n.length;o<a;o++){var s=n[o];if(s.isEmpty()){var u=s.getStartPosition(),l=i.getLineMaxColumn(u.lineNumber);if(u.column>=l){if(u.lineNumber===i.getLineCount())continue;var c=new p.e(u.lineNumber,Math.max(1,u.column-1),u.lineNumber+1,1),h=i.getValueInRange(c).split("").reverse().join("");r.push(new d.T4(new m.Y(u.lineNumber,Math.max(1,u.column-1),u.lineNumber+1,1),h))}else{var g=new p.e(u.lineNumber,Math.max(1,u.column-1),u.lineNumber,u.column+1),f=i.getValueInRange(g).split("").reverse().join("");r.push(new d.hP(g,f,new m.Y(u.lineNumber,u.column+1,u.lineNumber,u.column+1)))}}}t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}}}]),n}(c.R6),ne=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"run",value:function(e,t){var n=t.getSelections();if(null!==n){var r=t.getModel();if(null!==r){var o,a=t.getOption(129),s=[],u=(0,i.Z)(n);try{for(u.s();!(o=u.n()).done;){var l=o.value;if(l.isEmpty()){var c=l.getStartPosition(),d=t.getConfiguredWordAtPosition(c);if(!d)continue;var h=new p.e(c.lineNumber,d.startColumn,c.lineNumber,d.endColumn),g=r.getValueInRange(h);s.push(f.h.replace(h,this._modifyText(g,a)))}else{var v=r.getValueInRange(l);s.push(f.h.replace(l,this._modifyText(v,a)))}}}catch(m){u.e(m)}finally{u.f()}t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop()}}}}]),n}(c.R6),ie=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.transformToUppercase",label:D.NC("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:b.u.writable})}return(0,o.Z)(n,[{key:"_modifyText",value:function(e,t){return e.toLocaleUpperCase()}}]),n}(ne),re=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.transformToLowercase",label:D.NC("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:b.u.writable})}return(0,o.Z)(n,[{key:"_modifyText",value:function(e,t){return e.toLocaleLowerCase()}}]),n}(ne),oe=function(){function e(t,n){(0,r.Z)(this,e),this._pattern=t,this._flags=n,this._actual=null,this._evaluated=!1}return(0,o.Z)(e,[{key:"get",value:function(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch(e){}}return this._actual}},{key:"isSupported",value:function(){return null!==this.get()}}]),e}(),ae=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.transformToTitlecase",label:D.NC("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:b.u.writable})}return(0,o.Z)(n,[{key:"_modifyText",value:function(e,t){var i=n.titleBoundary.get();return i?e.toLocaleLowerCase().replace(i,(function(e){return e.toLocaleUpperCase()})):e}}]),n}(ne);ae.titleBoundary=new oe("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");var se=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.transformToSnakecase",label:D.NC("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:b.u.writable})}return(0,o.Z)(n,[{key:"_modifyText",value:function(e,t){var i=n.caseBoundary.get(),r=n.singleLetters.get();return i&&r?e.replace(i,"$1_$2").replace(r,"$1_$2$3").toLocaleLowerCase():e}}]),n}(ne);se.caseBoundary=new oe("(\\p{Ll})(\\p{Lu})","gmu"),se.singleLetters=new oe("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");var ue=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.transformToCamelcase",label:D.NC("editor.transformToCamelcase","Transform to Camel Case"),alias:"Transform to Camel Case",precondition:b.u.writable})}return(0,o.Z)(n,[{key:"_modifyText",value:function(e,t){var i=n.wordBoundary.get();if(!i)return e;var r=e.split(i);return r.shift()+r.map((function(e){return e.substring(0,1).toLocaleUpperCase()+e.substring(1)})).join("")}}]),n}(ne);ue.wordBoundary=new oe("[_\\s-]","gm");var le=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.transformToKebabcase",label:D.NC("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:b.u.writable})}return(0,o.Z)(n,[{key:"_modifyText",value:function(e,t){var i=n.caseBoundary.get(),r=n.singleLetters.get(),o=n.underscoreBoundary.get();return i&&r&&o?e.replace(o,"$1-$3").replace(i,"$1-$2").replace(r,"$1-$2").toLocaleLowerCase():e}}],[{key:"isSupported",value:function(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every((function(e){return e.isSupported()}))}}]),n}(ne);le.caseBoundary=new oe("(\\p{Ll})(\\p{Lu})","gmu"),le.singleLetters=new oe("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu"),le.underscoreBoundary=new oe("(\\S)(_)(\\S)","gm"),(0,c.Qr)(O),(0,c.Qr)(A),(0,c.Qr)(E),(0,c.Qr)(H),(0,c.Qr)(U),(0,c.Qr)(F),(0,c.Qr)(K),(0,c.Qr)(B),(0,c.Qr)(q),(0,c.Qr)(j),(0,c.Qr)(Y),(0,c.Qr)(z),(0,c.Qr)(Q),(0,c.Qr)(G),(0,c.Qr)($),(0,c.Qr)(X),(0,c.Qr)(ee),(0,c.Qr)(te),(0,c.Qr)(ie),(0,c.Qr)(re),se.caseBoundary.isSupported()&&se.singleLetters.isSupported()&&(0,c.Qr)(se),ue.wordBoundary.isSupported()&&(0,c.Qr)(ue),ae.titleBoundary.isSupported()&&(0,c.Qr)(ae),le.isSupported()&&(0,c.Qr)(le)},42021:function(e,t,n){n.r(t),n.d(t,{CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE:function(){return E},LinkedEditingAction:function(){return H},LinkedEditingContribution:function(){return V},editorLinkedEditingBackground:function(){return F}});var i,r=n(29439),o=n(74165),a=n(15671),s=n(43144),u=n(11752),l=n(61120),c=n(60136),d=n(27277),h=n(38102),g=n(71049),f=n(7388),v=n(40476),p=n(74146),m=n(13880),b=n(65096),y=n(31906),C=n(38821),_=n(95253),x=n(76257),w=n(65631),k=n(17429),S=n(98926),L=n(78519),Z=n(19536),I=n(18420),N=n(8022),T=n(65441),R=n(43980),D=n(68200),P=n(48497),M=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},O=function(e,t){return function(n,i){t(n,i,e)}},A=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},E=new N.uy("LinkedEditingInputVisible",!1),V=i=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e,i,r,o,s){var u;return(0,a.Z)(this,n),(u=t.call(this)).languageConfigurationService=o,u._syncRangesToken=0,u._localToDispose=u._register(new b.SL),u._editor=e,u._providers=r.linkedEditingRangeProvider,u._enabled=!1,u._visibleContextKey=E.bindTo(i),u._debounceInformation=s.for(u._providers,"Linked Editing",{max:200}),u._currentDecorations=u._editor.createDecorationsCollection(),u._languageWordPattern=null,u._currentWordPattern=null,u._ignoreChangeEvent=!1,u._localToDispose=u._register(new b.SL),u._rangeUpdateTriggerPromise=null,u._rangeSyncTriggerPromise=null,u._currentRequest=null,u._currentRequestPosition=null,u._currentRequestModelVersion=null,u._register(u._editor.onDidChangeModel((function(){return u.reinitialize(!0)}))),u._register(u._editor.onDidChangeConfiguration((function(e){(e.hasChanged(69)||e.hasChanged(92))&&u.reinitialize(!1)}))),u._register(u._providers.onDidChange((function(){return u.reinitialize(!1)}))),u._register(u._editor.onDidChangeModelLanguage((function(){return u.reinitialize(!0)}))),u.reinitialize(!0),u}return(0,s.Z)(n,[{key:"reinitialize",value:function(e){var t=this,n=this._editor.getModel(),i=null!==n&&(this._editor.getOption(69)||this._editor.getOption(92))&&this._providers.has(n);if((i!==this._enabled||e)&&(this._enabled=i,this.clearRanges(),this._localToDispose.clear(),i&&null!==n)){this._localToDispose.add(m.ju.runAndSubscribe(n.onDidChangeLanguageConfiguration,(function(){t._languageWordPattern=t.languageConfigurationService.getLanguageConfiguration(n.getLanguageId()).getWordDefinition()})));var r=new g.vp(this._debounceInformation.get(n)),o=function(){var e;t._rangeUpdateTriggerPromise=r.trigger((function(){return t.updateRanges()}),null!==(e=t._debounceDuration)&&void 0!==e?e:t._debounceInformation.get(n))},a=new g.vp(0);this._localToDispose.add(this._editor.onDidChangeCursorPosition((function(){o()}))),this._localToDispose.add(this._editor.onDidChangeModelContent((function(e){if(!t._ignoreChangeEvent&&t._currentDecorations.length>0){var n=t._currentDecorations.getRange(0);if(n&&e.changes.every((function(e){return n.intersectRanges(e.range)})))return i=t._syncRangesToken,void(t._rangeSyncTriggerPromise=a.trigger((function(){return t._syncRanges(i)})))}var i;o()}))),this._localToDispose.add({dispose:function(){r.dispose(),a.dispose()}}),this.updateRanges()}}},{key:"_syncRanges",value:function(e){if(this._editor.hasModel()&&e===this._syncRangesToken&&0!==this._currentDecorations.length){var t=this._editor.getModel(),n=this._currentDecorations.getRange(0);if(!n||n.startLineNumber!==n.endLineNumber)return this.clearRanges();var i=t.getValueInRange(n);if(this._currentWordPattern){var r=i.match(this._currentWordPattern);if((r?r[0].length:0)!==i.length)return this.clearRanges()}for(var o=[],a=1,s=this._currentDecorations.length;a<s;a++){var u=this._currentDecorations.getRange(a);if(u)if(u.startLineNumber!==u.endLineNumber)o.push({range:u,text:i});else{var l=t.getValueInRange(u),c=i,d=u.startColumn,h=u.endColumn,g=y.Mh(l,c);d+=g,l=l.substr(g),c=c.substr(g);var f=y.P1(l,c);h-=f,l=l.substr(0,l.length-f),c=c.substr(0,c.length-f),d===h&&0===c.length||o.push({range:new k.e(u.startLineNumber,d,u.endLineNumber,h),text:c})}}if(0!==o.length)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;var v=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",o),this._editor._getViewModel().setPrevEditOperationType(v)}finally{this._ignoreChangeEvent=!1}}}},{key:"dispose",value:function(){this.clearRanges(),(0,u.Z)((0,l.Z)(n.prototype),"dispose",this).call(this)}},{key:"clearRanges",value:function(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}},{key:"updateRanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return A(this,void 0,void 0,(0,o.Z)().mark((function t(){var n,r,a,s,u,l=this;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._editor.hasModel()){t.next=3;break}return this.clearRanges(),t.abrupt("return");case 3:if(n=this._editor.getPosition(),!(!this._enabled&&!e||this._editor.getSelections().length>1)){t.next=7;break}return this.clearRanges(),t.abrupt("return");case 7:if(r=this._editor.getModel(),a=r.getVersionId(),!this._currentRequestPosition||this._currentRequestModelVersion!==a){t.next=16;break}if(!n.equals(this._currentRequestPosition)){t.next=12;break}return t.abrupt("return");case 12:if(!(this._currentDecorations.length>0)){t.next=16;break}if(!(s=this._currentDecorations.getRange(0))||!s.containsPosition(n)){t.next=16;break}return t.abrupt("return");case 16:return this.clearRanges(),this._currentRequestPosition=n,this._currentRequestModelVersion=a,u=(0,g.PG)((function(e){return A(l,void 0,void 0,(0,o.Z)().mark((function t(){var s,l,c,d,h,g,f,v;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=new P.G(!1),t.next=4,W(this._providers,r,n,e);case 4:if(l=t.sent,this._debounceInformation.update(r,s.elapsed()),u===this._currentRequest){t.next=8;break}return t.abrupt("return");case 8:if(this._currentRequest=null,a===r.getVersionId()){t.next=11;break}return t.abrupt("return");case 11:c=[],(null===l||void 0===l?void 0:l.ranges)&&(c=l.ranges),this._currentWordPattern=(null===l||void 0===l?void 0:l.wordPattern)||this._languageWordPattern,d=!1,h=0,g=c.length;case 16:if(!(h<g)){t.next=24;break}if(!k.e.containsPosition(c[h],n)){t.next=21;break}return d=!0,0!==h&&(f=c[h],c.splice(h,1),c.unshift(f)),t.abrupt("break",24);case 21:h++,t.next=16;break;case 24:if(d){t.next=27;break}return this.clearRanges(),t.abrupt("return");case 27:v=c.map((function(e){return{range:e,options:i.DECORATION}})),this._visibleContextKey.set(!0),this._currentDecorations.set(v),this._syncRangesToken++,t.next=37;break;case 33:t.prev=33,t.t0=t.catch(0),(0,p.n2)(t.t0)||(0,p.dL)(t.t0),this._currentRequest!==u&&this._currentRequest||this.clearRanges();case 37:case"end":return t.stop()}}),t,this,[[0,33]])})))})),this._currentRequest=u,t.abrupt("return",u);case 22:case"end":return t.stop()}}),t,this)})))}}],[{key:"get",value:function(e){return e.getContribution(i.ID)}}]),n}(b.JT);V.ID="editor.contrib.linkedEditing",V.DECORATION=L.qx.register({description:"linked-editing",stickiness:0,className:"linked-editing-decoration"}),V=i=M([O(1,N.i6),O(2,T.p),O(3,Z.c_),O(4,D.A)],V);var H=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"editor.action.linkedEditing",label:I.NC("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:N.Ao.and(S.u.writable,S.u.hasRenameProvider),kbOpts:{kbExpr:S.u.editorTextFocus,primary:3132,weight:100}})}return(0,s.Z)(n,[{key:"runCommand",value:function(e,t){var i=this,o=e.get(x.$),a=Array.isArray(t)&&t||[void 0,void 0],s=(0,r.Z)(a,2),c=s[0],d=s[1];return C.o.isUri(c)&&w.L.isIPosition(d)?o.openCodeEditor({resource:c},o.getActiveCodeEditor()).then((function(e){e&&(e.setPosition(d),e.invokeWithinContext((function(t){return i.reportTelemetry(t,e),i.run(t,e)})))}),p.dL):(0,u.Z)((0,l.Z)(n.prototype),"runCommand",this).call(this,e,t)}},{key:"run",value:function(e,t){var n=V.get(t);return n?Promise.resolve(n.updateRanges(!0)):Promise.resolve()}}]),n}(_.R6),U=_._l.bindToContribution(V.get);function W(e,t,n,i){var r=this,a=e.ordered(t);return(0,g.Ps)(a.map((function(e){return function(){return A(r,void 0,void 0,(0,o.Z)().mark((function r(){return(0,o.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.provideLinkedEditingRanges(t,n,i);case 3:return r.abrupt("return",r.sent);case 6:return r.prev=6,r.t0=r.catch(0),(0,p.Cp)(r.t0),r.abrupt("return",void 0);case 10:case"end":return r.stop()}}),r,null,[[0,6]])})))}})),(function(e){return!!e&&h.Of(null===e||void 0===e?void 0:e.ranges)}))}(0,_.fK)(new U({id:"cancelLinkedEditingInput",precondition:E,handler:function(e){return e.clearRanges()},kbOpts:{kbExpr:S.u.editorTextFocus,weight:199,primary:9,secondary:[1033]}}));var F=(0,R.P6G)("editor.linkedEditingBackground",{dark:v.Il.fromHex("#f00").transparent(.3),light:v.Il.fromHex("#f00").transparent(.3),hcDark:v.Il.fromHex("#f00").transparent(.3),hcLight:v.Il.white},I.NC("editorLinkedEditingBackground","Background color when the editor auto renames on type."));(0,_.sb)("_executeLinkedEditingProvider",(function(e,t,n){return W(e.get(T.p).linkedEditingRangeProvider,t,n,f.T.None)})),(0,_._K)(V.ID,V,1),(0,_.Qr)(H)},42057:function(e,t,n){n.r(t),n.d(t,{LinkDetector:function(){return K}});var i=n(37762),r=n(74165),o=n(29439),a=n(15671),s=n(43144),u=n(11752),l=n(61120),c=n(60136),d=n(27277),h=n(71049),g=n(7388),f=n(74146),v=n(71047),p=n(65096),m=n(37649),b=n(90650),y=n(44641),C=n(48497),_=n(38821),x=n(95253),w=n(78519),k=n(68200),S=n(65441),L=n(64124),Z=n(38102),I=n(63021),N=n(17429),T=n(26246),R=n(99740),D=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},P=function(){function e(t,n){(0,a.Z)(this,e),this._link=t,this._provider=n}return(0,s.Z)(e,[{key:"toJSON",value:function(){return{range:this.range,url:this.url,tooltip:this.tooltip}}},{key:"range",get:function(){return this._link.range}},{key:"url",get:function(){return this._link.url}},{key:"tooltip",get:function(){return this._link.tooltip}},{key:"resolve",value:function(e){return D(this,void 0,void 0,(0,r.Z)().mark((function t(){var n=this;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._link.url){t.next=2;break}return t.abrupt("return",this._link.url);case 2:if("function"!==typeof this._provider.resolveLink){t.next=4;break}return t.abrupt("return",Promise.resolve(this._provider.resolveLink(this._link,e)).then((function(t){return n._link=t||n._link,n._link.url?n.resolve(e):Promise.reject(new Error("missing"))})));case 4:return t.abrupt("return",Promise.reject(new Error("missing")));case 5:case"end":return t.stop()}}),t,this)})))}}]),e}(),M=function(){function e(t){var n=this;(0,a.Z)(this,e),this._disposables=new p.SL;var r,s=[],u=(0,i.Z)(t);try{var l=function(){var t=(0,o.Z)(r.value,2),i=t[0],a=t[1],u=i.links.map((function(e){return new P(e,a)}));s=e._union(s,u),(0,p.Wf)(i)&&n._disposables.add(i)};for(u.s();!(r=u.n()).done;)l()}catch(c){u.e(c)}finally{u.f()}this.links=s}return(0,s.Z)(e,[{key:"dispose",value:function(){this._disposables.dispose(),this.links.length=0}}],[{key:"_union",value:function(e,t){var n,i,r,o,a=[];for(n=0,r=0,i=e.length,o=t.length;n<i&&r<o;){var s=e[n],u=t[r];if(N.e.areIntersectingOrTouching(s.range,u.range))n++;else N.e.compareRangesUsingStarts(s.range,u.range)<0?(a.push(s),n++):(a.push(u),r++)}for(;n<i;n++)a.push(e[n]);for(;r<o;r++)a.push(t[r]);return a}}]),e}();function O(e,t,n){var i=[],r=e.ordered(t).reverse().map((function(e,r){return Promise.resolve(e.provideLinks(t,n)).then((function(t){t&&(i[r]=[t,e])}),f.Cp)}));return Promise.all(r).then((function(){var e=new M((0,Z.kX)(i));return n.isCancellationRequested?(e.dispose(),new M([])):e}))}R.P.registerCommand("_executeLinkProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return D(void 0,void 0,void 0,(0,r.Z)().mark((function t(){var i,o,a,s,u,l,c,d;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n[0],o=n[1],(0,I.p_)(i instanceof _.o),"number"!==typeof o&&(o=0),a=e.get(S.p),s=a.linkProvider,u=e.get(T.q).getModel(i)){t.next=7;break}return t.abrupt("return",[]);case 7:return t.next=9,O(s,u,g.T.None);case 9:if(l=t.sent){t.next=12;break}return t.abrupt("return",[]);case 12:c=0;case 13:if(!(c<Math.min(o,l.links.length))){t.next=19;break}return t.next=16,l.links[c].resolve(g.T.None);case 16:c++,t.next=13;break;case 19:return d=l.links.slice(0),l.dispose(),t.abrupt("return",d);case 22:case"end":return t.stop()}}),t)})))}));var A,E=n(18420),V=n(49431),H=n(51713),U=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},W=function(e,t){return function(n,i){t(n,i,e)}},F=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},K=A=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e,i,r,s,u){var l;(0,a.Z)(this,n),(l=t.call(this)).editor=e,l.openerService=i,l.notificationService=r,l.languageFeaturesService=s,l.providers=l.languageFeaturesService.linkProvider,l.debounceInformation=u.for(l.providers,"Links",{min:1e3,max:4e3}),l.computeLinks=l._register(new h.pY((function(){return l.computeLinksNow()}),1e3)),l.computePromise=null,l.activeLinksList=null,l.currentOccurrences={},l.activeLinkDecorationId=null;var c=l._register(new L.yN(e));return l._register(c.onMouseMoveOrRelevantKeyDown((function(e){var t=(0,o.Z)(e,2),n=t[0],i=t[1];l._onEditorMouseMove(n,i)}))),l._register(c.onExecute((function(e){l.onEditorMouseUp(e)}))),l._register(c.onCancel((function(e){l.cleanUpActiveLinkDecoration()}))),l._register(e.onDidChangeConfiguration((function(e){e.hasChanged(70)&&(l.updateDecorations([]),l.stop(),l.computeLinks.schedule(0))}))),l._register(e.onDidChangeModelContent((function(e){l.editor.hasModel()&&l.computeLinks.schedule(l.debounceInformation.get(l.editor.getModel()))}))),l._register(e.onDidChangeModel((function(e){l.currentOccurrences={},l.activeLinkDecorationId=null,l.stop(),l.computeLinks.schedule(0)}))),l._register(e.onDidChangeModelLanguage((function(e){l.stop(),l.computeLinks.schedule(0)}))),l._register(l.providers.onDidChange((function(e){l.stop(),l.computeLinks.schedule(0)}))),l.computeLinks.schedule(0),l}return(0,s.Z)(n,[{key:"computeLinksNow",value:function(){return F(this,void 0,void 0,(0,r.Z)().mark((function e(){var t,n,i=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.editor.hasModel()&&this.editor.getOption(70)){e.next=2;break}return e.abrupt("return");case 2:if(!(t=this.editor.getModel()).isTooLargeForSyncing()){e.next=5;break}return e.abrupt("return");case 5:if(this.providers.has(t)){e.next=7;break}return e.abrupt("return");case 7:return this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=(0,h.PG)((function(e){return O(i.providers,t,e)})),e.prev=9,n=new C.G(!1),e.next=13,this.computePromise;case 13:if(this.activeLinksList=e.sent,this.debounceInformation.update(t,n.elapsed()),!t.isDisposed()){e.next=17;break}return e.abrupt("return");case 17:this.updateDecorations(this.activeLinksList.links),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),(0,f.dL)(e.t0);case 23:return e.prev=23,this.computePromise=null,e.finish(23);case 26:case"end":return e.stop()}}),e,this,[[9,20,23,26]])})))}},{key:"updateDecorations",value:function(e){for(var t=this,n="altKey"===this.editor.getOption(77),r=[],o=0,a=Object.keys(this.currentOccurrences);o<a.length;o++){var s=a[o],u=this.currentOccurrences[s];r.push(u.decorationId)}var l=[];if(e){var c,d=(0,i.Z)(e);try{for(d.s();!(c=d.n()).done;){var h=c.value;l.push(q.decoration(h,n))}}catch(g){d.e(g)}finally{d.f()}}this.editor.changeDecorations((function(n){var i=n.deltaDecorations(r,l);t.currentOccurrences={},t.activeLinkDecorationId=null;for(var o=0,a=i.length;o<a;o++){var s=new q(e[o],i[o]);t.currentOccurrences[s.decorationId]=s}}))}},{key:"_onEditorMouseMove",value:function(e,t){var n=this,i="altKey"===this.editor.getOption(77);if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();var r=this.getLinkOccurrence(e.target.position);r&&this.editor.changeDecorations((function(e){r.activate(e,i),n.activeLinkDecorationId=r.decorationId}))}else this.cleanUpActiveLinkDecoration()}},{key:"cleanUpActiveLinkDecoration",value:function(){var e="altKey"===this.editor.getOption(77);if(this.activeLinkDecorationId){var t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations((function(n){t.deactivate(n,e)})),this.activeLinkDecorationId=null}}},{key:"onEditorMouseUp",value:function(e){if(this.isEnabled(e)){var t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}}},{key:"openLinkOccurrence",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.openerService){var r=e.link;r.resolve(g.T.None).then((function(e){if("string"===typeof e&&n.editor.hasModel()){var r=n.editor.getModel().uri;if(r.scheme===m.lg.file&&e.startsWith("".concat(m.lg.file,":"))){var o=_.o.parse(e);if(o.scheme===m.lg.file){var a=y.z_(o),s=null;a.startsWith("/./")?s=".".concat(a.substr(1)):a.startsWith("//./")&&(s=".".concat(a.substr(2))),s&&(e=y.Vo(r,s))}}}return n.openerService.open(e,{openToSide:t,fromUserGesture:i,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})}),(function(e){var t=e instanceof Error?e.message:e;"invalid"===t?n.notificationService.warn(E.NC("invalid.url","Failed to open this link because it is not well-formed: {0}",r.url.toString())):"missing"===t?n.notificationService.warn(E.NC("missing.url","Failed to open this link because its target is missing.")):(0,f.dL)(e)}))}}},{key:"getLinkOccurrence",value:function(e){if(!this.editor.hasModel()||!e)return null;var t,n=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0),r=(0,i.Z)(n);try{for(r.s();!(t=r.n()).done;){var o=t.value,a=this.currentOccurrences[o.id];if(a)return a}}catch(s){r.e(s)}finally{r.f()}return null}},{key:"isEnabled",value:function(e,t){return Boolean(6===e.target.type&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}},{key:"stop",value:function(){var e;this.computeLinks.cancel(),this.activeLinksList&&(null===(e=this.activeLinksList)||void 0===e||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}},{key:"dispose",value:function(){(0,u.Z)((0,l.Z)(n.prototype),"dispose",this).call(this),this.stop()}}],[{key:"get",value:function(e){return e.getContribution(A.ID)}}]),n}(p.JT);K.ID="editor.linkDetector",K=A=U([W(1,H.v4),W(2,V.lT),W(3,S.p),W(4,k.A)],K);var B={general:w.qx.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:w.qx.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})},q=function(){function e(t,n){(0,a.Z)(this,e),this.link=t,this.decorationId=n}return(0,s.Z)(e,[{key:"activate",value:function(t,n){t.changeDecorationOptions(this.decorationId,e._getOptions(this.link,n,!0))}},{key:"deactivate",value:function(t,n){t.changeDecorationOptions(this.decorationId,e._getOptions(this.link,n,!1))}}],[{key:"decoration",value:function(t,n){return{range:t.range,options:e._getOptions(t,n,!1)}}},{key:"_getOptions",value:function(e,t,n){var i=Object.assign({},n?B.active:B.general);return i.hoverMessage=function(e,t){var n=e.url&&/^command:/i.test(e.url.toString()),i=e.tooltip?e.tooltip:n?E.NC("links.navigate.executeCmd","Execute command"):E.NC("links.navigate.follow","Follow link"),r=t?b.dz?E.NC("links.navigate.kb.meta.mac","cmd + click"):E.NC("links.navigate.kb.meta","ctrl + click"):b.dz?E.NC("links.navigate.kb.alt.mac","option + click"):E.NC("links.navigate.kb.alt","alt + click");if(e.url){var o="";if(/^command:/i.test(e.url.toString())){var a=e.url.toString().match(/^command:([^?#]+)/);if(a){var s=a[1];o=E.NC("tooltip.explanation","Execute command {0}",s)}}return new v.W5("",!0).appendLink(e.url.toString(!0).replace(/ /g,"%20"),i,o).appendMarkdown(" (".concat(r,")"))}return(new v.W5).appendText("".concat(i," (").concat(r,")"))}(e,t),i}}]),e}();var j=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"editor.action.openLink",label:E.NC("label","Open Link"),alias:"Open Link",precondition:void 0})}return(0,s.Z)(n,[{key:"run",value:function(e,t){var n=K.get(t);if(n&&t.hasModel()){var r,o=t.getSelections(),a=(0,i.Z)(o);try{for(a.s();!(r=a.n()).done;){var s=r.value,u=n.getLinkOccurrence(s.getEndPosition());u&&n.openLinkOccurrence(u,!1)}}catch(l){a.e(l)}finally{a.f()}}}}]),n}(x.R6);(0,x._K)(K.ID,K,1),(0,x.Qr)(j)}}]);
//# sourceMappingURL=monaco-editor-vendor.d4d9fc54.864158b9.js.map