{"version":3,"file":"static/js/monaco-editor-vendor.1c73ed31.3c10855f.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/contrib/markdownRenderer/browser/markdownRenderer.js","../node_modules/monaco-editor/esm/vs/editor/contrib/message/browser/messageController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/multicursor/browser/multicursor.js","../node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/provideSignatureHelp.js","../node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHintsModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHintsWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHints.js","../node_modules/monaco-editor/esm/vs/editor/contrib/peekView/browser/peekView.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar _a;\nimport { renderMarkdown } from '../../../../base/browser/markdownRenderer.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { tokenizeToString } from '../../../common/languages/textToHtmlTokenizer.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { applyFontInfo } from '../../../browser/config/domFontInfo.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../common/languages/modesRegistry.js';\n/**\n * Markdown renderer that can render codeblocks with the editor mechanics. This\n * renderer should always be preferred.\n */\nlet MarkdownRenderer = class MarkdownRenderer {\n    constructor(_options, _languageService, _openerService) {\n        this._options = _options;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this._onDidRenderAsync = new Emitter();\n        this.onDidRenderAsync = this._onDidRenderAsync.event;\n    }\n    dispose() {\n        this._onDidRenderAsync.dispose();\n    }\n    render(markdown, options, markedOptions) {\n        if (!markdown) {\n            const element = document.createElement('span');\n            return { element, dispose: () => { } };\n        }\n        const disposables = new DisposableStore();\n        const rendered = disposables.add(renderMarkdown(markdown, Object.assign(Object.assign({}, this._getRenderOptions(markdown, disposables)), options), markedOptions));\n        return {\n            element: rendered.element,\n            dispose: () => disposables.dispose()\n        };\n    }\n    _getRenderOptions(markdown, disposables) {\n        return {\n            codeBlockRenderer: (languageAlias, value) => __awaiter(this, void 0, void 0, function* () {\n                var _a, _b, _c;\n                // In markdown,\n                // it is possible that we stumble upon language aliases (e.g.js instead of javascript)\n                // it is possible no alias is given in which case we fall back to the current editor lang\n                let languageId;\n                if (languageAlias) {\n                    languageId = this._languageService.getLanguageIdByLanguageName(languageAlias);\n                }\n                else if (this._options.editor) {\n                    languageId = (_a = this._options.editor.getModel()) === null || _a === void 0 ? void 0 : _a.getLanguageId();\n                }\n                if (!languageId) {\n                    languageId = PLAINTEXT_LANGUAGE_ID;\n                }\n                const html = yield tokenizeToString(this._languageService, value, languageId);\n                const element = document.createElement('span');\n                element.innerHTML = ((_c = (_b = MarkdownRenderer._ttpTokenizer) === null || _b === void 0 ? void 0 : _b.createHTML(html)) !== null && _c !== void 0 ? _c : html);\n                // use \"good\" font\n                if (this._options.editor) {\n                    const fontInfo = this._options.editor.getOption(46 /* EditorOption.fontInfo */);\n                    applyFontInfo(element, fontInfo);\n                }\n                else if (this._options.codeBlockFontFamily) {\n                    element.style.fontFamily = this._options.codeBlockFontFamily;\n                }\n                if (this._options.codeBlockFontSize !== undefined) {\n                    element.style.fontSize = this._options.codeBlockFontSize;\n                }\n                return element;\n            }),\n            asyncRenderCallback: () => this._onDidRenderAsync.fire(),\n            actionHandler: {\n                callback: (content) => this._openerService.open(content, { fromUserGesture: true, allowContributedOpeners: true, allowCommands: markdown.isTrusted }).catch(onUnexpectedError),\n                disposables: disposables\n            }\n        };\n    }\n};\nMarkdownRenderer._ttpTokenizer = (_a = window.trustedTypes) === null || _a === void 0 ? void 0 : _a.createPolicy('tokenizeToString', {\n    createHTML(html) {\n        return html;\n    }\n});\nMarkdownRenderer = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService)\n], MarkdownRenderer);\nexport { MarkdownRenderer };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { TimeoutTimer } from '../../../../base/common/async.js';\nimport { DisposableStore, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport './messageController.css';\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet MessageController = class MessageController {\n    constructor(editor, contextKeyService) {\n        this._messageWidget = new MutableDisposable();\n        this._messageListeners = new DisposableStore();\n        this._editor = editor;\n        this._visible = MessageController.MESSAGE_VISIBLE.bindTo(contextKeyService);\n    }\n    static get(editor) {\n        return editor.getContribution(MessageController.ID);\n    }\n    dispose() {\n        this._messageListeners.dispose();\n        this._messageWidget.dispose();\n        this._visible.reset();\n    }\n    showMessage(message, position) {\n        alert(message);\n        this._visible.set(true);\n        this._messageWidget.clear();\n        this._messageListeners.clear();\n        this._messageWidget.value = new MessageWidget(this._editor, position, message);\n        // close on blur, cursor, model change, dispose\n        this._messageListeners.add(this._editor.onDidBlurEditorText(() => this.closeMessage()));\n        this._messageListeners.add(this._editor.onDidChangeCursorPosition(() => this.closeMessage()));\n        this._messageListeners.add(this._editor.onDidDispose(() => this.closeMessage()));\n        this._messageListeners.add(this._editor.onDidChangeModel(() => this.closeMessage()));\n        // 3sec\n        this._messageListeners.add(new TimeoutTimer(() => this.closeMessage(), 3000));\n        // close on mouse move\n        let bounds;\n        this._messageListeners.add(this._editor.onMouseMove(e => {\n            // outside the text area\n            if (!e.target.position) {\n                return;\n            }\n            if (!bounds) {\n                // define bounding box around position and first mouse occurance\n                bounds = new Range(position.lineNumber - 3, 1, e.target.position.lineNumber + 3, 1);\n            }\n            else if (!bounds.containsPosition(e.target.position)) {\n                // check if position is still in bounds\n                this.closeMessage();\n            }\n        }));\n    }\n    closeMessage() {\n        this._visible.reset();\n        this._messageListeners.clear();\n        if (this._messageWidget.value) {\n            this._messageListeners.add(MessageWidget.fadeOut(this._messageWidget.value));\n        }\n    }\n};\nMessageController.ID = 'editor.contrib.messageController';\nMessageController.MESSAGE_VISIBLE = new RawContextKey('messageVisible', false, nls.localize('messageVisible', 'Whether the editor is currently showing an inline message'));\nMessageController = __decorate([\n    __param(1, IContextKeyService)\n], MessageController);\nexport { MessageController };\nconst MessageCommand = EditorCommand.bindToContribution(MessageController.get);\nregisterEditorCommand(new MessageCommand({\n    id: 'leaveEditorMessage',\n    precondition: MessageController.MESSAGE_VISIBLE,\n    handler: c => c.closeMessage(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n        primary: 9 /* KeyCode.Escape */\n    }\n}));\nclass MessageWidget {\n    constructor(editor, { lineNumber, column }, text) {\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = true;\n        this.suppressMouseDown = false;\n        this._editor = editor;\n        this._editor.revealLinesInCenterIfOutsideViewport(lineNumber, lineNumber, 0 /* ScrollType.Smooth */);\n        this._position = { lineNumber, column };\n        this._domNode = document.createElement('div');\n        this._domNode.classList.add('monaco-editor-overlaymessage');\n        this._domNode.style.marginLeft = '-6px';\n        const anchorTop = document.createElement('div');\n        anchorTop.classList.add('anchor', 'top');\n        this._domNode.appendChild(anchorTop);\n        const message = document.createElement('div');\n        message.classList.add('message');\n        message.textContent = text;\n        this._domNode.appendChild(message);\n        const anchorBottom = document.createElement('div');\n        anchorBottom.classList.add('anchor', 'below');\n        this._domNode.appendChild(anchorBottom);\n        this._editor.addContentWidget(this);\n        this._domNode.classList.add('fadeIn');\n    }\n    static fadeOut(messageWidget) {\n        const dispose = () => {\n            messageWidget.dispose();\n            clearTimeout(handle);\n            messageWidget.getDomNode().removeEventListener('animationend', dispose);\n        };\n        const handle = setTimeout(dispose, 110);\n        messageWidget.getDomNode().addEventListener('animationend', dispose);\n        messageWidget.getDomNode().classList.add('fadeOut');\n        return { dispose };\n    }\n    dispose() {\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return 'messageoverlay';\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            position: this._position,\n            preference: [\n                1 /* ContentWidgetPositionPreference.ABOVE */,\n                2 /* ContentWidgetPositionPreference.BELOW */,\n            ],\n            positionAffinity: 1 /* PositionAffinity.Right */,\n        };\n    }\n    afterRender(position) {\n        this._domNode.classList.toggle('below', position === 2 /* ContentWidgetPositionPreference.BELOW */);\n    }\n}\nregisterEditorContribution(MessageController.ID, MessageController);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { CursorMoveCommands } from '../../../common/cursor/cursorMoveCommands.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { OverviewRulerLane, MinimapPosition } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { CommonFindController } from '../../find/browser/findController.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { overviewRulerSelectionHighlightForeground, minimapSelectionOccurrenceHighlight } from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nfunction announceCursorChange(previousCursorState, cursorState) {\n    const cursorDiff = cursorState.filter(cs => !previousCursorState.find(pcs => pcs.equals(cs)));\n    if (cursorDiff.length >= 1) {\n        const cursorPositions = cursorDiff.map(cs => `line ${cs.viewState.position.lineNumber} column ${cs.viewState.position.column}`).join(', ');\n        const msg = cursorDiff.length === 1 ? nls.localize('cursorAdded', \"Cursor added: {0}\", cursorPositions) : nls.localize('cursorsAdded', \"Cursors added: {0}\", cursorPositions);\n        status(msg);\n    }\n}\nexport class InsertCursorAbove extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertCursorAbove',\n            label: nls.localize('mutlicursor.insertAbove', \"Add Cursor Above\"),\n            alias: 'Add Cursor Above',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n                linux: {\n                    primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n                    secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */]\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miInsertCursorAbove', comment: ['&& denotes a mnemonic'] }, \"&&Add Cursor Above\"),\n                order: 2\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        let useLogicalLine = true;\n        if (args && args.logicalLine === false) {\n            useLogicalLine = false;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = viewModel.getCursorStates();\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.addCursorUp(viewModel, previousCursorState, useLogicalLine));\n        viewModel.revealTopMostCursor(args.source);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nexport class InsertCursorBelow extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertCursorBelow',\n            label: nls.localize('mutlicursor.insertBelow', \"Add Cursor Below\"),\n            alias: 'Add Cursor Below',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n                linux: {\n                    primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n                    secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */]\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miInsertCursorBelow', comment: ['&& denotes a mnemonic'] }, \"A&&dd Cursor Below\"),\n                order: 3\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        let useLogicalLine = true;\n        if (args && args.logicalLine === false) {\n            useLogicalLine = false;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = viewModel.getCursorStates();\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.addCursorDown(viewModel, previousCursorState, useLogicalLine));\n        viewModel.revealBottomMostCursor(args.source);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nclass InsertCursorAtEndOfEachLineSelected extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertCursorAtEndOfEachLineSelected',\n            label: nls.localize('mutlicursor.insertAtEndOfEachLineSelected', \"Add Cursors to Line Ends\"),\n            alias: 'Add Cursors to Line Ends',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 39 /* KeyCode.KeyI */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miInsertCursorAtEndOfEachLineSelected', comment: ['&& denotes a mnemonic'] }, \"Add C&&ursors to Line Ends\"),\n                order: 4\n            }\n        });\n    }\n    getCursorsForSelection(selection, model, result) {\n        if (selection.isEmpty()) {\n            return;\n        }\n        for (let i = selection.startLineNumber; i < selection.endLineNumber; i++) {\n            const currentLineMaxColumn = model.getLineMaxColumn(i);\n            result.push(new Selection(i, currentLineMaxColumn, i, currentLineMaxColumn));\n        }\n        if (selection.endColumn > 1) {\n            result.push(new Selection(selection.endLineNumber, selection.endColumn, selection.endLineNumber, selection.endColumn));\n        }\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const selections = editor.getSelections();\n        const viewModel = editor._getViewModel();\n        const previousCursorState = viewModel.getCursorStates();\n        const newSelections = [];\n        selections.forEach((sel) => this.getCursorsForSelection(sel, model, newSelections));\n        if (newSelections.length > 0) {\n            editor.setSelections(newSelections);\n        }\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nclass InsertCursorAtEndOfLineSelected extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.addCursorsToBottom',\n            label: nls.localize('mutlicursor.addCursorsToBottom', \"Add Cursors To Bottom\"),\n            alias: 'Add Cursors To Bottom',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections();\n        const lineCount = editor.getModel().getLineCount();\n        const newSelections = [];\n        for (let i = selections[0].startLineNumber; i <= lineCount; i++) {\n            newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\n        }\n        const viewModel = editor._getViewModel();\n        const previousCursorState = viewModel.getCursorStates();\n        if (newSelections.length > 0) {\n            editor.setSelections(newSelections);\n        }\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nclass InsertCursorAtTopOfLineSelected extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.addCursorsToTop',\n            label: nls.localize('mutlicursor.addCursorsToTop', \"Add Cursors To Top\"),\n            alias: 'Add Cursors To Top',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections();\n        const newSelections = [];\n        for (let i = selections[0].startLineNumber; i >= 1; i--) {\n            newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\n        }\n        const viewModel = editor._getViewModel();\n        const previousCursorState = viewModel.getCursorStates();\n        if (newSelections.length > 0) {\n            editor.setSelections(newSelections);\n        }\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nexport class MultiCursorSessionResult {\n    constructor(selections, revealRange, revealScrollType) {\n        this.selections = selections;\n        this.revealRange = revealRange;\n        this.revealScrollType = revealScrollType;\n    }\n}\nexport class MultiCursorSession {\n    constructor(_editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch) {\n        this._editor = _editor;\n        this.findController = findController;\n        this.isDisconnectedFromFindController = isDisconnectedFromFindController;\n        this.searchText = searchText;\n        this.wholeWord = wholeWord;\n        this.matchCase = matchCase;\n        this.currentMatch = currentMatch;\n    }\n    static create(editor, findController) {\n        if (!editor.hasModel()) {\n            return null;\n        }\n        const findState = findController.getState();\n        // Find widget owns entirely what we search for if:\n        //  - focus is not in the editor (i.e. it is in the find widget)\n        //  - and the search widget is visible\n        //  - and the search string is non-empty\n        if (!editor.hasTextFocus() && findState.isRevealed && findState.searchString.length > 0) {\n            // Find widget owns what is searched for\n            return new MultiCursorSession(editor, findController, false, findState.searchString, findState.wholeWord, findState.matchCase, null);\n        }\n        // Otherwise, the selection gives the search text, and the find widget gives the search settings\n        // The exception is the find state disassociation case: when beginning with a single, collapsed selection\n        let isDisconnectedFromFindController = false;\n        let wholeWord;\n        let matchCase;\n        const selections = editor.getSelections();\n        if (selections.length === 1 && selections[0].isEmpty()) {\n            isDisconnectedFromFindController = true;\n            wholeWord = true;\n            matchCase = true;\n        }\n        else {\n            wholeWord = findState.wholeWord;\n            matchCase = findState.matchCase;\n        }\n        // Selection owns what is searched for\n        const s = editor.getSelection();\n        let searchText;\n        let currentMatch = null;\n        if (s.isEmpty()) {\n            // selection is empty => expand to current word\n            const word = editor.getConfiguredWordAtPosition(s.getStartPosition());\n            if (!word) {\n                return null;\n            }\n            searchText = word.word;\n            currentMatch = new Selection(s.startLineNumber, word.startColumn, s.startLineNumber, word.endColumn);\n        }\n        else {\n            searchText = editor.getModel().getValueInRange(s).replace(/\\r\\n/g, '\\n');\n        }\n        return new MultiCursorSession(editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch);\n    }\n    addSelectionToNextFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const nextMatch = this._getNextMatch();\n        if (!nextMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.concat(nextMatch), nextMatch, 0 /* ScrollType.Smooth */);\n    }\n    moveSelectionToNextFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const nextMatch = this._getNextMatch();\n        if (!nextMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(nextMatch), nextMatch, 0 /* ScrollType.Smooth */);\n    }\n    _getNextMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        if (this.currentMatch) {\n            const result = this.currentMatch;\n            this.currentMatch = null;\n            return result;\n        }\n        this.findController.highlightFindOptions();\n        const allSelections = this._editor.getSelections();\n        const lastAddedSelection = allSelections[allSelections.length - 1];\n        const nextMatch = this._editor.getModel().findNextMatch(this.searchText, lastAddedSelection.getEndPosition(), false, this.matchCase, this.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false);\n        if (!nextMatch) {\n            return null;\n        }\n        return new Selection(nextMatch.range.startLineNumber, nextMatch.range.startColumn, nextMatch.range.endLineNumber, nextMatch.range.endColumn);\n    }\n    addSelectionToPreviousFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const previousMatch = this._getPreviousMatch();\n        if (!previousMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.concat(previousMatch), previousMatch, 0 /* ScrollType.Smooth */);\n    }\n    moveSelectionToPreviousFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const previousMatch = this._getPreviousMatch();\n        if (!previousMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(previousMatch), previousMatch, 0 /* ScrollType.Smooth */);\n    }\n    _getPreviousMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        if (this.currentMatch) {\n            const result = this.currentMatch;\n            this.currentMatch = null;\n            return result;\n        }\n        this.findController.highlightFindOptions();\n        const allSelections = this._editor.getSelections();\n        const lastAddedSelection = allSelections[allSelections.length - 1];\n        const previousMatch = this._editor.getModel().findPreviousMatch(this.searchText, lastAddedSelection.getStartPosition(), false, this.matchCase, this.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false);\n        if (!previousMatch) {\n            return null;\n        }\n        return new Selection(previousMatch.range.startLineNumber, previousMatch.range.startColumn, previousMatch.range.endLineNumber, previousMatch.range.endColumn);\n    }\n    selectAll(searchScope) {\n        if (!this._editor.hasModel()) {\n            return [];\n        }\n        this.findController.highlightFindOptions();\n        const editorModel = this._editor.getModel();\n        if (searchScope) {\n            return editorModel.findMatches(this.searchText, searchScope, false, this.matchCase, this.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        }\n        return editorModel.findMatches(this.searchText, true, false, this.matchCase, this.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n    }\n}\nexport class MultiCursorSelectionController extends Disposable {\n    constructor(editor) {\n        super();\n        this._sessionDispose = this._register(new DisposableStore());\n        this._editor = editor;\n        this._ignoreSelectionChange = false;\n        this._session = null;\n    }\n    static get(editor) {\n        return editor.getContribution(MultiCursorSelectionController.ID);\n    }\n    dispose() {\n        this._endSession();\n        super.dispose();\n    }\n    _beginSessionIfNeeded(findController) {\n        if (!this._session) {\n            // Create a new session\n            const session = MultiCursorSession.create(this._editor, findController);\n            if (!session) {\n                return;\n            }\n            this._session = session;\n            const newState = { searchString: this._session.searchText };\n            if (this._session.isDisconnectedFromFindController) {\n                newState.wholeWordOverride = 1 /* FindOptionOverride.True */;\n                newState.matchCaseOverride = 1 /* FindOptionOverride.True */;\n                newState.isRegexOverride = 2 /* FindOptionOverride.False */;\n            }\n            findController.getState().change(newState, false);\n            this._sessionDispose.add(this._editor.onDidChangeCursorSelection((e) => {\n                if (this._ignoreSelectionChange) {\n                    return;\n                }\n                this._endSession();\n            }));\n            this._sessionDispose.add(this._editor.onDidBlurEditorText(() => {\n                this._endSession();\n            }));\n            this._sessionDispose.add(findController.getState().onFindReplaceStateChange((e) => {\n                if (e.matchCase || e.wholeWord) {\n                    this._endSession();\n                }\n            }));\n        }\n    }\n    _endSession() {\n        this._sessionDispose.clear();\n        if (this._session && this._session.isDisconnectedFromFindController) {\n            const newState = {\n                wholeWordOverride: 0 /* FindOptionOverride.NotSet */,\n                matchCaseOverride: 0 /* FindOptionOverride.NotSet */,\n                isRegexOverride: 0 /* FindOptionOverride.NotSet */,\n            };\n            this._session.findController.getState().change(newState, false);\n        }\n        this._session = null;\n    }\n    _setSelections(selections) {\n        this._ignoreSelectionChange = true;\n        this._editor.setSelections(selections);\n        this._ignoreSelectionChange = false;\n    }\n    _expandEmptyToWord(model, selection) {\n        if (!selection.isEmpty()) {\n            return selection;\n        }\n        const word = this._editor.getConfiguredWordAtPosition(selection.getStartPosition());\n        if (!word) {\n            return selection;\n        }\n        return new Selection(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\n    }\n    _applySessionResult(result) {\n        if (!result) {\n            return;\n        }\n        this._setSelections(result.selections);\n        if (result.revealRange) {\n            this._editor.revealRangeInCenterIfOutsideViewport(result.revealRange, result.revealScrollType);\n        }\n    }\n    getSession(findController) {\n        return this._session;\n    }\n    addSelectionToNextFindMatch(findController) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._session) {\n            // If there are multiple cursors, handle the case where they do not all select the same text.\n            const allSelections = this._editor.getSelections();\n            if (allSelections.length > 1) {\n                const findState = findController.getState();\n                const matchCase = findState.matchCase;\n                const selectionsContainSameText = modelRangesContainSameText(this._editor.getModel(), allSelections, matchCase);\n                if (!selectionsContainSameText) {\n                    const model = this._editor.getModel();\n                    const resultingSelections = [];\n                    for (let i = 0, len = allSelections.length; i < len; i++) {\n                        resultingSelections[i] = this._expandEmptyToWord(model, allSelections[i]);\n                    }\n                    this._editor.setSelections(resultingSelections);\n                    return;\n                }\n            }\n        }\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.addSelectionToNextFindMatch());\n        }\n    }\n    addSelectionToPreviousFindMatch(findController) {\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.addSelectionToPreviousFindMatch());\n        }\n    }\n    moveSelectionToNextFindMatch(findController) {\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.moveSelectionToNextFindMatch());\n        }\n    }\n    moveSelectionToPreviousFindMatch(findController) {\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.moveSelectionToPreviousFindMatch());\n        }\n    }\n    selectAll(findController) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        let matches = null;\n        const findState = findController.getState();\n        // Special case: find widget owns entirely what we search for if:\n        // - focus is not in the editor (i.e. it is in the find widget)\n        // - and the search widget is visible\n        // - and the search string is non-empty\n        // - and we're searching for a regex\n        if (findState.isRevealed && findState.searchString.length > 0 && findState.isRegex) {\n            const editorModel = this._editor.getModel();\n            if (findState.searchScope) {\n                matches = editorModel.findMatches(findState.searchString, findState.searchScope, findState.isRegex, findState.matchCase, findState.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n            }\n            else {\n                matches = editorModel.findMatches(findState.searchString, true, findState.isRegex, findState.matchCase, findState.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n            }\n        }\n        else {\n            this._beginSessionIfNeeded(findController);\n            if (!this._session) {\n                return;\n            }\n            matches = this._session.selectAll(findState.searchScope);\n        }\n        if (matches.length > 0) {\n            const editorSelection = this._editor.getSelection();\n            // Have the primary cursor remain the one where the action was invoked\n            for (let i = 0, len = matches.length; i < len; i++) {\n                const match = matches[i];\n                const intersection = match.range.intersectRanges(editorSelection);\n                if (intersection) {\n                    // bingo!\n                    matches[i] = matches[0];\n                    matches[0] = match;\n                    break;\n                }\n            }\n            this._setSelections(matches.map(m => new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn)));\n        }\n    }\n}\nMultiCursorSelectionController.ID = 'editor.contrib.multiCursorController';\nexport class MultiCursorSelectionControllerAction extends EditorAction {\n    run(accessor, editor) {\n        const multiCursorController = MultiCursorSelectionController.get(editor);\n        if (!multiCursorController) {\n            return;\n        }\n        const findController = CommonFindController.get(editor);\n        if (!findController) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel) {\n            const previousCursorState = viewModel.getCursorStates();\n            this._run(multiCursorController, findController);\n            announceCursorChange(previousCursorState, viewModel.getCursorStates());\n        }\n    }\n}\nexport class AddSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.addSelectionToNextFindMatch',\n            label: nls.localize('addSelectionToNextFindMatch', \"Add Selection To Next Find Match\"),\n            alias: 'Add Selection To Next Find Match',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 34 /* KeyCode.KeyD */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miAddSelectionToNextFindMatch', comment: ['&& denotes a mnemonic'] }, \"Add &&Next Occurrence\"),\n                order: 5\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.addSelectionToNextFindMatch(findController);\n    }\n}\nexport class AddSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.addSelectionToPreviousFindMatch',\n            label: nls.localize('addSelectionToPreviousFindMatch', \"Add Selection To Previous Find Match\"),\n            alias: 'Add Selection To Previous Find Match',\n            precondition: undefined,\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miAddSelectionToPreviousFindMatch', comment: ['&& denotes a mnemonic'] }, \"Add P&&revious Occurrence\"),\n                order: 6\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.addSelectionToPreviousFindMatch(findController);\n    }\n}\nexport class MoveSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.moveSelectionToNextFindMatch',\n            label: nls.localize('moveSelectionToNextFindMatch', \"Move Last Selection To Next Find Match\"),\n            alias: 'Move Last Selection To Next Find Match',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 34 /* KeyCode.KeyD */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.moveSelectionToNextFindMatch(findController);\n    }\n}\nexport class MoveSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.moveSelectionToPreviousFindMatch',\n            label: nls.localize('moveSelectionToPreviousFindMatch', \"Move Last Selection To Previous Find Match\"),\n            alias: 'Move Last Selection To Previous Find Match',\n            precondition: undefined\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.moveSelectionToPreviousFindMatch(findController);\n    }\n}\nexport class SelectHighlightsAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectHighlights',\n            label: nls.localize('selectAllOccurrencesOfFindMatch', \"Select All Occurrences of Find Match\"),\n            alias: 'Select All Occurrences of Find Match',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 42 /* KeyCode.KeyL */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miSelectHighlights', comment: ['&& denotes a mnemonic'] }, \"Select All &&Occurrences\"),\n                order: 7\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.selectAll(findController);\n    }\n}\nexport class CompatChangeAll extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.changeAll',\n            label: nls.localize('changeAll.label', \"Change All Occurrences\"),\n            alias: 'Change All Occurrences',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.editorTextFocus),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 60 /* KeyCode.F2 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.2\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.selectAll(findController);\n    }\n}\nclass SelectionHighlighterState {\n    constructor(_model, _searchText, _matchCase, _wordSeparators, prevState) {\n        this._model = _model;\n        this._searchText = _searchText;\n        this._matchCase = _matchCase;\n        this._wordSeparators = _wordSeparators;\n        this._modelVersionId = this._model.getVersionId();\n        this._cachedFindMatches = null;\n        if (prevState\n            && this._model === prevState._model\n            && this._searchText === prevState._searchText\n            && this._matchCase === prevState._matchCase\n            && this._wordSeparators === prevState._wordSeparators\n            && this._modelVersionId === prevState._modelVersionId) {\n            this._cachedFindMatches = prevState._cachedFindMatches;\n        }\n    }\n    findMatches() {\n        if (this._cachedFindMatches === null) {\n            this._cachedFindMatches = this._model.findMatches(this._searchText, true, false, this._matchCase, this._wordSeparators, false).map(m => m.range);\n            this._cachedFindMatches.sort(Range.compareRangesUsingStarts);\n        }\n        return this._cachedFindMatches;\n    }\n}\nlet SelectionHighlighter = class SelectionHighlighter extends Disposable {\n    constructor(editor, _languageFeaturesService) {\n        super();\n        this._languageFeaturesService = _languageFeaturesService;\n        this.editor = editor;\n        this._isEnabled = editor.getOption(99 /* EditorOption.selectionHighlight */);\n        this._decorations = editor.createDecorationsCollection();\n        this.updateSoon = this._register(new RunOnceScheduler(() => this._update(), 300));\n        this.state = null;\n        this._register(editor.onDidChangeConfiguration((e) => {\n            this._isEnabled = editor.getOption(99 /* EditorOption.selectionHighlight */);\n        }));\n        this._register(editor.onDidChangeCursorSelection((e) => {\n            if (!this._isEnabled) {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            if (e.selection.isEmpty()) {\n                if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n                    if (this.state) {\n                        // no longer valid\n                        this._setState(null);\n                    }\n                    this.updateSoon.schedule();\n                }\n                else {\n                    this._setState(null);\n                }\n            }\n            else {\n                this._update();\n            }\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this._setState(null);\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            if (this._isEnabled) {\n                this.updateSoon.schedule();\n            }\n        }));\n        const findController = CommonFindController.get(editor);\n        if (findController) {\n            this._register(findController.getState().onFindReplaceStateChange((e) => {\n                this._update();\n            }));\n        }\n    }\n    _update() {\n        this._setState(SelectionHighlighter._createState(this.state, this._isEnabled, this.editor));\n    }\n    static _createState(oldState, isEnabled, editor) {\n        if (!isEnabled) {\n            return null;\n        }\n        if (!editor.hasModel()) {\n            return null;\n        }\n        const s = editor.getSelection();\n        if (s.startLineNumber !== s.endLineNumber) {\n            // multiline forbidden for perf reasons\n            return null;\n        }\n        const multiCursorController = MultiCursorSelectionController.get(editor);\n        if (!multiCursorController) {\n            return null;\n        }\n        const findController = CommonFindController.get(editor);\n        if (!findController) {\n            return null;\n        }\n        let r = multiCursorController.getSession(findController);\n        if (!r) {\n            const allSelections = editor.getSelections();\n            if (allSelections.length > 1) {\n                const findState = findController.getState();\n                const matchCase = findState.matchCase;\n                const selectionsContainSameText = modelRangesContainSameText(editor.getModel(), allSelections, matchCase);\n                if (!selectionsContainSameText) {\n                    return null;\n                }\n            }\n            r = MultiCursorSession.create(editor, findController);\n        }\n        if (!r) {\n            return null;\n        }\n        if (r.currentMatch) {\n            // This is an empty selection\n            // Do not interfere with semantic word highlighting in the no selection case\n            return null;\n        }\n        if (/^[ \\t]+$/.test(r.searchText)) {\n            // whitespace only selection\n            return null;\n        }\n        if (r.searchText.length > 200) {\n            // very long selection\n            return null;\n        }\n        // TODO: better handling of this case\n        const findState = findController.getState();\n        const caseSensitive = findState.matchCase;\n        // Return early if the find widget shows the exact same matches\n        if (findState.isRevealed) {\n            let findStateSearchString = findState.searchString;\n            if (!caseSensitive) {\n                findStateSearchString = findStateSearchString.toLowerCase();\n            }\n            let mySearchString = r.searchText;\n            if (!caseSensitive) {\n                mySearchString = mySearchString.toLowerCase();\n            }\n            if (findStateSearchString === mySearchString && r.matchCase === findState.matchCase && r.wholeWord === findState.wholeWord && !findState.isRegex) {\n                return null;\n            }\n        }\n        return new SelectionHighlighterState(editor.getModel(), r.searchText, r.matchCase, r.wholeWord ? editor.getOption(119 /* EditorOption.wordSeparators */) : null, oldState);\n    }\n    _setState(newState) {\n        this.state = newState;\n        if (!this.state) {\n            this._decorations.clear();\n            return;\n        }\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const model = this.editor.getModel();\n        if (model.isTooLargeForTokenization()) {\n            // the file is too large, so searching word under cursor in the whole document would be blocking the UI.\n            return;\n        }\n        const allMatches = this.state.findMatches();\n        const selections = this.editor.getSelections();\n        selections.sort(Range.compareRangesUsingStarts);\n        // do not overlap with selection (issue #64 and #512)\n        const matches = [];\n        for (let i = 0, j = 0, len = allMatches.length, lenJ = selections.length; i < len;) {\n            const match = allMatches[i];\n            if (j >= lenJ) {\n                // finished all editor selections\n                matches.push(match);\n                i++;\n            }\n            else {\n                const cmp = Range.compareRangesUsingStarts(match, selections[j]);\n                if (cmp < 0) {\n                    // match is before sel\n                    if (selections[j].isEmpty() || !Range.areIntersecting(match, selections[j])) {\n                        matches.push(match);\n                    }\n                    i++;\n                }\n                else if (cmp > 0) {\n                    // sel is before match\n                    j++;\n                }\n                else {\n                    // sel is equal to match\n                    i++;\n                    j++;\n                }\n            }\n        }\n        const hasFindOccurrences = this._languageFeaturesService.documentHighlightProvider.has(model) && this.editor.getOption(74 /* EditorOption.occurrencesHighlight */);\n        const decorations = matches.map(r => {\n            return {\n                range: r,\n                // Show in overviewRuler only if model has no semantic highlighting\n                options: (hasFindOccurrences ? SelectionHighlighter._SELECTION_HIGHLIGHT : SelectionHighlighter._SELECTION_HIGHLIGHT_OVERVIEW)\n            };\n        });\n        this._decorations.set(decorations);\n    }\n    dispose() {\n        this._setState(null);\n        super.dispose();\n    }\n};\nSelectionHighlighter.ID = 'editor.contrib.selectionHighlighter';\nSelectionHighlighter._SELECTION_HIGHLIGHT_OVERVIEW = ModelDecorationOptions.register({\n    description: 'selection-highlight-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'selectionHighlight',\n    minimap: {\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n        position: MinimapPosition.Inline\n    },\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerSelectionHighlightForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nSelectionHighlighter._SELECTION_HIGHLIGHT = ModelDecorationOptions.register({\n    description: 'selection-highlight',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'selectionHighlight',\n});\nSelectionHighlighter = __decorate([\n    __param(1, ILanguageFeaturesService)\n], SelectionHighlighter);\nexport { SelectionHighlighter };\nfunction modelRangesContainSameText(model, ranges, matchCase) {\n    const selectedText = getValueInRange(model, ranges[0], !matchCase);\n    for (let i = 1, len = ranges.length; i < len; i++) {\n        const range = ranges[i];\n        if (range.isEmpty()) {\n            return false;\n        }\n        const thisSelectedText = getValueInRange(model, range, !matchCase);\n        if (selectedText !== thisSelectedText) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction getValueInRange(model, range, toLowerCase) {\n    const text = model.getValueInRange(range);\n    return (toLowerCase ? text.toLowerCase() : text);\n}\nexport class FocusNextCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.focusNextCursor',\n            label: nls.localize('mutlicursor.focusNextCursor', \"Focus Next Cursor\"),\n            description: {\n                description: nls.localize('mutlicursor.focusNextCursor.description', \"Focuses the next cursor\"),\n                args: [],\n            },\n            alias: 'Focus Next Cursor',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = Array.from(viewModel.getCursorStates());\n        const firstCursor = previousCursorState.shift();\n        if (!firstCursor) {\n            return;\n        }\n        previousCursorState.push(firstCursor);\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, previousCursorState);\n        viewModel.revealPrimaryCursor(args.source, true);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nexport class FocusPreviousCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.focusPreviousCursor',\n            label: nls.localize('mutlicursor.focusPreviousCursor', \"Focus Previous Cursor\"),\n            description: {\n                description: nls.localize('mutlicursor.focusPreviousCursor.description', \"Focuses the previous cursor\"),\n                args: [],\n            },\n            alias: 'Focus Previous Cursor',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = Array.from(viewModel.getCursorStates());\n        const firstCursor = previousCursorState.pop();\n        if (!firstCursor) {\n            return;\n        }\n        previousCursorState.unshift(firstCursor);\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, previousCursorState);\n        viewModel.revealPrimaryCursor(args.source, true);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nregisterEditorContribution(MultiCursorSelectionController.ID, MultiCursorSelectionController);\nregisterEditorContribution(SelectionHighlighter.ID, SelectionHighlighter);\nregisterEditorAction(InsertCursorAbove);\nregisterEditorAction(InsertCursorBelow);\nregisterEditorAction(InsertCursorAtEndOfEachLineSelected);\nregisterEditorAction(AddSelectionToNextFindMatchAction);\nregisterEditorAction(AddSelectionToPreviousFindMatchAction);\nregisterEditorAction(MoveSelectionToNextFindMatchAction);\nregisterEditorAction(MoveSelectionToPreviousFindMatchAction);\nregisterEditorAction(SelectHighlightsAction);\nregisterEditorAction(CompatChangeAll);\nregisterEditorAction(InsertCursorAtEndOfLineSelected);\nregisterEditorAction(InsertCursorAtTopOfLineSelected);\nregisterEditorAction(FocusNextCursor);\nregisterEditorAction(FocusPreviousCursor);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Position } from '../../../common/core/position.js';\nimport * as languages from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const Context = {\n    Visible: new RawContextKey('parameterHintsVisible', false),\n    MultipleSignatures: new RawContextKey('parameterHintsMultipleSignatures', false),\n};\nexport function provideSignatureHelp(registry, model, position, context, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const supports = registry.ordered(model);\n        for (const support of supports) {\n            try {\n                const result = yield support.provideSignatureHelp(model, position, token, context);\n                if (result) {\n                    return result;\n                }\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n            }\n        }\n        return undefined;\n    });\n}\nCommandsRegistry.registerCommand('_executeSignatureHelpProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, position, triggerCharacter] = args;\n    assertType(URI.isUri(uri));\n    assertType(Position.isIPosition(position));\n    assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const result = yield provideSignatureHelp(languageFeaturesService.signatureHelpProvider, ref.object.textEditorModel, Position.lift(position), {\n            triggerKind: languages.SignatureHelpTriggerKind.Invoke,\n            isRetrigger: false,\n            triggerCharacter,\n        }, CancellationToken.None);\n        if (!result) {\n            return undefined;\n        }\n        setTimeout(() => result.dispose(), 0);\n        return result.value;\n    }\n    finally {\n        ref.dispose();\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, Delayer } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nimport * as languages from '../../../common/languages.js';\nimport { provideSignatureHelp } from './provideSignatureHelp.js';\nvar ParameterHintState;\n(function (ParameterHintState) {\n    ParameterHintState.Default = { type: 0 /* Type.Default */ };\n    class Pending {\n        constructor(request, previouslyActiveHints) {\n            this.request = request;\n            this.previouslyActiveHints = previouslyActiveHints;\n            this.type = 2 /* Type.Pending */;\n        }\n    }\n    ParameterHintState.Pending = Pending;\n    class Active {\n        constructor(hints) {\n            this.hints = hints;\n            this.type = 1 /* Type.Active */;\n        }\n    }\n    ParameterHintState.Active = Active;\n})(ParameterHintState || (ParameterHintState = {}));\nexport class ParameterHintsModel extends Disposable {\n    constructor(editor, providers, delay = ParameterHintsModel.DEFAULT_DELAY) {\n        super();\n        this._onChangedHints = this._register(new Emitter());\n        this.onChangedHints = this._onChangedHints.event;\n        this.triggerOnType = false;\n        this._state = ParameterHintState.Default;\n        this._pendingTriggers = [];\n        this._lastSignatureHelpResult = this._register(new MutableDisposable());\n        this.triggerChars = new CharacterSet();\n        this.retriggerChars = new CharacterSet();\n        this.triggerId = 0;\n        this.editor = editor;\n        this.providers = providers;\n        this.throttledDelayer = new Delayer(delay);\n        this._register(this.editor.onDidBlurEditorWidget(() => this.cancel()));\n        this._register(this.editor.onDidChangeConfiguration(() => this.onEditorConfigurationChange()));\n        this._register(this.editor.onDidChangeModel(e => this.onModelChanged()));\n        this._register(this.editor.onDidChangeModelLanguage(_ => this.onModelChanged()));\n        this._register(this.editor.onDidChangeCursorSelection(e => this.onCursorChange(e)));\n        this._register(this.editor.onDidChangeModelContent(e => this.onModelContentChange()));\n        this._register(this.providers.onDidChange(this.onModelChanged, this));\n        this._register(this.editor.onDidType(text => this.onDidType(text)));\n        this.onEditorConfigurationChange();\n        this.onModelChanged();\n    }\n    get state() { return this._state; }\n    set state(value) {\n        if (this._state.type === 2 /* ParameterHintState.Type.Pending */) {\n            this._state.request.cancel();\n        }\n        this._state = value;\n    }\n    cancel(silent = false) {\n        this.state = ParameterHintState.Default;\n        this.throttledDelayer.cancel();\n        if (!silent) {\n            this._onChangedHints.fire(undefined);\n        }\n    }\n    trigger(context, delay) {\n        const model = this.editor.getModel();\n        if (!model || !this.providers.has(model)) {\n            return;\n        }\n        const triggerId = ++this.triggerId;\n        this._pendingTriggers.push(context);\n        this.throttledDelayer.trigger(() => {\n            return this.doTrigger(triggerId);\n        }, delay)\n            .catch(onUnexpectedError);\n    }\n    next() {\n        if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\n            return;\n        }\n        const length = this.state.hints.signatures.length;\n        const activeSignature = this.state.hints.activeSignature;\n        const last = (activeSignature % length) === (length - 1);\n        const cycle = this.editor.getOption(78 /* EditorOption.parameterHints */).cycle;\n        // If there is only one signature, or we're on last signature of list\n        if ((length < 2 || last) && !cycle) {\n            this.cancel();\n            return;\n        }\n        this.updateActiveSignature(last && cycle ? 0 : activeSignature + 1);\n    }\n    previous() {\n        if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\n            return;\n        }\n        const length = this.state.hints.signatures.length;\n        const activeSignature = this.state.hints.activeSignature;\n        const first = activeSignature === 0;\n        const cycle = this.editor.getOption(78 /* EditorOption.parameterHints */).cycle;\n        // If there is only one signature, or we're on first signature of list\n        if ((length < 2 || first) && !cycle) {\n            this.cancel();\n            return;\n        }\n        this.updateActiveSignature(first && cycle ? length - 1 : activeSignature - 1);\n    }\n    updateActiveSignature(activeSignature) {\n        if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\n            return;\n        }\n        this.state = new ParameterHintState.Active(Object.assign(Object.assign({}, this.state.hints), { activeSignature }));\n        this._onChangedHints.fire(this.state.hints);\n    }\n    doTrigger(triggerId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const isRetrigger = this.state.type === 1 /* ParameterHintState.Type.Active */ || this.state.type === 2 /* ParameterHintState.Type.Pending */;\n            const activeSignatureHelp = this.getLastActiveHints();\n            this.cancel(true);\n            if (this._pendingTriggers.length === 0) {\n                return false;\n            }\n            const context = this._pendingTriggers.reduce(mergeTriggerContexts);\n            this._pendingTriggers = [];\n            const triggerContext = {\n                triggerKind: context.triggerKind,\n                triggerCharacter: context.triggerCharacter,\n                isRetrigger: isRetrigger,\n                activeSignatureHelp: activeSignatureHelp\n            };\n            if (!this.editor.hasModel()) {\n                return false;\n            }\n            const model = this.editor.getModel();\n            const position = this.editor.getPosition();\n            this.state = new ParameterHintState.Pending(createCancelablePromise(token => provideSignatureHelp(this.providers, model, position, triggerContext, token)), activeSignatureHelp);\n            try {\n                const result = yield this.state.request;\n                // Check that we are still resolving the correct signature help\n                if (triggerId !== this.triggerId) {\n                    result === null || result === void 0 ? void 0 : result.dispose();\n                    return false;\n                }\n                if (!result || !result.value.signatures || result.value.signatures.length === 0) {\n                    result === null || result === void 0 ? void 0 : result.dispose();\n                    this._lastSignatureHelpResult.clear();\n                    this.cancel();\n                    return false;\n                }\n                else {\n                    this.state = new ParameterHintState.Active(result.value);\n                    this._lastSignatureHelpResult.value = result;\n                    this._onChangedHints.fire(this.state.hints);\n                    return true;\n                }\n            }\n            catch (error) {\n                if (triggerId === this.triggerId) {\n                    this.state = ParameterHintState.Default;\n                }\n                onUnexpectedError(error);\n                return false;\n            }\n        });\n    }\n    getLastActiveHints() {\n        switch (this.state.type) {\n            case 1 /* ParameterHintState.Type.Active */: return this.state.hints;\n            case 2 /* ParameterHintState.Type.Pending */: return this.state.previouslyActiveHints;\n            default: return undefined;\n        }\n    }\n    get isTriggered() {\n        return this.state.type === 1 /* ParameterHintState.Type.Active */\n            || this.state.type === 2 /* ParameterHintState.Type.Pending */\n            || this.throttledDelayer.isTriggered();\n    }\n    onModelChanged() {\n        this.cancel();\n        // Update trigger characters\n        this.triggerChars = new CharacterSet();\n        this.retriggerChars = new CharacterSet();\n        const model = this.editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const support of this.providers.ordered(model)) {\n            for (const ch of support.signatureHelpTriggerCharacters || []) {\n                this.triggerChars.add(ch.charCodeAt(0));\n                // All trigger characters are also considered retrigger characters\n                this.retriggerChars.add(ch.charCodeAt(0));\n            }\n            for (const ch of support.signatureHelpRetriggerCharacters || []) {\n                this.retriggerChars.add(ch.charCodeAt(0));\n            }\n        }\n    }\n    onDidType(text) {\n        if (!this.triggerOnType) {\n            return;\n        }\n        const lastCharIndex = text.length - 1;\n        const triggerCharCode = text.charCodeAt(lastCharIndex);\n        if (this.triggerChars.has(triggerCharCode) || this.isTriggered && this.retriggerChars.has(triggerCharCode)) {\n            this.trigger({\n                triggerKind: languages.SignatureHelpTriggerKind.TriggerCharacter,\n                triggerCharacter: text.charAt(lastCharIndex),\n            });\n        }\n    }\n    onCursorChange(e) {\n        if (e.source === 'mouse') {\n            this.cancel();\n        }\n        else if (this.isTriggered) {\n            this.trigger({ triggerKind: languages.SignatureHelpTriggerKind.ContentChange });\n        }\n    }\n    onModelContentChange() {\n        if (this.isTriggered) {\n            this.trigger({ triggerKind: languages.SignatureHelpTriggerKind.ContentChange });\n        }\n    }\n    onEditorConfigurationChange() {\n        this.triggerOnType = this.editor.getOption(78 /* EditorOption.parameterHints */).enabled;\n        if (!this.triggerOnType) {\n            this.cancel();\n        }\n    }\n    dispose() {\n        this.cancel(true);\n        super.dispose();\n    }\n}\nParameterHintsModel.DEFAULT_DELAY = 120; // ms\nfunction mergeTriggerContexts(previous, current) {\n    switch (current.triggerKind) {\n        case languages.SignatureHelpTriggerKind.Invoke:\n            // Invoke overrides previous triggers.\n            return current;\n        case languages.SignatureHelpTriggerKind.ContentChange:\n            // Ignore content changes triggers\n            return previous;\n        case languages.SignatureHelpTriggerKind.TriggerCharacter:\n        default:\n            return current;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { assertIsDefined } from '../../../../base/common/types.js';\nimport './parameterHints.css';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { ParameterHintsModel } from './parameterHintsModel.js';\nimport { Context } from './provideSignatureHelp.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground, listHighlightForeground, registerColor, textCodeBlockBackground, textLinkActiveForeground, textLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { registerThemingParticipant, ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nconst $ = dom.$;\nconst parameterHintsNextIcon = registerIcon('parameter-hints-next', Codicon.chevronDown, nls.localize('parameterHintsNextIcon', 'Icon for show next parameter hint.'));\nconst parameterHintsPreviousIcon = registerIcon('parameter-hints-previous', Codicon.chevronUp, nls.localize('parameterHintsPreviousIcon', 'Icon for show previous parameter hint.'));\nlet ParameterHintsWidget = class ParameterHintsWidget extends Disposable {\n    constructor(editor, contextKeyService, openerService, languageService, languageFeaturesService) {\n        super();\n        this.editor = editor;\n        this.renderDisposeables = this._register(new DisposableStore());\n        this.visible = false;\n        this.announcedLabel = null;\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = true;\n        this.markdownRenderer = this._register(new MarkdownRenderer({ editor }, languageService, openerService));\n        this.model = this._register(new ParameterHintsModel(editor, languageFeaturesService.signatureHelpProvider));\n        this.keyVisible = Context.Visible.bindTo(contextKeyService);\n        this.keyMultipleSignatures = Context.MultipleSignatures.bindTo(contextKeyService);\n        this._register(this.model.onChangedHints(newParameterHints => {\n            if (newParameterHints) {\n                this.show();\n                this.render(newParameterHints);\n            }\n            else {\n                this.hide();\n            }\n        }));\n    }\n    createParameterHintDOMNodes() {\n        const element = $('.editor-widget.parameter-hints-widget');\n        const wrapper = dom.append(element, $('.phwrapper'));\n        wrapper.tabIndex = -1;\n        const controls = dom.append(wrapper, $('.controls'));\n        const previous = dom.append(controls, $('.button' + ThemeIcon.asCSSSelector(parameterHintsPreviousIcon)));\n        const overloads = dom.append(controls, $('.overloads'));\n        const next = dom.append(controls, $('.button' + ThemeIcon.asCSSSelector(parameterHintsNextIcon)));\n        this._register(dom.addDisposableListener(previous, 'click', e => {\n            dom.EventHelper.stop(e);\n            this.previous();\n        }));\n        this._register(dom.addDisposableListener(next, 'click', e => {\n            dom.EventHelper.stop(e);\n            this.next();\n        }));\n        const body = $('.body');\n        const scrollbar = new DomScrollableElement(body, {\n            alwaysConsumeMouseWheel: true,\n        });\n        this._register(scrollbar);\n        wrapper.appendChild(scrollbar.getDomNode());\n        const signature = dom.append(body, $('.signature'));\n        const docs = dom.append(body, $('.docs'));\n        element.style.userSelect = 'text';\n        this.domNodes = {\n            element,\n            signature,\n            overloads,\n            docs,\n            scrollbar,\n        };\n        this.editor.addContentWidget(this);\n        this.hide();\n        this._register(this.editor.onDidChangeCursorSelection(e => {\n            if (this.visible) {\n                this.editor.layoutContentWidget(this);\n            }\n        }));\n        const updateFont = () => {\n            if (!this.domNodes) {\n                return;\n            }\n            const fontInfo = this.editor.getOption(46 /* EditorOption.fontInfo */);\n            this.domNodes.element.style.fontSize = `${fontInfo.fontSize}px`;\n            this.domNodes.element.style.lineHeight = `${fontInfo.lineHeight / fontInfo.fontSize}`;\n        };\n        updateFont();\n        this._register(Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor))\n            .filter(e => e.hasChanged(46 /* EditorOption.fontInfo */))\n            .on(updateFont, null));\n        this._register(this.editor.onDidLayoutChange(e => this.updateMaxHeight()));\n        this.updateMaxHeight();\n    }\n    show() {\n        if (this.visible) {\n            return;\n        }\n        if (!this.domNodes) {\n            this.createParameterHintDOMNodes();\n        }\n        this.keyVisible.set(true);\n        this.visible = true;\n        setTimeout(() => {\n            var _a;\n            (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.element.classList.add('visible');\n        }, 100);\n        this.editor.layoutContentWidget(this);\n    }\n    hide() {\n        var _a;\n        this.renderDisposeables.clear();\n        if (!this.visible) {\n            return;\n        }\n        this.keyVisible.reset();\n        this.visible = false;\n        this.announcedLabel = null;\n        (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.element.classList.remove('visible');\n        this.editor.layoutContentWidget(this);\n    }\n    getPosition() {\n        if (this.visible) {\n            return {\n                position: this.editor.getPosition(),\n                preference: [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */]\n            };\n        }\n        return null;\n    }\n    render(hints) {\n        var _a;\n        this.renderDisposeables.clear();\n        if (!this.domNodes) {\n            return;\n        }\n        const multiple = hints.signatures.length > 1;\n        this.domNodes.element.classList.toggle('multiple', multiple);\n        this.keyMultipleSignatures.set(multiple);\n        this.domNodes.signature.innerText = '';\n        this.domNodes.docs.innerText = '';\n        const signature = hints.signatures[hints.activeSignature];\n        if (!signature) {\n            return;\n        }\n        const code = dom.append(this.domNodes.signature, $('.code'));\n        const fontInfo = this.editor.getOption(46 /* EditorOption.fontInfo */);\n        code.style.fontSize = `${fontInfo.fontSize}px`;\n        code.style.fontFamily = fontInfo.fontFamily;\n        const hasParameters = signature.parameters.length > 0;\n        const activeParameterIndex = (_a = signature.activeParameter) !== null && _a !== void 0 ? _a : hints.activeParameter;\n        if (!hasParameters) {\n            const label = dom.append(code, $('span'));\n            label.textContent = signature.label;\n        }\n        else {\n            this.renderParameters(code, signature, activeParameterIndex);\n        }\n        const activeParameter = signature.parameters[activeParameterIndex];\n        if (activeParameter === null || activeParameter === void 0 ? void 0 : activeParameter.documentation) {\n            const documentation = $('span.documentation');\n            if (typeof activeParameter.documentation === 'string') {\n                documentation.textContent = activeParameter.documentation;\n            }\n            else {\n                const renderedContents = this.renderMarkdownDocs(activeParameter.documentation);\n                documentation.appendChild(renderedContents.element);\n            }\n            dom.append(this.domNodes.docs, $('p', {}, documentation));\n        }\n        if (signature.documentation === undefined) {\n            /** no op */\n        }\n        else if (typeof signature.documentation === 'string') {\n            dom.append(this.domNodes.docs, $('p', {}, signature.documentation));\n        }\n        else {\n            const renderedContents = this.renderMarkdownDocs(signature.documentation);\n            dom.append(this.domNodes.docs, renderedContents.element);\n        }\n        const hasDocs = this.hasDocs(signature, activeParameter);\n        this.domNodes.signature.classList.toggle('has-docs', hasDocs);\n        this.domNodes.docs.classList.toggle('empty', !hasDocs);\n        this.domNodes.overloads.textContent =\n            String(hints.activeSignature + 1).padStart(hints.signatures.length.toString().length, '0') + '/' + hints.signatures.length;\n        if (activeParameter) {\n            let labelToAnnounce = '';\n            const param = signature.parameters[activeParameterIndex];\n            if (Array.isArray(param.label)) {\n                labelToAnnounce = signature.label.substring(param.label[0], param.label[1]);\n            }\n            else {\n                labelToAnnounce = param.label;\n            }\n            if (param.documentation) {\n                labelToAnnounce += typeof param.documentation === 'string' ? `, ${param.documentation}` : `, ${param.documentation.value}`;\n            }\n            if (signature.documentation) {\n                labelToAnnounce += typeof signature.documentation === 'string' ? `, ${signature.documentation}` : `, ${signature.documentation.value}`;\n            }\n            // Select method gets called on every user type while parameter hints are visible.\n            // We do not want to spam the user with same announcements, so we only announce if the current parameter changed.\n            if (this.announcedLabel !== labelToAnnounce) {\n                aria.alert(nls.localize('hint', \"{0}, hint\", labelToAnnounce));\n                this.announcedLabel = labelToAnnounce;\n            }\n        }\n        this.editor.layoutContentWidget(this);\n        this.domNodes.scrollbar.scanDomNode();\n    }\n    renderMarkdownDocs(markdown) {\n        const renderedContents = this.renderDisposeables.add(this.markdownRenderer.render(markdown, {\n            asyncRenderCallback: () => {\n                var _a;\n                (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.scrollbar.scanDomNode();\n            }\n        }));\n        renderedContents.element.classList.add('markdown-docs');\n        return renderedContents;\n    }\n    hasDocs(signature, activeParameter) {\n        if (activeParameter && typeof activeParameter.documentation === 'string' && assertIsDefined(activeParameter.documentation).length > 0) {\n            return true;\n        }\n        if (activeParameter && typeof activeParameter.documentation === 'object' && assertIsDefined(activeParameter.documentation).value.length > 0) {\n            return true;\n        }\n        if (signature.documentation && typeof signature.documentation === 'string' && assertIsDefined(signature.documentation).length > 0) {\n            return true;\n        }\n        if (signature.documentation && typeof signature.documentation === 'object' && assertIsDefined(signature.documentation.value).length > 0) {\n            return true;\n        }\n        return false;\n    }\n    renderParameters(parent, signature, activeParameterIndex) {\n        const [start, end] = this.getParameterLabelOffsets(signature, activeParameterIndex);\n        const beforeSpan = document.createElement('span');\n        beforeSpan.textContent = signature.label.substring(0, start);\n        const paramSpan = document.createElement('span');\n        paramSpan.textContent = signature.label.substring(start, end);\n        paramSpan.className = 'parameter active';\n        const afterSpan = document.createElement('span');\n        afterSpan.textContent = signature.label.substring(end);\n        dom.append(parent, beforeSpan, paramSpan, afterSpan);\n    }\n    getParameterLabelOffsets(signature, paramIdx) {\n        const param = signature.parameters[paramIdx];\n        if (!param) {\n            return [0, 0];\n        }\n        else if (Array.isArray(param.label)) {\n            return param.label;\n        }\n        else if (!param.label.length) {\n            return [0, 0];\n        }\n        else {\n            const regex = new RegExp(`(\\\\W|^)${escapeRegExpCharacters(param.label)}(?=\\\\W|$)`, 'g');\n            regex.test(signature.label);\n            const idx = regex.lastIndex - param.label.length;\n            return idx >= 0\n                ? [idx, regex.lastIndex]\n                : [0, 0];\n        }\n    }\n    next() {\n        this.editor.focus();\n        this.model.next();\n    }\n    previous() {\n        this.editor.focus();\n        this.model.previous();\n    }\n    cancel() {\n        this.model.cancel();\n    }\n    getDomNode() {\n        if (!this.domNodes) {\n            this.createParameterHintDOMNodes();\n        }\n        return this.domNodes.element;\n    }\n    getId() {\n        return ParameterHintsWidget.ID;\n    }\n    trigger(context) {\n        this.model.trigger(context, 0);\n    }\n    updateMaxHeight() {\n        if (!this.domNodes) {\n            return;\n        }\n        const height = Math.max(this.editor.getLayoutInfo().height / 4, 250);\n        const maxHeight = `${height}px`;\n        this.domNodes.element.style.maxHeight = maxHeight;\n        const wrapper = this.domNodes.element.getElementsByClassName('phwrapper');\n        if (wrapper.length) {\n            wrapper[0].style.maxHeight = maxHeight;\n        }\n    }\n};\nParameterHintsWidget.ID = 'editor.widget.parameterHintsWidget';\nParameterHintsWidget = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, IOpenerService),\n    __param(3, ILanguageService),\n    __param(4, ILanguageFeaturesService)\n], ParameterHintsWidget);\nexport { ParameterHintsWidget };\nexport const editorHoverWidgetHighlightForeground = registerColor('editorHoverWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hcDark: listHighlightForeground, hcLight: listHighlightForeground }, nls.localize('editorHoverWidgetHighlightForeground', 'Foreground color of the active item in the parameter hint.'));\nregisterThemingParticipant((theme, collector) => {\n    const border = theme.getColor(editorHoverBorder);\n    if (border) {\n        const borderWidth = isHighContrast(theme.type) ? 2 : 1;\n        collector.addRule(`.monaco-editor .parameter-hints-widget { border: ${borderWidth}px solid ${border}; }`);\n        collector.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${border.transparent(0.5)}; }`);\n        collector.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${border.transparent(0.5)}; }`);\n    }\n    const background = theme.getColor(editorHoverBackground);\n    if (background) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${background}; }`);\n    }\n    const link = theme.getColor(textLinkForeground);\n    if (link) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget a { color: ${link}; }`);\n    }\n    const linkHover = theme.getColor(textLinkActiveForeground);\n    if (linkHover) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget a:hover { color: ${linkHover}; }`);\n    }\n    const foreground = theme.getColor(editorHoverForeground);\n    if (foreground) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget { color: ${foreground}; }`);\n    }\n    const codeBackground = theme.getColor(textCodeBlockBackground);\n    if (codeBackground) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${codeBackground}; }`);\n    }\n    const parameterHighlightColor = theme.getColor(editorHoverWidgetHighlightForeground);\n    if (parameterHighlightColor) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget .parameter.active { color: ${parameterHighlightColor}}`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as languages from '../../../common/languages.js';\nimport { Context } from './provideSignatureHelp.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ParameterHintsWidget } from './parameterHintsWidget.js';\nlet ParameterHintsController = class ParameterHintsController extends Disposable {\n    constructor(editor, instantiationService) {\n        super();\n        this.editor = editor;\n        this.widget = this._register(instantiationService.createInstance(ParameterHintsWidget, this.editor));\n    }\n    static get(editor) {\n        return editor.getContribution(ParameterHintsController.ID);\n    }\n    cancel() {\n        this.widget.cancel();\n    }\n    previous() {\n        this.widget.previous();\n    }\n    next() {\n        this.widget.next();\n    }\n    trigger(context) {\n        this.widget.trigger(context);\n    }\n};\nParameterHintsController.ID = 'editor.controller.parameterHints';\nParameterHintsController = __decorate([\n    __param(1, IInstantiationService)\n], ParameterHintsController);\nexport class TriggerParameterHintsAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.triggerParameterHints',\n            label: nls.localize('parameterHints.trigger.label', \"Trigger Parameter Hints\"),\n            alias: 'Trigger Parameter Hints',\n            precondition: EditorContextKeys.hasSignatureHelpProvider,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 10 /* KeyCode.Space */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = ParameterHintsController.get(editor);\n        if (controller) {\n            controller.trigger({\n                triggerKind: languages.SignatureHelpTriggerKind.Invoke\n            });\n        }\n    }\n}\nregisterEditorContribution(ParameterHintsController.ID, ParameterHintsController);\nregisterEditorAction(TriggerParameterHintsAction);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 75;\nconst ParameterHintsCommand = EditorCommand.bindToContribution(ParameterHintsController.get);\nregisterEditorCommand(new ParameterHintsCommand({\n    id: 'closeParameterHints',\n    precondition: Context.Visible,\n    handler: x => x.cancel(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new ParameterHintsCommand({\n    id: 'showPrevParameterHint',\n    precondition: ContextKeyExpr.and(Context.Visible, Context.MultipleSignatures),\n    handler: x => x.previous(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.focus,\n        primary: 16 /* KeyCode.UpArrow */,\n        secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */],\n        mac: { primary: 16 /* KeyCode.UpArrow */, secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */] }\n    }\n}));\nregisterEditorCommand(new ParameterHintsCommand({\n    id: 'showNextParameterHint',\n    precondition: ContextKeyExpr.and(Context.Visible, Context.MultipleSignatures),\n    handler: x => x.next(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.focus,\n        primary: 18 /* KeyCode.DownArrow */,\n        secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */],\n        mac: { primary: 18 /* KeyCode.DownArrow */, secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */] }\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport * as objects from '../../../../base/common/objects.js';\nimport './media/peekViewWidget.css';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { ZoneWidget } from '../../zoneWidget/browser/zoneWidget.js';\nimport * as nls from '../../../../nls.js';\nimport { createActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator, IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { activeContrastBorder, contrastBorder, editorForeground, editorInfoForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nexport const IPeekViewService = createDecorator('IPeekViewService');\nregisterSingleton(IPeekViewService, class {\n    constructor() {\n        this._widgets = new Map();\n    }\n    addExclusiveWidget(editor, widget) {\n        const existing = this._widgets.get(editor);\n        if (existing) {\n            existing.listener.dispose();\n            existing.widget.dispose();\n        }\n        const remove = () => {\n            const data = this._widgets.get(editor);\n            if (data && data.widget === widget) {\n                data.listener.dispose();\n                this._widgets.delete(editor);\n            }\n        };\n        this._widgets.set(editor, { widget, listener: widget.onDidClose(remove) });\n    }\n});\nexport var PeekContext;\n(function (PeekContext) {\n    PeekContext.inPeekEditor = new RawContextKey('inReferenceSearchEditor', true, nls.localize('inReferenceSearchEditor', \"Whether the current code editor is embedded inside peek\"));\n    PeekContext.notInPeekEditor = PeekContext.inPeekEditor.toNegated();\n})(PeekContext || (PeekContext = {}));\nlet PeekContextController = class PeekContextController {\n    constructor(editor, contextKeyService) {\n        if (editor instanceof EmbeddedCodeEditorWidget) {\n            PeekContext.inPeekEditor.bindTo(contextKeyService);\n        }\n    }\n    dispose() { }\n};\nPeekContextController.ID = 'editor.contrib.referenceController';\nPeekContextController = __decorate([\n    __param(1, IContextKeyService)\n], PeekContextController);\nregisterEditorContribution(PeekContextController.ID, PeekContextController);\nexport function getOuterEditor(accessor) {\n    const editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n    if (editor instanceof EmbeddedCodeEditorWidget) {\n        return editor.getParentEditor();\n    }\n    return editor;\n}\nconst defaultOptions = {\n    headerBackgroundColor: Color.white,\n    primaryHeadingColor: Color.fromHex('#333333'),\n    secondaryHeadingColor: Color.fromHex('#6c6c6cb3')\n};\nlet PeekViewWidget = class PeekViewWidget extends ZoneWidget {\n    constructor(editor, options, instantiationService) {\n        super(editor, options);\n        this.instantiationService = instantiationService;\n        this._onDidClose = new Emitter();\n        this.onDidClose = this._onDidClose.event;\n        objects.mixin(this.options, defaultOptions, false);\n    }\n    dispose() {\n        if (!this.disposed) {\n            this.disposed = true; // prevent consumers who dispose on onDidClose from looping\n            super.dispose();\n            this._onDidClose.fire(this);\n        }\n    }\n    style(styles) {\n        const options = this.options;\n        if (styles.headerBackgroundColor) {\n            options.headerBackgroundColor = styles.headerBackgroundColor;\n        }\n        if (styles.primaryHeadingColor) {\n            options.primaryHeadingColor = styles.primaryHeadingColor;\n        }\n        if (styles.secondaryHeadingColor) {\n            options.secondaryHeadingColor = styles.secondaryHeadingColor;\n        }\n        super.style(styles);\n    }\n    _applyStyles() {\n        super._applyStyles();\n        const options = this.options;\n        if (this._headElement && options.headerBackgroundColor) {\n            this._headElement.style.backgroundColor = options.headerBackgroundColor.toString();\n        }\n        if (this._primaryHeading && options.primaryHeadingColor) {\n            this._primaryHeading.style.color = options.primaryHeadingColor.toString();\n        }\n        if (this._secondaryHeading && options.secondaryHeadingColor) {\n            this._secondaryHeading.style.color = options.secondaryHeadingColor.toString();\n        }\n        if (this._bodyElement && options.frameColor) {\n            this._bodyElement.style.borderColor = options.frameColor.toString();\n        }\n    }\n    _fillContainer(container) {\n        this.setCssClass('peekview-widget');\n        this._headElement = dom.$('.head');\n        this._bodyElement = dom.$('.body');\n        this._fillHead(this._headElement);\n        this._fillBody(this._bodyElement);\n        container.appendChild(this._headElement);\n        container.appendChild(this._bodyElement);\n    }\n    _fillHead(container, noCloseAction) {\n        const titleElement = dom.$('.peekview-title');\n        if (this.options.supportOnTitleClick) {\n            titleElement.classList.add('clickable');\n            dom.addStandardDisposableListener(titleElement, 'click', event => this._onTitleClick(event));\n        }\n        dom.append(this._headElement, titleElement);\n        this._fillTitleIcon(titleElement);\n        this._primaryHeading = dom.$('span.filename');\n        this._secondaryHeading = dom.$('span.dirname');\n        this._metaHeading = dom.$('span.meta');\n        dom.append(titleElement, this._primaryHeading, this._secondaryHeading, this._metaHeading);\n        const actionsContainer = dom.$('.peekview-actions');\n        dom.append(this._headElement, actionsContainer);\n        const actionBarOptions = this._getActionBarOptions();\n        this._actionbarWidget = new ActionBar(actionsContainer, actionBarOptions);\n        this._disposables.add(this._actionbarWidget);\n        if (!noCloseAction) {\n            this._actionbarWidget.push(new Action('peekview.close', nls.localize('label.close', \"Close\"), Codicon.close.classNames, true, () => {\n                this.dispose();\n                return Promise.resolve();\n            }), { label: false, icon: true });\n        }\n    }\n    _fillTitleIcon(container) {\n    }\n    _getActionBarOptions() {\n        return {\n            actionViewItemProvider: createActionViewItem.bind(undefined, this.instantiationService),\n            orientation: 0 /* ActionsOrientation.HORIZONTAL */\n        };\n    }\n    _onTitleClick(event) {\n        // implement me if supportOnTitleClick option is set\n    }\n    setTitle(primaryHeading, secondaryHeading) {\n        if (this._primaryHeading && this._secondaryHeading) {\n            this._primaryHeading.innerText = primaryHeading;\n            this._primaryHeading.setAttribute('title', primaryHeading);\n            if (secondaryHeading) {\n                this._secondaryHeading.innerText = secondaryHeading;\n            }\n            else {\n                dom.clearNode(this._secondaryHeading);\n            }\n        }\n    }\n    setMetaTitle(value) {\n        if (this._metaHeading) {\n            if (value) {\n                this._metaHeading.innerText = value;\n                dom.show(this._metaHeading);\n            }\n            else {\n                dom.hide(this._metaHeading);\n            }\n        }\n    }\n    _doLayout(heightInPixel, widthInPixel) {\n        if (!this._isShowing && heightInPixel < 0) {\n            // Looks like the view zone got folded away!\n            this.dispose();\n            return;\n        }\n        const headHeight = Math.ceil(this.editor.getOption(61 /* EditorOption.lineHeight */) * 1.2);\n        const bodyHeight = Math.round(heightInPixel - (headHeight + 2 /* the border-top/bottom width*/));\n        this._doLayoutHead(headHeight, widthInPixel);\n        this._doLayoutBody(bodyHeight, widthInPixel);\n    }\n    _doLayoutHead(heightInPixel, widthInPixel) {\n        if (this._headElement) {\n            this._headElement.style.height = `${heightInPixel}px`;\n            this._headElement.style.lineHeight = this._headElement.style.height;\n        }\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        if (this._bodyElement) {\n            this._bodyElement.style.height = `${heightInPixel}px`;\n        }\n    }\n};\nPeekViewWidget = __decorate([\n    __param(2, IInstantiationService)\n], PeekViewWidget);\nexport { PeekViewWidget };\nexport const peekViewTitleBackground = registerColor('peekViewTitle.background', { dark: transparent(editorInfoForeground, .1), light: transparent(editorInfoForeground, .1), hcDark: null, hcLight: null }, nls.localize('peekViewTitleBackground', 'Background color of the peek view title area.'));\nexport const peekViewTitleForeground = registerColor('peekViewTitleLabel.foreground', { dark: Color.white, light: Color.black, hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewTitleForeground', 'Color of the peek view title.'));\nexport const peekViewTitleInfoForeground = registerColor('peekViewTitleDescription.foreground', { dark: '#ccccccb3', light: '#616161', hcDark: '#FFFFFF99', hcLight: '#292929' }, nls.localize('peekViewTitleInfoForeground', 'Color of the peek view title info.'));\nexport const peekViewBorder = registerColor('peekView.border', { dark: editorInfoForeground, light: editorInfoForeground, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('peekViewBorder', 'Color of the peek view borders and arrow.'));\nexport const peekViewResultsBackground = registerColor('peekViewResult.background', { dark: '#252526', light: '#F3F3F3', hcDark: Color.black, hcLight: Color.white }, nls.localize('peekViewResultsBackground', 'Background color of the peek view result list.'));\nexport const peekViewResultsMatchForeground = registerColor('peekViewResult.lineForeground', { dark: '#bbbbbb', light: '#646465', hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewResultsMatchForeground', 'Foreground color for line nodes in the peek view result list.'));\nexport const peekViewResultsFileForeground = registerColor('peekViewResult.fileForeground', { dark: Color.white, light: '#1E1E1E', hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewResultsFileForeground', 'Foreground color for file nodes in the peek view result list.'));\nexport const peekViewResultsSelectionBackground = registerColor('peekViewResult.selectionBackground', { dark: '#3399ff33', light: '#3399ff33', hcDark: null, hcLight: null }, nls.localize('peekViewResultsSelectionBackground', 'Background color of the selected entry in the peek view result list.'));\nexport const peekViewResultsSelectionForeground = registerColor('peekViewResult.selectionForeground', { dark: Color.white, light: '#6C6C6C', hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewResultsSelectionForeground', 'Foreground color of the selected entry in the peek view result list.'));\nexport const peekViewEditorBackground = registerColor('peekViewEditor.background', { dark: '#001F33', light: '#F2F8FC', hcDark: Color.black, hcLight: Color.white }, nls.localize('peekViewEditorBackground', 'Background color of the peek view editor.'));\nexport const peekViewEditorGutterBackground = registerColor('peekViewEditorGutter.background', { dark: peekViewEditorBackground, light: peekViewEditorBackground, hcDark: peekViewEditorBackground, hcLight: peekViewEditorBackground }, nls.localize('peekViewEditorGutterBackground', 'Background color of the gutter in the peek view editor.'));\nexport const peekViewResultsMatchHighlight = registerColor('peekViewResult.matchHighlightBackground', { dark: '#ea5c004d', light: '#ea5c004d', hcDark: null, hcLight: null }, nls.localize('peekViewResultsMatchHighlight', 'Match highlight color in the peek view result list.'));\nexport const peekViewEditorMatchHighlight = registerColor('peekViewEditor.matchHighlightBackground', { dark: '#ff8f0099', light: '#f5d802de', hcDark: null, hcLight: null }, nls.localize('peekViewEditorMatchHighlight', 'Match highlight color in the peek view editor.'));\nexport const peekViewEditorMatchHighlightBorder = registerColor('peekViewEditor.matchHighlightBorder', { dark: null, light: null, hcDark: activeContrastBorder, hcLight: activeContrastBorder }, nls.localize('peekViewEditorMatchHighlightBorder', 'Match highlight border in the peek view editor.'));\n"],"names":["_a","__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","MarkdownRenderer","_options","_languageService","_openerService","this","_onDidRenderAsync","Emitter","onDidRenderAsync","event","dispose","markdown","options","markedOptions","element","document","createElement","disposables","DisposableStore","add","renderMarkdown","assign","_getRenderOptions","codeBlockRenderer","languageAlias","languageId","getLanguageIdByLanguageName","editor","getModel","getLanguageId","PLAINTEXT_LANGUAGE_ID","tokenizeToString","html","innerHTML","_c","_b","_ttpTokenizer","createHTML","fontInfo","getOption","applyFontInfo","codeBlockFontFamily","style","fontFamily","undefined","codeBlockFontSize","fontSize","asyncRenderCallback","fire","actionHandler","callback","content","open","fromUserGesture","allowContributedOpeners","allowCommands","isTrusted","catch","onUnexpectedError","window","trustedTypes","createPolicy","ILanguageService","IOpenerService","MessageController","contextKeyService","_messageWidget","MutableDisposable","_messageListeners","_editor","_visible","MESSAGE_VISIBLE","bindTo","reset","message","position","bounds","alert","set","clear","MessageWidget","onDidBlurEditorText","closeMessage","onDidChangeCursorPosition","onDidDispose","onDidChangeModel","TimeoutTimer","onMouseMove","containsPosition","Range","lineNumber","fadeOut","getContribution","ID","RawContextKey","nls","IContextKeyService","MessageCommand","EditorCommand","get","registerEditorCommand","id","precondition","handler","kbOpts","weight","primary","text","column","allowEditorOverflow","suppressMouseDown","revealLinesInCenterIfOutsideViewport","_position","_domNode","classList","marginLeft","anchorTop","appendChild","textContent","anchorBottom","addContentWidget","removeContentWidget","preference","positionAffinity","toggle","messageWidget","clearTimeout","handle","getDomNode","removeEventListener","setTimeout","addEventListener","registerEditorContribution","announceCursorChange","previousCursorState","cursorState","cursorDiff","filter","cs","find","pcs","equals","cursorPositions","map","viewState","join","msg","status","InsertCursorAbove","label","alias","kbExpr","EditorContextKeys","linux","secondary","menuOpts","menuId","MenuId","group","title","comment","order","accessor","args","hasModel","useLogicalLine","logicalLine","viewModel","_getViewModel","cursorConfig","readOnly","model","pushStackElement","getCursorStates","setCursorStates","source","CursorMoveCommands","revealTopMostCursor","EditorAction","InsertCursorBelow","revealBottomMostCursor","InsertCursorAtEndOfEachLineSelected","selection","isEmpty","startLineNumber","endLineNumber","currentLineMaxColumn","getLineMaxColumn","push","Selection","endColumn","selections","getSelections","newSelections","forEach","sel","getCursorsForSelection","setSelections","InsertCursorAtEndOfLineSelected","lineCount","getLineCount","startColumn","InsertCursorAtTopOfLineSelected","MultiCursorSessionResult","revealRange","revealScrollType","MultiCursorSession","findController","isDisconnectedFromFindController","searchText","wholeWord","matchCase","currentMatch","nextMatch","_getNextMatch","allSelections","concat","slice","highlightFindOptions","lastAddedSelection","findNextMatch","getEndPosition","range","previousMatch","_getPreviousMatch","findPreviousMatch","getStartPosition","searchScope","editorModel","findMatches","findState","getState","hasTextFocus","isRevealed","searchString","s","getSelection","word","getConfiguredWordAtPosition","getValueInRange","replace","MultiCursorSelectionController","_sessionDispose","_register","_ignoreSelectionChange","_session","_endSession","session","create","newState","wholeWordOverride","matchCaseOverride","isRegexOverride","change","onDidChangeCursorSelection","onFindReplaceStateChange","_setSelections","revealRangeInCenterIfOutsideViewport","modelRangesContainSameText","resultingSelections","len","_expandEmptyToWord","_beginSessionIfNeeded","_applySessionResult","addSelectionToNextFindMatch","addSelectionToPreviousFindMatch","moveSelectionToNextFindMatch","moveSelectionToPreviousFindMatch","matches","isRegex","selectAll","editorSelection","match","intersectRanges","m","Disposable","MultiCursorSelectionControllerAction","multiCursorController","CommonFindController","_run","AddSelectionToNextFindMatchAction","AddSelectionToPreviousFindMatchAction","MoveSelectionToNextFindMatchAction","KeyChord","MoveSelectionToPreviousFindMatchAction","SelectHighlightsAction","CompatChangeAll","ContextKeyExpr","contextMenuOpts","SelectionHighlighterState","_model","_searchText","_matchCase","_wordSeparators","prevState","_modelVersionId","getVersionId","_cachedFindMatches","sort","SelectionHighlighter","_languageFeaturesService","_isEnabled","_decorations","createDecorationsCollection","updateSoon","RunOnceScheduler","_update","state","onDidChangeConfiguration","reason","_setState","schedule","onDidChangeModelContent","_createState","isTooLargeForTokenization","allMatches","j","lenJ","cmp","hasFindOccurrences","documentHighlightProvider","has","decorations","_SELECTION_HIGHLIGHT","_SELECTION_HIGHLIGHT_OVERVIEW","oldState","isEnabled","getSession","test","caseSensitive","findStateSearchString","toLowerCase","mySearchString","ranges","selectedText","ModelDecorationOptions","description","stickiness","className","minimap","color","themeColorFromId","minimapSelectionOccurrenceHighlight","MinimapPosition","overviewRuler","overviewRulerSelectionHighlightForeground","OverviewRulerLane","ILanguageFeaturesService","FocusNextCursor","Array","from","firstCursor","shift","revealPrimaryCursor","FocusPreviousCursor","pop","unshift","registerEditorAction","Context","Visible","MultipleSignatures","provideSignatureHelp","registry","context","token","supports","ordered","support","onUnexpectedExternalError","CommandsRegistry","uri","triggerCharacter","assertType","URI","Position","languageFeaturesService","ITextModelService","createModelReference","ref","signatureHelpProvider","object","textEditorModel","triggerKind","languages","isRetrigger","CancellationToken","ParameterHintState","Default","type","Pending","request","previouslyActiveHints","Active","hints","ParameterHintsModel","providers","delay","DEFAULT_DELAY","_onChangedHints","onChangedHints","triggerOnType","_state","_pendingTriggers","_lastSignatureHelpResult","triggerChars","CharacterSet","retriggerChars","triggerId","throttledDelayer","Delayer","onDidBlurEditorWidget","cancel","onEditorConfigurationChange","onModelChanged","onDidChangeModelLanguage","_","onCursorChange","onModelContentChange","onDidChange","onDidType","silent","trigger","doTrigger","signatures","activeSignature","last","cycle","updateActiveSignature","first","activeSignatureHelp","getLastActiveHints","reduce","mergeTriggerContexts","triggerContext","getPosition","createCancelablePromise","isTriggered","signatureHelpTriggerCharacters","ch","charCodeAt","signatureHelpRetriggerCharacters","lastCharIndex","triggerCharCode","charAt","enabled","previous","current","$","dom","parameterHintsNextIcon","registerIcon","Codicon","parameterHintsPreviousIcon","ParameterHintsWidget","openerService","languageService","renderDisposeables","visible","announcedLabel","markdownRenderer","keyVisible","keyMultipleSignatures","newParameterHints","show","render","hide","wrapper","append","tabIndex","controls","ThemeIcon","overloads","addDisposableListener","EventHelper","stop","body","scrollbar","DomScrollableElement","alwaysConsumeMouseWheel","signature","docs","userSelect","domNodes","layoutContentWidget","updateFont","lineHeight","Event","bind","hasChanged","on","onDidLayoutChange","updateMaxHeight","createParameterHintDOMNodes","remove","multiple","innerText","code","hasParameters","parameters","activeParameterIndex","activeParameter","renderParameters","documentation","renderedContents","renderMarkdownDocs","hasDocs","String","padStart","toString","labelToAnnounce","param","isArray","substring","aria","scanDomNode","assertIsDefined","parent","getParameterLabelOffsets","start","end","beforeSpan","paramSpan","afterSpan","paramIdx","regex","RegExp","escapeRegExpCharacters","idx","lastIndex","focus","height","Math","max","getLayoutInfo","maxHeight","getElementsByClassName","editorHoverWidgetHighlightForeground","registerColor","dark","listHighlightForeground","light","hcDark","hcLight","registerThemingParticipant","theme","collector","border","getColor","editorHoverBorder","borderWidth","isHighContrast","addRule","transparent","background","editorHoverBackground","link","textLinkForeground","linkHover","textLinkActiveForeground","foreground","editorHoverForeground","codeBackground","textCodeBlockBackground","parameterHighlightColor","ParameterHintsController","instantiationService","widget","createInstance","IInstantiationService","TriggerParameterHintsAction","controller","ParameterHintsCommand","x","mac","PeekContext","IPeekViewService","createDecorator","registerSingleton","_widgets","Map","existing","listener","onDidClose","data","delete","inPeekEditor","notInPeekEditor","toNegated","PeekContextController","EmbeddedCodeEditorWidget","getOuterEditor","ICodeEditorService","getFocusedCodeEditor","getParentEditor","defaultOptions","headerBackgroundColor","Color","primaryHeadingColor","secondaryHeadingColor","PeekViewWidget","_onDidClose","objects","disposed","styles","_headElement","backgroundColor","_primaryHeading","_secondaryHeading","_bodyElement","frameColor","borderColor","container","setCssClass","_fillHead","_fillBody","noCloseAction","titleElement","supportOnTitleClick","addStandardDisposableListener","_onTitleClick","_fillTitleIcon","_metaHeading","actionsContainer","actionBarOptions","_getActionBarOptions","_actionbarWidget","ActionBar","_disposables","Action","icon","actionViewItemProvider","createActionViewItem","orientation","primaryHeading","secondaryHeading","setAttribute","clearNode","heightInPixel","widthInPixel","_isShowing","headHeight","ceil","bodyHeight","round","_doLayoutHead","_doLayoutBody","ZoneWidget","peekViewTitleBackground","editorInfoForeground","peekViewTitleForeground","editorForeground","peekViewTitleInfoForeground","peekViewBorder","contrastBorder","peekViewResultsBackground","peekViewEditorBackground","activeContrastBorder"],"sourceRoot":""}