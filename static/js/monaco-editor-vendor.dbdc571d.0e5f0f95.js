"use strict";(self.webpackChunkmonaco_editor_nginx=self.webpackChunkmonaco_editor_nginx||[]).push([[658],{25539:function(e,t,n){n.d(t,{R8:function(){return v}});var i=n(74165),r=n(43144),o=n(15671),a=n(32590),s=n(32124),u=n(68552),c=n(98351),l=n(45161),d=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},h=(0,r.Z)((function e(t,n,i){(0,o.Z)(this,e),this.provider=t,this.hover=n,this.ordinal=i}));function v(e,t,n,r){var o=e.ordered(t).map((function(e,o){return function(e,t,n,r,o){return d(this,void 0,void 0,(0,i.Z)().mark((function a(){var s;return(0,i.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Promise.resolve(e.provideHover(n,r,o));case 3:if(!(s=i.sent)||!g(s)){i.next=6;break}return i.abrupt("return",new h(e,s,t));case 6:i.next=11;break;case 8:i.prev=8,i.t0=i.catch(0),(0,u.Cp)(i.t0);case 11:return i.abrupt("return",void 0);case 12:case"end":return i.stop()}}),a,null,[[0,8]])})))}(e,o,t,n,r)}));return a.Aq.fromPromises(o).coalesce()}function g(e){var t="undefined"!==typeof e.range,n="undefined"!==typeof e.contents&&e.contents&&e.contents.length>0;return t&&n}(0,c.sb)("_executeHoverProvider",(function(e,t,n){return function(e,t,n,i){return v(e,t,n,i).map((function(e){return e.hover})).toPromise()}(e.get(l.p).hoverProvider,t,n,s.T.None)}))},14380:function(e,t,n){n.r(t),n.d(t,{ModesHoverController:function(){return ye}});var i=n(60136),r=n(27277),o=n(15671),a=n(43144),s=n(27924),u=n(10526),c=n(98351),l=n(30788),d=n(44474),h=n(63024),v=n(24034),g=n(97326),f=n(11752),p=n(61120),m=n(37762),_=n(53210),y=n(6215),b=n(71881),C=n(10849),k=n(77161),w=n(56417),L=n(74165),x=n(32590),S=n(68552),I=n(28941),Z=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},N=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"===typeof __values?__values(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,r,(t=e[n](t)).done,t.value)}))}}},D=(0,a.Z)((function e(t,n,i){(0,o.Z)(this,e),this.value=t,this.isComplete=n,this.hasLoadingMessage=i})),M=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e,i){var r;return(0,o.Z)(this,n),(r=t.call(this))._editor=e,r._computer=i,r._onResult=r._register(new I.Q5),r.onResult=r._onResult.event,r._firstWaitScheduler=r._register(new x.pY((function(){return r._triggerAsyncComputation()}),0)),r._secondWaitScheduler=r._register(new x.pY((function(){return r._triggerSyncComputation()}),0)),r._loadingMessageScheduler=r._register(new x.pY((function(){return r._triggerLoadingMessage()}),0)),r._state=0,r._asyncIterable=null,r._asyncIterableDone=!1,r._result=[],r}return(0,a.Z)(n,[{key:"dispose",value:function(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this)}},{key:"_hoverTime",get:function(){return this._editor.getOption(55).delay}},{key:"_firstWaitTime",get:function(){return this._hoverTime/2}},{key:"_secondWaitTime",get:function(){return this._hoverTime-this._firstWaitTime}},{key:"_loadingMessageTime",get:function(){return 3*this._hoverTime}},{key:"_setState",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._state=e,t&&this._fireResult()}},{key:"_triggerAsyncComputation",value:function(){var e=this;this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=(0,x.zS)((function(t){return e._computer.computeAsync(t)})),Z(e,void 0,void 0,(0,L.Z)().mark((function e(){var t,n,i,r,o;return(0,L.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.prev=1,i=N(this._asyncIterable);case 3:return e.next=5,i.next();case 5:if((r=e.sent).done){e.next=11;break}(o=r.value)&&(this._result.push(o),this._fireResult());case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t={error:e.t0};case 16:if(e.prev=16,e.prev=17,!r||r.done||!(n=i.return)){e.next=21;break}return e.next=21,n.call(i);case 21:if(e.prev=21,!t){e.next=24;break}throw t.error;case 24:return e.finish(21);case 25:return e.finish(16);case 26:this._asyncIterableDone=!0,3!==this._state&&4!==this._state||this._setState(0),e.next=33;break;case 30:e.prev=30,e.t1=e.catch(0),(0,S.dL)(e.t1);case 33:case"end":return e.stop()}}),e,this,[[0,30],[1,13,16,26],[17,,21,25]])})))):this._asyncIterableDone=!0}},{key:"_triggerSyncComputation",value:function(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}},{key:"_triggerLoadingMessage",value:function(){3===this._state&&this._setState(4)}},{key:"_fireResult",value:function(){if(1!==this._state&&2!==this._state){var e=0===this._state,t=4===this._state;this._onResult.fire(new D(this._result.slice(0),e,t))}}},{key:"start",value:function(e){if(0===e)0===this._state&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation()}}},{key:"cancel",value:function(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}]),n}(u.JT),R=n(51168),T=n(49525),O=n(8850),P=n(45753),A=n(47510),E=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},H=function(e,t){return function(n,i){t(n,i,e)}},W=_.$,U=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e,i,r){var a;(0,o.Z)(this,n),(a=t.call(this))._editor=e,a._instantiationService=i,a._keybindingService=r,a._widget=a._register(a._instantiationService.createInstance(V,a._editor)),a._isChangingDecorations=!1,a._messages=[],a._messagesAreComplete=!1,a._participants=[];var s,u=(0,m.Z)(R.Ae.getAll());try{for(u.s();!(s=u.n()).done;){var c=s.value;a._participants.push(a._instantiationService.createInstance(c,a._editor))}}catch(l){u.e(l)}finally{u.f()}return a._participants.sort((function(e,t){return e.hoverOrdinal-t.hoverOrdinal})),a._computer=new z(a._editor,a._participants),a._hoverOperation=a._register(new M(a._editor,a._computer)),a._register(a._hoverOperation.onResult((function(e){a._withResult(e.value,e.isComplete,e.hasLoadingMessage)}))),a._register(a._editor.onDidChangeModelDecorations((function(){a._isChangingDecorations||a._onModelDecorationsChanged()}))),a._register(_.addStandardDisposableListener(a._widget.getDomNode(),"keydown",(function(e){e.equals(9)&&a.hide()}))),a._register(w.RW.onDidChange((function(){a._widget.position&&a._computer.anchor&&a._messages.length>0&&(a._widget.clear(),a._renderMessages(a._computer.anchor,a._messages))}))),a}return(0,a.Z)(n,[{key:"_onModelDecorationsChanged",value:function(){this._widget.position&&(this._hoverOperation.cancel(),this._widget.isColorPickerVisible||this._hoverOperation.start(0))}},{key:"maybeShowAt",value:function(e){var t,n=[],i=(0,m.Z)(this._participants);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(r.suggestHoverAnchor){var o=r.suggestHoverAnchor(e);o&&n.push(o)}}}catch(u){i.e(u)}finally{i.f()}var a=e.target;if(6===a.type&&n.push(new R.Qj(0,a.range)),7===a.type){var s=this._editor.getOption(46).typicalHalfwidthCharacterWidth/2;!a.detail.isAfterLines&&"number"===typeof a.detail.horizontalDistanceToText&&a.detail.horizontalDistanceToText<s&&n.push(new R.Qj(0,a.range))}return 0!==n.length&&(n.sort((function(e,t){return t.priority-e.priority})),this._startShowingAt(n[0],0,!1),!0)}},{key:"startShowingAtRange",value:function(e,t,n){this._startShowingAt(new R.Qj(0,e),t,n)}},{key:"_startShowingAt",value:function(e,t,n){if(!this._computer.anchor||!this._computer.anchor.equals(e)){if(this._hoverOperation.cancel(),this._widget.position)if(this._computer.anchor&&e.canAdoptVisibleHover(this._computer.anchor,this._widget.position)){var i=this._messages.filter((function(t){return t.isValidForHoverAnchor(e)}));if(0===i.length)this.hide();else{if(i.length===this._messages.length&&this._messagesAreComplete)return;this._renderMessages(e,i)}}else this.hide();this._computer.anchor=e,this._computer.shouldFocus=n,this._hoverOperation.start(t)}}},{key:"hide",value:function(){this._computer.anchor=null,this._hoverOperation.cancel(),this._widget.hide()}},{key:"isColorPickerVisible",value:function(){return this._widget.isColorPickerVisible}},{key:"containsNode",value:function(e){return this._widget.getDomNode().contains(e)}},{key:"_addLoadingMessage",value:function(e){if(this._computer.anchor){var t,n=(0,m.Z)(this._participants);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.createLoadingMessage){var r=i.createLoadingMessage(this._computer.anchor);if(r)return e.slice(0).concat([r])}}}catch(o){n.e(o)}finally{n.f()}}return e}},{key:"_withResult",value:function(e,t,n){this._messages=n?this._addLoadingMessage(e):e,this._messagesAreComplete=t,this._computer.anchor&&this._messages.length>0?this._renderMessages(this._computer.anchor,this._messages):t&&this.hide()}},{key:"_renderMessages",value:function(e,t){var i,r=this,o=n.computeHoverRanges(e.range,t),a=o.showAtPosition,s=o.showAtRange,c=o.highlightRange,l=new u.SL,d=l.add(new K(this._keybindingService)),h=document.createDocumentFragment(),v=null,g={fragment:h,statusBar:d,setColorPicker:function(e){return v=e},onContentsChanged:function(){return r._widget.onContentsChanged()},hide:function(){return r.hide()}},f=(0,m.Z)(this._participants);try{var p=function(){var e=i.value,n=t.filter((function(t){return t.owner===e}));n.length>0&&l.add(e.renderHoverParts(g,n))};for(f.s();!(i=f.n()).done;)p()}catch(y){f.e(y)}finally{f.f()}if(d.hasContent&&h.appendChild(d.hoverElement),h.hasChildNodes()){if(c){var _=this._editor.createDecorationsCollection();try{this._isChangingDecorations=!0,_.set([{range:c,options:n._DECORATION_OPTIONS}])}finally{this._isChangingDecorations=!1}l.add((0,u.OF)((function(){try{r._isChangingDecorations=!0,_.clear()}finally{r._isChangingDecorations=!1}})))}this._widget.showAt(h,new F(v,a,s,this._editor.getOption(55).above,this._computer.shouldFocus,l))}else l.dispose()}}],[{key:"computeHoverRanges",value:function(e,t){var n,i=e.startLineNumber,r=e.startColumn,o=e.endColumn,a=t[0].range,s=null,u=(0,m.Z)(t);try{for(u.s();!(n=u.n()).done;){var c=n.value;a=l.e.plusRange(a,c.range),c.range.startLineNumber===i&&c.range.endLineNumber===i&&(r=Math.min(r,c.range.startColumn),o=Math.max(o,c.range.endColumn)),c.forceShowAtRange&&(s=c.range)}}catch(d){u.e(d)}finally{u.f()}return{showAtPosition:s?s.getStartPosition():new C.L(e.startLineNumber,r),showAtRange:s||new l.e(i,r,i,o),highlightRange:a}}}]),n}(u.JT);U._DECORATION_OPTIONS=k.qx.register({description:"content-hover-highlight",className:"hoverHighlight"}),U=E([H(1,O.TG),H(2,P.d)],U);var F=(0,a.Z)((function e(t,n,i,r,a,s){(0,o.Z)(this,e),this.colorPicker=t,this.showAtPosition=n,this.showAtRange=i,this.preferAbove=r,this.stoleFocus=a,this.disposables=s})),V=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e,i){var r;return(0,o.Z)(this,n),(r=t.call(this))._editor=e,r._contextKeyService=i,r.allowEditorOverflow=!0,r._hoverVisibleKey=d.u.hoverVisible.bindTo(r._contextKeyService),r._hover=r._register(new y.c),r._visibleData=null,r._register(r._editor.onDidLayoutChange((function(){return r._layout()}))),r._register(r._editor.onDidChangeConfiguration((function(e){e.hasChanged(46)&&r._updateFont()}))),r._setVisibleData(null),r._layout(),r._editor.addContentWidget((0,g.Z)(r)),r}return(0,a.Z)(n,[{key:"position",get:function(){var e,t;return null!==(t=null===(e=this._visibleData)||void 0===e?void 0:e.showAtPosition)&&void 0!==t?t:null}},{key:"isColorPickerVisible",get:function(){var e;return Boolean(null===(e=this._visibleData)||void 0===e?void 0:e.colorPicker)}},{key:"dispose",value:function(){this._editor.removeContentWidget(this),this._visibleData&&this._visibleData.disposables.dispose(),(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this)}},{key:"getId",value:function(){return n.ID}},{key:"getDomNode",value:function(){return this._hover.containerDomNode}},{key:"getPosition",value:function(){if(!this._visibleData)return null;var e=this._visibleData.preferAbove;return!e&&this._contextKeyService.getContextKeyValue(A._y.Visible.key)&&(e=!0),{position:this._visibleData.showAtPosition,range:this._visibleData.showAtRange,preference:e?[1,2]:[2,1]}}},{key:"_setVisibleData",value:function(e){this._visibleData&&this._visibleData.disposables.dispose(),this._visibleData=e,this._hoverVisibleKey.set(!!this._visibleData),this._hover.containerDomNode.classList.toggle("hidden",!this._visibleData)}},{key:"_layout",value:function(){var e=Math.max(this._editor.getLayoutInfo().height/4,250),t=this._editor.getOption(46),n=t.fontSize,i=t.lineHeight;this._hover.contentsDomNode.style.fontSize="".concat(n,"px"),this._hover.contentsDomNode.style.lineHeight="".concat(i/n),this._hover.contentsDomNode.style.maxHeight="".concat(e,"px"),this._hover.contentsDomNode.style.maxWidth="".concat(Math.max(.66*this._editor.getLayoutInfo().width,500),"px")}},{key:"_updateFont",value:function(){var e=this;Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach((function(t){return e._editor.applyFontInfo(t)}))}},{key:"showAt",value:function(e,t){this._setVisibleData(t),this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._hover.contentsDomNode.style.paddingBottom="",this._updateFont(),this.onContentsChanged(),this._editor.render(),this.onContentsChanged(),t.stoleFocus&&this._hover.containerDomNode.focus(),t.colorPicker&&t.colorPicker.layout()}},{key:"hide",value:function(){if(this._visibleData){var e=this._visibleData.stoleFocus;this._setVisibleData(null),this._editor.layoutContentWidget(this),e&&this._editor.focus()}}},{key:"onContentsChanged",value:function(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged();var e=this._hover.scrollbar.getScrollDimensions();if(e.scrollWidth>e.width){var t="".concat(this._hover.scrollbar.options.horizontalScrollbarSize,"px");this._hover.contentsDomNode.style.paddingBottom!==t&&(this._hover.contentsDomNode.style.paddingBottom=t,this._editor.layoutContentWidget(this),this._hover.onContentsChanged())}}},{key:"clear",value:function(){this._hover.contentsDomNode.textContent=""}}]),n}(u.JT);V.ID="editor.contrib.contentHoverWidget",V=E([H(1,T.i6)],V);var K=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this))._keybindingService=e,i._hasContent=!1,i.hoverElement=W("div.hover-row.status-bar"),i.actionsElement=_.append(i.hoverElement,W("div.actions")),i}return(0,a.Z)(n,[{key:"hasContent",get:function(){return this._hasContent}},{key:"addAction",value:function(e){var t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;return this._hasContent=!0,this._register(y.S.render(this.actionsElement,e,n))}},{key:"append",value:function(e){var t=_.append(this.actionsElement,e);return this._hasContent=!0,t}}]),n}(u.JT);K=E([H(0,P.d)],K);var z=function(){function e(t,n){(0,o.Z)(this,e),this._editor=t,this._participants=n,this._anchor=null,this._shouldFocus=!1}return(0,a.Z)(e,[{key:"anchor",get:function(){return this._anchor},set:function(e){this._anchor=e}},{key:"shouldFocus",get:function(){return this._shouldFocus},set:function(e){this._shouldFocus=e}},{key:"computeAsync",value:function(t){var n=this._anchor;if(!this._editor.hasModel()||!n)return x.Aq.EMPTY;var i=e._getLineDecorations(this._editor,n);return x.Aq.merge(this._participants.map((function(e){return e.computeAsync?e.computeAsync(n,i,t):x.Aq.EMPTY})))}},{key:"computeSync",value:function(){if(!this._editor.hasModel()||!this._anchor)return[];var t,n=e._getLineDecorations(this._editor,this._anchor),i=[],r=(0,m.Z)(this._participants);try{for(r.s();!(t=r.n()).done;){var o=t.value;i=i.concat(o.computeSync(this._anchor,n))}}catch(a){r.e(a)}finally{r.f()}return(0,b.kX)(i)}}],[{key:"_getLineDecorations",value:function(e,t){if(1!==t.type)return[];var n=e.getModel(),i=t.range.startLineNumber;if(i>n.getLineCount())return[];var r=n.getLineMaxColumn(i);return e.getLineDecorations(i).filter((function(e){if(e.options.isWholeLine)return!0;var n=e.range.startLineNumber===i?e.range.startColumn:1,o=e.range.endLineNumber===i?e.range.endColumn:r;if(e.options.showIfCollapsed){if(n>t.range.startColumn+1||t.range.endColumn-1>o)return!1}else if(n>t.range.startColumn||t.range.endColumn>o)return!1;return!0}))}}]),e}(),j=n(93433),Y=n(67277),q=n(65163),B=n(74990),Q=_.$,G=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B.SW;return(0,o.Z)(this,n),(r=t.call(this))._renderDisposeables=r._register(new u.SL),r._editor=e,r._isVisible=!1,r._messages=[],r._hover=r._register(new y.c),r._hover.containerDomNode.classList.toggle("hidden",!r._isVisible),r._markdownRenderer=r._register(new q.$({editor:r._editor},i,a)),r._computer=new J(r._editor),r._hoverOperation=r._register(new M(r._editor,r._computer)),r._register(r._hoverOperation.onResult((function(e){r._withResult(e.value)}))),r._register(r._editor.onDidChangeModelDecorations((function(){return r._onModelDecorationsChanged()}))),r._register(r._editor.onDidChangeConfiguration((function(e){e.hasChanged(46)&&r._updateFont()}))),r._editor.addOverlayWidget((0,g.Z)(r)),r}return(0,a.Z)(n,[{key:"dispose",value:function(){this._editor.removeOverlayWidget(this),(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this)}},{key:"getId",value:function(){return n.ID}},{key:"getDomNode",value:function(){return this._hover.containerDomNode}},{key:"getPosition",value:function(){return null}},{key:"_updateFont",value:function(){var e=this;Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach((function(t){return e._editor.applyFontInfo(t)}))}},{key:"_onModelDecorationsChanged",value:function(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}},{key:"startShowingAt",value:function(e){this._computer.lineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._hoverOperation.start(0))}},{key:"hide",value:function(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}},{key:"_withResult",value:function(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}},{key:"_renderMessages",value:function(e,t){this._renderDisposeables.clear();var n,i=document.createDocumentFragment(),r=(0,m.Z)(t);try{for(r.s();!(n=r.n()).done;){var o=n.value,a=Q("div.hover-row.markdown-hover"),s=_.append(a,Q("div.hover-contents")),u=this._renderDisposeables.add(this._markdownRenderer.render(o.value));s.appendChild(u.element),i.appendChild(a)}}catch(c){r.e(c)}finally{r.f()}this._updateContents(i),this._showAt(e)}},{key:"_updateContents",value:function(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}},{key:"_showAt",value:function(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));var t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(e),i=this._editor.getScrollTop(),r=this._editor.getOption(61),o=n-i-(this._hover.containerDomNode.clientHeight-r)/2;this._hover.containerDomNode.style.left="".concat(t.glyphMarginLeft+t.glyphMarginWidth,"px"),this._hover.containerDomNode.style.top="".concat(Math.max(Math.round(o),0),"px")}}]),n}(u.JT);G.ID="editor.contrib.modesGlyphHoverWidget";var J=function(){function e(t){(0,o.Z)(this,e),this._editor=t,this._lineNumber=-1}return(0,a.Z)(e,[{key:"lineNumber",get:function(){return this._lineNumber},set:function(e){this._lineNumber=e}},{key:"computeSync",value:function(){var e=function(e){return{value:e}},t=this._editor.getLineDecorations(this._lineNumber),n=[];if(!t)return n;var i,r=(0,m.Z)(t);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(o.options.glyphMarginClassName){var a=o.options.glyphMarginHoverMessage;a&&!(0,Y.CP)(a)&&n.push.apply(n,(0,j.Z)((0,b._2)(a).map(e)))}}}catch(s){r.e(s)}finally{r.f()}return n}}]),e}(),$=n(87697),X=n(6574),ee=n(3553),te=n(38305),ne=n(34408),ie=n(84617),re=n(92547),oe=n(23456),ae=n(36175),se=n(68344),ue=n(52721),ce=n(26562),le=n(45161),de=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},he=function(e,t){return function(n,i){t(n,i,e)}},ve=_.$,ge=function(){function e(t,n,i){(0,o.Z)(this,e),this.owner=t,this.range=n,this.marker=i}return(0,a.Z)(e,[{key:"isValidForHoverAnchor",value:function(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}]),e}(),fe={type:1,filter:{include:ae.yN.QuickFix},triggerAction:ae.aQ.QuickFixHover},pe=function(){function e(t,n,i,r){(0,o.Z)(this,e),this._editor=t,this._markerDecorationsService=n,this._openerService=i,this._languageFeaturesService=r,this.hoverOrdinal=5,this.recentMarkerCodeActionsInfo=void 0}return(0,a.Z)(e,[{key:"computeSync",value:function(e,t){if(!this._editor.hasModel()||1!==e.type)return[];var n,i=this._editor.getModel(),r=e.range.startLineNumber,o=i.getLineMaxColumn(r),a=[],s=(0,m.Z)(t);try{for(s.s();!(n=s.n()).done;){var u=n.value,c=u.range.startLineNumber===r?u.range.startColumn:1,d=u.range.endLineNumber===r?u.range.endColumn:o,h=this._markerDecorationsService.getMarker(i.uri,u);if(h){var v=new l.e(e.range.startLineNumber,c,e.range.startLineNumber,d);a.push(new ge(this,v,h))}}}catch(g){s.e(g)}finally{s.f()}return a}},{key:"renderHoverParts",value:function(e,t){var n=this;if(!t.length)return u.JT.None;var i=new u.SL;t.forEach((function(t){return e.fragment.appendChild(n.renderMarkerHover(t,i))}));var r=1===t.length?t[0]:t.sort((function(e,t){return ue.ZL.compare(e.marker.severity,t.marker.severity)}))[0];return this.renderMarkerStatusbar(e,r,i),i}},{key:"renderMarkerHover",value:function(e,t){var n=this,i=ve("div.hover-row"),r=_.append(i,ve("div.marker.hover-contents")),o=e.marker,a=o.source,s=o.message,u=o.code,c=o.relatedInformation;this._editor.applyFontInfo(r);var l=_.append(r,ve("span"));if(l.style.whiteSpace="pre-wrap",l.innerText=s,a||u)if(u&&"string"!==typeof u){var d=ve("span");if(a)_.append(d,ve("span")).innerText=a;var h=_.append(d,ve("a.code-link"));h.setAttribute("href",u.target.toString()),t.add(_.addDisposableListener(h,"click",(function(e){n._openerService.open(u.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()}))),_.append(h,ve("span")).innerText=u.value;var v=_.append(r,d);v.style.opacity="0.6",v.style.paddingLeft="6px"}else{var g=_.append(r,ve("span"));g.style.opacity="0.6",g.style.paddingLeft="6px",g.innerText=a&&u?"".concat(a,"(").concat(u,")"):a||"(".concat(u,")")}if((0,b.Of)(c)){var f,p=(0,m.Z)(c);try{var y=function(){var e=f.value,i=e.message,o=e.resource,a=e.startLineNumber,s=e.startColumn,u=_.append(r,ve("div"));u.style.marginTop="8px";var c=_.append(u,ve("a"));c.innerText="".concat((0,ne.EZ)(o),"(").concat(a,", ").concat(s,"): "),c.style.cursor="pointer",t.add(_.addDisposableListener(c,"click",(function(e){e.stopPropagation(),e.preventDefault(),n._openerService&&n._openerService.open(o,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:a,startColumn:s}}}).catch(S.dL)})));var l=_.append(u,ve("span"));l.innerText=i,n._editor.applyFontInfo(l)};for(p.s();!(f=p.n()).done;)y()}catch(C){p.e(C)}finally{p.f()}}return i}},{key:"renderMarkerStatusbar",value:function(e,t,n){var i=this;if(t.marker.severity!==ue.ZL.Error&&t.marker.severity!==ue.ZL.Warning&&t.marker.severity!==ue.ZL.Info||e.statusBar.addAction({label:$.NC("view problem","View Problem"),commandId:se.NextMarkerAction.ID,run:function(){var n;e.hide(),null===(n=se.MarkerController.get(i._editor))||void 0===n||n.showAtMarker(t.marker),i._editor.focus()}}),!this._editor.getOption(83)){var r=e.statusBar.append(ve("div"));this.recentMarkerCodeActionsInfo&&(ue.H0.makeKey(this.recentMarkerCodeActionsInfo.marker)===ue.H0.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(r.textContent=$.NC("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);var o=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?u.JT.None:n.add((0,x.Vg)((function(){return r.textContent=$.NC("checkingForQuickFixes","Checking for quick fixes...")}),200));r.textContent||(r.textContent=String.fromCharCode(160));var a=this.getCodeActions(t.marker);n.add((0,u.OF)((function(){return a.cancel()}))),a.then((function(a){if(o.dispose(),i.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:a.validActions.length>0},!i.recentMarkerCodeActionsInfo.hasCodeActions)return a.dispose(),void(r.textContent=$.NC("noQuickFixes","No quick fixes available"));r.style.display="none";var s=!1;n.add((0,u.OF)((function(){s||a.dispose()}))),e.statusBar.addAction({label:$.NC("quick fixes","Quick Fix..."),commandId:oe.E7.Id,run:function(t){s=!0;var n=oe.pY.get(i._editor),r=_.getDomNodePagePosition(t);e.hide(),null===n||void 0===n||n.showCodeActions(fe,a,{x:r.left+6,y:r.top+r.height+6,width:r.width,height:r.height})}})}),S.dL)}}},{key:"getCodeActions",value:function(e){var t=this;return(0,x.PG)((function(n){return(0,re.aI)(t._languageFeaturesService.codeActionProvider,t._editor.getModel(),new l.e(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),fe,ce.Ex.None,n)}))}}]),e}();pe=de([he(1,ie.i),he(2,B.v4),he(3,le.p)],pe),(0,ee.Ic)((function(e,t){var n=e.getColor(X.url);n&&t.addRule(".monaco-hover .hover-contents a.code-link span { color: ".concat(n,"; }"));var i=e.getColor(X.sgC);i&&t.addRule(".monaco-hover .hover-contents a.code-link span:hover { color: ".concat(i,"; }"))}));var me=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},_e=function(e,t){return function(n,i){t(n,i,e)}},ye=function(){function e(t,n,i,r,a){var s=this;(0,o.Z)(this,e),this._editor=t,this._instantiationService=n,this._openerService=i,this._languageService=r,this._toUnhook=new u.SL,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration((function(e){e.hasChanged(55)&&(s._unhookEvents(),s._hookEvents())}))}return(0,a.Z)(e,[{key:"_hookEvents",value:function(){var e=this,t=this._editor.getOption(55);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown((function(t){return e._onEditorMouseDown(t)}))),this._toUnhook.add(this._editor.onMouseUp((function(t){return e._onEditorMouseUp(t)}))),this._toUnhook.add(this._editor.onMouseMove((function(t){return e._onEditorMouseMove(t)}))),this._toUnhook.add(this._editor.onKeyDown((function(t){return e._onKeyDown(t)})))):(this._toUnhook.add(this._editor.onMouseMove((function(t){return e._onEditorMouseMove(t)}))),this._toUnhook.add(this._editor.onKeyDown((function(t){return e._onKeyDown(t)})))),this._toUnhook.add(this._editor.onMouseLeave((function(t){return e._onEditorMouseLeave(t)}))),this._toUnhook.add(this._editor.onDidChangeModel((function(){return e._hideWidgets()}))),this._toUnhook.add(this._editor.onDidScrollChange((function(t){return e._onEditorScrollChanged(t)})))}},{key:"_unhookEvents",value:function(){this._toUnhook.clear()}},{key:"_onEditorScrollChanged",value:function(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}},{key:"_onEditorMouseDown",value:function(e){this._isMouseDown=!0;var t=e.target;9!==t.type||t.detail!==V.ID?12===t.type&&t.detail===G.ID||(12!==t.type&&(this._hoverClicked=!1),this._hideWidgets()):this._hoverClicked=!0}},{key:"_onEditorMouseUp",value:function(e){this._isMouseDown=!1}},{key:"_onEditorMouseLeave",value:function(e){var t,n=e.event.browserEvent.relatedTarget;(null===(t=this._contentWidget)||void 0===t?void 0:t.containsNode(n))||this._hideWidgets()}},{key:"_onEditorMouseMove",value:function(e){var t,n,i,r,o,a=e.target;if((!this._isMouseDown||!this._hoverClicked)&&(!this._isHoverSticky||9!==a.type||a.detail!==V.ID)&&(!this._isHoverSticky||(null===(n=null===(t=e.event.browserEvent.view)||void 0===t?void 0:t.getSelection())||void 0===n?void 0:n.isCollapsed))&&(this._isHoverSticky||9!==a.type||a.detail!==V.ID||!(null===(i=this._contentWidget)||void 0===i?void 0:i.isColorPickerVisible()))&&(!this._isHoverSticky||12!==a.type||a.detail!==G.ID))if(this._isHoverEnabled){if(!this._getOrCreateContentWidget().maybeShowAt(e))return 2===a.type&&a.position?(null===(o=this._contentWidget)||void 0===o||o.hide(),this._glyphWidget||(this._glyphWidget=new G(this._editor,this._languageService,this._openerService)),void this._glyphWidget.startShowingAt(a.position.lineNumber)):void this._hideWidgets();null===(r=this._glyphWidget)||void 0===r||r.hide()}else this._hideWidgets()}},{key:"_onKeyDown",value:function(e){5!==e.keyCode&&6!==e.keyCode&&57!==e.keyCode&&4!==e.keyCode&&this._hideWidgets()}},{key:"_hideWidgets",value:function(){var e,t,n;this._isMouseDown&&this._hoverClicked&&(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||(this._hoverClicked=!1,null===(t=this._glyphWidget)||void 0===t||t.hide(),null===(n=this._contentWidget)||void 0===n||n.hide())}},{key:"_getOrCreateContentWidget",value:function(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(U,this._editor)),this._contentWidget}},{key:"isColorPickerVisible",value:function(){var e;return(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||!1}},{key:"showContentHover",value:function(e,t,n){this._getOrCreateContentWidget().startShowingAtRange(e,t,n)}},{key:"dispose",value:function(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),null===(e=this._glyphWidget)||void 0===e||e.dispose(),null===(t=this._contentWidget)||void 0===t||t.dispose()}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();ye.ID="editor.contrib.hover",ye=me([_e(1,O.TG),_e(2,B.v4),_e(3,h.O),_e(4,T.i6)],ye);var be=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,{id:"editor.action.showHover",label:$.NC({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:d.u.editorTextFocus,primary:(0,s.gx)(2089,2087),weight:100}})}return(0,a.Z)(n,[{key:"run",value:function(e,t){if(t.hasModel()){var n=ye.get(t);if(n){var i=t.getPosition(),r=new l.e(i.lineNumber,i.column,i.lineNumber,i.column),o=2===t.getOption(2);n.showContentHover(r,1,o)}}}}]),n}(c.R6),Ce=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,{id:"editor.action.showDefinitionPreviewHover",label:$.NC({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}return(0,a.Z)(n,[{key:"run",value:function(e,t){var n=ye.get(t);if(n){var i=t.getPosition();if(i){var r=new l.e(i.lineNumber,i.column,i.lineNumber,i.column),o=v.GotoDefinitionAtPositionEditorContribution.get(t);if(o)o.startFindDefinitionFromCursor(i).then((function(){n.showContentHover(r,1,!0)}))}}}}]),n}(c.R6);(0,c._K)(ye.ID,ye),(0,c.Qr)(be),(0,c.Qr)(Ce),R.Ae.register(te.D5),R.Ae.register(pe),(0,ee.Ic)((function(e,t){var n=e.getColor(X.ptc);n&&t.addRule(".monaco-editor .hoverHighlight { background-color: ".concat(n,"; }"));var i=e.getColor(X.yJx);i&&t.addRule(".monaco-editor .monaco-hover { background-color: ".concat(i,"; }"));var r=e.getColor(X.CNo);r&&(t.addRule(".monaco-editor .monaco-hover { border: 1px solid ".concat(r,"; }")),t.addRule(".monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ".concat(r.transparent(.5),"; }")),t.addRule(".monaco-editor .monaco-hover hr { border-top: 1px solid ".concat(r.transparent(.5),"; }")),t.addRule(".monaco-editor .monaco-hover hr { border-bottom: 0px solid ".concat(r.transparent(.5),"; }")));var o=e.getColor(X.url);o&&t.addRule(".monaco-editor .monaco-hover a { color: ".concat(o,"; }"));var a=e.getColor(X.sgC);a&&t.addRule(".monaco-editor .monaco-hover a:hover { color: ".concat(a,"; }"));var s=e.getColor(X.Sbf);s&&t.addRule(".monaco-editor .monaco-hover { color: ".concat(s,"; }"));var u=e.getColor(X.LoV);u&&t.addRule(".monaco-editor .monaco-hover .hover-row .actions { background-color: ".concat(u,"; }"));var c=e.getColor(X.SwI);c&&t.addRule(".monaco-editor .monaco-hover code { background-color: ".concat(c,"; }"))}))},51168:function(e,t,n){n.d(t,{Ae:function(){return s},Qj:function(){return o},YM:function(){return a}});var i=n(15671),r=n(43144),o=function(){function e(t,n){(0,i.Z)(this,e),this.priority=t,this.range=n,this.type=1}return(0,r.Z)(e,[{key:"equals",value:function(e){return 1===e.type&&this.range.equalsRange(e.range)}},{key:"canAdoptVisibleHover",value:function(e,t){return 1===e.type&&t.lineNumber===this.range.startLineNumber}}]),e}(),a=function(){function e(t,n,r){(0,i.Z)(this,e),this.priority=t,this.owner=n,this.range=r,this.type=2}return(0,r.Z)(e,[{key:"equals",value:function(e){return 2===e.type&&this.owner===e.owner}},{key:"canAdoptVisibleHover",value:function(e,t){return 2===e.type&&this.owner===e.owner}}]),e}(),s=new(function(){function e(){(0,i.Z)(this,e),this._participants=[]}return(0,r.Z)(e,[{key:"register",value:function(e){this._participants.push(e)}},{key:"getAll",value:function(){return this._participants}}]),e}())},38305:function(e,t,n){n.d(t,{D5:function(){return L},c:function(){return x},hU:function(){return w}});var i=n(37762),r=n(15671),o=n(43144),a=n(53210),s=n(71881),u=n(32590),c=n(67277),l=n(10526),d=n(65163),h=n(10849),v=n(30788),g=n(63024),f=n(25539),p=n(87697),m=n(64644),_=n(74990),y=n(45161),b=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},C=function(e,t){return function(n,i){t(n,i,e)}},k=a.$,w=function(){function e(t,n,i,o){(0,r.Z)(this,e),this.owner=t,this.range=n,this.contents=i,this.ordinal=o}return(0,o.Z)(e,[{key:"isValidForHoverAnchor",value:function(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}]),e}(),L=function(){function e(t,n,i,o,a){(0,r.Z)(this,e),this._editor=t,this._languageService=n,this._openerService=i,this._configurationService=o,this._languageFeaturesService=a,this.hoverOrdinal=2}return(0,o.Z)(e,[{key:"createLoadingMessage",value:function(e){return new w(this,e.range,[(new c.W5).appendText(p.NC("modesContentHover.loading","Loading..."))],2e3)}},{key:"computeSync",value:function(e,t){if(!this._editor.hasModel()||1!==e.type)return[];var n=this._editor.getModel(),r=e.range.startLineNumber,o=n.getLineMaxColumn(r),a=[],u=1e3,l=n.getLineLength(r),d=n.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),h=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:d});"number"===typeof h&&l>=h&&a.push(new w(this,e.range,[{value:p.NC("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],u++));var g,f=(0,i.Z)(t);try{for(f.s();!(g=f.n()).done;){var m=g.value,_=m.range.startLineNumber===r?m.range.startColumn:1,y=m.range.endLineNumber===r?m.range.endColumn:o,b=m.options.hoverMessage;if(b&&!(0,c.CP)(b)){var C=new v.e(e.range.startLineNumber,_,e.range.startLineNumber,y);a.push(new w(this,C,(0,s._2)(b),u++))}}}catch(k){f.e(k)}finally{f.f()}return a}},{key:"computeAsync",value:function(e,t,n){var i=this;if(!this._editor.hasModel()||1!==e.type)return u.Aq.EMPTY;var r=this._editor.getModel();if(!this._languageFeaturesService.hoverProvider.has(r))return u.Aq.EMPTY;var o=new h.L(e.range.startLineNumber,e.range.startColumn);return(0,f.R8)(this._languageFeaturesService.hoverProvider,r,o,n).filter((function(e){return!(0,c.CP)(e.hover.contents)})).map((function(t){var n=t.hover.range?v.e.lift(t.hover.range):e.range;return new w(i,n,t.hover.contents,t.ordinal)}))}},{key:"renderHoverParts",value:function(e,t){return x(e,t,this._editor,this._languageService,this._openerService)}}]),e}();function x(e,t,n,r,o){t.sort((function(e,t){return e.ordinal-t.ordinal}));var s,u=new l.SL,h=(0,i.Z)(t);try{for(h.s();!(s=h.n()).done;){var v,g=s.value,f=(0,i.Z)(g.contents);try{var p=function(){var t=v.value;if((0,c.CP)(t))return"continue";var i=k("div.hover-row.markdown-hover"),s=a.append(i,k("div.hover-contents")),l=u.add(new d.$({editor:n},r,o));u.add(l.onDidRenderAsync((function(){s.className="hover-contents code-hover-contents",e.onContentsChanged()})));var h=u.add(l.render(t));s.appendChild(h.element),e.fragment.appendChild(i)};for(f.s();!(v=f.n()).done;)p()}catch(m){f.e(m)}finally{f.f()}}}catch(m){h.e(m)}finally{h.f()}return u}L=b([C(1,g.O),C(2,_.v4),C(3,m.Ui),C(4,y.p)],L)},52662:function(e,t,n){n.r(t);var i=n(60136),r=n(27277),o=n(15671),a=n(43144),s=n(32590),u=n(68552),c=n(50004),l=n(98351),d=n(30788),h=n(52091),v=n(44474),g=n(77161),f=n(70437),p=n(2374),m=n(87697),_=n(3553),y=function(){function e(t,n,i){(0,o.Z)(this,e),this._editRange=t,this._originalSelection=n,this._text=i}return(0,a.Z)(e,[{key:"getEditOperations",value:function(e,t){t.addTrackedEditOperation(this._editRange,this._text)}},{key:"computeCursorState",value:function(e,t){var n=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new h.Y(n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn),n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn)):new h.Y(n.endLineNumber,n.endColumn-this._text.length,n.endLineNumber,n.endColumn)}}]),e}(),b=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},C=function(e,t){return function(n,i){t(n,i,e)}},k=function(){function e(t,n){(0,o.Z)(this,e),this.editor=t,this.editorWorkerService=n,this.decorations=this.editor.createDecorationsCollection()}return(0,a.Z)(e,[{key:"dispose",value:function(){}},{key:"run",value:function(t,n){var i=this;this.currentRequest&&this.currentRequest.cancel();var r=this.editor.getSelection(),o=this.editor.getModel();if(o&&r){var a=r;if(a.startLineNumber===a.endLineNumber){var l=new c.yy(this.editor,5),v=o.uri;return this.editorWorkerService.canNavigateValueSet(v)?(this.currentRequest=(0,s.PG)((function(e){return i.editorWorkerService.navigateValueSet(v,a,n)})),this.currentRequest.then((function(n){if(n&&n.range&&n.value&&l.validate(i.editor)){var r=d.e.lift(n.range),o=n.range,c=n.value.length-(a.endColumn-a.startColumn);o={startLineNumber:o.startLineNumber,startColumn:o.startColumn,endLineNumber:o.endLineNumber,endColumn:o.startColumn+n.value.length},c>1&&(a=new h.Y(a.startLineNumber,a.startColumn,a.endLineNumber,a.endColumn+c-1));var v=new y(r,a,n.value);i.editor.pushUndoStop(),i.editor.executeCommand(t,v),i.editor.pushUndoStop(),i.decorations.set([{range:o,options:e.DECORATION}]),i.decorationRemover&&i.decorationRemover.cancel(),i.decorationRemover=(0,s.Vs)(350),i.decorationRemover.then((function(){return i.decorations.clear()})).catch(u.dL)}})).catch(u.dL)):Promise.resolve(void 0)}}}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();k.ID="editor.contrib.inPlaceReplaceController",k.DECORATION=g.qx.register({description:"in-place-replace",className:"valueSetReplacement"}),k=b([C(1,f.p)],k);var w=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,{id:"editor.action.inPlaceReplace.up",label:m.NC("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:v.u.writable,kbOpts:{kbExpr:v.u.editorTextFocus,primary:3154,weight:100}})}return(0,a.Z)(n,[{key:"run",value:function(e,t){var n=k.get(t);return n?n.run(this.id,!0):Promise.resolve(void 0)}}]),n}(l.R6),L=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,{id:"editor.action.inPlaceReplace.down",label:m.NC("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:v.u.writable,kbOpts:{kbExpr:v.u.editorTextFocus,primary:3156,weight:100}})}return(0,a.Z)(n,[{key:"run",value:function(e,t){var n=k.get(t);return n?n.run(this.id,!1):Promise.resolve(void 0)}}]),n}(l.R6);(0,l._K)(k.ID,k),(0,l.Qr)(w),(0,l.Qr)(L),(0,_.Ic)((function(e,t){var n=e.getColor(p.Dl);n&&t.addRule(".monaco-editor.vs .valueSetReplacement { outline: solid 2px ".concat(n,"; }"))}))},90570:function(e,t,n){function i(e,t){for(var n=0,i=0;i<e.length;i++)"\t"===e.charAt(i)?n+=t:n++;return n}function r(e,t,n){e=e<0?0:e;var i="";if(!n){var r=Math.floor(e/t);e%=t;for(var o=0;o<r;o++)i+="\t"}for(var a=0;a<e;a++)i+=" ";return i}n.d(t,{J:function(){return r},Y:function(){return i}})},13080:function(e,t,n){n.r(t),n.d(t,{AutoIndentOnPaste:function(){return A},AutoIndentOnPasteCommand:function(){return P},ChangeIndentationSizeAction:function(){return N},DetectIndentation:function(){return R},IndentUsingSpaces:function(){return M},IndentUsingTabs:function(){return D},IndentationToSpacesAction:function(){return I},IndentationToSpacesCommand:function(){return H},IndentationToTabsAction:function(){return Z},IndentationToTabsCommand:function(){return W},ReindentLinesAction:function(){return T},ReindentSelectedLinesAction:function(){return O},getReindentEditOperations:function(){return S}});var i=n(93433),r=n(37762),o=n(15671),a=n(43144),s=n(60136),u=n(27277),c=n(10526),l=n(26684),d=n(98351),h=n(55428),v=n(15261),g=n(30788),f=n(52091),p=n(44474),m=n(26765),_=n(74463),y=n(90570),b=n(87697),C=n(4581),k=n(85889),w=n(83692),L=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},x=function(e,t){return function(n,i){t(n,i,e)}};function S(e,t,n,i,r){if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return[];var o=t.getLanguageConfiguration(e.getLanguageId()).indentationRules;if(!o)return[];for(i=Math.min(i,e.getLineCount());n<=i&&o.unIndentedLinePattern;){var a=e.getLineContent(n);if(!o.unIndentedLinePattern.test(a))break;n++}if(n>i-1)return[];var s,u=e.getOptions(),c=u.tabSize,d=u.indentSize,g=u.insertSpaces,p=function(e,t){return t=t||1,h.U.shiftIndent(e,e.length+t,c,d,g)},m=function(e,t){return t=t||1,h.U.unshiftIndent(e,e.length+t,c,d,g)},_=[],y=e.getLineContent(n),b=y;if(void 0!==r&&null!==r){s=r;var C=l.V8(y);b=s+y.substring(C.length),o.decreaseIndentPattern&&o.decreaseIndentPattern.test(b)&&(b=(s=m(s))+y.substring(C.length)),y!==b&&_.push(v.h.replaceMove(new f.Y(n,1,n,C.length+1),(0,k.x)(s,d,g)))}else s=l.V8(y);var w=s;o.increaseIndentPattern&&o.increaseIndentPattern.test(b)?(w=p(w),s=p(s)):o.indentNextLinePattern&&o.indentNextLinePattern.test(b)&&(w=p(w));for(var L=++n;L<=i;L++){var x=e.getLineContent(L),S=l.V8(x),I=w+x.substring(S.length);o.decreaseIndentPattern&&o.decreaseIndentPattern.test(I)&&(w=m(w),s=m(s)),S!==w&&_.push(v.h.replaceMove(new f.Y(L,1,L,S.length+1),(0,k.x)(w,d,g))),o.unIndentedLinePattern&&o.unIndentedLinePattern.test(x)||(w=o.increaseIndentPattern&&o.increaseIndentPattern.test(I)?s=p(s):o.indentNextLinePattern&&o.indentNextLinePattern.test(I)?p(w):s)}return _}var I=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,{id:n.ID,label:b.NC("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:p.u.writable})}return(0,a.Z)(n,[{key:"run",value:function(e,t){var n=t.getModel();if(n){var i=n.getOptions(),r=t.getSelection();if(r){var o=new H(r,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop(),n.updateOptions({insertSpaces:!0})}}}}]),n}(d.R6);I.ID="editor.action.indentationToSpaces";var Z=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,{id:n.ID,label:b.NC("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:p.u.writable})}return(0,a.Z)(n,[{key:"run",value:function(e,t){var n=t.getModel();if(n){var i=n.getOptions(),r=t.getSelection();if(r){var o=new W(r,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop(),n.updateOptions({insertSpaces:!1})}}}}]),n}(d.R6);Z.ID="editor.action.indentationToTabs";var N=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e,i){var r;return(0,o.Z)(this,n),(r=t.call(this,i)).insertSpaces=e,r}return(0,a.Z)(n,[{key:"run",value:function(e,t){var n=this,i=e.get(C.eJ),r=e.get(_.q),o=t.getModel();if(o){var a=r.getCreationOptions(o.getLanguageId(),o.uri,o.isForSimpleWidget),s=[1,2,3,4,5,6,7,8].map((function(e){return{id:e.toString(),label:e.toString(),description:e===a.tabSize?b.NC("configuredTabSize","Configured Tab Size"):void 0}})),u=Math.min(o.getOptions().tabSize-1,7);setTimeout((function(){i.pick(s,{placeHolder:b.NC({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:s[u]}).then((function(e){e&&o&&!o.isDisposed()&&o.updateOptions({tabSize:parseInt(e.label,10),insertSpaces:n.insertSpaces})}))}),50)}}}]),n}(d.R6),D=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,!1,{id:n.ID,label:b.NC("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}return(0,a.Z)(n)}(N);D.ID="editor.action.indentUsingTabs";var M=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,!0,{id:n.ID,label:b.NC("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}return(0,a.Z)(n)}(N);M.ID="editor.action.indentUsingSpaces";var R=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,{id:n.ID,label:b.NC("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}return(0,a.Z)(n,[{key:"run",value:function(e,t){var n=e.get(_.q),i=t.getModel();if(i){var r=n.getCreationOptions(i.getLanguageId(),i.uri,i.isForSimpleWidget);i.detectIndentation(r.insertSpaces,r.tabSize)}}}]),n}(d.R6);R.ID="editor.action.detectIndentation";var T=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,{id:"editor.action.reindentlines",label:b.NC("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:p.u.writable})}return(0,a.Z)(n,[{key:"run",value:function(e,t){var n=e.get(m.c_),i=t.getModel();if(i){var r=S(i,n,1,i.getLineCount());r.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop())}}}]),n}(d.R6),O=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,{id:"editor.action.reindentselectedlines",label:b.NC("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:p.u.writable})}return(0,a.Z)(n,[{key:"run",value:function(e,t){var n=e.get(m.c_),o=t.getModel();if(o){var a=t.getSelections();if(null!==a){var s,u=[],c=(0,r.Z)(a);try{for(c.s();!(s=c.n()).done;){var l=s.value,d=l.startLineNumber,h=l.endLineNumber;if(d!==h&&1===l.endColumn&&h--,1===d){if(d===h)continue}else d--;var v=S(o,n,d,h);u.push.apply(u,(0,i.Z)(v))}}catch(g){c.e(g)}finally{c.f()}u.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,u),t.pushUndoStop())}}}}]),n}(d.R6),P=function(){function e(t,n){(0,o.Z)(this,e),this._initialSelection=n,this._edits=[],this._selectionId=null;var i,a=(0,r.Z)(t);try{for(a.s();!(i=a.n()).done;){var s=i.value;s.range&&"string"===typeof s.text&&this._edits.push(s)}}catch(u){a.e(u)}finally{a.f()}}return(0,a.Z)(e,[{key:"getEditOperations",value:function(e,t){var n,i=(0,r.Z)(this._edits);try{for(i.s();!(n=i.n()).done;){var o=n.value;t.addEditOperation(g.e.lift(o.range),o.text)}}catch(s){i.e(s)}finally{i.f()}var a=!1;Array.isArray(this._edits)&&1===this._edits.length&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(a=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(a=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),a||(this._selectionId=t.trackSelection(this._initialSelection))}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this._selectionId)}}]),e}(),A=function(){function e(t,n){var i=this;(0,o.Z)(this,e),this.editor=t,this._languageConfigurationService=n,this.callOnDispose=new c.SL,this.callOnModel=new c.SL,this.callOnDispose.add(t.onDidChangeConfiguration((function(){return i.update()}))),this.callOnDispose.add(t.onDidChangeModel((function(){return i.update()}))),this.callOnDispose.add(t.onDidChangeModelLanguage((function(){return i.update()})))}return(0,a.Z)(e,[{key:"update",value:function(){var e=this;this.callOnModel.clear(),this.editor.getOption(9)<4||this.editor.getOption(50)||this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste((function(t){var n=t.range;e.trigger(n)})))}},{key:"trigger",value:function(e){var t=this.editor.getSelections();if(!(null===t||t.length>1)){var n=this.editor.getModel();if(n&&n.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber)){for(var i=this.editor.getOption(9),r=n.getOptions(),o=r.tabSize,a=r.indentSize,s=r.insertSpaces,u=[],c={shiftIndent:function(e){return h.U.shiftIndent(e,e.length+1,o,a,s)},unshiftIndent:function(e){return h.U.unshiftIndent(e,e.length+1,o,a,s)}},d=e.startLineNumber;d<=e.endLineNumber&&this.shouldIgnoreLine(n,d);)d++;if(!(d>e.endLineNumber)){var v=n.getLineContent(d);if(!/\S/.test(v.substring(0,e.startColumn-1))){var f=(0,w.n8)(i,n,n.getLanguageId(),d,c,this._languageConfigurationService);if(null!==f){var p=l.V8(v),m=y.Y(f,o);if(m!==y.Y(p,o)){var _=y.J(m,o,s);u.push({range:new g.e(d,1,d,p.length+1),text:_}),v=_+v.substr(p.length)}else{var b=(0,w.tI)(n,d,this._languageConfigurationService);if(0===b||8===b)return}}}for(var C=d;d<e.endLineNumber&&!/\S/.test(n.getLineContent(d+1));)d++;if(d!==e.endLineNumber){var k={tokenization:{getLineTokens:function(e){return n.tokenization.getLineTokens(e)},getLanguageId:function(){return n.getLanguageId()},getLanguageIdAtPosition:function(e,t){return n.getLanguageIdAtPosition(e,t)}},getLineContent:function(e){return e===C?v:n.getLineContent(e)}},L=(0,w.n8)(i,k,n.getLanguageId(),d+1,c,this._languageConfigurationService);if(null!==L){var x=y.Y(L,o),S=y.Y(l.V8(n.getLineContent(d+1)),o);if(x!==S)for(var I=x-S,Z=d+1;Z<=e.endLineNumber;Z++){var N=n.getLineContent(Z),D=l.V8(N),M=y.Y(D,o)+I,R=y.J(M,o,s);R!==D&&u.push({range:new g.e(Z,1,Z,D.length+1),text:R})}}}if(u.length>0){this.editor.pushUndoStop();var T=new P(u,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",T),this.editor.pushUndoStop()}}}}}},{key:"shouldIgnoreLine",value:function(e,t){e.tokenization.forceTokenization(t);var n=e.getLineFirstNonWhitespaceColumn(t);if(0===n)return!0;var i=e.tokenization.getLineTokens(t);if(i.getCount()>0){var r=i.findTokenIndexAtOffset(n);if(r>=0&&1===i.getStandardTokenType(r))return!0}return!1}},{key:"dispose",value:function(){this.callOnDispose.dispose(),this.callOnModel.dispose()}}]),e}();function E(e,t,n,i){if(1!==e.getLineCount()||1!==e.getLineMaxColumn(1)){for(var r="",o=0;o<n;o++)r+=" ";for(var a=new RegExp(r,"gi"),s=1,u=e.getLineCount();s<=u;s++){var c=e.getLineFirstNonWhitespaceColumn(s);if(0===c&&(c=e.getLineMaxColumn(s)),1!==c){var l=new g.e(s,1,s,c),d=e.getValueInRange(l),h=i?d.replace(/\t/gi,r):d.replace(a,"\t");t.addEditOperation(l,h)}}}}A.ID="editor.contrib.autoIndentOnPaste",A=L([x(1,m.c_)],A);var H=function(){function e(t,n){(0,o.Z)(this,e),this.selection=t,this.tabSize=n,this.selectionId=null}return(0,a.Z)(e,[{key:"getEditOperations",value:function(e,t){this.selectionId=t.trackSelection(this.selection),E(e,t,this.tabSize,!0)}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this.selectionId)}}]),e}(),W=function(){function e(t,n){(0,o.Z)(this,e),this.selection=t,this.tabSize=n,this.selectionId=null}return(0,a.Z)(e,[{key:"getEditOperations",value:function(e,t){this.selectionId=t.trackSelection(this.selection),E(e,t,this.tabSize,!1)}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this.selectionId)}}]),e}();(0,d._K)(A.ID,A),(0,d.Qr)(I),(0,d.Qr)(Z),(0,d.Qr)(D),(0,d.Qr)(M),(0,d.Qr)(R),(0,d.Qr)(T),(0,d.Qr)(O)},41488:function(e,t,n){n.r(t);var i=n(98351),r=n(51168),o=n(4942),a=n(93433),s=n(29439),u=n(74165),c=n(37762),l=n(15671),d=n(43144),h=n(53210),v=n(71881),g=n(32590),f=n(32124),p=n(68552),m=n(10526),_=n(49584),y=n(64272),b=n(50605),C=n(93741),k=n(31492),w=n(15261),L=n(30788),x=n(56417),S=n(36158),I=n(77161),Z=n(22847),N=n(45161),D=n(26777),M=n(61826),R=n(10849),T=n(16496),O=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},P=(0,d.Z)((function e(t,n){(0,l.Z)(this,e),this.range=t,this.direction=n})),A=function(){function e(t,n,i){(0,l.Z)(this,e),this.hint=t,this.anchor=n,this.provider=i,this._isResolved=!1}return(0,d.Z)(e,[{key:"with",value:function(t){var n=new e(this.hint,t.anchor,this.provider);return n._isResolved=this._isResolved,n._currentResolve=this._currentResolve,n}},{key:"resolve",value:function(e){return O(this,void 0,void 0,(0,u.Z)().mark((function t(){var n=this;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"===typeof this.provider.resolveInlayHint){t.next=2;break}return t.abrupt("return");case 2:if(!this._currentResolve){t.next=8;break}return t.next=5,this._currentResolve;case 5:if(!e.isCancellationRequested){t.next=7;break}return t.abrupt("return");case 7:return t.abrupt("return",this.resolve(e));case 8:return this._isResolved||(this._currentResolve=this._doResolve(e).finally((function(){return n._currentResolve=void 0}))),t.next=11,this._currentResolve;case 11:case"end":return t.stop()}}),t,this)})))}},{key:"_doResolve",value:function(e){var t,n;return O(this,void 0,void 0,(0,u.Z)().mark((function i(){var r;return(0,u.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Promise.resolve(this.provider.resolveInlayHint(this.hint,e));case 3:r=i.sent,this.hint.tooltip=null!==(t=null===r||void 0===r?void 0:r.tooltip)&&void 0!==t?t:this.hint.tooltip,this.hint.label=null!==(n=null===r||void 0===r?void 0:r.label)&&void 0!==n?n:this.hint.label,this._isResolved=!0,i.next=13;break;case 9:i.prev=9,i.t0=i.catch(0),(0,p.Cp)(i.t0),this._isResolved=!1;case 13:case"end":return i.stop()}}),i,this,[[0,9]])})))}}]),e}(),E=function(){function e(t,n,i){(0,l.Z)(this,e),this._disposables=new m.SL,this.ranges=t,this.provider=new Set;var r,o=[],a=(0,c.Z)(n);try{for(a.s();!(r=a.n()).done;){var u=(0,s.Z)(r.value,2),d=u[0],h=u[1];this._disposables.add(d),this.provider.add(h);var v,g=(0,c.Z)(d.hints);try{for(g.s();!(v=g.n()).done;){var f=v.value,p=i.validatePosition(f.position),_="before",y=e._getRangeAtPosition(i,p),b=void 0;y.getStartPosition().isBefore(p)?(b=L.e.fromPositions(y.getStartPosition(),p),_="after"):(b=L.e.fromPositions(p,y.getEndPosition()),_="before"),o.push(new A(f,new P(b,_),h))}}catch(C){g.e(C)}finally{g.f()}}}catch(C){a.e(C)}finally{a.f()}this.items=o.sort((function(e,t){return R.L.compare(e.hint.position,t.hint.position)}))}return(0,d.Z)(e,[{key:"dispose",value:function(){this._disposables.dispose()}}],[{key:"create",value:function(t,n,i,r){return O(this,void 0,void 0,(0,u.Z)().mark((function o(){var a,s,c=this;return(0,u.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return a=[],s=t.ordered(n).reverse().map((function(e){return i.map((function(t){return O(c,void 0,void 0,(0,u.Z)().mark((function i(){var o;return(0,u.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e.provideInlayHints(n,t,r);case 3:(null===(o=i.sent)||void 0===o?void 0:o.hints.length)&&a.push([o,e]),i.next=10;break;case 7:i.prev=7,i.t0=i.catch(0),(0,p.Cp)(i.t0);case 10:case"end":return i.stop()}}),i,null,[[0,7]])})))}))})),o.next=4,Promise.all(s.flat());case 4:if(!r.isCancellationRequested&&!n.isDisposed()){o.next=6;break}throw new p.FU;case 6:return o.abrupt("return",new e(i,a,n));case 7:case"end":return o.stop()}}),o)})))}},{key:"_getRangeAtPosition",value:function(e,t){var n=t.lineNumber,i=e.getWordAtPosition(t);if(i)return new L.e(n,i.startColumn,n,i.endColumn);e.tokenization.tokenizeIfCheap(n);var r=e.tokenization.getLineTokens(n),o=t.column-1,a=r.findTokenIndexAtOffset(o),s=r.getStartOffset(a),u=r.getEndOffset(a);return u-s===1&&(s===o&&a>1?(s=r.getStartOffset(a-1),u=r.getEndOffset(a-1)):u===o&&a<r.getCount()-1&&(s=r.getStartOffset(a+1),u=r.getEndOffset(a+1))),new L.e(n,s+1,n,u+1)}}]),e}();var H=n(89663),W=n(55584),U=n(99892),F=n(23911),V=n(89850),K=n(49525),z=n(30291),j=n(8850),Y=n(13023),q=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))};function B(e,t,n,r){var o;return q(this,void 0,void 0,(0,u.Z)().mark((function s(){var l,d,v,g,p,m,_,y,b,C,k,w,x,S=this;return(0,u.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return l=e.get(D.S),d=e.get(z.i),v=e.get(V.Hy),g=e.get(j.TG),p=e.get(Y.lT),s.next=7,r.item.resolve(f.T.None);case 7:if(r.part.location){s.next=9;break}return s.abrupt("return");case 9:m=r.part.location,_=[],y=new Set(F.BH.getMenuItems(F.eH.EditorContext).map((function(e){return(0,F.vr)(e)?e.command.id:""}))),b=(0,c.Z)(i.Uc.getEditorActions()),s.prev=13,k=(0,u.Z)().mark((function e(){var n;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=C.value)instanceof W.SymbolNavigationAction&&y.has(n.id)&&_.push(new H.aU(n.id,n.label,void 0,!0,(function(){return q(S,void 0,void 0,(0,u.Z)().mark((function e(){var i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.createModelReference(m.uri);case 2:return i=e.sent,e.prev=3,e.next=6,g.invokeFunction(n.run.bind(n),t,new W.SymbolNavigationAnchor(i.object.textEditorModel,L.e.getStartPosition(m.range)));case 6:return e.prev=6,i.dispose(),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[3,,6,9]])})))})));case 2:case"end":return e.stop()}}),e)})),b.s();case 16:if((C=b.n()).done){s.next=20;break}return s.delegateYield(k(),"t0",18);case 18:s.next=16;break;case 20:s.next=25;break;case 22:s.prev=22,s.t1=s.catch(13),b.e(s.t1);case 25:return s.prev=25,b.f(),s.finish(25);case 28:r.part.command&&(w=r.part.command,_.push(new H.Z0),_.push(new H.aU(w.id,w.title,void 0,!0,(function(){return q(S,void 0,void 0,(0,u.Z)().mark((function e(){var t;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.executeCommand.apply(v,[w.id].concat((0,a.Z)(null!==(t=w.arguments)&&void 0!==t?t:[])));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),p.notify({severity:Y.zb.Error,source:r.item.provider.displayName,message:e.t0});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))})))),x=t.getOption(117),d.showContextMenu({domForShadowRoot:x&&null!==(o=t.getDomNode())&&void 0!==o?o:void 0,getAnchor:function(){var e=h.getDomNodePagePosition(n);return{x:e.left,y:e.top+e.height+8}},getActions:function(){return _},onHide:function(){t.focus()},autoSelectFirstItem:!0});case 31:case"end":return s.stop()}}),s,null,[[13,22,25,28]])})))}function Q(e,t,n,i){return q(this,void 0,void 0,(0,u.Z)().mark((function r(){var o,a,s=this;return(0,u.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=e.get(D.S),r.next=3,o.createModelReference(i.uri);case 3:return a=r.sent,r.next=6,n.invokeWithinContext((function(e){return q(s,void 0,void 0,(0,u.Z)().mark((function r(){var o,s,c,l,d;return(0,u.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=t.hasSideBySideModifier,s=e.get(K.i6),c=U.Jy.inPeekEditor.getValue(s),l=!o&&n.getOption(80)&&!c,d=new W.DefinitionAction({openToSide:o,openInPeek:l,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}),r.abrupt("return",d.run(e,n,{model:a.object.textEditorModel,position:L.e.getStartPosition(i.range)}));case 6:case"end":return r.stop()}}),r)})))}));case 6:a.dispose();case 7:case"end":return r.stop()}}),r)})))}var G=n(11280),J=n(6574),$=n(3553),X=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ee=function(e,t){return function(n,i){t(n,i,e)}},te=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},ne=function(){function e(){(0,l.Z)(this,e),this._entries=new _.z6(50)}return(0,d.Z)(e,[{key:"get",value:function(t){var n=e._key(t);return this._entries.get(n)}},{key:"set",value:function(t,n){var i=e._key(t);this._entries.set(i,n)}}],[{key:"_key",value:function(e){return"".concat(e.uri.toString(),"/").concat(e.getVersionId())}}]),e}(),ie=(0,j.yh)("IInlayHintsCache");(0,G.z)(ie,ne,!0);var re=function(){function e(t,n){(0,l.Z)(this,e),this.item=t,this.index=n}return(0,d.Z)(e,[{key:"part",get:function(){var e=this.item.hint.label;return"string"===typeof e?{label:e}:e[this.index]}}]),e}(),oe=(0,d.Z)((function e(t,n){(0,l.Z)(this,e),this.part=t,this.hasTriggerModifier=n})),ae=function(){function e(t,n,i,r,o,a,s){var u=this;(0,l.Z)(this,e),this._editor=t,this._languageFeaturesService=n,this._inlayHintsCache=r,this._commandService=o,this._notificationService=a,this._instaService=s,this._disposables=new m.SL,this._sessionDisposables=new m.SL,this._decorationsMetadata=new Map,this._ruleFactory=new C.t7(this._editor),this._activeRenderMode=0,this._debounceInfo=i.for(n.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(n.inlayHintsProvider.onDidChange((function(){return u._update()}))),this._disposables.add(t.onDidChangeModel((function(){return u._update()}))),this._disposables.add(t.onDidChangeModelLanguage((function(){return u._update()}))),this._disposables.add(t.onDidChangeConfiguration((function(e){e.hasChanged(129)&&u._update()}))),this._update()}return(0,d.Z)(e,[{key:"dispose",value:function(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}},{key:"_update",value:function(){var e=this;this._sessionDisposables.clear(),this._removeAllDecorations();var t=this._editor.getOption(129);if("off"!==t.enabled){var n=this._editor.getModel();if(n&&this._languageFeaturesService.inlayHintsProvider.has(n)){var i,r=this._inlayHintsCache.get(n);r&&this._updateHintsDecorators([n.getFullModelRange()],r),this._sessionDisposables.add((0,m.OF)((function(){n.isDisposed()||e._cacheHintsForFastRestore(n)})));var o,a,s=new Set,l=new g.pY((function(){return te(e,void 0,void 0,(0,u.Z)().mark((function e(){var t,r,o,a,d,h,v;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Date.now(),null===i||void 0===i||i.dispose(!0),i=new f.A,r=n.onWillDispose((function(){return null===i||void 0===i?void 0:i.cancel()})),e.prev=4,o=i.token,e.next=8,E.create(this._languageFeaturesService.inlayHintsProvider,n,this._getHintsRanges(),o);case 8:if(a=e.sent,l.delay=this._debounceInfo.update(n,Date.now()-t),!o.isCancellationRequested){e.next=13;break}return a.dispose(),e.abrupt("return");case 13:d=(0,c.Z)(a.provider);try{for(d.s();!(h=d.n()).done;)"function"!==typeof(v=h.value).onDidChangeInlayHints||s.has(v)||(s.add(v),this._sessionDisposables.add(v.onDidChangeInlayHints((function(){l.isScheduled()||l.schedule()}))))}catch(u){d.e(u)}finally{d.f()}this._sessionDisposables.add(a),this._updateHintsDecorators(a.ranges,a.items),this._cacheHintsForFastRestore(n),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(4),(0,p.dL)(e.t0);case 23:return e.prev=23,i.dispose(),r.dispose(),e.finish(23);case 27:case"end":return e.stop()}}),e,this,[[4,20,23,27]])})))}),this._debounceInfo.get(n));if(this._sessionDisposables.add(l),this._sessionDisposables.add((0,m.OF)((function(){return null===i||void 0===i?void 0:i.dispose(!0)}))),l.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange((function(e){!e.scrollTopChanged&&l.isScheduled()||l.schedule()}))),this._sessionDisposables.add(this._editor.onDidChangeModelContent((function(e){var t=Math.max(l.delay,1250);l.schedule(t)}))),"on"===t.enabled)this._activeRenderMode=0;else"onUnlessPressed"===t.enabled?(o=0,a=1):(o=1,a=0),this._activeRenderMode=o,this._sessionDisposables.add(h.ModifierKeyEmitter.getInstance().event((function(t){if(e._editor.hasModel()){var n=t.altKey&&t.ctrlKey?a:o;if(n!==e._activeRenderMode){e._activeRenderMode=n;var i=e._editor.getModel(),r=e._copyInlayHintsWithCurrentAnchor(i);e._updateHintsDecorators([i.getFullModelRange()],r),l.schedule(0)}}})));this._sessionDisposables.add(this._installDblClickGesture((function(){return l.schedule(0)}))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}}}},{key:"_installLinkGesture",value:function(){var e=this,t=new m.SL,n=t.add(new M.yN(this._editor)),i=new m.SL;return t.add(i),t.add(n.onMouseMoveOrRelevantKeyDown((function(t){var n=(0,s.Z)(t,1)[0],r=e._getInlayHintLabelPart(n),o=e._editor.getModel();if(r&&o){var a=new f.A;i.add((0,m.OF)((function(){return a.dispose(!0)}))),r.item.resolve(a.token),e._activeInlayHintPart=r.part.command||r.part.location?new oe(r,n.hasTriggerModifier):void 0;var u=r.item.hint.position.lineNumber,c=new L.e(u,1,u,o.getLineMaxColumn(u)),l=e._getInlineHintsForRange(c);e._updateHintsDecorators([c],l),i.add((0,m.OF)((function(){e._activeInlayHintPart=void 0,e._updateHintsDecorators([c],l)})))}else i.clear()}))),t.add(n.onCancel((function(){return i.clear()}))),t.add(n.onExecute((function(t){return te(e,void 0,void 0,(0,u.Z)().mark((function e(){var n,i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this._getInlayHintLabelPart(t))){e.next=10;break}if(!(i=n.part).location){e.next=7;break}this._instaService.invokeFunction(Q,t,this._editor,i.location),e.next=10;break;case 7:if(!x.mY.is(i.command)){e.next=10;break}return e.next=10,this._invokeCommand(i.command,n.item);case 10:case"end":return e.stop()}}),e,this)})))}))),t}},{key:"_getInlineHintsForRange",value:function(e){var t,n=new Set,i=(0,c.Z)(this._decorationsMetadata.values());try{for(i.s();!(t=i.n()).done;){var r=t.value;e.containsRange(r.item.anchor.range)&&n.add(r.item)}}catch(o){i.e(o)}finally{i.f()}return Array.from(n)}},{key:"_installDblClickGesture",value:function(e){var t=this;return this._editor.onMouseUp((function(n){return te(t,void 0,void 0,(0,u.Z)().mark((function t(){var i,r;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(2===n.event.detail){t.next=2;break}return t.abrupt("return");case 2:if(i=this._getInlayHintLabelPart(n)){t.next=5;break}return t.abrupt("return");case 5:return n.event.preventDefault(),t.next=8,i.item.resolve(f.T.None);case 8:(0,v.Of)(i.item.hint.textEdits)&&(r=i.item.hint.textEdits.map((function(e){return w.h.replace(L.e.lift(e.range),e.text)})),this._editor.executeEdits("inlayHint.default",r),e());case 9:case"end":return t.stop()}}),t,this)})))}))}},{key:"_installContextMenu",value:function(){var e=this;return this._editor.onContextMenu((function(t){return te(e,void 0,void 0,(0,u.Z)().mark((function e(){var n;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.event.target instanceof HTMLElement){e.next=2;break}return e.abrupt("return");case 2:if(!(n=this._getInlayHintLabelPart(t))){e.next=6;break}return e.next=6,this._instaService.invokeFunction(B,this._editor,t.event.target,n);case 6:case"end":return e.stop()}}),e,this)})))}))}},{key:"_getInlayHintLabelPart",value:function(e){var t;if(6===e.target.type){var n=null===(t=e.target.detail.injectedText)||void 0===t?void 0:t.options;return n instanceof I.HS&&(null===n||void 0===n?void 0:n.attachedData)instanceof re?n.attachedData:void 0}}},{key:"_invokeCommand",value:function(e,t){var n;return te(this,void 0,void 0,(0,u.Z)().mark((function i(){var r;return(0,u.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(r=this._commandService).executeCommand.apply(r,[e.id].concat((0,a.Z)(null!==(n=e.arguments)&&void 0!==n?n:[])));case 3:i.next=8;break;case 5:i.prev=5,i.t0=i.catch(0),this._notificationService.notify({severity:Y.zb.Error,source:t.provider.displayName,message:i.t0});case 8:case"end":return i.stop()}}),i,this,[[0,5]])})))}},{key:"_cacheHintsForFastRestore",value:function(e){var t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}},{key:"_copyInlayHintsWithCurrentAnchor",value:function(e){var t,n=new Map,i=(0,c.Z)(this._decorationsMetadata);try{for(i.s();!(t=i.n()).done;){var r=(0,s.Z)(t.value,2),o=r[0],a=r[1];if(!n.has(a.item)){var u=e.getDecorationRange(o);if(u){var l=new P(u,a.item.anchor.direction),d=a.item.with({anchor:l});n.set(a.item,d)}}}}catch(h){i.e(h)}finally{i.f()}return Array.from(n.values())}},{key:"_getHintsRanges",value:function(){var e,t=this._editor.getModel(),n=this._editor.getVisibleRangesPlusViewportAboveBelow(),i=[],r=(0,c.Z)(n.sort(L.e.compareRangesUsingStarts));try{for(r.s();!(e=r.n()).done;){var o=e.value,a=t.validateRange(new L.e(o.startLineNumber-30,o.startColumn,o.endLineNumber+30,o.endColumn));0!==i.length&&L.e.areIntersectingOrTouching(i[i.length-1],a)?i[i.length-1]=L.e.plusRange(i[i.length-1],a):i.push(a)}}catch(s){r.e(s)}finally{r.f()}return i}},{key:"_updateHintsDecorators",value:function(t,n){var i,r,a=this,s=[],u=function(e,t,n,i,r){var u={content:n,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:t.className,cursorStops:i,attachedData:r};s.push({item:e,classNameRef:t,decoration:{range:e.anchor.range,options:(0,o.Z)({description:"InlayHint",showIfCollapsed:e.anchor.range.isEmpty(),collapseOnReplaceEdit:!e.anchor.range.isEmpty(),stickiness:0},e.anchor.direction,0===a._activeRenderMode?u:void 0)}})},l=function(e,t){var n=a._ruleFactory.createClassNameRef({width:"".concat(h/3|0,"px"),display:"inline-block"});u(e,n,"\u200a",t?S.RM.Right:S.RM.None)},d=this._getLayoutInfo(),h=d.fontSize,g=d.fontFamily,f=d.padding,p=d.isUniform,m="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(m,g);var _,y=(0,c.Z)(n);try{for(y.s();!(_=y.n()).done;){var b=_.value;b.hint.paddingLeft&&l(b,!1);for(var C="string"===typeof b.hint.label?[{label:b.hint.label}]:b.hint.label,w=0;w<C.length;w++){var L=C[w],x=0===w,I=w===C.length-1,Z={fontSize:"".concat(h,"px"),fontFamily:"var(".concat(m,"), ").concat(k.hL.fontFamily),verticalAlign:p?"baseline":"middle"};(0,v.Of)(b.hint.textEdits)&&(Z.cursor="default"),this._fillInColors(Z,b.hint),(L.command||L.location)&&(null===(i=this._activeInlayHintPart)||void 0===i?void 0:i.part.item)===b&&this._activeInlayHintPart.part.index===w&&(Z.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(Z.color=(0,$.EN)(J._Yy),Z.cursor="pointer")),f&&(x&&I?(Z.padding="1px ".concat(0|Math.max(1,h/4),"px"),Z.borderRadius="".concat(h/4|0,"px")):x?(Z.padding="1px 0 1px ".concat(0|Math.max(1,h/4),"px"),Z.borderRadius="".concat(h/4|0,"px 0 0 ").concat(h/4|0,"px")):I?(Z.padding="1px ".concat(0|Math.max(1,h/4),"px 1px 0"),Z.borderRadius="0 ".concat(h/4|0,"px ").concat(h/4|0,"px 0")):Z.padding="1px 0 1px 0"),u(b,this._ruleFactory.createClassNameRef(Z),se(L.label),I&&!b.hint.paddingRight?S.RM.Right:S.RM.None,new re(b,w))}if(b.hint.paddingRight&&l(b,!0),s.length>e._MAX_DECORATORS)break}}catch(E){y.e(E)}finally{y.f()}var N,D=[],M=(0,c.Z)(t);try{for(M.s();!(N=M.n()).done;){var R,T=N.value,O=(0,c.Z)(null!==(r=this._editor.getDecorationsInRange(T))&&void 0!==r?r:[]);try{for(O.s();!(R=O.n()).done;){var P=R.value.id,A=this._decorationsMetadata.get(P);A&&(D.push(P),A.classNameRef.dispose(),this._decorationsMetadata.delete(P))}}catch(E){O.e(E)}finally{O.f()}}}catch(E){M.e(E)}finally{M.f()}this._editor.changeDecorations((function(e){for(var t=e.deltaDecorations(D,s.map((function(e){return e.decoration}))),n=0;n<t.length;n++){var i=s[n];a._decorationsMetadata.set(t[n],i)}}))}},{key:"_fillInColors",value:function(e,t){t.kind===x.gl.Parameter?(e.backgroundColor=(0,$.EN)(J.phM),e.color=(0,$.EN)(J.HCL)):t.kind===x.gl.Type?(e.backgroundColor=(0,$.EN)(J.bKB),e.color=(0,$.EN)(J.hX8)):(e.backgroundColor=(0,$.EN)(J.PpC),e.color=(0,$.EN)(J.VVv))}},{key:"_getLayoutInfo",value:function(){var e=this._editor.getOption(129),t=e.padding,n=this._editor.getOption(48),i=this._editor.getOption(45),r=e.fontSize;(!r||r<5||r>n)&&(r=n);var o=e.fontFamily||i;return{fontSize:r,fontFamily:o,padding:t,isUniform:!t&&o===i&&r===n}}},{key:"_removeAllDecorations",value:function(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));var e,t=(0,c.Z)(this._decorationsMetadata.values());try{for(t.s();!(e=t.n()).done;){e.value.classNameRef.dispose()}}catch(n){t.e(n)}finally{t.f()}this._decorationsMetadata.clear()}}],[{key:"get",value:function(t){var n;return null!==(n=t.getContribution(e.ID))&&void 0!==n?n:void 0}}]),e}();function se(e){return e.replace(/[ \t]/g,"\xa0")}ae.ID="editor.contrib.InlayHints",ae._MAX_DECORATORS=1500,ae=X([ee(1,N.p),ee(2,Z.A),ee(3,ie),ee(4,V.Hy),ee(5,Y.lT),ee(6,j.TG)],ae),V.P0.registerCommand("_executeInlayHintProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return te(void 0,void 0,void 0,(0,u.Z)().mark((function t(){var i,r,o,a,s,c,l;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n[0],r=n[1],(0,y.p_)(b.o.isUri(i)),(0,y.p_)(L.e.isIRange(r)),o=e.get(N.p),a=o.inlayHintsProvider,t.next=6,e.get(D.S).createModelReference(i);case 6:return s=t.sent,t.prev=7,t.next=10,E.create(a,s.object.textEditorModel,[L.e.lift(r)],f.T.None);case 10:return c=t.sent,l=c.items.map((function(e){return e.hint})),setTimeout((function(){return c.dispose()}),0),t.abrupt("return",l);case 14:return t.prev=14,s.dispose(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[7,,14,17]])})))}));var ue=n(60136),ce=n(27277),le=n(67277),de=n(63024),he=n(25539),ve=n(38305),ge=n(64644),fe=n(74990),pe=n(87697),me=n(4827),_e=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ye=function(e,t){return function(n,i){t(n,i,e)}},be=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},Ce=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"===typeof __values?__values(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,r,(t=e[n](t)).done,t.value)}))}}},ke=function(e){(0,ue.Z)(n,e);var t=(0,ce.Z)(n);function n(e,i){var r;return(0,l.Z)(this,n),(r=t.call(this,10,i,e.item.anchor.range)).part=e,r}return(0,d.Z)(n)}(r.YM),we=function(e){(0,ue.Z)(n,e);var t=(0,ce.Z)(n);function n(e,i,r,o,a,s){var u;return(0,l.Z)(this,n),(u=t.call(this,e,i,r,o,s))._resolverService=a,u.hoverOrdinal=6,u}return(0,d.Z)(n,[{key:"suggestHoverAnchor",value:function(e){var t;if(!ae.get(this._editor))return null;if(6!==e.target.type)return null;var n=null===(t=e.target.detail.injectedText)||void 0===t?void 0:t.options;return n instanceof I.HS&&n.attachedData instanceof re?new ke(n.attachedData,this):null}},{key:"computeSync",value:function(){return[]}},{key:"computeAsync",value:function(e,t,n){var i=this;return e instanceof ke?new g.Aq((function(t){return be(i,void 0,void 0,(0,u.Z)().mark((function i(){var r,o,a,s,c,l,d,h,g,f,p,m;return(0,u.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=e.part,i.next=3,a.item.resolve(n);case 3:if(!n.isCancellationRequested){i.next=5;break}return i.abrupt("return");case 5:return"string"===typeof a.item.hint.tooltip?s=(new le.W5).appendText(a.item.hint.tooltip):a.item.hint.tooltip&&(s=a.item.hint.tooltip),s&&t.emitOne(new ve.hU(this,e.range,[s],0)),(0,v.Of)(a.item.hint.textEdits)&&t.emitOne(new ve.hU(this,e.range,[(new le.W5).appendText((0,pe.NC)("hint.dbl","Double click to insert"))],10001)),"string"===typeof a.part.tooltip?c=(new le.W5).appendText(a.part.tooltip):a.part.tooltip&&(c=a.part.tooltip),c&&t.emitOne(new ve.hU(this,e.range,[c],1)),(a.part.location||a.part.command)&&(d="altKey"===this._editor.getOption(72),h=d?me.dz?(0,pe.NC)("links.navigate.kb.meta.mac","cmd + click"):(0,pe.NC)("links.navigate.kb.meta","ctrl + click"):me.dz?(0,pe.NC)("links.navigate.kb.alt.mac","option + click"):(0,pe.NC)("links.navigate.kb.alt","alt + click"),a.part.location&&a.part.command?l=(new le.W5).appendText((0,pe.NC)("hint.defAndCommand","Go to Definition ({0}), right click for more",h)):a.part.location?l=(new le.W5).appendText((0,pe.NC)("hint.def","Go to Definition ({0})",h)):a.part.command&&(l=new le.W5("[".concat((0,pe.NC)("hint.cmd","Execute Command"),"](").concat((u=a.part.command,b.o.from({scheme:T.lg.command,path:u.id,query:u.arguments&&encodeURIComponent(JSON.stringify(u.arguments))}).toString()),' "').concat(a.part.command.title,'") (').concat(h,")"),{isTrusted:!0})),l&&t.emitOne(new ve.hU(this,e.range,[l],1e4))),i.next=13,this._resolveInlayHintLabelPartHover(a,n);case 13:g=i.sent,i.prev=14,f=Ce(g);case 16:return i.next=18,f.next();case 18:if((p=i.sent).done){i.next=24;break}m=p.value,t.emitOne(m);case 22:i.next=16;break;case 24:i.next=29;break;case 26:i.prev=26,i.t0=i.catch(14),r={error:i.t0};case 29:if(i.prev=29,i.prev=30,!p||p.done||!(o=f.return)){i.next=34;break}return i.next=34,o.call(f);case 34:if(i.prev=34,!r){i.next=37;break}throw r.error;case 37:return i.finish(34);case 38:return i.finish(29);case 39:case"end":return i.stop()}var u}),i,this,[[14,26,29,39],[30,,34,38]])})))})):g.Aq.EMPTY}},{key:"_resolveInlayHintLabelPartHover",value:function(e,t){return be(this,void 0,void 0,(0,u.Z)().mark((function n(){var i,r,o,a,s,c=this;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.part.location){n.next=2;break}return n.abrupt("return",g.Aq.EMPTY);case 2:return i=e.part.location,r=i.uri,o=i.range,n.next=5,this._resolverService.createModelReference(r);case 5:if(a=n.sent,n.prev=6,s=a.object.textEditorModel,this._languageFeaturesService.hoverProvider.has(s)){n.next=10;break}return n.abrupt("return",g.Aq.EMPTY);case 10:return n.abrupt("return",(0,he.R8)(this._languageFeaturesService.hoverProvider,s,new R.L(o.startLineNumber,o.startColumn),t).filter((function(e){return!(0,le.CP)(e.hover.contents)})).map((function(t){return new ve.hU(c,e.item.anchor.range,t.hover.contents,2+t.ordinal)})));case 11:return n.prev=11,a.dispose(),n.finish(11);case 14:case"end":return n.stop()}}),n,this,[[6,,11,14]])})))}}]),n}(ve.D5);we=_e([ye(1,de.O),ye(2,fe.v4),ye(3,ge.Ui),ye(4,D.S),ye(5,N.p)],we),(0,i._K)(ae.ID,ae),r.Ae.register(we)},89690:function(e,t,n){n.r(t),n.d(t,{commitInlineSuggestionAction:function(){return vt}});var i=n(98351),r=n(44474),o=n(51168),a="editor.action.inlineSuggest.commit",s=n(74165),u=n(15671),c=n(43144),l=n(60136),d=n(27277),h=n(28941),v=n(10526),g=n(26684),f=n(34538),p=n(10849),m=n(56417),_=n(37762),y=n(93433),b=n(32590),C=n(32124),k=n(68552),w=n(23605),L=n(15261),x=n(30788);var S=function(){function e(t){(0,u.Z)(this,e),this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(var n=0;n<t.length;n++)"\n"===t.charAt(n)&&this.lineStartOffsetByLineIdx.push(n+1)}return(0,c.Z)(e,[{key:"getOffset",value:function(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}]),e}(),I=[];function Z(){return I}var N=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,u.Z)(this,e),this.lineNumber=t,this.parts=n,this.additionalReservedLineCount=i}return(0,c.Z)(e,[{key:"renderForScreenReader",value:function(e){if(0===this.parts.length)return"";var t=this.parts[this.parts.length-1];return function(e,t){var n=new S(e),i=t.map((function(e){var t=x.e.lift(e.range);return{startOffset:n.getOffset(t.getStartPosition()),endOffset:n.getOffset(t.getEndPosition()),text:e.text}}));i.sort((function(e,t){return t.startOffset-e.startOffset}));var r,o=(0,_.Z)(i);try{for(o.s();!(r=o.n()).done;){var a=r.value;e=e.substring(0,a.startOffset)+a.text+e.substring(a.endOffset)}}catch(s){o.e(s)}finally{o.f()}return e}(e.substr(0,t.column-1),this.parts.map((function(e){return{range:{startLineNumber:1,endLineNumber:1,startColumn:e.column,endColumn:e.column},text:e.lines.join("\n")}}))).substring(this.parts[0].column-1)}},{key:"isEmpty",value:function(){return this.parts.every((function(e){return 0===e.lines.length}))}}]),e}(),D=(0,c.Z)((function e(t,n,i){(0,u.Z)(this,e),this.column=t,this.lines=n,this.preview=i})),M=function(){function e(t,n,i,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;(0,u.Z)(this,e),this.lineNumber=t,this.columnStart=n,this.length=i,this.newLines=r,this.additionalReservedLineCount=o,this.parts=[new D(this.columnStart+this.length,this.newLines,!1)]}return(0,c.Z)(e,[{key:"renderForScreenReader",value:function(e){return this.newLines.join("\n")}}]),e}(),R=function(e){(0,l.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,u.Z)(this,n),(i=t.call(this)).editor=e,i._expanded=void 0,i.onDidChangeEmitter=new h.Q5,i.onDidChange=i.onDidChangeEmitter.event,i._register(e.onDidChangeConfiguration((function(e){e.hasChanged(108)&&void 0===i._expanded&&i.onDidChangeEmitter.fire()}))),i}return(0,c.Z)(n,[{key:"setExpanded",value:function(e){this._expanded=!0,this.onDidChangeEmitter.fire()}}]),n}(v.JT),T=n(89850),O=n(56199);function P(e,t){if(!t)return t;var n=e.getValueInRange(t.range),i=g.Mh(n,t.insertText),r=e.getOffsetAt(t.range.getStartPosition())+i,o=e.getPositionAt(r),a=n.substr(i),s=g.P1(a,t.insertText),u=e.getPositionAt(Math.max(r,e.getOffsetAt(t.range.getEndPosition())-s));return{range:x.e.fromPositions(o,u),insertText:t.insertText.substr(i,t.insertText.length-i-s),snippetInfo:t.snippetInfo,filterText:t.filterText,additionalTextEdits:t.additionalTextEdits}}function A(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(e.range.startLineNumber===e.range.endLineNumber){var o=t.getLineContent(e.range.startLineNumber),a=g.V8(o).length,s=e.range.startColumn-1<=a;if(s){var u=g.V8(e.insertText).length,c=o.substring(e.range.startColumn-1,a),l=x.e.fromPositions(e.range.getStartPosition().delta(0,c.length),e.range.getEndPosition()),d=e.insertText.startsWith(c)?e.insertText.substring(c.length):e.insertText.substring(u);e={range:l,insertText:d,command:e.command,snippetInfo:void 0,filterText:e.filterText,additionalTextEdits:e.additionalTextEdits}}var h=t.getValueInRange(e.range),v=H(h,e.insertText);if(v){var f=e.range.startLineNumber,p=new Array;if("prefix"===n){var m=v.filter((function(e){return 0===e.originalLength}));if(m.length>1||1===m.length&&m[0].originalStart!==h.length)return}var y,b=e.insertText.length-r,C=(0,_.Z)(v);try{for(C.s();!(y=C.n()).done;){var k=y.value,w=e.range.startColumn+k.originalStart+k.originalLength;if("subwordSmart"===n&&i&&i.lineNumber===e.range.startLineNumber&&w<i.column)return;if(k.originalLength>0)return;if(0!==k.modifiedLength){var L=k.modifiedStart+k.modifiedLength,S=Math.max(k.modifiedStart,Math.min(L,b)),I=e.insertText.substring(k.modifiedStart,S),Z=e.insertText.substring(S,Math.max(k.modifiedStart,L));if(I.length>0){var M=g.uq(I);p.push(new D(w,M,!1))}if(Z.length>0){var R=g.uq(Z);p.push(new D(w,R,!0))}}}}catch(T){C.e(T)}finally{C.f()}return new N(f,p,0)}}}var E=void 0;function H(e,t){if((null===E||void 0===E?void 0:E.originalValue)===e&&(null===E||void 0===E?void 0:E.newValue)===t)return null===E||void 0===E?void 0:E.changes;var n=U(e,t,!0);if(n){var i=W(n);if(i>0){var r=U(e,t,!1);r&&W(r)<i&&(n=r)}}return E={originalValue:e,newValue:t,changes:n},n}function W(e){var t,n=0,i=(0,_.Z)(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;n+=Math.max(r.originalLength-r.modifiedLength,0)}}catch(o){i.e(o)}finally{i.f()}return n}function U(e,t,n){if(!(e.length>5e3||t.length>5e3)){var i=Math.max(a(e),a(t)),r=u(e),o=u(t);return new O.Hs({getElements:function(){return r}},{getElements:function(){return o}}).ComputeDiff(!1).changes}function a(e){for(var t=0,n=0,i=e.length;n<i;n++){var r=e.charCodeAt(n);r>t&&(t=r)}return t}function s(e){if(e<0)throw new Error("unexpected");return i+e+1}function u(e){for(var t=0,i=0,r=new Int32Array(e.length),o=0,a=e.length;o<a;o++)if(n&&"("===e[o]){var u=100*i+t;r[o]=s(2*u),t++}else if(n&&")"===e[o]){var c=100*i+(t=Math.max(t-1,0));r[o]=s(2*c+1),0===t&&i++}else r[o]=e.charCodeAt(o);return r}}var F=n(26765),V=n(65396),K=n(45161),z=n(22847),j=n(25707),Y=n(42009),q=n(64272),B=n(45842),Q=n(64644),G=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},J=function(e,t){return function(n,i){t(n,i,e)}},$=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},X=function(e){(0,l.Z)(n,e);var t=(0,d.Z)(n);function n(e,i,r,o,s,c,l){var d;return(0,u.Z)(this,n),(d=t.call(this)).editor=e,d.cache=i,d.commandService=r,d.languageConfigurationService=o,d.languageFeaturesService=s,d.debounceService=c,d.onDidChangeEmitter=new h.Q5,d.onDidChange=d.onDidChangeEmitter.event,d.completionSession=d._register(new v.XK),d.active=!1,d.disposed=!1,d.debounceValue=d.debounceService.for(d.languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),d._register(r.onDidExecuteCommand((function(t){new Set([w.CoreEditingCommands.Tab.id,w.CoreEditingCommands.DeleteLeft.id,w.CoreEditingCommands.DeleteRight.id,a,"acceptSelectedSuggestion"]).has(t.commandId)&&e.hasTextFocus()&&d.handleUserInput()}))),d._register(d.editor.onDidType((function(e){d.handleUserInput()}))),d._register(d.editor.onDidChangeCursorPosition((function(e){(3===e.reason||d.session&&!d.session.isValid)&&d.hide()}))),d._register((0,v.OF)((function(){d.disposed=!0}))),d._register(d.editor.onDidBlurEditorWidget((function(){l.getValue("editor.inlineSuggest.hideOnBlur")||d.hide()}))),d}return(0,c.Z)(n,[{key:"handleUserInput",value:function(){var e=this;this.session&&!this.session.isValid&&this.hide(),setTimeout((function(){e.disposed||e.startSessionIfTriggered()}),0)}},{key:"session",get:function(){return this.completionSession.value}},{key:"ghostText",get:function(){var e;return null===(e=this.session)||void 0===e?void 0:e.ghostText}},{key:"minReservedLineCount",get:function(){return this.session?this.session.minReservedLineCount:0}},{key:"setExpanded",value:function(e){var t;null===(t=this.session)||void 0===t||t.setExpanded(e)}},{key:"setActive",value:function(e){var t;this.active=e,e&&(null===(t=this.session)||void 0===t||t.scheduleAutomaticUpdate())}},{key:"startSessionIfTriggered",value:function(){this.editor.getOption(57).enabled&&(this.session&&this.session.isValid||this.trigger(m.bw.Automatic))}},{key:"trigger",value:function(e){var t=this;this.completionSession.value?e===m.bw.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext():(this.completionSession.value=new ee(this.editor,this.editor.getPosition(),(function(){return t.active}),this.commandService,this.cache,e,this.languageConfigurationService,this.languageFeaturesService.inlineCompletionsProvider,this.debounceValue),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange((function(){t.onDidChangeEmitter.fire()}))))}},{key:"hide",value:function(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}},{key:"commitCurrentSuggestion",value:function(){var e;null===(e=this.session)||void 0===e||e.commitCurrentCompletion()}},{key:"showNext",value:function(){var e;null===(e=this.session)||void 0===e||e.showNextInlineCompletion()}},{key:"showPrevious",value:function(){var e;null===(e=this.session)||void 0===e||e.showPreviousInlineCompletion()}},{key:"hasMultipleInlineCompletions",value:function(){var e;return $(this,void 0,void 0,(0,s.Z)().mark((function t(){var n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(e=this.session)||void 0===e?void 0:e.hasMultipleInlineCompletions();case 2:return n=t.sent,t.abrupt("return",void 0!==n&&n);case 4:case"end":return t.stop()}}),t,this)})))}}]),n}(v.JT);X=G([J(2,T.Hy),J(3,F.c_),J(4,K.p),J(5,z.A),J(6,Q.Ui)],X);var ee=function(e){(0,l.Z)(n,e);var t=(0,d.Z)(n);function n(e,i,r,o,a,s,c,l,d){var h;(0,u.Z)(this,n),(h=t.call(this,e)).triggerPosition=i,h.shouldUpdate=r,h.commandService=o,h.cache=a,h.initialTriggerKind=s,h.languageConfigurationService=c,h.registry=l,h.debounce=d,h.minReservedLineCount=0,h.updateOperation=h._register(new v.XK),h.updateSoon=h._register(new b.pY((function(){var e=h.initialTriggerKind;return h.initialTriggerKind=m.bw.Automatic,h.update(e)}),50)),h.filteredCompletions=[],h.currentlySelectedCompletionId=void 0;var g=void 0;return h._register(h.onDidChange((function(){var e,t=h.currentCompletion;if(t&&t.sourceInlineCompletion!==g){g=t.sourceInlineCompletion;var n=t.sourceProvider;null===(e=n.handleItemDidShow)||void 0===e||e.call(n,t.sourceInlineCompletions,g)}}))),h._register((0,v.OF)((function(){h.cache.clear()}))),h._register(h.editor.onDidChangeCursorPosition((function(e){var t;3!==e.reason&&(null===(t=h.cache.value)||void 0===t||t.updateRanges(),h.cache.value&&(h.updateFilteredInlineCompletions(),h.onDidChangeEmitter.fire()))}))),h._register(h.editor.onDidChangeModelContent((function(e){var t;null===(t=h.cache.value)||void 0===t||t.updateRanges(),h.updateFilteredInlineCompletions(),h.scheduleAutomaticUpdate()}))),h._register(h.registry.onDidChange((function(){h.updateSoon.schedule(h.debounce.get(h.editor.getModel()))}))),h.scheduleAutomaticUpdate(),h}return(0,c.Z)(n,[{key:"updateFilteredInlineCompletions",value:function(){if(this.cache.value){var e=this.editor.getModel(),t=e.validatePosition(this.editor.getPosition());this.filteredCompletions=this.cache.value.completions.filter((function(n){var i=e.getValueInRange(n.synchronizedRange).toLowerCase(),r=n.inlineCompletion.filterText.toLowerCase(),o=e.getLineIndentColumn(n.synchronizedRange.startLineNumber),a=Math.max(0,t.column-n.synchronizedRange.startColumn),s=r.substring(0,a),u=r.substring(a),c=i.substring(0,a),l=i.substring(a);return n.synchronizedRange.startColumn<=o&&(0===(c=c.trimStart()).length&&(l=l.trimStart()),0===(s=s.trimStart()).length&&(u=u.trimStart())),s.startsWith(c)&&(0,B.Sy)(l,u)}))}else this.filteredCompletions=[]}},{key:"fixAndGetIndexOfCurrentSelection",value:function(){var e=this;if(!this.currentlySelectedCompletionId||!this.cache.value)return 0;if(0===this.cache.value.completions.length)return 0;var t=this.filteredCompletions.findIndex((function(t){return t.semanticId===e.currentlySelectedCompletionId}));return-1===t?(this.currentlySelectedCompletionId=void 0,0):t}},{key:"currentCachedCompletion",get:function(){if(this.cache.value)return this.filteredCompletions[this.fixAndGetIndexOfCurrentSelection()]}},{key:"showNextInlineCompletion",value:function(){return $(this,void 0,void 0,(0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureUpdateWithExplicitContext();case 2:(t=this.filteredCompletions||[]).length>0?(n=(this.fixAndGetIndexOfCurrentSelection()+1)%t.length,this.currentlySelectedCompletionId=t[n].semanticId):this.currentlySelectedCompletionId=void 0,this.onDidChangeEmitter.fire();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"showPreviousInlineCompletion",value:function(){return $(this,void 0,void 0,(0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureUpdateWithExplicitContext();case 2:(t=this.filteredCompletions||[]).length>0?(n=(this.fixAndGetIndexOfCurrentSelection()+t.length-1)%t.length,this.currentlySelectedCompletionId=t[n].semanticId):this.currentlySelectedCompletionId=void 0,this.onDidChangeEmitter.fire();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"ensureUpdateWithExplicitContext",value:function(){var e;return $(this,void 0,void 0,(0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.updateOperation.value){t.next=10;break}if(this.updateOperation.value.triggerKind!==m.bw.Explicit){t.next=6;break}return t.next=4,this.updateOperation.value.promise;case 4:t.next=8;break;case 6:return t.next=8,this.update(m.bw.Explicit);case 8:t.next=13;break;case 10:if((null===(e=this.cache.value)||void 0===e?void 0:e.triggerKind)===m.bw.Explicit){t.next=13;break}return t.next=13,this.update(m.bw.Explicit);case 13:case"end":return t.stop()}}),t,this)})))}},{key:"hasMultipleInlineCompletions",value:function(){var e;return $(this,void 0,void 0,(0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureUpdateWithExplicitContext();case 2:return t.abrupt("return",((null===(e=this.cache.value)||void 0===e?void 0:e.completions.length)||0)>1);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"ghostText",get:function(){var e=this.currentCompletion;if(e){var t=this.editor.getPosition();if(!e.range.getEndPosition().isBefore(t)){var n=this.editor.getOptions().get(57).mode,i=A(e,this.editor.getModel(),n,t);if(i){if(i.isEmpty())return;return i}return new M(e.range.startLineNumber,e.range.startColumn,e.range.endColumn-e.range.startColumn,e.insertText.split("\n"),0)}}}},{key:"currentCompletion",get:function(){var e=this.currentCachedCompletion;if(e)return e.toLiveInlineCompletion()}},{key:"isValid",get:function(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}},{key:"scheduleAutomaticUpdate",value:function(){this.updateOperation.clear(),this.updateSoon.schedule(this.debounce.get(this.editor.getModel()))}},{key:"update",value:function(e){return $(this,void 0,void 0,(0,s.Z)().mark((function t(){var n,i,r,o,a=this;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.shouldUpdate()){t.next=2;break}return t.abrupt("return");case 2:return n=this.editor.getPosition(),i=new Date,r=(0,b.PG)((function(t){return $(a,void 0,void 0,(0,s.Z)().mark((function r(){var o,a;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,re(this.registry,n,this.editor.getModel(),{triggerKind:e,selectedSuggestionInfo:void 0},t,this.languageConfigurationService);case 3:o=r.sent,a=new Date,this.debounce.update(this.editor.getModel(),a.getTime()-i.getTime()),r.next=12;break;case 8:return r.prev=8,r.t0=r.catch(0),(0,k.dL)(r.t0),r.abrupt("return");case 12:if(!t.isCancellationRequested){r.next=14;break}return r.abrupt("return");case 14:this.cache.setValue(this.editor,o,e),this.updateFilteredInlineCompletions(),this.onDidChangeEmitter.fire();case 17:case"end":return r.stop()}}),r,this,[[0,8]])})))})),o=new te(r,e),this.updateOperation.value=o,t.next=9,r;case 9:this.updateOperation.value===o&&this.updateOperation.clear();case 10:case"end":return t.stop()}}),t,this)})))}},{key:"takeOwnership",value:function(e){this._register(e)}},{key:"commitCurrentCompletion",value:function(){if(this.ghostText){var e=this.currentCompletion;e&&this.commit(e)}}},{key:"commit",value:function(e){var t,n,i=this.cache.clearAndLeak();(e.snippetInfo?(this.editor.executeEdits("inlineSuggestion.accept",[L.h.replaceMove(e.range,"")].concat((0,y.Z)(e.additionalTextEdits))),this.editor.setPosition(e.snippetInfo.range.getStartPosition()),null===(t=Y.SnippetController2.get(this.editor))||void 0===t||t.insert(e.snippetInfo.snippet)):this.editor.executeEdits("inlineSuggestion.accept",[L.h.replaceMove(e.range,e.insertText)].concat((0,y.Z)(e.additionalTextEdits))),e.command)?(n=this.commandService).executeCommand.apply(n,[e.command.id].concat((0,y.Z)(e.command.arguments||[]))).finally((function(){null===i||void 0===i||i.dispose()})).then(void 0,k.Cp):null===i||void 0===i||i.dispose();this.onDidChangeEmitter.fire()}},{key:"commands",get:function(){var e,t=new Set((null===(e=this.cache.value)||void 0===e?void 0:e.completions.map((function(e){return e.inlineCompletion.sourceInlineCompletions})))||[]);return(0,y.Z)(t).flatMap((function(e){return e.commands||[]}))}}]),n}(R),te=function(){function e(t,n){(0,u.Z)(this,e),this.promise=t,this.triggerKind=n}return(0,c.Z)(e,[{key:"dispose",value:function(){this.promise.cancel()}}]),e}(),ne=function(e){(0,l.Z)(n,e);var t=(0,d.Z)(n);function n(e,i,r,o){var a;(0,u.Z)(this,n),(a=t.call(this)).editor=i,a.onChange=r,a.triggerKind=o,a.isDisposing=!1;var s=i.changeDecorations((function(t){return t.deltaDecorations([],e.items.map((function(e){return{range:e.range,options:{description:"inline-completion-tracking-range"}}})))}));return a._register((0,v.OF)((function(){a.isDisposing=!0,i.removeDecorations(s)}))),a.completions=e.items.map((function(e,t){return new ie(e,s[t])})),a._register(i.onDidChangeModelContent((function(){a.updateRanges()}))),a._register(e),a}return(0,c.Z)(n,[{key:"updateRanges",value:function(){if(!this.isDisposing){var e,t=!1,n=this.editor.getModel(),i=(0,_.Z)(this.completions);try{for(i.s();!(e=i.n()).done;){var r=e.value,o=n.getDecorationRange(r.decorationId);o?r.synchronizedRange.equalsRange(o)||(t=!0,r.synchronizedRange=o):(0,k.dL)(new Error("Decoration has no range"))}}catch(a){i.e(a)}finally{i.f()}t&&this.onChange()}}}]),n}(v.JT),ie=function(){function e(t,n){(0,u.Z)(this,e),this.inlineCompletion=t,this.decorationId=n,this.semanticId=JSON.stringify({text:this.inlineCompletion.insertText,abbreviation:this.inlineCompletion.filterText,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=t.range}return(0,c.Z)(e,[{key:"toLiveInlineCompletion",value:function(){return{insertText:this.inlineCompletion.insertText,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion,snippetInfo:this.inlineCompletion.snippetInfo,filterText:this.inlineCompletion.filterText,additionalTextEdits:this.inlineCompletion.additionalTextEdits}}}]),e}();function re(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:C.T.None,o=arguments.length>5?arguments[5]:void 0;return $(this,void 0,void 0,(0,s.Z)().mark((function a(){var u,c,l,d,h,v,g,f,p,m,b,C,w,L,S,I,N,D=this;return(0,s.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return u=oe(t,n),c=e.all(n),a.next=4,Promise.all(c.map((function(e){return $(D,void 0,void 0,(0,s.Z)().mark((function o(){var a;return(0,s.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Promise.resolve(e.provideInlineCompletions(n,t,i,r)).catch(k.Cp);case 2:return a=o.sent,o.abrupt("return",{completions:a,provider:e,dispose:function(){a&&e.freeInlineCompletions(a)}});case 4:case"end":return o.stop()}}),o)})))})));case 4:l=a.sent,d=new Map,h=(0,_.Z)(l),a.prev=7,h.s();case 9:if((v=h.n()).done){a.next=39;break}if(g=v.value,f=g.completions){a.next=14;break}return a.abrupt("continue",37);case 14:p=(0,_.Z)(f.items),a.prev=15,p.s();case 17:if((m=p.n()).done){a.next=29;break}if(b=m.value,(C=b.range?x.e.lift(b.range):u).startLineNumber===C.endLineNumber){a.next=22;break}return a.abrupt("continue",27);case 22:w=void 0,L=void 0,"string"===typeof b.insertText?(w=b.insertText,o&&b.completeBracketPairs&&(w=ae(w,C.getStartPosition(),n,o),0!==(S=w.length-b.insertText.length)&&(C=new x.e(C.startLineNumber,C.startColumn,C.endLineNumber,C.endColumn+S))),L=void 0):"snippet"in b.insertText?(I=(new j.Yj).parse(b.insertText.snippet),w=I.toString(),L={snippet:b.insertText.snippet,range:C}):(0,q.vE)(b.insertText),N={insertText:w,snippetInfo:L,range:C,command:b.command,sourceProvider:g.provider,sourceInlineCompletions:f,sourceInlineCompletion:b,filterText:b.filterText||w,additionalTextEdits:b.additionalTextEdits||Z()},d.set(JSON.stringify({insertText:w,range:b.range}),N);case 27:a.next=17;break;case 29:a.next=34;break;case 31:a.prev=31,a.t0=a.catch(15),p.e(a.t0);case 34:return a.prev=34,p.f(),a.finish(34);case 37:a.next=9;break;case 39:a.next=44;break;case 41:a.prev=41,a.t1=a.catch(7),h.e(a.t1);case 44:return a.prev=44,h.f(),a.finish(44);case 47:return a.abrupt("return",{items:(0,y.Z)(d.values()),dispose:function(){var e,t=(0,_.Z)(l);try{for(t.s();!(e=t.n()).done;){e.value.dispose()}}catch(n){t.e(n)}finally{t.f()}}});case 48:case"end":return a.stop()}}),a,null,[[7,41,44,47],[15,31,34,37]])})))}function oe(e,t){var n=t.getWordAtPosition(e),i=t.getLineMaxColumn(e.lineNumber);return n?new x.e(e.lineNumber,n.startColumn,e.lineNumber,i):x.e.fromPositions(e,e.with(void 0,i))}function ae(e,t,n,i){var r=n.getLineContent(t.lineNumber).substring(0,t.column-1)+e,o=n.tokenization.tokenizeLineWithEdit(t,r.length-(t.column-1),e),a=null===o||void 0===o?void 0:o.sliceAndInflate(t.column-1,r.length,0);return a?(0,V.r)(a,i):e}var se=n(71881),ue=n(93011),ce=n(35600),le=function(e){(0,l.Z)(n,e);var t=(0,d.Z)(n);function n(e,i){var r;(0,u.Z)(this,n),(r=t.call(this)).editor=e,r.suggestControllerPreselector=i,r.isSuggestWidgetVisible=!1,r.isShiftKeyPressed=!1,r._isActive=!1,r._currentSuggestItemInfo=void 0,r.onDidChangeEmitter=new h.Q5,r.onDidChange=r.onDidChangeEmitter.event,r.setInactiveDelayed=r._register(new b.pY((function(){r.isSuggestWidgetVisible||r._isActive&&(r._isActive=!1,r.onDidChangeEmitter.fire())}),100)),r._register(e.onKeyDown((function(e){e.shiftKey&&!r.isShiftKeyPressed&&(r.isShiftKeyPressed=!0,r.update(r._isActive))}))),r._register(e.onKeyUp((function(e){e.shiftKey&&r.isShiftKeyPressed&&(r.isShiftKeyPressed=!1,r.update(r._isActive))})));var o=ce.SuggestController.get(r.editor);if(o){r._register(o.registerSelector({priority:100,select:function(e,t,n){var i=r.editor.getModel(),a=P(i,r.suggestControllerPreselector());if(!a)return-1;var s=p.L.lift(t),u=n.map((function(e,t){var n,u,c=de(o,s,e,r.isShiftKeyPressed),l=P(i,null===c||void 0===c?void 0:c.normalizedInlineCompletion);if(l)return{index:t,valid:(n=a.range,(u=l.range).startLineNumber===n.startLineNumber&&u.startColumn===n.startColumn&&(u.endLineNumber<n.endLineNumber||u.endLineNumber===n.endLineNumber&&u.endColumn<=n.endColumn)&&a.insertText.startsWith(l.insertText)),prefixLength:l.insertText.length,suggestItem:e}})).filter((function(e){return e&&e.valid})),c=(0,se.Dc)(u,(0,se.tT)((function(e){return e.prefixLength}),se.fv));return c?c.index:-1}}));var a=!1;r._register(h.ju.once(o.model.onDidTrigger)((function(e){a||(a=!0,r._register(o.widget.value.onDidShow((function(){r.isSuggestWidgetVisible=!0,r.update(!0)}))),r._register(o.widget.value.onDidHide((function(){r.isSuggestWidgetVisible=!1,r.setInactiveDelayed.schedule(),r.update(r._isActive)}))),r._register(o.widget.value.onDidFocus((function(){r.isSuggestWidgetVisible=!0,r.update(!0)}))))})))}return r.update(r._isActive),r}return(0,c.Z)(n,[{key:"state",get:function(){if(this._isActive)return{selectedItem:this._currentSuggestItemInfo}}},{key:"update",value:function(e){var t=this.getSuggestItemInfo(),n=!1;(function(e,t){if(e===t)return!0;if(!e||!t)return!1;return e.completionItemKind===t.completionItemKind&&e.isSnippetText===t.isSnippetText&&function(e,t){return e===t||!(!e||!t)&&e.range.equalsRange(t.range)&&e.insertText===t.insertText&&e.command===t.command}(e.normalizedInlineCompletion,t.normalizedInlineCompletion)})(this._currentSuggestItemInfo,t)||(this._currentSuggestItemInfo=t,n=!0),this._isActive!==e&&(this._isActive=e,n=!0),n&&this.onDidChangeEmitter.fire()}},{key:"getSuggestItemInfo",value:function(){var e=ce.SuggestController.get(this.editor);if(e&&this.isSuggestWidgetVisible){var t=e.widget.value.getFocusedItem();if(t)return de(e,this.editor.getPosition(),t.item,this.isShiftKeyPressed)}}},{key:"stopForceRenderingAbove",value:function(){var e=ce.SuggestController.get(this.editor);e&&e.stopForceRenderingAbove()}},{key:"forceRenderingAbove",value:function(){var e=ce.SuggestController.get(this.editor);e&&e.forceRenderingAbove()}}]),n}(v.JT);function de(e,t,n,i){if(Array.isArray(n.completion.additionalTextEdits)&&n.completion.additionalTextEdits.length>0)return{completionItemKind:n.completion.kind,isSnippetText:!1,normalizedInlineCompletion:{range:x.e.fromPositions(t,t),insertText:"",filterText:"",snippetInfo:void 0,additionalTextEdits:[]}};var r=n.completion.insertText,o=!1;if(4&n.completion.insertTextRules){var a=(new j.Yj).parse(r),s=e.editor.getModel();if(a.children.length>100)return;ue.l.adjustWhitespace(s,t,a,!0,!0),r=a.toString(),o=!0}var u=e.getOverwriteInfo(n,i);return{isSnippetText:o,completionItemKind:n.completion.kind,normalizedInlineCompletion:{insertText:r,filterText:r,range:x.e.fromPositions(t.delta(0,-u.overwriteBefore),t.delta(0,Math.max(u.overwriteAfter,0))),snippetInfo:void 0,additionalTextEdits:[]}}}var he=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ve=function(e,t){return function(n,i){t(n,i,e)}},ge=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},fe=function(e){(0,l.Z)(n,e);var t=(0,d.Z)(n);function n(e,i,r){var o;return(0,u.Z)(this,n),(o=t.call(this,e)).cache=i,o.languageFeaturesService=r,o.suggestionInlineCompletionSource=o._register(new le(o.editor,(function(){var e,t;return null===(t=null===(e=o.cache.value)||void 0===e?void 0:e.completions[0])||void 0===t?void 0:t.toLiveInlineCompletion()}))),o.updateOperation=o._register(new v.XK),o.updateCacheSoon=o._register(new b.pY((function(){return o.updateCache()}),50)),o.minReservedLineCount=0,o._register(o.suggestionInlineCompletionSource.onDidChange((function(){if(o.editor.hasModel()){o.updateCacheSoon.schedule(),o.suggestionInlineCompletionSource.state||(o.minReservedLineCount=0);var e=o.ghostText;e&&(o.minReservedLineCount=Math.max(o.minReservedLineCount,e.parts.map((function(e){return e.lines.length-1})).reduce((function(e,t){return e+t}),0))),o.minReservedLineCount>=1?o.suggestionInlineCompletionSource.forceRenderingAbove():o.suggestionInlineCompletionSource.stopForceRenderingAbove(),o.onDidChangeEmitter.fire()}}))),o._register(o.cache.onDidChange((function(){o.onDidChangeEmitter.fire()}))),o._register(o.editor.onDidChangeCursorPosition((function(e){o.minReservedLineCount=0,o.updateCacheSoon.schedule(),o.onDidChangeEmitter.fire()}))),o._register((0,v.OF)((function(){return o.suggestionInlineCompletionSource.stopForceRenderingAbove()}))),o}return(0,c.Z)(n,[{key:"isActive",get:function(){return void 0!==this.suggestionInlineCompletionSource.state}},{key:"isSuggestionPreviewEnabled",value:function(){return this.editor.getOption(108).preview}},{key:"updateCache",value:function(){return ge(this,void 0,void 0,(0,s.Z)().mark((function e(){var t,n,i,r,o,a=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.suggestionInlineCompletionSource.state)&&t.selectedItem){e.next=3;break}return e.abrupt("return");case 3:if(n={text:t.selectedItem.normalizedInlineCompletion.insertText,range:t.selectedItem.normalizedInlineCompletion.range,isSnippetText:t.selectedItem.isSnippetText,completionKind:t.selectedItem.completionItemKind},i=this.editor.getPosition(),!t.selectedItem.isSnippetText&&27!==t.selectedItem.completionItemKind&&20!==t.selectedItem.completionItemKind&&23!==t.selectedItem.completionItemKind){e.next=8;break}return this.cache.clear(),e.abrupt("return");case 8:return r=(0,b.PG)((function(e){return ge(a,void 0,void 0,(0,s.Z)().mark((function t(){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,re(this.languageFeaturesService.inlineCompletionsProvider,i,this.editor.getModel(),{triggerKind:m.bw.Automatic,selectedSuggestionInfo:n},e);case 3:r=t.sent,t.next=10;break;case 6:return t.prev=6,t.t0=t.catch(0),(0,k.dL)(t.t0),t.abrupt("return");case 10:if(!e.isCancellationRequested){t.next=13;break}return r.dispose(),t.abrupt("return");case 13:this.cache.setValue(this.editor,r,m.bw.Automatic),this.onDidChangeEmitter.fire();case 15:case"end":return t.stop()}}),t,this,[[0,6]])})))})),o=new te(r,m.bw.Automatic),this.updateOperation.value=o,e.next=13,r;case 13:this.updateOperation.value===o&&this.updateOperation.clear();case 14:case"end":return e.stop()}}),e,this)})))}},{key:"ghostText",get:function(){var e,t,n,i=this.isSuggestionPreviewEnabled(),r=this.editor.getModel(),o=P(r,null===(t=null===(e=this.cache.value)||void 0===e?void 0:e.completions[0])||void 0===t?void 0:t.toLiveInlineCompletion()),a=this.suggestionInlineCompletionSource.state,s=P(r,null===(n=null===a||void 0===a?void 0:a.selectedItem)||void 0===n?void 0:n.normalizedInlineCompletion),u=o&&s&&o.insertText.startsWith(s.insertText)&&o.range.equalsRange(s.range);if(i||u){var c=u?o:s||o,l=u?c.insertText.length-s.insertText.length:0;return this.toGhostText(c,l)}}},{key:"toGhostText",value:function(e,t){var n=this.editor.getOptions().get(108).previewMode;return e?A(e,this.editor.getModel(),n,this.editor.getPosition(),t)||new N(e.range.endLineNumber,[],this.minReservedLineCount):void 0}}]),n}(R);fe=he([ve(2,K.p)],fe);var pe=n(8850),me=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},_e=function(e,t){return function(n,i){t(n,i,e)}},ye=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},be=function(e){(0,l.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.apply(this,arguments)).onDidChangeEmitter=new h.Q5,e.onDidChange=e.onDidChangeEmitter.event,e.hasCachedGhostText=!1,e.currentModelRef=e._register(new v.XK),e}return(0,c.Z)(n,[{key:"targetModel",get:function(){var e;return null===(e=this.currentModelRef.value)||void 0===e?void 0:e.object}},{key:"setTargetModel",value:function(e){var t,n,i,r=this;(null===(t=this.currentModelRef.value)||void 0===t?void 0:t.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?(n=e,i=e.onDidChange((function(){r.hasCachedGhostText=!1,r.onDidChangeEmitter.fire()})),{object:n,dispose:function(){return null===i||void 0===i?void 0:i.dispose()}}):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}},{key:"ghostText",get:function(){var e,t;return this.hasCachedGhostText||(this.cachedGhostText=null===(t=null===(e=this.currentModelRef.value)||void 0===e?void 0:e.object)||void 0===t?void 0:t.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}},{key:"setExpanded",value:function(e){var t;null===(t=this.targetModel)||void 0===t||t.setExpanded(e)}},{key:"minReservedLineCount",get:function(){return this.targetModel?this.targetModel.minReservedLineCount:0}}]),n}(v.JT),Ce=function(e){(0,l.Z)(n,e);var t=(0,d.Z)(n);function n(e,i){var r;return(0,u.Z)(this,n),(r=t.call(this)).editor=e,r.instantiationService=i,r.sharedCache=r._register(new we),r.suggestWidgetAdapterModel=r._register(r.instantiationService.createInstance(fe,r.editor,r.sharedCache)),r.inlineCompletionsModel=r._register(r.instantiationService.createInstance(X,r.editor,r.sharedCache)),r._register(r.suggestWidgetAdapterModel.onDidChange((function(){r.updateModel()}))),r.updateModel(),r}return(0,c.Z)(n,[{key:"activeInlineCompletionsModel",get:function(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}},{key:"updateModel",value:function(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}},{key:"shouldShowHoverAt",value:function(e){var t,n=null===(t=this.activeInlineCompletionsModel)||void 0===t?void 0:t.ghostText;return!!n&&n.parts.some((function(t){return e.containsPosition(new p.L(n.lineNumber,t.column))}))}},{key:"triggerInlineCompletion",value:function(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.trigger(m.bw.Explicit)}},{key:"commitInlineCompletion",value:function(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.commitCurrentSuggestion()}},{key:"hideInlineCompletion",value:function(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.hide()}},{key:"showNextInlineCompletion",value:function(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.showNext()}},{key:"showPreviousInlineCompletion",value:function(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.showPrevious()}},{key:"hasMultipleInlineCompletions",value:function(){var e;return ye(this,void 0,void 0,(0,s.Z)().mark((function t(){var n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(e=this.activeInlineCompletionsModel)||void 0===e?void 0:e.hasMultipleInlineCompletions();case 2:return n=t.sent,t.abrupt("return",void 0!==n&&n);case 4:case"end":return t.stop()}}),t,this)})))}}]),n}(be);Ce=me([_e(1,pe.TG)],Ce);var ke,we=function(e){(0,l.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.apply(this,arguments)).onDidChangeEmitter=new h.Q5,e.onDidChange=e.onDidChangeEmitter.event,e.cache=e._register(new v.XK),e}return(0,c.Z)(n,[{key:"value",get:function(){return this.cache.value}},{key:"setValue",value:function(e,t,n){var i=this;this.cache.value=new ne(t,e,(function(){return i.onDidChangeEmitter.fire()}),n)}},{key:"clearAndLeak",value:function(){return this.cache.clearAndLeak()}},{key:"clear",value:function(){this.cache.clear()}}]),n}(v.JT),Le=n(97326),xe=n(53210),Se=n(6815),Ie=n(31492),Ze=n(58705),Ne=n(63633),De=n(36158),Me=n(63024),Re=n(2374),Te=n(50381),Oe=n(87627),Pe=n(3553),Ae=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Ee=function(e,t){return function(n,i){t(n,i,e)}},He=null===(ke=window.trustedTypes)||void 0===ke?void 0:ke.createPolicy("editorGhostText",{createHTML:function(e){return e}}),We=function(e){(0,l.Z)(n,e);var t=(0,d.Z)(n);function n(e,i,r,o){var a;return(0,u.Z)(this,n),(a=t.call(this)).editor=e,a.model=i,a.instantiationService=r,a.languageService=o,a.disposed=!1,a.partsWidget=a._register(a.instantiationService.createInstance(Fe,a.editor)),a.additionalLinesWidget=a._register(new Ve(a.editor,a.languageService.languageIdCodec)),a.viewMoreContentWidget=void 0,a.replacementDecoration=a._register(new Ue(a.editor)),a._register(a.editor.onDidChangeConfiguration((function(e){(e.hasChanged(29)||e.hasChanged(107)||e.hasChanged(90)||e.hasChanged(85)||e.hasChanged(47)||e.hasChanged(46)||e.hasChanged(61))&&a.update()}))),a._register((0,v.OF)((function(){var e;a.disposed=!0,a.update(),null===(e=a.viewMoreContentWidget)||void 0===e||e.dispose(),a.viewMoreContentWidget=void 0}))),a._register(i.onDidChange((function(){a.update()}))),a.update(),a}return(0,c.Z)(n,[{key:"shouldShowHoverAtViewZone",value:function(e){return this.additionalLinesWidget.viewZoneId===e}},{key:"update",value:function(){var e,t=this.model.ghostText;if(!this.editor.hasModel()||!t||this.disposed)return this.partsWidget.clear(),this.additionalLinesWidget.clear(),void this.replacementDecoration.clear();var n=new Array,i=new Array;function r(e,t){if(i.length>0){var n=i[i.length-1];t&&n.decorations.push(new Te.Kp(n.content.length+1,n.content.length+1+e[0].length,t,0)),n.content+=e[0],e=e.slice(1)}var r,o=(0,_.Z)(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;i.push({content:a,decorations:t?[new Te.Kp(1,a.length+1,t,0)]:[]})}}catch(s){o.e(s)}finally{o.f()}}t instanceof M?this.replacementDecoration.setDecorations([{range:new x.e(t.lineNumber,t.columnStart,t.lineNumber,t.columnStart+t.length),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}]):this.replacementDecoration.setDecorations([]);var o,a=this.editor.getModel().getLineContent(t.lineNumber),s=void 0,u=0,c=(0,_.Z)(t.parts);try{for(c.s();!(o=c.n()).done;){var l=o.value,d=l.lines;void 0===s?(n.push({column:l.column,text:d[0],preview:l.preview}),d=d.slice(1)):r([a.substring(u,l.column-1)],void 0),d.length>0&&(r(d,"ghost-text"),void 0===s&&l.column<=a.length&&(s=l.column)),u=l.column-1}}catch(h){c.e(h)}finally{c.f()}void 0!==s&&r([a.substring(u)],void 0),this.partsWidget.setParts(t.lineNumber,n,void 0!==s?{column:s,length:a.length+1-s}:void 0),this.additionalLinesWidget.updateLines(t.lineNumber,i,t.additionalReservedLineCount),null===(e=this.viewMoreContentWidget)||void 0===e||e.dispose(),this.viewMoreContentWidget=void 0}},{key:"renderViewMoreLines",value:function(e,t,n){var i=this,r=this.editor.getOption(46),o=document.createElement("div");o.className="suggest-preview-additional-widget",(0,Se.N)(o,r);var a=document.createElement("span");a.className="content-spacer",a.append(t),o.append(a);var s=document.createElement("span");s.className="content-newline suggest-preview-text",s.append("\u23ce  "),o.append(s);var u=new v.SL,c=document.createElement("div");return c.className="button suggest-preview-text",c.append("+".concat(n," lines\u2026")),u.add(xe.addStandardDisposableListener(c,"mousedown",(function(e){var t;null===(t=i.model)||void 0===t||t.setExpanded(!0),e.preventDefault(),i.editor.focus()}))),o.append(c),new Ke(this.editor,e,o,u)}}]),n}(v.JT);We=Ae([Ee(2,pe.TG),Ee(3,Me.O)],We);var Ue=function(){function e(t){(0,u.Z)(this,e),this.editor=t,this.decorationIds=[]}return(0,c.Z)(e,[{key:"setDecorations",value:function(e){var t=this;this.editor.changeDecorations((function(n){t.decorationIds=n.deltaDecorations(t.decorationIds,e)}))}},{key:"clear",value:function(){this.setDecorations([])}},{key:"dispose",value:function(){this.clear()}}]),e}(),Fe=function(){function e(t){(0,u.Z)(this,e),this.editor=t,this.decorationIds=[]}return(0,c.Z)(e,[{key:"dispose",value:function(){this.clear()}},{key:"clear",value:function(){var e=this;this.editor.changeDecorations((function(t){e.decorationIds=t.deltaDecorations(e.decorationIds,[])}))}},{key:"setParts",value:function(e,t,n){var i=this;if(this.editor.getModel()){var r=new Array;n&&r.push({range:x.e.fromPositions(new p.L(e,n.column),new p.L(e,n.column+n.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}}),this.editor.changeDecorations((function(n){i.decorationIds=n.deltaDecorations(i.decorationIds,t.map((function(t){return{range:x.e.fromPositions(new p.L(e,t.column)),options:{description:"ghost-text",after:{content:t.text,inlineClassName:t.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:De.RM.Left},showIfCollapsed:!0}}})).concat(r))}))}}}]),e}(),Ve=function(){function e(t,n){(0,u.Z)(this,e),this.editor=t,this.languageIdCodec=n,this._viewZoneId=void 0}return(0,c.Z)(e,[{key:"viewZoneId",get:function(){return this._viewZoneId}},{key:"dispose",value:function(){this.clear()}},{key:"clear",value:function(){var e=this;this.editor.changeViewZones((function(t){e._viewZoneId&&(t.removeZone(e._viewZoneId),e._viewZoneId=void 0)}))}},{key:"updateLines",value:function(e,t,n){var i=this,r=this.editor.getModel();if(r){var o=r.getOptions().tabSize;this.editor.changeViewZones((function(r){i._viewZoneId&&(r.removeZone(i._viewZoneId),i._viewZoneId=void 0);var a=Math.max(t.length,n);if(a>0){var s=document.createElement("div");!function(e,t,n,i,r){var o=i.get(29),a=i.get(107),s="none",u=i.get(85),c=i.get(47),l=i.get(46),d=i.get(61),h=(0,Ne.l$)(1e4);h.appendASCIIString('<div class="suggest-preview-text">');for(var v=0,f=n.length;v<f;v++){var p=n[v],m=p.content;h.appendASCIIString('<div class="view-line'),h.appendASCIIString('" style="top:'),h.appendASCIIString(String(v*d)),h.appendASCIIString('px;width:1000000px;">');var _=g.$i(m),y=g.Ut(m),b=Ze.A.createEmpty(m,r);(0,Oe.d1)(new Oe.IJ(l.isMonospace&&!o,l.canUseHalfwidthRightwardsArrow,m,!1,_,y,0,b,p.decorations,t,0,l.spaceWidth,l.middotWidth,l.wsmiddotWidth,a,s,u,c!==Ie.n0.OFF,null),h),h.appendASCIIString("</div>")}h.appendASCIIString("</div>"),(0,Se.N)(e,l);var C=h.build(),k=He?He.createHTML(C):C;e.innerHTML=k}(s,o,t,i.editor.getOptions(),i.languageIdCodec),i._viewZoneId=r.addZone({afterLineNumber:e,heightInLines:a,domNode:s,afterColumnAffinity:1})}}))}}}]),e}();var Ke=function(e){(0,l.Z)(n,e);var t=(0,d.Z)(n);function n(e,i,r,o){var a;return(0,u.Z)(this,n),(a=t.call(this)).editor=e,a.position=i,a.domNode=r,a.allowEditorOverflow=!1,a.suppressMouseDown=!1,a._register(o),a._register((0,v.OF)((function(){a.editor.removeContentWidget((0,Le.Z)(a))}))),a.editor.addContentWidget((0,Le.Z)(a)),a}return(0,c.Z)(n,[{key:"getId",value:function(){return"editor.widget.viewMoreLinesWidget"}},{key:"getDomNode",value:function(){return this.domNode}},{key:"getPosition",value:function(){return{position:this.position,preference:[0]}}}]),n}(v.JT);(0,Pe.Ic)((function(e,t){var n=e.getColor(Re.N5);n&&(t.addRule(".monaco-editor .ghost-text-decoration { color: ".concat(n.toString()," !important; }")),t.addRule(".monaco-editor .ghost-text-decoration-preview { color: ".concat(n.toString()," !important; }")),t.addRule(".monaco-editor .suggest-preview-text .ghost-text { color: ".concat(n.toString()," !important; }")));var i=e.getColor(Re.IO);i&&(t.addRule(".monaco-editor .ghost-text-decoration { background-color: ".concat(i.toString(),"; }")),t.addRule(".monaco-editor .ghost-text-decoration-preview { background-color: ".concat(i.toString(),"; }")),t.addRule(".monaco-editor .suggest-preview-text .ghost-text { background-color: ".concat(i.toString(),"; }")));var r=e.getColor(Re.x3);r&&(t.addRule(".monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ".concat(r,"; }")),t.addRule(".monaco-editor .ghost-text-decoration { border: 1px solid ".concat(r,"; }")),t.addRule(".monaco-editor .ghost-text-decoration-preview { border: 1px solid ".concat(r,"; }")))}));var ze=n(87697),je=n(49525),Ye=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},qe=function(e,t){return function(n,i){t(n,i,e)}},Be=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},Qe=function(e){(0,l.Z)(n,e);var t=(0,d.Z)(n);function n(e,i){var r;return(0,u.Z)(this,n),(r=t.call(this)).editor=e,r.instantiationService=i,r.triggeredExplicitly=!1,r.activeController=r._register(new v.XK),r.activeModelDidChangeEmitter=r._register(new h.Q5),r._register(r.editor.onDidChangeModel((function(){r.updateModelController()}))),r._register(r.editor.onDidChangeConfiguration((function(e){e.hasChanged(108)&&r.updateModelController(),e.hasChanged(57)&&r.updateModelController()}))),r.updateModelController(),r}return(0,c.Z)(n,[{key:"activeModel",get:function(){var e;return null===(e=this.activeController.value)||void 0===e?void 0:e.model}},{key:"updateModelController",value:function(){var e=this.editor.getOption(108),t=this.editor.getOption(57);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(Je,this.editor):void 0,this.activeModelDidChangeEmitter.fire()}},{key:"shouldShowHoverAt",value:function(e){var t;return(null===(t=this.activeModel)||void 0===t?void 0:t.shouldShowHoverAt(e))||!1}},{key:"shouldShowHoverAtViewZone",value:function(e){var t,n;return(null===(n=null===(t=this.activeController.value)||void 0===t?void 0:t.widget)||void 0===n?void 0:n.shouldShowHoverAtViewZone(e))||!1}},{key:"trigger",value:function(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),null===(e=this.activeModel)||void 0===e||e.triggerInlineCompletion()}},{key:"commit",value:function(){var e;null===(e=this.activeModel)||void 0===e||e.commitInlineCompletion()}},{key:"hide",value:function(){var e;null===(e=this.activeModel)||void 0===e||e.hideInlineCompletion()}},{key:"showNextInlineCompletion",value:function(){var e;null===(e=this.activeModel)||void 0===e||e.showNextInlineCompletion()}},{key:"showPreviousInlineCompletion",value:function(){var e;null===(e=this.activeModel)||void 0===e||e.showPreviousInlineCompletion()}},{key:"hasMultipleInlineCompletions",value:function(){var e;return Be(this,void 0,void 0,(0,s.Z)().mark((function t(){var n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(e=this.activeModel)||void 0===e?void 0:e.hasMultipleInlineCompletions();case 2:return n=t.sent,t.abrupt("return",void 0!==n&&n);case 4:case"end":return t.stop()}}),t,this)})))}}],[{key:"get",value:function(e){return e.getContribution(n.ID)}}]),n}(v.JT);Qe.inlineSuggestionVisible=new je.uy("inlineSuggestionVisible",!1,ze.NC("inlineSuggestionVisible","Whether an inline suggestion is visible")),Qe.inlineSuggestionHasIndentation=new je.uy("inlineSuggestionHasIndentation",!1,ze.NC("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace")),Qe.inlineSuggestionHasIndentationLessThanTabSize=new je.uy("inlineSuggestionHasIndentationLessThanTabSize",!0,ze.NC("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab")),Qe.ID="editor.contrib.ghostTextController",Qe=Ye([qe(1,pe.TG)],Qe);var Ge=(0,c.Z)((function e(t){(0,u.Z)(this,e),this.contextKeyService=t,this.inlineCompletionVisible=Qe.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=Qe.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=Qe.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService)})),Je=function(e){(0,l.Z)(n,e);var t=(0,d.Z)(n);function n(e,i,r){var o;return(0,u.Z)(this,n),(o=t.call(this)).editor=e,o.instantiationService=i,o.contextKeyService=r,o.contextKeys=new Ge(o.contextKeyService),o.model=o._register(o.instantiationService.createInstance(Ce,o.editor)),o.widget=o._register(o.instantiationService.createInstance(We,o.editor,o.model)),o._register((0,v.OF)((function(){o.contextKeys.inlineCompletionVisible.set(!1),o.contextKeys.inlineCompletionSuggestsIndentation.set(!1),o.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)}))),o._register(o.model.onDidChange((function(){o.updateContextKeys()}))),o.updateContextKeys(),o}return(0,c.Z)(n,[{key:"updateContextKeys",value:function(){var e;this.contextKeys.inlineCompletionVisible.set(void 0!==(null===(e=this.model.activeInlineCompletionsModel)||void 0===e?void 0:e.ghostText));var t=!1,n=!0,i=this.model.inlineCompletionsModel.ghostText;if(this.model.activeInlineCompletionsModel&&i&&i.parts.length>0){var r=i.parts[0],o=r.column,a=r.lines[0];if(o<=this.editor.getModel().getLineIndentColumn(i.lineNumber)){var s=(0,g.LC)(a);-1===s&&(s=a.length-1),t=s>0;var u=this.editor.getModel().getOptions().tabSize;n=f.i.visibleColumnFromColumn(a,s+1,u)<u}}this.contextKeys.inlineCompletionSuggestsIndentation.set(t),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(n)}}]),n}(v.JT);Je=Ye([qe(1,pe.TG),qe(2,je.i6)],Je);var $e=function(e){(0,l.Z)(n,e);var t=(0,d.Z)(n);function n(){return(0,u.Z)(this,n),t.call(this,{id:n.ID,label:ze.NC("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:je.Ao.and(r.u.writable,Qe.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}return(0,c.Z)(n,[{key:"run",value:function(e,t){return Be(this,void 0,void 0,(0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=Qe.get(t))&&(n.showNextInlineCompletion(),t.focus());case 2:case"end":return e.stop()}}),e)})))}}]),n}(i.R6);$e.ID="editor.action.inlineSuggest.showNext";var Xe=function(e){(0,l.Z)(n,e);var t=(0,d.Z)(n);function n(){return(0,u.Z)(this,n),t.call(this,{id:n.ID,label:ze.NC("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:je.Ao.and(r.u.writable,Qe.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}return(0,c.Z)(n,[{key:"run",value:function(e,t){return Be(this,void 0,void 0,(0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=Qe.get(t))&&(n.showPreviousInlineCompletion(),t.focus());case 2:case"end":return e.stop()}}),e)})))}}]),n}(i.R6);Xe.ID="editor.action.inlineSuggest.showPrevious";var et=function(e){(0,l.Z)(n,e);var t=(0,d.Z)(n);function n(){return(0,u.Z)(this,n),t.call(this,{id:"editor.action.inlineSuggest.trigger",label:ze.NC("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:r.u.writable})}return(0,c.Z)(n,[{key:"run",value:function(e,t){return Be(this,void 0,void 0,(0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=Qe.get(t))&&n.trigger();case 2:case"end":return e.stop()}}),e)})))}}]),n}(i.R6),tt=n(29439),nt=n(67277),it=n(65163),rt=n(99277),ot=n(23911),at=n(74990),st=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ut=function(e,t){return function(n,i){t(n,i,e)}},ct=function(){function e(t,n,i){(0,u.Z)(this,e),this.owner=t,this.range=n,this.controller=i}return(0,c.Z)(e,[{key:"isValidForHoverAnchor",value:function(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}},{key:"hasMultipleSuggestions",value:function(){return this.controller.hasMultipleInlineCompletions()}},{key:"commands",get:function(){var e,t,n;return(null===(n=null===(t=null===(e=this.controller.activeModel)||void 0===e?void 0:e.activeInlineCompletionsModel)||void 0===t?void 0:t.completionSession.value)||void 0===n?void 0:n.commands)||[]}}]),e}(),lt=function(){function e(t,n,i,r,o,a,s){(0,u.Z)(this,e),this._editor=t,this._commandService=n,this._menuService=i,this._contextKeyService=r,this._languageService=o,this._openerService=a,this.accessibilityService=s,this.hoverOrdinal=3}return(0,c.Z)(e,[{key:"suggestHoverAnchor",value:function(e){var t=Qe.get(this._editor);if(!t)return null;var n=e.target;if(8===n.type){var i=n.detail;if(t.shouldShowHoverAtViewZone(i.viewZoneId))return new o.YM(1e3,this,x.e.fromPositions(i.positionBefore||i.position,i.positionBefore||i.position))}if(7===n.type&&t.shouldShowHoverAt(n.range))return new o.YM(1e3,this,n.range);if(6===n.type&&(n.detail.mightBeForeignElement&&t.shouldShowHoverAt(n.range)))return new o.YM(1e3,this,n.range);return null}},{key:"computeSync",value:function(e,t){var n=Qe.get(this._editor);return n&&n.shouldShowHoverAt(e.range)?[new ct(this,e.range,n)]:[]}},{key:"renderHoverParts",value:function(e,t){var n=this,i=new v.SL,r=t[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(e,r,i);var o=i.add(this._menuService.createMenu(ot.eH.InlineCompletionsActions,this._contextKeyService)),s=e.statusBar.addAction({label:ze.NC("showNextInlineSuggestion","Next"),commandId:$e.ID,run:function(){return n._commandService.executeCommand($e.ID)}}),u=e.statusBar.addAction({label:ze.NC("showPreviousInlineSuggestion","Previous"),commandId:Xe.ID,run:function(){return n._commandService.executeCommand(Xe.ID)}});e.statusBar.addAction({label:ze.NC("acceptInlineSuggestion","Accept"),commandId:a,run:function(){return n._commandService.executeCommand(a)}});for(var c=[s,u],l=0,d=c;l<d.length;l++){d[l].setEnabled(!1)}r.hasMultipleSuggestions().then((function(e){for(var t=0,n=c;t<n.length;t++){n[t].setEnabled(e)}}));var h,g=(0,_.Z)(r.commands);try{var f=function(){var t=h.value;e.statusBar.addAction({label:t.title,commandId:t.id,run:function(){var e;return(e=n._commandService).executeCommand.apply(e,[t.id].concat((0,y.Z)(t.arguments||[])))}})};for(g.s();!(h=g.n()).done;)f()}catch(x){g.e(x)}finally{g.f()}var p,m=(0,_.Z)(o.getActions());try{for(m.s();!(p=m.n()).done;){var b,C=(0,tt.Z)(p.value,2),k=(C[0],C[1]),w=(0,_.Z)(k);try{var L=function(){var t=b.value;t instanceof ot.U8&&e.statusBar.addAction({label:t.label,commandId:t.item.id,run:function(){return n._commandService.executeCommand(t.item.id)}})};for(w.s();!(b=w.n()).done;)L()}catch(x){w.e(x)}finally{w.f()}}}catch(x){m.e(x)}finally{m.f()}return i}},{key:"renderScreenReaderText",value:function(e,t,n){var i,r,o=xe.$,a=o("div.hover-row.markdown-hover"),s=xe.append(a,o("div.hover-contents")),u=n.add(new it.$({editor:this._editor},this._languageService,this._openerService)),c=null===(r=null===(i=t.controller.activeModel)||void 0===i?void 0:i.inlineCompletionsModel)||void 0===r?void 0:r.ghostText;if(c){var l=this._editor.getModel().getLineContent(c.lineNumber);!function(t){n.add(u.onDidRenderAsync((function(){s.className="hover-contents code-hover-contents",e.onContentsChanged()})));var i=ze.NC("inlineSuggestionFollows","Suggestion:"),r=n.add(u.render((new nt.W5).appendText(i).appendCodeblock("text",t)));s.replaceChildren(r.element)}(c.renderForScreenReader(l))}e.fragment.appendChild(a)}}]),e}();lt=st([ut(1,T.Hy),ut(2,ot.co),ut(3,je.i6),ut(4,Me.O),ut(5,at.v4),ut(6,rt.F)],lt);var dt=n(90031);(0,i._K)(Qe.ID,Qe),(0,i.Qr)(et),(0,i.Qr)($e),(0,i.Qr)(Xe),o.Ae.register(lt);var ht=i._l.bindToContribution(Qe.get),vt=new ht({id:a,precondition:Qe.inlineSuggestionVisible,handler:function(e){e.commit(),e.editor.focus()}});(0,i.fK)(vt),dt.W.registerKeybindingRule({primary:2,weight:200,id:vt.id,when:je.Ao.and(vt.precondition,r.u.tabMovesFocus.toNegated(),Qe.inlineSuggestionHasIndentationLessThanTabSize)}),(0,i.fK)(new ht({id:"editor.action.inlineSuggest.hide",precondition:Qe.inlineSuggestionVisible,kbOpts:{weight:100,primary:9},handler:function(e){e.hide()}}))},5514:function(e,t,n){n.r(t),n.d(t,{ExpandLineSelectionAction:function(){return d}});var i=n(15671),r=n(43144),o=n(60136),a=n(27277),s=n(98351),u=n(4614),c=n(44474),l=n(87697),d=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.call(this,{id:"expandLineSelection",label:l.NC("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:c.u.textInputFocus,primary:2090}})}return(0,r.Z)(n,[{key:"run",value:function(e,t,n){if(n=n||{},t.hasModel()){var i=t._getViewModel();i.model.pushStackElement(),i.setCursorStates(n.source,3,u.P.expandLineSelection(i,i.getCursorStates())),i.revealPrimaryCursor(n.source,!0)}}}]),n}(s.R6);(0,s.Qr)(d)},56189:function(e,t,n){n.r(t),n.d(t,{AbstractCaseAction:function(){return ne},AbstractDeleteAllToBoundaryAction:function(){return J},AbstractSortLinesAction:function(){return F},DeleteAllLeftAction:function(){return $},DeleteAllRightAction:function(){return X},DeleteDuplicateLinesAction:function(){return z},DeleteLinesAction:function(){return Y},DuplicateSelectionAction:function(){return E},IndentLinesAction:function(){return q},InsertLineAfterAction:function(){return G},InsertLineBeforeAction:function(){return Q},JoinLinesAction:function(){return ee},KebabCaseAction:function(){return ue},LowerCaseAction:function(){return re},SnakeCaseAction:function(){return se},SortLinesAscendingAction:function(){return V},SortLinesDescendingAction:function(){return K},TitleCaseAction:function(){return ae},TransposeAction:function(){return te},TrimTrailingWhitespaceAction:function(){return j},UpperCaseAction:function(){return ie}});var i=n(37762),r=n(15671),o=n(43144),a=n(60136),s=n(27277),u=n(27924),c=n(23605),l=n(98351),d=n(11922),h=n(66533),v=n(52720),g=n(15261),f=n(10849),p=n(30788),m=n(52091),_=n(44474),y=function(){function e(t,n,i){(0,r.Z)(this,e),this._selection=t,this._isCopyingDown=n,this._noop=i||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}return(0,o.Z)(e,[{key:"getEditOperations",value:function(e,t){var n=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,n.startLineNumber<n.endLineNumber&&1===n.endColumn&&(this._endLineNumberDelta=1,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));for(var i=[],r=n.startLineNumber;r<=n.endLineNumber;r++)i.push(e.getLineContent(r));var o=i.join("\n");""===o&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new p.e(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber+1,1),n.endLineNumber===e.getLineCount()?"":"\n"):this._isCopyingDown?t.addEditOperation(new p.e(n.startLineNumber,1,n.startLineNumber,1),o+"\n"):t.addEditOperation(new p.e(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),"\n"+o),this._selectionId=t.trackSelection(n),this._selectionDirection=this._selection.getDirection()}},{key:"computeCursorState",value:function(e,t){var n=t.getTrackedSelection(this._selectionId);if(0!==this._startLineNumberDelta||0!==this._endLineNumberDelta){var i=n.startLineNumber,r=n.startColumn,o=n.endLineNumber,a=n.endColumn;0!==this._startLineNumberDelta&&(i+=this._startLineNumberDelta,r=1),0!==this._endLineNumberDelta&&(o+=this._endLineNumberDelta,a=1),n=m.Y.createWithDirection(i,r,o,a,this._selectionDirection)}return n}}]),e}(),b=n(26684),C=n(55428),k=n(75057),w=n(26765),L=n(90570),x=n(83692),S=n(16485),I=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Z=function(e,t){return function(n,i){t(n,i,e)}},N=function(){function e(t,n,i,o){(0,r.Z)(this,e),this._languageConfigurationService=o,this._selection=t,this._isMovingDown=n,this._autoIndent=i,this._selectionId=null,this._moveEndLineSelectionShrink=!1}return(0,o.Z)(e,[{key:"getEditOperations",value:function(e,t){var n=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===n)this._selectionId=t.trackSelection(this._selection);else if(this._isMovingDown||1!==this._selection.startLineNumber){this._moveEndPositionDown=!1;var i=this._selection;i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));var r=e.getOptions(),o=r.tabSize,a=r.indentSize,s=r.insertSpaces,u=this.buildIndentConverter(o,a,s),c={tokenization:{getLineTokens:function(t){return e.tokenization.getLineTokens(t)},getLanguageId:function(){return e.getLanguageId()},getLanguageIdAtPosition:function(t,n){return e.getLanguageIdAtPosition(t,n)}},getLineContent:null};if(i.startLineNumber===i.endLineNumber&&1===e.getLineMaxColumn(i.startLineNumber)){var l=i.startLineNumber,d=this._isMovingDown?l+1:l-1;1===e.getLineMaxColumn(d)?t.addEditOperation(new p.e(1,1,1,1),null):(t.addEditOperation(new p.e(l,1,l,1),e.getLineContent(d)),t.addEditOperation(new p.e(d,1,d,e.getLineMaxColumn(d)),null)),i=new m.Y(d,1,d,1)}else{var h,v;if(this._isMovingDown){h=i.endLineNumber+1,v=e.getLineContent(h),t.addEditOperation(new p.e(h-1,e.getLineMaxColumn(h-1),h,e.getLineMaxColumn(h)),null);var g=v;if(this.shouldAutoIndent(e,i)){var f=this.matchEnterRule(e,u,o,h,i.startLineNumber-1);if(null!==f){var _=b.V8(e.getLineContent(h)),y=f+L.Y(_,o),C=L.J(y,o,s);g=C+this.trimLeft(v)}else{c.getLineContent=function(t){return t===i.startLineNumber?e.getLineContent(h):e.getLineContent(t)};var k=(0,x.n8)(this._autoIndent,c,e.getLanguageIdAtPosition(h,1),i.startLineNumber,u,this._languageConfigurationService);if(null!==k){var w=b.V8(e.getLineContent(h)),S=L.Y(k,o);if(S!==L.Y(w,o)){var I=L.J(S,o,s);g=I+this.trimLeft(v)}}}t.addEditOperation(new p.e(i.startLineNumber,1,i.startLineNumber,1),g+"\n");var Z=this.matchEnterRuleMovingDown(e,u,o,i.startLineNumber,h,g);if(null!==Z)0!==Z&&this.getIndentEditsOfMovingBlock(e,t,i,o,s,Z);else{c.getLineContent=function(t){return t===i.startLineNumber?g:t>=i.startLineNumber+1&&t<=i.endLineNumber+1?e.getLineContent(t-1):e.getLineContent(t)};var N=(0,x.n8)(this._autoIndent,c,e.getLanguageIdAtPosition(h,1),i.startLineNumber+1,u,this._languageConfigurationService);if(null!==N){var D=b.V8(e.getLineContent(i.startLineNumber)),M=L.Y(N,o),R=L.Y(D,o);if(M!==R){var T=M-R;this.getIndentEditsOfMovingBlock(e,t,i,o,s,T)}}}}else t.addEditOperation(new p.e(i.startLineNumber,1,i.startLineNumber,1),g+"\n")}else if(h=i.startLineNumber-1,v=e.getLineContent(h),t.addEditOperation(new p.e(h,1,h+1,1),null),t.addEditOperation(new p.e(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),"\n"+v),this.shouldAutoIndent(e,i)){c.getLineContent=function(t){return t===h?e.getLineContent(i.startLineNumber):e.getLineContent(t)};var O=this.matchEnterRule(e,u,o,i.startLineNumber,i.startLineNumber-2);if(null!==O)0!==O&&this.getIndentEditsOfMovingBlock(e,t,i,o,s,O);else{var P=(0,x.n8)(this._autoIndent,c,e.getLanguageIdAtPosition(i.startLineNumber,1),h,u,this._languageConfigurationService);if(null!==P){var A=b.V8(e.getLineContent(i.startLineNumber)),E=L.Y(P,o),H=L.Y(A,o);if(E!==H){var W=E-H;this.getIndentEditsOfMovingBlock(e,t,i,o,s,W)}}}}}this._selectionId=t.trackSelection(i)}else this._selectionId=t.trackSelection(this._selection)}},{key:"buildIndentConverter",value:function(e,t,n){return{shiftIndent:function(i){return C.U.shiftIndent(i,i.length+1,e,t,n)},unshiftIndent:function(i){return C.U.unshiftIndent(i,i.length+1,e,t,n)}}}},{key:"parseEnterResult",value:function(e,t,n,i,r){if(r){var o=r.indentation;r.indentAction===k.wU.None||r.indentAction===k.wU.Indent?o=r.indentation+r.appendText:r.indentAction===k.wU.IndentOutdent?o=r.indentation:r.indentAction===k.wU.Outdent&&(o=t.unshiftIndent(r.indentation)+r.appendText);var a=e.getLineContent(i);if(this.trimLeft(a).indexOf(this.trimLeft(o))>=0){var s=b.V8(e.getLineContent(i)),u=b.V8(o),c=(0,x.tI)(e,i,this._languageConfigurationService);return null!==c&&2&c&&(u=t.unshiftIndent(u)),L.Y(u,n)-L.Y(s,n)}}return null}},{key:"matchEnterRuleMovingDown",value:function(e,t,n,i,r,o){if(b.ow(o)>=0){var a=e.getLineMaxColumn(r),s=(0,S.A)(this._autoIndent,e,new p.e(r,a,r,a),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,s)}for(var u=i-1;u>=1;){var c=e.getLineContent(u);if(b.ow(c)>=0)break;u--}if(u<1||i>e.getLineCount())return null;var l=e.getLineMaxColumn(u),d=(0,S.A)(this._autoIndent,e,new p.e(u,l,u,l),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,d)}},{key:"matchEnterRule",value:function(e,t,n,i,r,o){for(var a=r;a>=1;){var s=void 0;if(s=a===r&&void 0!==o?o:e.getLineContent(a),b.ow(s)>=0)break;a--}if(a<1||i>e.getLineCount())return null;var u=e.getLineMaxColumn(a),c=(0,S.A)(this._autoIndent,e,new p.e(a,u,a,u),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,c)}},{key:"trimLeft",value:function(e){return e.replace(/^\s+/,"")}},{key:"shouldAutoIndent",value:function(e,t){if(this._autoIndent<4)return!1;if(!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;var n=e.getLanguageIdAtPosition(t.startLineNumber,1);return n===e.getLanguageIdAtPosition(t.endLineNumber,1)&&null!==this._languageConfigurationService.getLanguageConfiguration(n).indentRulesSupport}},{key:"getIndentEditsOfMovingBlock",value:function(e,t,n,i,r,o){for(var a=n.startLineNumber;a<=n.endLineNumber;a++){var s=e.getLineContent(a),u=b.V8(s),c=L.Y(u,i)+o,l=L.J(c,i,r);l!==u&&(t.addEditOperation(new p.e(a,1,a,u.length+1),l),a===n.endLineNumber&&n.endColumn<=u.length+1&&""===l&&(this._moveEndLineSelectionShrink=!0))}}},{key:"computeCursorState",value:function(e,t){var n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&n.startLineNumber<n.endLineNumber&&(n=n.setEndPosition(n.endLineNumber,2)),n}}]),e}();N=I([Z(3,w.c_)],N);var D=function(){function e(t,n){(0,r.Z)(this,e),this.selection=t,this.descending=n,this.selectionId=null}return(0,o.Z)(e,[{key:"getEditOperations",value:function(e,t){var n=function(e,t,n){var i=M(e,t,n);if(!i)return null;return g.h.replace(new p.e(i.startLineNumber,1,i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),i.after.join("\n"))}(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this.selectionId)}}],[{key:"getCollator",value:function(){return e._COLLATOR||(e._COLLATOR=new Intl.Collator),e._COLLATOR}},{key:"canRun",value:function(e,t,n){if(null===e)return!1;var i=M(e,t,n);if(!i)return!1;for(var r=0,o=i.before.length;r<o;r++)if(i.before[r]!==i.after[r])return!0;return!1}}]),e}();function M(e,t,n){var i=t.startLineNumber,r=t.endLineNumber;if(1===t.endColumn&&r--,i>=r)return null;for(var o=[],a=i;a<=r;a++)o.push(e.getLineContent(a));var s=o.slice(0);return s.sort(D.getCollator().compare),!0===n&&(s=s.reverse()),{startLineNumber:i,endLineNumber:r,before:o,after:s}}D._COLLATOR=null;var R=n(87697),T=n(23911),O=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,i){var o;return(0,r.Z)(this,n),(o=t.call(this,i)).down=e,o}return(0,o.Z)(n,[{key:"run",value:function(e,t){if(t.hasModel()){var n=t.getSelections().map((function(e,t){return{selection:e,index:t,ignore:!1}}));n.sort((function(e,t){return p.e.compareRangesUsingStarts(e.selection,t.selection)}));for(var r=n[0],o=1;o<n.length;o++){var a=n[o];r.selection.endLineNumber===a.selection.startLineNumber&&(r.index<a.index?a.ignore=!0:(r.ignore=!0,r=a))}var s,u=[],c=(0,i.Z)(n);try{for(c.s();!(s=c.n()).done;){var l=s.value;u.push(new y(l.selection,this.down,l.ignore))}}catch(d){c.e(d)}finally{c.f()}t.pushUndoStop(),t.executeCommands(this.id,u),t.pushUndoStop()}}}]),n}(l.R6),P=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,!1,{id:"editor.action.copyLinesUpAction",label:R.NC("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:_.u.writable,kbOpts:{kbExpr:_.u.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:T.eH.MenubarSelectionMenu,group:"2_line",title:R.NC({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}return(0,o.Z)(n)}(O),A=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,!0,{id:"editor.action.copyLinesDownAction",label:R.NC("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:_.u.writable,kbOpts:{kbExpr:_.u.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:T.eH.MenubarSelectionMenu,group:"2_line",title:R.NC({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}return(0,o.Z)(n)}(O),E=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.duplicateSelection",label:R.NC("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:_.u.writable,menuOpts:{menuId:T.eH.MenubarSelectionMenu,group:"2_line",title:R.NC({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}return(0,o.Z)(n,[{key:"run",value:function(e,t,n){if(t.hasModel()){var r,o=[],a=t.getSelections(),s=t.getModel(),u=(0,i.Z)(a);try{for(u.s();!(r=u.n()).done;){var c=r.value;if(c.isEmpty())o.push(new y(c,!0));else{var l=new m.Y(c.endLineNumber,c.endColumn,c.endLineNumber,c.endColumn);o.push(new d.OY(l,s.getValueInRange(c)))}}}catch(h){u.e(h)}finally{u.f()}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}}]),n}(l.R6),H=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,i){var o;return(0,r.Z)(this,n),(o=t.call(this,i)).down=e,o}return(0,o.Z)(n,[{key:"run",value:function(e,t){var n,r=e.get(w.c_),o=[],a=t.getSelections()||[],s=t.getOption(9),u=(0,i.Z)(a);try{for(u.s();!(n=u.n()).done;){var c=n.value;o.push(new N(c,this.down,s,r))}}catch(l){u.e(l)}finally{u.f()}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}]),n}(l.R6),W=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,!1,{id:"editor.action.moveLinesUpAction",label:R.NC("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:_.u.writable,kbOpts:{kbExpr:_.u.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:T.eH.MenubarSelectionMenu,group:"2_line",title:R.NC({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}return(0,o.Z)(n)}(H),U=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,!0,{id:"editor.action.moveLinesDownAction",label:R.NC("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:_.u.writable,kbOpts:{kbExpr:_.u.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:T.eH.MenubarSelectionMenu,group:"2_line",title:R.NC({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}return(0,o.Z)(n)}(H),F=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,i){var o;return(0,r.Z)(this,n),(o=t.call(this,i)).descending=e,o}return(0,o.Z)(n,[{key:"run",value:function(e,t){var n,r=t.getSelections()||[],o=(0,i.Z)(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(!D.canRun(t.getModel(),a,this.descending))return}}catch(l){o.e(l)}finally{o.f()}for(var s=[],u=0,c=r.length;u<c;u++)s[u]=new D(r[u],this.descending);t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}]),n}(l.R6),V=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,!1,{id:"editor.action.sortLinesAscending",label:R.NC("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:_.u.writable})}return(0,o.Z)(n)}(F),K=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,!0,{id:"editor.action.sortLinesDescending",label:R.NC("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:_.u.writable})}return(0,o.Z)(n)}(F),z=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.removeDuplicateLines",label:R.NC("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:_.u.writable})}return(0,o.Z)(n,[{key:"run",value:function(e,t){if(t.hasModel()){var n=t.getModel();if(1!==n.getLineCount()||1!==n.getLineMaxColumn(1)){var r,o=[],a=[],s=0,u=(0,i.Z)(t.getSelections());try{for(u.s();!(r=u.n()).done;){for(var c=r.value,l=new Set,d=[],h=c.startLineNumber;h<=c.endLineNumber;h++){var v=n.getLineContent(h);l.has(v)||(d.push(v),l.add(v))}var f=new m.Y(c.startLineNumber,1,c.endLineNumber,n.getLineMaxColumn(c.endLineNumber)),p=c.startLineNumber-s,_=new m.Y(p,1,p+d.length-1,d[d.length-1].length);o.push(g.h.replace(f,d.join("\n"))),a.push(_),s+=c.endLineNumber-c.startLineNumber+1-d.length}}catch(y){u.e(y)}finally{u.f()}t.pushUndoStop(),t.executeEdits(this.id,o,a),t.pushUndoStop()}}}}]),n}(l.R6),j=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:n.ID,label:R.NC("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:_.u.writable,kbOpts:{kbExpr:_.u.editorTextFocus,primary:(0,u.gx)(2089,2102),weight:100}})}return(0,o.Z)(n,[{key:"run",value:function(e,t,n){var i=[];"auto-save"===n.reason&&(i=(t.getSelections()||[]).map((function(e){return new f.L(e.positionLineNumber,e.positionColumn)})));var r=t.getSelection();if(null!==r){var o=new h.V(r,i);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop()}}}]),n}(l.R6);j.ID="editor.action.trimTrailingWhitespace";var Y=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.deleteLines",label:R.NC("lines.delete","Delete Line"),alias:"Delete Line",precondition:_.u.writable,kbOpts:{kbExpr:_.u.textInputFocus,primary:3113,weight:100}})}return(0,o.Z)(n,[{key:"run",value:function(e,t){if(t.hasModel()){var n=this._getLinesToRemove(t),i=t.getModel();if(1!==i.getLineCount()||1!==i.getLineMaxColumn(1)){for(var r=0,o=[],a=[],s=0,u=n.length;s<u;s++){var c=n[s],l=c.startLineNumber,d=c.endLineNumber,h=1,v=i.getLineMaxColumn(d);d<i.getLineCount()?(d+=1,v=1):l>1&&(l-=1,h=i.getLineMaxColumn(l)),o.push(g.h.replace(new m.Y(l,h,d,v),"")),a.push(new m.Y(l-r,c.positionColumn,l-r,c.positionColumn)),r+=c.endLineNumber-c.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,o,a),t.pushUndoStop()}}}},{key:"_getLinesToRemove",value:function(e){var t=e.getSelections().map((function(e){var t=e.endLineNumber;return e.startLineNumber<e.endLineNumber&&1===e.endColumn&&(t-=1),{startLineNumber:e.startLineNumber,selectionStartColumn:e.selectionStartColumn,endLineNumber:t,positionColumn:e.positionColumn}}));t.sort((function(e,t){return e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber}));for(var n=[],i=t[0],r=1;r<t.length;r++)i.endLineNumber+1>=t[r].startLineNumber?i.endLineNumber=t[r].endLineNumber:(n.push(i),i=t[r]);return n.push(i),n}}]),n}(l.R6),q=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.indentLines",label:R.NC("lines.indent","Indent Line"),alias:"Indent Line",precondition:_.u.writable,kbOpts:{kbExpr:_.u.editorTextFocus,primary:2137,weight:100}})}return(0,o.Z)(n,[{key:"run",value:function(e,t){var n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,v.u6.indent(n.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}]),n}(l.R6),B=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.outdentLines",label:R.NC("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:_.u.writable,kbOpts:{kbExpr:_.u.editorTextFocus,primary:2135,weight:100}})}return(0,o.Z)(n,[{key:"run",value:function(e,t){c.CoreEditingCommands.Outdent.runEditorCommand(e,t,null)}}]),n}(l.R6),Q=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.insertLineBefore",label:R.NC("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:_.u.writable,kbOpts:{kbExpr:_.u.editorTextFocus,primary:3075,weight:100}})}return(0,o.Z)(n,[{key:"run",value:function(e,t){var n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,v.u6.lineInsertBefore(n.cursorConfig,t.getModel(),t.getSelections())))}}]),n}(l.R6),G=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.insertLineAfter",label:R.NC("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:_.u.writable,kbOpts:{kbExpr:_.u.editorTextFocus,primary:2051,weight:100}})}return(0,o.Z)(n,[{key:"run",value:function(e,t){var n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,v.u6.lineInsertAfter(n.cursorConfig,t.getModel(),t.getSelections())))}}]),n}(l.R6),J=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"run",value:function(e,t){if(t.hasModel()){for(var n=t.getSelection(),i=this._getRangesToDelete(t),r=[],o=0,a=i.length-1;o<a;o++){var s=i[o],u=i[o+1];null===p.e.intersectRanges(s,u)?r.push(s):i[o+1]=p.e.plusRange(s,u)}r.push(i[i.length-1]);var c=this._getEndCursorState(n,r),l=r.map((function(e){return g.h.replace(e,"")}));t.pushUndoStop(),t.executeEdits(this.id,l,c),t.pushUndoStop()}}}]),n}(l.R6),$=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"deleteAllLeft",label:R.NC("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:_.u.writable,kbOpts:{kbExpr:_.u.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}return(0,o.Z)(n,[{key:"_getEndCursorState",value:function(e,t){var n=null,i=[],r=0;return t.forEach((function(t){var o;if(1===t.endColumn&&r>0){var a=t.startLineNumber-r;o=new m.Y(a,t.startColumn,a,t.startColumn)}else o=new m.Y(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn);r+=t.endLineNumber-t.startLineNumber,t.intersectRanges(e)?n=o:i.push(o)})),n&&i.unshift(n),i}},{key:"_getRangesToDelete",value:function(e){var t=e.getSelections();if(null===t)return[];var n=t,i=e.getModel();return null===i?[]:(n.sort(p.e.compareRangesUsingStarts),n=n.map((function(e){if(e.isEmpty()){if(1===e.startColumn){var t=Math.max(1,e.startLineNumber-1),n=1===e.startLineNumber?1:i.getLineContent(t).length+1;return new p.e(t,n,e.startLineNumber,1)}return new p.e(e.startLineNumber,1,e.startLineNumber,e.startColumn)}return new p.e(e.startLineNumber,1,e.endLineNumber,e.endColumn)})))}}]),n}(J),X=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"deleteAllRight",label:R.NC("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:_.u.writable,kbOpts:{kbExpr:_.u.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}return(0,o.Z)(n,[{key:"_getEndCursorState",value:function(e,t){for(var n=null,i=[],r=0,o=t.length;r<o;r++){var a=t[r],s=new m.Y(a.startLineNumber-0,a.startColumn,a.startLineNumber-0,a.startColumn);a.intersectRanges(e)?n=s:i.push(s)}return n&&i.unshift(n),i}},{key:"_getRangesToDelete",value:function(e){var t=e.getModel();if(null===t)return[];var n=e.getSelections();if(null===n)return[];var i=n.map((function(e){if(e.isEmpty()){var n=t.getLineMaxColumn(e.startLineNumber);return e.startColumn===n?new p.e(e.startLineNumber,e.startColumn,e.startLineNumber+1,1):new p.e(e.startLineNumber,e.startColumn,e.startLineNumber,n)}return e}));return i.sort(p.e.compareRangesUsingStarts),i}}]),n}(J),ee=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.joinLines",label:R.NC("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:_.u.writable,kbOpts:{kbExpr:_.u.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}return(0,o.Z)(n,[{key:"run",value:function(e,t){var n=t.getSelections();if(null!==n){var i=t.getSelection();if(null!==i){n.sort(p.e.compareRangesUsingStarts);var r=[],o=n.reduce((function(e,t){return e.isEmpty()?e.endLineNumber===t.startLineNumber?(i.equalsSelection(e)&&(i=t),t):t.startLineNumber>e.endLineNumber+1?(r.push(e),t):new m.Y(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn):t.startLineNumber>e.endLineNumber?(r.push(e),t):new m.Y(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn)}));r.push(o);var a=t.getModel();if(null!==a){for(var s=[],u=[],c=i,l=0,d=0,h=r.length;d<h;d++){var v=r[d],f=v.startLineNumber,_=0,y=void 0,b=void 0,C=a.getLineContent(v.endLineNumber).length-v.endColumn;if(v.isEmpty()||v.startLineNumber===v.endLineNumber){var k=v.getStartPosition();k.lineNumber<a.getLineCount()?(y=f+1,b=a.getLineMaxColumn(y)):(y=k.lineNumber,b=a.getLineMaxColumn(k.lineNumber))}else y=v.endLineNumber,b=a.getLineMaxColumn(y);for(var w=a.getLineContent(f),L=f+1;L<=y;L++){var x=a.getLineContent(L),S=a.getLineFirstNonWhitespaceColumn(L);if(S>=1){var I=!0;""===w&&(I=!1),!I||" "!==w.charAt(w.length-1)&&"\t"!==w.charAt(w.length-1)||(I=!1,w=w.replace(/[\s\uFEFF\xA0]+$/g," "));var Z=x.substr(S-1);w+=(I?" ":"")+Z,_=I?Z.length+1:Z.length}else _=0}var N=new p.e(f,1,y,b);if(!N.isEmpty()){var D=void 0;v.isEmpty()?(s.push(g.h.replace(N,w)),D=new m.Y(N.startLineNumber-l,w.length-_+1,f-l,w.length-_+1)):v.startLineNumber===v.endLineNumber?(s.push(g.h.replace(N,w)),D=new m.Y(v.startLineNumber-l,v.startColumn,v.endLineNumber-l,v.endColumn)):(s.push(g.h.replace(N,w)),D=new m.Y(v.startLineNumber-l,v.startColumn,v.startLineNumber-l,w.length-C)),null!==p.e.intersectRanges(N,i)?c=D:u.push(D)}l+=N.endLineNumber-N.startLineNumber}u.unshift(c),t.pushUndoStop(),t.executeEdits(this.id,s,u),t.pushUndoStop()}}}}}]),n}(l.R6),te=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.transpose",label:R.NC("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:_.u.writable})}return(0,o.Z)(n,[{key:"run",value:function(e,t){var n=t.getSelections();if(null!==n){var i=t.getModel();if(null!==i){for(var r=[],o=0,a=n.length;o<a;o++){var s=n[o];if(s.isEmpty()){var u=s.getStartPosition(),c=i.getLineMaxColumn(u.lineNumber);if(u.column>=c){if(u.lineNumber===i.getLineCount())continue;var l=new p.e(u.lineNumber,Math.max(1,u.column-1),u.lineNumber+1,1),h=i.getValueInRange(l).split("").reverse().join("");r.push(new d.T4(new m.Y(u.lineNumber,Math.max(1,u.column-1),u.lineNumber+1,1),h))}else{var v=new p.e(u.lineNumber,Math.max(1,u.column-1),u.lineNumber,u.column+1),g=i.getValueInRange(v).split("").reverse().join("");r.push(new d.hP(v,g,new m.Y(u.lineNumber,u.column+1,u.lineNumber,u.column+1)))}}}t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}}}]),n}(l.R6),ne=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"run",value:function(e,t){var n=t.getSelections();if(null!==n){var r=t.getModel();if(null!==r){var o,a=t.getOption(119),s=[],u=(0,i.Z)(n);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(c.isEmpty()){var l=c.getStartPosition(),d=t.getConfiguredWordAtPosition(l);if(!d)continue;var h=new p.e(l.lineNumber,d.startColumn,l.lineNumber,d.endColumn),v=r.getValueInRange(h);s.push(g.h.replace(h,this._modifyText(v,a)))}else{var f=r.getValueInRange(c);s.push(g.h.replace(c,this._modifyText(f,a)))}}}catch(m){u.e(m)}finally{u.f()}t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop()}}}}]),n}(l.R6),ie=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.transformToUppercase",label:R.NC("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:_.u.writable})}return(0,o.Z)(n,[{key:"_modifyText",value:function(e,t){return e.toLocaleUpperCase()}}]),n}(ne),re=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.transformToLowercase",label:R.NC("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:_.u.writable})}return(0,o.Z)(n,[{key:"_modifyText",value:function(e,t){return e.toLocaleLowerCase()}}]),n}(ne),oe=function(){function e(t,n){(0,r.Z)(this,e),this._pattern=t,this._flags=n,this._actual=null,this._evaluated=!1}return(0,o.Z)(e,[{key:"get",value:function(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch(e){}}return this._actual}},{key:"isSupported",value:function(){return null!==this.get()}}]),e}(),ae=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.transformToTitlecase",label:R.NC("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:_.u.writable})}return(0,o.Z)(n,[{key:"_modifyText",value:function(e,t){var i=n.titleBoundary.get();return i?e.toLocaleLowerCase().replace(i,(function(e){return e.toLocaleUpperCase()})):e}}]),n}(ne);ae.titleBoundary=new oe("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");var se=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.transformToSnakecase",label:R.NC("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:_.u.writable})}return(0,o.Z)(n,[{key:"_modifyText",value:function(e,t){var i=n.caseBoundary.get(),r=n.singleLetters.get();return i&&r?e.replace(i,"$1_$2").replace(r,"$1_$2$3").toLocaleLowerCase():e}}]),n}(ne);se.caseBoundary=new oe("(\\p{Ll})(\\p{Lu})","gmu"),se.singleLetters=new oe("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");var ue=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.transformToKebabcase",label:R.NC("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:_.u.writable})}return(0,o.Z)(n,[{key:"_modifyText",value:function(e,t){var i=n.caseBoundary.get(),r=n.singleLetters.get(),o=n.underscoreBoundary.get();return i&&r&&o?e.replace(o,"$1-$3").replace(i,"$1-$2").replace(r,"$1-$2").toLocaleLowerCase():e}}],[{key:"isSupported",value:function(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every((function(e){return e.isSupported()}))}}]),n}(ne);ue.caseBoundary=new oe("(\\p{Ll})(\\p{Lu})","gmu"),ue.singleLetters=new oe("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu"),ue.underscoreBoundary=new oe("(\\S)(_)(\\S)","gm"),(0,l.Qr)(P),(0,l.Qr)(A),(0,l.Qr)(E),(0,l.Qr)(W),(0,l.Qr)(U),(0,l.Qr)(V),(0,l.Qr)(K),(0,l.Qr)(z),(0,l.Qr)(j),(0,l.Qr)(Y),(0,l.Qr)(q),(0,l.Qr)(B),(0,l.Qr)(Q),(0,l.Qr)(G),(0,l.Qr)($),(0,l.Qr)(X),(0,l.Qr)(ee),(0,l.Qr)(te),(0,l.Qr)(ie),(0,l.Qr)(re),se.caseBoundary.isSupported()&&se.singleLetters.isSupported()&&(0,l.Qr)(se),ae.titleBoundary.isSupported()&&(0,l.Qr)(ae),ue.isSupported()&&(0,l.Qr)(ue)},72133:function(e,t,n){n.r(t),n.d(t,{CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE:function(){return E},LinkedEditingAction:function(){return U},LinkedEditingContribution:function(){return W},editorLinkedEditingBackground:function(){return K}});var i=n(29439),r=n(74165),o=n(15671),a=n(43144),s=n(11752),u=n(61120),c=n(60136),l=n(27277),d=n(71881),h=n(32590),v=n(32124),g=n(17424),f=n(68552),p=n(28941),m=n(10526),_=n(26684),y=n(50605),b=n(98351),C=n(56692),k=n(10849),w=n(30788),L=n(44474),x=n(77161),S=n(26765),I=n(87697),Z=n(49525),N=n(6574),D=n(3553),M=n(45161),R=n(22847),T=n(9197),O=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},P=function(e,t){return function(n,i){t(n,i,e)}},A=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},E=new Z.uy("LinkedEditingInputVisible",!1),H="linked-editing-decoration",W=function(e){(0,c.Z)(n,e);var t=(0,l.Z)(n);function n(e,i,r,a,s){var u;return(0,o.Z)(this,n),(u=t.call(this)).languageConfigurationService=a,u._syncRangesToken=0,u._localToDispose=u._register(new m.SL),u._editor=e,u._providers=r.linkedEditingRangeProvider,u._enabled=!1,u._visibleContextKey=E.bindTo(i),u._debounceInformation=s.for(u._providers,"Linked Editing",{min:200}),u._currentDecorations=u._editor.createDecorationsCollection(),u._languageWordPattern=null,u._currentWordPattern=null,u._ignoreChangeEvent=!1,u._localToDispose=u._register(new m.SL),u._rangeUpdateTriggerPromise=null,u._rangeSyncTriggerPromise=null,u._currentRequest=null,u._currentRequestPosition=null,u._currentRequestModelVersion=null,u._register(u._editor.onDidChangeModel((function(){return u.reinitialize(!0)}))),u._register(u._editor.onDidChangeConfiguration((function(e){(e.hasChanged(64)||e.hasChanged(84))&&u.reinitialize(!1)}))),u._register(u._providers.onDidChange((function(){return u.reinitialize(!1)}))),u._register(u._editor.onDidChangeModelLanguage((function(){return u.reinitialize(!0)}))),u.reinitialize(!0),u}return(0,a.Z)(n,[{key:"reinitialize",value:function(e){var t=this,n=this._editor.getModel(),i=null!==n&&(this._editor.getOption(64)||this._editor.getOption(84))&&this._providers.has(n);if((i!==this._enabled||e)&&(this._enabled=i,this.clearRanges(),this._localToDispose.clear(),i&&null!==n)){this._localToDispose.add(p.ju.runAndSubscribe(n.onDidChangeLanguageConfiguration,(function(){t._languageWordPattern=t.languageConfigurationService.getLanguageConfiguration(n.getLanguageId()).getWordDefinition()})));var r=new h.vp(this._debounceInformation.get(n)),o=function(){var e;t._rangeUpdateTriggerPromise=r.trigger((function(){return t.updateRanges()}),null!==(e=t._debounceDuration)&&void 0!==e?e:t._debounceInformation.get(n))},a=new h.vp(0);this._localToDispose.add(this._editor.onDidChangeCursorPosition((function(){o()}))),this._localToDispose.add(this._editor.onDidChangeModelContent((function(e){if(!t._ignoreChangeEvent&&t._currentDecorations.length>0){var n=t._currentDecorations.getRange(0);if(n&&e.changes.every((function(e){return n.intersectRanges(e.range)})))return i=t._syncRangesToken,void(t._rangeSyncTriggerPromise=a.trigger((function(){return t._syncRanges(i)})))}var i;o()}))),this._localToDispose.add({dispose:function(){r.dispose(),a.dispose()}}),this.updateRanges()}}},{key:"_syncRanges",value:function(e){if(this._editor.hasModel()&&e===this._syncRangesToken&&0!==this._currentDecorations.length){var t=this._editor.getModel(),n=this._currentDecorations.getRange(0);if(!n||n.startLineNumber!==n.endLineNumber)return this.clearRanges();var i=t.getValueInRange(n);if(this._currentWordPattern){var r=i.match(this._currentWordPattern);if((r?r[0].length:0)!==i.length)return this.clearRanges()}for(var o=[],a=1,s=this._currentDecorations.length;a<s;a++){var u=this._currentDecorations.getRange(a);if(u)if(u.startLineNumber!==u.endLineNumber)o.push({range:u,text:i});else{var c=t.getValueInRange(u),l=i,d=u.startColumn,h=u.endColumn,v=_.Mh(c,l);d+=v,c=c.substr(v),l=l.substr(v);var g=_.P1(c,l);h-=g,c=c.substr(0,c.length-g),l=l.substr(0,l.length-g),d===h&&0===l.length||o.push({range:new w.e(u.startLineNumber,d,u.endLineNumber,h),text:l})}}if(0!==o.length)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;var f=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",o),this._editor._getViewModel().setPrevEditOperationType(f)}finally{this._ignoreChangeEvent=!1}}}},{key:"dispose",value:function(){this.clearRanges(),(0,s.Z)((0,u.Z)(n.prototype),"dispose",this).call(this)}},{key:"clearRanges",value:function(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}},{key:"updateRanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return A(this,void 0,void 0,(0,r.Z)().mark((function t(){var i,o,a,s,u,c=this;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._editor.hasModel()){t.next=3;break}return this.clearRanges(),t.abrupt("return");case 3:if(i=this._editor.getPosition(),!(!this._enabled&&!e||this._editor.getSelections().length>1)){t.next=7;break}return this.clearRanges(),t.abrupt("return");case 7:if(o=this._editor.getModel(),a=o.getVersionId(),!this._currentRequestPosition||this._currentRequestModelVersion!==a){t.next=16;break}if(!i.equals(this._currentRequestPosition)){t.next=12;break}return t.abrupt("return");case 12:if(!(this._currentDecorations.length>0)){t.next=16;break}if(!(s=this._currentDecorations.getRange(0))||!s.containsPosition(i)){t.next=16;break}return t.abrupt("return");case 16:return this._currentRequestPosition=i,this._currentRequestModelVersion=a,u=(0,h.PG)((function(e){return A(c,void 0,void 0,(0,r.Z)().mark((function t(){var s,c,l,d,h,v,g,p;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=new T.G(!1),t.next=4,V(this._providers,o,i,e);case 4:if(c=t.sent,this._debounceInformation.update(o,s.elapsed()),u===this._currentRequest){t.next=8;break}return t.abrupt("return");case 8:if(this._currentRequest=null,a===o.getVersionId()){t.next=11;break}return t.abrupt("return");case 11:l=[],(null===c||void 0===c?void 0:c.ranges)&&(l=c.ranges),this._currentWordPattern=(null===c||void 0===c?void 0:c.wordPattern)||this._languageWordPattern,d=!1,h=0,v=l.length;case 16:if(!(h<v)){t.next=24;break}if(!w.e.containsPosition(l[h],i)){t.next=21;break}return d=!0,0!==h&&(g=l[h],l.splice(h,1),l.unshift(g)),t.abrupt("break",24);case 21:h++,t.next=16;break;case 24:if(d){t.next=27;break}return this.clearRanges(),t.abrupt("return");case 27:p=l.map((function(e){return{range:e,options:n.DECORATION}})),this._visibleContextKey.set(!0),this._currentDecorations.set(p),this._syncRangesToken++,t.next=37;break;case 33:t.prev=33,t.t0=t.catch(0),(0,f.n2)(t.t0)||(0,f.dL)(t.t0),this._currentRequest!==u&&this._currentRequest||this.clearRanges();case 37:case"end":return t.stop()}}),t,this,[[0,33]])})))})),this._currentRequest=u,t.abrupt("return",u);case 21:case"end":return t.stop()}}),t,this)})))}}],[{key:"get",value:function(e){return e.getContribution(n.ID)}}]),n}(m.JT);W.ID="editor.contrib.linkedEditing",W.DECORATION=x.qx.register({description:"linked-editing",stickiness:0,className:H}),W=O([P(1,Z.i6),P(2,M.p),P(3,S.c_),P(4,R.A)],W);var U=function(e){(0,c.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,{id:"editor.action.linkedEditing",label:I.NC("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:Z.Ao.and(L.u.writable,L.u.hasRenameProvider),kbOpts:{kbExpr:L.u.editorTextFocus,primary:3132,weight:100}})}return(0,a.Z)(n,[{key:"runCommand",value:function(e,t){var r=this,o=e.get(C.$),a=Array.isArray(t)&&t||[void 0,void 0],c=(0,i.Z)(a,2),l=c[0],d=c[1];return y.o.isUri(l)&&k.L.isIPosition(d)?o.openCodeEditor({resource:l},o.getActiveCodeEditor()).then((function(e){e&&(e.setPosition(d),e.invokeWithinContext((function(t){return r.reportTelemetry(t,e),r.run(t,e)})))}),f.dL):(0,s.Z)((0,u.Z)(n.prototype),"runCommand",this).call(this,e,t)}},{key:"run",value:function(e,t){var n=W.get(t);return n?Promise.resolve(n.updateRanges(!0)):Promise.resolve()}}]),n}(b.R6),F=b._l.bindToContribution(W.get);function V(e,t,n,i){var o=this,a=e.ordered(t);return(0,h.Ps)(a.map((function(e){return function(){return A(o,void 0,void 0,(0,r.Z)().mark((function o(){return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.provideLinkedEditingRanges(t,n,i);case 3:return r.abrupt("return",r.sent);case 6:return r.prev=6,r.t0=r.catch(0),(0,f.Cp)(r.t0),r.abrupt("return",void 0);case 10:case"end":return r.stop()}}),o,null,[[0,6]])})))}})),(function(e){return!!e&&d.Of(null===e||void 0===e?void 0:e.ranges)}))}(0,b.fK)(new F({id:"cancelLinkedEditingInput",precondition:E,handler:function(e){return e.clearRanges()},kbOpts:{kbExpr:L.u.editorTextFocus,weight:199,primary:9,secondary:[1033]}}));var K=(0,N.P6G)("editor.linkedEditingBackground",{dark:g.Il.fromHex("#f00").transparent(.3),light:g.Il.fromHex("#f00").transparent(.3),hcDark:g.Il.fromHex("#f00").transparent(.3),hcLight:g.Il.white},I.NC("editorLinkedEditingBackground","Background color when the editor auto renames on type."));(0,D.Ic)((function(e,t){var n=e.getColor(K);n&&t.addRule(".monaco-editor .".concat(H," { background: ").concat(n,"; border-left-color: ").concat(n,"; }"))})),(0,b.sb)("_executeLinkedEditingProvider",(function(e,t,n){return V(e.get(M.p).linkedEditingRangeProvider,t,n,v.T.None)})),(0,b._K)(W.ID,W),(0,b.Qr)(U)},22678:function(e,t,n){n.r(t),n.d(t,{LinkDetector:function(){return z}});var i=n(37762),r=n(74165),o=n(29439),a=n(15671),s=n(43144),u=n(11752),c=n(61120),l=n(60136),d=n(27277),h=n(32590),v=n(32124),g=n(68552),f=n(67277),p=n(10526),m=n(16496),_=n(4827),y=n(34408),b=n(9197),C=n(50605),k=n(98351),w=n(77161),L=n(22847),x=n(45161),S=n(61826),I=n(71881),Z=n(64272),N=n(30788),D=n(74463),M=n(89850),R=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},T=function(){function e(t,n){(0,a.Z)(this,e),this._link=t,this._provider=n}return(0,s.Z)(e,[{key:"toJSON",value:function(){return{range:this.range,url:this.url,tooltip:this.tooltip}}},{key:"range",get:function(){return this._link.range}},{key:"url",get:function(){return this._link.url}},{key:"tooltip",get:function(){return this._link.tooltip}},{key:"resolve",value:function(e){return R(this,void 0,void 0,(0,r.Z)().mark((function t(){var n=this;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._link.url){t.next=2;break}return t.abrupt("return",this._link.url);case 2:if("function"!==typeof this._provider.resolveLink){t.next=4;break}return t.abrupt("return",Promise.resolve(this._provider.resolveLink(this._link,e)).then((function(t){return n._link=t||n._link,n._link.url?n.resolve(e):Promise.reject(new Error("missing"))})));case 4:return t.abrupt("return",Promise.reject(new Error("missing")));case 5:case"end":return t.stop()}}),t,this)})))}}]),e}(),O=function(){function e(t){var n=this;(0,a.Z)(this,e),this._disposables=new p.SL;var r,s=[],u=(0,i.Z)(t);try{var c=function(){var t=(0,o.Z)(r.value,2),i=t[0],a=t[1],u=i.links.map((function(e){return new T(e,a)}));s=e._union(s,u),(0,p.Wf)(i)&&n._disposables.add(i)};for(u.s();!(r=u.n()).done;)c()}catch(l){u.e(l)}finally{u.f()}this.links=s}return(0,s.Z)(e,[{key:"dispose",value:function(){this._disposables.dispose(),this.links.length=0}}],[{key:"_union",value:function(e,t){var n,i,r,o,a=[];for(n=0,r=0,i=e.length,o=t.length;n<i&&r<o;){var s=e[n],u=t[r];if(N.e.areIntersectingOrTouching(s.range,u.range))n++;else N.e.compareRangesUsingStarts(s.range,u.range)<0?(a.push(s),n++):(a.push(u),r++)}for(;n<i;n++)a.push(e[n]);for(;r<o;r++)a.push(t[r]);return a}}]),e}();function P(e,t,n){var i=[],r=e.ordered(t).reverse().map((function(e,r){return Promise.resolve(e.provideLinks(t,n)).then((function(t){t&&(i[r]=[t,e])}),g.Cp)}));return Promise.all(r).then((function(){var e=new O((0,I.kX)(i));return n.isCancellationRequested?(e.dispose(),new O([])):e}))}M.P0.registerCommand("_executeLinkProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return R(void 0,void 0,void 0,(0,r.Z)().mark((function t(){var i,o,a,s,u,c,l,d;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n[0],o=n[1],(0,Z.p_)(i instanceof C.o),"number"!==typeof o&&(o=0),a=e.get(x.p),s=a.linkProvider,u=e.get(D.q).getModel(i)){t.next=7;break}return t.abrupt("return",[]);case 7:return t.next=9,P(s,u,v.T.None);case 9:if(c=t.sent){t.next=12;break}return t.abrupt("return",[]);case 12:l=0;case 13:if(!(l<Math.min(o,c.links.length))){t.next=19;break}return t.next=16,c.links[l].resolve(v.T.None);case 16:l++,t.next=13;break;case 19:return d=c.links.slice(0),c.dispose(),t.abrupt("return",d);case 22:case"end":return t.stop()}}),t)})))}));var A=n(87697),E=n(13023),H=n(74990),W=n(6574),U=n(3553),F=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},V=function(e,t){return function(n,i){t(n,i,e)}},K=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},z=function(e){(0,l.Z)(n,e);var t=(0,d.Z)(n);function n(e,i,r,s,u){var c;(0,a.Z)(this,n),(c=t.call(this)).editor=e,c.openerService=i,c.notificationService=r,c.languageFeaturesService=s,c.providers=c.languageFeaturesService.linkProvider,c.debounceInformation=u.for(c.providers,"Links",{min:1e3,max:4e3}),c.computeLinks=c._register(new h.pY((function(){return c.computeLinksNow()}),1e3)),c.computePromise=null,c.activeLinksList=null,c.currentOccurrences={},c.activeLinkDecorationId=null;var l=c._register(new S.yN(e));return c._register(l.onMouseMoveOrRelevantKeyDown((function(e){var t=(0,o.Z)(e,2),n=t[0],i=t[1];c._onEditorMouseMove(n,i)}))),c._register(l.onExecute((function(e){c.onEditorMouseUp(e)}))),c._register(l.onCancel((function(e){c.cleanUpActiveLinkDecoration()}))),c._register(e.onDidChangeConfiguration((function(e){e.hasChanged(65)&&(c.updateDecorations([]),c.stop(),c.computeLinks.schedule(0))}))),c._register(e.onDidChangeModelContent((function(e){c.editor.hasModel()&&c.computeLinks.schedule(c.debounceInformation.get(c.editor.getModel()))}))),c._register(e.onDidChangeModel((function(e){c.currentOccurrences={},c.activeLinkDecorationId=null,c.stop(),c.computeLinks.schedule(0)}))),c._register(e.onDidChangeModelLanguage((function(e){c.stop(),c.computeLinks.schedule(0)}))),c._register(c.providers.onDidChange((function(e){c.stop(),c.computeLinks.schedule(0)}))),c.computeLinks.schedule(0),c}return(0,s.Z)(n,[{key:"computeLinksNow",value:function(){return K(this,void 0,void 0,(0,r.Z)().mark((function e(){var t,n,i=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.editor.hasModel()&&this.editor.getOption(65)){e.next=2;break}return e.abrupt("return");case 2:if(t=this.editor.getModel(),this.providers.has(t)){e.next=5;break}return e.abrupt("return");case 5:return this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=(0,h.PG)((function(e){return P(i.providers,t,e)})),e.prev=7,n=new b.G(!1),e.next=11,this.computePromise;case 11:if(this.activeLinksList=e.sent,this.debounceInformation.update(t,n.elapsed()),!t.isDisposed()){e.next=15;break}return e.abrupt("return");case 15:this.updateDecorations(this.activeLinksList.links),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(7),(0,g.dL)(e.t0);case 21:return e.prev=21,this.computePromise=null,e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[7,18,21,24]])})))}},{key:"updateDecorations",value:function(e){for(var t=this,n="altKey"===this.editor.getOption(72),r=[],o=0,a=Object.keys(this.currentOccurrences);o<a.length;o++){var s=a[o],u=this.currentOccurrences[s];r.push(u.decorationId)}var c=[];if(e){var l,d=(0,i.Z)(e);try{for(d.s();!(l=d.n()).done;){var h=l.value;c.push(Y.decoration(h,n))}}catch(v){d.e(v)}finally{d.f()}}this.editor.changeDecorations((function(n){var i=n.deltaDecorations(r,c);t.currentOccurrences={},t.activeLinkDecorationId=null;for(var o=0,a=i.length;o<a;o++){var s=new Y(e[o],i[o]);t.currentOccurrences[s.decorationId]=s}}))}},{key:"_onEditorMouseMove",value:function(e,t){var n=this,i="altKey"===this.editor.getOption(72);if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();var r=this.getLinkOccurrence(e.target.position);r&&this.editor.changeDecorations((function(e){r.activate(e,i),n.activeLinkDecorationId=r.decorationId}))}else this.cleanUpActiveLinkDecoration()}},{key:"cleanUpActiveLinkDecoration",value:function(){var e="altKey"===this.editor.getOption(72);if(this.activeLinkDecorationId){var t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations((function(n){t.deactivate(n,e)})),this.activeLinkDecorationId=null}}},{key:"onEditorMouseUp",value:function(e){if(this.isEnabled(e)){var t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}}},{key:"openLinkOccurrence",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.openerService){var r=e.link;r.resolve(v.T.None).then((function(e){if("string"===typeof e&&n.editor.hasModel()){var r=n.editor.getModel().uri;if(r.scheme===m.lg.file&&e.startsWith("".concat(m.lg.file,":"))){var o=C.o.parse(e);if(o.scheme===m.lg.file){var a=y.z_(o),s=null;a.startsWith("/./")?s=".".concat(a.substr(1)):a.startsWith("//./")&&(s=".".concat(a.substr(2))),s&&(e=y.Vo(r,s))}}}return n.openerService.open(e,{openToSide:t,fromUserGesture:i,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})}),(function(e){var t=e instanceof Error?e.message:e;"invalid"===t?n.notificationService.warn(A.NC("invalid.url","Failed to open this link because it is not well-formed: {0}",r.url.toString())):"missing"===t?n.notificationService.warn(A.NC("missing.url","Failed to open this link because its target is missing.")):(0,g.dL)(e)}))}}},{key:"getLinkOccurrence",value:function(e){if(!this.editor.hasModel()||!e)return null;var t,n=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0),r=(0,i.Z)(n);try{for(r.s();!(t=r.n()).done;){var o=t.value,a=this.currentOccurrences[o.id];if(a)return a}}catch(s){r.e(s)}finally{r.f()}return null}},{key:"isEnabled",value:function(e,t){return Boolean(6===e.target.type&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}},{key:"stop",value:function(){var e;this.computeLinks.cancel(),this.activeLinksList&&(null===(e=this.activeLinksList)||void 0===e||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}},{key:"dispose",value:function(){(0,u.Z)((0,c.Z)(n.prototype),"dispose",this).call(this),this.stop()}}],[{key:"get",value:function(e){return e.getContribution(n.ID)}}]),n}(p.JT);z.ID="editor.linkDetector",z=F([V(1,H.v4),V(2,E.lT),V(3,x.p),V(4,L.A)],z);var j={general:w.qx.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:w.qx.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})},Y=function(){function e(t,n){(0,a.Z)(this,e),this.link=t,this.decorationId=n}return(0,s.Z)(e,[{key:"activate",value:function(t,n){t.changeDecorationOptions(this.decorationId,e._getOptions(this.link,n,!0))}},{key:"deactivate",value:function(t,n){t.changeDecorationOptions(this.decorationId,e._getOptions(this.link,n,!1))}}],[{key:"decoration",value:function(t,n){return{range:t.range,options:e._getOptions(t,n,!1)}}},{key:"_getOptions",value:function(e,t,n){var i=Object.assign({},n?j.active:j.general);return i.hoverMessage=function(e,t){var n=e.url&&/^command:/i.test(e.url.toString()),i=e.tooltip?e.tooltip:n?A.NC("links.navigate.executeCmd","Execute command"):A.NC("links.navigate.follow","Follow link"),r=t?_.dz?A.NC("links.navigate.kb.meta.mac","cmd + click"):A.NC("links.navigate.kb.meta","ctrl + click"):_.dz?A.NC("links.navigate.kb.alt.mac","option + click"):A.NC("links.navigate.kb.alt","alt + click");if(e.url){var o="";if(/^command:/i.test(e.url.toString())){var a=e.url.toString().match(/^command:([^?#]+)/);if(a){var s=a[1];o=A.NC("tooltip.explanation","Execute command {0}",s)}}return new f.W5("",!0).appendLink(e.url.toString(!0).replace(/ /g,"%20"),i,o).appendMarkdown(" (".concat(r,")"))}return(new f.W5).appendText("".concat(i," (").concat(r,")"))}(e,t),i}}]),e}();var q=function(e){(0,l.Z)(n,e);var t=(0,d.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"editor.action.openLink",label:A.NC("label","Open Link"),alias:"Open Link",precondition:void 0})}return(0,s.Z)(n,[{key:"run",value:function(e,t){var n=z.get(t);if(n&&t.hasModel()){var r,o=t.getSelections(),a=(0,i.Z)(o);try{for(a.s();!(r=a.n()).done;){var s=r.value,u=n.getLinkOccurrence(s.getEndPosition());u&&n.openLinkOccurrence(u,!1)}}catch(c){a.e(c)}finally{a.f()}}}}]),n}(k.R6);(0,k._K)(z.ID,z),(0,k.Qr)(q),(0,U.Ic)((function(e,t){var n=e.getColor(W._Yy);n&&t.addRule(".monaco-editor .detected-link-active { color: ".concat(n," !important; }"))}))}}]);
//# sourceMappingURL=monaco-editor-vendor.dbdc571d.0e5f0f95.js.map