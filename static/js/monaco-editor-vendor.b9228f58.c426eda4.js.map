{"version":3,"file":"static/js/monaco-editor-vendor.b9228f58.c426eda4.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/browser/dnd.js","../node_modules/monaco-editor/esm/vs/editor/browser/editorBrowser.js","../node_modules/monaco-editor/esm/vs/editor/browser/editorDom.js","../node_modules/monaco-editor/esm/vs/editor/browser/editorExtensions.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/abstractCodeEditorService.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/bulkEditService.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/codeEditorService.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/editorWorkerService.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/markerDecorations.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/openerService.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/webWorker.js","../node_modules/monaco-editor/esm/vs/editor/browser/stableEditorScroll.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DataTransfers } from '../../base/browser/dnd.js';\nimport { createFileDataTransferItem, createStringDataTransferItem, UriList, VSDataTransfer } from '../../base/common/dataTransfer.js';\nimport { Mimes } from '../../base/common/mime.js';\nimport { URI } from '../../base/common/uri.js';\nimport { CodeDataTransfers } from '../../platform/dnd/browser/dnd.js';\nexport function toVSDataTransfer(dataTransfer) {\n    const vsDataTransfer = new VSDataTransfer();\n    for (const item of dataTransfer.items) {\n        const type = item.type;\n        if (item.kind === 'string') {\n            const asStringValue = new Promise(resolve => item.getAsString(resolve));\n            vsDataTransfer.append(type, createStringDataTransferItem(asStringValue));\n        }\n        else if (item.kind === 'file') {\n            const file = item.getAsFile();\n            if (file) {\n                vsDataTransfer.append(type, createFileDataTransferItemFromFile(file));\n            }\n        }\n    }\n    return vsDataTransfer;\n}\nfunction createFileDataTransferItemFromFile(file) {\n    const uri = file.path ? URI.parse(file.path) : undefined;\n    return createFileDataTransferItem(file.name, uri, () => __awaiter(this, void 0, void 0, function* () {\n        return new Uint8Array(yield file.arrayBuffer());\n    }));\n}\nconst INTERNAL_DND_MIME_TYPES = Object.freeze([\n    CodeDataTransfers.EDITORS,\n    CodeDataTransfers.FILES,\n    DataTransfers.RESOURCES,\n    DataTransfers.INTERNAL_URI_LIST,\n]);\nexport function toExternalVSDataTransfer(sourceDataTransfer, overwriteUriList = false) {\n    const vsDataTransfer = toVSDataTransfer(sourceDataTransfer);\n    // Try to expose the internal uri-list type as the standard type\n    const uriList = vsDataTransfer.get(DataTransfers.INTERNAL_URI_LIST);\n    if (uriList) {\n        vsDataTransfer.replace(Mimes.uriList, uriList);\n    }\n    else {\n        if (overwriteUriList || !vsDataTransfer.has(Mimes.uriList)) {\n            // Otherwise, fallback to adding dragged resources to the uri list\n            const editorData = [];\n            for (const item of sourceDataTransfer.items) {\n                const file = item.getAsFile();\n                if (file) {\n                    const path = file.path;\n                    try {\n                        if (path) {\n                            editorData.push(URI.file(path).toString());\n                        }\n                        else {\n                            editorData.push(URI.parse(file.name, true).toString());\n                        }\n                    }\n                    catch (_a) {\n                        // Parsing failed. Leave out from list\n                    }\n                }\n            }\n            if (editorData.length) {\n                vsDataTransfer.replace(Mimes.uriList, createStringDataTransferItem(UriList.create(editorData)));\n            }\n        }\n    }\n    for (const internal of INTERNAL_DND_MIME_TYPES) {\n        vsDataTransfer.delete(internal);\n    }\n    return vsDataTransfer;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as editorCommon from '../common/editorCommon.js';\n/**\n *@internal\n */\nexport function isCodeEditor(thing) {\n    if (thing && typeof thing.getEditorType === 'function') {\n        return thing.getEditorType() === editorCommon.EditorType.ICodeEditor;\n    }\n    else {\n        return false;\n    }\n}\n/**\n *@internal\n */\nexport function isDiffEditor(thing) {\n    if (thing && typeof thing.getEditorType === 'function') {\n        return thing.getEditorType() === editorCommon.EditorType.IDiffEditor;\n    }\n    else {\n        return false;\n    }\n}\n/**\n *@internal\n */\nexport function isCompositeEditor(thing) {\n    return !!thing\n        && typeof thing === 'object'\n        && typeof thing.onDidChangeActiveEditor === 'function';\n}\n/**\n *@internal\n */\nexport function getCodeEditor(thing) {\n    if (isCodeEditor(thing)) {\n        return thing;\n    }\n    if (isDiffEditor(thing)) {\n        return thing.getModifiedEditor();\n    }\n    if (isCompositeEditor(thing) && isCodeEditor(thing.activeCodeEditor)) {\n        return thing.activeCodeEditor;\n    }\n    return null;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../base/browser/dom.js';\nimport { GlobalPointerMoveMonitor } from '../../base/browser/globalPointerMoveMonitor.js';\nimport { StandardMouseEvent } from '../../base/browser/mouseEvent.js';\nimport { RunOnceScheduler } from '../../base/common/async.js';\nimport { Disposable } from '../../base/common/lifecycle.js';\nimport { asCssVariable } from '../../platform/theme/common/colorRegistry.js';\n/**\n * Coordinates relative to the whole document (e.g. mouse event's pageX and pageY)\n */\nexport class PageCoordinates {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n        this._pageCoordinatesBrand = undefined;\n    }\n    toClientCoordinates() {\n        return new ClientCoordinates(this.x - window.scrollX, this.y - window.scrollY);\n    }\n}\n/**\n * Coordinates within the application's client area (i.e. origin is document's scroll position).\n *\n * For example, clicking in the top-left corner of the client area will\n * always result in a mouse event with a client.x value of 0, regardless\n * of whether the page is scrolled horizontally.\n */\nexport class ClientCoordinates {\n    constructor(clientX, clientY) {\n        this.clientX = clientX;\n        this.clientY = clientY;\n        this._clientCoordinatesBrand = undefined;\n    }\n    toPageCoordinates() {\n        return new PageCoordinates(this.clientX + window.scrollX, this.clientY + window.scrollY);\n    }\n}\n/**\n * The position of the editor in the page.\n */\nexport class EditorPagePosition {\n    constructor(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this._editorPagePositionBrand = undefined;\n    }\n}\n/**\n * Coordinates relative to the the (top;left) of the editor that can be used safely with other internal editor metrics.\n * **NOTE**: This position is obtained by taking page coordinates and transforming them relative to the\n * editor's (top;left) position in a way in which scale transformations are taken into account.\n * **NOTE**: These coordinates could be negative if the mouse position is outside the editor.\n */\nexport class CoordinatesRelativeToEditor {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n        this._positionRelativeToEditorBrand = undefined;\n    }\n}\nexport function createEditorPagePosition(editorViewDomNode) {\n    const editorPos = dom.getDomNodePagePosition(editorViewDomNode);\n    return new EditorPagePosition(editorPos.left, editorPos.top, editorPos.width, editorPos.height);\n}\nexport function createCoordinatesRelativeToEditor(editorViewDomNode, editorPagePosition, pos) {\n    // The editor's page position is read from the DOM using getBoundingClientRect().\n    //\n    // getBoundingClientRect() returns the actual dimensions, while offsetWidth and offsetHeight\n    // reflect the unscaled size. We can use this difference to detect a transform:scale()\n    // and we will apply the transformation in inverse to get mouse coordinates that make sense inside the editor.\n    //\n    // This could be expanded to cover rotation as well maybe by walking the DOM up from `editorViewDomNode`\n    // and computing the effective transformation matrix using getComputedStyle(element).transform.\n    //\n    const scaleX = editorPagePosition.width / editorViewDomNode.offsetWidth;\n    const scaleY = editorPagePosition.height / editorViewDomNode.offsetHeight;\n    // Adjust mouse offsets if editor appears to be scaled via transforms\n    const relativeX = (pos.x - editorPagePosition.x) / scaleX;\n    const relativeY = (pos.y - editorPagePosition.y) / scaleY;\n    return new CoordinatesRelativeToEditor(relativeX, relativeY);\n}\nexport class EditorMouseEvent extends StandardMouseEvent {\n    constructor(e, isFromPointerCapture, editorViewDomNode) {\n        super(e);\n        this._editorMouseEventBrand = undefined;\n        this.isFromPointerCapture = isFromPointerCapture;\n        this.pos = new PageCoordinates(this.posx, this.posy);\n        this.editorPos = createEditorPagePosition(editorViewDomNode);\n        this.relativePos = createCoordinatesRelativeToEditor(editorViewDomNode, this.editorPos, this.pos);\n    }\n}\nexport class EditorMouseEventFactory {\n    constructor(editorViewDomNode) {\n        this._editorViewDomNode = editorViewDomNode;\n    }\n    _create(e) {\n        return new EditorMouseEvent(e, false, this._editorViewDomNode);\n    }\n    onContextMenu(target, callback) {\n        return dom.addDisposableListener(target, 'contextmenu', (e) => {\n            callback(this._create(e));\n        });\n    }\n    onMouseUp(target, callback) {\n        return dom.addDisposableListener(target, 'mouseup', (e) => {\n            callback(this._create(e));\n        });\n    }\n    onMouseDown(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.MOUSE_DOWN, (e) => {\n            callback(this._create(e));\n        });\n    }\n    onPointerDown(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.POINTER_DOWN, (e) => {\n            callback(this._create(e), e.pointerId);\n        });\n    }\n    onMouseLeave(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.MOUSE_LEAVE, (e) => {\n            callback(this._create(e));\n        });\n    }\n    onMouseMove(target, callback) {\n        return dom.addDisposableListener(target, 'mousemove', (e) => callback(this._create(e)));\n    }\n}\nexport class EditorPointerEventFactory {\n    constructor(editorViewDomNode) {\n        this._editorViewDomNode = editorViewDomNode;\n    }\n    _create(e) {\n        return new EditorMouseEvent(e, false, this._editorViewDomNode);\n    }\n    onPointerUp(target, callback) {\n        return dom.addDisposableListener(target, 'pointerup', (e) => {\n            callback(this._create(e));\n        });\n    }\n    onPointerDown(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.POINTER_DOWN, (e) => {\n            callback(this._create(e), e.pointerId);\n        });\n    }\n    onPointerLeave(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.POINTER_LEAVE, (e) => {\n            callback(this._create(e));\n        });\n    }\n    onPointerMove(target, callback) {\n        return dom.addDisposableListener(target, 'pointermove', (e) => callback(this._create(e)));\n    }\n}\nexport class GlobalEditorPointerMoveMonitor extends Disposable {\n    constructor(editorViewDomNode) {\n        super();\n        this._editorViewDomNode = editorViewDomNode;\n        this._globalPointerMoveMonitor = this._register(new GlobalPointerMoveMonitor());\n        this._keydownListener = null;\n    }\n    startMonitoring(initialElement, pointerId, initialButtons, pointerMoveCallback, onStopCallback) {\n        // Add a <<capture>> keydown event listener that will cancel the monitoring\n        // if something other than a modifier key is pressed\n        this._keydownListener = dom.addStandardDisposableListener(document, 'keydown', (e) => {\n            const chord = e.toKeyCodeChord();\n            if (chord.isModifierKey()) {\n                // Allow modifier keys\n                return;\n            }\n            this._globalPointerMoveMonitor.stopMonitoring(true, e.browserEvent);\n        }, true);\n        this._globalPointerMoveMonitor.startMonitoring(initialElement, pointerId, initialButtons, (e) => {\n            pointerMoveCallback(new EditorMouseEvent(e, true, this._editorViewDomNode));\n        }, (e) => {\n            this._keydownListener.dispose();\n            onStopCallback(e);\n        });\n    }\n    stopMonitoring() {\n        this._globalPointerMoveMonitor.stopMonitoring(true);\n    }\n}\n/**\n * A helper to create dynamic css rules, bound to a class name.\n * Rules are reused.\n * Reference counting and delayed garbage collection ensure that no rules leak.\n*/\nexport class DynamicCssRules {\n    constructor(_editor) {\n        this._editor = _editor;\n        this._instanceId = ++DynamicCssRules._idPool;\n        this._counter = 0;\n        this._rules = new Map();\n        // We delay garbage collection so that hanging rules can be reused.\n        this._garbageCollectionScheduler = new RunOnceScheduler(() => this.garbageCollect(), 1000);\n    }\n    createClassNameRef(options) {\n        const rule = this.getOrCreateRule(options);\n        rule.increaseRefCount();\n        return {\n            className: rule.className,\n            dispose: () => {\n                rule.decreaseRefCount();\n                this._garbageCollectionScheduler.schedule();\n            }\n        };\n    }\n    getOrCreateRule(properties) {\n        const key = this.computeUniqueKey(properties);\n        let existingRule = this._rules.get(key);\n        if (!existingRule) {\n            const counter = this._counter++;\n            existingRule = new RefCountedCssRule(key, `dyn-rule-${this._instanceId}-${counter}`, dom.isInShadowDOM(this._editor.getContainerDomNode())\n                ? this._editor.getContainerDomNode()\n                : undefined, properties);\n            this._rules.set(key, existingRule);\n        }\n        return existingRule;\n    }\n    computeUniqueKey(properties) {\n        return JSON.stringify(properties);\n    }\n    garbageCollect() {\n        for (const rule of this._rules.values()) {\n            if (!rule.hasReferences()) {\n                this._rules.delete(rule.key);\n                rule.dispose();\n            }\n        }\n    }\n}\nDynamicCssRules._idPool = 0;\nclass RefCountedCssRule {\n    constructor(key, className, _containerElement, properties) {\n        this.key = key;\n        this.className = className;\n        this.properties = properties;\n        this._referenceCount = 0;\n        this._styleElement = dom.createStyleSheet(_containerElement);\n        this._styleElement.textContent = this.getCssText(this.className, this.properties);\n    }\n    getCssText(className, properties) {\n        let str = `.${className} {`;\n        for (const prop in properties) {\n            const value = properties[prop];\n            let cssValue;\n            if (typeof value === 'object') {\n                cssValue = asCssVariable(value.id);\n            }\n            else {\n                cssValue = value;\n            }\n            const cssPropName = camelToDashes(prop);\n            str += `\\n\\t${cssPropName}: ${cssValue};`;\n        }\n        str += `\\n}`;\n        return str;\n    }\n    dispose() {\n        this._styleElement.remove();\n    }\n    increaseRefCount() {\n        this._referenceCount++;\n    }\n    decreaseRefCount() {\n        this._referenceCount--;\n    }\n    hasReferences() {\n        return this._referenceCount > 0;\n    }\n}\nfunction camelToDashes(str) {\n    return str.replace(/(^[A-Z])/, ([first]) => first.toLowerCase())\n        .replace(/([A-Z])/g, ([letter]) => `-${letter.toLowerCase()}`);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as nls from '../../nls.js';\nimport { URI } from '../../base/common/uri.js';\nimport { ICodeEditorService } from './services/codeEditorService.js';\nimport { Position } from '../common/core/position.js';\nimport { IModelService } from '../common/services/model.js';\nimport { ITextModelService } from '../common/services/resolverService.js';\nimport { MenuId, MenuRegistry, Action2 } from '../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from '../../platform/keybinding/common/keybindingsRegistry.js';\nimport { Registry } from '../../platform/registry/common/platform.js';\nimport { ITelemetryService } from '../../platform/telemetry/common/telemetry.js';\nimport { withNullAsUndefined, assertType } from '../../base/common/types.js';\nimport { ILogService } from '../../platform/log/common/log.js';\nexport class Command {\n    constructor(opts) {\n        this.id = opts.id;\n        this.precondition = opts.precondition;\n        this._kbOpts = opts.kbOpts;\n        this._menuOpts = opts.menuOpts;\n        this._description = opts.description;\n    }\n    register() {\n        if (Array.isArray(this._menuOpts)) {\n            this._menuOpts.forEach(this._registerMenuItem, this);\n        }\n        else if (this._menuOpts) {\n            this._registerMenuItem(this._menuOpts);\n        }\n        if (this._kbOpts) {\n            const kbOptsArr = Array.isArray(this._kbOpts) ? this._kbOpts : [this._kbOpts];\n            for (const kbOpts of kbOptsArr) {\n                let kbWhen = kbOpts.kbExpr;\n                if (this.precondition) {\n                    if (kbWhen) {\n                        kbWhen = ContextKeyExpr.and(kbWhen, this.precondition);\n                    }\n                    else {\n                        kbWhen = this.precondition;\n                    }\n                }\n                const desc = {\n                    id: this.id,\n                    weight: kbOpts.weight,\n                    args: kbOpts.args,\n                    when: kbWhen,\n                    primary: kbOpts.primary,\n                    secondary: kbOpts.secondary,\n                    win: kbOpts.win,\n                    linux: kbOpts.linux,\n                    mac: kbOpts.mac,\n                };\n                KeybindingsRegistry.registerKeybindingRule(desc);\n            }\n        }\n        CommandsRegistry.registerCommand({\n            id: this.id,\n            handler: (accessor, args) => this.runCommand(accessor, args),\n            description: this._description\n        });\n    }\n    _registerMenuItem(item) {\n        MenuRegistry.appendMenuItem(item.menuId, {\n            group: item.group,\n            command: {\n                id: this.id,\n                title: item.title,\n                icon: item.icon,\n                precondition: this.precondition\n            },\n            when: item.when,\n            order: item.order\n        });\n    }\n}\nexport class MultiCommand extends Command {\n    constructor() {\n        super(...arguments);\n        this._implementations = [];\n    }\n    /**\n     * A higher priority gets to be looked at first\n     */\n    addImplementation(priority, name, implementation, when) {\n        this._implementations.push({ priority, name, implementation, when });\n        this._implementations.sort((a, b) => b.priority - a.priority);\n        return {\n            dispose: () => {\n                for (let i = 0; i < this._implementations.length; i++) {\n                    if (this._implementations[i].implementation === implementation) {\n                        this._implementations.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n        };\n    }\n    runCommand(accessor, args) {\n        const logService = accessor.get(ILogService);\n        const contextKeyService = accessor.get(IContextKeyService);\n        logService.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);\n        for (const impl of this._implementations) {\n            if (impl.when) {\n                const context = contextKeyService.getContext(document.activeElement);\n                const value = impl.when.evaluate(context);\n                if (!value) {\n                    continue;\n                }\n            }\n            const result = impl.implementation(accessor, args);\n            if (result) {\n                logService.trace(`Command '${this.id}' was handled by '${impl.name}'.`);\n                if (typeof result === 'boolean') {\n                    return;\n                }\n                return result;\n            }\n        }\n        logService.trace(`The Command '${this.id}' was not handled by any implementation.`);\n    }\n}\n//#endregion\n/**\n * A command that delegates to another command's implementation.\n *\n * This lets different commands be registered but share the same implementation\n */\nexport class ProxyCommand extends Command {\n    constructor(command, opts) {\n        super(opts);\n        this.command = command;\n    }\n    runCommand(accessor, args) {\n        return this.command.runCommand(accessor, args);\n    }\n}\nexport class EditorCommand extends Command {\n    /**\n     * Create a command class that is bound to a certain editor contribution.\n     */\n    static bindToContribution(controllerGetter) {\n        return class EditorControllerCommandImpl extends EditorCommand {\n            constructor(opts) {\n                super(opts);\n                this._callback = opts.handler;\n            }\n            runEditorCommand(accessor, editor, args) {\n                const controller = controllerGetter(editor);\n                if (controller) {\n                    this._callback(controller, args);\n                }\n            }\n        };\n    }\n    static runEditorCommand(accessor, args, precondition, runner) {\n        const codeEditorService = accessor.get(ICodeEditorService);\n        // Find the editor with text focus or active\n        const editor = codeEditorService.getFocusedCodeEditor() || codeEditorService.getActiveCodeEditor();\n        if (!editor) {\n            // well, at least we tried...\n            return;\n        }\n        return editor.invokeWithinContext((editorAccessor) => {\n            const kbService = editorAccessor.get(IContextKeyService);\n            if (!kbService.contextMatchesRules(withNullAsUndefined(precondition))) {\n                // precondition does not hold\n                return;\n            }\n            return runner(editorAccessor, editor, args);\n        });\n    }\n    runCommand(accessor, args) {\n        return EditorCommand.runEditorCommand(accessor, args, this.precondition, (accessor, editor, args) => this.runEditorCommand(accessor, editor, args));\n    }\n}\nexport class EditorAction extends EditorCommand {\n    static convertOptions(opts) {\n        let menuOpts;\n        if (Array.isArray(opts.menuOpts)) {\n            menuOpts = opts.menuOpts;\n        }\n        else if (opts.menuOpts) {\n            menuOpts = [opts.menuOpts];\n        }\n        else {\n            menuOpts = [];\n        }\n        function withDefaults(item) {\n            if (!item.menuId) {\n                item.menuId = MenuId.EditorContext;\n            }\n            if (!item.title) {\n                item.title = opts.label;\n            }\n            item.when = ContextKeyExpr.and(opts.precondition, item.when);\n            return item;\n        }\n        if (Array.isArray(opts.contextMenuOpts)) {\n            menuOpts.push(...opts.contextMenuOpts.map(withDefaults));\n        }\n        else if (opts.contextMenuOpts) {\n            menuOpts.push(withDefaults(opts.contextMenuOpts));\n        }\n        opts.menuOpts = menuOpts;\n        return opts;\n    }\n    constructor(opts) {\n        super(EditorAction.convertOptions(opts));\n        this.label = opts.label;\n        this.alias = opts.alias;\n    }\n    runEditorCommand(accessor, editor, args) {\n        this.reportTelemetry(accessor, editor);\n        return this.run(accessor, editor, args || {});\n    }\n    reportTelemetry(accessor, editor) {\n        accessor.get(ITelemetryService).publicLog2('editorActionInvoked', { name: this.label, id: this.id });\n    }\n}\nexport class MultiEditorAction extends EditorAction {\n    constructor() {\n        super(...arguments);\n        this._implementations = [];\n    }\n    /**\n     * A higher priority gets to be looked at first\n     */\n    addImplementation(priority, implementation) {\n        this._implementations.push([priority, implementation]);\n        this._implementations.sort((a, b) => b[0] - a[0]);\n        return {\n            dispose: () => {\n                for (let i = 0; i < this._implementations.length; i++) {\n                    if (this._implementations[i][1] === implementation) {\n                        this._implementations.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n        };\n    }\n    run(accessor, editor, args) {\n        for (const impl of this._implementations) {\n            const result = impl[1](accessor, editor, args);\n            if (result) {\n                if (typeof result === 'boolean') {\n                    return;\n                }\n                return result;\n            }\n        }\n    }\n}\n//#endregion EditorAction\n//#region EditorAction2\nexport class EditorAction2 extends Action2 {\n    run(accessor, ...args) {\n        // Find the editor with text focus or active\n        const codeEditorService = accessor.get(ICodeEditorService);\n        const editor = codeEditorService.getFocusedCodeEditor() || codeEditorService.getActiveCodeEditor();\n        if (!editor) {\n            // well, at least we tried...\n            return;\n        }\n        // precondition does hold\n        return editor.invokeWithinContext((editorAccessor) => {\n            var _a;\n            const kbService = editorAccessor.get(IContextKeyService);\n            const logService = editorAccessor.get(ILogService);\n            const enabled = kbService.contextMatchesRules(withNullAsUndefined(this.desc.precondition));\n            if (!enabled) {\n                logService.debug(`[EditorAction2] NOT running command because its precondition is FALSE`, this.desc.id, (_a = this.desc.precondition) === null || _a === void 0 ? void 0 : _a.serialize());\n                return;\n            }\n            return this.runEditorCommand(editorAccessor, editor, ...args);\n        });\n    }\n}\n//#endregion\n// --- Registration of commands and actions\nexport function registerModelAndPositionCommand(id, handler) {\n    CommandsRegistry.registerCommand(id, function (accessor, ...args) {\n        const instaService = accessor.get(IInstantiationService);\n        const [resource, position] = args;\n        assertType(URI.isUri(resource));\n        assertType(Position.isIPosition(position));\n        const model = accessor.get(IModelService).getModel(resource);\n        if (model) {\n            const editorPosition = Position.lift(position);\n            return instaService.invokeFunction(handler, model, editorPosition, ...args.slice(2));\n        }\n        return accessor.get(ITextModelService).createModelReference(resource).then(reference => {\n            return new Promise((resolve, reject) => {\n                try {\n                    const result = instaService.invokeFunction(handler, reference.object.textEditorModel, Position.lift(position), args.slice(2));\n                    resolve(result);\n                }\n                catch (err) {\n                    reject(err);\n                }\n            }).finally(() => {\n                reference.dispose();\n            });\n        });\n    });\n}\nexport function registerEditorCommand(editorCommand) {\n    EditorContributionRegistry.INSTANCE.registerEditorCommand(editorCommand);\n    return editorCommand;\n}\nexport function registerEditorAction(ctor) {\n    const action = new ctor();\n    EditorContributionRegistry.INSTANCE.registerEditorAction(action);\n    return action;\n}\nexport function registerMultiEditorAction(action) {\n    EditorContributionRegistry.INSTANCE.registerEditorAction(action);\n    return action;\n}\nexport function registerInstantiatedEditorAction(editorAction) {\n    EditorContributionRegistry.INSTANCE.registerEditorAction(editorAction);\n}\n/**\n * Registers an editor contribution. Editor contributions have a lifecycle which is bound\n * to a specific code editor instance.\n */\nexport function registerEditorContribution(id, ctor, instantiation) {\n    EditorContributionRegistry.INSTANCE.registerEditorContribution(id, ctor, instantiation);\n}\nexport var EditorExtensionsRegistry;\n(function (EditorExtensionsRegistry) {\n    function getEditorCommand(commandId) {\n        return EditorContributionRegistry.INSTANCE.getEditorCommand(commandId);\n    }\n    EditorExtensionsRegistry.getEditorCommand = getEditorCommand;\n    function getEditorActions() {\n        return EditorContributionRegistry.INSTANCE.getEditorActions();\n    }\n    EditorExtensionsRegistry.getEditorActions = getEditorActions;\n    function getEditorContributions() {\n        return EditorContributionRegistry.INSTANCE.getEditorContributions();\n    }\n    EditorExtensionsRegistry.getEditorContributions = getEditorContributions;\n    function getSomeEditorContributions(ids) {\n        return EditorContributionRegistry.INSTANCE.getEditorContributions().filter(c => ids.indexOf(c.id) >= 0);\n    }\n    EditorExtensionsRegistry.getSomeEditorContributions = getSomeEditorContributions;\n    function getDiffEditorContributions() {\n        return EditorContributionRegistry.INSTANCE.getDiffEditorContributions();\n    }\n    EditorExtensionsRegistry.getDiffEditorContributions = getDiffEditorContributions;\n})(EditorExtensionsRegistry || (EditorExtensionsRegistry = {}));\n// Editor extension points\nconst Extensions = {\n    EditorCommonContributions: 'editor.contributions'\n};\nclass EditorContributionRegistry {\n    constructor() {\n        this.editorContributions = [];\n        this.diffEditorContributions = [];\n        this.editorActions = [];\n        this.editorCommands = Object.create(null);\n    }\n    registerEditorContribution(id, ctor, instantiation) {\n        this.editorContributions.push({ id, ctor: ctor, instantiation });\n    }\n    getEditorContributions() {\n        return this.editorContributions.slice(0);\n    }\n    getDiffEditorContributions() {\n        return this.diffEditorContributions.slice(0);\n    }\n    registerEditorAction(action) {\n        action.register();\n        this.editorActions.push(action);\n    }\n    getEditorActions() {\n        return this.editorActions;\n    }\n    registerEditorCommand(editorCommand) {\n        editorCommand.register();\n        this.editorCommands[editorCommand.id] = editorCommand;\n    }\n    getEditorCommand(commandId) {\n        return (this.editorCommands[commandId] || null);\n    }\n}\nEditorContributionRegistry.INSTANCE = new EditorContributionRegistry();\nRegistry.add(Extensions.EditorCommonContributions, EditorContributionRegistry.INSTANCE);\nfunction registerCommand(command) {\n    command.register();\n    return command;\n}\nexport const UndoCommand = registerCommand(new MultiCommand({\n    id: 'undo',\n    precondition: undefined,\n    kbOpts: {\n        weight: 0 /* KeybindingWeight.EditorCore */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 56 /* KeyCode.KeyZ */\n    },\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '1_do',\n            title: nls.localize({ key: 'miUndo', comment: ['&& denotes a mnemonic'] }, \"&&Undo\"),\n            order: 1\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('undo', \"Undo\"),\n            order: 1\n        }]\n}));\nregisterCommand(new ProxyCommand(UndoCommand, { id: 'default:undo', precondition: undefined }));\nexport const RedoCommand = registerCommand(new MultiCommand({\n    id: 'redo',\n    precondition: undefined,\n    kbOpts: {\n        weight: 0 /* KeybindingWeight.EditorCore */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 55 /* KeyCode.KeyY */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 56 /* KeyCode.KeyZ */],\n        mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 56 /* KeyCode.KeyZ */ }\n    },\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '1_do',\n            title: nls.localize({ key: 'miRedo', comment: ['&& denotes a mnemonic'] }, \"&&Redo\"),\n            order: 2\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('redo', \"Redo\"),\n            order: 1\n        }]\n}));\nregisterCommand(new ProxyCommand(RedoCommand, { id: 'default:redo', precondition: undefined }));\nexport const SelectAllCommand = registerCommand(new MultiCommand({\n    id: 'editor.action.selectAll',\n    precondition: undefined,\n    kbOpts: {\n        weight: 0 /* KeybindingWeight.EditorCore */,\n        kbExpr: null,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 31 /* KeyCode.KeyA */\n    },\n    menuOpts: [{\n            menuId: MenuId.MenubarSelectionMenu,\n            group: '1_basic',\n            title: nls.localize({ key: 'miSelectAll', comment: ['&& denotes a mnemonic'] }, \"&&Select All\"),\n            order: 1\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('selectAll', \"Select All\"),\n            order: 1\n        }]\n}));\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nlet AbstractCodeEditorService = class AbstractCodeEditorService extends Disposable {\n    constructor(_themeService) {\n        super();\n        this._themeService = _themeService;\n        this._onWillCreateCodeEditor = this._register(new Emitter());\n        this._onCodeEditorAdd = this._register(new Emitter());\n        this.onCodeEditorAdd = this._onCodeEditorAdd.event;\n        this._onCodeEditorRemove = this._register(new Emitter());\n        this.onCodeEditorRemove = this._onCodeEditorRemove.event;\n        this._onWillCreateDiffEditor = this._register(new Emitter());\n        this._onDiffEditorAdd = this._register(new Emitter());\n        this.onDiffEditorAdd = this._onDiffEditorAdd.event;\n        this._onDiffEditorRemove = this._register(new Emitter());\n        this.onDiffEditorRemove = this._onDiffEditorRemove.event;\n        this._decorationOptionProviders = new Map();\n        this._codeEditorOpenHandlers = new LinkedList();\n        this._modelProperties = new Map();\n        this._codeEditors = Object.create(null);\n        this._diffEditors = Object.create(null);\n        this._globalStyleSheet = null;\n    }\n    willCreateCodeEditor() {\n        this._onWillCreateCodeEditor.fire();\n    }\n    addCodeEditor(editor) {\n        this._codeEditors[editor.getId()] = editor;\n        this._onCodeEditorAdd.fire(editor);\n    }\n    removeCodeEditor(editor) {\n        if (delete this._codeEditors[editor.getId()]) {\n            this._onCodeEditorRemove.fire(editor);\n        }\n    }\n    listCodeEditors() {\n        return Object.keys(this._codeEditors).map(id => this._codeEditors[id]);\n    }\n    willCreateDiffEditor() {\n        this._onWillCreateDiffEditor.fire();\n    }\n    addDiffEditor(editor) {\n        this._diffEditors[editor.getId()] = editor;\n        this._onDiffEditorAdd.fire(editor);\n    }\n    removeDiffEditor(editor) {\n        if (delete this._diffEditors[editor.getId()]) {\n            this._onDiffEditorRemove.fire(editor);\n        }\n    }\n    listDiffEditors() {\n        return Object.keys(this._diffEditors).map(id => this._diffEditors[id]);\n    }\n    getFocusedCodeEditor() {\n        let editorWithWidgetFocus = null;\n        const editors = this.listCodeEditors();\n        for (const editor of editors) {\n            if (editor.hasTextFocus()) {\n                // bingo!\n                return editor;\n            }\n            if (editor.hasWidgetFocus()) {\n                editorWithWidgetFocus = editor;\n            }\n        }\n        return editorWithWidgetFocus;\n    }\n    removeDecorationType(key) {\n        const provider = this._decorationOptionProviders.get(key);\n        if (provider) {\n            provider.refCount--;\n            if (provider.refCount <= 0) {\n                this._decorationOptionProviders.delete(key);\n                provider.dispose();\n                this.listCodeEditors().forEach((ed) => ed.removeDecorationsByType(key));\n            }\n        }\n    }\n    setModelProperty(resource, key, value) {\n        const key1 = resource.toString();\n        let dest;\n        if (this._modelProperties.has(key1)) {\n            dest = this._modelProperties.get(key1);\n        }\n        else {\n            dest = new Map();\n            this._modelProperties.set(key1, dest);\n        }\n        dest.set(key, value);\n    }\n    getModelProperty(resource, key) {\n        const key1 = resource.toString();\n        if (this._modelProperties.has(key1)) {\n            const innerMap = this._modelProperties.get(key1);\n            return innerMap.get(key);\n        }\n        return undefined;\n    }\n    openCodeEditor(input, source, sideBySide) {\n        return __awaiter(this, void 0, void 0, function* () {\n            for (const handler of this._codeEditorOpenHandlers) {\n                const candidate = yield handler(input, source, sideBySide);\n                if (candidate !== null) {\n                    return candidate;\n                }\n            }\n            return null;\n        });\n    }\n    registerCodeEditorOpenHandler(handler) {\n        const rm = this._codeEditorOpenHandlers.unshift(handler);\n        return toDisposable(rm);\n    }\n};\nAbstractCodeEditorService = __decorate([\n    __param(0, IThemeService)\n], AbstractCodeEditorService);\nexport { AbstractCodeEditorService };\nexport class GlobalStyleSheet {\n    constructor(styleSheet) {\n        this._styleSheet = styleSheet;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { isObject } from '../../../base/common/types.js';\nexport const IBulkEditService = createDecorator('IWorkspaceEditService');\nexport class ResourceEdit {\n    constructor(metadata) {\n        this.metadata = metadata;\n    }\n    static convert(edit) {\n        return edit.edits.map(edit => {\n            if (ResourceTextEdit.is(edit)) {\n                return ResourceTextEdit.lift(edit);\n            }\n            if (ResourceFileEdit.is(edit)) {\n                return ResourceFileEdit.lift(edit);\n            }\n            throw new Error('Unsupported edit');\n        });\n    }\n}\nexport class ResourceTextEdit extends ResourceEdit {\n    static is(candidate) {\n        if (candidate instanceof ResourceTextEdit) {\n            return true;\n        }\n        return isObject(candidate)\n            && URI.isUri(candidate.resource)\n            && isObject(candidate.textEdit);\n    }\n    static lift(edit) {\n        if (edit instanceof ResourceTextEdit) {\n            return edit;\n        }\n        else {\n            return new ResourceTextEdit(edit.resource, edit.textEdit, edit.versionId, edit.metadata);\n        }\n    }\n    constructor(resource, textEdit, versionId = undefined, metadata) {\n        super(metadata);\n        this.resource = resource;\n        this.textEdit = textEdit;\n        this.versionId = versionId;\n    }\n}\nexport class ResourceFileEdit extends ResourceEdit {\n    static is(candidate) {\n        if (candidate instanceof ResourceFileEdit) {\n            return true;\n        }\n        else {\n            return isObject(candidate)\n                && (Boolean(candidate.newResource) || Boolean(candidate.oldResource));\n        }\n    }\n    static lift(edit) {\n        if (edit instanceof ResourceFileEdit) {\n            return edit;\n        }\n        else {\n            return new ResourceFileEdit(edit.oldResource, edit.newResource, edit.options, edit.metadata);\n        }\n    }\n    constructor(oldResource, newResource, options = {}, metadata) {\n        super(metadata);\n        this.oldResource = oldResource;\n        this.newResource = newResource;\n        this.options = options;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nexport const ICodeEditorService = createDecorator('codeEditorService');\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { IntervalTimer, timeout } from '../../../base/common/async.js';\nimport { Disposable, dispose, toDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { SimpleWorkerClient, logOnceWebWorkerWarning } from '../../../base/common/worker/simpleWorker.js';\nimport { DefaultWorkerFactory } from '../../../base/browser/defaultWorkerFactory.js';\nimport { Range } from '../../common/core/range.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { EditorSimpleWorker } from '../../common/services/editorSimpleWorker.js';\nimport { IModelService } from '../../common/services/model.js';\nimport { ITextResourceConfigurationService } from '../../common/services/textResourceConfiguration.js';\nimport { regExpFlags } from '../../../base/common/strings.js';\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { StopWatch } from '../../../base/common/stopwatch.js';\nimport { canceled } from '../../../base/common/errors.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nimport { LineRangeMapping, MovedText, RangeMapping, SimpleLineRangeMapping } from '../../common/diff/linesDiffComputer.js';\nimport { LineRange } from '../../common/core/lineRange.js';\n/**\n * Stop syncing a model to the worker if it was not needed for 1 min.\n */\nconst STOP_SYNC_MODEL_DELTA_TIME_MS = 60 * 1000;\n/**\n * Stop the worker if it was not needed for 5 min.\n */\nconst STOP_WORKER_DELTA_TIME_MS = 5 * 60 * 1000;\nfunction canSyncModel(modelService, resource) {\n    const model = modelService.getModel(resource);\n    if (!model) {\n        return false;\n    }\n    if (model.isTooLargeForSyncing()) {\n        return false;\n    }\n    return true;\n}\nlet EditorWorkerService = class EditorWorkerService extends Disposable {\n    constructor(modelService, configurationService, logService, languageConfigurationService, languageFeaturesService) {\n        super();\n        this._modelService = modelService;\n        this._workerManager = this._register(new WorkerManager(this._modelService, languageConfigurationService));\n        this._logService = logService;\n        // register default link-provider and default completions-provider\n        this._register(languageFeaturesService.linkProvider.register({ language: '*', hasAccessToAllModels: true }, {\n            provideLinks: (model, token) => {\n                if (!canSyncModel(this._modelService, model.uri)) {\n                    return Promise.resolve({ links: [] }); // File too large\n                }\n                return this._workerManager.withWorker().then(client => client.computeLinks(model.uri)).then(links => {\n                    return links && { links };\n                });\n            }\n        }));\n        this._register(languageFeaturesService.completionProvider.register('*', new WordBasedCompletionItemProvider(this._workerManager, configurationService, this._modelService, languageConfigurationService)));\n    }\n    dispose() {\n        super.dispose();\n    }\n    canComputeUnicodeHighlights(uri) {\n        return canSyncModel(this._modelService, uri);\n    }\n    computedUnicodeHighlights(uri, options, range) {\n        return this._workerManager.withWorker().then(client => client.computedUnicodeHighlights(uri, options, range));\n    }\n    computeDiff(original, modified, options, algorithm) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = yield this._workerManager.withWorker().then(client => client.computeDiff(original, modified, options, algorithm));\n            if (!result) {\n                return null;\n            }\n            // Convert from space efficient JSON data to rich objects.\n            const diff = {\n                identical: result.identical,\n                quitEarly: result.quitEarly,\n                changes: toLineRangeMappings(result.changes),\n                moves: result.moves.map(m => new MovedText(new SimpleLineRangeMapping(new LineRange(m[0], m[1]), new LineRange(m[2], m[3])), toLineRangeMappings(m[4])))\n            };\n            return diff;\n            function toLineRangeMappings(changes) {\n                return changes.map((c) => {\n                    var _a;\n                    return new LineRangeMapping(new LineRange(c[0], c[1]), new LineRange(c[2], c[3]), (_a = c[4]) === null || _a === void 0 ? void 0 : _a.map((c) => new RangeMapping(new Range(c[0], c[1], c[2], c[3]), new Range(c[4], c[5], c[6], c[7]))));\n                });\n            }\n        });\n    }\n    computeMoreMinimalEdits(resource, edits, pretty = false) {\n        if (isNonEmptyArray(edits)) {\n            if (!canSyncModel(this._modelService, resource)) {\n                return Promise.resolve(edits); // File too large\n            }\n            const sw = StopWatch.create();\n            const result = this._workerManager.withWorker().then(client => client.computeMoreMinimalEdits(resource, edits, pretty));\n            result.finally(() => this._logService.trace('FORMAT#computeMoreMinimalEdits', resource.toString(true), sw.elapsed()));\n            return Promise.race([result, timeout(1000).then(() => edits)]);\n        }\n        else {\n            return Promise.resolve(undefined);\n        }\n    }\n    canNavigateValueSet(resource) {\n        return (canSyncModel(this._modelService, resource));\n    }\n    navigateValueSet(resource, range, up) {\n        return this._workerManager.withWorker().then(client => client.navigateValueSet(resource, range, up));\n    }\n    canComputeWordRanges(resource) {\n        return canSyncModel(this._modelService, resource);\n    }\n    computeWordRanges(resource, range) {\n        return this._workerManager.withWorker().then(client => client.computeWordRanges(resource, range));\n    }\n};\nEditorWorkerService = __decorate([\n    __param(0, IModelService),\n    __param(1, ITextResourceConfigurationService),\n    __param(2, ILogService),\n    __param(3, ILanguageConfigurationService),\n    __param(4, ILanguageFeaturesService)\n], EditorWorkerService);\nexport { EditorWorkerService };\nclass WordBasedCompletionItemProvider {\n    constructor(workerManager, configurationService, modelService, languageConfigurationService) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._debugDisplayName = 'wordbasedCompletions';\n        this._workerManager = workerManager;\n        this._configurationService = configurationService;\n        this._modelService = modelService;\n    }\n    provideCompletionItems(model, position) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const config = this._configurationService.getValue(model.uri, position, 'editor');\n            if (!config.wordBasedSuggestions) {\n                return undefined;\n            }\n            const models = [];\n            if (config.wordBasedSuggestionsMode === 'currentDocument') {\n                // only current file and only if not too large\n                if (canSyncModel(this._modelService, model.uri)) {\n                    models.push(model.uri);\n                }\n            }\n            else {\n                // either all files or files of same language\n                for (const candidate of this._modelService.getModels()) {\n                    if (!canSyncModel(this._modelService, candidate.uri)) {\n                        continue;\n                    }\n                    if (candidate === model) {\n                        models.unshift(candidate.uri);\n                    }\n                    else if (config.wordBasedSuggestionsMode === 'allDocuments' || candidate.getLanguageId() === model.getLanguageId()) {\n                        models.push(candidate.uri);\n                    }\n                }\n            }\n            if (models.length === 0) {\n                return undefined; // File too large, no other files\n            }\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n            const word = model.getWordAtPosition(position);\n            const replace = !word ? Range.fromPositions(position) : new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n            const insert = replace.setEndPosition(position.lineNumber, position.column);\n            const client = yield this._workerManager.withWorker();\n            const data = yield client.textualSuggest(models, word === null || word === void 0 ? void 0 : word.word, wordDefRegExp);\n            if (!data) {\n                return undefined;\n            }\n            return {\n                duration: data.duration,\n                suggestions: data.words.map((word) => {\n                    return {\n                        kind: 18 /* languages.CompletionItemKind.Text */,\n                        label: word,\n                        insertText: word,\n                        range: { insert, replace }\n                    };\n                }),\n            };\n        });\n    }\n}\nclass WorkerManager extends Disposable {\n    constructor(modelService, languageConfigurationService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        this._modelService = modelService;\n        this._editorWorkerClient = null;\n        this._lastWorkerUsedTime = (new Date()).getTime();\n        const stopWorkerInterval = this._register(new IntervalTimer());\n        stopWorkerInterval.cancelAndSet(() => this._checkStopIdleWorker(), Math.round(STOP_WORKER_DELTA_TIME_MS / 2));\n        this._register(this._modelService.onModelRemoved(_ => this._checkStopEmptyWorker()));\n    }\n    dispose() {\n        if (this._editorWorkerClient) {\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n        super.dispose();\n    }\n    /**\n     * Check if the model service has no more models and stop the worker if that is the case.\n     */\n    _checkStopEmptyWorker() {\n        if (!this._editorWorkerClient) {\n            return;\n        }\n        const models = this._modelService.getModels();\n        if (models.length === 0) {\n            // There are no more models => nothing possible for me to do\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n    }\n    /**\n     * Check if the worker has been idle for a while and then stop it.\n     */\n    _checkStopIdleWorker() {\n        if (!this._editorWorkerClient) {\n            return;\n        }\n        const timeSinceLastWorkerUsedTime = (new Date()).getTime() - this._lastWorkerUsedTime;\n        if (timeSinceLastWorkerUsedTime > STOP_WORKER_DELTA_TIME_MS) {\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n    }\n    withWorker() {\n        this._lastWorkerUsedTime = (new Date()).getTime();\n        if (!this._editorWorkerClient) {\n            this._editorWorkerClient = new EditorWorkerClient(this._modelService, false, 'editorWorkerService', this.languageConfigurationService);\n        }\n        return Promise.resolve(this._editorWorkerClient);\n    }\n}\nclass EditorModelManager extends Disposable {\n    constructor(proxy, modelService, keepIdleModels) {\n        super();\n        this._syncedModels = Object.create(null);\n        this._syncedModelsLastUsedTime = Object.create(null);\n        this._proxy = proxy;\n        this._modelService = modelService;\n        if (!keepIdleModels) {\n            const timer = new IntervalTimer();\n            timer.cancelAndSet(() => this._checkStopModelSync(), Math.round(STOP_SYNC_MODEL_DELTA_TIME_MS / 2));\n            this._register(timer);\n        }\n    }\n    dispose() {\n        for (const modelUrl in this._syncedModels) {\n            dispose(this._syncedModels[modelUrl]);\n        }\n        this._syncedModels = Object.create(null);\n        this._syncedModelsLastUsedTime = Object.create(null);\n        super.dispose();\n    }\n    ensureSyncedResources(resources, forceLargeModels) {\n        for (const resource of resources) {\n            const resourceStr = resource.toString();\n            if (!this._syncedModels[resourceStr]) {\n                this._beginModelSync(resource, forceLargeModels);\n            }\n            if (this._syncedModels[resourceStr]) {\n                this._syncedModelsLastUsedTime[resourceStr] = (new Date()).getTime();\n            }\n        }\n    }\n    _checkStopModelSync() {\n        const currentTime = (new Date()).getTime();\n        const toRemove = [];\n        for (const modelUrl in this._syncedModelsLastUsedTime) {\n            const elapsedTime = currentTime - this._syncedModelsLastUsedTime[modelUrl];\n            if (elapsedTime > STOP_SYNC_MODEL_DELTA_TIME_MS) {\n                toRemove.push(modelUrl);\n            }\n        }\n        for (const e of toRemove) {\n            this._stopModelSync(e);\n        }\n    }\n    _beginModelSync(resource, forceLargeModels) {\n        const model = this._modelService.getModel(resource);\n        if (!model) {\n            return;\n        }\n        if (!forceLargeModels && model.isTooLargeForSyncing()) {\n            return;\n        }\n        const modelUrl = resource.toString();\n        this._proxy.acceptNewModel({\n            url: model.uri.toString(),\n            lines: model.getLinesContent(),\n            EOL: model.getEOL(),\n            versionId: model.getVersionId()\n        });\n        const toDispose = new DisposableStore();\n        toDispose.add(model.onDidChangeContent((e) => {\n            this._proxy.acceptModelChanged(modelUrl.toString(), e);\n        }));\n        toDispose.add(model.onWillDispose(() => {\n            this._stopModelSync(modelUrl);\n        }));\n        toDispose.add(toDisposable(() => {\n            this._proxy.acceptRemovedModel(modelUrl);\n        }));\n        this._syncedModels[modelUrl] = toDispose;\n    }\n    _stopModelSync(modelUrl) {\n        const toDispose = this._syncedModels[modelUrl];\n        delete this._syncedModels[modelUrl];\n        delete this._syncedModelsLastUsedTime[modelUrl];\n        dispose(toDispose);\n    }\n}\nclass SynchronousWorkerClient {\n    constructor(instance) {\n        this._instance = instance;\n        this._proxyObj = Promise.resolve(this._instance);\n    }\n    dispose() {\n        this._instance.dispose();\n    }\n    getProxyObject() {\n        return this._proxyObj;\n    }\n}\nexport class EditorWorkerHost {\n    constructor(workerClient) {\n        this._workerClient = workerClient;\n    }\n    // foreign host request\n    fhr(method, args) {\n        return this._workerClient.fhr(method, args);\n    }\n}\nexport class EditorWorkerClient extends Disposable {\n    constructor(modelService, keepIdleModels, label, languageConfigurationService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        this._disposed = false;\n        this._modelService = modelService;\n        this._keepIdleModels = keepIdleModels;\n        this._workerFactory = new DefaultWorkerFactory(label);\n        this._worker = null;\n        this._modelManager = null;\n    }\n    // foreign host request\n    fhr(method, args) {\n        throw new Error(`Not implemented!`);\n    }\n    _getOrCreateWorker() {\n        if (!this._worker) {\n            try {\n                this._worker = this._register(new SimpleWorkerClient(this._workerFactory, 'vs/editor/common/services/editorSimpleWorker', new EditorWorkerHost(this)));\n            }\n            catch (err) {\n                logOnceWebWorkerWarning(err);\n                this._worker = new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this), null));\n            }\n        }\n        return this._worker;\n    }\n    _getProxy() {\n        return this._getOrCreateWorker().getProxyObject().then(undefined, (err) => {\n            logOnceWebWorkerWarning(err);\n            this._worker = new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this), null));\n            return this._getOrCreateWorker().getProxyObject();\n        });\n    }\n    _getOrCreateModelManager(proxy) {\n        if (!this._modelManager) {\n            this._modelManager = this._register(new EditorModelManager(proxy, this._modelService, this._keepIdleModels));\n        }\n        return this._modelManager;\n    }\n    _withSyncedResources(resources, forceLargeModels = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._disposed) {\n                return Promise.reject(canceled());\n            }\n            return this._getProxy().then((proxy) => {\n                this._getOrCreateModelManager(proxy).ensureSyncedResources(resources, forceLargeModels);\n                return proxy;\n            });\n        });\n    }\n    computedUnicodeHighlights(uri, options, range) {\n        return this._withSyncedResources([uri]).then(proxy => {\n            return proxy.computeUnicodeHighlights(uri.toString(), options, range);\n        });\n    }\n    computeDiff(original, modified, options, algorithm) {\n        return this._withSyncedResources([original, modified], /* forceLargeModels */ true).then(proxy => {\n            return proxy.computeDiff(original.toString(), modified.toString(), options, algorithm);\n        });\n    }\n    computeMoreMinimalEdits(resource, edits, pretty) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            return proxy.computeMoreMinimalEdits(resource.toString(), edits, pretty);\n        });\n    }\n    computeLinks(resource) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            return proxy.computeLinks(resource.toString());\n        });\n    }\n    computeDefaultDocumentColors(resource) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            return proxy.computeDefaultDocumentColors(resource.toString());\n        });\n    }\n    textualSuggest(resources, leadingWord, wordDefRegExp) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const proxy = yield this._withSyncedResources(resources);\n            const wordDef = wordDefRegExp.source;\n            const wordDefFlags = regExpFlags(wordDefRegExp);\n            return proxy.textualSuggest(resources.map(r => r.toString()), leadingWord, wordDef, wordDefFlags);\n        });\n    }\n    computeWordRanges(resource, range) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            const model = this._modelService.getModel(resource);\n            if (!model) {\n                return Promise.resolve(null);\n            }\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n            const wordDef = wordDefRegExp.source;\n            const wordDefFlags = regExpFlags(wordDefRegExp);\n            return proxy.computeWordRanges(resource.toString(), range, wordDef, wordDefFlags);\n        });\n    }\n    navigateValueSet(resource, range, up) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            const model = this._modelService.getModel(resource);\n            if (!model) {\n                return null;\n            }\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n            const wordDef = wordDefRegExp.source;\n            const wordDefFlags = regExpFlags(wordDefRegExp);\n            return proxy.navigateValueSet(resource.toString(), range, up, wordDef, wordDefFlags);\n        });\n    }\n    dispose() {\n        super.dispose();\n        this._disposed = true;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IMarkerDecorationsService } from '../../common/services/markerDecorations.js';\nimport { registerEditorContribution } from '../editorExtensions.js';\nlet MarkerDecorationsContribution = class MarkerDecorationsContribution {\n    constructor(_editor, _markerDecorationsService) {\n        // Doesn't do anything, just requires `IMarkerDecorationsService` to make sure it gets instantiated\n    }\n    dispose() {\n    }\n};\nMarkerDecorationsContribution.ID = 'editor.contrib.markerDecorations';\nMarkerDecorationsContribution = __decorate([\n    __param(1, IMarkerDecorationsService)\n], MarkerDecorationsContribution);\nexport { MarkerDecorationsContribution };\nregisterEditorContribution(MarkerDecorationsContribution.ID, MarkerDecorationsContribution, 0 /* EditorContributionInstantiation.Eager */); // eager because it instantiates IMarkerDecorationsService which is responsible for rendering squiggles\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../base/browser/dom.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nimport { ResourceMap } from '../../../base/common/map.js';\nimport { parse } from '../../../base/common/marshalling.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { normalizePath } from '../../../base/common/resources.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { ICodeEditorService } from './codeEditorService.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { EditorOpenSource } from '../../../platform/editor/common/editor.js';\nimport { extractSelection, matchesScheme, matchesSomeScheme } from '../../../platform/opener/common/opener.js';\nlet CommandOpener = class CommandOpener {\n    constructor(_commandService) {\n        this._commandService = _commandService;\n    }\n    open(target, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!matchesScheme(target, Schemas.command)) {\n                return false;\n            }\n            if (!(options === null || options === void 0 ? void 0 : options.allowCommands)) {\n                // silently ignore commands when command-links are disabled, also\n                // suppress other openers by returning TRUE\n                return true;\n            }\n            if (typeof target === 'string') {\n                target = URI.parse(target);\n            }\n            if (Array.isArray(options.allowCommands)) {\n                // Only allow specific commands\n                if (!options.allowCommands.includes(target.path)) {\n                    // Suppress other openers by returning TRUE\n                    return true;\n                }\n            }\n            // execute as command\n            let args = [];\n            try {\n                args = parse(decodeURIComponent(target.query));\n            }\n            catch (_a) {\n                // ignore and retry\n                try {\n                    args = parse(target.query);\n                }\n                catch (_b) {\n                    // ignore error\n                }\n            }\n            if (!Array.isArray(args)) {\n                args = [args];\n            }\n            yield this._commandService.executeCommand(target.path, ...args);\n            return true;\n        });\n    }\n};\nCommandOpener = __decorate([\n    __param(0, ICommandService)\n], CommandOpener);\nlet EditorOpener = class EditorOpener {\n    constructor(_editorService) {\n        this._editorService = _editorService;\n    }\n    open(target, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof target === 'string') {\n                target = URI.parse(target);\n            }\n            const { selection, uri } = extractSelection(target);\n            target = uri;\n            if (target.scheme === Schemas.file) {\n                target = normalizePath(target); // workaround for non-normalized paths (https://github.com/microsoft/vscode/issues/12954)\n            }\n            yield this._editorService.openCodeEditor({\n                resource: target,\n                options: Object.assign({ selection, source: (options === null || options === void 0 ? void 0 : options.fromUserGesture) ? EditorOpenSource.USER : EditorOpenSource.API }, options === null || options === void 0 ? void 0 : options.editorOptions)\n            }, this._editorService.getFocusedCodeEditor(), options === null || options === void 0 ? void 0 : options.openToSide);\n            return true;\n        });\n    }\n};\nEditorOpener = __decorate([\n    __param(0, ICodeEditorService)\n], EditorOpener);\nlet OpenerService = class OpenerService {\n    constructor(editorService, commandService) {\n        this._openers = new LinkedList();\n        this._validators = new LinkedList();\n        this._resolvers = new LinkedList();\n        this._resolvedUriTargets = new ResourceMap(uri => uri.with({ path: null, fragment: null, query: null }).toString());\n        this._externalOpeners = new LinkedList();\n        // Default external opener is going through window.open()\n        this._defaultExternalOpener = {\n            openExternal: (href) => __awaiter(this, void 0, void 0, function* () {\n                // ensure to open HTTP/HTTPS links into new windows\n                // to not trigger a navigation. Any other link is\n                // safe to be set as HREF to prevent a blank window\n                // from opening.\n                if (matchesSomeScheme(href, Schemas.http, Schemas.https)) {\n                    dom.windowOpenNoOpener(href);\n                }\n                else {\n                    window.location.href = href;\n                }\n                return true;\n            })\n        };\n        // Default opener: any external, maito, http(s), command, and catch-all-editors\n        this._openers.push({\n            open: (target, options) => __awaiter(this, void 0, void 0, function* () {\n                if ((options === null || options === void 0 ? void 0 : options.openExternal) || matchesSomeScheme(target, Schemas.mailto, Schemas.http, Schemas.https, Schemas.vsls)) {\n                    // open externally\n                    yield this._doOpenExternal(target, options);\n                    return true;\n                }\n                return false;\n            })\n        });\n        this._openers.push(new CommandOpener(commandService));\n        this._openers.push(new EditorOpener(editorService));\n    }\n    registerOpener(opener) {\n        const remove = this._openers.unshift(opener);\n        return { dispose: remove };\n    }\n    open(target, options) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            // check with contributed validators\n            const targetURI = typeof target === 'string' ? URI.parse(target) : target;\n            // validate against the original URI that this URI resolves to, if one exists\n            const validationTarget = (_a = this._resolvedUriTargets.get(targetURI)) !== null && _a !== void 0 ? _a : target;\n            for (const validator of this._validators) {\n                if (!(yield validator.shouldOpen(validationTarget, options))) {\n                    return false;\n                }\n            }\n            // check with contributed openers\n            for (const opener of this._openers) {\n                const handled = yield opener.open(target, options);\n                if (handled) {\n                    return true;\n                }\n            }\n            return false;\n        });\n    }\n    resolveExternalUri(resource, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            for (const resolver of this._resolvers) {\n                try {\n                    const result = yield resolver.resolveExternalUri(resource, options);\n                    if (result) {\n                        if (!this._resolvedUriTargets.has(result.resolved)) {\n                            this._resolvedUriTargets.set(result.resolved, resource);\n                        }\n                        return result;\n                    }\n                }\n                catch (_a) {\n                    // noop\n                }\n            }\n            throw new Error('Could not resolve external URI: ' + resource.toString());\n        });\n    }\n    _doOpenExternal(resource, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            //todo@jrieken IExternalUriResolver should support `uri: URI | string`\n            const uri = typeof resource === 'string' ? URI.parse(resource) : resource;\n            let externalUri;\n            try {\n                externalUri = (yield this.resolveExternalUri(uri, options)).resolved;\n            }\n            catch (_a) {\n                externalUri = uri;\n            }\n            let href;\n            if (typeof resource === 'string' && uri.toString() === externalUri.toString()) {\n                // open the url-string AS IS\n                href = resource;\n            }\n            else {\n                // open URI using the toString(noEncode)+encodeURI-trick\n                href = encodeURI(externalUri.toString(true));\n            }\n            if (options === null || options === void 0 ? void 0 : options.allowContributedOpeners) {\n                const preferredOpenerId = typeof (options === null || options === void 0 ? void 0 : options.allowContributedOpeners) === 'string' ? options === null || options === void 0 ? void 0 : options.allowContributedOpeners : undefined;\n                for (const opener of this._externalOpeners) {\n                    const didOpen = yield opener.openExternal(href, {\n                        sourceUri: uri,\n                        preferredOpenerId,\n                    }, CancellationToken.None);\n                    if (didOpen) {\n                        return true;\n                    }\n                }\n            }\n            return this._defaultExternalOpener.openExternal(href, { sourceUri: uri }, CancellationToken.None);\n        });\n    }\n    dispose() {\n        this._validators.clear();\n    }\n};\nOpenerService = __decorate([\n    __param(0, ICodeEditorService),\n    __param(1, ICommandService)\n], OpenerService);\nexport { OpenerService };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getAllMethodNames } from '../../../base/common/objects.js';\nimport { EditorWorkerClient } from './editorWorkerService.js';\n/**\n * Create a new web worker that has model syncing capabilities built in.\n * Specify an AMD module to load that will `create` an object that will be proxied.\n */\nexport function createWebWorker(modelService, languageConfigurationService, opts) {\n    return new MonacoWebWorkerImpl(modelService, languageConfigurationService, opts);\n}\nclass MonacoWebWorkerImpl extends EditorWorkerClient {\n    constructor(modelService, languageConfigurationService, opts) {\n        super(modelService, opts.keepIdleModels || false, opts.label, languageConfigurationService);\n        this._foreignModuleId = opts.moduleId;\n        this._foreignModuleCreateData = opts.createData || null;\n        this._foreignModuleHost = opts.host || null;\n        this._foreignProxy = null;\n    }\n    // foreign host request\n    fhr(method, args) {\n        if (!this._foreignModuleHost || typeof this._foreignModuleHost[method] !== 'function') {\n            return Promise.reject(new Error('Missing method ' + method + ' or missing main thread foreign host.'));\n        }\n        try {\n            return Promise.resolve(this._foreignModuleHost[method].apply(this._foreignModuleHost, args));\n        }\n        catch (e) {\n            return Promise.reject(e);\n        }\n    }\n    _getForeignProxy() {\n        if (!this._foreignProxy) {\n            this._foreignProxy = this._getProxy().then((proxy) => {\n                const foreignHostMethods = this._foreignModuleHost ? getAllMethodNames(this._foreignModuleHost) : [];\n                return proxy.loadForeignModule(this._foreignModuleId, this._foreignModuleCreateData, foreignHostMethods).then((foreignMethods) => {\n                    this._foreignModuleCreateData = null;\n                    const proxyMethodRequest = (method, args) => {\n                        return proxy.fmr(method, args);\n                    };\n                    const createProxyMethod = (method, proxyMethodRequest) => {\n                        return function () {\n                            const args = Array.prototype.slice.call(arguments, 0);\n                            return proxyMethodRequest(method, args);\n                        };\n                    };\n                    const foreignProxy = {};\n                    for (const foreignMethod of foreignMethods) {\n                        foreignProxy[foreignMethod] = createProxyMethod(foreignMethod, proxyMethodRequest);\n                    }\n                    return foreignProxy;\n                });\n            });\n        }\n        return this._foreignProxy;\n    }\n    getProxy() {\n        return this._getForeignProxy();\n    }\n    withSyncedResources(resources) {\n        return this._withSyncedResources(resources).then(_ => this.getProxy());\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class StableEditorScrollState {\n    static capture(editor) {\n        if (editor.getScrollTop() === 0 || editor.hasPendingScrollAnimation()) {\n            // Never mess with the scroll top if the editor is at the top of the file or if there is a pending scroll animation\n            return new StableEditorScrollState(editor.getScrollTop(), editor.getContentHeight(), null, 0, null);\n        }\n        let visiblePosition = null;\n        let visiblePositionScrollDelta = 0;\n        const visibleRanges = editor.getVisibleRanges();\n        if (visibleRanges.length > 0) {\n            visiblePosition = visibleRanges[0].getStartPosition();\n            const visiblePositionScrollTop = editor.getTopForPosition(visiblePosition.lineNumber, visiblePosition.column);\n            visiblePositionScrollDelta = editor.getScrollTop() - visiblePositionScrollTop;\n        }\n        return new StableEditorScrollState(editor.getScrollTop(), editor.getContentHeight(), visiblePosition, visiblePositionScrollDelta, editor.getPosition());\n    }\n    constructor(_initialScrollTop, _initialContentHeight, _visiblePosition, _visiblePositionScrollDelta, _cursorPosition) {\n        this._initialScrollTop = _initialScrollTop;\n        this._initialContentHeight = _initialContentHeight;\n        this._visiblePosition = _visiblePosition;\n        this._visiblePositionScrollDelta = _visiblePositionScrollDelta;\n        this._cursorPosition = _cursorPosition;\n    }\n    restore(editor) {\n        if (this._initialContentHeight === editor.getContentHeight() && this._initialScrollTop === editor.getScrollTop()) {\n            // The editor's content height and scroll top haven't changed, so we don't need to do anything\n            return;\n        }\n        if (this._visiblePosition) {\n            const visiblePositionScrollTop = editor.getTopForPosition(this._visiblePosition.lineNumber, this._visiblePosition.column);\n            editor.setScrollTop(visiblePositionScrollTop + this._visiblePositionScrollDelta);\n        }\n    }\n    restoreRelativeVerticalPositionOfCursor(editor) {\n        if (this._initialContentHeight === editor.getContentHeight() && this._initialScrollTop === editor.getScrollTop()) {\n            // The editor's content height and scroll top haven't changed, so we don't need to do anything\n            return;\n        }\n        const currentCursorPosition = editor.getPosition();\n        if (!this._cursorPosition || !currentCursorPosition) {\n            return;\n        }\n        const offset = editor.getTopForLineNumber(currentCursorPosition.lineNumber) - editor.getTopForLineNumber(this._cursorPosition.lineNumber);\n        editor.setScrollTop(editor.getScrollTop() + offset);\n    }\n}\n"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","toVSDataTransfer","dataTransfer","_step","vsDataTransfer","VSDataTransfer","_iterator","_createForOfIteratorHelper","items","_loop","item","type","kind","asStringValue","getAsString","append","createStringDataTransferItem","file","getAsFile","_this","uri","path","URI","parse","undefined","createFileDataTransferItem","name","_regeneratorRuntime","mark","_callee","wrap","_context","prev","t0","Uint8Array","arrayBuffer","t1","sent","abrupt","stop","createFileDataTransferItemFromFile","s","n","err","f","INTERNAL_DND_MIME_TYPES","Object","freeze","CodeDataTransfers","EDITORS","FILES","DataTransfers","RESOURCES","INTERNAL_URI_LIST","toExternalVSDataTransfer","sourceDataTransfer","overwriteUriList","arguments","length","uriList","get","replace","Mimes","has","_step2","editorData","_iterator2","push","toString","_a","UriList","create","_step3","_iterator3","internal","delete","isCodeEditor","thing","getEditorType","editorCommon","ICodeEditor","isDiffEditor","IDiffEditor","getCodeEditor","getModifiedEditor","onDidChangeActiveEditor","isCompositeEditor","activeCodeEditor","PageCoordinates","x","y","_classCallCheck","this","_pageCoordinatesBrand","_createClass","key","ClientCoordinates","window","scrollX","scrollY","clientX","clientY","_clientCoordinatesBrand","EditorPagePosition","width","height","_editorPagePositionBrand","CoordinatesRelativeToEditor","_positionRelativeToEditorBrand","createEditorPagePosition","editorViewDomNode","editorPos","dom","left","top","createCoordinatesRelativeToEditor","editorPagePosition","pos","scaleX","offsetWidth","scaleY","offsetHeight","relativeX","relativeY","EditorMouseEvent","_StandardMouseEvent","_inherits","_super","_createSuper","isFromPointerCapture","call","_editorMouseEventBrand","posx","posy","relativePos","StandardMouseEvent","EditorMouseEventFactory","_editorViewDomNode","target","callback","_this2","_create","_this3","_this4","MOUSE_DOWN","_this5","POINTER_DOWN","pointerId","_this6","MOUSE_LEAVE","_this7","EditorPointerEventFactory","_this8","_this9","_this10","POINTER_LEAVE","_this11","GlobalEditorPointerMoveMonitor","_Disposable","_super2","_this12","_globalPointerMoveMonitor","_register","GlobalPointerMoveMonitor","_keydownListener","initialElement","initialButtons","pointerMoveCallback","onStopCallback","_this13","document","toKeyCodeChord","isModifierKey","stopMonitoring","browserEvent","startMonitoring","dispose","Disposable","DynamicCssRules","_editor","_this14","_instanceId","_idPool","_counter","_rules","Map","_garbageCollectionScheduler","RunOnceScheduler","garbageCollect","options","_this15","rule","getOrCreateRule","increaseRefCount","className","decreaseRefCount","schedule","properties","computeUniqueKey","existingRule","counter","RefCountedCssRule","concat","getContainerDomNode","set","JSON","stringify","values","hasReferences","_containerElement","_referenceCount","_styleElement","textContent","getCssText","str","prop","cssValue","asCssVariable","id","cssPropName","camelToDashes","remove","_ref","_slicedToArray","toLowerCase","_ref3","letter","EditorExtensionsRegistry","Command","opts","precondition","_kbOpts","kbOpts","_menuOpts","menuOpts","_description","description","Array","isArray","forEach","_registerMenuItem","kbOptsArr","kbWhen","kbExpr","ContextKeyExpr","and","desc","weight","args","when","primary","secondary","win","linux","mac","KeybindingsRegistry","registerKeybindingRule","CommandsRegistry","registerCommand","handler","accessor","runCommand","MenuRegistry","appendMenuItem","menuId","group","command","title","icon","order","MultiCommand","_Command","_implementations","priority","implementation","sort","a","b","i","splice","logService","ILogService","contextKeyService","IContextKeyService","trace","impl","context","getContext","activeElement","evaluate","ProxyCommand","_Command2","EditorCommand","_Command3","_super3","runEditorCommand","editor","controllerGetter","_EditorCommand","EditorControllerCommandImpl","_super4","_callback","controller","runner","codeEditorService","ICodeEditorService","getFocusedCodeEditor","getActiveCodeEditor","invokeWithinContext","editorAccessor","contextMatchesRules","withNullAsUndefined","EditorAction","_EditorCommand2","_super5","convertOptions","label","alias","reportTelemetry","run","ITelemetryService","publicLog2","withDefaults","MenuId","EditorContext","contextMenuOpts","_toConsumableArray","map","MultiEditorAction","_EditorAction","_super6","EditorAction2","_Action","_super7","_len","_key","kbService","debug","serialize","Action2","registerModelAndPositionCommand","_len2","_key2","instaService","IInstantiationService","resource","position","assertType","isUri","Position","isIPosition","model","IModelService","getModel","editorPosition","lift","invokeFunction","slice","ITextModelService","createModelReference","reference","object","textEditorModel","finally","registerEditorCommand","editorCommand","EditorContributionRegistry","INSTANCE","registerEditorAction","ctor","action","registerMultiEditorAction","registerInstantiatedEditorAction","editorAction","registerEditorContribution","instantiation","getEditorCommand","commandId","getEditorActions","getEditorContributions","getSomeEditorContributions","ids","filter","c","indexOf","getDiffEditorContributions","editorContributions","diffEditorContributions","editorActions","editorCommands","register","Registry","add","UndoCommand","MenubarEditMenu","nls","comment","CommandPalette","RedoCommand","SelectAllCommand","MenubarSelectionMenu","__decorate","decorators","d","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","AbstractCodeEditorService","_themeService","_onWillCreateCodeEditor","Emitter","_onCodeEditorAdd","onCodeEditorAdd","event","_onCodeEditorRemove","onCodeEditorRemove","_onWillCreateDiffEditor","_onDiffEditorAdd","onDiffEditorAdd","_onDiffEditorRemove","onDiffEditorRemove","_decorationOptionProviders","_codeEditorOpenHandlers","LinkedList","_modelProperties","_codeEditors","_diffEditors","_globalStyleSheet","fire","getId","keys","editorWithWidgetFocus","editors","listCodeEditors","hasTextFocus","hasWidgetFocus","provider","refCount","ed","removeDecorationsByType","dest","key1","input","source","sideBySide","candidate","finish","rm","unshift","toDisposable","IThemeService","IBulkEditService","createDecorator","ResourceEdit","metadata","edit","edits","ResourceTextEdit","is","ResourceFileEdit","Error","_ResourceEdit","textEdit","versionId","isObject","_ResourceEdit2","oldResource","newResource","Boolean","STOP_WORKER_DELTA_TIME_MS","canSyncModel","modelService","isTooLargeForSyncing","EditorWorkerService","configurationService","languageConfigurationService","languageFeaturesService","_modelService","_workerManager","WorkerManager","_logService","linkProvider","language","hasAccessToAllModels","provideLinks","token","withWorker","client","computeLinks","links","completionProvider","WordBasedCompletionItemProvider","_get","_getPrototypeOf","prototype","range","computedUnicodeHighlights","original","modified","algorithm","diff","toLineRangeMappings","changes","LineRangeMapping","LineRange","RangeMapping","Range","computeDiff","identical","quitEarly","moves","m","MovedText","SimpleLineRangeMapping","pretty","isNonEmptyArray","sw","StopWatch","computeMoreMinimalEdits","elapsed","race","timeout","up","navigateValueSet","computeWordRanges","ITextResourceConfigurationService","ILanguageConfigurationService","ILanguageFeaturesService","workerManager","_debugDisplayName","_configurationService","_callee2","config","models","wordDefRegExp","word","insert","data","_context2","getValue","wordBasedSuggestions","wordBasedSuggestionsMode","getModels","getLanguageId","getLanguageConfiguration","getWordDefinition","getWordAtPosition","lineNumber","startColumn","endColumn","fromPositions","setEndPosition","column","textualSuggest","duration","suggestions","words","insertText","_Disposable2","_editorWorkerClient","_lastWorkerUsedTime","Date","getTime","IntervalTimer","cancelAndSet","_checkStopIdleWorker","Math","round","onModelRemoved","_","_checkStopEmptyWorker","EditorWorkerClient","EditorModelManager","_Disposable3","proxy","keepIdleModels","_syncedModels","_syncedModelsLastUsedTime","_proxy","timer","_checkStopModelSync","STOP_SYNC_MODEL_DELTA_TIME_MS","modelUrl","resources","forceLargeModels","resourceStr","_beginModelSync","currentTime","toRemove","_i","_toRemove","_stopModelSync","acceptNewModel","url","lines","getLinesContent","EOL","getEOL","getVersionId","toDispose","DisposableStore","onDidChangeContent","acceptModelChanged","onWillDispose","acceptRemovedModel","SynchronousWorkerClient","instance","_instance","_proxyObj","EditorWorkerHost","workerClient","_workerClient","method","fhr","_Disposable4","_disposed","_keepIdleModels","_workerFactory","DefaultWorkerFactory","_worker","_modelManager","SimpleWorkerClient","logOnceWebWorkerWarning","EditorSimpleWorker","_getOrCreateWorker","getProxyObject","_callee3","_context3","canceled","_getProxy","_getOrCreateModelManager","ensureSyncedResources","_withSyncedResources","computeUnicodeHighlights","computeDefaultDocumentColors","leadingWord","_callee4","wordDef","wordDefFlags","_context4","regExpFlags","MarkerDecorationsContribution","_markerDecorationsService","ID","IMarkerDecorationsService","CommandOpener","_commandService","_this$_commandService","matchesScheme","Schemas","allowCommands","includes","decodeURIComponent","query","_b","executeCommand","ICommandService","EditorOpener","_editorService","_extractSelection","selection","extractSelection","scheme","normalizePath","openCodeEditor","assign","fromUserGesture","EditorOpenSource","USER","API","editorOptions","openToSide","OpenerService","editorService","commandService","_openers","_validators","_resolvers","_resolvedUriTargets","ResourceMap","with","fragment","_externalOpeners","_defaultExternalOpener","openExternal","href","matchesSomeScheme","http","https","location","open","mailto","vsls","_doOpenExternal","opener","_callee5","targetURI","validationTarget","validator","_context5","shouldOpen","_callee6","resolver","_context6","resolveExternalUri","resolved","_callee7","externalUri","preferredOpenerId","_iterator4","_step4","_context7","encodeURI","allowContributedOpeners","sourceUri","CancellationToken","None","clear","createWebWorker","MonacoWebWorkerImpl","_EditorWorkerClient","_foreignModuleId","moduleId","_foreignModuleCreateData","createData","_foreignModuleHost","host","_foreignProxy","foreignHostMethods","getAllMethodNames","loadForeignModule","foreignMethods","proxyMethodRequest","fmr","createProxyMethod","foreignProxy","foreignMethod","_getForeignProxy","getProxy","StableEditorScrollState","_initialScrollTop","_initialContentHeight","_visiblePosition","_visiblePositionScrollDelta","_cursorPosition","getContentHeight","getScrollTop","visiblePositionScrollTop","getTopForPosition","setScrollTop","currentCursorPosition","getPosition","offset","getTopForLineNumber","hasPendingScrollAnimation","visiblePosition","visiblePositionScrollDelta","visibleRanges","getVisibleRanges","getStartPosition"],"sourceRoot":""}