"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4929],{20301:(e,t,i)=>{var o,n=i(82224),s=i(58348),r=i(57443),a=i(30050),d=i(5190),l=i(72330),c=i(51413),h=i(39686),u=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},g=function(e,t){return function(i,o){t(i,o,e)}};const p=new h.N1("selectionAnchorSet",!1);let m=o=class{static get(e){return e.getContribution(o.ID)}constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=p.bindTo(t),this.modelChangeListener=e.onDidChangeModel((()=>this.selectionAnchorSetContextKey.reset()))}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition();this.editor.changeDecorations((t=>{this.decorationId&&t.removeDecoration(this.decorationId),this.decorationId=t.addDecoration(d.L.fromPositions(e,e),{description:"selection-anchor",stickiness:1,hoverMessage:(new s.Bc).appendText((0,c.kg)("selectionAnchor","Selection Anchor")),className:"selection-anchor"})})),this.selectionAnchorSetContextKey.set(!!this.decorationId),(0,n.xE)((0,c.kg)("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(d.L.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){const e=this.decorationId;this.editor.changeDecorations((t=>{t.removeDecoration(e),this.decorationId=void 0})),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};m.ID="editor.contrib.selectionAnchorController",m=o=u([g(1,h.fN)],m);class _ extends a.ks{constructor(){super({id:"editor.action.setSelectionAnchor",label:(0,c.kg)("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:l.R.editorTextFocus,primary:(0,r.m5)(2089,2080),weight:100}})}async run(e,t){var i;null===(i=m.get(t))||void 0===i||i.setSelectionAnchor()}}class f extends a.ks{constructor(){super({id:"editor.action.goToSelectionAnchor",label:(0,c.kg)("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:p})}async run(e,t){var i;null===(i=m.get(t))||void 0===i||i.goToSelectionAnchor()}}class v extends a.ks{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:(0,c.kg)("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:p,kbOpts:{kbExpr:l.R.editorTextFocus,primary:(0,r.m5)(2089,2089),weight:100}})}async run(e,t){var i;null===(i=m.get(t))||void 0===i||i.selectFromAnchorToCursor()}}class C extends a.ks{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:(0,c.kg)("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:p,kbOpts:{kbExpr:l.R.editorTextFocus,primary:9,weight:100}})}async run(e,t){var i;null===(i=m.get(t))||void 0===i||i.cancelSelectionAnchor()}}(0,a.HW)(m.ID,m,4),(0,a.Fl)(_),(0,a.Fl)(f),(0,a.Fl)(v),(0,a.Fl)(C)},60178:(e,t,i)=>{var o=i(73990),n=i(87766),s=i(30050),r=i(23525),a=i(99005),d=i(5190),l=i(72330),c=i(32743),h=i(15739),u=i(51413),g=i(35155),p=i(63573),m=i(19700);const _=(0,p.x1A)("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hcDark:"#A0A0A0",hcLight:"#A0A0A0"},u.kg("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class f extends s.ks{constructor(){super({id:"editor.action.jumpToBracket",label:u.kg("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:l.R.editorTextFocus,primary:3165,weight:100}})}run(e,t){var i;null===(i=y.get(t))||void 0===i||i.jumpToBracket()}}class v extends s.ks{constructor(){super({id:"editor.action.selectToBracket",label:u.kg("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,metadata:{description:u.aS("smartSelect.selectToBracketDescription","Select the text inside and including the brackets or curly braces"),args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,i){var o;let n=!0;i&&!1===i.selectBrackets&&(n=!1),null===(o=y.get(t))||void 0===o||o.selectToBracket(n)}}class C extends s.ks{constructor(){super({id:"editor.action.removeBrackets",label:u.kg("smartSelect.removeBrackets","Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:l.R.editorTextFocus,primary:2561,weight:100}})}run(e,t){var i;null===(i=y.get(t))||void 0===i||i.removeBrackets(this.id)}}class b{constructor(e,t,i){this.position=e,this.brackets=t,this.options=i}}class y extends n.jG{static get(e){return e.getContribution(y.ID)}constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new o.uC((()=>this._updateBrackets()),50)),this._matchBrackets=this._editor.getOption(72),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition((e=>{"never"!==this._matchBrackets&&this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModelContent((e=>{this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModel((e=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModelLanguageConfiguration((e=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeConfiguration((e=>{e.hasChanged(72)&&(this._matchBrackets=this._editor.getOption(72),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())}))),this._register(e.onDidBlurEditorWidget((()=>{this._updateBracketsSoon.schedule()}))),this._register(e.onDidFocusEditorWidget((()=>{this._updateBracketsSoon.schedule()})))}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map((t=>{const i=t.getStartPosition(),o=e.bracketPairs.matchBracket(i);let n=null;if(o)o[0].containsPosition(i)&&!o[1].containsPosition(i)?n=o[1].getStartPosition():o[1].containsPosition(i)&&(n=o[0].getStartPosition());else{const t=e.bracketPairs.findEnclosingBrackets(i);if(t)n=t[1].getStartPosition();else{const t=e.bracketPairs.findNextBracket(i);t&&t.range&&(n=t.range.getStartPosition())}}return n?new d.L(n.lineNumber,n.column,n.lineNumber,n.column):new d.L(i.lineNumber,i.column,i.lineNumber,i.column)}));this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=[];this._editor.getSelections().forEach((o=>{const n=o.getStartPosition();let s=t.bracketPairs.matchBracket(n);if(!s&&(s=t.bracketPairs.findEnclosingBrackets(n),!s)){const e=t.bracketPairs.findNextBracket(n);e&&e.range&&(s=t.bracketPairs.matchBracket(e.range.getStartPosition()))}let r=null,l=null;if(s){s.sort(a.Q.compareRangesUsingStarts);const[t,i]=s;if(r=e?t.getStartPosition():t.getEndPosition(),l=e?i.getEndPosition():i.getStartPosition(),i.containsPosition(n)){const e=r;r=l,l=e}}r&&l&&i.push(new d.L(r.lineNumber,r.column,l.lineNumber,l.column))})),i.length>0&&(this._editor.setSelections(i),this._editor.revealRange(i[0]))}removeBrackets(e){if(!this._editor.hasModel())return;const t=this._editor.getModel();this._editor.getSelections().forEach((i=>{const o=i.getPosition();let n=t.bracketPairs.matchBracket(o);n||(n=t.bracketPairs.findEnclosingBrackets(o)),n&&(this._editor.pushUndoStop(),this._editor.executeEdits(e,[{range:n[0],text:""},{range:n[1],text:""}]),this._editor.pushUndoStop())}))}_updateBrackets(){if("never"===this._matchBrackets)return;this._recomputeBrackets();const e=[];let t=0;for(const i of this._lastBracketsData){const o=i.brackets;o&&(e[t++]={range:o[0],options:i.options},e[t++]={range:o[1],options:i.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus())return this._lastBracketsData=[],void(this._lastVersionId=0);const e=this._editor.getSelections();if(e.length>100)return this._lastBracketsData=[],void(this._lastVersionId=0);const t=this._editor.getModel(),i=t.getVersionId();let o=[];this._lastVersionId===i&&(o=this._lastBracketsData);const n=[];let s=0;for(let r=0,h=e.length;r<h;r++){const t=e[r];t.isEmpty()&&(n[s++]=t.getStartPosition())}n.length>1&&n.sort(r.y.compare);const a=[];let d=0,l=0;const c=o.length;for(let r=0,h=n.length;r<h;r++){const e=n[r];for(;l<c&&o[l].position.isBefore(e);)l++;if(l<c&&o[l].position.equals(e))a[d++]=o[l];else{let i=t.bracketPairs.matchBracket(e,20),o=y._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;i||"always"!==this._matchBrackets||(i=t.bracketPairs.findEnclosingBrackets(e,20),o=y._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[d++]=new b(e,i,o)}}this._lastBracketsData=a,this._lastVersionId=i}}y.ID="editor.contrib.bracketMatchingController",y._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=h.kI.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:(0,m.Yf)(_),position:c.A5.Center}}),y._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=h.kI.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"}),(0,s.HW)(y.ID,y,1),(0,s.Fl)(v),(0,s.Fl)(f),(0,s.Fl)(C),g.ZG.appendMenuItem(g.D8.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:u.kg({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2})},59172:(e,t,i)=>{var o=i(30050),n=i(72330),s=i(99005),r=i(5190);class a{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const i=this._selection.startLineNumber,o=this._selection.startColumn,n=this._selection.endColumn;if((!this._isMovingLeft||1!==o)&&(this._isMovingLeft||n!==e.getLineMaxColumn(i)))if(this._isMovingLeft){const r=new s.Q(i,o-1,i,o),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new s.Q(i,n,i,n),a)}else{const r=new s.Q(i,n,i,n+1),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new s.Q(i,o,i,o),a)}}computeCursorState(e,t){return this._isMovingLeft?new r.L(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new r.L(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}var d=i(51413);class l extends o.ks{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;const i=[],o=t.getSelections();for(const n of o)i.push(new a(n,this.left));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}(0,o.Fl)(class extends l{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:d.kg("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:n.R.writable})}}),(0,o.Fl)(class extends l{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:d.kg("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:n.R.writable})}})},9918:(e,t,i)=>{var o=i(30050),n=i(77932),s=i(91596),r=i(99005),a=i(72330),d=i(51413);class l extends o.ks{constructor(){super({id:"editor.action.transposeLetters",label:d.kg("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:a.R.writable,kbOpts:{kbExpr:a.R.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;const i=t.getModel(),o=[],a=t.getSelections();for(const d of a){if(!d.isEmpty())continue;const e=d.startLineNumber,t=d.startColumn,a=i.getLineMaxColumn(e);if(1===e&&(1===t||2===t&&2===a))continue;const l=t===a?d.getPosition():s.I.rightPosition(i,d.getPosition().lineNumber,d.getPosition().column),c=s.I.leftPosition(i,l),h=s.I.leftPosition(i,c),u=i.getValueInRange(r.Q.fromPositions(h,c)),g=i.getValueInRange(r.Q.fromPositions(c,l)),p=r.Q.fromPositions(h,l);o.push(new n.iu(p,g+u))}o.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop())}}(0,o.Fl)(l)},34228:(e,t,i)=>{var o=i(49685),n=i(32605),s=i(66731),r=i(9984),a=i(30050),d=i(32101),l=i(72330),c=i(46625),h=i(51413),u=i(35155),g=i(2826),p=i(39686);const m="9_cutcopypaste",_=s.ib||document.queryCommandSupported("cut"),f=s.ib||document.queryCommandSupported("copy"),v="undefined"!==typeof navigator.clipboard&&!o.gm||document.queryCommandSupported("paste");function C(e){return e.register(),e}const b=_?C(new a.fE({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:s.ib?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:u.D8.MenubarEditMenu,group:"2_ccp",title:h.kg({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:u.D8.EditorContext,group:m,title:h.kg("actions.clipboard.cutLabel","Cut"),when:l.R.writable,order:1},{menuId:u.D8.CommandPalette,group:"",title:h.kg("actions.clipboard.cutLabel","Cut"),order:1},{menuId:u.D8.SimpleEditorContext,group:m,title:h.kg("actions.clipboard.cutLabel","Cut"),when:l.R.writable,order:1}]})):void 0,y=f?C(new a.fE({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:s.ib?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:u.D8.MenubarEditMenu,group:"2_ccp",title:h.kg({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:u.D8.EditorContext,group:m,title:h.kg("actions.clipboard.copyLabel","Copy"),order:2},{menuId:u.D8.CommandPalette,group:"",title:h.kg("actions.clipboard.copyLabel","Copy"),order:1},{menuId:u.D8.SimpleEditorContext,group:m,title:h.kg("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;u.ZG.appendMenuItem(u.D8.MenubarEditMenu,{submenu:u.D8.MenubarCopy,title:h.aS("copy as","Copy As"),group:"2_ccp",order:3}),u.ZG.appendMenuItem(u.D8.EditorContext,{submenu:u.D8.EditorContextCopy,title:h.aS("copy as","Copy As"),group:m,order:3}),u.ZG.appendMenuItem(u.D8.EditorContext,{submenu:u.D8.EditorContextShare,title:h.aS("share","Share"),group:"11_share",order:-1,when:p.M$.and(p.M$.notEquals("resourceScheme","output"),l.R.editorTextFocus)}),u.ZG.appendMenuItem(u.D8.EditorTitleContext,{submenu:u.D8.EditorTitleContextShare,title:h.aS("share","Share"),group:"11_share",order:-1}),u.ZG.appendMenuItem(u.D8.ExplorerContext,{submenu:u.D8.ExplorerContextShare,title:h.aS("share","Share"),group:"11_share",order:-1});const k=v?C(new a.fE({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:s.ib?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:u.D8.MenubarEditMenu,group:"2_ccp",title:h.kg({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:u.D8.EditorContext,group:m,title:h.kg("actions.clipboard.pasteLabel","Paste"),when:l.R.writable,order:4},{menuId:u.D8.CommandPalette,group:"",title:h.kg("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:u.D8.SimpleEditorContext,group:m,title:h.kg("actions.clipboard.pasteLabel","Paste"),when:l.R.writable,order:4}]})):void 0;class w extends a.ks{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:h.kg("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:l.R.textInputFocus,primary:0,weight:100}})}run(e,t){if(!t.hasModel())return;!t.getOption(37)&&t.getSelection().isEmpty()||(r.Eq.forceCopyWithSyntaxHighlighting=!0,t.focus(),t.getContainerDomNode().ownerDocument.execCommand("copy"),r.Eq.forceCopyWithSyntaxHighlighting=!1)}}function S(e,t){e&&(e.addImplementation(1e4,"code-editor",((e,i)=>{const o=e.get(d.T).getFocusedCodeEditor();if(o&&o.hasTextFocus()){const e=o.getOption(37),i=o.getSelection();return i&&i.isEmpty()&&!e||o.getContainerDomNode().ownerDocument.execCommand(t),!0}return!1})),e.addImplementation(0,"generic-dom",((e,i)=>((0,n.a)().execCommand(t),!0))))}S(b,"cut"),S(y,"copy"),k&&(k.addImplementation(1e4,"code-editor",((e,t)=>{var i,o;const n=e.get(d.T),a=e.get(g.h),l=n.getFocusedCodeEditor();if(l&&l.hasTextFocus()){return l.getContainerDomNode().ownerDocument.execCommand("paste")?null!==(o=null===(i=c.Rj.get(l))||void 0===i?void 0:i.finishedPaste())&&void 0!==o?o:Promise.resolve():!s.HZ||(async()=>{const e=await a.readText();if(""!==e){const t=r.bs.INSTANCE.get(e);let i=!1,o=null,n=null;t&&(i=l.getOption(37)&&!!t.isFromEmptySelection,o="undefined"!==typeof t.multicursorText?t.multicursorText:null,n=t.mode),l.trigger("keyboard","paste",{text:e,pasteOnNewLine:i,multicursorText:o,mode:n})}})()}return!1})),k.addImplementation(0,"generic-dom",((e,t)=>((0,n.a)().execCommand("paste"),!0)))),f&&(0,a.Fl)(w)},1170:(e,t,i)=>{i.d(t,{C9:()=>P,Qp:()=>N,Rw:()=>x,Uy:()=>D,W4:()=>E,Xj:()=>S,dU:()=>I,k_:()=>y,pQ:()=>k,pR:()=>w});var o=i(61498),n=i(25143),s=i(29591),r=i(87766),a=i(97072),d=i(59313),l=i(99005),c=i(5190),h=i(63910),u=i(21950),g=i(39212),p=i(51413),m=i(39587),_=i(39895),f=i(3607),v=i(96819),C=i(59303),b=i(87467);const y="editor.action.codeAction",k="editor.action.quickFix",w="editor.action.autoFix",S="editor.action.refactor",P="editor.action.sourceAction",D="editor.action.organizeImports",x="editor.action.fixAll";class L extends r.jG{static codeActionsPreferredComparator(e,t){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:0}static codeActionsComparator(e,t){let{action:i}=e,{action:n}=t;return i.isAI&&!n.isAI?1:!i.isAI&&n.isAI?-1:(0,o.EI)(i.diagnostics)?(0,o.EI)(n.diagnostics)?L.codeActionsPreferredComparator(i,n):-1:(0,o.EI)(n.diagnostics)?1:L.codeActionsPreferredComparator(i,n)}constructor(e,t,i){super(),this.documentation=t,this._register(i),this.allActions=[...e].sort(L.codeActionsComparator),this.validActions=this.allActions.filter((e=>{let{action:t}=e;return!t.disabled}))}get hasAutoFix(){return this.validActions.some((e=>{let{action:t}=e;return!!t.kind&&C.gB.QuickFix.contains(new b.k(t.kind))&&!!t.isPreferred}))}get hasAIFix(){return this.validActions.some((e=>{let{action:t}=e;return!!t.isAI}))}get allAIFixes(){return this.validActions.every((e=>{let{action:t}=e;return!!t.isAI}))}}const A={actions:[],documentation:void 0};async function I(e,t,i,n,a,d){var l;const c=n.filter||{},h={...c,excludes:[...c.excludes||[],C.gB.Notebook]},u={only:null===(l=c.include)||void 0===l?void 0:l.value,trigger:n.type},p=new g.ER(t,d),m=2===n.type,_=function(e,t,i){return e.all(t).filter((e=>!e.providedCodeActionKinds||e.providedCodeActionKinds.some((e=>(0,C.uJ)(i,new b.k(e))))))}(e,t,m?h:c),f=new r.Cm,v=_.map((async e=>{try{a.report(e);const o=await e.provideCodeActions(t,i,u,p.token);if(o&&f.add(o),p.token.isCancellationRequested)return A;const n=((null===o||void 0===o?void 0:o.actions)||[]).filter((e=>e&&(0,C.aF)(c,e))),s=function(e,t,i){if(!e.documentation)return;const o=e.documentation.map((e=>({kind:new b.k(e.kind),command:e.command})));if(i){let e;for(const t of o)t.kind.contains(i)&&(e?e.kind.contains(t.kind)&&(e=t):e=t);if(e)return null===e||void 0===e?void 0:e.command}for(const n of t)if(n.kind)for(const e of o)if(e.kind.contains(new b.k(n.kind)))return e.command;return}(e,n,c.include);return{actions:n.map((t=>new C.Vi(t,e))),documentation:s}}catch(o){if((0,s.MB)(o))throw o;return(0,s.M_)(o),A}})),y=e.onDidChange((()=>{const i=e.all(t);(0,o.aI)(i,_)||p.cancel()}));try{const i=await Promise.all(v),s=i.map((e=>e.actions)).flat(),r=[...(0,o.Yc)(i.map((e=>e.documentation))),...M(e,t,n,s)];return new L(s,r,f)}finally{y.dispose(),p.dispose()}}function*M(e,t,i,o){var n,s,r;if(t&&o.length)for(const a of e.all(t))a._getAdditionalMenuItems&&(yield*null===(n=a._getAdditionalMenuItems)||void 0===n?void 0:n.call(a,{trigger:i.type,only:null===(r=null===(s=i.filter)||void 0===s?void 0:s.include)||void 0===r?void 0:r.value},o.map((e=>e.action))))}var N;async function E(e,t,i,o){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.XO.None;var r;const a=e.get(d.nu),l=e.get(m.d),c=e.get(v.k),h=e.get(_.Ot);if(c.publicLog2("codeAction.applyCodeAction",{codeActionTitle:t.action.title,codeActionKind:t.action.kind,codeActionIsPreferred:!!t.action.isPreferred,reason:i}),await t.resolve(s),!s.isCancellationRequested){if(null===(r=t.action.edit)||void 0===r?void 0:r.edits.length){if(!(await a.apply(t.action.edit,{editor:null===o||void 0===o?void 0:o.editor,label:t.action.title,quotableLabel:t.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:i!==N.OnSave,showPreview:null===o||void 0===o?void 0:o.preview})).isApplied)return}if(t.action.command)try{await l.executeCommand(t.action.command.id,...t.action.command.arguments||[])}catch(u){const e=function(e){return"string"===typeof e?e:e instanceof Error&&"string"===typeof e.message?e.message:void 0}(u);h.error("string"===typeof e?e:p.kg("applyCodeActionFailed","An unknown error occurred while applying the code action"))}}}!function(e){e.OnSave="onSave",e.FromProblemsView="fromProblemsView",e.FromCodeActions="fromCodeActions",e.FromAILightbulb="fromAILightbulb"}(N||(N={})),m.w.registerCommand("_executeCodeActionProvider",(async function(e,t,i,o,r){if(!(t instanceof a.r))throw(0,s.Qg)();const{codeActionProvider:d}=e.get(h.u),g=e.get(u.S).getModel(t);if(!g)throw(0,s.Qg)();const p=c.L.isISelection(i)?c.L.liftSelection(i):l.Q.isIRange(i)?g.validateRange(i):void 0;if(!p)throw(0,s.Qg)();const m="string"===typeof o?new b.k(o):void 0,_=await I(d,g,p,{type:1,triggerAction:C.fo.Default,filter:{includeSourceActions:!0,include:m}},f.ke.None,n.XO.None),v=[],y=Math.min(_.validActions.length,"number"===typeof r?r:0);for(let s=0;s<y;s++)v.push(_.validActions[s].resolve(n.XO.None));try{return await Promise.all(v),_.validActions.map((e=>e.action))}finally{setTimeout((()=>_.dispose()),100)}}))},74611:(e,t,i)=>{var o=i(30050),n=i(65387),s=i(87467),r=i(12780),a=i(72330),d=i(1170),l=i(51413),c=i(39686),h=i(59303),u=i(76301),g=i(87177);function p(e){return c.M$.regex(g.D_.keys()[0],new RegExp("(\\s|^)"+(0,r.bm)(e.value)+"\\b"))}const m={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:l.kg("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:l.kg("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[l.kg("args.schema.apply.first","Always apply the first returned code action."),l.kg("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),l.kg("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:l.kg("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};function _(e,t,i,o){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h.fo.Default;if(e.hasModel()){const s=u.C.get(e);null===s||void 0===s||s.manualTriggerAtCurrentPosition(t,n,i,o)}}class f extends o.ks{constructor(){super({id:d.pQ,label:l.kg("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:c.M$.and(a.R.writable,a.R.hasCodeActionsProvider),kbOpts:{kbExpr:a.R.textInputFocus,primary:2137,weight:100}})}run(e,t){return _(t,l.kg("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,h.fo.QuickFix)}}class v extends o.DX{constructor(){super({id:d.k_,precondition:c.M$.and(a.R.writable,a.R.hasCodeActionsProvider),metadata:{description:"Trigger a code action",args:[{name:"args",schema:m}]}})}runEditorCommand(e,t,i){const o=h.QA.fromUser(i,{kind:s.k.Empty,apply:"ifSingle"});return _(t,"string"===typeof(null===i||void 0===i?void 0:i.kind)?o.preferred?l.kg("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",i.kind):l.kg("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",i.kind):o.preferred?l.kg("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):l.kg("editor.action.codeAction.noneMessage","No code actions available"),{include:o.kind,includeSourceActions:!0,onlyIncludePreferredActions:o.preferred},o.apply)}}class C extends o.ks{constructor(){super({id:d.Xj,label:l.kg("refactor.label","Refactor..."),alias:"Refactor...",precondition:c.M$.and(a.R.writable,a.R.hasCodeActionsProvider),kbOpts:{kbExpr:a.R.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:c.M$.and(a.R.writable,p(h.gB.Refactor))},metadata:{description:"Refactor...",args:[{name:"args",schema:m}]}})}run(e,t,i){const o=h.QA.fromUser(i,{kind:h.gB.Refactor,apply:"never"});return _(t,"string"===typeof(null===i||void 0===i?void 0:i.kind)?o.preferred?l.kg("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",i.kind):l.kg("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",i.kind):o.preferred?l.kg("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):l.kg("editor.action.refactor.noneMessage","No refactorings available"),{include:h.gB.Refactor.contains(o.kind)?o.kind:s.k.None,onlyIncludePreferredActions:o.preferred},o.apply,h.fo.Refactor)}}class b extends o.ks{constructor(){super({id:d.C9,label:l.kg("source.label","Source Action..."),alias:"Source Action...",precondition:c.M$.and(a.R.writable,a.R.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:c.M$.and(a.R.writable,p(h.gB.Source))},metadata:{description:"Source Action...",args:[{name:"args",schema:m}]}})}run(e,t,i){const o=h.QA.fromUser(i,{kind:h.gB.Source,apply:"never"});return _(t,"string"===typeof(null===i||void 0===i?void 0:i.kind)?o.preferred?l.kg("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",i.kind):l.kg("editor.action.source.noneMessage.kind","No source actions for '{0}' available",i.kind):o.preferred?l.kg("editor.action.source.noneMessage.preferred","No preferred source actions available"):l.kg("editor.action.source.noneMessage","No source actions available"),{include:h.gB.Source.contains(o.kind)?o.kind:s.k.None,includeSourceActions:!0,onlyIncludePreferredActions:o.preferred},o.apply,h.fo.SourceAction)}}class y extends o.ks{constructor(){super({id:d.Uy,label:l.kg("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:c.M$.and(a.R.writable,p(h.gB.SourceOrganizeImports)),kbOpts:{kbExpr:a.R.textInputFocus,primary:1581,weight:100}})}run(e,t){return _(t,l.kg("editor.action.organize.noneMessage","No organize imports action available"),{include:h.gB.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",h.fo.OrganizeImports)}}class k extends o.ks{constructor(){super({id:d.Rw,label:l.kg("fixAll.label","Fix All"),alias:"Fix All",precondition:c.M$.and(a.R.writable,p(h.gB.SourceFixAll))})}run(e,t){return _(t,l.kg("fixAll.noneMessage","No fix all action available"),{include:h.gB.SourceFixAll,includeSourceActions:!0},"ifSingle",h.fo.FixAll)}}class w extends o.ks{constructor(){super({id:d.pR,label:l.kg("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:c.M$.and(a.R.writable,p(h.gB.QuickFix)),kbOpts:{kbExpr:a.R.textInputFocus,primary:1625,mac:{primary:2649},weight:100}})}run(e,t){return _(t,l.kg("editor.action.autoFix.noneMessage","No auto fixes available"),{include:h.gB.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",h.fo.AutoFix)}}var S=i(33109),P=i(9702),D=i(31519);(0,o.HW)(u.C.ID,u.C,3),(0,o.HW)(S.E.ID,S.E,4),(0,o.Fl)(f),(0,o.Fl)(C),(0,o.Fl)(b),(0,o.Fl)(y),(0,o.Fl)(w),(0,o.Fl)(k),(0,o.E_)(new v),D.O.as(P.Fd.Configuration).registerConfiguration({...n.JJ,properties:{"editor.codeActionWidget.showHeaders":{type:"boolean",scope:5,description:l.kg("showCodeActionHeaders","Enable/disable showing group headers in the Code Action menu."),default:!0}}}),D.O.as(P.Fd.Configuration).registerConfiguration({...n.JJ,properties:{"editor.codeActionWidget.includeNearbyQuickFixes":{type:"boolean",scope:5,description:l.kg("includeNearbyQuickFixes","Enable/disable showing nearest Quick Fix within a line when not currently on a diagnostic."),default:!0}}})},76301:(e,t,i)=>{i.d(t,{C:()=>j});var o,n=i(32605),s=i(82224),r=i(29591),a=i(64330),d=i(87766),l=i(23525),c=i(15739),h=i(63910),u=i(1170),g=i(87467),p=i(59303),m=i(16391),_=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},f=function(e,t){return function(i,o){t(i,o,e)}};let v=o=class{constructor(e){this.keybindingService=e}getResolver(){const e=new a.d((()=>this.keybindingService.getKeybindings().filter((e=>o.codeActionCommands.indexOf(e.command)>=0)).filter((e=>e.resolvedKeybinding)).map((e=>{let t=e.commandArgs;return e.command===u.Uy?t={kind:p.gB.SourceOrganizeImports.value}:e.command===u.Rw&&(t={kind:p.gB.SourceFixAll.value}),{resolvedKeybinding:e.resolvedKeybinding,...p.QA.fromUser(t,{kind:g.k.None,apply:"never"})}}))));return t=>{if(t.kind){const i=this.bestKeybindingForCodeAction(t,e.value);return null===i||void 0===i?void 0:i.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const i=new g.k(e.kind);return t.filter((e=>e.kind.contains(i))).filter((t=>!t.preferred||e.isPreferred)).reduceRight(((e,t)=>e?e.kind.contains(t.kind)?t:e:t),void 0)}};v.codeActionCommands=[u.Xj,u.k_,u.C9,u.Uy,u.Rw],v=o=_([f(0,m.b)],v);i(43162);var C=i(21030),b=(i(39475),i(51413));const y=Object.freeze({kind:g.k.Empty,title:(0,b.kg)("codeAction.widget.id.more","More Actions...")}),k=Object.freeze([{kind:p.gB.QuickFix,title:(0,b.kg)("codeAction.widget.id.quickfix","Quick Fix")},{kind:p.gB.RefactorExtract,title:(0,b.kg)("codeAction.widget.id.extract","Extract"),icon:C.W.wrench},{kind:p.gB.RefactorInline,title:(0,b.kg)("codeAction.widget.id.inline","Inline"),icon:C.W.wrench},{kind:p.gB.RefactorRewrite,title:(0,b.kg)("codeAction.widget.id.convert","Rewrite"),icon:C.W.wrench},{kind:p.gB.RefactorMove,title:(0,b.kg)("codeAction.widget.id.move","Move"),icon:C.W.wrench},{kind:p.gB.SurroundWith,title:(0,b.kg)("codeAction.widget.id.surround","Surround With"),icon:C.W.surroundWith},{kind:p.gB.Source,title:(0,b.kg)("codeAction.widget.id.source","Source Action"),icon:C.W.symbolFile},y]);var w,S=i(33109),P=i(85521),D=i(95045),x=i(39587),L=i(66457),A=i(39686),I=i(39263),M=i(39747),N=i(3607),E=i(63573),O=i(15547),R=i(19700),T=i(87177),F=i(96819),B=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},W=function(e,t){return function(i,o){t(i,o,e)}};let j=w=class extends d.jG{static get(e){return e.getContribution(w.ID)}constructor(e,t,i,o,n,s,r,l,c,h,u){super(),this._commandService=r,this._configurationService=l,this._actionWidgetService=c,this._instantiationService=h,this._telemetryService=u,this._activeCodeActions=this._register(new d.HE),this._showDisabled=!1,this._disposed=!1,this._editor=e,this._model=this._register(new T.Dc(this._editor,n.codeActionProvider,t,i,s,l)),this._register(this._model.onDidChangeState((e=>this.update(e)))),this._lightBulbWidget=new a.d((()=>{const e=this._editor.getContribution(S.E.ID);return e&&this._register(e.onClick((e=>this.showCodeActionsFromLightbulb(e.actions,e)))),e})),this._resolver=o.createInstance(v),this._register(this._editor.onDidLayoutChange((()=>this._actionWidgetService.hide())))}dispose(){this._disposed=!0,super.dispose()}async showCodeActionsFromLightbulb(e,t){if(this._telemetryService.publicLog2("codeAction.showCodeActionsFromLightbulb",{codeActionListLength:e.validActions.length,codeActions:e.validActions.map((e=>e.action.title)),codeActionProviders:e.validActions.map((e=>{var t,i;return null!==(i=null===(t=e.provider)||void 0===t?void 0:t.displayName)&&void 0!==i?i:""}))}),e.allAIFixes&&1===e.validActions.length){const t=e.validActions[0],i=t.action.command;return i&&"inlineChat.start"===i.id&&i.arguments&&i.arguments.length>=1&&(i.arguments[0]={...i.arguments[0],autoSend:!1}),void await this._applyCodeAction(t,!1,!1,u.Qp.FromAILightbulb)}await this.showCodeActionList(e,t,{includeDisabledActions:!1,fromLightbulb:!0})}showCodeActions(e,t,i){return this.showCodeActionList(t,i,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(e,t,i,o){var n;if(!this._editor.hasModel())return;null===(n=P.k.get(this._editor))||void 0===n||n.closeMessage();const s=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:i,autoApply:o,context:{notAvailableMessage:e,position:s}})}_trigger(e){return this._model.trigger(e)}async _applyCodeAction(e,t,i,o){try{await this._instantiationService.invokeFunction(u.W4,e,o,{preview:i,editor:this._editor})}finally{t&&this._trigger({type:2,triggerAction:p.fo.QuickFix,filter:{}})}}async update(e){var t,i,o,n,s,a,d;if(1!==e.type)return void(null===(t=this._lightBulbWidget.rawValue)||void 0===t||t.hide());let l;try{l=await e.actions}catch(c){return void(0,r.dz)(c)}if(!this._disposed)if(null===(i=this._lightBulbWidget.value)||void 0===i||i.update(l,e.trigger,e.position),1===e.trigger.type){if(null===(o=e.trigger.filter)||void 0===o?void 0:o.include){const t=this.tryGetValidActionToApply(e.trigger,l);if(t){try{null===(n=this._lightBulbWidget.value)||void 0===n||n.hide(),await this._applyCodeAction(t,!1,!1,u.Qp.FromCodeActions)}finally{l.dispose()}return}if(e.trigger.context){const t=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,l);if(t&&t.action.disabled)return null===(s=P.k.get(this._editor))||void 0===s||s.showMessage(t.action.disabled,e.trigger.context.position),void l.dispose()}}const t=!!(null===(a=e.trigger.filter)||void 0===a?void 0:a.include);if(e.trigger.context&&(!l.allActions.length||!t&&!l.validActions.length))return null===(d=P.k.get(this._editor))||void 0===d||d.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=l,void l.dispose();this._activeCodeActions.value=l,this.showCodeActionList(l,this.toCoords(e.position),{includeDisabledActions:t,fromLightbulb:!1})}else this._actionWidgetService.isVisible?l.dispose():this._activeCodeActions.value=l}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length)return"first"===e.autoApply&&0===t.validActions.length||"ifSingle"===e.autoApply&&1===t.allActions.length?t.allActions.find((e=>{let{action:t}=e;return t.disabled})):void 0}tryGetValidActionToApply(e,t){if(t.validActions.length)return"first"===e.autoApply&&t.validActions.length>0||"ifSingle"===e.autoApply&&1===t.validActions.length?t.validActions[0]:void 0}async showCodeActionList(e,t,i){const o=this._editor.createDecorationsCollection(),n=this._editor.getDomNode();if(!n)return;const r=i.includeDisabledActions&&(this._showDisabled||0===e.validActions.length)?e.allActions:e.validActions;if(!r.length)return;const a=l.y.isIPosition(t)?this.toCoords(t):t,d={onSelect:async(e,t)=>{this._applyCodeAction(e,!0,!!t,i.fromLightbulb?u.Qp.FromAILightbulb:u.Qp.FromCodeActions),this._actionWidgetService.hide(!1),o.clear()},onHide:t=>{var n;null===(n=this._editor)||void 0===n||n.focus(),o.clear(),i.fromLightbulb&&void 0!==t&&this._telemetryService.publicLog2("codeAction.showCodeActionList.onHide",{codeActionListLength:e.validActions.length,didCancel:t})},onHover:async(e,t)=>{var i;if(t.isCancellationRequested)return;let o=!1;const n=e.action.kind;if(n){const e=new g.k(n);o=[p.gB.RefactorExtract,p.gB.RefactorInline,p.gB.RefactorRewrite,p.gB.RefactorMove,p.gB.Source].some((t=>t.contains(e)))}return{canPreview:o||!!(null===(i=e.action.edit)||void 0===i?void 0:i.edits.length)}},onFocus:e=>{var t,i;if(e&&e.action){const n=e.action.ranges,r=e.action.diagnostics;if(o.clear(),n&&n.length>0){const e=r&&(null===r||void 0===r?void 0:r.length)>1?r.map((e=>({range:e,options:w.DECORATION}))):n.map((e=>({range:e,options:w.DECORATION})));o.set(e)}else if(r&&r.length>0){const e=r.map((e=>({range:e,options:w.DECORATION})));o.set(e);const n=r[0];if(n.startLineNumber&&n.startColumn){const e=null===(i=null===(t=this._editor.getModel())||void 0===t?void 0:t.getWordAtPosition({lineNumber:n.startLineNumber,column:n.startColumn}))||void 0===i?void 0:i.word;s.h5((0,b.kg)("editingNewSelection","Context: {0} at line {1} and column {2}.",e,n.startLineNumber,n.startColumn))}}}else o.clear()}};this._actionWidgetService.show("codeActionWidget",!0,function(e,t,i){if(!t)return e.map((e=>{var t;return{kind:"action",item:e,group:y,disabled:!!e.action.disabled,label:e.action.disabled||e.action.title,canPreview:!!(null===(t=e.action.edit)||void 0===t?void 0:t.edits.length)}}));const o=k.map((e=>({group:e,actions:[]})));for(const s of e){const e=s.action.kind?new g.k(s.action.kind):g.k.None;for(const t of o)if(t.group.kind.contains(e)){t.actions.push(s);break}}const n=[];for(const s of o)if(s.actions.length){n.push({kind:"header",group:s.group});for(const e of s.actions){const t=s.group;n.push({kind:"action",item:e,group:e.action.isAI?{title:t.title,kind:t.kind,icon:C.W.sparkle}:t,label:e.action.title,disabled:!!e.action.disabled,keybinding:i(e.action)})}}return n}(r,this._shouldShowHeaders(),this._resolver.getResolver()),d,a,n,this._getActionBarActions(e,t,i))}toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),i=(0,n.BK)(this._editor.getDomNode());return{x:i.left+t.left,y:i.top+t.top+t.height}}_shouldShowHeaders(){var e;const t=null===(e=this._editor)||void 0===e?void 0:e.getModel();return this._configurationService.getValue("editor.codeActionWidget.showHeaders",{resource:null===t||void 0===t?void 0:t.uri})}_getActionBarActions(e,t,i){if(i.fromLightbulb)return[];const o=e.documentation.map((e=>{var t;return{id:e.id,label:e.title,tooltip:null!==(t=e.tooltip)&&void 0!==t?t:"",class:void 0,enabled:!0,run:()=>{var t;return this._commandService.executeCommand(e.id,...null!==(t=e.arguments)&&void 0!==t?t:[])}}}));return i.includeDisabledActions&&e.validActions.length>0&&e.allActions.length!==e.validActions.length&&o.push(this._showDisabled?{id:"hideMoreActions",label:(0,b.kg)("hideMoreActions","Hide Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!1,this.showCodeActionList(e,t,i))}:{id:"showMoreActions",label:(0,b.kg)("showMoreActions","Show Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!0,this.showCodeActionList(e,t,i))}),o}};j.ID="editor.contrib.codeActionController",j.DECORATION=c.kI.register({description:"quickfix-highlight",className:"quickfix-edit-highlight"}),j=w=B([W(1,M.DR),W(2,A.fN),W(3,I._Y),W(4,h.u),W(5,N.N8),W(6,x.d),W(7,L.pG),W(8,D.$),W(9,I._Y),W(10,F.k)],j),(0,R.zy)(((e,t)=>{var i,o;i=".quickfix-edit-highlight",(o=e.getColor(E.Ubg))&&t.addRule(".monaco-editor ".concat(i," { background-color: ").concat(o,"; }"));const n=e.getColor(E.ECk);n&&t.addRule(".monaco-editor .quickfix-edit-highlight { border: 1px ".concat((0,O.Bb)(e.type)?"dotted":"solid"," ").concat(n,"; box-sizing: border-box; }"))}))},87177:(e,t,i)=>{i.d(t,{D_:()=>_,Dc:()=>y});var o=i(73990),n=i(29591),s=i(48250),r=i(87766),a=i(53059),d=i(81196),l=i(23525),c=i(5190),h=i(39686),u=i(3607),g=i(59303),p=i(1170),m=i(87467);const _=new h.N1("supportedCodeAction",""),f="_typescript.applyFixAllCodeAction";class v extends r.jG{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:250;super(),this._editor=e,this._markerService=t,this._signalChange=i,this._delay=n,this._autoTriggerTimer=this._register(new o.pc),this._register(this._markerService.onMarkerChanged((e=>this._onMarkerChanges(e)))),this._register(this._editor.onDidChangeCursorPosition((()=>this._tryAutoTrigger())))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);this._signalChange(t?{trigger:e,selection:t}:void 0)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some((e=>(0,a.n4)(e,t.uri)))&&this._tryAutoTrigger()}_tryAutoTrigger(){this._autoTriggerTimer.cancelAndSet((()=>{this.trigger({type:2,triggerAction:g.fo.Default})}),this._delay)}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getSelection();if(1===e.type)return t;const i=this._editor.getOption(65).enabled;if(i!==d.jT.Off){if(i===d.jT.On)return t;if(i===d.jT.OnCode){if(!t.isEmpty())return t;const e=this._editor.getModel(),{lineNumber:i,column:o}=t.getPosition(),n=e.getLineContent(i);if(0===n.length)return;if(1===o){if(/\s/.test(n[0]))return}else if(o===e.getLineMaxColumn(i)){if(/\s/.test(n[n.length-1]))return}else if(/\s/.test(n[o-2])&&/\s/.test(n[o-1]))return}return t}}}var C;!function(e){e.Empty={type:0};e.Triggered=class{constructor(e,t,i){this.trigger=e,this.position=t,this._cancellablePromise=i,this.type=1,this.actions=i.catch((e=>{if((0,n.MB)(e))return b;throw e}))}cancel(){this._cancellablePromise.cancel()}}}(C||(C={}));const b=Object.freeze({allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1,hasAIFix:!1,allAIFixes:!1});class y extends r.jG{constructor(e,t,i,o,n,a){super(),this._editor=e,this._registry=t,this._markerService=i,this._progressService=n,this._configurationService=a,this._codeActionOracle=this._register(new r.HE),this._state=C.Empty,this._onDidChangeState=this._register(new s.vl),this.onDidChangeState=this._onDidChangeState.event,this._disposed=!1,this._supportedCodeActions=_.bindTo(o),this._register(this._editor.onDidChangeModel((()=>this._update()))),this._register(this._editor.onDidChangeModelLanguage((()=>this._update()))),this._register(this._registry.onDidChange((()=>this._update()))),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(65)&&this._update()}))),this._update()}dispose(){this._disposed||(this._disposed=!0,super.dispose(),this.setState(C.Empty,!0))}_settingEnabledNearbyQuickfixes(){var e;const t=null===(e=this._editor)||void 0===e?void 0:e.getModel();return!!this._configurationService&&this._configurationService.getValue("editor.codeActionWidget.includeNearbyQuickFixes",{resource:null===t||void 0===t?void 0:t.uri})}_update(){if(this._disposed)return;this._codeActionOracle.value=void 0,this.setState(C.Empty);const e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(91)){const t=this._registry.all(e).flatMap((e=>{var t;return null!==(t=e.providedCodeActionKinds)&&void 0!==t?t:[]}));this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new v(this._editor,this._markerService,(t=>{var i;if(!t)return void this.setState(C.Empty);const n=t.selection.getStartPosition(),s=(0,o.SS)((async i=>{var o,n,s,r,a,d,h,_,v,C;if(this._settingEnabledNearbyQuickfixes()&&1===t.trigger.type&&(t.trigger.triggerAction===g.fo.QuickFix||(null===(n=null===(o=t.trigger.filter)||void 0===o?void 0:o.include)||void 0===n?void 0:n.contains(g.gB.QuickFix)))){const o=await(0,p.dU)(this._registry,e,t.selection,t.trigger,u.ke.None,i),n=[...o.allActions];if(i.isCancellationRequested)return b;const y=null===(s=o.validActions)||void 0===s?void 0:s.some((e=>!!e.action.kind&&g.gB.QuickFix.contains(new m.k(e.action.kind)))),k=this._markerService.read({resource:e.uri});if(y){for(const e of o.validActions)(null===(a=null===(r=e.action.command)||void 0===r?void 0:r.arguments)||void 0===a?void 0:a.some((e=>"string"===typeof e&&e.includes(f))))&&(e.action.diagnostics=[...k.filter((e=>e.relatedInformation))]);return{validActions:o.validActions,allActions:n,documentation:o.documentation,hasAutoFix:o.hasAutoFix,hasAIFix:o.hasAIFix,allAIFixes:o.allAIFixes,dispose:()=>{o.dispose()}}}if(!y&&k.length>0){const s=t.selection.getPosition();let r=s,a=Number.MAX_VALUE;const m=[...o.validActions];for(const y of k){const b=y.endColumn,w=y.endLineNumber,S=y.startLineNumber;if(w===s.lineNumber||S===s.lineNumber){r=new l.y(w,b);const y={type:t.trigger.type,triggerAction:t.trigger.triggerAction,filter:{include:(null===(d=t.trigger.filter)||void 0===d?void 0:d.include)?null===(h=t.trigger.filter)||void 0===h?void 0:h.include:g.gB.QuickFix},autoApply:t.trigger.autoApply,context:{notAvailableMessage:(null===(_=t.trigger.context)||void 0===_?void 0:_.notAvailableMessage)||"",position:r}},S=new c.L(r.lineNumber,r.column,r.lineNumber,r.column),P=await(0,p.dU)(this._registry,e,S,y,u.ke.None,i);if(0!==P.validActions.length){for(const e of P.validActions)(null===(C=null===(v=e.action.command)||void 0===v?void 0:v.arguments)||void 0===C?void 0:C.some((e=>"string"===typeof e&&e.includes(f))))&&(e.action.diagnostics=[...k.filter((e=>e.relatedInformation))]);0===o.allActions.length&&n.push(...P.allActions),Math.abs(s.column-b)<a?m.unshift(...P.validActions):m.push(...P.validActions)}a=Math.abs(s.column-b)}}const b=m.filter(((e,t,i)=>i.findIndex((t=>t.action.title===e.action.title))===t));return b.sort(((e,t)=>e.action.isPreferred&&!t.action.isPreferred?-1:!e.action.isPreferred&&t.action.isPreferred||e.action.isAI&&!t.action.isAI?1:!e.action.isAI&&t.action.isAI?-1:0)),{validActions:b,allActions:n,documentation:o.documentation,hasAutoFix:o.hasAutoFix,hasAIFix:o.hasAIFix,allAIFixes:o.allAIFixes,dispose:()=>{o.dispose()}}}}return(0,p.dU)(this._registry,e,t.selection,t.trigger,u.ke.None,i)}));1===t.trigger.type&&(null===(i=this._progressService)||void 0===i||i.showWhile(s,250));const r=new C.Triggered(t.trigger,n,s);let a=!1;1===this._state.type&&(a=1===this._state.trigger.type&&1===r.type&&2===r.trigger.type&&this._state.position!==r.position),a?setTimeout((()=>{this.setState(r)}),500):this.setState(r)}),void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:g.fo.Default})}else this._supportedCodeActions.reset()}trigger(e){var t;null===(t=this._codeActionOracle.value)||void 0===t||t.trigger(e)}setState(e,t){e!==this._state&&(1===this._state.type&&this._state.cancel(),this._state=e,t||this._disposed||this._onDidChangeState.fire(e))}}},33109:(e,t,i)=>{i.d(t,{E:()=>v});var o,n,s=i(32605),r=i(58538),a=i(21030),d=i(48250),l=i(87766),c=i(70145),h=i(12441),u=i(1170),g=i(51413),p=i(39587),m=i(16391),_=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},f=function(e,t){return function(i,o){t(i,o,e)}};!function(e){e.Hidden={type:0};e.Showing=class{constructor(e,t,i,o){this.actions=e,this.trigger=t,this.editorPosition=i,this.widgetPosition=o,this.type=1}}}(n||(n={}));let v=o=class extends l.jG{constructor(e,t,i){super(),this._editor=e,this._keybindingService=t,this._onClick=this._register(new d.vl),this.onClick=this._onClick.event,this._state=n.Hidden,this._iconClasses=[],this._domNode=s.$("div.lightBulbWidget"),this._domNode.role="listbox",this._register(r.q.ignoreTarget(this._domNode)),this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent((e=>{const t=this._editor.getModel();(1!==this.state.type||!t||this.state.editorPosition.lineNumber>=t.getLineCount())&&this.hide()}))),this._register(s.Xc(this._domNode,(e=>{if(1!==this.state.type)return;this._editor.focus(),e.preventDefault();const{top:t,height:i}=s.BK(this._domNode),o=this._editor.getOption(67);let n=Math.floor(o/3);null!==this.state.widgetPosition.position&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(n+=o),this._onClick.fire({x:e.posx,y:t+i+n,actions:this.state.actions,trigger:this.state.trigger})}))),this._register(s.ko(this._domNode,"mouseenter",(e=>{1===(1&e.buttons)&&this.hide()}))),this._register(d.Jh.runAndSubscribe(this._keybindingService.onDidUpdateKeybindings,(()=>{var e,t,i,o;this._preferredKbLabel=null!==(t=null===(e=this._keybindingService.lookupKeybinding(u.pR))||void 0===e?void 0:e.getLabel())&&void 0!==t?t:void 0,this._quickFixKbLabel=null!==(o=null===(i=this._keybindingService.lookupKeybinding(u.pQ))||void 0===i?void 0:i.getLabel())&&void 0!==o?o:void 0,this._updateLightBulbTitleAndIcon()})))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return 1===this._state.type?this._state.widgetPosition:null}update(e,t,i){if(e.validActions.length<=0)return this.hide();if(!this._editor.getOptions().get(65).enabled)return this.hide();const s=this._editor.getModel();if(!s)return this.hide();const{lineNumber:r,column:a}=s.validatePosition(i),d=s.getOptions().tabSize,l=this._editor.getOptions().get(50),c=s.getLineContent(r),u=(0,h.G)(c,d),g=e=>e>2&&this._editor.getTopForLineNumber(e)===this._editor.getTopForLineNumber(e-1);let p=r,m=1;if(!(l.spaceWidth*u>22)){if(r>1&&!g(r-1))p-=1;else if(r<s.getLineCount()&&!g(r+1))p+=1;else if(a*l.spaceWidth<22)return this.hide();m=/^\S\s*$/.test(s.getLineContent(p))?2:1}this.state=new n.Showing(e,t,i,{position:{lineNumber:p,column:m},preference:o._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state!==n.Hidden&&(this.state=n.Hidden,this._editor.layoutContentWidget(this))}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this._domNode.classList.remove(...this._iconClasses),this._iconClasses=[],1!==this.state.type)return;let e,t=!1;this.state.actions.allAIFixes?(e=a.W.sparkleFilled,1===this.state.actions.validActions.length&&(t=!0)):e=this.state.actions.hasAutoFix?this.state.actions.hasAIFix?a.W.lightbulbSparkleAutofix:a.W.lightbulbAutofix:this.state.actions.hasAIFix?a.W.lightbulbSparkle:a.W.lightBulb,this._updateLightbulbTitle(this.state.actions.hasAutoFix,t),this._iconClasses=c.L.asClassNameArray(e),this._domNode.classList.add(...this._iconClasses)}_updateLightbulbTitle(e,t){1===this.state.type&&(t?this.title=g.kg("codeActionAutoRun","Run: {0}",this.state.actions.validActions[0].action.title):e&&this._preferredKbLabel?this.title=g.kg("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",this._preferredKbLabel):!e&&this._quickFixKbLabel?this.title=g.kg("codeActionWithKb","Show Code Actions ({0})",this._quickFixKbLabel):e||(this.title=g.kg("codeAction","Show Code Actions")))}set title(e){this._domNode.title=e}};v.ID="editor.contrib.lightbulbWidget",v._posPref=[0],v=o=_([f(1,m.b),f(2,p.d)],v)},59303:(e,t,i)=>{i.d(t,{QA:()=>c,Vi:()=>h,aF:()=>d,fo:()=>r,gB:()=>s,uJ:()=>a});var o=i(29591),n=i(87467);const s=new class{constructor(){this.QuickFix=new n.k("quickfix"),this.Refactor=new n.k("refactor"),this.RefactorExtract=this.Refactor.append("extract"),this.RefactorInline=this.Refactor.append("inline"),this.RefactorMove=this.Refactor.append("move"),this.RefactorRewrite=this.Refactor.append("rewrite"),this.Notebook=new n.k("notebook"),this.Source=new n.k("source"),this.SourceOrganizeImports=this.Source.append("organizeImports"),this.SourceFixAll=this.Source.append("fixAll"),this.SurroundWith=this.Refactor.append("surround")}};var r;function a(e,t){return!(e.include&&!e.include.intersects(t))&&((!e.excludes||!e.excludes.some((i=>l(t,i,e.include))))&&!(!e.includeSourceActions&&s.Source.contains(t)))}function d(e,t){const i=t.kind?new n.k(t.kind):void 0;return!!(!e.include||i&&e.include.contains(i))&&(!(e.excludes&&i&&e.excludes.some((t=>l(i,t,e.include))))&&(!(!e.includeSourceActions&&i&&s.Source.contains(i))&&!(e.onlyIncludePreferredActions&&!t.isPreferred)))}function l(e,t,i){return!!t.contains(e)&&(!i||!t.contains(i))}!function(e){e.Refactor="refactor",e.RefactorPreview="refactor preview",e.Lightbulb="lightbulb",e.Default="other (default)",e.SourceAction="source action",e.QuickFix="quick fix action",e.FixAll="fix all",e.OrganizeImports="organize imports",e.AutoFix="auto fix",e.QuickFixHover="quick fix hover window",e.OnSave="save participants",e.ProblemsView="problems view"}(r||(r={}));class c{static fromUser(e,t){return e&&"object"===typeof e?new c(c.getKindFromUser(e,t.kind),c.getApplyFromUser(e,t.apply),c.getPreferredUser(e)):new c(t.kind,t.apply,!1)}static getApplyFromUser(e,t){switch("string"===typeof e.apply?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return"string"===typeof e.kind?new n.k(e.kind):t}static getPreferredUser(e){return"boolean"===typeof e.preferred&&e.preferred}constructor(e,t,i){this.kind=e,this.apply=t,this.preferred=i}}class h{constructor(e,t,i){this.action=e,this.provider=t,this.highlightRange=i}async resolve(e){var t;if((null===(t=this.provider)||void 0===t?void 0:t.resolveCodeAction)&&!this.action.edit){let t;try{t=await this.provider.resolveCodeAction(this.action,e)}catch(i){(0,o.M_)(i)}t&&(this.action.edit=t.edit)}return this}}},91649:(e,t,i)=>{var o=i(73990),n=i(29591),s=i(87766),r=i(56718),a=i(30050),d=i(81196),l=i(72330),c=i(25143),h=i(32031),u=i(97072),g=i(21950),p=i(39587),m=i(63910);class _{constructor(){this.lenses=[],this._disposables=new s.Cm}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(const i of e.lenses)this.lenses.push({symbol:i,provider:t})}}async function f(e,t,i){const o=e.ordered(t),s=new Map,r=new _,a=o.map((async(e,o)=>{s.set(e,o);try{const o=await Promise.resolve(e.provideCodeLenses(t,i));o&&r.add(o,e)}catch(a){(0,n.M_)(a)}}));return await Promise.all(a),r.lenses=r.lenses.sort(((e,t)=>e.symbol.range.startLineNumber<t.symbol.range.startLineNumber?-1:e.symbol.range.startLineNumber>t.symbol.range.startLineNumber?1:s.get(e.provider)<s.get(t.provider)?-1:s.get(e.provider)>s.get(t.provider)?1:e.symbol.range.startColumn<t.symbol.range.startColumn?-1:e.symbol.range.startColumn>t.symbol.range.startColumn?1:0)),r}p.w.registerCommand("_executeCodeLensProvider",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];let[r,a]=i;(0,h.j)(u.r.isUri(r)),(0,h.j)("number"===typeof a||!a);const{codeLensProvider:d}=e.get(m.u),l=e.get(g.S).getModel(r);if(!l)throw(0,n.Qg)();const p=[],_=new s.Cm;return f(d,l,c.XO.None).then((e=>{_.add(e);const t=[];for(const i of e.lenses)void 0===a||null===a||Boolean(i.symbol.command)?p.push(i.symbol):a-- >0&&i.provider.resolveCodeLens&&t.push(Promise.resolve(i.provider.resolveCodeLens(l,i.symbol,c.XO.None)).then((e=>p.push(e||i.symbol))));return Promise.all(t)})).then((()=>p)).finally((()=>{setTimeout((()=>_.dispose()),100)}))}));var v=i(48250),C=i(67512),b=i(99005),y=i(42502),k=i(39263),w=i(87299),S=i(8141),P=i(32605),D=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},x=function(e,t){return function(i,o){t(i,o,e)}};const L=(0,k.u1)("ICodeLensCache");class A{constructor(e,t){this.lineCount=e,this.data=t}}let I=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new C.qK(20,.75);(0,P.U3)(S.G,(()=>e.remove("codelens/cache",1)));const t="codelens/cache2",i=e.get(t,1,"{}");this._deserialize(i),v.Jh.once(e.onWillSaveState)((i=>{i.reason===w.LP.SHUTDOWN&&e.store(t,this._serialize(),1,1)}))}put(e,t){const i=t.lenses.map((e=>{var t;return{range:e.symbol.range,command:e.symbol.command&&{id:"",title:null===(t=e.symbol.command)||void 0===t?void 0:t.title}}})),o=new _;o.add({lenses:i,dispose:()=>{}},this._fakeProvider);const n=new A(e.getLineCount(),o);this._cache.set(e.uri.toString(),n)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,i]of this._cache){const o=new Set;for(const e of i.data.lenses)o.add(e.symbol.range.startLineNumber);e[t]={lineCount:i.lineCount,lines:[...o.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const e in t){const i=t[e],o=[];for(const e of i.lines)o.push({range:new b.Q(e,1,e,11)});const n=new _;n.add({lenses:o,dispose(){}},this._fakeProvider),this._cache.set(e,new A(i.lineCount,n))}}catch(t){}}};I=D([x(0,w.CS)],I),(0,y.v)(L,I,1);var M=i(58250),N=i(15739);class E{constructor(e,t,i){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=i,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){void 0===this._lastHeight?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return 0!==this._lastHeight&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class O{constructor(e,t){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id="codelens.widget-".concat(O._idPool++),this.updatePosition(t),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}withCommands(e,t){this._commands.clear();const i=[];let o=!1;for(let n=0;n<e.length;n++){const t=e[n];if(t&&(o=!0,t.command)){const o=(0,M.n)(t.command.title.trim());if(t.command.id){const e="c".concat(O._idPool++);i.push(P.$("a",{id:e,title:t.command.tooltip,role:"button"},...o)),this._commands.set(e,t.command)}else i.push(P.$("span",{title:t.command.tooltip},...o));n+1<e.length&&i.push(P.$("span",void 0,"\xa0|\xa0"))}}o?(P.Ln(this._domNode,...i),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):P.Ln(this._domNode,P.$("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}O._idPool=0;class R{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){const t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let i=0,o=t.length;i<o;i++)this._addDecorationsCallbacks[i](t[i])}}const T=N.kI.register({collapseOnReplaceEdit:!0,description:"codelens"});class F{constructor(e,t,i,o,n,s){let r;this._isDisposed=!1,this._editor=t,this._data=e,this._decorationIds=[];const a=[];this._data.forEach(((e,t)=>{e.symbol.command&&a.push(e.symbol),i.addDecoration({range:e.symbol.range,options:T},(e=>this._decorationIds[t]=e)),r=r?b.Q.plusRange(r,e.symbol.range):b.Q.lift(e.symbol.range)})),this._viewZone=new E(r.startLineNumber-1,n,s),this._viewZoneId=o.addZone(this._viewZone),a.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(a,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new O(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],null===t||void 0===t||t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some(((e,t)=>{const i=this._editor.getModel().getDecorationRange(e),o=this._data[t].symbol;return!(!i||b.Q.isEmpty(o.range)!==i.isEmpty())}))}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach(((e,i)=>{t.addDecoration({range:e.symbol.range,options:T},(e=>this._decorationIds[i]=e))}))}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const i=e.getDecorationRange(this._decorationIds[t]);i&&(this._data[t].symbol.range=i)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const i=e[t];if(i){const{symbol:e}=this._data[t];e.command=i.command||e.command}}}getCommand(e){var t;return null===(t=this._contentWidget)||void 0===t?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}var B=i(51413),W=i(39895),j=i(50051),Q=i(50044),V=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},H=function(e,t){return function(i,o){t(i,o,e)}};let K=class{constructor(e,t,i,n,r,a){this._editor=e,this._languageFeaturesService=t,this._commandService=n,this._notificationService=r,this._codeLensCache=a,this._disposables=new s.Cm,this._localToDispose=new s.Cm,this._lenses=[],this._oldCodeLensModels=new s.Cm,this._provideCodeLensDebounce=i.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=i.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new o.uC((()=>this._resolveCodeLensesInViewport()),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeModelLanguage((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(50)||e.hasChanged(19)||e.hasChanged(18))&&this._updateLensStyle(),e.hasChanged(17)&&this._onModelChange()}))),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),null===(e=this._currentCodeLensModel)||void 0===e||e.dispose()}_getLayoutInfo(){const e=Math.max(1.3,this._editor.getOption(67)/this._editor.getOption(52));let t=this._editor.getOption(19);return(!t||t<5)&&(t=.9*this._editor.getOption(52)|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),i=this._editor.getOption(18),o=this._editor.getOption(50),{style:n}=this._editor.getContainerDomNode();n.setProperty("--vscode-editorCodeLens-lineHeight","".concat(e,"px")),n.setProperty("--vscode-editorCodeLens-fontSize","".concat(t,"px")),n.setProperty("--vscode-editorCodeLens-fontFeatureSettings",o.fontFeatureSettings),i&&(n.setProperty("--vscode-editorCodeLens-fontFamily",i),n.setProperty("--vscode-editorCodeLens-fontFamilyDefault",d.jU.fontFamily)),this._editor.changeViewZones((t=>{for(const i of this._lenses)i.updateHeight(e,t)}))}_localDispose(){var e,t,i;null===(e=this._getCodeLensModelPromise)||void 0===e||e.cancel(),this._getCodeLensModelPromise=void 0,null===(t=this._resolveCodeLensesPromise)||void 0===t||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),null===(i=this._currentCodeLensModel)||void 0===i||i.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e)return;if(!this._editor.getOption(17)||e.isTooLargeForTokenization())return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e))return void(t&&(0,o.EQ)((()=>{const i=this._codeLensCache.get(e);t===i&&(this._codeLensCache.delete(e),this._onModelChange())}),3e4,this._localToDispose));for(const o of this._languageFeaturesService.codeLensProvider.all(e))if("function"===typeof o.onDidChange){const e=o.onDidChange((()=>i.schedule()));this._localToDispose.add(e)}const i=new o.uC((()=>{var t;const s=Date.now();null===(t=this._getCodeLensModelPromise)||void 0===t||t.cancel(),this._getCodeLensModelPromise=(0,o.SS)((t=>f(this._languageFeaturesService.codeLensProvider,e,t))),this._getCodeLensModelPromise.then((t=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=t,this._codeLensCache.put(e,t);const o=this._provideCodeLensDebounce.update(e,Date.now()-s);i.delay=o,this._renderCodeLensSymbols(t),this._resolveCodeLensesInViewportSoon()}),n.dz)}),this._provideCodeLensDebounce.get(e));this._localToDispose.add(i),this._localToDispose.add((0,s.s)((()=>this._resolveCodeLensesScheduler.cancel()))),this._localToDispose.add(this._editor.onDidChangeModelContent((()=>{var e;this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{const i=[];let o=-1;this._lenses.forEach((e=>{e.isValid()&&o!==e.getLineNumber()?(e.update(t),o=e.getLineNumber()):i.push(e)}));const n=new R;i.forEach((e=>{e.dispose(n,t),this._lenses.splice(this._lenses.indexOf(e),1)})),n.commit(e)}))})),i.schedule(),this._resolveCodeLensesScheduler.cancel(),null===(e=this._resolveCodeLensesPromise)||void 0===e||e.cancel(),this._resolveCodeLensesPromise=void 0}))),this._localToDispose.add(this._editor.onDidFocusEditorWidget((()=>{i.schedule()}))),this._localToDispose.add(this._editor.onDidBlurEditorText((()=>{i.cancel()}))),this._localToDispose.add(this._editor.onDidScrollChange((e=>{e.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add(this._editor.onDidLayoutChange((()=>{this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add((0,s.s)((()=>{if(this._editor.getModel()){const e=r.D.capture(this._editor);this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{this._disposeAllLenses(e,t)}))})),e.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)}))),this._localToDispose.add(this._editor.onMouseDown((e=>{if(9!==e.target.type)return;let t=e.target.element;if("SPAN"===(null===t||void 0===t?void 0:t.tagName)&&(t=t.parentElement),"A"===(null===t||void 0===t?void 0:t.tagName))for(const i of this._lenses){const e=i.getCommand(t);if(e){this._commandService.executeCommand(e.id,...e.arguments||[]).catch((e=>this._notificationService.error(e)));break}}}))),i.schedule()}_disposeAllLenses(e,t){const i=new R;for(const o of this._lenses)o.dispose(i,t);e&&i.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;const t=this._editor.getModel().getLineCount(),i=[];let o;for(const r of e.lenses){const e=r.symbol.range.startLineNumber;e<1||e>t||(o&&o[o.length-1].symbol.range.startLineNumber===e?o.push(r):(o=[r],i.push(o)))}if(!i.length&&!this._lenses.length)return;const n=r.D.capture(this._editor),s=this._getLayoutInfo();this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{const o=new R;let n=0,r=0;for(;r<i.length&&n<this._lenses.length;){const e=i[r][0].symbol.range.startLineNumber,a=this._lenses[n].getLineNumber();a<e?(this._lenses[n].dispose(o,t),this._lenses.splice(n,1)):a===e?(this._lenses[n].updateCodeLensSymbols(i[r],o),r++,n++):(this._lenses.splice(n,0,new F(i[r],this._editor,o,t,s.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),n++,r++)}for(;n<this._lenses.length;)this._lenses[n].dispose(o,t),this._lenses.splice(n,1);for(;r<i.length;)this._lenses.push(new F(i[r],this._editor,o,t,s.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),r++;o.commit(e)}))})),n.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;null===(e=this._resolveCodeLensesPromise)||void 0===e||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const i=[],s=[];if(this._lenses.forEach((e=>{const o=e.computeIfNecessary(t);o&&(i.push(o),s.push(e))})),0===i.length)return;const r=Date.now(),a=(0,o.SS)((e=>{const o=i.map(((i,o)=>{const r=new Array(i.length),a=i.map(((i,o)=>i.symbol.command||"function"!==typeof i.provider.resolveCodeLens?(r[o]=i.symbol,Promise.resolve(void 0)):Promise.resolve(i.provider.resolveCodeLens(t,i.symbol,e)).then((e=>{r[o]=e}),n.M_)));return Promise.all(a).then((()=>{e.isCancellationRequested||s[o].isDisposed()||s[o].updateCommands(r)}))}));return Promise.all(o)}));this._resolveCodeLensesPromise=a,this._resolveCodeLensesPromise.then((()=>{const e=this._resolveCodeLensesDebounce.update(t,Date.now()-r);this._resolveCodeLensesScheduler.delay=e,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),a===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}),(e=>{(0,n.dz)(e),a===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}))}async getModel(){var e;return await this._getCodeLensModelPromise,await this._resolveCodeLensesPromise,(null===(e=this._currentCodeLensModel)||void 0===e?void 0:e.isDisposed)?void 0:this._currentCodeLensModel}};K.ID="css.editor.codeLens",K=V([H(1,m.u),H(2,Q.U),H(3,p.d),H(4,W.Ot),H(5,L)],K),(0,a.HW)(K.ID,K,1),(0,a.Fl)(class extends a.ks{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:l.R.hasCodeLensProvider,label:(0,B.kg)("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}async run(e,t){if(!t.hasModel())return;const i=e.get(j.GK),o=e.get(p.d),n=e.get(W.Ot),s=t.getSelection().positionLineNumber,r=t.getContribution(K.ID);if(!r)return;const a=await r.getModel();if(!a)return;const d=[];for(const u of a.lenses)u.symbol.command&&u.symbol.range.startLineNumber===s&&d.push({label:u.symbol.command.title,command:u.symbol.command});if(0===d.length)return;const l=await i.pick(d,{canPickMany:!1,placeHolder:(0,B.kg)("placeHolder","Select a command")});if(!l)return;let c=l.command;if(a.isDisposed){const e=await r.getModel(),t=null===e||void 0===e?void 0:e.lenses.find((e=>{var t;return e.symbol.range.startLineNumber===s&&(null===(t=e.symbol.command)||void 0===t?void 0:t.title)===c.title}));if(!t||!t.symbol.command)return;c=t.symbol.command}try{await o.executeCommand(c.id,...c.arguments||[])}catch(h){n.error(h)}}})},57102:(e,t,i)=>{i.d(t,{R:()=>g,j:()=>u});var o=i(25143),n=i(29591),s=i(97072),r=i(99005),a=i(21950),d=i(39587),l=i(63910),c=i(6355),h=i(66457);async function u(e,t,i){let o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return f(new p,e,t,i,o)}function g(e,t,i,o){return Promise.resolve(i.provideColorPresentations(e,t,o))}class p{constructor(){}async compute(e,t,i,o){const n=await e.provideDocumentColors(t,i);if(Array.isArray(n))for(const s of n)o.push({colorInfo:s,provider:e});return Array.isArray(n)}}class m{constructor(){}async compute(e,t,i,o){const n=await e.provideDocumentColors(t,i);if(Array.isArray(n))for(const s of n)o.push({range:s.range,color:[s.color.red,s.color.green,s.color.blue,s.color.alpha]});return Array.isArray(n)}}class _{constructor(e){this.colorInfo=e}async compute(e,t,i,n){const s=await e.provideColorPresentations(t,this.colorInfo,o.XO.None);return Array.isArray(s)&&n.push(...s),Array.isArray(s)}}async function f(e,t,i,o,s){let r,a=!1;const d=[],l=t.ordered(i);for(let u=l.length-1;u>=0;u--){const t=l[u];if(t instanceof c.L)r=t;else try{await e.compute(t,i,o,d)&&(a=!0)}catch(h){(0,n.M_)(h)}}return a?d:r&&s?(await e.compute(r,i,o,d),d):[]}function v(e,t){const{colorProvider:i}=e.get(l.u),o=e.get(a.S).getModel(t);if(!o)throw(0,n.Qg)();return{model:o,colorProviderRegistry:i,isDefaultColorDecoratorsEnabled:e.get(h.pG).getValue("editor.defaultColorDecorators",{resource:t})}}d.w.registerCommand("_executeDocumentColorProvider",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];const[a]=i;if(!(a instanceof s.r))throw(0,n.Qg)();const{model:d,colorProviderRegistry:l,isDefaultColorDecoratorsEnabled:c}=v(e,a);return f(new m,l,d,o.XO.None,c)})),d.w.registerCommand("_executeColorPresentationProvider",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];const[d,l]=i,{uri:c,range:h}=l;if(!(c instanceof s.r)||!Array.isArray(d)||4!==d.length||!r.Q.isIRange(h))throw(0,n.Qg)();const{model:u,colorProviderRegistry:g,isDefaultColorDecoratorsEnabled:p}=v(e,c),[m,C,b,y]=d;return f(new _({range:h,color:{red:m,green:C,blue:b,alpha:y}}),g,u,o.XO.None,p)}))},49331:(e,t,i)=>{var o=i(87766),n=i(30050),s=i(99005),r=i(95252),a=i(48455),d=i(24690),l=i(85287);class c extends o.jG{constructor(e){super(),this._editor=e,this._register(e.onMouseDown((e=>this.onMouseDown(e))))}dispose(){super.dispose()}onMouseDown(e){const t=this._editor.getOption(148);if("click"!==t&&"clickAndHover"!==t)return;const i=e.target;if(6!==i.type)return;if(!i.detail.injectedText)return;if(i.detail.injectedText.options.attachedData!==r.nM)return;if(!i.range)return;const o=this._editor.getContribution(d.n.ID);if(o&&!o.isColorPickerVisible){const e=new s.Q(i.range.startLineNumber,i.range.startColumn+1,i.range.endLineNumber,i.range.endColumn+1);o.showContentHover(e,1,0,!1,!0)}}}c.ID="editor.contrib.colorContribution",(0,n.HW)(c.ID,c,2),l.B2.register(a.BJ)},95252:(e,t,i)=>{i.d(t,{mn:()=>k,nM:()=>y});var o,n=i(73990),s=i(57397),r=i(29591),a=i(48250),d=i(87766),l=i(40997),c=i(12780),h=i(23726),u=i(30050),g=i(99005),p=i(15739),m=i(50044),_=i(63910),f=i(57102),v=i(66457),C=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},b=function(e,t){return function(i,o){t(i,o,e)}};const y=Object.create({});let k=o=class extends d.jG{constructor(e,t,i,n){super(),this._editor=e,this._configurationService=t,this._languageFeaturesService=i,this._localToDispose=this._register(new d.Cm),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new h.Qn(this._editor),this._decoratorLimitReporter=new w,this._colorDecorationClassRefs=this._register(new d.Cm),this._debounceInformation=n.for(i.colorProvider,"Document Colors",{min:o.RECOMPUTE_TIME}),this._register(e.onDidChangeModel((()=>{this._isColorDecoratorsEnabled=this.isEnabled(),this.updateColors()}))),this._register(e.onDidChangeModelLanguage((()=>this.updateColors()))),this._register(i.colorProvider.onDidChange((()=>this.updateColors()))),this._register(e.onDidChangeConfiguration((e=>{const t=this._isColorDecoratorsEnabled;this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(147);const i=t!==this._isColorDecoratorsEnabled||e.hasChanged(21),o=e.hasChanged(147);(i||o)&&(this._isColorDecoratorsEnabled?this.updateColors():this.removeAllDecorations())}))),this._timeoutTimer=null,this._computePromise=null,this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(147),this.updateColors()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),i=this._configurationService.getValue(t);if(i&&"object"===typeof i){const e=i.colorDecorators;if(e&&void 0!==e.enable&&!e.enable)return e.enable}return this._editor.getOption(20)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}updateColors(){if(this.stop(),!this._isColorDecoratorsEnabled)return;const e=this._editor.getModel();e&&this._languageFeaturesService.colorProvider.has(e)&&(this._localToDispose.add(this._editor.onDidChangeModelContent((()=>{this._timeoutTimer||(this._timeoutTimer=new n.pc,this._timeoutTimer.cancelAndSet((()=>{this._timeoutTimer=null,this.beginCompute()}),this._debounceInformation.get(e)))}))),this.beginCompute())}async beginCompute(){this._computePromise=(0,n.SS)((async e=>{const t=this._editor.getModel();if(!t)return[];const i=new l.W(!1),o=await(0,f.j)(this._languageFeaturesService.colorProvider,t,e,this._isDefaultColorDecoratorsEnabled);return this._debounceInformation.update(t,i.elapsed()),o}));try{const e=await this._computePromise;this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null}catch(e){(0,r.dz)(e)}}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map((e=>({range:{startLineNumber:e.colorInfo.range.startLineNumber,startColumn:e.colorInfo.range.startColumn,endLineNumber:e.colorInfo.range.endLineNumber,endColumn:e.colorInfo.range.endColumn},options:p.kI.EMPTY})));this._editor.changeDecorations((i=>{this._decorationsIds=i.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach(((t,i)=>this._colorDatas.set(t,e[i])))}))}updateColorDecorators(e){this._colorDecorationClassRefs.clear();const t=[],i=this._editor.getOption(21);for(let n=0;n<e.length&&t.length<i;n++){const{red:i,green:o,blue:r,alpha:a}=e[n].colorInfo.color,d=new s.bU(Math.round(255*i),Math.round(255*o),Math.round(255*r),a),l="rgba(".concat(d.r,", ").concat(d.g,", ").concat(d.b,", ").concat(d.a,")"),h=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:l}));t.push({range:{startLineNumber:e[n].colorInfo.range.startLineNumber,startColumn:e[n].colorInfo.range.startColumn,endLineNumber:e[n].colorInfo.range.endLineNumber,endColumn:e[n].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:c.S8,inlineClassName:"".concat(h.className," colorpicker-color-decoration"),inlineClassNameAffectsLetterSpacing:!0,attachedData:y}}})}const o=i<e.length&&i;this._decoratorLimitReporter.update(e.length,o),this._colorDecoratorIds.set(t)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const i=t.getDecorationsInRange(g.Q.fromPositions(e,e)).filter((e=>this._colorDatas.has(e.id)));return 0===i.length?null:this._colorDatas.get(i[0].id)}isColorDecoration(e){return this._colorDecoratorIds.has(e)}};k.ID="editor.contrib.colorDetector",k.RECOMPUTE_TIME=1e3,k=o=C([b(1,v.pG),b(2,_.u),b(3,m.U)],k);class w{constructor(){this._onDidChange=new a.vl,this._computed=0,this._limited=!1}update(e,t){e===this._computed&&t===this._limited||(this._computed=e,this._limited=t,this._onDidChange.fire())}}(0,u.HW)(k.ID,k,1)},48455:(e,t,i)=>{i.d(t,{BJ:()=>R,WE:()=>F});var o=i(73990),n=i(25143),s=i(57397),r=i(87766),a=i(99005),d=i(57102),l=i(95252),c=i(48250);class h{get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}constructor(e,t,i){this.presentationIndex=i,this._onColorFlushed=new c.vl,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new c.vl,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new c.vl,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){let i=-1;for(let o=0;o<this.colorPresentations.length;o++)if(t.toLowerCase()===this.colorPresentations[o].label){i=o;break}if(-1===i){const e=t.split("(")[0].toLowerCase();for(let t=0;t<this.colorPresentations.length;t++)if(this.colorPresentations[t].label.toLowerCase().startsWith(e)){i=t;break}}-1!==i&&i!==this.presentationIndex&&(this.presentationIndex=i,this._onDidChangePresentation.fire(this.presentation))}flushColor(){this._onColorFlushed.fire(this._color)}}var u=i(2530),g=i(32605),p=i(78656),m=i(70118),_=i(21030),f=i(70145),v=(i(93778),i(51413)),C=i(63573),b=i(85514);const y=g.$;class k extends r.jG{constructor(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];super(),this.model=t,this.showingStandaloneColorPicker=o,this._closeButton=null,this._domNode=y(".colorpicker-header"),g.BC(e,this._domNode),this._pickedColorNode=g.BC(this._domNode,y(".picked-color")),g.BC(this._pickedColorNode,y("span.codicon.codicon-color-mode")),this._pickedColorPresentation=g.BC(this._pickedColorNode,document.createElement("span")),this._pickedColorPresentation.classList.add("picked-color-presentation");const n=(0,v.kg)("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this._pickedColorNode.setAttribute("title",n),this._originalColorNode=g.BC(this._domNode,y(".original-color")),this._originalColorNode.style.backgroundColor=s.Q1.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=i.getColorTheme().getColor(C.WfR)||s.Q1.white,this._register(i.onDidColorThemeChange((e=>{this.backgroundColor=e.getColor(C.WfR)||s.Q1.white}))),this._register(g.ko(this._pickedColorNode,g.Bx.CLICK,(()=>this.model.selectNextColorPresentation()))),this._register(g.ko(this._originalColorNode,g.Bx.CLICK,(()=>{this.model.color=this.model.originalColor,this.model.flushColor()}))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this._pickedColorNode.style.backgroundColor=s.Q1.Format.CSS.format(t.color)||"",this._pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color),this.showingStandaloneColorPicker&&(this._domNode.classList.add("standalone-colorpicker"),this._closeButton=this._register(new w(this._domNode)))}get closeButton(){return this._closeButton}get pickedColorNode(){return this._pickedColorNode}get originalColorNode(){return this._originalColorNode}onDidChangeColor(e){this._pickedColorNode.style.backgroundColor=s.Q1.Format.CSS.format(e)||"",this._pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this._pickedColorPresentation.textContent=this.model.presentation?this.model.presentation.label:""}}class w extends r.jG{constructor(e){super(),this._onClicked=this._register(new c.vl),this.onClicked=this._onClicked.event,this._button=document.createElement("div"),this._button.classList.add("close-button"),g.BC(e,this._button);const t=document.createElement("div");t.classList.add("close-button-inner-div"),g.BC(this._button,t);g.BC(t,y(".button"+f.L.asCSSSelector((0,b.pU)("color-picker-close",_.W.close,(0,v.kg)("closeIcon","Icon to close the color picker"))))).classList.add("close-icon"),this._register(g.ko(this._button,g.Bx.CLICK,(()=>{this._onClicked.fire()})))}}class S extends r.jG{constructor(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];super(),this.model=t,this.pixelRatio=i,this._insertButton=null,this._domNode=y(".colorpicker-body"),g.BC(e,this._domNode),this._saturationBox=new P(this._domNode,this.model,this.pixelRatio),this._register(this._saturationBox),this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this._saturationBox.onColorFlushed(this.flushColor,this)),this._opacityStrip=new x(this._domNode,this.model,o),this._register(this._opacityStrip),this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this._opacityStrip.onColorFlushed(this.flushColor,this)),this._hueStrip=new L(this._domNode,this.model,o),this._register(this._hueStrip),this._register(this._hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this._hueStrip.onColorFlushed(this.flushColor,this)),o&&(this._insertButton=this._register(new A(this._domNode)),this._domNode.classList.add("standalone-colorpicker"))}flushColor(){this.model.flushColor()}onDidSaturationValueChange(e){let{s:t,v:i}=e;const o=this.model.color.hsva;this.model.color=new s.Q1(new s.$J(o.h,t,i,o.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new s.Q1(new s.$J(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,i=360*(1-e);this.model.color=new s.Q1(new s.$J(360===i?0:i,t.s,t.v,t.a))}get domNode(){return this._domNode}get saturationBox(){return this._saturationBox}get enterButton(){return this._insertButton}layout(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()}}class P extends r.jG{constructor(e,t,i){super(),this.model=t,this.pixelRatio=i,this._onDidChange=new c.vl,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new c.vl,this.onColorFlushed=this._onColorFlushed.event,this._domNode=y(".saturation-wrap"),g.BC(e,this._domNode),this._canvas=document.createElement("canvas"),this._canvas.className="saturation-box",g.BC(this._domNode,this._canvas),this.selection=y(".saturation-selection"),g.BC(this._domNode,this.selection),this.layout(),this._register(g.ko(this._domNode,g.Bx.POINTER_DOWN,(e=>this.onPointerDown(e)))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}get domNode(){return this._domNode}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;this.monitor=this._register(new p._);const t=g.BK(this._domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,(e=>this.onDidChangePosition(e.pageX-t.left,e.pageY-t.top)),(()=>null));const i=g.ko(e.target.ownerDocument,g.Bx.POINTER_UP,(()=>{this._onColorFlushed.fire(),i.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)}),!0)}onDidChangePosition(e,t){const i=Math.max(0,Math.min(1,e/this.width)),o=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(i,o),this._onDidChange.fire({s:i,v:o})}layout(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new s.Q1(new s.$J(e.h,1,1,1)),i=this._canvas.getContext("2d"),o=i.createLinearGradient(0,0,this._canvas.width,0);o.addColorStop(0,"rgba(255, 255, 255, 1)"),o.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),o.addColorStop(1,"rgba(255, 255, 255, 0)");const n=i.createLinearGradient(0,0,0,this._canvas.height);n.addColorStop(0,"rgba(0, 0, 0, 0)"),n.addColorStop(1,"rgba(0, 0, 0, 1)"),i.rect(0,0,this._canvas.width,this._canvas.height),i.fillStyle=s.Q1.Format.CSS.format(t),i.fill(),i.fillStyle=o,i.fill(),i.fillStyle=n,i.fill()}paintSelection(e,t){this.selection.style.left="".concat(e*this.width,"px"),this.selection.style.top="".concat(this.height-t*this.height,"px")}onDidChangeColor(e){if(this.monitor&&this.monitor.isMonitoring())return;this.paint();const t=e.hsva;this.paintSelection(t.s,t.v)}}class D extends r.jG{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.model=t,this._onDidChange=new c.vl,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new c.vl,this.onColorFlushed=this._onColorFlushed.event,i?(this.domNode=g.BC(e,y(".standalone-strip")),this.overlay=g.BC(this.domNode,y(".standalone-overlay"))):(this.domNode=g.BC(e,y(".strip")),this.overlay=g.BC(this.domNode,y(".overlay"))),this.slider=g.BC(this.domNode,y(".slider")),this.slider.style.top="0px",this._register(g.ko(this.domNode,g.Bx.POINTER_DOWN,(e=>this.onPointerDown(e)))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onDidChangeColor(e){const t=this.getValue(e);this.updateSliderPosition(t)}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._register(new p._),i=g.BK(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.pointerId,e.buttons,(e=>this.onDidChangeTop(e.pageY-i.top)),(()=>null));const o=g.ko(e.target.ownerDocument,g.Bx.POINTER_UP,(()=>{this._onColorFlushed.fire(),o.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")}),!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top="".concat((1-e)*this.height,"px")}}class x extends D{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.domNode.classList.add("opacity-strip"),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){super.onDidChangeColor(e);const{r:t,g:i,b:o}=e.rgba,n=new s.Q1(new s.bU(t,i,o,1)),r=new s.Q1(new s.bU(t,i,o,0));this.overlay.style.background="linear-gradient(to bottom, ".concat(n," 0%, ").concat(r," 100%)")}getValue(e){return e.hsva.a}}class L extends D{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class A extends r.jG{constructor(e){super(),this._onClicked=this._register(new c.vl),this.onClicked=this._onClicked.event,this._button=g.BC(e,document.createElement("button")),this._button.classList.add("insert-button"),this._button.textContent="Insert",this._register(g.ko(this._button,g.Bx.CLICK,(()=>{this._onClicked.fire()})))}get button(){return this._button}}class I extends m.x{constructor(e,t,i,o){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.model=t,this.pixelRatio=i,this._register(u.c.getInstance(g.zk(e)).onDidChange((()=>this.layout())));const s=y(".colorpicker-widget");e.appendChild(s),this.header=this._register(new k(s,this.model,o,n)),this.body=this._register(new S(s,this.model,this.pixelRatio,n))}layout(){this.body.layout()}}var M=i(19700),N=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},E=function(e,t){return function(i,o){t(i,o,e)}};class O{constructor(e,t,i,o){this.owner=e,this.range=t,this.model=i,this.provider=o,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let R=class{constructor(e,t){this._editor=e,this._themeService=t,this.hoverOrdinal=2}computeSync(e,t){return[]}computeAsync(e,t,i){return o.AE.fromPromise(this._computeAsync(e,t,i))}async _computeAsync(e,t,i){if(!this._editor.hasModel())return[];const o=l.mn.get(this._editor);if(!o)return[];for(const n of t){if(!o.isColorDecoration(n))continue;const e=o.getColorData(n.range.getStartPosition());if(e){return[await B(this,this._editor.getModel(),e.colorInfo,e.provider)]}}return[]}renderHoverParts(e,t){return W(this,this._editor,this._themeService,t,e)}};R=N([E(1,M.Gy)],R);class T{constructor(e,t,i,o){this.owner=e,this.range=t,this.model=i,this.provider=o}}let F=class{constructor(e,t){this._editor=e,this._themeService=t,this._color=null}async createColorHover(e,t,i){if(!this._editor.hasModel())return null;if(!l.mn.get(this._editor))return null;const o=await(0,d.j)(i,this._editor.getModel(),n.XO.None);let s=null,r=null;for(const n of o){const t=n.colorInfo;a.Q.containsRange(t.range,e.range)&&(s=t,r=n.provider)}const c=null!==s&&void 0!==s?s:e,h=null!==r&&void 0!==r?r:t,u=!!s;return{colorHover:await B(this,this._editor.getModel(),c,h),foundInEditor:u}}async updateEditorModel(e){if(!this._editor.hasModel())return;const t=e.model;let i=new a.Q(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn);this._color&&(await Q(this._editor.getModel(),t,this._color,i,e),i=j(this._editor,i,t))}renderHoverParts(e,t){return W(this,this._editor,this._themeService,t,e)}set color(e){this._color=e}get color(){return this._color}};async function B(e,t,i,o){const r=t.getValueInRange(i.range),{red:l,green:c,blue:u,alpha:g}=i.color,p=new s.bU(Math.round(255*l),Math.round(255*c),Math.round(255*u),g),m=new s.Q1(p),_=await(0,d.R)(t,i,o,n.XO.None),f=new h(m,[],0);return f.colorPresentations=_||[],f.guessColorPresentation(m,r),e instanceof R?new O(e,a.Q.lift(i.range),f,o):new T(e,a.Q.lift(i.range),f,o)}function W(e,t,i,o,n){if(0===o.length||!t.hasModel())return r.jG.None;if(n.setMinimumDimensions){const e=t.getOption(67)+8;n.setMinimumDimensions(new g.fg(302,e))}const s=new r.Cm,d=o[0],l=t.getModel(),c=d.model,h=s.add(new I(n.fragment,c,t.getOption(143),i,e instanceof F));n.setColorPicker(h);let u=!1,p=new a.Q(d.range.startLineNumber,d.range.startColumn,d.range.endLineNumber,d.range.endColumn);if(e instanceof F){const t=o[0].model.color;e.color=t,Q(l,c,t,p,d),s.add(c.onColorFlushed((t=>{e.color=t})))}else s.add(c.onColorFlushed((async e=>{await Q(l,c,e,p,d),u=!0,p=j(t,p,c)})));return s.add(c.onDidChangeColor((e=>{Q(l,c,e,p,d)}))),s.add(t.onDidChangeModelContent((e=>{u?u=!1:(n.hide(),t.focus())}))),s}function j(e,t,i){var o,n;const s=[],r=null!==(o=i.presentation.textEdit)&&void 0!==o?o:{range:t,text:i.presentation.label,forceMoveMarkers:!1};s.push(r),i.presentation.additionalTextEdits&&s.push(...i.presentation.additionalTextEdits);const d=a.Q.lift(r.range),l=e.getModel()._setTrackedRange(null,d,3);return e.executeEdits("colorpicker",s),e.pushUndoStop(),null!==(n=e.getModel()._getTrackedRange(l))&&void 0!==n?n:d}async function Q(e,t,i,o,s){const r=await(0,d.R)(e,{range:o,color:{red:i.rgba.r/255,green:i.rgba.g/255,blue:i.rgba.b/255,alpha:i.rgba.a}},s.provider,n.XO.None);t.colorPresentations=r||[]}F=N([E(1,M.Gy)],F)},6355:(e,t,i)=>{i.d(t,{L:()=>u});var o=i(57397),n=i(91740),s=i(21950),r=i(80158),a=i(87766),d=i(63910),l=i(37690),c=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},h=function(e,t){return function(i,o){t(i,o,e)}};class u{constructor(e,t){this._editorWorkerClient=new n.Z6(e,!1,"editorWorkerService",t)}async provideDocumentColors(e,t){return this._editorWorkerClient.computeDefaultDocumentColors(e.uri)}provideColorPresentations(e,t,i){const n=t.range,s=t.color,r=s.alpha,a=new o.Q1(new o.bU(Math.round(255*s.red),Math.round(255*s.green),Math.round(255*s.blue),r)),d=r?o.Q1.Format.CSS.formatRGB(a):o.Q1.Format.CSS.formatRGBA(a),l=r?o.Q1.Format.CSS.formatHSL(a):o.Q1.Format.CSS.formatHSLA(a),c=r?o.Q1.Format.CSS.formatHex(a):o.Q1.Format.CSS.formatHexA(a),h=[];return h.push({label:d,textEdit:{range:n,text:d}}),h.push({label:l,textEdit:{range:n,text:l}}),h.push({label:c,textEdit:{range:n,text:c}}),h}}let g=class extends a.jG{constructor(e,t,i){super(),this._register(i.colorProvider.register("*",new u(e,t)))}};g=c([h(0,s.S),h(1,r.JZ),h(2,d.u)],g),(0,l.x)(g)},93160:(e,t,i)=>{var o,n,s=i(30050),r=i(51413),a=i(87766),d=i(48455),l=i(39263),c=i(30142),h=i(16391),u=i(48250),g=i(63910),p=i(72330),m=i(39686),_=i(21950),f=i(80158),v=i(6355),C=i(32605),b=(i(93778),function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}),y=function(e,t){return function(i,o){t(i,o,e)}};let k=o=class extends a.jG{constructor(e,t,i,o,n,s,r){super(),this._editor=e,this._modelService=i,this._keybindingService=o,this._instantiationService=n,this._languageFeatureService=s,this._languageConfigurationService=r,this._standaloneColorPickerWidget=null,this._standaloneColorPickerVisible=p.R.standaloneColorPickerVisible.bindTo(t),this._standaloneColorPickerFocused=p.R.standaloneColorPickerFocused.bindTo(t)}showOrFocus(){var e;this._editor.hasModel()&&(this._standaloneColorPickerVisible.get()?this._standaloneColorPickerFocused.get()||null===(e=this._standaloneColorPickerWidget)||void 0===e||e.focus():this._standaloneColorPickerWidget=new w(this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused,this._instantiationService,this._modelService,this._keybindingService,this._languageFeatureService,this._languageConfigurationService))}hide(){var e;this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),null===(e=this._standaloneColorPickerWidget)||void 0===e||e.hide(),this._editor.focus()}insertColor(){var e;null===(e=this._standaloneColorPickerWidget)||void 0===e||e.updateEditor(),this.hide()}static get(e){return e.getContribution(o.ID)}};k.ID="editor.contrib.standaloneColorPickerController",k=o=b([y(1,m.fN),y(2,_.S),y(3,h.b),y(4,l._Y),y(5,g.u),y(6,f.JZ)],k),(0,s.HW)(k.ID,k,1);let w=n=class extends a.jG{constructor(e,t,i,o,n,s,r,a){var l;super(),this._editor=e,this._standaloneColorPickerVisible=t,this._standaloneColorPickerFocused=i,this._modelService=n,this._keybindingService=s,this._languageFeaturesService=r,this._languageConfigurationService=a,this.allowEditorOverflow=!0,this._position=void 0,this._body=document.createElement("div"),this._colorHover=null,this._selectionSetInEditor=!1,this._onResult=this._register(new u.vl),this.onResult=this._onResult.event,this._standaloneColorPickerVisible.set(!0),this._standaloneColorPickerParticipant=o.createInstance(d.WE,this._editor),this._position=null===(l=this._editor._getViewModel())||void 0===l?void 0:l.getPrimaryCursorState().modelState.position;const c=this._editor.getSelection(),h=c?{startLineNumber:c.startLineNumber,startColumn:c.startColumn,endLineNumber:c.endLineNumber,endColumn:c.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},g=this._register(C.w5(this._body));this._register(g.onDidBlur((e=>{this.hide()}))),this._register(g.onDidFocus((e=>{this.focus()}))),this._register(this._editor.onDidChangeCursorPosition((()=>{this._selectionSetInEditor?this._selectionSetInEditor=!1:this.hide()}))),this._register(this._editor.onMouseMove((e=>{var t;const i=null===(t=e.target.element)||void 0===t?void 0:t.classList;i&&i.contains("colorpicker-color-decoration")&&this.hide()}))),this._register(this.onResult((e=>{this._render(e.value,e.foundInEditor)}))),this._start(h),this._body.style.zIndex="50",this._editor.addContentWidget(this)}updateEditor(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)}getId(){return n.ID}getDomNode(){return this._body}getPosition(){if(!this._position)return null;const e=this._editor.getOption(60).above;return{position:this._position,secondaryPosition:this._position,preference:e?[1,2]:[2,1],positionAffinity:2}}hide(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()}focus(){this._standaloneColorPickerFocused.set(!0),this._body.focus()}async _start(e){const t=await this._computeAsync(e);t&&this._onResult.fire(new S(t.result,t.foundInEditor))}async _computeAsync(e){if(!this._editor.hasModel())return null;const t={range:e,color:{red:0,green:0,blue:0,alpha:1}},i=await this._standaloneColorPickerParticipant.createColorHover(t,new v.L(this._modelService,this._languageConfigurationService),this._languageFeaturesService.colorProvider);return i?{result:i.colorHover,foundInEditor:i.foundInEditor}:null}_render(e,t){const i=document.createDocumentFragment();let o;const n={fragment:i,statusBar:this._register(new c.L(this._keybindingService)),setColorPicker:e=>o=e,onContentsChanged:()=>{},hide:()=>this.hide()};if(this._colorHover=e,this._register(this._standaloneColorPickerParticipant.renderHoverParts(n,[e])),void 0===o)return;this._body.classList.add("standalone-colorpicker-body"),this._body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+"px",this._body.style.maxWidth=Math.max(.66*this._editor.getLayoutInfo().width,500)+"px",this._body.tabIndex=0,this._body.appendChild(i),o.layout();const s=o.body,r=s.saturationBox.domNode.clientWidth,a=s.domNode.clientWidth-r-22-8,d=o.body.enterButton;null===d||void 0===d||d.onClicked((()=>{this.updateEditor(),this.hide()}));const l=o.header;l.pickedColorNode.style.width=r+8+"px";l.originalColorNode.style.width=a+"px";const h=o.header.closeButton;null===h||void 0===h||h.onClicked((()=>{this.hide()})),t&&(d&&(d.button.textContent="Replace"),this._selectionSetInEditor=!0,this._editor.setSelection(e.range)),this._editor.layoutContentWidget(this)}};w.ID="editor.contrib.standaloneColorPickerWidget",w=n=b([y(3,l._Y),y(4,_.S),y(5,h.b),y(6,g.u),y(7,f.JZ)],w);class S{constructor(e,t){this.value=e,this.foundInEditor=t}}var P=i(35155);class D extends s.qO{constructor(){super({id:"editor.action.showOrFocusStandaloneColorPicker",title:{...(0,r.aS)("showOrFocusStandaloneColorPicker","Show or Focus Standalone Color Picker"),mnemonicTitle:(0,r.kg)({key:"mishowOrFocusStandaloneColorPicker",comment:["&& denotes a mnemonic"]},"&&Show or Focus Standalone Color Picker")},precondition:void 0,menu:[{id:P.D8.CommandPalette}],metadata:{description:(0,r.aS)("showOrFocusStandaloneColorPickerDescription","Show or focus a standalone color picker which uses the default color provider. It displays hex/rgb/hsl colors.")}})}runEditorCommand(e,t){var i;null===(i=k.get(t))||void 0===i||i.showOrFocus()}}class x extends s.ks{constructor(){super({id:"editor.action.hideColorPicker",label:(0,r.kg)({key:"hideColorPicker",comment:["Action that hides the color picker"]},"Hide the Color Picker"),alias:"Hide the Color Picker",precondition:p.R.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100},metadata:{description:(0,r.aS)("hideColorPickerDescription","Hide the standalone color picker.")}})}run(e,t){var i;null===(i=k.get(t))||void 0===i||i.hide()}}class L extends s.ks{constructor(){super({id:"editor.action.insertColorWithStandaloneColorPicker",label:(0,r.kg)({key:"insertColorWithStandaloneColorPicker",comment:["Action that inserts color with standalone color picker"]},"Insert Color with Standalone Color Picker"),alias:"Insert Color with Standalone Color Picker",precondition:p.R.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100},metadata:{description:(0,r.aS)("insertColorWithStandaloneColorPickerDescription","Insert hex/rgb/hsl colors with the focused standalone color picker.")}})}run(e,t){var i;null===(i=k.get(t))||void 0===i||i.insertColor()}}(0,s.Fl)(x),(0,s.Fl)(L),(0,P.ug)(D)},4973:(e,t,i)=>{var o=i(57443),n=i(30050),s=i(99005),r=i(72330),a=i(80158),d=i(94597),l=i(23525),c=i(5190);class h{constructor(e,t,i){this.languageConfigurationService=i,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,i){if(i<0)return!1;const o=t.length;if(i+o>e.length)return!1;for(let n=0;n<o;n++){const o=e.charCodeAt(i+n),s=t.charCodeAt(n);if(o!==s&&(!(o>=65&&o<=90&&o+32===s)&&!(s>=65&&s<=90&&s+32===o)))return!1}return!0}_createOperationsForBlockComment(e,t,i,o,n,r){const a=e.startLineNumber,d=e.startColumn,l=e.endLineNumber,c=e.endColumn,u=n.getLineContent(a),g=n.getLineContent(l);let p,m=u.lastIndexOf(t,d-1+t.length),_=g.indexOf(i,c-1-i.length);if(-1!==m&&-1!==_)if(a===l){u.substring(m+t.length,_).indexOf(i)>=0&&(m=-1,_=-1)}else{const e=u.substring(m+t.length),o=g.substring(0,_);(e.indexOf(i)>=0||o.indexOf(i)>=0)&&(m=-1,_=-1)}-1!==m&&-1!==_?(o&&m+t.length<u.length&&32===u.charCodeAt(m+t.length)&&(t+=" "),o&&_>0&&32===g.charCodeAt(_-1)&&(i=" "+i,_-=1),p=h._createRemoveBlockCommentOperations(new s.Q(a,m+t.length+1,l,_+1),t,i)):(p=h._createAddBlockCommentOperations(e,t,i,this._insertSpace),this._usedEndToken=1===p.length?i:null);for(const s of p)r.addTrackedEditOperation(s.range,s.text)}static _createRemoveBlockCommentOperations(e,t,i){const o=[];return s.Q.isEmpty(e)?o.push(d.k.delete(new s.Q(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+i.length))):(o.push(d.k.delete(new s.Q(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),o.push(d.k.delete(new s.Q(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+i.length)))),o}static _createAddBlockCommentOperations(e,t,i,o){const n=[];return s.Q.isEmpty(e)?n.push(d.k.replace(new s.Q(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+i)):(n.push(d.k.insert(new l.y(e.startLineNumber,e.startColumn),t+(o?" ":""))),n.push(d.k.insert(new l.y(e.endLineNumber,e.endColumn),(o?" ":"")+i))),n}getEditOperations(e,t){const i=this._selection.startLineNumber,o=this._selection.startColumn;e.tokenization.tokenizeIfCheap(i);const n=e.getLanguageIdAtPosition(i,o),s=this.languageConfigurationService.getLanguageConfiguration(n).comments;s&&s.blockCommentStartToken&&s.blockCommentEndToken&&this._createOperationsForBlockComment(this._selection,s.blockCommentStartToken,s.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const i=t.getInverseEditOperations();if(2===i.length){const e=i[0],t=i[1];return new c.L(e.range.endLineNumber,e.range.endColumn,t.range.startLineNumber,t.range.startColumn)}{const e=i[0].range,t=this._usedEndToken?-this._usedEndToken.length-1:0;return new c.L(e.endLineNumber,e.endColumn+t,e.endLineNumber,e.endColumn+t)}}}var u=i(12780);class g{constructor(e,t,i,o,n,s,r){this.languageConfigurationService=e,this._selection=t,this._indentSize=i,this._type=o,this._insertSpace=n,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=s,this._ignoreFirstLine=r||!1}static _gatherPreflightCommentStrings(e,t,i,o){e.tokenization.tokenizeIfCheap(t);const n=e.getLanguageIdAtPosition(t,1),s=o.getLanguageConfiguration(n).comments,r=s?s.lineCommentToken:null;if(!r)return null;const a=[];for(let d=0,l=i-t+1;d<l;d++)a[d]={ignore:!1,commentStr:r,commentStrOffset:0,commentStrLength:r.length};return a}static _analyzeLines(e,t,i,o,n,s,r,a){let d,l=!0;d=0===e||1!==e;for(let c=0,g=o.length;c<g;c++){const a=o[c],g=n+c;if(g===n&&r){a.ignore=!0;continue}const p=i.getLineContent(g),m=u.HG(p);if(-1!==m){if(l=!1,a.ignore=!1,a.commentStrOffset=m,d&&!h._haystackHasNeedleAtOffset(p,a.commentStr,m)&&(0===e?d=!1:1===e||(a.ignore=!0)),d&&t){const e=m+a.commentStrLength;e<p.length&&32===p.charCodeAt(e)&&(a.commentStrLength+=1)}}else a.ignore=s,a.commentStrOffset=p.length}if(0===e&&l){d=!1;for(let e=0,t=o.length;e<t;e++)o[e].ignore=!1}return{supported:!0,shouldRemoveComments:d,lines:o}}static _gatherPreflightData(e,t,i,o,n,s,r,a){const d=g._gatherPreflightCommentStrings(i,o,n,a);return null===d?{supported:!1}:g._analyzeLines(e,t,i,d,o,s,r,a)}_executeLineComments(e,t,i,o){let n;i.shouldRemoveComments?n=g._createRemoveLineCommentsOperations(i.lines,o.startLineNumber):(g._normalizeInsertionPoint(e,i.lines,o.startLineNumber,this._indentSize),n=this._createAddLineCommentsOperations(i.lines,o.startLineNumber));const r=new l.y(o.positionLineNumber,o.positionColumn);for(let a=0,d=n.length;a<d;a++)if(t.addEditOperation(n[a].range,n[a].text),s.Q.isEmpty(n[a].range)&&s.Q.getStartPosition(n[a].range).equals(r)){e.getLineContent(r.lineNumber).length+1===r.column&&(this._deltaColumn=(n[a].text||"").length)}this._selectionId=t.trackSelection(o)}_attemptRemoveBlockComment(e,t,i,o){let n=t.startLineNumber,r=t.endLineNumber;const a=o.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn);let d=e.getLineContent(n).lastIndexOf(i,a-1),l=e.getLineContent(r).indexOf(o,t.endColumn-1-i.length);return-1!==d&&-1===l&&(l=e.getLineContent(n).indexOf(o,d+i.length),r=n),-1===d&&-1!==l&&(d=e.getLineContent(r).lastIndexOf(i,l),n=r),!t.isEmpty()||-1!==d&&-1!==l||(d=e.getLineContent(n).indexOf(i),-1!==d&&(l=e.getLineContent(n).indexOf(o,d+i.length))),-1!==d&&32===e.getLineContent(n).charCodeAt(d+i.length)&&(i+=" "),-1!==l&&32===e.getLineContent(r).charCodeAt(l-1)&&(o=" "+o,l-=1),-1!==d&&-1!==l?h._createRemoveBlockCommentOperations(new s.Q(n,d+i.length+1,r,l+1),i,o):null}_executeBlockComment(e,t,i){e.tokenization.tokenizeIfCheap(i.startLineNumber);const o=e.getLanguageIdAtPosition(i.startLineNumber,1),n=this.languageConfigurationService.getLanguageConfiguration(o).comments;if(!n||!n.blockCommentStartToken||!n.blockCommentEndToken)return;const r=n.blockCommentStartToken,a=n.blockCommentEndToken;let d=this._attemptRemoveBlockComment(e,i,r,a);if(!d){if(i.isEmpty()){const t=e.getLineContent(i.startLineNumber);let o=u.HG(t);-1===o&&(o=t.length),d=h._createAddBlockCommentOperations(new s.Q(i.startLineNumber,o+1,i.startLineNumber,t.length+1),r,a,this._insertSpace)}else d=h._createAddBlockCommentOperations(new s.Q(i.startLineNumber,e.getLineFirstNonWhitespaceColumn(i.startLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),r,a,this._insertSpace);1===d.length&&(this._deltaColumn=r.length+1)}this._selectionId=t.trackSelection(i);for(const s of d)t.addEditOperation(s.range,s.text)}getEditOperations(e,t){let i=this._selection;if(this._moveEndPositionDown=!1,i.startLineNumber===i.endLineNumber&&this._ignoreFirstLine)return t.addEditOperation(new s.Q(i.startLineNumber,e.getLineMaxColumn(i.startLineNumber),i.startLineNumber+1,1),i.startLineNumber===e.getLineCount()?"":"\n"),void(this._selectionId=t.trackSelection(i));i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const o=g._gatherPreflightData(this._type,this._insertSpace,e,i.startLineNumber,i.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return o.supported?this._executeLineComments(e,t,o,i):this._executeBlockComment(e,t,i)}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),new c.L(i.selectionStartLineNumber,i.selectionStartColumn+this._deltaColumn,i.positionLineNumber,i.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){const i=[];for(let o=0,n=e.length;o<n;o++){const n=e[o];n.ignore||i.push(d.k.delete(new s.Q(t+o,n.commentStrOffset+1,t+o,n.commentStrOffset+n.commentStrLength+1)))}return i}_createAddLineCommentsOperations(e,t){const i=[],o=this._insertSpace?" ":"";for(let n=0,s=e.length;n<s;n++){const s=e[n];s.ignore||i.push(d.k.insert(new l.y(t+n,s.commentStrOffset+1),s.commentStr+o))}return i}static nextVisibleColumn(e,t,i,o){return i?e+(t-e%t):e+o}static _normalizeInsertionPoint(e,t,i,o){let n,s,r=1073741824;for(let a=0,d=t.length;a<d;a++){if(t[a].ignore)continue;const n=e.getLineContent(i+a);let s=0;for(let e=0,i=t[a].commentStrOffset;s<r&&e<i;e++)s=g.nextVisibleColumn(s,o,9===n.charCodeAt(e),1);s<r&&(r=s)}r=Math.floor(r/o)*o;for(let a=0,d=t.length;a<d;a++){if(t[a].ignore)continue;const d=e.getLineContent(i+a);let l=0;for(n=0,s=t[a].commentStrOffset;l<r&&n<s;n++)l=g.nextVisibleColumn(l,o,9===d.charCodeAt(n),1);t[a].commentStrOffset=l>r?n-1:n}}}var p=i(51413),m=i(35155);class _ extends n.ks{constructor(e,t){super(t),this._type=e}run(e,t){const i=e.get(a.JZ);if(!t.hasModel())return;const o=[],n=t.getModel().getOptions(),r=t.getOption(23),d=t.getSelections().map(((e,t)=>({selection:e,index:t,ignoreFirstLine:!1})));d.sort(((e,t)=>s.Q.compareRangesUsingStarts(e.selection,t.selection)));let l=d[0];for(let s=1;s<d.length;s++){const e=d[s];l.selection.endLineNumber===e.selection.startLineNumber&&(l.index<e.index?e.ignoreFirstLine=!0:(l.ignoreFirstLine=!0,l=e))}for(const s of d)o.push(new g(i,s.selection,n.indentSize,this._type,r.insertSpace,r.ignoreEmptyLines,s.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class f extends n.ks{constructor(){super({id:"editor.action.blockComment",label:p.kg("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:r.R.writable,kbOpts:{kbExpr:r.R.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:m.D8.MenubarEditMenu,group:"5_insert",title:p.kg({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){const i=e.get(a.JZ);if(!t.hasModel())return;const o=t.getOption(23),n=[],s=t.getSelections();for(const r of s)n.push(new h(r,o.insertSpace,i));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}(0,n.Fl)(class extends _{constructor(){super(0,{id:"editor.action.commentLine",label:p.kg("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:r.R.writable,kbOpts:{kbExpr:r.R.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:m.D8.MenubarEditMenu,group:"5_insert",title:p.kg({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}),(0,n.Fl)(class extends _{constructor(){super(1,{id:"editor.action.addCommentLine",label:p.kg("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:r.R.writable,kbOpts:{kbExpr:r.R.editorTextFocus,primary:(0,o.m5)(2089,2081),weight:100}})}}),(0,n.Fl)(class extends _{constructor(){super(2,{id:"editor.action.removeCommentLine",label:p.kg("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:r.R.writable,kbOpts:{kbExpr:r.R.editorTextFocus,primary:(0,o.m5)(2089,2099),weight:100}})}}),(0,n.Fl)(f)},60232:(e,t,i)=>{var o,n=i(32605),s=i(92593),r=i(63169),a=i(87766),d=i(66731),l=i(30050),c=i(72330),h=i(51413),u=i(35155),g=i(39686),p=i(6748),m=i(16391),_=i(66457),f=i(77699),v=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},C=function(e,t){return function(i,o){t(i,o,e)}};let b=o=class{static get(e){return e.getContribution(o.ID)}constructor(e,t,i,o,s,r,d,l){this._contextMenuService=t,this._contextViewService=i,this._contextKeyService=o,this._keybindingService=s,this._menuService=r,this._configurationService=d,this._workspaceContextService=l,this._toDispose=new a.Cm,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu((e=>this._onContextMenu(e)))),this._toDispose.add(this._editor.onMouseWheel((e=>{if(this._contextMenuIsBeingShownCount>0){const t=this._contextViewService.getContextViewElement(),i=e.srcElement;i.shadowRoot&&n.jG(t)===i.shadowRoot||this._contextViewService.hideContextView()}}))),this._toDispose.add(this._editor.onKeyDown((e=>{this._editor.getOption(24)&&58===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.showContextMenu())})))}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(24))return this._editor.focus(),void(e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position));if(12===e.target.type)return;if(6===e.target.type&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),11===e.target.type)return this._showScrollbarContextMenu(e.event);if(6!==e.target.type&&7!==e.target.type&&1!==e.target.type)return;if(this._editor.focus(),e.target.position){let t=!1;for(const i of this._editor.getSelections())if(i.containsPosition(e.target.position)){t=!0;break}t||this._editor.setPosition(e.target.position)}let t=null;1!==e.target.type&&(t=e.event),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(24))return;if(!this._editor.hasModel())return;const t=this._getMenuActions(this._editor.getModel(),this._editor.contextMenuId);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const i=[],o=this._menuService.createMenu(t,this._contextKeyService),n=o.getActions({arg:e.uri});o.dispose();for(const s of n){const[,t]=s;let o=0;for(const n of t)if(n instanceof u.nI){const t=this._getMenuActions(e,n.item.submenu);t.length>0&&(i.push(new r.YH(n.id,n.label,t)),o++)}else i.push(n),o++;o&&i.push(new r.wv)}return i.length&&i.pop(),i}_doShowContextMenu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this._editor.hasModel())return;const i=this._editor.getOption(60);this._editor.updateOptions({hover:{enabled:!1}});let o=t;if(!o){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const e=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),t=n.BK(this._editor.getDomNode()),i=t.left+e.left,s=t.top+e.top+e.height;o={x:i,y:s}}const r=this._editor.getOption(127)&&!d.un;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:r?this._editor.getDomNode():void 0,getAnchor:()=>o,getActions:()=>e,getActionViewItem:e=>{const t=this._keybindingFor(e);if(t)return new s.Z4(e,e,{label:!0,keybinding:t.getLabel(),isMenu:!0});const i=e;return"function"===typeof i.getActionViewItem?i.getActionViewItem():new s.Z4(e,e,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:e=>this._keybindingFor(e),onHide:e=>{this._contextMenuIsBeingShownCount--,this._editor.updateOptions({hover:i})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel())return;if((0,f.ct)(this._workspaceContextService.getWorkspace()))return;const t=this._editor.getOption(73);let i=0;const o=e=>({id:"menu-action-".concat(++i),label:e.label,tooltip:"",class:void 0,enabled:"undefined"===typeof e.enabled||e.enabled,checked:e.checked,run:e.run}),n=(e,t,n,s,a)=>{if(!t)return o({label:e,enabled:t,run:()=>{}});const d=e=>()=>{this._configurationService.updateValue(n,e)},l=[];for(const i of a)l.push(o({label:i.label,checked:s===i.value,run:d(i.value)}));return((e,t)=>new r.YH("menu-action-".concat(++i),e,t,void 0))(e,l)},s=[];s.push(o({label:h.kg("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),s.push(new r.wv),s.push(o({label:h.kg("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),s.push(n(h.kg("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:h.kg("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:h.kg("context.minimap.size.fill","Fill"),value:"fill"},{label:h.kg("context.minimap.size.fit","Fit"),value:"fit"}])),s.push(n(h.kg("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:h.kg("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:h.kg("context.minimap.slider.always","Always"),value:"always"}]));const a=this._editor.getOption(127)&&!d.un;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:a?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>s,onHide:e=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};b.ID="editor.contrib.contextmenu",b=o=v([C(1,p.Z),C(2,p.l),C(3,g.fN),C(4,m.b),C(5,u.ez),C(6,_.pG),C(7,f.VR)],b);class y extends l.ks{constructor(){super({id:"editor.action.showContextMenu",label:h.kg("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:c.R.textInputFocus,primary:1092,weight:100}})}run(e,t){var i;null===(i=b.get(t))||void 0===i||i.showContextMenu()}}(0,l.HW)(b.ID,b,2),(0,l.Fl)(y)},11996:(e,t,i)=>{var o=i(87766),n=i(30050),s=i(72330),r=i(51413);class a{constructor(e){this.selections=e}equals(e){const t=this.selections.length;if(t!==e.selections.length)return!1;for(let i=0;i<t;i++)if(!this.selections[i].equalsSelection(e.selections[i]))return!1;return!0}}class d{constructor(e,t,i){this.cursorState=e,this.scrollTop=t,this.scrollLeft=i}}class l extends o.jG{static get(e){return e.getContribution(l.ID)}constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel((e=>{this._undoStack=[],this._redoStack=[]}))),this._register(e.onDidChangeModelContent((e=>{this._undoStack=[],this._redoStack=[]}))),this._register(e.onDidChangeCursorSelection((t=>{if(this._isCursorUndoRedo)return;if(!t.oldSelections)return;if(t.oldModelVersionId!==t.modelVersionId)return;const i=new a(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(i)||(this._undoStack.push(new d(i,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())})))}cursorUndo(){this._editor.hasModel()&&0!==this._undoStack.length&&(this._redoStack.push(new d(new a(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){this._editor.hasModel()&&0!==this._redoStack.length&&(this._undoStack.push(new d(new a(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}l.ID="editor.contrib.cursorUndoRedoController";class c extends n.ks{constructor(){super({id:"cursorUndo",label:r.kg("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:s.R.textInputFocus,primary:2099,weight:100}})}run(e,t,i){var o;null===(o=l.get(t))||void 0===o||o.cursorUndo()}}class h extends n.ks{constructor(){super({id:"cursorRedo",label:r.kg("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,i){var o;null===(o=l.get(t))||void 0===o||o.cursorRedo()}}(0,n.HW)(l.ID,l,0),(0,n.Fl)(c),(0,n.Fl)(h)},72424:(e,t,i)=>{var o=i(61498),n=i(2698),s=i(35821),r=i(69272),a=i(63910),d=i(28247),l=i(87766),c=i(48250),h=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},u=function(e,t){return function(i,o){t(i,o,e)}};let g=class extends l.jG{constructor(e,t,i){super(),this._textModel=e,this._languageFeaturesService=t,this._outlineModelService=i,this._currentModel=(0,n.FY)(this,void 0);const o=(0,n.yQ)("documentSymbolProvider.onDidChange",this._languageFeaturesService.documentSymbolProvider.onDidChange),s=(0,n.yQ)("_textModel.onDidChangeContent",c.Jh.debounce((e=>this._textModel.onDidChangeContent(e)),(()=>{}),100));this._register((0,n.yC)((async(e,t)=>{o.read(e),s.read(e);const i=t.add(new r.MZ),n=await this._outlineModelService.getOrCreate(this._textModel,i.token);t.isDisposed||this._currentModel.set(n,void 0)})))}getBreadcrumbItems(e,t){const i=this._currentModel.read(t);if(!i)return[];const n=i.asListOfDocumentSymbols().filter((t=>e.contains(t.range.startLineNumber)&&!e.contains(t.range.endLineNumber)));return n.sort((0,o.Hw)((0,o.VE)((e=>e.range.endLineNumber-e.range.startLineNumber),o.U9))),n.map((e=>({name:e.name,kind:e.kind,startLineNumber:e.range.startLineNumber})))}};g=h([u(1,a.u),u(2,d.gW)],g),s.N.setBreadcrumbsSourceFactory(((e,t)=>t.createInstance(g,e)))},7342:(e,t,i)=>{var o=i(87766),n=i(66731),s=i(30050),r=i(23525),a=i(99005),d=i(5190),l=i(15739);class c{constructor(e,t,i){this.selection=e,this.targetPosition=t,this.copy=i,this.targetSelection=null}getEditOperations(e,t){const i=e.getValueInRange(this.selection);this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new a.Q(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),i),!this.selection.containsPosition(this.targetPosition)||this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition))?this.copy?this.targetSelection=new d.L(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber>this.selection.endLineNumber?this.targetSelection=new d.L(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber<this.selection.endLineNumber?this.targetSelection=new d.L(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new d.L(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,(this.selection.startLineNumber,this.selection.endLineNumber,this.targetPosition.column-this.selection.endColumn+this.selection.startColumn),this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new d.L(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn):this.targetSelection=this.selection}computeCursorState(e,t){return this.targetSelection}}function h(e){return n.zx?e.altKey:e.ctrlKey}class u extends o.jG{constructor(e){super(),this._editor=e,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown((e=>this._onEditorMouseDown(e)))),this._register(this._editor.onMouseUp((e=>this._onEditorMouseUp(e)))),this._register(this._editor.onMouseDrag((e=>this._onEditorMouseDrag(e)))),this._register(this._editor.onMouseDrop((e=>this._onEditorMouseDrop(e)))),this._register(this._editor.onMouseDropCanceled((()=>this._onEditorMouseDropCanceled()))),this._register(this._editor.onKeyDown((e=>this.onEditorKeyDown(e)))),this._register(this._editor.onKeyUp((e=>this.onEditorKeyUp(e)))),this._register(this._editor.onDidBlurEditorWidget((()=>this.onEditorBlur()))),this._register(this._editor.onDidBlurEditorText((()=>this.onEditorBlur()))),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){this._editor.getOption(35)&&!this._editor.getOption(22)&&(h(e)&&(this._modifierPressed=!0),this._mouseDown&&h(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){this._editor.getOption(35)&&!this._editor.getOption(22)&&(h(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===u.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){const t=e.target;if(null===this._dragSelection){const e=(this._editor.getSelections()||[]).filter((e=>t.position&&e.containsPosition(t.position)));if(1!==e.length)return;this._dragSelection=e[0]}h(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){const t=new r.y(e.target.position.lineNumber,e.target.position.column);if(null===this._dragSelection){let i=null;if(e.event.shiftKey){const e=this._editor.getSelection();if(e){const{selectionStartLineNumber:o,selectionStartColumn:n}=e;i=[new d.L(o,n,t.lineNumber,t.column)]}}else i=(this._editor.getSelections()||[]).map((e=>e.containsPosition(t)?new d.L(t.lineNumber,t.column,t.lineNumber,t.column):e));this._editor.setSelections(i||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(h(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(u.ID,new c(this._dragSelection,t,h(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){this._dndDecorationIds.set([{range:new a.Q(e.lineNumber,e.column,e.lineNumber,e.column),options:u._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(e){return 6===e.type||7===e.type}_hitMargin(e){return 2===e.type||3===e.type||4===e.type}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}u.ID="editor.contrib.dragAndDrop",u.TRIGGER_KEY_VALUE=n.zx?6:5,u._DECORATION_OPTIONS=l.kI.register({description:"dnd-target",className:"dnd-target"}),(0,s.HW)(u.ID,u,2)},86752:(e,t,i)=>{var o=i(25143),n=i(32031),s=i(97072),r=i(58066),a=i(28247);i(39587).w.registerCommand("_executeDocumentSymbolProvider",(async function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),d=1;d<t;d++)i[d-1]=arguments[d];const[l]=i;(0,n.j)(s.r.isUri(l));const c=e.get(a.gW),h=e.get(r.b),u=await h.createModelReference(l);try{return(await c.getOrCreate(u.object.textEditorModel,o.XO.None)).getTopLevelSymbols()}finally{u.dispose()}}))},28247:(e,t,i)=>{i.d(t,{LC:()=>C,e0:()=>b,gW:()=>k,i9:()=>y});var o=i(61498),n=i(25143),s=i(29591),r=i(47522),a=i(67512),d=i(23525),l=i(99005),c=i(50044),h=i(39263),u=i(42502),g=i(21950),p=i(87766),m=i(63910),_=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},f=function(e,t){return function(i,o){t(i,o,e)}};class v{remove(){var e;null===(e=this.parent)||void 0===e||e.children.delete(this.id)}static findId(e,t){let i;"string"===typeof e?i="".concat(t.id,"/").concat(e):(i="".concat(t.id,"/").concat(e.name),void 0!==t.children.get(i)&&(i="".concat(t.id,"/").concat(e.name,"_").concat(e.range.startLineNumber,"_").concat(e.range.startColumn)));let o=i;for(let n=0;void 0!==t.children.get(o);n++)o="".concat(i,"_").concat(n);return o}static empty(e){return 0===e.children.size}}class C extends v{constructor(e,t,i){super(),this.id=e,this.parent=t,this.symbol=i,this.children=new Map}}class b extends v{constructor(e,t,i,o){super(),this.id=e,this.parent=t,this.label=i,this.order=o,this.children=new Map}}class y extends v{static create(e,t,i){const r=new n.Qi(i),a=new y(t.uri),d=e.ordered(t),l=d.map(((e,i)=>{var o;const n=v.findId("provider_".concat(i),a),d=new b(n,a,null!==(o=e.displayName)&&void 0!==o?o:"Unknown Outline Provider",i);return Promise.resolve(e.provideDocumentSymbols(t,r.token)).then((e=>{for(const t of e||[])y._makeOutlineElement(t,d);return d}),(e=>((0,s.M_)(e),d))).then((e=>{v.empty(e)?e.remove():a._groups.set(n,e)}))})),c=e.onDidChange((()=>{const i=e.ordered(t);(0,o.aI)(i,d)||r.cancel()}));return Promise.all(l).then((()=>r.token.isCancellationRequested&&!i.isCancellationRequested?y.create(e,t,i):a._compact())).finally((()=>{r.dispose(),c.dispose(),r.dispose()}))}static _makeOutlineElement(e,t){const i=v.findId(e,t),o=new C(i,t,e);if(e.children)for(const n of e.children)y._makeOutlineElement(n,o);t.children.set(o.id,o)}constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}_compact(){let e=0;for(const[t,i]of this._groups)0===i.children.size?this._groups.delete(t):e+=1;if(1!==e)this.children=this._groups;else{const e=r.f.first(this._groups.values());for(const[,t]of e.children)t.parent=this,this.children.set(t.id,t)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof C?e.push(t.symbol):e.push(...r.f.map(t.children.values(),(e=>e.symbol)));return e.sort(((e,t)=>l.Q.compareRangesUsingStarts(e.range,t.range)))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return y._flattenDocumentSymbols(t,e,""),t.sort(((e,t)=>d.y.compare(l.Q.getStartPosition(e.range),l.Q.getStartPosition(t.range))||d.y.compare(l.Q.getEndPosition(t.range),l.Q.getEndPosition(e.range))))}static _flattenDocumentSymbols(e,t,i){for(const o of t)e.push({kind:o.kind,tags:o.tags,name:o.name,detail:o.detail,containerName:o.containerName||i,range:o.range,selectionRange:o.selectionRange,children:void 0}),o.children&&y._flattenDocumentSymbols(e,o.children,o.name)}}const k=(0,h.u1)("IOutlineModelService");let w=class{constructor(e,t,i){this._languageFeaturesService=e,this._disposables=new p.Cm,this._cache=new a.qK(10,.7),this._debounceInformation=t.for(e.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(i.onModelRemoved((e=>{this._cache.delete(e.id)})))}dispose(){this._disposables.dispose()}async getOrCreate(e,t){const i=this._languageFeaturesService.documentSymbolProvider,s=i.ordered(e);let r=this._cache.get(e.id);if(!r||r.versionId!==e.getVersionId()||!(0,o.aI)(r.provider,s)){const t=new n.Qi;r={versionId:e.getVersionId(),provider:s,promiseCnt:0,source:t,promise:y.create(i,e,t.token),model:void 0},this._cache.set(e.id,r);const o=Date.now();r.promise.then((t=>{r.model=t,this._debounceInformation.update(e,Date.now()-o)})).catch((t=>{this._cache.delete(e.id)}))}if(r.model)return r.model;r.promiseCnt+=1;const a=t.onCancellationRequested((()=>{0===--r.promiseCnt&&(r.source.cancel(),this._cache.delete(e.id))}));try{return await r.promise}finally{a.dispose()}}};w=_([f(0,m.u),f(1,c.U),f(2,g.S)],w),(0,u.v)(k,w,1)},53155:(e,t,i)=>{var o,n=i(87467),s=i(30050),r=i(72330),a=i(37690),d=i(46625),l=i(24584),c=i(51413);(0,s.HW)(d.Rj.ID,d.Rj,0),(0,a.x)(l.L9),(0,s.E_)(new class extends s.DX{constructor(){super({id:d.qs,precondition:d.lr,kbOpts:{weight:100,primary:2137}})}runEditorCommand(e,t){var i;return null===(i=d.Rj.get(t))||void 0===i?void 0:i.changePasteType()}}),(0,s.E_)(new class extends s.DX{constructor(){super({id:"editor.hidePasteWidget",precondition:d.lr,kbOpts:{weight:100,primary:9}})}runEditorCommand(e,t){var i;null===(i=d.Rj.get(t))||void 0===i||i.clearWidgets()}}),(0,s.Fl)(((o=class extends s.ks{constructor(){super({id:"editor.action.pasteAs",label:c.kg("pasteAs","Paste As..."),alias:"Paste As...",precondition:r.R.writable,metadata:{description:"Paste as",args:[{name:"args",schema:o.argsSchema}]}})}run(e,t,i){var o;let s="string"===typeof(null===i||void 0===i?void 0:i.kind)?i.kind:void 0;return!s&&i&&(s="string"===typeof i.id?i.id:void 0),null===(o=d.Rj.get(t))||void 0===o?void 0:o.pasteAs(s?new n.k(s):void 0)}}).argsSchema={type:"object",properties:{kind:{type:"string",description:c.kg("pasteAs.kind","The kind of the paste edit to try applying. If not provided or there are multiple edits for this kind, the editor will show a picker.")}}},o)),(0,s.Fl)(class extends s.ks{constructor(){super({id:"editor.action.pasteAsText",label:c.kg("pasteAsText","Paste as Text"),alias:"Paste as Text",precondition:r.R.writable})}run(e,t){var i;return null===(i=d.Rj.get(t))||void 0===i?void 0:i.pasteAs({providerId:l.LR.id})}})},46625:(e,t,i)=>{i.d(t,{Rj:()=>T,lr:()=>O,qs:()=>E});var o,n=i(32605),s=i(61498),r=i(73990),a=i(86783),d=i(87467),l=i(87766),c=i(70040),h=i(66731),u=i(43783),g=i(9984),p=i(85339),m=i(59313),_=i(99005),f=i(91861),v=i(63910),C=i(24584),b=i(44845),y=i(39212),k=i(64380),w=i(85521),S=i(51413),P=i(2826),D=i(39686),x=i(39263),L=i(3607),A=i(50051),I=i(32734),M=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},N=function(e,t){return function(i,o){t(i,o,e)}};const E="editor.changePasteType",O=new D.N1("pasteWidgetVisible",!1,(0,S.kg)("pasteWidgetVisible","Whether the paste widget is showing")),R="application/vnd.code.copyMetadata";let T=o=class extends l.jG{static get(e){return e.getContribution(o.ID)}constructor(e,t,i,o,s,r,a){super(),this._bulkEditService=i,this._clipboardService=o,this._languageFeaturesService=s,this._quickInputService=r,this._progressService=a,this._editor=e;const d=e.getContainerDomNode();this._register((0,n.ko)(d,"copy",(e=>this.handleCopy(e)))),this._register((0,n.ko)(d,"cut",(e=>this.handleCopy(e)))),this._register((0,n.ko)(d,"paste",(e=>this.handlePaste(e)),!0)),this._pasteProgressManager=this._register(new k.I("pasteIntoEditor",e,t)),this._postPasteWidgetManager=this._register(t.createInstance(I.G,"pasteIntoEditor",e,O,{id:E,label:(0,S.kg)("postPasteWidgetTitle","Show paste options...")}))}changePasteType(){this._postPasteWidgetManager.tryShowSelector()}pasteAs(e){this._editor.focus();try{this._pasteAsActionContext={preferred:e},(0,n.a)().execCommand("paste")}finally{this._pasteAsActionContext=void 0}}clearWidgets(){this._postPasteWidgetManager.clear()}isPasteAsEnabled(){return this._editor.getOption(85).enabled&&!this._editor.getOption(91)}async finishedPaste(){await this._currentPasteOperation}handleCopy(e){var t,i;if(!this._editor.hasTextFocus())return;if(h.HZ&&this._clipboardService.writeResources([]),!e.clipboardData||!this.isPasteAsEnabled())return;const n=this._editor.getModel(),a=this._editor.getSelections();if(!n||!(null===a||void 0===a?void 0:a.length))return;const d=this._editor.getOption(37);let l=a;const c=1===a.length&&a[0].isEmpty();if(c){if(!d)return;l=[new _.Q(l[0].startLineNumber,1,l[0].startLineNumber,1+n.getLineLength(l[0].startLineNumber))]}const g=null===(t=this._editor._getViewModel())||void 0===t?void 0:t.getPlainTextToCopy(a,d,h.uF),m={multicursorText:Array.isArray(g)?g:null,pasteOnNewLine:c,mode:null},f=this._languageFeaturesService.documentPasteEditProvider.ordered(n).filter((e=>!!e.prepareDocumentPaste));if(!f.length)return void this.setCopyMetadata(e.clipboardData,{defaultPastePayload:m});const v=(0,p.q)(e.clipboardData),C=f.flatMap((e=>{var t;return null!==(t=e.copyMimeTypes)&&void 0!==t?t:[]})),b=(0,u.b)();this.setCopyMetadata(e.clipboardData,{id:b,providerCopyMimeTypes:C,defaultPastePayload:m});const y=(0,r.SS)((async e=>{const t=(0,s.Yc)(await Promise.all(f.map((async t=>{try{return await t.prepareDocumentPaste(n,l,v,e)}catch(i){return void console.error(i)}}))));t.reverse();for(const i of t)for(const[e,t]of i)v.replace(e,t);return v}));null===(i=o._currentCopyOperation)||void 0===i||i.dataTransferPromise.cancel(),o._currentCopyOperation={handle:b,dataTransferPromise:y}}async handlePaste(e){var t,i,o,n;if(!e.clipboardData||!this._editor.hasTextFocus())return;null===(t=w.k.get(this._editor))||void 0===t||t.closeMessage(),null===(i=this._currentPasteOperation)||void 0===i||i.cancel(),this._currentPasteOperation=void 0;const s=this._editor.getModel(),r=this._editor.getSelections();if(!(null===r||void 0===r?void 0:r.length)||!s)return;if(!this.isPasteAsEnabled()&&!this._pasteAsActionContext)return;const d=this.fetchCopyMetadata(e),l=(0,p.l)(e.clipboardData);l.delete(R);const h=[...e.clipboardData.types,...null!==(o=null===d||void 0===d?void 0:d.providerCopyMimeTypes)&&void 0!==o?o:[],c.K.uriList],u=this._languageFeaturesService.documentPasteEditProvider.ordered(s).filter((e=>{var t,i;const o=null===(t=this._pasteAsActionContext)||void 0===t?void 0:t.preferred;return!(o&&e.providedPasteEditKinds&&!this.providerMatchesPreference(e,o))&&(null===(i=e.pasteMimeTypes)||void 0===i?void 0:i.some((e=>(0,a.Y)(e,h))))}));u.length?(e.preventDefault(),e.stopImmediatePropagation(),this._pasteAsActionContext?this.showPasteAsPick(this._pasteAsActionContext.preferred,u,r,l,d):this.doPasteInline(u,r,l,d,e)):(null===(n=this._pasteAsActionContext)||void 0===n?void 0:n.preferred)&&this.showPasteAsNoEditMessage(r,this._pasteAsActionContext.preferred)}showPasteAsNoEditMessage(e,t){var i;null===(i=w.k.get(this._editor))||void 0===i||i.showMessage((0,S.kg)("pasteAsError","No paste edits for '{0}' found",t instanceof d.k?t.value:t.providerId),e[0].getStartPosition())}doPasteInline(e,t,i,o,n){const s=(0,r.SS)((async r=>{const a=this._editor;if(!a.hasModel())return;const d=a.getModel(),l=new y.gI(a,3,void 0,r);try{if(await this.mergeInDataFromCopy(i,o,l.token),l.token.isCancellationRequested)return;const s=e.filter((e=>this.isSupportedPasteProvider(e,i)));if(!s.length||1===s.length&&s[0]instanceof C.LR)return this.applyDefaultPasteHandler(i,o,l.token,n);const r={triggerKind:f.FX.Automatic},c=await this.getPasteEdits(s,i,d,t,r,l.token);if(l.token.isCancellationRequested)return;if(1===c.length&&c[0].provider instanceof C.LR)return this.applyDefaultPasteHandler(i,o,l.token,n);if(c.length){const e="afterPaste"===a.getOption(85).showPasteSelector;return this._postPasteWidgetManager.applyEditAndShowIfNeeded(t,{activeEditIndex:0,allEdits:c},e,(async(e,t)=>{var i,o;const n=await(null===(o=(i=e.provider).resolveDocumentPasteEdit)||void 0===o?void 0:o.call(i,e,t));return n&&(e.additionalEdit=n.additionalEdit),e}),l.token)}await this.applyDefaultPasteHandler(i,o,l.token,n)}finally{l.dispose(),this._currentPasteOperation===s&&(this._currentPasteOperation=void 0)}}));this._pasteProgressManager.showWhile(t[0].getEndPosition(),(0,S.kg)("pasteIntoEditorProgress","Running paste handlers. Click to cancel"),s),this._currentPasteOperation=s}showPasteAsPick(e,t,i,o,n){const s=(0,r.SS)((async r=>{const a=this._editor;if(!a.hasModel())return;const l=a.getModel(),c=new y.gI(a,3,void 0,r);try{if(await this.mergeInDataFromCopy(o,n,c.token),c.token.isCancellationRequested)return;let s=t.filter((t=>this.isSupportedPasteProvider(t,o,e)));e&&(s=s.filter((t=>this.providerMatchesPreference(t,e))));const r={triggerKind:f.FX.PasteAs,only:e&&e instanceof d.k?e:void 0};let a,h=await this.getPasteEdits(s,o,l,i,r,c.token);if(c.token.isCancellationRequested)return;if(e&&(h=h.filter((t=>e instanceof d.k?e.contains(t.kind):e.providerId===t.provider.id))),!h.length)return void(r.only&&this.showPasteAsNoEditMessage(i,r.only));if(e)a=h.at(0);else{const e=await this._quickInputService.pick(h.map((e=>{var t;return{label:e.title,description:null===(t=e.kind)||void 0===t?void 0:t.value,edit:e}})),{placeHolder:(0,S.kg)("pasteAsPickerPlaceholder","Select Paste Action")});a=null===e||void 0===e?void 0:e.edit}if(!a)return;const u=(0,b.v)(l.uri,i,a);await this._bulkEditService.apply(u,{editor:this._editor})}finally{c.dispose(),this._currentPasteOperation===s&&(this._currentPasteOperation=void 0)}}));this._progressService.withProgress({location:10,title:(0,S.kg)("pasteAsProgress","Running paste handlers")},(()=>s))}setCopyMetadata(e,t){e.setData(R,JSON.stringify(t))}fetchCopyMetadata(e){var t;if(!e.clipboardData)return;const i=e.clipboardData.getData(R);if(i)try{return JSON.parse(i)}catch(s){return}const[o,n]=g.Mz.getTextData(e.clipboardData);return n?{defaultPastePayload:{mode:n.mode,multicursorText:null!==(t=n.multicursorText)&&void 0!==t?t:null,pasteOnNewLine:!!n.isFromEmptySelection}}:void 0}async mergeInDataFromCopy(e,t,i){var n;if((null===t||void 0===t?void 0:t.id)&&(null===(n=o._currentCopyOperation)||void 0===n?void 0:n.handle)===t.id){const t=await o._currentCopyOperation.dataTransferPromise;if(i.isCancellationRequested)return;for(const[i,o]of t)e.replace(i,o)}if(!e.has(c.K.uriList)){const t=await this._clipboardService.readResources();if(i.isCancellationRequested)return;t.length&&e.append(c.K.uriList,(0,a.gf)(a.jt.create(t)))}}async getPasteEdits(e,t,i,o,n,a){const d=await(0,r.PK)(Promise.all(e.map((async e=>{var s,r;try{const d=await(null===(s=e.provideDocumentPasteEdits)||void 0===s?void 0:s.call(e,i,o,t,n,a));return null===(r=null===d||void 0===d?void 0:d.edits)||void 0===r?void 0:r.map((t=>({...t,provider:e})))}catch(d){console.error(d)}}))),a),l=(0,s.Yc)(null!==d&&void 0!==d?d:[]).flat().filter((e=>!n.only||n.only.contains(e.kind)));return(0,b.H)(l)}async applyDefaultPasteHandler(e,t,i,o){var n,s,r,a;const d=null!==(n=e.get(c.K.text))&&void 0!==n?n:e.get("text"),l=null!==(s=await(null===d||void 0===d?void 0:d.asString()))&&void 0!==s?s:"";if(i.isCancellationRequested)return;const h={clipboardEvent:o,text:l,pasteOnNewLine:null!==(r=null===t||void 0===t?void 0:t.defaultPastePayload.pasteOnNewLine)&&void 0!==r&&r,multicursorText:null!==(a=null===t||void 0===t?void 0:t.defaultPastePayload.multicursorText)&&void 0!==a?a:null,mode:null};this._editor.trigger("keyboard","paste",h)}isSupportedPasteProvider(e,t,i){var o;return!!(null===(o=e.pasteMimeTypes)||void 0===o?void 0:o.some((e=>t.matches(e))))&&(!i||this.providerMatchesPreference(e,i))}providerMatchesPreference(e,t){return t instanceof d.k?!e.providedPasteEditKinds||e.providedPasteEditKinds.some((e=>t.contains(e))):e.id===t.providerId}};T.ID="editor.contrib.copyPasteActionController",T=o=M([N(1,x._Y),N(2,m.nu),N(3,P.h),N(4,v.u),N(5,A.GK),N(6,L.G5)],T)},24584:(e,t,i)=>{i.d(t,{L9:()=>S,LR:()=>v,ZR:()=>w});var o=i(61498),n=i(86783),s=i(87467),r=i(87766),a=i(70040),d=i(83888),l=i(53059),c=i(97072),h=i(91861),u=i(63910),g=i(51413),p=i(77699),m=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},_=function(e,t){return function(i,o){t(i,o,e)}};class f{async provideDocumentPasteEdits(e,t,i,o,n){const s=await this.getEdit(i,n);if(s)return{dispose(){},edits:[{insertText:s.insertText,title:s.title,kind:s.kind,handledMimeType:s.handledMimeType,yieldTo:s.yieldTo}]}}async provideDocumentDropEdits(e,t,i,o){const n=await this.getEdit(i,o);return n?[{insertText:n.insertText,title:n.title,kind:n.kind,handledMimeType:n.handledMimeType,yieldTo:n.yieldTo}]:void 0}}class v extends f{constructor(){super(...arguments),this.kind=v.kind,this.dropMimeTypes=[a.K.text],this.pasteMimeTypes=[a.K.text]}async getEdit(e,t){const i=e.get(a.K.text);if(!i)return;if(e.has(a.K.uriList))return;const o=await i.asString();return{handledMimeType:a.K.text,title:(0,g.kg)("text.label","Insert Plain Text"),insertText:o,kind:this.kind}}}v.id="text",v.kind=new s.k("text.plain");class C extends f{constructor(){super(...arguments),this.kind=new s.k("uri.absolute"),this.dropMimeTypes=[a.K.uriList],this.pasteMimeTypes=[a.K.uriList]}async getEdit(e,t){const i=await k(e);if(!i.length||t.isCancellationRequested)return;let o=0;const n=i.map((e=>{let{uri:t,originalText:i}=e;return t.scheme===d.ny.file?t.fsPath:(o++,i)})).join(" ");let s;return s=o>0?i.length>1?(0,g.kg)("defaultDropProvider.uriList.uris","Insert Uris"):(0,g.kg)("defaultDropProvider.uriList.uri","Insert Uri"):i.length>1?(0,g.kg)("defaultDropProvider.uriList.paths","Insert Paths"):(0,g.kg)("defaultDropProvider.uriList.path","Insert Path"),{handledMimeType:a.K.uriList,insertText:n,title:s,kind:this.kind}}}let b=class extends f{constructor(e){super(),this._workspaceContextService=e,this.kind=new s.k("uri.relative"),this.dropMimeTypes=[a.K.uriList],this.pasteMimeTypes=[a.K.uriList]}async getEdit(e,t){const i=await k(e);if(!i.length||t.isCancellationRequested)return;const n=(0,o.Yc)(i.map((e=>{let{uri:t}=e;const i=this._workspaceContextService.getWorkspaceFolder(t);return i?(0,l.iZ)(i.uri,t):void 0})));return n.length?{handledMimeType:a.K.uriList,insertText:n.join(" "),title:i.length>1?(0,g.kg)("defaultDropProvider.uriList.relativePaths","Insert Relative Paths"):(0,g.kg)("defaultDropProvider.uriList.relativePath","Insert Relative Path"),kind:this.kind}:void 0}};b=m([_(0,p.VR)],b);class y{constructor(){this.kind=new s.k("html"),this.pasteMimeTypes=["text/html"],this._yieldTo=[{mimeType:a.K.text}]}async provideDocumentPasteEdits(e,t,i,o,n){var s;if(o.triggerKind!==h.FX.PasteAs&&!(null===(s=o.only)||void 0===s?void 0:s.contains(this.kind)))return;const r=i.get("text/html"),a=await(null===r||void 0===r?void 0:r.asString());return a&&!n.isCancellationRequested?{dispose(){},edits:[{insertText:a,yieldTo:this._yieldTo,title:(0,g.kg)("pasteHtmlLabel","Insert HTML"),kind:this.kind}]}:void 0}}async function k(e){const t=e.get(a.K.uriList);if(!t)return[];const i=await t.asString(),o=[];for(const r of n.jt.parse(i))try{o.push({uri:c.r.parse(r),originalText:r})}catch(s){}return o}let w=class extends r.jG{constructor(e,t){super(),this._register(e.documentDropEditProvider.register("*",new v)),this._register(e.documentDropEditProvider.register("*",new C)),this._register(e.documentDropEditProvider.register("*",new b(t)))}};w=m([_(0,u.u),_(1,p.VR)],w);let S=class extends r.jG{constructor(e,t){super(),this._register(e.documentPasteEditProvider.register("*",new v)),this._register(e.documentPasteEditProvider.register("*",new C)),this._register(e.documentPasteEditProvider.register("*",new b(t))),this._register(e.documentPasteEditProvider.register("*",new y))}};S=m([_(0,u.u),_(1,p.VR)],S)},23084:(e,t,i)=>{var o,n=i(30050),s=i(65387),r=i(37690),a=i(24584),d=i(51413),l=i(9702),c=i(31519),h=i(61498),u=i(73990),g=i(86783),p=i(87467),m=i(87766),_=i(85339),f=i(99005),v=i(63910),C=i(48523),b=i(32100),y=i(39212),k=i(64380),w=i(66457),S=i(39686),P=i(79732),D=i(39263),x=i(44845),L=i(32734),A=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},I=function(e,t){return function(i,o){t(i,o,e)}};const M="editor.experimental.dropIntoEditor.defaultProvider",N="editor.changeDropType",E=new S.N1("dropWidgetVisible",!1,(0,d.kg)("dropWidgetVisible","Whether the drop widget is showing"));let O=o=class extends m.jG{static get(e){return e.getContribution(o.ID)}constructor(e,t,i,o,n){super(),this._configService=i,this._languageFeaturesService=o,this._treeViewsDragAndDropService=n,this.treeItemsTransfer=P.PD.getInstance(),this._dropProgressManager=this._register(t.createInstance(k.I,"dropIntoEditor",e)),this._postDropWidgetManager=this._register(t.createInstance(L.G,"dropIntoEditor",e,E,{id:N,label:(0,d.kg)("postDropWidgetTitle","Show drop options...")})),this._register(e.onDropIntoEditor((t=>this.onDropIntoEditor(e,t.position,t.event))))}clearWidgets(){this._postDropWidgetManager.clear()}changeDropType(){this._postDropWidgetManager.tryShowSelector()}async onDropIntoEditor(e,t,i){var o;if(!i.dataTransfer||!e.hasModel())return;null===(o=this._currentOperation)||void 0===o||o.cancel(),e.focus(),e.setPosition(t);const n=(0,u.SS)((async o=>{const s=new y.gI(e,1,void 0,o);try{const n=await this.extractDataTransferData(i);if(0===n.size||s.token.isCancellationRequested)return;const r=e.getModel();if(!r)return;const a=this._languageFeaturesService.documentDropEditProvider.ordered(r).filter((e=>!e.dropMimeTypes||e.dropMimeTypes.some((e=>n.matches(e))))),d=await this.getDropEdits(a,r,t,n,s);if(s.token.isCancellationRequested)return;if(d.length){const i=this.getInitialActiveEditIndex(r,d),n="afterDrop"===e.getOption(36).showDropSelector;await this._postDropWidgetManager.applyEditAndShowIfNeeded([f.Q.fromPositions(t)],{activeEditIndex:i,allEdits:d},n,(async e=>e),o)}}finally{s.dispose(),this._currentOperation===n&&(this._currentOperation=void 0)}}));this._dropProgressManager.showWhile(t,(0,d.kg)("dropIntoEditorProgress","Running drop handlers. Click to cancel"),n),this._currentOperation=n}async getDropEdits(e,t,i,o,n){const s=await(0,u.PK)(Promise.all(e.map((async e=>{try{const s=await e.provideDocumentDropEdits(t,i,o,n.token);return null===s||void 0===s?void 0:s.map((t=>({...t,providerId:e.id})))}catch(s){console.error(s)}}))),n.token),r=(0,h.Yc)(null!==s&&void 0!==s?s:[]).flat();return(0,x.H)(r)}getInitialActiveEditIndex(e,t){const i=this._configService.getValue(M,{resource:e.uri});for(const[o,n]of Object.entries(i)){const e=new p.k(n),i=t.findIndex((t=>e.value===t.providerId&&t.handledMimeType&&(0,g.Y)(o,[t.handledMimeType])));if(i>=0)return i}return 0}async extractDataTransferData(e){if(!e.dataTransfer)return new g.Vq;const t=(0,_.l)(e.dataTransfer);if(this.treeItemsTransfer.hasData(C.u.prototype)){const e=this.treeItemsTransfer.getData(C.u.prototype);if(Array.isArray(e))for(const i of e){const e=await this._treeViewsDragAndDropService.removeDragOperationTransfer(i.identifier);if(e)for(const[i,o]of e)t.replace(i,o)}}return t}};O.ID="editor.contrib.dropIntoEditorController",O=o=A([I(1,D._Y),I(2,w.pG),I(3,v.u),I(4,b.p)],O),(0,n.HW)(O.ID,O,2),(0,r.x)(a.ZR),(0,n.E_)(new class extends n.DX{constructor(){super({id:N,precondition:E,kbOpts:{weight:100,primary:2137}})}runEditorCommand(e,t,i){var o;null===(o=O.get(t))||void 0===o||o.changeDropType()}}),(0,n.E_)(new class extends n.DX{constructor(){super({id:"editor.hideDropWidget",precondition:E,kbOpts:{weight:100,primary:9}})}runEditorCommand(e,t,i){var o;null===(o=O.get(t))||void 0===o||o.clearWidgets()}}),c.O.as(l.Fd.Configuration).registerConfiguration({...s.JJ,properties:{[M]:{type:"object",scope:5,description:d.kg("defaultProviderDescription","Configures the default drop provider to use for content of a given mime type."),default:{},additionalProperties:{type:"string"}}}})},44845:(e,t,i)=>{i.d(t,{H:()=>r,v:()=>s});var o=i(59313),n=i(57855);function s(e,t,i){var s,r,a,d;return("string"===typeof i.insertText?""===i.insertText:""===i.insertText.snippet)?{edits:null!==(r=null===(s=i.additionalEdit)||void 0===s?void 0:s.edits)&&void 0!==r?r:[]}:{edits:[...t.map((t=>new o.cw(e,{range:t,text:"string"===typeof i.insertText?n.fr.escape(i.insertText)+"$0":i.insertText.snippet,insertAsSnippet:!0}))),...null!==(d=null===(a=i.additionalEdit)||void 0===a?void 0:a.edits)&&void 0!==d?d:[]]}}function r(e){var t;function i(e,t){return"mimeType"in e?e.mimeType===t.handledMimeType:!!t.kind&&e.kind.contains(t.kind)}const o=new Map;for(const r of e)for(const n of null!==(t=r.yieldTo)&&void 0!==t?t:[])for(const t of e)if(t!==r&&i(n,t)){let e=o.get(r);e||(e=[],o.set(r,e)),e.push(t)}if(!o.size)return Array.from(e);const n=new Set,s=[];return function e(t){if(!t.length)return[];const i=t[0];if(s.includes(i))return console.warn("Yield to cycle detected",i),t;if(n.has(i))return e(t.slice(1));let r=[];const a=o.get(i);return a&&(s.push(i),r=e(a),s.pop()),n.add(i),[...r,i,...e(t.slice(1))]}(Array.from(e))}},32734:(e,t,i)=>{i.d(t,{G:()=>v});var o,n=i(32605),s=i(40565),r=i(63169),a=i(48250),d=i(87766),l=i(59313),c=i(44845),h=i(39686),u=i(6748),g=i(39263),p=i(16391),m=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},_=function(e,t){return function(i,o){t(i,o,e)}};let f=o=class extends d.jG{constructor(e,t,i,o,n,s,r,l,c,h){super(),this.typeId=e,this.editor=t,this.showCommand=o,this.range=n,this.edits=s,this.onSelectNewEdit=r,this._contextMenuService=l,this._keybindingService=h,this.allowEditorOverflow=!0,this.suppressMouseDown=!0,this.create(),this.visibleContext=i.bindTo(c),this.visibleContext.set(!0),this._register((0,d.s)((()=>this.visibleContext.reset()))),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this),this._register((0,d.s)((()=>this.editor.removeContentWidget(this)))),this._register(this.editor.onDidChangeCursorPosition((e=>{n.containsPosition(e.position)||this.dispose()}))),this._register(a.Jh.runAndSubscribe(h.onDidUpdateKeybindings,(()=>{this._updateButtonTitle()})))}_updateButtonTitle(){var e;const t=null===(e=this._keybindingService.lookupKeybinding(this.showCommand.id))||void 0===e?void 0:e.getLabel();this.button.element.title=this.showCommand.label+(t?" (".concat(t,")"):"")}create(){this.domNode=n.$(".post-edit-widget"),this.button=this._register(new s.$(this.domNode,{supportIcons:!0})),this.button.label="$(insert)",this._register(n.ko(this.domNode,n.Bx.CLICK,(()=>this.showSelector())))}getId(){return o.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:this.range.getEndPosition(),preference:[2]}}showSelector(){this._contextMenuService.showContextMenu({getAnchor:()=>{const e=n.BK(this.button.element);return{x:e.left+e.width,y:e.top+e.height}},getActions:()=>this.edits.allEdits.map(((e,t)=>(0,r.ih)({id:"",label:e.title,checked:t===this.edits.activeEditIndex,run:()=>{if(t!==this.edits.activeEditIndex)return this.onSelectNewEdit(t)}})))})}};f.baseId="editor.widget.postEditWidget",f=o=m([_(7,u.Z),_(8,h.fN),_(9,p.b)],f);let v=class extends d.jG{constructor(e,t,i,o,n,s){super(),this._id=e,this._editor=t,this._visibleContext=i,this._showCommand=o,this._instantiationService=n,this._bulkEditService=s,this._currentWidget=this._register(new d.HE),this._register(a.Jh.any(t.onDidChangeModel,t.onDidChangeModelContent)((()=>this.clear())))}async applyEditAndShowIfNeeded(e,t,i,o,n){const s=this._editor.getModel();if(!s||!e.length)return;const r=t.allEdits.at(t.activeEditIndex);if(!r)return;const a=await o(r,n);if(n.isCancellationRequested)return;const d=(0,c.v)(s.uri,e,a),l=e[0],h=s.deltaDecorations([],[{range:l,options:{description:"paste-line-suffix",stickiness:0}}]);let u,g;this._editor.focus();try{u=await this._bulkEditService.apply(d,{editor:this._editor,token:n}),g=s.getDecorationRange(h[0])}finally{s.deltaDecorations(h,[])}n.isCancellationRequested||i&&u.isApplied&&t.allEdits.length>1&&this.show(null!==g&&void 0!==g?g:l,t,(async s=>{const r=this._editor.getModel();r&&(await r.undo(),this.applyEditAndShowIfNeeded(e,{activeEditIndex:s,allEdits:t.allEdits},i,o,n))}))}show(e,t,i){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance(f,this._id,this._editor,this._visibleContext,this._showCommand,e,t,i))}clear(){this._currentWidget.clear()}tryShowSelector(){var e;null===(e=this._currentWidget.value)||void 0===e||e.showSelector()}};v=m([_(4,g._Y),_(5,l.nu)],v)},39212:(e,t,i)=>{i.d(t,{$t:()=>_,gI:()=>f,ER:()=>v});var o=i(12780),n=i(99005),s=i(25143),r=i(87766),a=i(30050),d=i(39686),l=i(30453),c=i(39263),h=i(42502),u=i(51413);const g=(0,c.u1)("IEditorCancelService"),p=new d.N1("cancellableOperation",!1,(0,u.kg)("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));(0,h.v)(g,class{constructor(){this._tokens=new WeakMap}add(e,t){let i,o=this._tokens.get(e);return o||(o=e.invokeWithinContext((e=>({key:p.bindTo(e.get(d.fN)),tokens:new l.w}))),this._tokens.set(e,o)),o.key.set(!0),i=o.tokens.push(t),()=>{i&&(i(),o.key.set(!o.tokens.isEmpty()),i=void 0)}}cancel(e){const t=this._tokens.get(e);if(!t)return;const i=t.tokens.pop();i&&(i.cancel(),t.key.set(!t.tokens.isEmpty()))}},1);class m extends s.Qi{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext((t=>t.get(g).add(e,this)))}dispose(){this._unregister(),super.dispose()}}(0,a.E_)(new class extends a.DX{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:p})}runEditorCommand(e,t){e.get(g).cancel(t)}});class _{constructor(e,t){if(this.flags=t,0!==(1&this.flags)){const t=e.getModel();this.modelVersionId=t?o.GP("{0}#{1}",t.uri.toString(),t.getVersionId()):null}else this.modelVersionId=null;0!==(4&this.flags)?this.position=e.getPosition():this.position=null,0!==(2&this.flags)?this.selection=e.getSelection():this.selection=null,0!==(8&this.flags)?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof _))return!1;const t=e;return this.modelVersionId===t.modelVersionId&&(this.scrollLeft===t.scrollLeft&&this.scrollTop===t.scrollTop&&(!(!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position))&&!(!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))))}validate(e){return this._equals(new _(e,this.flags))}}class f extends m{constructor(e,t,i,o){super(e,o),this._listener=new r.Cm,4&t&&this._listener.add(e.onDidChangeCursorPosition((e=>{i&&n.Q.containsPosition(i,e.position)||this.cancel()}))),2&t&&this._listener.add(e.onDidChangeCursorSelection((e=>{i&&n.Q.containsRange(i,e.selection)||this.cancel()}))),8&t&&this._listener.add(e.onDidScrollChange((e=>this.cancel()))),1&t&&(this._listener.add(e.onDidChangeModel((e=>this.cancel()))),this._listener.add(e.onDidChangeModelContent((e=>this.cancel()))))}dispose(){this._listener.dispose(),super.dispose()}}class v extends s.Qi{constructor(e,t){super(t),this._listener=e.onDidChangeContent((()=>this.cancel()))}dispose(){this._listener.dispose(),super.dispose()}}},93778:()=>{}}]);
//# sourceMappingURL=monaco-editor-vendor.9fdc3ed8.5bc2972e.js.map