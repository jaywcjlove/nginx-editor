{"version":3,"file":"static/js/monaco-editor-vendor.c821fdeb.91feb3e2.js","mappings":"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","sources":["../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/anchorSelect/browser/anchorSelect.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/bracketMatching/browser/bracketMatching.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/moveCaretCommand.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/caretOperations.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/transpose.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/clipboard/browser/clipboard.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeAction.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionKeybindingResolver.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionMenu.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/lightBulbWidget.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionUi.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionModel.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionCommands.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionContributions.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/common/types.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelens.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codeLensCache.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensWidget.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensController.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/color.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorDetector.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerModel.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerWidget.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorHoverParticipant.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorContributions.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/blockCommentCommand.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/lineCommentCommand.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/comment.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/contextmenu/browser/contextmenu.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/copyPaste/browser/copyPasteController.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/copyPaste/browser/copyPasteContribution.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/cursorUndo/browser/cursorUndo.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport './anchorSelect.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const SelectionAnchorSet = new RawContextKey('selectionAnchorSet', false);\nlet SelectionAnchorController = class SelectionAnchorController {\n    static get(editor) {\n        return editor.getContribution(SelectionAnchorController.ID);\n    }\n    constructor(editor, contextKeyService) {\n        this.editor = editor;\n        this.selectionAnchorSetContextKey = SelectionAnchorSet.bindTo(contextKeyService);\n        this.modelChangeListener = editor.onDidChangeModel(() => this.selectionAnchorSetContextKey.reset());\n    }\n    setSelectionAnchor() {\n        if (this.editor.hasModel()) {\n            const position = this.editor.getPosition();\n            this.editor.changeDecorations((accessor) => {\n                if (this.decorationId) {\n                    accessor.removeDecoration(this.decorationId);\n                }\n                this.decorationId = accessor.addDecoration(Selection.fromPositions(position, position), {\n                    description: 'selection-anchor',\n                    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n                    hoverMessage: new MarkdownString().appendText(localize('selectionAnchor', \"Selection Anchor\")),\n                    className: 'selection-anchor'\n                });\n            });\n            this.selectionAnchorSetContextKey.set(!!this.decorationId);\n            alert(localize('anchorSet', \"Anchor set at {0}:{1}\", position.lineNumber, position.column));\n        }\n    }\n    goToSelectionAnchor() {\n        if (this.editor.hasModel() && this.decorationId) {\n            const anchorPosition = this.editor.getModel().getDecorationRange(this.decorationId);\n            if (anchorPosition) {\n                this.editor.setPosition(anchorPosition.getStartPosition());\n            }\n        }\n    }\n    selectFromAnchorToCursor() {\n        if (this.editor.hasModel() && this.decorationId) {\n            const start = this.editor.getModel().getDecorationRange(this.decorationId);\n            if (start) {\n                const end = this.editor.getPosition();\n                this.editor.setSelection(Selection.fromPositions(start.getStartPosition(), end));\n                this.cancelSelectionAnchor();\n            }\n        }\n    }\n    cancelSelectionAnchor() {\n        if (this.decorationId) {\n            const decorationId = this.decorationId;\n            this.editor.changeDecorations((accessor) => {\n                accessor.removeDecoration(decorationId);\n                this.decorationId = undefined;\n            });\n            this.selectionAnchorSetContextKey.set(false);\n        }\n    }\n    dispose() {\n        this.cancelSelectionAnchor();\n        this.modelChangeListener.dispose();\n    }\n};\nSelectionAnchorController.ID = 'editor.contrib.selectionAnchorController';\nSelectionAnchorController = __decorate([\n    __param(1, IContextKeyService)\n], SelectionAnchorController);\nclass SetSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.setSelectionAnchor',\n            label: localize('setSelectionAnchor', \"Set Selection Anchor\"),\n            alias: 'Set Selection Anchor',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 32 /* KeyCode.KeyB */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.setSelectionAnchor();\n        });\n    }\n}\nclass GoToSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.goToSelectionAnchor',\n            label: localize('goToSelectionAnchor', \"Go to Selection Anchor\"),\n            alias: 'Go to Selection Anchor',\n            precondition: SelectionAnchorSet,\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.goToSelectionAnchor();\n        });\n    }\n}\nclass SelectFromAnchorToCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectFromAnchorToCursor',\n            label: localize('selectFromAnchorToCursor', \"Select from Anchor to Cursor\"),\n            alias: 'Select from Anchor to Cursor',\n            precondition: SelectionAnchorSet,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectFromAnchorToCursor();\n        });\n    }\n}\nclass CancelSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.cancelSelectionAnchor',\n            label: localize('cancelSelectionAnchor', \"Cancel Selection Anchor\"),\n            alias: 'Cancel Selection Anchor',\n            precondition: SelectionAnchorSet,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 9 /* KeyCode.Escape */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.cancelSelectionAnchor();\n        });\n    }\n}\nregisterEditorContribution(SelectionAnchorController.ID, SelectionAnchorController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(SetSelectionAnchor);\nregisterEditorAction(GoToSelectionAnchor);\nregisterEditorAction(SelectFromAnchorToCursor);\nregisterEditorAction(CancelSelectionAnchor);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './bracketMatching.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nconst overviewRulerBracketMatchForeground = registerColor('editorOverviewRuler.bracketMatchForeground', { dark: '#A0A0A0', light: '#A0A0A0', hcDark: '#A0A0A0', hcLight: '#A0A0A0' }, nls.localize('overviewRulerBracketMatchForeground', 'Overview ruler marker color for matching brackets.'));\nclass JumpToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.jumpToBracket',\n            label: nls.localize('smartSelect.jumpBracket', \"Go to Bracket\"),\n            alias: 'Go to Bracket',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 88 /* KeyCode.Backslash */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.jumpToBracket();\n    }\n}\nclass SelectToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectToBracket',\n            label: nls.localize('smartSelect.selectToBracket', \"Select to Bracket\"),\n            alias: 'Select to Bracket',\n            precondition: undefined,\n            description: {\n                description: `Select to Bracket`,\n                args: [{\n                        name: 'args',\n                        schema: {\n                            type: 'object',\n                            properties: {\n                                'selectBrackets': {\n                                    type: 'boolean',\n                                    default: true\n                                }\n                            },\n                        }\n                    }]\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        let selectBrackets = true;\n        if (args && args.selectBrackets === false) {\n            selectBrackets = false;\n        }\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectToBracket(selectBrackets);\n    }\n}\nclass BracketsData {\n    constructor(position, brackets, options) {\n        this.position = position;\n        this.brackets = brackets;\n        this.options = options;\n    }\n}\nclass BracketMatchingController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(BracketMatchingController.ID);\n    }\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._lastBracketsData = [];\n        this._lastVersionId = 0;\n        this._decorations = this._editor.createDecorationsCollection();\n        this._updateBracketsSoon = this._register(new RunOnceScheduler(() => this._updateBrackets(), 50));\n        this._matchBrackets = this._editor.getOption(68 /* EditorOption.matchBrackets */);\n        this._updateBracketsSoon.schedule();\n        this._register(editor.onDidChangeCursorPosition((e) => {\n            if (this._matchBrackets === 'never') {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this._lastBracketsData = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelLanguageConfiguration((e) => {\n            this._lastBracketsData = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(68 /* EditorOption.matchBrackets */)) {\n                this._matchBrackets = this._editor.getOption(68 /* EditorOption.matchBrackets */);\n                this._decorations.clear();\n                this._lastBracketsData = [];\n                this._lastVersionId = 0;\n                this._updateBracketsSoon.schedule();\n            }\n        }));\n        this._register(editor.onDidBlurEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidFocusEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n    }\n    jumpToBracket() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = this._editor.getSelections().map(selection => {\n            const position = selection.getStartPosition();\n            // find matching brackets if position is on a bracket\n            const brackets = model.bracketPairs.matchBracket(position);\n            let newCursorPosition = null;\n            if (brackets) {\n                if (brackets[0].containsPosition(position) && !brackets[1].containsPosition(position)) {\n                    newCursorPosition = brackets[1].getStartPosition();\n                }\n                else if (brackets[1].containsPosition(position)) {\n                    newCursorPosition = brackets[0].getStartPosition();\n                }\n            }\n            else {\n                // find the enclosing brackets if the position isn't on a matching bracket\n                const enclosingBrackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (enclosingBrackets) {\n                    newCursorPosition = enclosingBrackets[1].getStartPosition();\n                }\n                else {\n                    // no enclosing brackets, try the very first next bracket\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        newCursorPosition = nextBracket.range.getStartPosition();\n                    }\n                }\n            }\n            if (newCursorPosition) {\n                return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\n            }\n            return new Selection(position.lineNumber, position.column, position.lineNumber, position.column);\n        });\n        this._editor.setSelections(newSelections);\n        this._editor.revealRange(newSelections[0]);\n    }\n    selectToBracket(selectBrackets) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = [];\n        this._editor.getSelections().forEach(selection => {\n            const position = selection.getStartPosition();\n            let brackets = model.bracketPairs.matchBracket(position);\n            if (!brackets) {\n                brackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (!brackets) {\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        brackets = model.bracketPairs.matchBracket(nextBracket.range.getStartPosition());\n                    }\n                }\n            }\n            let selectFrom = null;\n            let selectTo = null;\n            if (brackets) {\n                brackets.sort(Range.compareRangesUsingStarts);\n                const [open, close] = brackets;\n                selectFrom = selectBrackets ? open.getStartPosition() : open.getEndPosition();\n                selectTo = selectBrackets ? close.getEndPosition() : close.getStartPosition();\n                if (close.containsPosition(position)) {\n                    // select backwards if the cursor was on the closing bracket\n                    const tmp = selectFrom;\n                    selectFrom = selectTo;\n                    selectTo = tmp;\n                }\n            }\n            if (selectFrom && selectTo) {\n                newSelections.push(new Selection(selectFrom.lineNumber, selectFrom.column, selectTo.lineNumber, selectTo.column));\n            }\n        });\n        if (newSelections.length > 0) {\n            this._editor.setSelections(newSelections);\n            this._editor.revealRange(newSelections[0]);\n        }\n    }\n    _updateBrackets() {\n        if (this._matchBrackets === 'never') {\n            return;\n        }\n        this._recomputeBrackets();\n        const newDecorations = [];\n        let newDecorationsLen = 0;\n        for (const bracketData of this._lastBracketsData) {\n            const brackets = bracketData.brackets;\n            if (brackets) {\n                newDecorations[newDecorationsLen++] = { range: brackets[0], options: bracketData.options };\n                newDecorations[newDecorationsLen++] = { range: brackets[1], options: bracketData.options };\n            }\n        }\n        this._decorations.set(newDecorations);\n    }\n    _recomputeBrackets() {\n        if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n            // no model or no focus => no brackets!\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const selections = this._editor.getSelections();\n        if (selections.length > 100) {\n            // no bracket matching for high numbers of selections\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const model = this._editor.getModel();\n        const versionId = model.getVersionId();\n        let previousData = [];\n        if (this._lastVersionId === versionId) {\n            // use the previous data only if the model is at the same version id\n            previousData = this._lastBracketsData;\n        }\n        const positions = [];\n        let positionsLen = 0;\n        for (let i = 0, len = selections.length; i < len; i++) {\n            const selection = selections[i];\n            if (selection.isEmpty()) {\n                // will bracket match a cursor only if the selection is collapsed\n                positions[positionsLen++] = selection.getStartPosition();\n            }\n        }\n        // sort positions for `previousData` cache hits\n        if (positions.length > 1) {\n            positions.sort(Position.compare);\n        }\n        const newData = [];\n        let newDataLen = 0;\n        let previousIndex = 0;\n        const previousLen = previousData.length;\n        for (let i = 0, len = positions.length; i < len; i++) {\n            const position = positions[i];\n            while (previousIndex < previousLen && previousData[previousIndex].position.isBefore(position)) {\n                previousIndex++;\n            }\n            if (previousIndex < previousLen && previousData[previousIndex].position.equals(position)) {\n                newData[newDataLen++] = previousData[previousIndex];\n            }\n            else {\n                let brackets = model.bracketPairs.matchBracket(position, 20 /* give at most 20ms to compute */);\n                let options = BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;\n                if (!brackets && this._matchBrackets === 'always') {\n                    brackets = model.bracketPairs.findEnclosingBrackets(position, 20 /* give at most 20ms to compute */);\n                    options = BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER;\n                }\n                newData[newDataLen++] = new BracketsData(position, brackets, options);\n            }\n        }\n        this._lastBracketsData = newData;\n        this._lastVersionId = versionId;\n    }\n}\nBracketMatchingController.ID = 'editor.contrib.bracketMatchingController';\nBracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerBracketMatchForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nBracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-no-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match'\n});\nexport { BracketMatchingController };\nregisterEditorContribution(BracketMatchingController.ID, BracketMatchingController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(SelectToBracketAction);\nregisterEditorAction(JumpToBracketAction);\n// Go to menu\nMenuRegistry.appendMenuItem(MenuId.MenubarGoMenu, {\n    group: '5_infile_nav',\n    command: {\n        id: 'editor.action.jumpToBracket',\n        title: nls.localize({ key: 'miGoToBracket', comment: ['&& denotes a mnemonic'] }, \"Go to &&Bracket\")\n    },\n    order: 2\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class MoveCaretCommand {\n    constructor(selection, isMovingLeft) {\n        this._selection = selection;\n        this._isMovingLeft = isMovingLeft;\n    }\n    getEditOperations(model, builder) {\n        if (this._selection.startLineNumber !== this._selection.endLineNumber || this._selection.isEmpty()) {\n            return;\n        }\n        const lineNumber = this._selection.startLineNumber;\n        const startColumn = this._selection.startColumn;\n        const endColumn = this._selection.endColumn;\n        if (this._isMovingLeft && startColumn === 1) {\n            return;\n        }\n        if (!this._isMovingLeft && endColumn === model.getLineMaxColumn(lineNumber)) {\n            return;\n        }\n        if (this._isMovingLeft) {\n            const rangeBefore = new Range(lineNumber, startColumn - 1, lineNumber, startColumn);\n            const charBefore = model.getValueInRange(rangeBefore);\n            builder.addEditOperation(rangeBefore, null);\n            builder.addEditOperation(new Range(lineNumber, endColumn, lineNumber, endColumn), charBefore);\n        }\n        else {\n            const rangeAfter = new Range(lineNumber, endColumn, lineNumber, endColumn + 1);\n            const charAfter = model.getValueInRange(rangeAfter);\n            builder.addEditOperation(rangeAfter, null);\n            builder.addEditOperation(new Range(lineNumber, startColumn, lineNumber, startColumn), charAfter);\n        }\n    }\n    computeCursorState(model, helper) {\n        if (this._isMovingLeft) {\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn - 1, this._selection.endLineNumber, this._selection.endColumn - 1);\n        }\n        else {\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn + 1, this._selection.endLineNumber, this._selection.endColumn + 1);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { MoveCaretCommand } from './moveCaretCommand.js';\nimport * as nls from '../../../../nls.js';\nclass MoveCaretAction extends EditorAction {\n    constructor(left, opts) {\n        super(opts);\n        this.left = left;\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            commands.push(new MoveCaretCommand(selection, this.left));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass MoveCaretLeftAction extends MoveCaretAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.moveCarretLeftAction',\n            label: nls.localize('caret.moveLeft', \"Move Selected Text Left\"),\n            alias: 'Move Selected Text Left',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nclass MoveCaretRightAction extends MoveCaretAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.moveCarretRightAction',\n            label: nls.localize('caret.moveRight', \"Move Selected Text Right\"),\n            alias: 'Move Selected Text Right',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nregisterEditorAction(MoveCaretLeftAction);\nregisterEditorAction(MoveCaretRightAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand } from '../../../common/commands/replaceCommand.js';\nimport { MoveOperations } from '../../../common/cursor/cursorMoveOperations.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass TransposeLettersAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.transposeLetters',\n            label: nls.localize('transposeLetters.label', \"Transpose Letters\"),\n            alias: 'Transpose Letters',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: {\n                    primary: 256 /* KeyMod.WinCtrl */ | 50 /* KeyCode.KeyT */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            if (!selection.isEmpty()) {\n                continue;\n            }\n            const lineNumber = selection.startLineNumber;\n            const column = selection.startColumn;\n            const lastColumn = model.getLineMaxColumn(lineNumber);\n            if (lineNumber === 1 && (column === 1 || (column === 2 && lastColumn === 2))) {\n                // at beginning of file, nothing to do\n                continue;\n            }\n            // handle special case: when at end of line, transpose left two chars\n            // otherwise, transpose left and right chars\n            const endPosition = (column === lastColumn) ?\n                selection.getPosition() :\n                MoveOperations.rightPosition(model, selection.getPosition().lineNumber, selection.getPosition().column);\n            const middlePosition = MoveOperations.leftPosition(model, endPosition);\n            const beginPosition = MoveOperations.leftPosition(model, middlePosition);\n            const leftChar = model.getValueInRange(Range.fromPositions(beginPosition, middlePosition));\n            const rightChar = model.getValueInRange(Range.fromPositions(middlePosition, endPosition));\n            const replaceRange = Range.fromPositions(beginPosition, endPosition);\n            commands.push(new ReplaceCommand(replaceRange, rightChar + leftChar));\n        }\n        if (commands.length > 0) {\n            editor.pushUndoStop();\n            editor.executeCommands(this.id, commands);\n            editor.pushUndoStop();\n        }\n    }\n}\nregisterEditorAction(TransposeLettersAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as browser from '../../../../base/browser/browser.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { CopyOptions, InMemoryClipboardMetadataManager } from '../../../browser/controller/textAreaInput.js';\nimport { EditorAction, MultiCommand, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nconst CLIPBOARD_CONTEXT_MENU_GROUP = '9_cutcopypaste';\nconst supportsCut = (platform.isNative || document.queryCommandSupported('cut'));\nconst supportsCopy = (platform.isNative || document.queryCommandSupported('copy'));\n// Firefox only supports navigator.clipboard.readText() in browser extensions.\n// See https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/readText#Browser_compatibility\n// When loading over http, navigator.clipboard can be undefined. See https://github.com/microsoft/monaco-editor/issues/2313\nconst supportsPaste = (typeof navigator.clipboard === 'undefined' || browser.isFirefox) ? document.queryCommandSupported('paste') : true;\nfunction registerCommand(command) {\n    command.register();\n    return command;\n}\nexport const CutAction = supportsCut ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardCutAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind cut keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */, secondary: [1024 /* KeyMod.Shift */ | 20 /* KeyCode.Delete */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miCut', comment: ['&& denotes a mnemonic'] }, \"Cu&&t\"),\n            order: 1\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            when: EditorContextKeys.writable,\n            order: 1,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            when: EditorContextKeys.writable,\n            order: 1,\n        }]\n})) : undefined;\nexport const CopyAction = supportsCopy ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardCopyAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind copy keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */, secondary: [2048 /* KeyMod.CtrlCmd */ | 19 /* KeyCode.Insert */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miCopy', comment: ['&& denotes a mnemonic'] }, \"&&Copy\"),\n            order: 2\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 2,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 2,\n        }]\n})) : undefined;\nMenuRegistry.appendMenuItem(MenuId.MenubarEditMenu, { submenu: MenuId.MenubarCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: '2_ccp', order: 3 });\nMenuRegistry.appendMenuItem(MenuId.EditorContext, { submenu: MenuId.EditorContextCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: CLIPBOARD_CONTEXT_MENU_GROUP, order: 3 });\nMenuRegistry.appendMenuItem(MenuId.EditorContext, { submenu: MenuId.EditorContextShare, title: { value: nls.localize('share', \"Share\"), original: 'Share', }, group: '11_share', order: -1 });\nexport const PasteAction = supportsPaste ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardPasteAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind paste keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */, secondary: [1024 /* KeyMod.Shift */ | 19 /* KeyCode.Insert */] },\n        linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */, secondary: [1024 /* KeyMod.Shift */ | 19 /* KeyCode.Insert */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miPaste', comment: ['&& denotes a mnemonic'] }, \"&&Paste\"),\n            order: 4\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            when: EditorContextKeys.writable,\n            order: 4,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            when: EditorContextKeys.writable,\n            order: 4,\n        }]\n})) : undefined;\nclass ExecCommandCopyWithSyntaxHighlightingAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.clipboardCopyWithSyntaxHighlightingAction',\n            label: nls.localize('actions.clipboard.copyWithSyntaxHighlightingLabel', \"Copy With Syntax Highlighting\"),\n            alias: 'Copy With Syntax Highlighting',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const emptySelectionClipboard = editor.getOption(34 /* EditorOption.emptySelectionClipboard */);\n        if (!emptySelectionClipboard && editor.getSelection().isEmpty()) {\n            return;\n        }\n        CopyOptions.forceCopyWithSyntaxHighlighting = true;\n        editor.focus();\n        document.execCommand('copy');\n        CopyOptions.forceCopyWithSyntaxHighlighting = false;\n    }\n}\nfunction registerExecCommandImpl(target, browserCommand) {\n    if (!target) {\n        return;\n    }\n    // 1. handle case when focus is in editor.\n    target.addImplementation(10000, 'code-editor', (accessor, args) => {\n        // Only if editor text focus (i.e. not if editor has widget focus).\n        const focusedEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\n            // Do not execute if there is no selection and empty selection clipboard is off\n            const emptySelectionClipboard = focusedEditor.getOption(34 /* EditorOption.emptySelectionClipboard */);\n            const selection = focusedEditor.getSelection();\n            if (selection && selection.isEmpty() && !emptySelectionClipboard) {\n                return true;\n            }\n            document.execCommand(browserCommand);\n            return true;\n        }\n        return false;\n    });\n    // 2. (default) handle case when focus is somewhere else.\n    target.addImplementation(0, 'generic-dom', (accessor, args) => {\n        document.execCommand(browserCommand);\n        return true;\n    });\n}\nregisterExecCommandImpl(CutAction, 'cut');\nregisterExecCommandImpl(CopyAction, 'copy');\nif (PasteAction) {\n    // 1. Paste: handle case when focus is in editor.\n    PasteAction.addImplementation(10000, 'code-editor', (accessor, args) => {\n        const codeEditorService = accessor.get(ICodeEditorService);\n        const clipboardService = accessor.get(IClipboardService);\n        // Only if editor text focus (i.e. not if editor has widget focus).\n        const focusedEditor = codeEditorService.getFocusedCodeEditor();\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\n            const result = document.execCommand('paste');\n            // Use the clipboard service if document.execCommand('paste') was not successful\n            if (!result && platform.isWeb) {\n                return (() => __awaiter(void 0, void 0, void 0, function* () {\n                    const clipboardText = yield clipboardService.readText();\n                    if (clipboardText !== '') {\n                        const metadata = InMemoryClipboardMetadataManager.INSTANCE.get(clipboardText);\n                        let pasteOnNewLine = false;\n                        let multicursorText = null;\n                        let mode = null;\n                        if (metadata) {\n                            pasteOnNewLine = (focusedEditor.getOption(34 /* EditorOption.emptySelectionClipboard */) && !!metadata.isFromEmptySelection);\n                            multicursorText = (typeof metadata.multicursorText !== 'undefined' ? metadata.multicursorText : null);\n                            mode = metadata.mode;\n                        }\n                        focusedEditor.trigger('keyboard', \"paste\" /* Handler.Paste */, {\n                            text: clipboardText,\n                            pasteOnNewLine,\n                            multicursorText,\n                            mode\n                        });\n                    }\n                }))();\n            }\n            return true;\n        }\n        return false;\n    });\n    // 2. Paste: (default) handle case when focus is somewhere else.\n    PasteAction.addImplementation(0, 'generic-dom', (accessor, args) => {\n        document.execCommand('paste');\n        return true;\n    });\n}\nif (supportsCopy) {\n    registerEditorAction(ExecCommandCopyWithSyntaxHighlightingAction);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { coalesce, equals, isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IBulkEditService } from '../../../browser/services/bulkEditService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { TextModelCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CodeActionItem, CodeActionKind, CodeActionTriggerSource, filtersAction, mayIncludeActionsOfKind } from '../common/types.js';\nexport const codeActionCommandId = 'editor.action.codeAction';\nexport const refactorCommandId = 'editor.action.refactor';\nexport const refactorPreviewCommandId = 'editor.action.refactor.preview';\nexport const sourceActionCommandId = 'editor.action.sourceAction';\nexport const organizeImportsCommandId = 'editor.action.organizeImports';\nexport const fixAllCommandId = 'editor.action.fixAll';\nclass ManagedCodeActionSet extends Disposable {\n    static codeActionsPreferredComparator(a, b) {\n        if (a.isPreferred && !b.isPreferred) {\n            return -1;\n        }\n        else if (!a.isPreferred && b.isPreferred) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    static codeActionsComparator({ action: a }, { action: b }) {\n        if (isNonEmptyArray(a.diagnostics)) {\n            return isNonEmptyArray(b.diagnostics) ? ManagedCodeActionSet.codeActionsPreferredComparator(a, b) : -1;\n        }\n        else if (isNonEmptyArray(b.diagnostics)) {\n            return 1;\n        }\n        else {\n            return ManagedCodeActionSet.codeActionsPreferredComparator(a, b); // both have no diagnostics\n        }\n    }\n    constructor(actions, documentation, disposables) {\n        super();\n        this.documentation = documentation;\n        this._register(disposables);\n        this.allActions = [...actions].sort(ManagedCodeActionSet.codeActionsComparator);\n        this.validActions = this.allActions.filter(({ action }) => !action.disabled);\n    }\n    get hasAutoFix() {\n        return this.validActions.some(({ action: fix }) => !!fix.kind && CodeActionKind.QuickFix.contains(new CodeActionKind(fix.kind)) && !!fix.isPreferred);\n    }\n}\nconst emptyCodeActionsResponse = { actions: [], documentation: undefined };\nexport function getCodeActions(registry, model, rangeOrSelection, trigger, progress, token) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const filter = trigger.filter || {};\n        const codeActionContext = {\n            only: (_a = filter.include) === null || _a === void 0 ? void 0 : _a.value,\n            trigger: trigger.type,\n        };\n        const cts = new TextModelCancellationTokenSource(model, token);\n        const providers = getCodeActionProviders(registry, model, filter);\n        const disposables = new DisposableStore();\n        const promises = providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n            try {\n                progress.report(provider);\n                const providedCodeActions = yield provider.provideCodeActions(model, rangeOrSelection, codeActionContext, cts.token);\n                if (providedCodeActions) {\n                    disposables.add(providedCodeActions);\n                }\n                if (cts.token.isCancellationRequested) {\n                    return emptyCodeActionsResponse;\n                }\n                const filteredActions = ((providedCodeActions === null || providedCodeActions === void 0 ? void 0 : providedCodeActions.actions) || []).filter(action => action && filtersAction(filter, action));\n                const documentation = getDocumentationFromProvider(provider, filteredActions, filter.include);\n                return {\n                    actions: filteredActions.map(action => new CodeActionItem(action, provider)),\n                    documentation\n                };\n            }\n            catch (err) {\n                if (isCancellationError(err)) {\n                    throw err;\n                }\n                onUnexpectedExternalError(err);\n                return emptyCodeActionsResponse;\n            }\n        }));\n        const listener = registry.onDidChange(() => {\n            const newProviders = registry.all(model);\n            if (!equals(newProviders, providers)) {\n                cts.cancel();\n            }\n        });\n        try {\n            const actions = yield Promise.all(promises);\n            const allActions = actions.map(x => x.actions).flat();\n            const allDocumentation = [\n                ...coalesce(actions.map(x => x.documentation)),\n                ...getAdditionalDocumentationForShowingActions(registry, model, trigger, allActions)\n            ];\n            return new ManagedCodeActionSet(allActions, allDocumentation, disposables);\n        }\n        finally {\n            listener.dispose();\n            cts.dispose();\n        }\n    });\n}\nfunction getCodeActionProviders(registry, model, filter) {\n    return registry.all(model)\n        // Don't include providers that we know will not return code actions of interest\n        .filter(provider => {\n        if (!provider.providedCodeActionKinds) {\n            // We don't know what type of actions this provider will return.\n            return true;\n        }\n        return provider.providedCodeActionKinds.some(kind => mayIncludeActionsOfKind(filter, new CodeActionKind(kind)));\n    });\n}\nfunction* getAdditionalDocumentationForShowingActions(registry, model, trigger, actionsToShow) {\n    var _a, _b, _c;\n    if (model && actionsToShow.length) {\n        for (const provider of registry.all(model)) {\n            if (provider._getAdditionalMenuItems) {\n                yield* (_a = provider._getAdditionalMenuItems) === null || _a === void 0 ? void 0 : _a.call(provider, { trigger: trigger.type, only: (_c = (_b = trigger.filter) === null || _b === void 0 ? void 0 : _b.include) === null || _c === void 0 ? void 0 : _c.value }, actionsToShow.map(item => item.action));\n            }\n        }\n    }\n}\nfunction getDocumentationFromProvider(provider, providedCodeActions, only) {\n    if (!provider.documentation) {\n        return undefined;\n    }\n    const documentation = provider.documentation.map(entry => ({ kind: new CodeActionKind(entry.kind), command: entry.command }));\n    if (only) {\n        let currentBest;\n        for (const entry of documentation) {\n            if (entry.kind.contains(only)) {\n                if (!currentBest) {\n                    currentBest = entry;\n                }\n                else {\n                    // Take best match\n                    if (currentBest.kind.contains(entry.kind)) {\n                        currentBest = entry;\n                    }\n                }\n            }\n        }\n        if (currentBest) {\n            return currentBest === null || currentBest === void 0 ? void 0 : currentBest.command;\n        }\n    }\n    // Otherwise, check to see if any of the provided actions match.\n    for (const action of providedCodeActions) {\n        if (!action.kind) {\n            continue;\n        }\n        for (const entry of documentation) {\n            if (entry.kind.contains(new CodeActionKind(action.kind))) {\n                return entry.command;\n            }\n        }\n    }\n    return undefined;\n}\nexport var ApplyCodeActionReason;\n(function (ApplyCodeActionReason) {\n    ApplyCodeActionReason[\"OnSave\"] = \"onSave\";\n    ApplyCodeActionReason[\"FromProblemsView\"] = \"fromProblemsView\";\n    ApplyCodeActionReason[\"FromCodeActions\"] = \"fromCodeActions\";\n})(ApplyCodeActionReason || (ApplyCodeActionReason = {}));\nexport function applyCodeAction(accessor, item, codeActionReason, options, token = CancellationToken.None) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const bulkEditService = accessor.get(IBulkEditService);\n        const commandService = accessor.get(ICommandService);\n        const telemetryService = accessor.get(ITelemetryService);\n        const notificationService = accessor.get(INotificationService);\n        telemetryService.publicLog2('codeAction.applyCodeAction', {\n            codeActionTitle: item.action.title,\n            codeActionKind: item.action.kind,\n            codeActionIsPreferred: !!item.action.isPreferred,\n            reason: codeActionReason,\n        });\n        yield item.resolve(token);\n        if (token.isCancellationRequested) {\n            return;\n        }\n        if ((_a = item.action.edit) === null || _a === void 0 ? void 0 : _a.edits.length) {\n            const result = yield bulkEditService.apply(item.action.edit, {\n                editor: options === null || options === void 0 ? void 0 : options.editor,\n                label: item.action.title,\n                quotableLabel: item.action.title,\n                code: 'undoredo.codeAction',\n                respectAutoSaveConfig: codeActionReason !== ApplyCodeActionReason.OnSave,\n                showPreview: options === null || options === void 0 ? void 0 : options.preview,\n            });\n            if (!result.isApplied) {\n                return;\n            }\n        }\n        if (item.action.command) {\n            try {\n                yield commandService.executeCommand(item.action.command.id, ...(item.action.command.arguments || []));\n            }\n            catch (err) {\n                const message = asMessage(err);\n                notificationService.error(typeof message === 'string'\n                    ? message\n                    : nls.localize('applyCodeActionFailed', \"An unknown error occurred while applying the code action\"));\n            }\n        }\n    });\n}\nfunction asMessage(err) {\n    if (typeof err === 'string') {\n        return err;\n    }\n    else if (err instanceof Error && typeof err.message === 'string') {\n        return err.message;\n    }\n    else {\n        return undefined;\n    }\n}\nCommandsRegistry.registerCommand('_executeCodeActionProvider', function (accessor, resource, rangeOrSelection, kind, itemResolveCount) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!(resource instanceof URI)) {\n            throw illegalArgument();\n        }\n        const { codeActionProvider } = accessor.get(ILanguageFeaturesService);\n        const model = accessor.get(IModelService).getModel(resource);\n        if (!model) {\n            throw illegalArgument();\n        }\n        const validatedRangeOrSelection = Selection.isISelection(rangeOrSelection)\n            ? Selection.liftSelection(rangeOrSelection)\n            : Range.isIRange(rangeOrSelection)\n                ? model.validateRange(rangeOrSelection)\n                : undefined;\n        if (!validatedRangeOrSelection) {\n            throw illegalArgument();\n        }\n        const include = typeof kind === 'string' ? new CodeActionKind(kind) : undefined;\n        const codeActionSet = yield getCodeActions(codeActionProvider, model, validatedRangeOrSelection, { type: 1 /* languages.CodeActionTriggerType.Invoke */, triggerAction: CodeActionTriggerSource.Default, filter: { includeSourceActions: true, include } }, Progress.None, CancellationToken.None);\n        const resolving = [];\n        const resolveCount = Math.min(codeActionSet.validActions.length, typeof itemResolveCount === 'number' ? itemResolveCount : 0);\n        for (let i = 0; i < resolveCount; i++) {\n            resolving.push(codeActionSet.validActions[i].resolve(CancellationToken.None));\n        }\n        try {\n            yield Promise.all(resolving);\n            return codeActionSet.validActions.map(item => item.action);\n        }\n        finally {\n            setTimeout(() => codeActionSet.dispose(), 100);\n        }\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { codeActionCommandId, fixAllCommandId, organizeImportsCommandId, refactorCommandId, sourceActionCommandId } from './codeAction.js';\nimport { CodeActionCommandArgs, CodeActionKind } from '../common/types.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nlet CodeActionKeybindingResolver = class CodeActionKeybindingResolver {\n    constructor(keybindingService) {\n        this.keybindingService = keybindingService;\n    }\n    getResolver() {\n        // Lazy since we may not actually ever read the value\n        const allCodeActionBindings = new Lazy(() => this.keybindingService.getKeybindings()\n            .filter(item => CodeActionKeybindingResolver.codeActionCommands.indexOf(item.command) >= 0)\n            .filter(item => item.resolvedKeybinding)\n            .map((item) => {\n            // Special case these commands since they come built-in with VS Code and don't use 'commandArgs'\n            let commandArgs = item.commandArgs;\n            if (item.command === organizeImportsCommandId) {\n                commandArgs = { kind: CodeActionKind.SourceOrganizeImports.value };\n            }\n            else if (item.command === fixAllCommandId) {\n                commandArgs = { kind: CodeActionKind.SourceFixAll.value };\n            }\n            return Object.assign({ resolvedKeybinding: item.resolvedKeybinding }, CodeActionCommandArgs.fromUser(commandArgs, {\n                kind: CodeActionKind.None,\n                apply: \"never\" /* CodeActionAutoApply.Never */\n            }));\n        }));\n        return (action) => {\n            if (action.kind) {\n                const binding = this.bestKeybindingForCodeAction(action, allCodeActionBindings.value);\n                return binding === null || binding === void 0 ? void 0 : binding.resolvedKeybinding;\n            }\n            return undefined;\n        };\n    }\n    bestKeybindingForCodeAction(action, candidates) {\n        if (!action.kind) {\n            return undefined;\n        }\n        const kind = new CodeActionKind(action.kind);\n        return candidates\n            .filter(candidate => candidate.kind.contains(kind))\n            .filter(candidate => {\n            if (candidate.preferred) {\n                // If the candidate keybinding only applies to preferred actions, the this action must also be preferred\n                return action.isPreferred;\n            }\n            return true;\n        })\n            .reduceRight((currentBest, candidate) => {\n            if (!currentBest) {\n                return candidate;\n            }\n            // Select the more specific binding\n            return currentBest.kind.contains(candidate.kind) ? candidate : currentBest;\n        }, undefined);\n    }\n};\nCodeActionKeybindingResolver.codeActionCommands = [\n    refactorCommandId,\n    codeActionCommandId,\n    sourceActionCommandId,\n    organizeImportsCommandId,\n    fixAllCommandId\n];\nCodeActionKeybindingResolver = __decorate([\n    __param(0, IKeybindingService)\n], CodeActionKeybindingResolver);\nexport { CodeActionKeybindingResolver };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { CodeActionKind } from '../common/types.js';\nimport '../../symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport { localize } from '../../../../nls.js';\nconst uncategorizedCodeActionGroup = Object.freeze({ kind: CodeActionKind.Empty, title: localize('codeAction.widget.id.more', 'More Actions...') });\nconst codeActionGroups = Object.freeze([\n    { kind: CodeActionKind.QuickFix, title: localize('codeAction.widget.id.quickfix', 'Quick Fix...') },\n    { kind: CodeActionKind.RefactorExtract, title: localize('codeAction.widget.id.extract', 'Extract...'), icon: Codicon.wrench },\n    { kind: CodeActionKind.RefactorInline, title: localize('codeAction.widget.id.inline', 'Inline...'), icon: Codicon.wrench },\n    { kind: CodeActionKind.RefactorRewrite, title: localize('codeAction.widget.id.convert', 'Rewrite...'), icon: Codicon.wrench },\n    { kind: CodeActionKind.RefactorMove, title: localize('codeAction.widget.id.move', 'Move...'), icon: Codicon.wrench },\n    { kind: CodeActionKind.SurroundWith, title: localize('codeAction.widget.id.surround', 'Surround With...'), icon: Codicon.symbolSnippet },\n    { kind: CodeActionKind.Source, title: localize('codeAction.widget.id.source', 'Source Action...'), icon: Codicon.symbolFile },\n    uncategorizedCodeActionGroup,\n]);\nexport function toMenuItems(inputCodeActions, showHeaders, keybindingResolver) {\n    if (!showHeaders) {\n        return inputCodeActions.map((action) => {\n            return {\n                kind: \"action\" /* ActionListItemKind.Action */,\n                item: action,\n                group: uncategorizedCodeActionGroup,\n                disabled: !!action.action.disabled,\n                label: action.action.disabled || action.action.title\n            };\n        });\n    }\n    // Group code actions\n    const menuEntries = codeActionGroups.map(group => ({ group, actions: [] }));\n    for (const action of inputCodeActions) {\n        const kind = action.action.kind ? new CodeActionKind(action.action.kind) : CodeActionKind.None;\n        for (const menuEntry of menuEntries) {\n            if (menuEntry.group.kind.contains(kind)) {\n                menuEntry.actions.push(action);\n                break;\n            }\n        }\n    }\n    const allMenuItems = [];\n    for (const menuEntry of menuEntries) {\n        if (menuEntry.actions.length) {\n            allMenuItems.push({ kind: \"header\" /* ActionListItemKind.Header */, group: menuEntry.group });\n            for (const action of menuEntry.actions) {\n                allMenuItems.push({\n                    kind: \"action\" /* ActionListItemKind.Action */,\n                    item: action,\n                    group: menuEntry.group,\n                    label: action.action.title,\n                    disabled: !!action.action.disabled,\n                    keybinding: keybindingResolver(action.action),\n                });\n            }\n        }\n    }\n    return allMenuItems;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Gesture } from '../../../../base/browser/touch.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport './lightBulbWidget.css';\nimport { computeIndentLevel } from '../../../common/model/utils.js';\nimport * as nls from '../../../../nls.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nvar LightBulbState;\n(function (LightBulbState) {\n    LightBulbState.Hidden = { type: 0 /* Type.Hidden */ };\n    class Showing {\n        constructor(actions, trigger, editorPosition, widgetPosition) {\n            this.actions = actions;\n            this.trigger = trigger;\n            this.editorPosition = editorPosition;\n            this.widgetPosition = widgetPosition;\n            this.type = 1 /* Type.Showing */;\n        }\n    }\n    LightBulbState.Showing = Showing;\n})(LightBulbState || (LightBulbState = {}));\nlet LightBulbWidget = class LightBulbWidget extends Disposable {\n    constructor(_editor, quickFixActionId, preferredFixActionId, keybindingService) {\n        super();\n        this._editor = _editor;\n        this._onClick = this._register(new Emitter());\n        this.onClick = this._onClick.event;\n        this._state = LightBulbState.Hidden;\n        this._domNode = dom.$('div.lightBulbWidget');\n        this._register(Gesture.ignoreTarget(this._domNode));\n        this._editor.addContentWidget(this);\n        this._register(this._editor.onDidChangeModelContent(_ => {\n            // cancel when the line in question has been removed\n            const editorModel = this._editor.getModel();\n            if (this.state.type !== 1 /* LightBulbState.Type.Showing */ || !editorModel || this.state.editorPosition.lineNumber >= editorModel.getLineCount()) {\n                this.hide();\n            }\n        }));\n        this._register(dom.addStandardDisposableGenericMouseDownListener(this._domNode, e => {\n            if (this.state.type !== 1 /* LightBulbState.Type.Showing */) {\n                return;\n            }\n            // Make sure that focus / cursor location is not lost when clicking widget icon\n            this._editor.focus();\n            e.preventDefault();\n            // a bit of extra work to make sure the menu\n            // doesn't cover the line-text\n            const { top, height } = dom.getDomNodePagePosition(this._domNode);\n            const lineHeight = this._editor.getOption(63 /* EditorOption.lineHeight */);\n            let pad = Math.floor(lineHeight / 3);\n            if (this.state.widgetPosition.position !== null && this.state.widgetPosition.position.lineNumber < this.state.editorPosition.lineNumber) {\n                pad += lineHeight;\n            }\n            this._onClick.fire({\n                x: e.posx,\n                y: top + height + pad,\n                actions: this.state.actions,\n                trigger: this.state.trigger,\n            });\n        }));\n        this._register(dom.addDisposableListener(this._domNode, 'mouseenter', (e) => {\n            if ((e.buttons & 1) !== 1) {\n                return;\n            }\n            // mouse enters lightbulb while the primary/left button\n            // is being pressed -> hide the lightbulb\n            this.hide();\n        }));\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            // hide when told to do so\n            if (e.hasChanged(61 /* EditorOption.lightbulb */) && !this._editor.getOption(61 /* EditorOption.lightbulb */).enabled) {\n                this.hide();\n            }\n        }));\n        this._register(Event.runAndSubscribe(keybindingService.onDidUpdateKeybindings, () => {\n            var _a, _b;\n            this._preferredKbLabel = withNullAsUndefined((_a = keybindingService.lookupKeybinding(preferredFixActionId)) === null || _a === void 0 ? void 0 : _a.getLabel());\n            this._quickFixKbLabel = withNullAsUndefined((_b = keybindingService.lookupKeybinding(quickFixActionId)) === null || _b === void 0 ? void 0 : _b.getLabel());\n            this._updateLightBulbTitleAndIcon();\n        }));\n    }\n    dispose() {\n        super.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return 'LightBulbWidget';\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return this._state.type === 1 /* LightBulbState.Type.Showing */ ? this._state.widgetPosition : null;\n    }\n    update(actions, trigger, atPosition) {\n        if (actions.validActions.length <= 0) {\n            return this.hide();\n        }\n        const options = this._editor.getOptions();\n        if (!options.get(61 /* EditorOption.lightbulb */).enabled) {\n            return this.hide();\n        }\n        const model = this._editor.getModel();\n        if (!model) {\n            return this.hide();\n        }\n        const { lineNumber, column } = model.validatePosition(atPosition);\n        const tabSize = model.getOptions().tabSize;\n        const fontInfo = options.get(47 /* EditorOption.fontInfo */);\n        const lineContent = model.getLineContent(lineNumber);\n        const indent = computeIndentLevel(lineContent, tabSize);\n        const lineHasSpace = fontInfo.spaceWidth * indent > 22;\n        const isFolded = (lineNumber) => {\n            return lineNumber > 2 && this._editor.getTopForLineNumber(lineNumber) === this._editor.getTopForLineNumber(lineNumber - 1);\n        };\n        let effectiveLineNumber = lineNumber;\n        if (!lineHasSpace) {\n            if (lineNumber > 1 && !isFolded(lineNumber - 1)) {\n                effectiveLineNumber -= 1;\n            }\n            else if (!isFolded(lineNumber + 1)) {\n                effectiveLineNumber += 1;\n            }\n            else if (column * fontInfo.spaceWidth < 22) {\n                // cannot show lightbulb above/below and showing\n                // it inline would overlay the cursor...\n                return this.hide();\n            }\n        }\n        this.state = new LightBulbState.Showing(actions, trigger, atPosition, {\n            position: { lineNumber: effectiveLineNumber, column: 1 },\n            preference: LightBulbWidget._posPref\n        });\n        this._editor.layoutContentWidget(this);\n    }\n    hide() {\n        if (this.state === LightBulbState.Hidden) {\n            return;\n        }\n        this.state = LightBulbState.Hidden;\n        this._editor.layoutContentWidget(this);\n    }\n    get state() { return this._state; }\n    set state(value) {\n        this._state = value;\n        this._updateLightBulbTitleAndIcon();\n    }\n    _updateLightBulbTitleAndIcon() {\n        if (this.state.type === 1 /* LightBulbState.Type.Showing */ && this.state.actions.hasAutoFix) {\n            // update icon\n            this._domNode.classList.remove(...ThemeIcon.asClassNameArray(Codicon.lightBulb));\n            this._domNode.classList.add(...ThemeIcon.asClassNameArray(Codicon.lightbulbAutofix));\n            if (this._preferredKbLabel) {\n                this.title = nls.localize('preferredcodeActionWithKb', \"Show Code Actions. Preferred Quick Fix Available ({0})\", this._preferredKbLabel);\n                return;\n            }\n        }\n        // update icon\n        this._domNode.classList.remove(...ThemeIcon.asClassNameArray(Codicon.lightbulbAutofix));\n        this._domNode.classList.add(...ThemeIcon.asClassNameArray(Codicon.lightBulb));\n        if (this._quickFixKbLabel) {\n            this.title = nls.localize('codeActionWithKb', \"Show Code Actions ({0})\", this._quickFixKbLabel);\n        }\n        else {\n            this.title = nls.localize('codeAction', \"Show Code Actions\");\n        }\n    }\n    set title(value) {\n        this._domNode.title = value;\n    }\n};\nLightBulbWidget._posPref = [0 /* ContentWidgetPositionPreference.EXACT */];\nLightBulbWidget = __decorate([\n    __param(3, IKeybindingService)\n], LightBulbWidget);\nexport { LightBulbWidget };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _CodeActionUi_disposed;\nimport { getDomNodePagePosition } from '../../../../base/browser/dom.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { CodeActionKeybindingResolver } from './codeActionKeybindingResolver.js';\nimport { toMenuItems } from './codeActionMenu.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport { localize } from '../../../../nls.js';\nimport { IActionWidgetService } from '../../../../platform/actionWidget/browser/actionWidget.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { LightBulbWidget } from './lightBulbWidget.js';\nlet CodeActionUi = class CodeActionUi extends Disposable {\n    constructor(_editor, quickFixActionId, preferredFixActionId, delegate, instantiationService, _configurationService, _actionWidgetService, _commandService) {\n        super();\n        this._editor = _editor;\n        this.delegate = delegate;\n        this._configurationService = _configurationService;\n        this._actionWidgetService = _actionWidgetService;\n        this._commandService = _commandService;\n        this._activeCodeActions = this._register(new MutableDisposable());\n        _CodeActionUi_disposed.set(this, false);\n        this._showDisabled = false;\n        this._lightBulbWidget = new Lazy(() => {\n            const widget = this._register(instantiationService.createInstance(LightBulbWidget, this._editor, quickFixActionId, preferredFixActionId));\n            this._register(widget.onClick(e => this.showCodeActionList(e.actions, e, { includeDisabledActions: false, fromLightbulb: true })));\n            return widget;\n        });\n        this._resolver = instantiationService.createInstance(CodeActionKeybindingResolver);\n        this._register(this._editor.onDidLayoutChange(() => this._actionWidgetService.hide()));\n    }\n    dispose() {\n        __classPrivateFieldSet(this, _CodeActionUi_disposed, true, \"f\");\n        super.dispose();\n    }\n    update(newState) {\n        var _a, _b, _c, _d, _e;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (newState.type !== 1 /* CodeActionsState.Type.Triggered */) {\n                (_a = this._lightBulbWidget.rawValue) === null || _a === void 0 ? void 0 : _a.hide();\n                return;\n            }\n            let actions;\n            try {\n                actions = yield newState.actions;\n            }\n            catch (e) {\n                onUnexpectedError(e);\n                return;\n            }\n            if (__classPrivateFieldGet(this, _CodeActionUi_disposed, \"f\")) {\n                return;\n            }\n            this._lightBulbWidget.value.update(actions, newState.trigger, newState.position);\n            if (newState.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\n                if ((_b = newState.trigger.filter) === null || _b === void 0 ? void 0 : _b.include) { // Triggered for specific scope\n                    // Check to see if we want to auto apply.\n                    const validActionToApply = this.tryGetValidActionToApply(newState.trigger, actions);\n                    if (validActionToApply) {\n                        try {\n                            this._lightBulbWidget.value.hide();\n                            yield this.delegate.applyCodeAction(validActionToApply, false, false);\n                        }\n                        finally {\n                            actions.dispose();\n                        }\n                        return;\n                    }\n                    // Check to see if there is an action that we would have applied were it not invalid\n                    if (newState.trigger.context) {\n                        const invalidAction = this.getInvalidActionThatWouldHaveBeenApplied(newState.trigger, actions);\n                        if (invalidAction && invalidAction.action.disabled) {\n                            (_c = MessageController.get(this._editor)) === null || _c === void 0 ? void 0 : _c.showMessage(invalidAction.action.disabled, newState.trigger.context.position);\n                            actions.dispose();\n                            return;\n                        }\n                    }\n                }\n                const includeDisabledActions = !!((_d = newState.trigger.filter) === null || _d === void 0 ? void 0 : _d.include);\n                if (newState.trigger.context) {\n                    if (!actions.allActions.length || !includeDisabledActions && !actions.validActions.length) {\n                        (_e = MessageController.get(this._editor)) === null || _e === void 0 ? void 0 : _e.showMessage(newState.trigger.context.notAvailableMessage, newState.trigger.context.position);\n                        this._activeCodeActions.value = actions;\n                        actions.dispose();\n                        return;\n                    }\n                }\n                this._activeCodeActions.value = actions;\n                this.showCodeActionList(actions, this.toCoords(newState.position), { includeDisabledActions, fromLightbulb: false });\n            }\n            else {\n                // auto magically triggered\n                if (this._actionWidgetService.isVisible) {\n                    // TODO: Figure out if we should update the showing menu?\n                    actions.dispose();\n                }\n                else {\n                    this._activeCodeActions.value = actions;\n                }\n            }\n        });\n    }\n    getInvalidActionThatWouldHaveBeenApplied(trigger, actions) {\n        if (!actions.allActions.length) {\n            return undefined;\n        }\n        if ((trigger.autoApply === \"first\" /* CodeActionAutoApply.First */ && actions.validActions.length === 0)\n            || (trigger.autoApply === \"ifSingle\" /* CodeActionAutoApply.IfSingle */ && actions.allActions.length === 1)) {\n            return actions.allActions.find(({ action }) => action.disabled);\n        }\n        return undefined;\n    }\n    tryGetValidActionToApply(trigger, actions) {\n        if (!actions.validActions.length) {\n            return undefined;\n        }\n        if ((trigger.autoApply === \"first\" /* CodeActionAutoApply.First */ && actions.validActions.length > 0)\n            || (trigger.autoApply === \"ifSingle\" /* CodeActionAutoApply.IfSingle */ && actions.validActions.length === 1)) {\n            return actions.validActions[0];\n        }\n        return undefined;\n    }\n    showCodeActionList(actions, at, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const editorDom = this._editor.getDomNode();\n            if (!editorDom) {\n                return;\n            }\n            const actionsToShow = options.includeDisabledActions && (this._showDisabled || actions.validActions.length === 0) ? actions.allActions : actions.validActions;\n            if (!actionsToShow.length) {\n                return;\n            }\n            const anchor = Position.isIPosition(at) ? this.toCoords(at) : at;\n            const delegate = {\n                onSelect: (action, preview) => __awaiter(this, void 0, void 0, function* () {\n                    this.delegate.applyCodeAction(action, /* retrigger */ true, !!preview ? preview : false);\n                    this._actionWidgetService.hide();\n                }),\n                onHide: () => {\n                    var _a;\n                    (_a = this._editor) === null || _a === void 0 ? void 0 : _a.focus();\n                }\n            };\n            this._actionWidgetService.show('codeActionWidget', true, toMenuItems(actionsToShow, this._shouldShowHeaders(), this._resolver.getResolver()), delegate, anchor, editorDom, this._getActionBarActions(actions, at, options));\n        });\n    }\n    toCoords(position) {\n        if (!this._editor.hasModel()) {\n            return { x: 0, y: 0 };\n        }\n        this._editor.revealPosition(position, 1 /* ScrollType.Immediate */);\n        this._editor.render();\n        // Translate to absolute editor position\n        const cursorCoords = this._editor.getScrolledVisiblePosition(position);\n        const editorCoords = getDomNodePagePosition(this._editor.getDomNode());\n        const x = editorCoords.left + cursorCoords.left;\n        const y = editorCoords.top + cursorCoords.top + cursorCoords.height;\n        return { x, y };\n    }\n    _shouldShowHeaders() {\n        var _a;\n        const model = (_a = this._editor) === null || _a === void 0 ? void 0 : _a.getModel();\n        return this._configurationService.getValue('editor.codeActionWidget.showHeaders', { resource: model === null || model === void 0 ? void 0 : model.uri });\n    }\n    _getActionBarActions(actions, at, options) {\n        if (options.fromLightbulb) {\n            return [];\n        }\n        const resultActions = actions.documentation.map((command) => {\n            var _a;\n            return ({\n                id: command.id,\n                label: command.title,\n                tooltip: (_a = command.tooltip) !== null && _a !== void 0 ? _a : '',\n                class: undefined,\n                enabled: true,\n                run: () => { var _a; return this._commandService.executeCommand(command.id, ...((_a = command.commandArguments) !== null && _a !== void 0 ? _a : [])); },\n            });\n        });\n        if (options.includeDisabledActions && actions.validActions.length > 0 && actions.allActions.length !== actions.validActions.length) {\n            resultActions.push(this._showDisabled ? {\n                id: 'hideMoreActions',\n                label: localize('hideMoreActions', 'Hide Disabled'),\n                enabled: true,\n                tooltip: '',\n                class: undefined,\n                run: () => {\n                    this._showDisabled = false;\n                    return this.showCodeActionList(actions, at, options);\n                }\n            } : {\n                id: 'showMoreActions',\n                label: localize('showMoreActions', 'Show Disabled'),\n                enabled: true,\n                tooltip: '',\n                class: undefined,\n                run: () => {\n                    this._showDisabled = true;\n                    return this.showCodeActionList(actions, at, options);\n                }\n            });\n        }\n        return resultActions;\n    }\n};\n_CodeActionUi_disposed = new WeakMap();\nCodeActionUi = __decorate([\n    __param(4, IInstantiationService),\n    __param(5, IConfigurationService),\n    __param(6, IActionWidgetService),\n    __param(7, ICommandService)\n], CodeActionUi);\nexport { CodeActionUi };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _CodeActionModel_isDisposed;\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { isCancellationError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { getCodeActions } from './codeAction.js';\nimport { CodeActionTriggerSource } from '../common/types.js';\nexport const SUPPORTED_CODE_ACTIONS = new RawContextKey('supportedCodeAction', '');\nclass CodeActionOracle extends Disposable {\n    constructor(_editor, _markerService, _signalChange, _delay = 250) {\n        super();\n        this._editor = _editor;\n        this._markerService = _markerService;\n        this._signalChange = _signalChange;\n        this._delay = _delay;\n        this._autoTriggerTimer = this._register(new TimeoutTimer());\n        this._register(this._markerService.onMarkerChanged(e => this._onMarkerChanges(e)));\n        this._register(this._editor.onDidChangeCursorPosition(() => this._onCursorChange()));\n    }\n    trigger(trigger) {\n        const selection = this._getRangeOfSelectionUnlessWhitespaceEnclosed(trigger);\n        return this._createEventAndSignalChange(trigger, selection);\n    }\n    _onMarkerChanges(resources) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (resources.some(resource => isEqual(resource, model.uri))) {\n            this._autoTriggerTimer.cancelAndSet(() => {\n                this.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\n            }, this._delay);\n        }\n    }\n    _onCursorChange() {\n        this._autoTriggerTimer.cancelAndSet(() => {\n            this.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\n        }, this._delay);\n    }\n    _getRangeOfSelectionUnlessWhitespaceEnclosed(trigger) {\n        if (!this._editor.hasModel()) {\n            return undefined;\n        }\n        const model = this._editor.getModel();\n        const selection = this._editor.getSelection();\n        if (selection.isEmpty() && trigger.type === 2 /* CodeActionTriggerType.Auto */) {\n            const { lineNumber, column } = selection.getPosition();\n            const line = model.getLineContent(lineNumber);\n            if (line.length === 0) {\n                // empty line\n                return undefined;\n            }\n            else if (column === 1) {\n                // look only right\n                if (/\\s/.test(line[0])) {\n                    return undefined;\n                }\n            }\n            else if (column === model.getLineMaxColumn(lineNumber)) {\n                // look only left\n                if (/\\s/.test(line[line.length - 1])) {\n                    return undefined;\n                }\n            }\n            else {\n                // look left and right\n                if (/\\s/.test(line[column - 2]) && /\\s/.test(line[column - 1])) {\n                    return undefined;\n                }\n            }\n        }\n        return selection;\n    }\n    _createEventAndSignalChange(trigger, selection) {\n        const model = this._editor.getModel();\n        if (!selection || !model) {\n            // cancel\n            this._signalChange(undefined);\n            return undefined;\n        }\n        const e = {\n            trigger,\n            selection,\n            position: selection.getStartPosition(),\n        };\n        this._signalChange(e);\n        return e;\n    }\n}\nexport var CodeActionsState;\n(function (CodeActionsState) {\n    CodeActionsState.Empty = { type: 0 /* Type.Empty */ };\n    class Triggered {\n        constructor(trigger, rangeOrSelection, position, _cancellablePromise) {\n            this.trigger = trigger;\n            this.rangeOrSelection = rangeOrSelection;\n            this.position = position;\n            this._cancellablePromise = _cancellablePromise;\n            this.type = 1 /* Type.Triggered */;\n            this.actions = _cancellablePromise.catch((e) => {\n                if (isCancellationError(e)) {\n                    return emptyCodeActionSet;\n                }\n                throw e;\n            });\n        }\n        cancel() {\n            this._cancellablePromise.cancel();\n        }\n    }\n    CodeActionsState.Triggered = Triggered;\n})(CodeActionsState || (CodeActionsState = {}));\nconst emptyCodeActionSet = {\n    allActions: [],\n    validActions: [],\n    dispose: () => { },\n    documentation: [],\n    hasAutoFix: false\n};\nexport class CodeActionModel extends Disposable {\n    constructor(_editor, _registry, _markerService, contextKeyService, _progressService) {\n        super();\n        this._editor = _editor;\n        this._registry = _registry;\n        this._markerService = _markerService;\n        this._progressService = _progressService;\n        this._codeActionOracle = this._register(new MutableDisposable());\n        this._state = CodeActionsState.Empty;\n        this._onDidChangeState = this._register(new Emitter());\n        this.onDidChangeState = this._onDidChangeState.event;\n        _CodeActionModel_isDisposed.set(this, false);\n        this._supportedCodeActions = SUPPORTED_CODE_ACTIONS.bindTo(contextKeyService);\n        this._register(this._editor.onDidChangeModel(() => this._update()));\n        this._register(this._editor.onDidChangeModelLanguage(() => this._update()));\n        this._register(this._registry.onDidChange(() => this._update()));\n        this._update();\n    }\n    dispose() {\n        if (__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            return;\n        }\n        __classPrivateFieldSet(this, _CodeActionModel_isDisposed, true, \"f\");\n        super.dispose();\n        this.setState(CodeActionsState.Empty, true);\n    }\n    _update() {\n        if (__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            return;\n        }\n        this._codeActionOracle.value = undefined;\n        this.setState(CodeActionsState.Empty);\n        const model = this._editor.getModel();\n        if (model\n            && this._registry.has(model)\n            && !this._editor.getOption(86 /* EditorOption.readOnly */)) {\n            const supportedActions = [];\n            for (const provider of this._registry.all(model)) {\n                if (Array.isArray(provider.providedCodeActionKinds)) {\n                    supportedActions.push(...provider.providedCodeActionKinds);\n                }\n            }\n            this._supportedCodeActions.set(supportedActions.join(' '));\n            this._codeActionOracle.value = new CodeActionOracle(this._editor, this._markerService, trigger => {\n                var _a;\n                if (!trigger) {\n                    this.setState(CodeActionsState.Empty);\n                    return;\n                }\n                const actions = createCancelablePromise(token => getCodeActions(this._registry, model, trigger.selection, trigger.trigger, Progress.None, token));\n                if (trigger.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\n                    (_a = this._progressService) === null || _a === void 0 ? void 0 : _a.showWhile(actions, 250);\n                }\n                this.setState(new CodeActionsState.Triggered(trigger.trigger, trigger.selection, trigger.position, actions));\n            }, undefined);\n            this._codeActionOracle.value.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\n        }\n        else {\n            this._supportedCodeActions.reset();\n        }\n    }\n    trigger(trigger) {\n        var _a;\n        (_a = this._codeActionOracle.value) === null || _a === void 0 ? void 0 : _a.trigger(trigger);\n    }\n    setState(newState, skipNotify) {\n        if (newState === this._state) {\n            return;\n        }\n        // Cancel old request\n        if (this._state.type === 1 /* CodeActionsState.Type.Triggered */) {\n            this._state.cancel();\n        }\n        this._state = newState;\n        if (!skipNotify && !__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            this._onDidChangeState.fire(newState);\n        }\n    }\n}\n_CodeActionModel_isDisposed = new WeakMap();\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { EditorAction, EditorCommand } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { applyCodeAction, ApplyCodeActionReason, codeActionCommandId, fixAllCommandId, organizeImportsCommandId, refactorCommandId, refactorPreviewCommandId, sourceActionCommandId } from './codeAction.js';\nimport { CodeActionUi } from './codeActionUi.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService } from '../../../../platform/markers/common/markers.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { CodeActionModel, SUPPORTED_CODE_ACTIONS } from './codeActionModel.js';\nimport { CodeActionCommandArgs, CodeActionKind, CodeActionTriggerSource } from '../common/types.js';\nfunction contextKeyForSupportedActions(kind) {\n    return ContextKeyExpr.regex(SUPPORTED_CODE_ACTIONS.keys()[0], new RegExp('(\\\\s|^)' + escapeRegExpCharacters(kind.value) + '\\\\b'));\n}\nfunction refactorTrigger(editor, userArgs, preview, codeActionFrom) {\n    const args = CodeActionCommandArgs.fromUser(userArgs, {\n        kind: CodeActionKind.Refactor,\n        apply: \"never\" /* CodeActionAutoApply.Never */\n    });\n    return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n        ? args.preferred\n            ? nls.localize('editor.action.refactor.noneMessage.preferred.kind', \"No preferred refactorings for '{0}' available\", userArgs.kind)\n            : nls.localize('editor.action.refactor.noneMessage.kind', \"No refactorings for '{0}' available\", userArgs.kind)\n        : args.preferred\n            ? nls.localize('editor.action.refactor.noneMessage.preferred', \"No preferred refactorings available\")\n            : nls.localize('editor.action.refactor.noneMessage', \"No refactorings available\"), {\n        include: CodeActionKind.Refactor.contains(args.kind) ? args.kind : CodeActionKind.None,\n        onlyIncludePreferredActions: args.preferred\n    }, args.apply, preview, codeActionFrom);\n}\nconst argsSchema = {\n    type: 'object',\n    defaultSnippets: [{ body: { kind: '' } }],\n    properties: {\n        'kind': {\n            type: 'string',\n            description: nls.localize('args.schema.kind', \"Kind of the code action to run.\"),\n        },\n        'apply': {\n            type: 'string',\n            description: nls.localize('args.schema.apply', \"Controls when the returned actions are applied.\"),\n            default: \"ifSingle\" /* CodeActionAutoApply.IfSingle */,\n            enum: [\"first\" /* CodeActionAutoApply.First */, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, \"never\" /* CodeActionAutoApply.Never */],\n            enumDescriptions: [\n                nls.localize('args.schema.apply.first', \"Always apply the first returned code action.\"),\n                nls.localize('args.schema.apply.ifSingle', \"Apply the first returned code action if it is the only one.\"),\n                nls.localize('args.schema.apply.never', \"Do not apply the returned code actions.\"),\n            ]\n        },\n        'preferred': {\n            type: 'boolean',\n            default: false,\n            description: nls.localize('args.schema.preferred', \"Controls if only preferred code actions should be returned.\"),\n        }\n    }\n};\nlet CodeActionController = class CodeActionController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(CodeActionController.ID);\n    }\n    constructor(editor, markerService, contextKeyService, progressService, _instantiationService, languageFeaturesService) {\n        super();\n        this._instantiationService = _instantiationService;\n        this._editor = editor;\n        this._model = this._register(new CodeActionModel(this._editor, languageFeaturesService.codeActionProvider, markerService, contextKeyService, progressService));\n        this._register(this._model.onDidChangeState(newState => this.update(newState)));\n        this._ui = new Lazy(() => this._register(_instantiationService.createInstance(CodeActionUi, editor, QuickFixAction.Id, AutoFixAction.Id, {\n            applyCodeAction: (action, retrigger, preview) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    yield this._applyCodeAction(action, preview);\n                }\n                finally {\n                    if (retrigger) {\n                        this._trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.QuickFix, filter: {} });\n                    }\n                }\n            })\n        })));\n    }\n    update(newState) {\n        this._ui.value.update(newState);\n    }\n    showCodeActions(_trigger, actions, at) {\n        return this._ui.value.showCodeActionList(actions, at, { includeDisabledActions: false, fromLightbulb: false });\n    }\n    manualTriggerAtCurrentPosition(notAvailableMessage, triggerAction, filter, autoApply, preview) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        (_a = MessageController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.closeMessage();\n        const triggerPosition = this._editor.getPosition();\n        this._trigger({ type: 1 /* CodeActionTriggerType.Invoke */, triggerAction, filter, autoApply, context: { notAvailableMessage, position: triggerPosition }, preview });\n    }\n    _trigger(trigger) {\n        return this._model.trigger(trigger);\n    }\n    _applyCodeAction(action, preview) {\n        return this._instantiationService.invokeFunction(applyCodeAction, action, ApplyCodeActionReason.FromCodeActions, { preview, editor: this._editor });\n    }\n};\nCodeActionController.ID = 'editor.contrib.codeActionController';\nCodeActionController = __decorate([\n    __param(1, IMarkerService),\n    __param(2, IContextKeyService),\n    __param(3, IEditorProgressService),\n    __param(4, IInstantiationService),\n    __param(5, ILanguageFeaturesService)\n], CodeActionController);\nexport { CodeActionController };\nfunction triggerCodeActionsForEditorSelection(editor, notAvailableMessage, filter, autoApply, preview = false, triggerAction = CodeActionTriggerSource.Default) {\n    if (editor.hasModel()) {\n        const controller = CodeActionController.get(editor);\n        controller === null || controller === void 0 ? void 0 : controller.manualTriggerAtCurrentPosition(notAvailableMessage, triggerAction, filter, autoApply, preview);\n    }\n}\nclass QuickFixAction extends EditorAction {\n    constructor() {\n        super({\n            id: QuickFixAction.Id,\n            label: nls.localize('quickfix.trigger.label', \"Quick Fix...\"),\n            alias: 'Quick Fix...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 84 /* KeyCode.Period */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.quickFix.noneMessage', \"No code actions available\"), undefined, undefined, false, CodeActionTriggerSource.QuickFix);\n    }\n}\nQuickFixAction.Id = 'editor.action.quickFix';\nexport { QuickFixAction };\nexport class CodeActionCommand extends EditorCommand {\n    constructor() {\n        super({\n            id: codeActionCommandId,\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            description: {\n                description: 'Trigger a code action',\n                args: [{ name: 'args', schema: argsSchema, }]\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Empty,\n            apply: \"ifSingle\" /* CodeActionAutoApply.IfSingle */,\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred.kind', \"No preferred code actions for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.codeAction.noneMessage.kind', \"No code actions for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred', \"No preferred code actions available\")\n                : nls.localize('editor.action.codeAction.noneMessage', \"No code actions available\"), {\n            include: args.kind,\n            includeSourceActions: true,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply);\n    }\n}\nexport class RefactorAction extends EditorAction {\n    constructor() {\n        super({\n            id: refactorCommandId,\n            label: nls.localize('refactor.label', \"Refactor...\"),\n            alias: 'Refactor...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 48 /* KeyCode.KeyR */,\n                mac: {\n                    primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 48 /* KeyCode.KeyR */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 2,\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Refactor)),\n            },\n            description: {\n                description: 'Refactor...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        return refactorTrigger(editor, userArgs, false, CodeActionTriggerSource.Refactor);\n    }\n}\nexport class RefactorPreview extends EditorAction {\n    constructor() {\n        super({\n            id: refactorPreviewCommandId,\n            label: nls.localize('refactor.preview.label', \"Refactor with Preview...\"),\n            alias: 'Refactor Preview...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            description: {\n                description: 'Refactor Preview...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        return refactorTrigger(editor, userArgs, true, CodeActionTriggerSource.RefactorPreview);\n    }\n}\nexport class SourceAction extends EditorAction {\n    constructor() {\n        super({\n            id: sourceActionCommandId,\n            label: nls.localize('source.label', \"Source Action...\"),\n            alias: 'Source Action...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 2.1,\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Source)),\n            },\n            description: {\n                description: 'Source Action...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Source,\n            apply: \"never\" /* CodeActionAutoApply.Never */\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.source.noneMessage.preferred.kind', \"No preferred source actions for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.source.noneMessage.kind', \"No source actions for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.source.noneMessage.preferred', \"No preferred source actions available\")\n                : nls.localize('editor.action.source.noneMessage', \"No source actions available\"), {\n            include: CodeActionKind.Source.contains(args.kind) ? args.kind : CodeActionKind.None,\n            includeSourceActions: true,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply, undefined, CodeActionTriggerSource.SourceAction);\n    }\n}\nexport class OrganizeImportsAction extends EditorAction {\n    constructor() {\n        super({\n            id: organizeImportsCommandId,\n            label: nls.localize('organizeImports.label', \"Organize Imports\"),\n            alias: 'Organize Imports',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceOrganizeImports)),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 45 /* KeyCode.KeyO */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.organize.noneMessage', \"No organize imports action available\"), { include: CodeActionKind.SourceOrganizeImports, includeSourceActions: true }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, undefined, CodeActionTriggerSource.OrganizeImports);\n    }\n}\nexport class FixAllAction extends EditorAction {\n    constructor() {\n        super({\n            id: fixAllCommandId,\n            label: nls.localize('fixAll.label', \"Fix All\"),\n            alias: 'Fix All',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceFixAll))\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('fixAll.noneMessage', \"No fix all action available\"), { include: CodeActionKind.SourceFixAll, includeSourceActions: true }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, undefined, CodeActionTriggerSource.FixAll);\n    }\n}\nclass AutoFixAction extends EditorAction {\n    constructor() {\n        super({\n            id: AutoFixAction.Id,\n            label: nls.localize('autoFix.label', \"Auto Fix...\"),\n            alias: 'Auto Fix...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.QuickFix)),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 84 /* KeyCode.Period */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 84 /* KeyCode.Period */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.autoFix.noneMessage', \"No auto fixes available\"), {\n            include: CodeActionKind.QuickFix,\n            onlyIncludePreferredActions: true\n        }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, undefined, CodeActionTriggerSource.AutoFix);\n    }\n}\nAutoFixAction.Id = 'editor.action.autoFix';\nexport { AutoFixAction };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { editorConfigurationBaseNode } from '../../../common/config/editorConfigurationSchema.js';\nimport { AutoFixAction, CodeActionCommand, CodeActionController, FixAllAction, OrganizeImportsAction, QuickFixAction, RefactorAction, RefactorPreview, SourceAction } from './codeActionCommands.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nregisterEditorContribution(CodeActionController.ID, CodeActionController, 3 /* EditorContributionInstantiation.Eventually */);\nregisterEditorAction(QuickFixAction);\nregisterEditorAction(RefactorAction);\nregisterEditorAction(RefactorPreview);\nregisterEditorAction(SourceAction);\nregisterEditorAction(OrganizeImportsAction);\nregisterEditorAction(AutoFixAction);\nregisterEditorAction(FixAllAction);\nregisterEditorCommand(new CodeActionCommand());\nRegistry.as(Extensions.Configuration).registerConfiguration(Object.assign(Object.assign({}, editorConfigurationBaseNode), { properties: {\n        'editor.codeActionWidget.showHeaders': {\n            type: 'boolean',\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('showCodeActionHeaders', \"Enable/disable showing group headers in the Code Action menu.\"),\n            default: true,\n        },\n    } }));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nclass CodeActionKind {\n    constructor(value) {\n        this.value = value;\n    }\n    equals(other) {\n        return this.value === other.value;\n    }\n    contains(other) {\n        return this.equals(other) || this.value === '' || other.value.startsWith(this.value + CodeActionKind.sep);\n    }\n    intersects(other) {\n        return this.contains(other) || other.contains(this);\n    }\n    append(part) {\n        return new CodeActionKind(this.value + CodeActionKind.sep + part);\n    }\n}\nCodeActionKind.sep = '.';\nCodeActionKind.None = new CodeActionKind('@@none@@'); // Special code action that contains nothing\nCodeActionKind.Empty = new CodeActionKind('');\nCodeActionKind.QuickFix = new CodeActionKind('quickfix');\nCodeActionKind.Refactor = new CodeActionKind('refactor');\nCodeActionKind.RefactorExtract = CodeActionKind.Refactor.append('extract');\nCodeActionKind.RefactorInline = CodeActionKind.Refactor.append('inline');\nCodeActionKind.RefactorMove = CodeActionKind.Refactor.append('move');\nCodeActionKind.RefactorRewrite = CodeActionKind.Refactor.append('rewrite');\nCodeActionKind.Source = new CodeActionKind('source');\nCodeActionKind.SourceOrganizeImports = CodeActionKind.Source.append('organizeImports');\nCodeActionKind.SourceFixAll = CodeActionKind.Source.append('fixAll');\nCodeActionKind.SurroundWith = CodeActionKind.Refactor.append('surround');\nexport { CodeActionKind };\nexport var CodeActionTriggerSource;\n(function (CodeActionTriggerSource) {\n    CodeActionTriggerSource[\"Refactor\"] = \"refactor\";\n    CodeActionTriggerSource[\"RefactorPreview\"] = \"refactor preview\";\n    CodeActionTriggerSource[\"Lightbulb\"] = \"lightbulb\";\n    CodeActionTriggerSource[\"Default\"] = \"other (default)\";\n    CodeActionTriggerSource[\"SourceAction\"] = \"source action\";\n    CodeActionTriggerSource[\"QuickFix\"] = \"quick fix action\";\n    CodeActionTriggerSource[\"FixAll\"] = \"fix all\";\n    CodeActionTriggerSource[\"OrganizeImports\"] = \"organize imports\";\n    CodeActionTriggerSource[\"AutoFix\"] = \"auto fix\";\n    CodeActionTriggerSource[\"QuickFixHover\"] = \"quick fix hover window\";\n    CodeActionTriggerSource[\"OnSave\"] = \"save participants\";\n    CodeActionTriggerSource[\"ProblemsView\"] = \"problems view\";\n})(CodeActionTriggerSource || (CodeActionTriggerSource = {}));\nexport function mayIncludeActionsOfKind(filter, providedKind) {\n    // A provided kind may be a subset or superset of our filtered kind.\n    if (filter.include && !filter.include.intersects(providedKind)) {\n        return false;\n    }\n    if (filter.excludes) {\n        if (filter.excludes.some(exclude => excludesAction(providedKind, exclude, filter.include))) {\n            return false;\n        }\n    }\n    // Don't return source actions unless they are explicitly requested\n    if (!filter.includeSourceActions && CodeActionKind.Source.contains(providedKind)) {\n        return false;\n    }\n    return true;\n}\nexport function filtersAction(filter, action) {\n    const actionKind = action.kind ? new CodeActionKind(action.kind) : undefined;\n    // Filter out actions by kind\n    if (filter.include) {\n        if (!actionKind || !filter.include.contains(actionKind)) {\n            return false;\n        }\n    }\n    if (filter.excludes) {\n        if (actionKind && filter.excludes.some(exclude => excludesAction(actionKind, exclude, filter.include))) {\n            return false;\n        }\n    }\n    // Don't return source actions unless they are explicitly requested\n    if (!filter.includeSourceActions) {\n        if (actionKind && CodeActionKind.Source.contains(actionKind)) {\n            return false;\n        }\n    }\n    if (filter.onlyIncludePreferredActions) {\n        if (!action.isPreferred) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction excludesAction(providedKind, exclude, include) {\n    if (!exclude.contains(providedKind)) {\n        return false;\n    }\n    if (include && exclude.contains(include)) {\n        // The include is more specific, don't filter out\n        return false;\n    }\n    return true;\n}\nexport class CodeActionCommandArgs {\n    static fromUser(arg, defaults) {\n        if (!arg || typeof arg !== 'object') {\n            return new CodeActionCommandArgs(defaults.kind, defaults.apply, false);\n        }\n        return new CodeActionCommandArgs(CodeActionCommandArgs.getKindFromUser(arg, defaults.kind), CodeActionCommandArgs.getApplyFromUser(arg, defaults.apply), CodeActionCommandArgs.getPreferredUser(arg));\n    }\n    static getApplyFromUser(arg, defaultAutoApply) {\n        switch (typeof arg.apply === 'string' ? arg.apply.toLowerCase() : '') {\n            case 'first': return \"first\" /* CodeActionAutoApply.First */;\n            case 'never': return \"never\" /* CodeActionAutoApply.Never */;\n            case 'ifsingle': return \"ifSingle\" /* CodeActionAutoApply.IfSingle */;\n            default: return defaultAutoApply;\n        }\n    }\n    static getKindFromUser(arg, defaultKind) {\n        return typeof arg.kind === 'string'\n            ? new CodeActionKind(arg.kind)\n            : defaultKind;\n    }\n    static getPreferredUser(arg) {\n        return typeof arg.preferred === 'boolean'\n            ? arg.preferred\n            : false;\n    }\n    constructor(kind, apply, preferred) {\n        this.kind = kind;\n        this.apply = apply;\n        this.preferred = preferred;\n    }\n}\nexport class CodeActionItem {\n    constructor(action, provider) {\n        this.action = action;\n        this.provider = provider;\n    }\n    resolve(token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (((_a = this.provider) === null || _a === void 0 ? void 0 : _a.resolveCodeAction) && !this.action.edit) {\n                let action;\n                try {\n                    action = yield this.provider.resolveCodeAction(this.action, token);\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n                if (action) {\n                    this.action.edit = action.edit;\n                }\n            }\n            return this;\n        });\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class CodeLensModel {\n    constructor() {\n        this.lenses = [];\n        this._disposables = new DisposableStore();\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    get isDisposed() {\n        return this._disposables.isDisposed;\n    }\n    add(list, provider) {\n        this._disposables.add(list);\n        for (const symbol of list.lenses) {\n            this.lenses.push({ symbol, provider });\n        }\n    }\n}\nexport function getCodeLensModel(registry, model, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const provider = registry.ordered(model);\n        const providerRanks = new Map();\n        const result = new CodeLensModel();\n        const promises = provider.map((provider, i) => __awaiter(this, void 0, void 0, function* () {\n            providerRanks.set(provider, i);\n            try {\n                const list = yield Promise.resolve(provider.provideCodeLenses(model, token));\n                if (list) {\n                    result.add(list, provider);\n                }\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n            }\n        }));\n        yield Promise.all(promises);\n        result.lenses = result.lenses.sort((a, b) => {\n            // sort by lineNumber, provider-rank, and column\n            if (a.symbol.range.startLineNumber < b.symbol.range.startLineNumber) {\n                return -1;\n            }\n            else if (a.symbol.range.startLineNumber > b.symbol.range.startLineNumber) {\n                return 1;\n            }\n            else if ((providerRanks.get(a.provider)) < (providerRanks.get(b.provider))) {\n                return -1;\n            }\n            else if ((providerRanks.get(a.provider)) > (providerRanks.get(b.provider))) {\n                return 1;\n            }\n            else if (a.symbol.range.startColumn < b.symbol.range.startColumn) {\n                return -1;\n            }\n            else if (a.symbol.range.startColumn > b.symbol.range.startColumn) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        });\n        return result;\n    });\n}\nCommandsRegistry.registerCommand('_executeCodeLensProvider', function (accessor, ...args) {\n    let [uri, itemResolveCount] = args;\n    assertType(URI.isUri(uri));\n    assertType(typeof itemResolveCount === 'number' || !itemResolveCount);\n    const { codeLensProvider } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const result = [];\n    const disposables = new DisposableStore();\n    return getCodeLensModel(codeLensProvider, model, CancellationToken.None).then(value => {\n        disposables.add(value);\n        const resolve = [];\n        for (const item of value.lenses) {\n            if (itemResolveCount === undefined || itemResolveCount === null || Boolean(item.symbol.command)) {\n                result.push(item.symbol);\n            }\n            else if (itemResolveCount-- > 0 && item.provider.resolveCodeLens) {\n                resolve.push(Promise.resolve(item.provider.resolveCodeLens(model, item.symbol, CancellationToken.None)).then(symbol => result.push(symbol || item.symbol)));\n            }\n        }\n        return Promise.all(resolve);\n    }).then(() => {\n        return result;\n    }).finally(() => {\n        // make sure to return results, then (on next tick)\n        // dispose the results\n        setTimeout(() => disposables.dispose(), 100);\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { runWhenIdle } from '../../../../base/common/async.js';\nimport { once } from '../../../../base/common/functional.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { Range } from '../../../common/core/range.js';\nimport { CodeLensModel } from './codelens.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport const ICodeLensCache = createDecorator('ICodeLensCache');\nclass CacheItem {\n    constructor(lineCount, data) {\n        this.lineCount = lineCount;\n        this.data = data;\n    }\n}\nlet CodeLensCache = class CodeLensCache {\n    constructor(storageService) {\n        this._fakeProvider = new class {\n            provideCodeLenses() {\n                throw new Error('not supported');\n            }\n        };\n        this._cache = new LRUCache(20, 0.75);\n        // remove old data\n        const oldkey = 'codelens/cache';\n        runWhenIdle(() => storageService.remove(oldkey, 1 /* StorageScope.WORKSPACE */));\n        // restore lens data on start\n        const key = 'codelens/cache2';\n        const raw = storageService.get(key, 1 /* StorageScope.WORKSPACE */, '{}');\n        this._deserialize(raw);\n        // store lens data on shutdown\n        once(storageService.onWillSaveState)(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                storageService.store(key, this._serialize(), 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\n            }\n        });\n    }\n    put(model, data) {\n        // create a copy of the model that is without command-ids\n        // but with comand-labels\n        const copyItems = data.lenses.map(item => {\n            var _a;\n            return {\n                range: item.symbol.range,\n                command: item.symbol.command && { id: '', title: (_a = item.symbol.command) === null || _a === void 0 ? void 0 : _a.title },\n            };\n        });\n        const copyModel = new CodeLensModel();\n        copyModel.add({ lenses: copyItems, dispose: () => { } }, this._fakeProvider);\n        const item = new CacheItem(model.getLineCount(), copyModel);\n        this._cache.set(model.uri.toString(), item);\n    }\n    get(model) {\n        const item = this._cache.get(model.uri.toString());\n        return item && item.lineCount === model.getLineCount() ? item.data : undefined;\n    }\n    delete(model) {\n        this._cache.delete(model.uri.toString());\n    }\n    // --- persistence\n    _serialize() {\n        const data = Object.create(null);\n        for (const [key, value] of this._cache) {\n            const lines = new Set();\n            for (const d of value.data.lenses) {\n                lines.add(d.symbol.range.startLineNumber);\n            }\n            data[key] = {\n                lineCount: value.lineCount,\n                lines: [...lines.values()]\n            };\n        }\n        return JSON.stringify(data);\n    }\n    _deserialize(raw) {\n        try {\n            const data = JSON.parse(raw);\n            for (const key in data) {\n                const element = data[key];\n                const lenses = [];\n                for (const line of element.lines) {\n                    lenses.push({ range: new Range(line, 1, line, 11) });\n                }\n                const model = new CodeLensModel();\n                model.add({ lenses, dispose() { } }, this._fakeProvider);\n                this._cache.set(key, new CacheItem(element.lineCount, model));\n            }\n        }\n        catch (_a) {\n            // ignore...\n        }\n    }\n};\nCodeLensCache = __decorate([\n    __param(0, IStorageService)\n], CodeLensCache);\nexport { CodeLensCache };\nregisterSingleton(ICodeLensCache, CodeLensCache, 1 /* InstantiationType.Delayed */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport './codelensWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nclass CodeLensViewZone {\n    constructor(afterLineNumber, heightInPx, onHeight) {\n        /**\n         * We want that this view zone, which reserves space for a code lens appears\n         * as close as possible to the next line, so we use a very large value here.\n         */\n        this.afterColumn = 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */;\n        this.afterLineNumber = afterLineNumber;\n        this.heightInPx = heightInPx;\n        this._onHeight = onHeight;\n        this.suppressMouseDown = true;\n        this.domNode = document.createElement('div');\n    }\n    onComputedHeight(height) {\n        if (this._lastHeight === undefined) {\n            this._lastHeight = height;\n        }\n        else if (this._lastHeight !== height) {\n            this._lastHeight = height;\n            this._onHeight();\n        }\n    }\n    isVisible() {\n        return this._lastHeight !== 0\n            && this.domNode.hasAttribute('monaco-visible-view-zone');\n    }\n}\nclass CodeLensContentWidget {\n    constructor(editor, line) {\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = false;\n        this.suppressMouseDown = true;\n        this._commands = new Map();\n        this._isEmpty = true;\n        this._editor = editor;\n        this._id = `codelens.widget-${(CodeLensContentWidget._idPool++)}`;\n        this.updatePosition(line);\n        this._domNode = document.createElement('span');\n        this._domNode.className = `codelens-decoration`;\n    }\n    withCommands(lenses, animate) {\n        this._commands.clear();\n        const children = [];\n        let hasSymbol = false;\n        for (let i = 0; i < lenses.length; i++) {\n            const lens = lenses[i];\n            if (!lens) {\n                continue;\n            }\n            hasSymbol = true;\n            if (lens.command) {\n                const title = renderLabelWithIcons(lens.command.title.trim());\n                if (lens.command.id) {\n                    children.push(dom.$('a', { id: String(i), title: lens.command.tooltip, role: 'button' }, ...title));\n                    this._commands.set(String(i), lens.command);\n                }\n                else {\n                    children.push(dom.$('span', { title: lens.command.tooltip }, ...title));\n                }\n                if (i + 1 < lenses.length) {\n                    children.push(dom.$('span', undefined, '\\u00a0|\\u00a0'));\n                }\n            }\n        }\n        if (!hasSymbol) {\n            // symbols but no commands\n            dom.reset(this._domNode, dom.$('span', undefined, 'no commands'));\n        }\n        else {\n            // symbols and commands\n            dom.reset(this._domNode, ...children);\n            if (this._isEmpty && animate) {\n                this._domNode.classList.add('fadein');\n            }\n            this._isEmpty = false;\n        }\n    }\n    getCommand(link) {\n        return link.parentElement === this._domNode\n            ? this._commands.get(link.id)\n            : undefined;\n    }\n    getId() {\n        return this._id;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    updatePosition(line) {\n        const column = this._editor.getModel().getLineFirstNonWhitespaceColumn(line);\n        this._widgetPosition = {\n            position: { lineNumber: line, column: column },\n            preference: [1 /* ContentWidgetPositionPreference.ABOVE */]\n        };\n    }\n    getPosition() {\n        return this._widgetPosition || null;\n    }\n}\nCodeLensContentWidget._idPool = 0;\nexport class CodeLensHelper {\n    constructor() {\n        this._removeDecorations = [];\n        this._addDecorations = [];\n        this._addDecorationsCallbacks = [];\n    }\n    addDecoration(decoration, callback) {\n        this._addDecorations.push(decoration);\n        this._addDecorationsCallbacks.push(callback);\n    }\n    removeDecoration(decorationId) {\n        this._removeDecorations.push(decorationId);\n    }\n    commit(changeAccessor) {\n        const resultingDecorations = changeAccessor.deltaDecorations(this._removeDecorations, this._addDecorations);\n        for (let i = 0, len = resultingDecorations.length; i < len; i++) {\n            this._addDecorationsCallbacks[i](resultingDecorations[i]);\n        }\n    }\n}\nconst codeLensDecorationOptions = ModelDecorationOptions.register({\n    collapseOnReplaceEdit: true,\n    description: 'codelens'\n});\nexport class CodeLensWidget {\n    constructor(data, editor, helper, viewZoneChangeAccessor, heightInPx, updateCallback) {\n        this._isDisposed = false;\n        this._editor = editor;\n        this._data = data;\n        // create combined range, track all ranges with decorations,\n        // check if there is already something to render\n        this._decorationIds = [];\n        let range;\n        const lenses = [];\n        this._data.forEach((codeLensData, i) => {\n            if (codeLensData.symbol.command) {\n                lenses.push(codeLensData.symbol);\n            }\n            helper.addDecoration({\n                range: codeLensData.symbol.range,\n                options: codeLensDecorationOptions\n            }, id => this._decorationIds[i] = id);\n            // the range contains all lenses on this line\n            if (!range) {\n                range = Range.lift(codeLensData.symbol.range);\n            }\n            else {\n                range = Range.plusRange(range, codeLensData.symbol.range);\n            }\n        });\n        this._viewZone = new CodeLensViewZone(range.startLineNumber - 1, heightInPx, updateCallback);\n        this._viewZoneId = viewZoneChangeAccessor.addZone(this._viewZone);\n        if (lenses.length > 0) {\n            this._createContentWidgetIfNecessary();\n            this._contentWidget.withCommands(lenses, false);\n        }\n    }\n    _createContentWidgetIfNecessary() {\n        if (!this._contentWidget) {\n            this._contentWidget = new CodeLensContentWidget(this._editor, this._viewZone.afterLineNumber + 1);\n            this._editor.addContentWidget(this._contentWidget);\n        }\n        else {\n            this._editor.layoutContentWidget(this._contentWidget);\n        }\n    }\n    dispose(helper, viewZoneChangeAccessor) {\n        this._decorationIds.forEach(helper.removeDecoration, helper);\n        this._decorationIds = [];\n        viewZoneChangeAccessor === null || viewZoneChangeAccessor === void 0 ? void 0 : viewZoneChangeAccessor.removeZone(this._viewZoneId);\n        if (this._contentWidget) {\n            this._editor.removeContentWidget(this._contentWidget);\n            this._contentWidget = undefined;\n        }\n        this._isDisposed = true;\n    }\n    isDisposed() {\n        return this._isDisposed;\n    }\n    isValid() {\n        return this._decorationIds.some((id, i) => {\n            const range = this._editor.getModel().getDecorationRange(id);\n            const symbol = this._data[i].symbol;\n            return !!(range && Range.isEmpty(symbol.range) === range.isEmpty());\n        });\n    }\n    updateCodeLensSymbols(data, helper) {\n        this._decorationIds.forEach(helper.removeDecoration, helper);\n        this._decorationIds = [];\n        this._data = data;\n        this._data.forEach((codeLensData, i) => {\n            helper.addDecoration({\n                range: codeLensData.symbol.range,\n                options: codeLensDecorationOptions\n            }, id => this._decorationIds[i] = id);\n        });\n    }\n    updateHeight(height, viewZoneChangeAccessor) {\n        this._viewZone.heightInPx = height;\n        viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n        if (this._contentWidget) {\n            this._editor.layoutContentWidget(this._contentWidget);\n        }\n    }\n    computeIfNecessary(model) {\n        if (!this._viewZone.isVisible()) {\n            return null;\n        }\n        // Read editor current state\n        for (let i = 0; i < this._decorationIds.length; i++) {\n            const range = model.getDecorationRange(this._decorationIds[i]);\n            if (range) {\n                this._data[i].symbol.range = range;\n            }\n        }\n        return this._data;\n    }\n    updateCommands(symbols) {\n        this._createContentWidgetIfNecessary();\n        this._contentWidget.withCommands(symbols, true);\n        for (let i = 0; i < this._data.length; i++) {\n            const resolved = symbols[i];\n            if (resolved) {\n                const { symbol } = this._data[i];\n                symbol.command = resolved.command || symbol.command;\n            }\n        }\n    }\n    getCommand(link) {\n        var _a;\n        return (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.getCommand(link);\n    }\n    getLineNumber() {\n        const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n        if (range) {\n            return range.startLineNumber;\n        }\n        return -1;\n    }\n    update(viewZoneChangeAccessor) {\n        if (this.isValid()) {\n            const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n            if (range) {\n                this._viewZone.afterLineNumber = range.startLineNumber - 1;\n                viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n                if (this._contentWidget) {\n                    this._contentWidget.updatePosition(range.startLineNumber);\n                    this._editor.layoutContentWidget(this._contentWidget);\n                }\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, disposableTimeout, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { getCodeLensModel } from './codelens.js';\nimport { ICodeLensCache } from './codeLensCache.js';\nimport { CodeLensHelper, CodeLensWidget } from './codelensWidget.js';\nimport { localize } from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet CodeLensContribution = class CodeLensContribution {\n    constructor(_editor, _languageFeaturesService, debounceService, _commandService, _notificationService, _codeLensCache) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._commandService = _commandService;\n        this._notificationService = _notificationService;\n        this._codeLensCache = _codeLensCache;\n        this._disposables = new DisposableStore();\n        this._localToDispose = new DisposableStore();\n        this._lenses = [];\n        this._oldCodeLensModels = new DisposableStore();\n        this._provideCodeLensDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensProvide', { min: 250 });\n        this._resolveCodeLensesDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensResolve', { min: 250, salt: 'resolve' });\n        this._resolveCodeLensesScheduler = new RunOnceScheduler(() => this._resolveCodeLensesInViewport(), this._resolveCodeLensesDebounce.default());\n        this._disposables.add(this._editor.onDidChangeModel(() => this._onModelChange()));\n        this._disposables.add(this._editor.onDidChangeModelLanguage(() => this._onModelChange()));\n        this._disposables.add(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(47 /* EditorOption.fontInfo */) || e.hasChanged(16 /* EditorOption.codeLensFontSize */) || e.hasChanged(15 /* EditorOption.codeLensFontFamily */)) {\n                this._updateLensStyle();\n            }\n            if (e.hasChanged(14 /* EditorOption.codeLens */)) {\n                this._onModelChange();\n            }\n        }));\n        this._disposables.add(_languageFeaturesService.codeLensProvider.onDidChange(this._onModelChange, this));\n        this._onModelChange();\n        this._updateLensStyle();\n    }\n    dispose() {\n        var _a;\n        this._localDispose();\n        this._disposables.dispose();\n        this._oldCodeLensModels.dispose();\n        (_a = this._currentCodeLensModel) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    _getLayoutInfo() {\n        const lineHeightFactor = Math.max(1.3, this._editor.getOption(63 /* EditorOption.lineHeight */) / this._editor.getOption(49 /* EditorOption.fontSize */));\n        let fontSize = this._editor.getOption(16 /* EditorOption.codeLensFontSize */);\n        if (!fontSize || fontSize < 5) {\n            fontSize = (this._editor.getOption(49 /* EditorOption.fontSize */) * .9) | 0;\n        }\n        return {\n            fontSize,\n            codeLensHeight: (fontSize * lineHeightFactor) | 0,\n        };\n    }\n    _updateLensStyle() {\n        const { codeLensHeight, fontSize } = this._getLayoutInfo();\n        const fontFamily = this._editor.getOption(15 /* EditorOption.codeLensFontFamily */);\n        const editorFontInfo = this._editor.getOption(47 /* EditorOption.fontInfo */);\n        const { style } = this._editor.getContainerDomNode();\n        style.setProperty('--vscode-editorCodeLens-lineHeight', `${codeLensHeight}px`);\n        style.setProperty('--vscode-editorCodeLens-fontSize', `${fontSize}px`);\n        style.setProperty('--vscode-editorCodeLens-fontFeatureSettings', editorFontInfo.fontFeatureSettings);\n        if (fontFamily) {\n            style.setProperty('--vscode-editorCodeLens-fontFamily', fontFamily);\n            style.setProperty('--vscode-editorCodeLens-fontFamilyDefault', EDITOR_FONT_DEFAULTS.fontFamily);\n        }\n        //\n        this._editor.changeViewZones(accessor => {\n            for (const lens of this._lenses) {\n                lens.updateHeight(codeLensHeight, accessor);\n            }\n        });\n    }\n    _localDispose() {\n        var _a, _b, _c;\n        (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n        this._getCodeLensModelPromise = undefined;\n        (_b = this._resolveCodeLensesPromise) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._resolveCodeLensesPromise = undefined;\n        this._localToDispose.clear();\n        this._oldCodeLensModels.clear();\n        (_c = this._currentCodeLensModel) === null || _c === void 0 ? void 0 : _c.dispose();\n    }\n    _onModelChange() {\n        this._localDispose();\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (!this._editor.getOption(14 /* EditorOption.codeLens */)) {\n            return;\n        }\n        const cachedLenses = this._codeLensCache.get(model);\n        if (cachedLenses) {\n            this._renderCodeLensSymbols(cachedLenses);\n        }\n        if (!this._languageFeaturesService.codeLensProvider.has(model)) {\n            // no provider -> return but check with\n            // cached lenses. they expire after 30 seconds\n            if (cachedLenses) {\n                this._localToDispose.add(disposableTimeout(() => {\n                    const cachedLensesNow = this._codeLensCache.get(model);\n                    if (cachedLenses === cachedLensesNow) {\n                        this._codeLensCache.delete(model);\n                        this._onModelChange();\n                    }\n                }, 30 * 1000));\n            }\n            return;\n        }\n        for (const provider of this._languageFeaturesService.codeLensProvider.all(model)) {\n            if (typeof provider.onDidChange === 'function') {\n                const registration = provider.onDidChange(() => scheduler.schedule());\n                this._localToDispose.add(registration);\n            }\n        }\n        const scheduler = new RunOnceScheduler(() => {\n            var _a;\n            const t1 = Date.now();\n            (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._getCodeLensModelPromise = createCancelablePromise(token => getCodeLensModel(this._languageFeaturesService.codeLensProvider, model, token));\n            this._getCodeLensModelPromise.then(result => {\n                if (this._currentCodeLensModel) {\n                    this._oldCodeLensModels.add(this._currentCodeLensModel);\n                }\n                this._currentCodeLensModel = result;\n                // cache model to reduce flicker\n                this._codeLensCache.put(model, result);\n                // update moving average\n                const newDelay = this._provideCodeLensDebounce.update(model, Date.now() - t1);\n                scheduler.delay = newDelay;\n                // render lenses\n                this._renderCodeLensSymbols(result);\n                // dom.scheduleAtNextAnimationFrame(() => this._resolveCodeLensesInViewport());\n                this._resolveCodeLensesInViewportSoon();\n            }, onUnexpectedError);\n        }, this._provideCodeLensDebounce.get(model));\n        this._localToDispose.add(scheduler);\n        this._localToDispose.add(toDisposable(() => this._resolveCodeLensesScheduler.cancel()));\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n            this._editor.changeDecorations(decorationsAccessor => {\n                this._editor.changeViewZones(viewZonesAccessor => {\n                    const toDispose = [];\n                    let lastLensLineNumber = -1;\n                    this._lenses.forEach((lens) => {\n                        if (!lens.isValid() || lastLensLineNumber === lens.getLineNumber()) {\n                            // invalid -> lens collapsed, attach range doesn't exist anymore\n                            // line_number -> lenses should never be on the same line\n                            toDispose.push(lens);\n                        }\n                        else {\n                            lens.update(viewZonesAccessor);\n                            lastLensLineNumber = lens.getLineNumber();\n                        }\n                    });\n                    const helper = new CodeLensHelper();\n                    toDispose.forEach((l) => {\n                        l.dispose(helper, viewZonesAccessor);\n                        this._lenses.splice(this._lenses.indexOf(l), 1);\n                    });\n                    helper.commit(decorationsAccessor);\n                });\n            });\n            // Ask for all references again\n            scheduler.schedule();\n        }));\n        this._localToDispose.add(this._editor.onDidFocusEditorWidget(() => {\n            scheduler.schedule();\n        }));\n        this._localToDispose.add(this._editor.onDidScrollChange(e => {\n            if (e.scrollTopChanged && this._lenses.length > 0) {\n                this._resolveCodeLensesInViewportSoon();\n            }\n        }));\n        this._localToDispose.add(this._editor.onDidLayoutChange(() => {\n            this._resolveCodeLensesInViewportSoon();\n        }));\n        this._localToDispose.add(toDisposable(() => {\n            if (this._editor.getModel()) {\n                const scrollState = StableEditorScrollState.capture(this._editor);\n                this._editor.changeDecorations(decorationsAccessor => {\n                    this._editor.changeViewZones(viewZonesAccessor => {\n                        this._disposeAllLenses(decorationsAccessor, viewZonesAccessor);\n                    });\n                });\n                scrollState.restore(this._editor);\n            }\n            else {\n                // No accessors available\n                this._disposeAllLenses(undefined, undefined);\n            }\n        }));\n        this._localToDispose.add(this._editor.onMouseDown(e => {\n            if (e.target.type !== 9 /* MouseTargetType.CONTENT_WIDGET */) {\n                return;\n            }\n            let target = e.target.element;\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'SPAN') {\n                target = target.parentElement;\n            }\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'A') {\n                for (const lens of this._lenses) {\n                    const command = lens.getCommand(target);\n                    if (command) {\n                        this._commandService.executeCommand(command.id, ...(command.arguments || [])).catch(err => this._notificationService.error(err));\n                        break;\n                    }\n                }\n            }\n        }));\n        scheduler.schedule();\n    }\n    _disposeAllLenses(decChangeAccessor, viewZoneChangeAccessor) {\n        const helper = new CodeLensHelper();\n        for (const lens of this._lenses) {\n            lens.dispose(helper, viewZoneChangeAccessor);\n        }\n        if (decChangeAccessor) {\n            helper.commit(decChangeAccessor);\n        }\n        this._lenses.length = 0;\n    }\n    _renderCodeLensSymbols(symbols) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const maxLineNumber = this._editor.getModel().getLineCount();\n        const groups = [];\n        let lastGroup;\n        for (const symbol of symbols.lenses) {\n            const line = symbol.symbol.range.startLineNumber;\n            if (line < 1 || line > maxLineNumber) {\n                // invalid code lens\n                continue;\n            }\n            else if (lastGroup && lastGroup[lastGroup.length - 1].symbol.range.startLineNumber === line) {\n                // on same line as previous\n                lastGroup.push(symbol);\n            }\n            else {\n                // on later line as previous\n                lastGroup = [symbol];\n                groups.push(lastGroup);\n            }\n        }\n        if (!groups.length && !this._lenses.length) {\n            // Nothing to change\n            return;\n        }\n        const scrollState = StableEditorScrollState.capture(this._editor);\n        const layoutInfo = this._getLayoutInfo();\n        this._editor.changeDecorations(decorationsAccessor => {\n            this._editor.changeViewZones(viewZoneAccessor => {\n                const helper = new CodeLensHelper();\n                let codeLensIndex = 0;\n                let groupsIndex = 0;\n                while (groupsIndex < groups.length && codeLensIndex < this._lenses.length) {\n                    const symbolsLineNumber = groups[groupsIndex][0].symbol.range.startLineNumber;\n                    const codeLensLineNumber = this._lenses[codeLensIndex].getLineNumber();\n                    if (codeLensLineNumber < symbolsLineNumber) {\n                        this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n                        this._lenses.splice(codeLensIndex, 1);\n                    }\n                    else if (codeLensLineNumber === symbolsLineNumber) {\n                        this._lenses[codeLensIndex].updateCodeLensSymbols(groups[groupsIndex], helper);\n                        groupsIndex++;\n                        codeLensIndex++;\n                    }\n                    else {\n                        this._lenses.splice(codeLensIndex, 0, new CodeLensWidget(groups[groupsIndex], this._editor, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n                        codeLensIndex++;\n                        groupsIndex++;\n                    }\n                }\n                // Delete extra code lenses\n                while (codeLensIndex < this._lenses.length) {\n                    this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n                    this._lenses.splice(codeLensIndex, 1);\n                }\n                // Create extra symbols\n                while (groupsIndex < groups.length) {\n                    this._lenses.push(new CodeLensWidget(groups[groupsIndex], this._editor, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n                    groupsIndex++;\n                }\n                helper.commit(decorationsAccessor);\n            });\n        });\n        scrollState.restore(this._editor);\n    }\n    _resolveCodeLensesInViewportSoon() {\n        const model = this._editor.getModel();\n        if (model) {\n            this._resolveCodeLensesScheduler.schedule();\n        }\n    }\n    _resolveCodeLensesInViewport() {\n        var _a;\n        (_a = this._resolveCodeLensesPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n        this._resolveCodeLensesPromise = undefined;\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        const toResolve = [];\n        const lenses = [];\n        this._lenses.forEach((lens) => {\n            const request = lens.computeIfNecessary(model);\n            if (request) {\n                toResolve.push(request);\n                lenses.push(lens);\n            }\n        });\n        if (toResolve.length === 0) {\n            return;\n        }\n        const t1 = Date.now();\n        const resolvePromise = createCancelablePromise(token => {\n            const promises = toResolve.map((request, i) => {\n                const resolvedSymbols = new Array(request.length);\n                const promises = request.map((request, i) => {\n                    if (!request.symbol.command && typeof request.provider.resolveCodeLens === 'function') {\n                        return Promise.resolve(request.provider.resolveCodeLens(model, request.symbol, token)).then(symbol => {\n                            resolvedSymbols[i] = symbol;\n                        }, onUnexpectedExternalError);\n                    }\n                    else {\n                        resolvedSymbols[i] = request.symbol;\n                        return Promise.resolve(undefined);\n                    }\n                });\n                return Promise.all(promises).then(() => {\n                    if (!token.isCancellationRequested && !lenses[i].isDisposed()) {\n                        lenses[i].updateCommands(resolvedSymbols);\n                    }\n                });\n            });\n            return Promise.all(promises);\n        });\n        this._resolveCodeLensesPromise = resolvePromise;\n        this._resolveCodeLensesPromise.then(() => {\n            // update moving average\n            const newDelay = this._resolveCodeLensesDebounce.update(model, Date.now() - t1);\n            this._resolveCodeLensesScheduler.delay = newDelay;\n            if (this._currentCodeLensModel) { // update the cached state with new resolved items\n                this._codeLensCache.put(model, this._currentCodeLensModel);\n            }\n            this._oldCodeLensModels.clear(); // dispose old models once we have updated the UI with the current model\n            if (resolvePromise === this._resolveCodeLensesPromise) {\n                this._resolveCodeLensesPromise = undefined;\n            }\n        }, err => {\n            onUnexpectedError(err); // can also be cancellation!\n            if (resolvePromise === this._resolveCodeLensesPromise) {\n                this._resolveCodeLensesPromise = undefined;\n            }\n        });\n    }\n    getModel() {\n        return this._currentCodeLensModel;\n    }\n};\nCodeLensContribution.ID = 'css.editor.codeLens';\nCodeLensContribution = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ILanguageFeatureDebounceService),\n    __param(3, ICommandService),\n    __param(4, INotificationService),\n    __param(5, ICodeLensCache)\n], CodeLensContribution);\nexport { CodeLensContribution };\nregisterEditorContribution(CodeLensContribution.ID, CodeLensContribution, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(class ShowLensesInCurrentLine extends EditorAction {\n    constructor() {\n        super({\n            id: 'codelens.showLensesInCurrentLine',\n            precondition: EditorContextKeys.hasCodeLensProvider,\n            label: localize('showLensOnLine', \"Show CodeLens Commands For Current Line\"),\n            alias: 'Show CodeLens Commands For Current Line',\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.hasModel()) {\n                return;\n            }\n            const quickInputService = accessor.get(IQuickInputService);\n            const commandService = accessor.get(ICommandService);\n            const notificationService = accessor.get(INotificationService);\n            const lineNumber = editor.getSelection().positionLineNumber;\n            const codelensController = editor.getContribution(CodeLensContribution.ID);\n            if (!codelensController) {\n                return;\n            }\n            const model = codelensController.getModel();\n            if (!model) {\n                // nothing\n                return;\n            }\n            const items = [];\n            for (const lens of model.lenses) {\n                if (lens.symbol.command && lens.symbol.range.startLineNumber === lineNumber) {\n                    items.push({\n                        label: lens.symbol.command.title,\n                        command: lens.symbol.command\n                    });\n                }\n            }\n            if (items.length === 0) {\n                // We dont want an empty picker\n                return;\n            }\n            const item = yield quickInputService.pick(items, { canPickMany: false });\n            if (!item) {\n                // Nothing picked\n                return;\n            }\n            if (model.isDisposed) {\n                // retry whenever the model has been disposed\n                return yield commandService.executeCommand(this.id);\n            }\n            try {\n                yield commandService.executeCommand(item.command.id, ...(item.command.arguments || []));\n            }\n            catch (err) {\n                notificationService.error(err);\n            }\n        });\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument } from '../../../../base/common/errors.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport function getColors(registry, model, token) {\n    const colors = [];\n    const providers = registry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideDocumentColors(model, token)).then(result => {\n        if (Array.isArray(result)) {\n            for (const colorInfo of result) {\n                colors.push({ colorInfo, provider });\n            }\n        }\n    }));\n    return Promise.all(promises).then(() => colors);\n}\nexport function getColorPresentations(model, colorInfo, provider, token) {\n    return Promise.resolve(provider.provideColorPresentations(model, colorInfo, token));\n}\nCommandsRegistry.registerCommand('_executeDocumentColorProvider', function (accessor, ...args) {\n    const [resource] = args;\n    if (!(resource instanceof URI)) {\n        throw illegalArgument();\n    }\n    const { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(resource);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const rawCIs = [];\n    const providers = colorProviderRegistry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideDocumentColors(model, CancellationToken.None)).then(result => {\n        if (Array.isArray(result)) {\n            for (const ci of result) {\n                rawCIs.push({ range: ci.range, color: [ci.color.red, ci.color.green, ci.color.blue, ci.color.alpha] });\n            }\n        }\n    }));\n    return Promise.all(promises).then(() => rawCIs);\n});\nCommandsRegistry.registerCommand('_executeColorPresentationProvider', function (accessor, ...args) {\n    const [color, context] = args;\n    const { uri, range } = context;\n    if (!(uri instanceof URI) || !Array.isArray(color) || color.length !== 4 || !Range.isIRange(range)) {\n        throw illegalArgument();\n    }\n    const [red, green, blue, alpha] = color;\n    const { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const colorInfo = {\n        range,\n        color: { red, green, blue, alpha }\n    };\n    const presentations = [];\n    const providers = colorProviderRegistry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideColorPresentations(model, colorInfo, CancellationToken.None)).then(result => {\n        if (Array.isArray(result)) {\n            presentations.push(...result);\n        }\n    }));\n    return Promise.all(promises).then(() => presentations);\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { RGBA } from '../../../../base/common/color.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { noBreakWhitespace } from '../../../../base/common/strings.js';\nimport { DynamicCssRules } from '../../../browser/editorDom.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { getColors } from './color.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport const ColorDecorationInjectedTextMarker = Object.create({});\nlet ColorDetector = class ColorDetector extends Disposable {\n    constructor(_editor, _configurationService, _languageFeaturesService, languageFeatureDebounceService) {\n        super();\n        this._editor = _editor;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._localToDispose = this._register(new DisposableStore());\n        this._decorationsIds = [];\n        this._colorDatas = new Map();\n        this._colorDecoratorIds = this._editor.createDecorationsCollection();\n        this._ruleFactory = new DynamicCssRules(this._editor);\n        this._decoratorLimitReporter = new DecoratorLimitReporter();\n        this._colorDecorationClassRefs = this._register(new DisposableStore());\n        this._debounceInformation = languageFeatureDebounceService.for(_languageFeaturesService.colorProvider, 'Document Colors', { min: ColorDetector.RECOMPUTE_TIME });\n        this._register(_editor.onDidChangeModel(() => {\n            this._isEnabled = this.isEnabled();\n            this.onModelChanged();\n        }));\n        this._register(_editor.onDidChangeModelLanguage(() => this.onModelChanged()));\n        this._register(_languageFeaturesService.colorProvider.onDidChange(() => this.onModelChanged()));\n        this._register(_editor.onDidChangeConfiguration((e) => {\n            const prevIsEnabled = this._isEnabled;\n            this._isEnabled = this.isEnabled();\n            const updated = prevIsEnabled !== this._isEnabled || e.hasChanged(18 /* EditorOption.colorDecoratorsLimit */);\n            if (updated) {\n                if (this._isEnabled) {\n                    this.onModelChanged();\n                }\n                else {\n                    this.removeAllDecorations();\n                }\n            }\n        }));\n        this._timeoutTimer = null;\n        this._computePromise = null;\n        this._isEnabled = this.isEnabled();\n        this.onModelChanged();\n    }\n    isEnabled() {\n        const model = this._editor.getModel();\n        if (!model) {\n            return false;\n        }\n        const languageId = model.getLanguageId();\n        // handle deprecated settings. [languageId].colorDecorators.enable\n        const deprecatedConfig = this._configurationService.getValue(languageId);\n        if (deprecatedConfig && typeof deprecatedConfig === 'object') {\n            const colorDecorators = deprecatedConfig['colorDecorators']; // deprecatedConfig.valueOf('.colorDecorators.enable');\n            if (colorDecorators && colorDecorators['enable'] !== undefined && !colorDecorators['enable']) {\n                return colorDecorators['enable'];\n            }\n        }\n        return this._editor.getOption(17 /* EditorOption.colorDecorators */);\n    }\n    static get(editor) {\n        return editor.getContribution(this.ID);\n    }\n    dispose() {\n        this.stop();\n        this.removeAllDecorations();\n        super.dispose();\n    }\n    onModelChanged() {\n        this.stop();\n        if (!this._isEnabled) {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (!model || !this._languageFeaturesService.colorProvider.has(model)) {\n            return;\n        }\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n            if (!this._timeoutTimer) {\n                this._timeoutTimer = new TimeoutTimer();\n                this._timeoutTimer.cancelAndSet(() => {\n                    this._timeoutTimer = null;\n                    this.beginCompute();\n                }, this._debounceInformation.get(model));\n            }\n        }));\n        this.beginCompute();\n    }\n    beginCompute() {\n        this._computePromise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n            const model = this._editor.getModel();\n            if (!model) {\n                return Promise.resolve([]);\n            }\n            const sw = new StopWatch(false);\n            const colors = yield getColors(this._languageFeaturesService.colorProvider, model, token);\n            this._debounceInformation.update(model, sw.elapsed());\n            return colors;\n        }));\n        this._computePromise.then((colorInfos) => {\n            this.updateDecorations(colorInfos);\n            this.updateColorDecorators(colorInfos);\n            this._computePromise = null;\n        }, onUnexpectedError);\n    }\n    stop() {\n        if (this._timeoutTimer) {\n            this._timeoutTimer.cancel();\n            this._timeoutTimer = null;\n        }\n        if (this._computePromise) {\n            this._computePromise.cancel();\n            this._computePromise = null;\n        }\n        this._localToDispose.clear();\n    }\n    updateDecorations(colorDatas) {\n        const decorations = colorDatas.map(c => ({\n            range: {\n                startLineNumber: c.colorInfo.range.startLineNumber,\n                startColumn: c.colorInfo.range.startColumn,\n                endLineNumber: c.colorInfo.range.endLineNumber,\n                endColumn: c.colorInfo.range.endColumn\n            },\n            options: ModelDecorationOptions.EMPTY\n        }));\n        this._editor.changeDecorations((changeAccessor) => {\n            this._decorationsIds = changeAccessor.deltaDecorations(this._decorationsIds, decorations);\n            this._colorDatas = new Map();\n            this._decorationsIds.forEach((id, i) => this._colorDatas.set(id, colorDatas[i]));\n        });\n    }\n    updateColorDecorators(colorData) {\n        this._colorDecorationClassRefs.clear();\n        const decorations = [];\n        const limit = this._editor.getOption(18 /* EditorOption.colorDecoratorsLimit */);\n        for (let i = 0; i < colorData.length && decorations.length < limit; i++) {\n            const { red, green, blue, alpha } = colorData[i].colorInfo.color;\n            const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n            const color = `rgba(${rgba.r}, ${rgba.g}, ${rgba.b}, ${rgba.a})`;\n            const ref = this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({\n                backgroundColor: color\n            }));\n            decorations.push({\n                range: {\n                    startLineNumber: colorData[i].colorInfo.range.startLineNumber,\n                    startColumn: colorData[i].colorInfo.range.startColumn,\n                    endLineNumber: colorData[i].colorInfo.range.endLineNumber,\n                    endColumn: colorData[i].colorInfo.range.endColumn\n                },\n                options: {\n                    description: 'colorDetector',\n                    before: {\n                        content: noBreakWhitespace,\n                        inlineClassName: `${ref.className} colorpicker-color-decoration`,\n                        inlineClassNameAffectsLetterSpacing: true,\n                        attachedData: ColorDecorationInjectedTextMarker\n                    }\n                }\n            });\n        }\n        const limited = limit < colorData.length ? limit : false;\n        this._decoratorLimitReporter.update(colorData.length, limited);\n        this._colorDecoratorIds.set(decorations);\n    }\n    removeAllDecorations() {\n        this._editor.removeDecorations(this._decorationsIds);\n        this._decorationsIds = [];\n        this._colorDecoratorIds.clear();\n        this._colorDecorationClassRefs.clear();\n    }\n    getColorData(position) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return null;\n        }\n        const decorations = model\n            .getDecorationsInRange(Range.fromPositions(position, position))\n            .filter(d => this._colorDatas.has(d.id));\n        if (decorations.length === 0) {\n            return null;\n        }\n        return this._colorDatas.get(decorations[0].id);\n    }\n    isColorDecoration(decoration) {\n        return this._colorDecoratorIds.has(decoration);\n    }\n};\nColorDetector.ID = 'editor.contrib.colorDetector';\nColorDetector.RECOMPUTE_TIME = 1000; // ms\nColorDetector = __decorate([\n    __param(1, IConfigurationService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, ILanguageFeatureDebounceService)\n], ColorDetector);\nexport { ColorDetector };\nexport class DecoratorLimitReporter {\n    constructor() {\n        this._onDidChange = new Emitter();\n        this._computed = 0;\n        this._limited = false;\n    }\n    update(computed, limited) {\n        if (computed !== this._computed || limited !== this._limited) {\n            this._computed = computed;\n            this._limited = limited;\n            this._onDidChange.fire();\n        }\n    }\n}\nregisterEditorContribution(ColorDetector.ID, ColorDetector, 1 /* EditorContributionInstantiation.AfterFirstRender */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nexport class ColorPickerModel {\n    get color() {\n        return this._color;\n    }\n    set color(color) {\n        if (this._color.equals(color)) {\n            return;\n        }\n        this._color = color;\n        this._onDidChangeColor.fire(color);\n    }\n    get presentation() { return this.colorPresentations[this.presentationIndex]; }\n    get colorPresentations() {\n        return this._colorPresentations;\n    }\n    set colorPresentations(colorPresentations) {\n        this._colorPresentations = colorPresentations;\n        if (this.presentationIndex > colorPresentations.length - 1) {\n            this.presentationIndex = 0;\n        }\n        this._onDidChangePresentation.fire(this.presentation);\n    }\n    constructor(color, availableColorPresentations, presentationIndex) {\n        this.presentationIndex = presentationIndex;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this._onDidChangeColor = new Emitter();\n        this.onDidChangeColor = this._onDidChangeColor.event;\n        this._onDidChangePresentation = new Emitter();\n        this.onDidChangePresentation = this._onDidChangePresentation.event;\n        this.originalColor = color;\n        this._color = color;\n        this._colorPresentations = availableColorPresentations;\n    }\n    selectNextColorPresentation() {\n        this.presentationIndex = (this.presentationIndex + 1) % this.colorPresentations.length;\n        this.flushColor();\n        this._onDidChangePresentation.fire(this.presentation);\n    }\n    guessColorPresentation(color, originalText) {\n        let presentationIndex = -1;\n        for (let i = 0; i < this.colorPresentations.length; i++) {\n            if (originalText.toLowerCase() === this.colorPresentations[i].label) {\n                presentationIndex = i;\n                break;\n            }\n        }\n        if (presentationIndex === -1) {\n            // check which color presentation text has same prefix as original text's prefix\n            const originalTextPrefix = originalText.split('(')[0].toLowerCase();\n            for (let i = 0; i < this.colorPresentations.length; i++) {\n                if (this.colorPresentations[i].label.toLowerCase().startsWith(originalTextPrefix)) {\n                    presentationIndex = i;\n                    break;\n                }\n            }\n        }\n        if (presentationIndex !== -1 && presentationIndex !== this.presentationIndex) {\n            this.presentationIndex = presentationIndex;\n            this._onDidChangePresentation.fire(this.presentation);\n        }\n    }\n    flushColor() {\n        this._onColorFlushed.fire(this._color);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { PixelRatio } from '../../../../base/browser/browser.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { GlobalPointerMoveMonitor } from '../../../../base/browser/globalPointerMoveMonitor.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Color, HSVA, RGBA } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './colorPicker.css';\nimport { localize } from '../../../../nls.js';\nimport { editorHoverBackground } from '../../../../platform/theme/common/colorRegistry.js';\nconst $ = dom.$;\nexport class ColorPickerHeader extends Disposable {\n    constructor(container, model, themeService) {\n        super();\n        this.model = model;\n        this.domNode = $('.colorpicker-header');\n        dom.append(container, this.domNode);\n        this.pickedColorNode = dom.append(this.domNode, $('.picked-color'));\n        const tooltip = localize('clickToToggleColorOptions', \"Click to toggle color options (rgb/hsl/hex)\");\n        this.pickedColorNode.setAttribute('title', tooltip);\n        const colorBox = dom.append(this.domNode, $('.original-color'));\n        colorBox.style.backgroundColor = Color.Format.CSS.format(this.model.originalColor) || '';\n        this.backgroundColor = themeService.getColorTheme().getColor(editorHoverBackground) || Color.white;\n        this._register(themeService.onDidColorThemeChange(theme => {\n            this.backgroundColor = theme.getColor(editorHoverBackground) || Color.white;\n        }));\n        this._register(dom.addDisposableListener(this.pickedColorNode, dom.EventType.CLICK, () => this.model.selectNextColorPresentation()));\n        this._register(dom.addDisposableListener(colorBox, dom.EventType.CLICK, () => {\n            this.model.color = this.model.originalColor;\n            this.model.flushColor();\n        }));\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n        this._register(model.onDidChangePresentation(this.onDidChangePresentation, this));\n        this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(model.color) || '';\n        this.pickedColorNode.classList.toggle('light', model.color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : model.color.isLighter());\n        this.onDidChangeColor(this.model.color);\n    }\n    onDidChangeColor(color) {\n        this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(color) || '';\n        this.pickedColorNode.classList.toggle('light', color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : color.isLighter());\n        this.onDidChangePresentation();\n    }\n    onDidChangePresentation() {\n        this.pickedColorNode.textContent = this.model.presentation ? this.model.presentation.label : '';\n        this.pickedColorNode.prepend($('.codicon.codicon-color-mode'));\n    }\n}\nexport class ColorPickerBody extends Disposable {\n    constructor(container, model, pixelRatio) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this.domNode = $('.colorpicker-body');\n        dom.append(container, this.domNode);\n        this.saturationBox = new SaturationBox(this.domNode, this.model, this.pixelRatio);\n        this._register(this.saturationBox);\n        this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange, this));\n        this._register(this.saturationBox.onColorFlushed(this.flushColor, this));\n        this.opacityStrip = new OpacityStrip(this.domNode, this.model);\n        this._register(this.opacityStrip);\n        this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange, this));\n        this._register(this.opacityStrip.onColorFlushed(this.flushColor, this));\n        this.hueStrip = new HueStrip(this.domNode, this.model);\n        this._register(this.hueStrip);\n        this._register(this.hueStrip.onDidChange(this.onDidHueChange, this));\n        this._register(this.hueStrip.onColorFlushed(this.flushColor, this));\n    }\n    flushColor() {\n        this.model.flushColor();\n    }\n    onDidSaturationValueChange({ s, v }) {\n        const hsva = this.model.color.hsva;\n        this.model.color = new Color(new HSVA(hsva.h, s, v, hsva.a));\n    }\n    onDidOpacityChange(a) {\n        const hsva = this.model.color.hsva;\n        this.model.color = new Color(new HSVA(hsva.h, hsva.s, hsva.v, a));\n    }\n    onDidHueChange(value) {\n        const hsva = this.model.color.hsva;\n        const h = (1 - value) * 360;\n        this.model.color = new Color(new HSVA(h === 360 ? 0 : h, hsva.s, hsva.v, hsva.a));\n    }\n    layout() {\n        this.saturationBox.layout();\n        this.opacityStrip.layout();\n        this.hueStrip.layout();\n    }\n}\nclass SaturationBox extends Disposable {\n    constructor(container, model, pixelRatio) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this.domNode = $('.saturation-wrap');\n        dom.append(container, this.domNode);\n        // Create canvas, draw selected color\n        this.canvas = document.createElement('canvas');\n        this.canvas.className = 'saturation-box';\n        dom.append(this.domNode, this.canvas);\n        // Add selection circle\n        this.selection = $('.saturation-selection');\n        dom.append(this.domNode, this.selection);\n        this.layout();\n        this._register(dom.addDisposableListener(this.domNode, dom.EventType.POINTER_DOWN, e => this.onPointerDown(e)));\n        this._register(this.model.onDidChangeColor(this.onDidChangeColor, this));\n        this.monitor = null;\n    }\n    onPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        this.monitor = this._register(new GlobalPointerMoveMonitor());\n        const origin = dom.getDomNodePagePosition(this.domNode);\n        if (e.target !== this.selection) {\n            this.onDidChangePosition(e.offsetX, e.offsetY);\n        }\n        this.monitor.startMonitoring(e.target, e.pointerId, e.buttons, event => this.onDidChangePosition(event.pageX - origin.left, event.pageY - origin.top), () => null);\n        const pointerUpListener = dom.addDisposableListener(document, dom.EventType.POINTER_UP, () => {\n            this._onColorFlushed.fire();\n            pointerUpListener.dispose();\n            if (this.monitor) {\n                this.monitor.stopMonitoring(true);\n                this.monitor = null;\n            }\n        }, true);\n    }\n    onDidChangePosition(left, top) {\n        const s = Math.max(0, Math.min(1, left / this.width));\n        const v = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.paintSelection(s, v);\n        this._onDidChange.fire({ s, v });\n    }\n    layout() {\n        this.width = this.domNode.offsetWidth;\n        this.height = this.domNode.offsetHeight;\n        this.canvas.width = this.width * this.pixelRatio;\n        this.canvas.height = this.height * this.pixelRatio;\n        this.paint();\n        const hsva = this.model.color.hsva;\n        this.paintSelection(hsva.s, hsva.v);\n    }\n    paint() {\n        const hsva = this.model.color.hsva;\n        const saturatedColor = new Color(new HSVA(hsva.h, 1, 1, 1));\n        const ctx = this.canvas.getContext('2d');\n        const whiteGradient = ctx.createLinearGradient(0, 0, this.canvas.width, 0);\n        whiteGradient.addColorStop(0, 'rgba(255, 255, 255, 1)');\n        whiteGradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');\n        whiteGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n        const blackGradient = ctx.createLinearGradient(0, 0, 0, this.canvas.height);\n        blackGradient.addColorStop(0, 'rgba(0, 0, 0, 0)');\n        blackGradient.addColorStop(1, 'rgba(0, 0, 0, 1)');\n        ctx.rect(0, 0, this.canvas.width, this.canvas.height);\n        ctx.fillStyle = Color.Format.CSS.format(saturatedColor);\n        ctx.fill();\n        ctx.fillStyle = whiteGradient;\n        ctx.fill();\n        ctx.fillStyle = blackGradient;\n        ctx.fill();\n    }\n    paintSelection(s, v) {\n        this.selection.style.left = `${s * this.width}px`;\n        this.selection.style.top = `${this.height - v * this.height}px`;\n    }\n    onDidChangeColor() {\n        if (this.monitor && this.monitor.isMonitoring()) {\n            return;\n        }\n        this.paint();\n    }\n}\nclass Strip extends Disposable {\n    constructor(container, model) {\n        super();\n        this.model = model;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this.domNode = dom.append(container, $('.strip'));\n        this.overlay = dom.append(this.domNode, $('.overlay'));\n        this.slider = dom.append(this.domNode, $('.slider'));\n        this.slider.style.top = `0px`;\n        this._register(dom.addDisposableListener(this.domNode, dom.EventType.POINTER_DOWN, e => this.onPointerDown(e)));\n        this.layout();\n    }\n    layout() {\n        this.height = this.domNode.offsetHeight - this.slider.offsetHeight;\n        const value = this.getValue(this.model.color);\n        this.updateSliderPosition(value);\n    }\n    onPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        const monitor = this._register(new GlobalPointerMoveMonitor());\n        const origin = dom.getDomNodePagePosition(this.domNode);\n        this.domNode.classList.add('grabbing');\n        if (e.target !== this.slider) {\n            this.onDidChangeTop(e.offsetY);\n        }\n        monitor.startMonitoring(e.target, e.pointerId, e.buttons, event => this.onDidChangeTop(event.pageY - origin.top), () => null);\n        const pointerUpListener = dom.addDisposableListener(document, dom.EventType.POINTER_UP, () => {\n            this._onColorFlushed.fire();\n            pointerUpListener.dispose();\n            monitor.stopMonitoring(true);\n            this.domNode.classList.remove('grabbing');\n        }, true);\n    }\n    onDidChangeTop(top) {\n        const value = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.updateSliderPosition(value);\n        this._onDidChange.fire(value);\n    }\n    updateSliderPosition(value) {\n        this.slider.style.top = `${(1 - value) * this.height}px`;\n    }\n}\nclass OpacityStrip extends Strip {\n    constructor(container, model) {\n        super(container, model);\n        this.domNode.classList.add('opacity-strip');\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n        this.onDidChangeColor(this.model.color);\n    }\n    onDidChangeColor(color) {\n        const { r, g, b } = color.rgba;\n        const opaque = new Color(new RGBA(r, g, b, 1));\n        const transparent = new Color(new RGBA(r, g, b, 0));\n        this.overlay.style.background = `linear-gradient(to bottom, ${opaque} 0%, ${transparent} 100%)`;\n    }\n    getValue(color) {\n        return color.hsva.a;\n    }\n}\nclass HueStrip extends Strip {\n    constructor(container, model) {\n        super(container, model);\n        this.domNode.classList.add('hue-strip');\n    }\n    getValue(color) {\n        return 1 - (color.hsva.h / 360);\n    }\n}\nexport class ColorPickerWidget extends Widget {\n    constructor(container, model, pixelRatio, themeService) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._register(PixelRatio.onDidChange(() => this.layout()));\n        const element = $('.colorpicker-widget');\n        container.appendChild(element);\n        const header = new ColorPickerHeader(element, this.model, themeService);\n        this.body = new ColorPickerBody(element, this.model, this.pixelRatio);\n        this._register(header);\n        this._register(this.body);\n    }\n    layout() {\n        this.body.layout();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../common/core/range.js';\nimport { getColorPresentations } from './color.js';\nimport { ColorDetector } from './colorDetector.js';\nimport { ColorPickerModel } from './colorPickerModel.js';\nimport { ColorPickerWidget } from './colorPickerWidget.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nexport class ColorHover {\n    constructor(owner, range, model, provider) {\n        this.owner = owner;\n        this.range = range;\n        this.model = model;\n        this.provider = provider;\n        /**\n         * Force the hover to always be rendered at this specific range,\n         * even in the case of multiple hover parts.\n         */\n        this.forceShowAtRange = true;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nlet ColorHoverParticipant = class ColorHoverParticipant {\n    constructor(_editor, _themeService) {\n        this._editor = _editor;\n        this._themeService = _themeService;\n        this.hoverOrdinal = 1;\n    }\n    computeSync(anchor, lineDecorations) {\n        return [];\n    }\n    computeAsync(anchor, lineDecorations, token) {\n        return AsyncIterableObject.fromPromise(this._computeAsync(anchor, lineDecorations, token));\n    }\n    _computeAsync(anchor, lineDecorations, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return [];\n            }\n            const colorDetector = ColorDetector.get(this._editor);\n            if (!colorDetector) {\n                return [];\n            }\n            for (const d of lineDecorations) {\n                if (!colorDetector.isColorDecoration(d)) {\n                    continue;\n                }\n                const colorData = colorDetector.getColorData(d.range.getStartPosition());\n                if (colorData) {\n                    const colorHover = yield this._createColorHover(this._editor.getModel(), colorData.colorInfo, colorData.provider);\n                    return [colorHover];\n                }\n            }\n            return [];\n        });\n    }\n    _createColorHover(editorModel, colorInfo, provider) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const originalText = editorModel.getValueInRange(colorInfo.range);\n            const { red, green, blue, alpha } = colorInfo.color;\n            const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n            const color = new Color(rgba);\n            const colorPresentations = yield getColorPresentations(editorModel, colorInfo, provider, CancellationToken.None);\n            const model = new ColorPickerModel(color, [], 0);\n            model.colorPresentations = colorPresentations || [];\n            model.guessColorPresentation(color, originalText);\n            return new ColorHover(this, Range.lift(colorInfo.range), model, provider);\n        });\n    }\n    renderHoverParts(context, hoverParts) {\n        if (hoverParts.length === 0 || !this._editor.hasModel()) {\n            return Disposable.None;\n        }\n        const disposables = new DisposableStore();\n        const colorHover = hoverParts[0];\n        const editorModel = this._editor.getModel();\n        const model = colorHover.model;\n        const widget = disposables.add(new ColorPickerWidget(context.fragment, model, this._editor.getOption(136 /* EditorOption.pixelRatio */), this._themeService));\n        context.setColorPicker(widget);\n        let range = new Range(colorHover.range.startLineNumber, colorHover.range.startColumn, colorHover.range.endLineNumber, colorHover.range.endColumn);\n        const updateEditorModel = () => {\n            let textEdits;\n            let newRange;\n            if (model.presentation.textEdit) {\n                textEdits = [model.presentation.textEdit];\n                newRange = new Range(model.presentation.textEdit.range.startLineNumber, model.presentation.textEdit.range.startColumn, model.presentation.textEdit.range.endLineNumber, model.presentation.textEdit.range.endColumn);\n                const trackedRange = this._editor.getModel()._setTrackedRange(null, newRange, 3 /* TrackedRangeStickiness.GrowsOnlyWhenTypingAfter */);\n                this._editor.pushUndoStop();\n                this._editor.executeEdits('colorpicker', textEdits);\n                newRange = this._editor.getModel()._getTrackedRange(trackedRange) || newRange;\n            }\n            else {\n                textEdits = [{ range, text: model.presentation.label, forceMoveMarkers: false }];\n                newRange = range.setEndPosition(range.endLineNumber, range.startColumn + model.presentation.label.length);\n                this._editor.pushUndoStop();\n                this._editor.executeEdits('colorpicker', textEdits);\n            }\n            if (model.presentation.additionalTextEdits) {\n                textEdits = [...model.presentation.additionalTextEdits];\n                this._editor.executeEdits('colorpicker', textEdits);\n                context.hide();\n            }\n            this._editor.pushUndoStop();\n            range = newRange;\n        };\n        const updateColorPresentations = (color) => {\n            return getColorPresentations(editorModel, {\n                range: range,\n                color: {\n                    red: color.rgba.r / 255,\n                    green: color.rgba.g / 255,\n                    blue: color.rgba.b / 255,\n                    alpha: color.rgba.a\n                }\n            }, colorHover.provider, CancellationToken.None).then((colorPresentations) => {\n                model.colorPresentations = colorPresentations || [];\n            });\n        };\n        disposables.add(model.onColorFlushed((color) => {\n            updateColorPresentations(color).then(updateEditorModel);\n        }));\n        disposables.add(model.onDidChangeColor(updateColorPresentations));\n        return disposables;\n    }\n};\nColorHoverParticipant = __decorate([\n    __param(1, IThemeService)\n], ColorHoverParticipant);\nexport { ColorHoverParticipant };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ColorDecorationInjectedTextMarker } from './colorDetector.js';\nimport { ColorHoverParticipant } from './colorHoverParticipant.js';\nimport { ModesHoverController } from '../../hover/browser/hover.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nclass ColorContribution extends Disposable {\n    constructor(_editor) {\n        super();\n        this._editor = _editor;\n        this._register(_editor.onMouseDown((e) => this.onMouseDown(e)));\n    }\n    dispose() {\n        super.dispose();\n    }\n    onMouseDown(mouseEvent) {\n        const target = mouseEvent.target;\n        if (target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n            return;\n        }\n        if (!target.detail.injectedText) {\n            return;\n        }\n        if (target.detail.injectedText.options.attachedData !== ColorDecorationInjectedTextMarker) {\n            return;\n        }\n        if (!target.range) {\n            return;\n        }\n        const hoverController = this._editor.getContribution(ModesHoverController.ID);\n        if (!hoverController) {\n            return;\n        }\n        if (!hoverController.isColorPickerVisible()) {\n            const range = new Range(target.range.startLineNumber, target.range.startColumn + 1, target.range.endLineNumber, target.range.endColumn + 1);\n            hoverController.showContentHover(range, 1 /* HoverStartMode.Immediate */, 0 /* HoverStartSource.Mouse */, false);\n        }\n    }\n}\nColorContribution.ID = 'editor.contrib.colorContribution'; // ms\nexport { ColorContribution };\nregisterEditorContribution(ColorContribution.ID, ColorContribution, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nHoverParticipantRegistry.register(ColorHoverParticipant);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class BlockCommentCommand {\n    constructor(selection, insertSpace, languageConfigurationService) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._selection = selection;\n        this._insertSpace = insertSpace;\n        this._usedEndToken = null;\n    }\n    static _haystackHasNeedleAtOffset(haystack, needle, offset) {\n        if (offset < 0) {\n            return false;\n        }\n        const needleLength = needle.length;\n        const haystackLength = haystack.length;\n        if (offset + needleLength > haystackLength) {\n            return false;\n        }\n        for (let i = 0; i < needleLength; i++) {\n            const codeA = haystack.charCodeAt(offset + i);\n            const codeB = needle.charCodeAt(i);\n            if (codeA === codeB) {\n                continue;\n            }\n            if (codeA >= 65 /* CharCode.A */ && codeA <= 90 /* CharCode.Z */ && codeA + 32 === codeB) {\n                // codeA is upper-case variant of codeB\n                continue;\n            }\n            if (codeB >= 65 /* CharCode.A */ && codeB <= 90 /* CharCode.Z */ && codeB + 32 === codeA) {\n                // codeB is upper-case variant of codeA\n                continue;\n            }\n            return false;\n        }\n        return true;\n    }\n    _createOperationsForBlockComment(selection, startToken, endToken, insertSpace, model, builder) {\n        const startLineNumber = selection.startLineNumber;\n        const startColumn = selection.startColumn;\n        const endLineNumber = selection.endLineNumber;\n        const endColumn = selection.endColumn;\n        const startLineText = model.getLineContent(startLineNumber);\n        const endLineText = model.getLineContent(endLineNumber);\n        let startTokenIndex = startLineText.lastIndexOf(startToken, startColumn - 1 + startToken.length);\n        let endTokenIndex = endLineText.indexOf(endToken, endColumn - 1 - endToken.length);\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            if (startLineNumber === endLineNumber) {\n                const lineBetweenTokens = startLineText.substring(startTokenIndex + startToken.length, endTokenIndex);\n                if (lineBetweenTokens.indexOf(endToken) >= 0) {\n                    // force to add a block comment\n                    startTokenIndex = -1;\n                    endTokenIndex = -1;\n                }\n            }\n            else {\n                const startLineAfterStartToken = startLineText.substring(startTokenIndex + startToken.length);\n                const endLineBeforeEndToken = endLineText.substring(0, endTokenIndex);\n                if (startLineAfterStartToken.indexOf(endToken) >= 0 || endLineBeforeEndToken.indexOf(endToken) >= 0) {\n                    // force to add a block comment\n                    startTokenIndex = -1;\n                    endTokenIndex = -1;\n                }\n            }\n        }\n        let ops;\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            // Consider spaces as part of the comment tokens\n            if (insertSpace && startTokenIndex + startToken.length < startLineText.length && startLineText.charCodeAt(startTokenIndex + startToken.length) === 32 /* CharCode.Space */) {\n                // Pretend the start token contains a trailing space\n                startToken = startToken + ' ';\n            }\n            if (insertSpace && endTokenIndex > 0 && endLineText.charCodeAt(endTokenIndex - 1) === 32 /* CharCode.Space */) {\n                // Pretend the end token contains a leading space\n                endToken = ' ' + endToken;\n                endTokenIndex -= 1;\n            }\n            ops = BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n        }\n        else {\n            ops = BlockCommentCommand._createAddBlockCommentOperations(selection, startToken, endToken, this._insertSpace);\n            this._usedEndToken = ops.length === 1 ? endToken : null;\n        }\n        for (const op of ops) {\n            builder.addTrackedEditOperation(op.range, op.text);\n        }\n    }\n    static _createRemoveBlockCommentOperations(r, startToken, endToken) {\n        const res = [];\n        if (!Range.isEmpty(r)) {\n            // Remove block comment start\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.startLineNumber, r.startColumn)));\n            // Remove block comment end\n            res.push(EditOperation.delete(new Range(r.endLineNumber, r.endColumn, r.endLineNumber, r.endColumn + endToken.length)));\n        }\n        else {\n            // Remove both continuously\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.endLineNumber, r.endColumn + endToken.length)));\n        }\n        return res;\n    }\n    static _createAddBlockCommentOperations(r, startToken, endToken, insertSpace) {\n        const res = [];\n        if (!Range.isEmpty(r)) {\n            // Insert block comment start\n            res.push(EditOperation.insert(new Position(r.startLineNumber, r.startColumn), startToken + (insertSpace ? ' ' : '')));\n            // Insert block comment end\n            res.push(EditOperation.insert(new Position(r.endLineNumber, r.endColumn), (insertSpace ? ' ' : '') + endToken));\n        }\n        else {\n            // Insert both continuously\n            res.push(EditOperation.replace(new Range(r.startLineNumber, r.startColumn, r.endLineNumber, r.endColumn), startToken + '  ' + endToken));\n        }\n        return res;\n    }\n    getEditOperations(model, builder) {\n        const startLineNumber = this._selection.startLineNumber;\n        const startColumn = this._selection.startColumn;\n        model.tokenization.tokenizeIfCheap(startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, startColumn);\n        const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n            // Mode does not support block comments\n            return;\n        }\n        this._createOperationsForBlockComment(this._selection, config.blockCommentStartToken, config.blockCommentEndToken, this._insertSpace, model, builder);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        if (inverseEditOperations.length === 2) {\n            const startTokenEditOperation = inverseEditOperations[0];\n            const endTokenEditOperation = inverseEditOperations[1];\n            return new Selection(startTokenEditOperation.range.endLineNumber, startTokenEditOperation.range.endColumn, endTokenEditOperation.range.startLineNumber, endTokenEditOperation.range.startColumn);\n        }\n        else {\n            const srcRange = inverseEditOperations[0].range;\n            const deltaColumn = this._usedEndToken ? -this._usedEndToken.length - 1 : 0; // minus 1 space before endToken\n            return new Selection(srcRange.endLineNumber, srcRange.endColumn + deltaColumn, srcRange.endLineNumber, srcRange.endColumn + deltaColumn);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nexport class LineCommentCommand {\n    constructor(languageConfigurationService, selection, tabSize, type, insertSpace, ignoreEmptyLines, ignoreFirstLine) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._selection = selection;\n        this._tabSize = tabSize;\n        this._type = type;\n        this._insertSpace = insertSpace;\n        this._selectionId = null;\n        this._deltaColumn = 0;\n        this._moveEndPositionDown = false;\n        this._ignoreEmptyLines = ignoreEmptyLines;\n        this._ignoreFirstLine = ignoreFirstLine || false;\n    }\n    /**\n     * Do an initial pass over the lines and gather info about the line comment string.\n     * Returns null if any of the lines doesn't support a line comment string.\n     */\n    static _gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService) {\n        model.tokenization.tokenizeIfCheap(startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, 1);\n        const config = languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        const commentStr = (config ? config.lineCommentToken : null);\n        if (!commentStr) {\n            // Mode does not support line comments\n            return null;\n        }\n        const lines = [];\n        for (let i = 0, lineCount = endLineNumber - startLineNumber + 1; i < lineCount; i++) {\n            lines[i] = {\n                ignore: false,\n                commentStr: commentStr,\n                commentStrOffset: 0,\n                commentStrLength: commentStr.length\n            };\n        }\n        return lines;\n    }\n    /**\n     * Analyze lines and decide which lines are relevant and what the toggle should do.\n     * Also, build up several offsets and lengths useful in the generation of editor operations.\n     */\n    static _analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n        let onlyWhitespaceLines = true;\n        let shouldRemoveComments;\n        if (type === 0 /* Type.Toggle */) {\n            shouldRemoveComments = true;\n        }\n        else if (type === 1 /* Type.ForceAdd */) {\n            shouldRemoveComments = false;\n        }\n        else {\n            shouldRemoveComments = true;\n        }\n        for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n            const lineData = lines[i];\n            const lineNumber = startLineNumber + i;\n            if (lineNumber === startLineNumber && ignoreFirstLine) {\n                // first line ignored\n                lineData.ignore = true;\n                continue;\n            }\n            const lineContent = model.getLineContent(lineNumber);\n            const lineContentStartOffset = strings.firstNonWhitespaceIndex(lineContent);\n            if (lineContentStartOffset === -1) {\n                // Empty or whitespace only line\n                lineData.ignore = ignoreEmptyLines;\n                lineData.commentStrOffset = lineContent.length;\n                continue;\n            }\n            onlyWhitespaceLines = false;\n            lineData.ignore = false;\n            lineData.commentStrOffset = lineContentStartOffset;\n            if (shouldRemoveComments && !BlockCommentCommand._haystackHasNeedleAtOffset(lineContent, lineData.commentStr, lineContentStartOffset)) {\n                if (type === 0 /* Type.Toggle */) {\n                    // Every line so far has been a line comment, but this one is not\n                    shouldRemoveComments = false;\n                }\n                else if (type === 1 /* Type.ForceAdd */) {\n                    // Will not happen\n                }\n                else {\n                    lineData.ignore = true;\n                }\n            }\n            if (shouldRemoveComments && insertSpace) {\n                // Remove a following space if present\n                const commentStrEndOffset = lineContentStartOffset + lineData.commentStrLength;\n                if (commentStrEndOffset < lineContent.length && lineContent.charCodeAt(commentStrEndOffset) === 32 /* CharCode.Space */) {\n                    lineData.commentStrLength += 1;\n                }\n            }\n        }\n        if (type === 0 /* Type.Toggle */ && onlyWhitespaceLines) {\n            // For only whitespace lines, we insert comments\n            shouldRemoveComments = false;\n            // Also, no longer ignore them\n            for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n                lines[i].ignore = false;\n            }\n        }\n        return {\n            supported: true,\n            shouldRemoveComments: shouldRemoveComments,\n            lines: lines\n        };\n    }\n    /**\n     * Analyze all lines and decide exactly what to do => not supported | insert line comments | remove line comments\n     */\n    static _gatherPreflightData(type, insertSpace, model, startLineNumber, endLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n        const lines = LineCommentCommand._gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService);\n        if (lines === null) {\n            return {\n                supported: false\n            };\n        }\n        return LineCommentCommand._analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService);\n    }\n    /**\n     * Given a successful analysis, execute either insert line comments, either remove line comments\n     */\n    _executeLineComments(model, builder, data, s) {\n        let ops;\n        if (data.shouldRemoveComments) {\n            ops = LineCommentCommand._createRemoveLineCommentsOperations(data.lines, s.startLineNumber);\n        }\n        else {\n            LineCommentCommand._normalizeInsertionPoint(model, data.lines, s.startLineNumber, this._tabSize);\n            ops = this._createAddLineCommentsOperations(data.lines, s.startLineNumber);\n        }\n        const cursorPosition = new Position(s.positionLineNumber, s.positionColumn);\n        for (let i = 0, len = ops.length; i < len; i++) {\n            builder.addEditOperation(ops[i].range, ops[i].text);\n            if (Range.isEmpty(ops[i].range) && Range.getStartPosition(ops[i].range).equals(cursorPosition)) {\n                const lineContent = model.getLineContent(cursorPosition.lineNumber);\n                if (lineContent.length + 1 === cursorPosition.column) {\n                    this._deltaColumn = (ops[i].text || '').length;\n                }\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n    }\n    _attemptRemoveBlockComment(model, s, startToken, endToken) {\n        let startLineNumber = s.startLineNumber;\n        let endLineNumber = s.endLineNumber;\n        const startTokenAllowedBeforeColumn = endToken.length + Math.max(model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.startColumn);\n        let startTokenIndex = model.getLineContent(startLineNumber).lastIndexOf(startToken, startTokenAllowedBeforeColumn - 1);\n        let endTokenIndex = model.getLineContent(endLineNumber).indexOf(endToken, s.endColumn - 1 - startToken.length);\n        if (startTokenIndex !== -1 && endTokenIndex === -1) {\n            endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n            endLineNumber = startLineNumber;\n        }\n        if (startTokenIndex === -1 && endTokenIndex !== -1) {\n            startTokenIndex = model.getLineContent(endLineNumber).lastIndexOf(startToken, endTokenIndex);\n            startLineNumber = endLineNumber;\n        }\n        if (s.isEmpty() && (startTokenIndex === -1 || endTokenIndex === -1)) {\n            startTokenIndex = model.getLineContent(startLineNumber).indexOf(startToken);\n            if (startTokenIndex !== -1) {\n                endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n            }\n        }\n        // We have to adjust to possible inner white space.\n        // For Space after startToken, add Space to startToken - range math will work out.\n        if (startTokenIndex !== -1 && model.getLineContent(startLineNumber).charCodeAt(startTokenIndex + startToken.length) === 32 /* CharCode.Space */) {\n            startToken += ' ';\n        }\n        // For Space before endToken, add Space before endToken and shift index one left.\n        if (endTokenIndex !== -1 && model.getLineContent(endLineNumber).charCodeAt(endTokenIndex - 1) === 32 /* CharCode.Space */) {\n            endToken = ' ' + endToken;\n            endTokenIndex -= 1;\n        }\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            return BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n        }\n        return null;\n    }\n    /**\n     * Given an unsuccessful analysis, delegate to the block comment command\n     */\n    _executeBlockComment(model, builder, s) {\n        model.tokenization.tokenizeIfCheap(s.startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(s.startLineNumber, 1);\n        const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n            // Mode does not support block comments\n            return;\n        }\n        const startToken = config.blockCommentStartToken;\n        const endToken = config.blockCommentEndToken;\n        let ops = this._attemptRemoveBlockComment(model, s, startToken, endToken);\n        if (!ops) {\n            if (s.isEmpty()) {\n                const lineContent = model.getLineContent(s.startLineNumber);\n                let firstNonWhitespaceIndex = strings.firstNonWhitespaceIndex(lineContent);\n                if (firstNonWhitespaceIndex === -1) {\n                    // Line is empty or contains only whitespace\n                    firstNonWhitespaceIndex = lineContent.length;\n                }\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, firstNonWhitespaceIndex + 1, s.startLineNumber, lineContent.length + 1), startToken, endToken, this._insertSpace);\n            }\n            else {\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), startToken, endToken, this._insertSpace);\n            }\n            if (ops.length === 1) {\n                // Leave cursor after token and Space\n                this._deltaColumn = startToken.length + 1;\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n        for (const op of ops) {\n            builder.addEditOperation(op.range, op.text);\n        }\n    }\n    getEditOperations(model, builder) {\n        let s = this._selection;\n        this._moveEndPositionDown = false;\n        if (s.startLineNumber === s.endLineNumber && this._ignoreFirstLine) {\n            builder.addEditOperation(new Range(s.startLineNumber, model.getLineMaxColumn(s.startLineNumber), s.startLineNumber + 1, 1), s.startLineNumber === model.getLineCount() ? '' : '\\n');\n            this._selectionId = builder.trackSelection(s);\n            return;\n        }\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._moveEndPositionDown = true;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        const data = LineCommentCommand._gatherPreflightData(this._type, this._insertSpace, model, s.startLineNumber, s.endLineNumber, this._ignoreEmptyLines, this._ignoreFirstLine, this.languageConfigurationService);\n        if (data.supported) {\n            return this._executeLineComments(model, builder, data, s);\n        }\n        return this._executeBlockComment(model, builder, s);\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._moveEndPositionDown) {\n            result = result.setEndPosition(result.endLineNumber + 1, 1);\n        }\n        return new Selection(result.selectionStartLineNumber, result.selectionStartColumn + this._deltaColumn, result.positionLineNumber, result.positionColumn + this._deltaColumn);\n    }\n    /**\n     * Generate edit operations in the remove line comment case\n     */\n    static _createRemoveLineCommentsOperations(lines, startLineNumber) {\n        const res = [];\n        for (let i = 0, len = lines.length; i < len; i++) {\n            const lineData = lines[i];\n            if (lineData.ignore) {\n                continue;\n            }\n            res.push(EditOperation.delete(new Range(startLineNumber + i, lineData.commentStrOffset + 1, startLineNumber + i, lineData.commentStrOffset + lineData.commentStrLength + 1)));\n        }\n        return res;\n    }\n    /**\n     * Generate edit operations in the add line comment case\n     */\n    _createAddLineCommentsOperations(lines, startLineNumber) {\n        const res = [];\n        const afterCommentStr = this._insertSpace ? ' ' : '';\n        for (let i = 0, len = lines.length; i < len; i++) {\n            const lineData = lines[i];\n            if (lineData.ignore) {\n                continue;\n            }\n            res.push(EditOperation.insert(new Position(startLineNumber + i, lineData.commentStrOffset + 1), lineData.commentStr + afterCommentStr));\n        }\n        return res;\n    }\n    static nextVisibleColumn(currentVisibleColumn, tabSize, isTab, columnSize) {\n        if (isTab) {\n            return currentVisibleColumn + (tabSize - (currentVisibleColumn % tabSize));\n        }\n        return currentVisibleColumn + columnSize;\n    }\n    /**\n     * Adjust insertion points to have them vertically aligned in the add line comment case\n     */\n    static _normalizeInsertionPoint(model, lines, startLineNumber, tabSize) {\n        let minVisibleColumn = 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */;\n        let j;\n        let lenJ;\n        for (let i = 0, len = lines.length; i < len; i++) {\n            if (lines[i].ignore) {\n                continue;\n            }\n            const lineContent = model.getLineContent(startLineNumber + i);\n            let currentVisibleColumn = 0;\n            for (let j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* CharCode.Tab */, 1);\n            }\n            if (currentVisibleColumn < minVisibleColumn) {\n                minVisibleColumn = currentVisibleColumn;\n            }\n        }\n        minVisibleColumn = Math.floor(minVisibleColumn / tabSize) * tabSize;\n        for (let i = 0, len = lines.length; i < len; i++) {\n            if (lines[i].ignore) {\n                continue;\n            }\n            const lineContent = model.getLineContent(startLineNumber + i);\n            let currentVisibleColumn = 0;\n            for (j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* CharCode.Tab */, 1);\n            }\n            if (currentVisibleColumn > minVisibleColumn) {\n                lines[i].commentStrOffset = j - 1;\n            }\n            else {\n                lines[i].commentStrOffset = j;\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nimport { LineCommentCommand } from './lineCommentCommand.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nclass CommentLineAction extends EditorAction {\n    constructor(type, opts) {\n        super(opts);\n        this._type = type;\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const commands = [];\n        const modelOptions = model.getOptions();\n        const commentsOptions = editor.getOption(20 /* EditorOption.comments */);\n        const selections = editor.getSelections().map((selection, index) => ({ selection, index, ignoreFirstLine: false }));\n        selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        // Remove selections that would result in copying the same line\n        let prev = selections[0];\n        for (let i = 1; i < selections.length; i++) {\n            const curr = selections[i];\n            if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\n                // these two selections would copy the same line\n                if (prev.index < curr.index) {\n                    // prev wins\n                    curr.ignoreFirstLine = true;\n                }\n                else {\n                    // curr wins\n                    prev.ignoreFirstLine = true;\n                    prev = curr;\n                }\n            }\n        }\n        for (const selection of selections) {\n            commands.push(new LineCommentCommand(languageConfigurationService, selection.selection, modelOptions.tabSize, this._type, commentsOptions.insertSpace, commentsOptions.ignoreEmptyLines, selection.ignoreFirstLine));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass ToggleCommentLineAction extends CommentLineAction {\n    constructor() {\n        super(0 /* Type.Toggle */, {\n            id: 'editor.action.commentLine',\n            label: nls.localize('comment.line', \"Toggle Line Comment\"),\n            alias: 'Toggle Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 85 /* KeyCode.Slash */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarEditMenu,\n                group: '5_insert',\n                title: nls.localize({ key: 'miToggleLineComment', comment: ['&& denotes a mnemonic'] }, \"&&Toggle Line Comment\"),\n                order: 1\n            }\n        });\n    }\n}\nclass AddLineCommentAction extends CommentLineAction {\n    constructor() {\n        super(1 /* Type.ForceAdd */, {\n            id: 'editor.action.addCommentLine',\n            label: nls.localize('comment.line.add', \"Add Line Comment\"),\n            alias: 'Add Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass RemoveLineCommentAction extends CommentLineAction {\n    constructor() {\n        super(2 /* Type.ForceRemove */, {\n            id: 'editor.action.removeCommentLine',\n            label: nls.localize('comment.line.remove', \"Remove Line Comment\"),\n            alias: 'Remove Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 51 /* KeyCode.KeyU */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass BlockCommentAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.blockComment',\n            label: nls.localize('comment.block', \"Toggle Block Comment\"),\n            alias: 'Toggle Block Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 31 /* KeyCode.KeyA */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 31 /* KeyCode.KeyA */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarEditMenu,\n                group: '5_insert',\n                title: nls.localize({ key: 'miToggleBlockComment', comment: ['&& denotes a mnemonic'] }, \"Toggle &&Block Comment\"),\n                order: 2\n            }\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commentsOptions = editor.getOption(20 /* EditorOption.comments */);\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            commands.push(new BlockCommentCommand(selection, commentsOptions.insertSpace, languageConfigurationService));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nregisterEditorAction(ToggleCommentLineAction);\nregisterEditorAction(AddLineCommentAction);\nregisterEditorAction(RemoveLineCommentAction);\nregisterEditorAction(BlockCommentAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionViewItem } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { Separator, SubmenuAction } from '../../../../base/common/actions.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { IMenuService, MenuId, SubmenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nlet ContextMenuController = class ContextMenuController {\n    static get(editor) {\n        return editor.getContribution(ContextMenuController.ID);\n    }\n    constructor(editor, _contextMenuService, _contextViewService, _contextKeyService, _keybindingService, _menuService, _configurationService) {\n        this._contextMenuService = _contextMenuService;\n        this._contextViewService = _contextViewService;\n        this._contextKeyService = _contextKeyService;\n        this._keybindingService = _keybindingService;\n        this._menuService = _menuService;\n        this._configurationService = _configurationService;\n        this._toDispose = new DisposableStore();\n        this._contextMenuIsBeingShownCount = 0;\n        this._editor = editor;\n        this._toDispose.add(this._editor.onContextMenu((e) => this._onContextMenu(e)));\n        this._toDispose.add(this._editor.onMouseWheel((e) => {\n            if (this._contextMenuIsBeingShownCount > 0) {\n                const view = this._contextViewService.getContextViewElement();\n                const target = e.srcElement;\n                // Event triggers on shadow root host first\n                // Check if the context view is under this host before hiding it #103169\n                if (!(target.shadowRoot && dom.getShadowRoot(view) === target.shadowRoot)) {\n                    this._contextViewService.hideContextView();\n                }\n            }\n        }));\n        this._toDispose.add(this._editor.onKeyDown((e) => {\n            if (!this._editor.getOption(21 /* EditorOption.contextmenu */)) {\n                return; // Context menu is turned off through configuration\n            }\n            if (e.keyCode === 58 /* KeyCode.ContextMenu */) {\n                // Chrome is funny like that\n                e.preventDefault();\n                e.stopPropagation();\n                this.showContextMenu();\n            }\n        }));\n    }\n    _onContextMenu(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._editor.getOption(21 /* EditorOption.contextmenu */)) {\n            this._editor.focus();\n            // Ensure the cursor is at the position of the mouse click\n            if (e.target.position && !this._editor.getSelection().containsPosition(e.target.position)) {\n                this._editor.setPosition(e.target.position);\n            }\n            return; // Context menu is turned off through configuration\n        }\n        if (e.target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */) {\n            return; // allow native menu on widgets to support right click on input field for example in find\n        }\n        if (e.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.detail.injectedText) {\n            return; // allow native menu on injected text\n        }\n        e.event.preventDefault();\n        e.event.stopPropagation();\n        if (e.target.type === 11 /* MouseTargetType.SCROLLBAR */) {\n            return this._showScrollbarContextMenu({ x: e.event.posx - 1, width: 2, y: e.event.posy - 1, height: 2 });\n        }\n        if (e.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.type !== 7 /* MouseTargetType.CONTENT_EMPTY */ && e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n            return; // only support mouse click into text or native context menu key for now\n        }\n        // Ensure the editor gets focus if it hasn't, so the right events are being sent to other contributions\n        this._editor.focus();\n        // Ensure the cursor is at the position of the mouse click\n        if (e.target.position) {\n            let hasSelectionAtPosition = false;\n            for (const selection of this._editor.getSelections()) {\n                if (selection.containsPosition(e.target.position)) {\n                    hasSelectionAtPosition = true;\n                    break;\n                }\n            }\n            if (!hasSelectionAtPosition) {\n                this._editor.setPosition(e.target.position);\n            }\n        }\n        // Unless the user triggerd the context menu through Shift+F10, use the mouse position as menu position\n        let anchor = null;\n        if (e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n            anchor = { x: e.event.posx - 1, width: 2, y: e.event.posy - 1, height: 2 };\n        }\n        // Show the context menu\n        this.showContextMenu(anchor);\n    }\n    showContextMenu(anchor) {\n        if (!this._editor.getOption(21 /* EditorOption.contextmenu */)) {\n            return; // Context menu is turned off through configuration\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // Find actions available for menu\n        const menuActions = this._getMenuActions(this._editor.getModel(), this._editor.isSimpleWidget ? MenuId.SimpleEditorContext : MenuId.EditorContext);\n        // Show menu if we have actions to show\n        if (menuActions.length > 0) {\n            this._doShowContextMenu(menuActions, anchor);\n        }\n    }\n    _getMenuActions(model, menuId) {\n        const result = [];\n        // get menu groups\n        const menu = this._menuService.createMenu(menuId, this._contextKeyService);\n        const groups = menu.getActions({ arg: model.uri });\n        menu.dispose();\n        // translate them into other actions\n        for (const group of groups) {\n            const [, actions] = group;\n            let addedItems = 0;\n            for (const action of actions) {\n                if (action instanceof SubmenuItemAction) {\n                    const subActions = this._getMenuActions(model, action.item.submenu);\n                    if (subActions.length > 0) {\n                        result.push(new SubmenuAction(action.id, action.label, subActions));\n                        addedItems++;\n                    }\n                }\n                else {\n                    result.push(action);\n                    addedItems++;\n                }\n            }\n            if (addedItems) {\n                result.push(new Separator());\n            }\n        }\n        if (result.length) {\n            result.pop(); // remove last separator\n        }\n        return result;\n    }\n    _doShowContextMenu(actions, anchor = null) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // Disable hover\n        const oldHoverSetting = this._editor.getOption(57 /* EditorOption.hover */);\n        this._editor.updateOptions({\n            hover: {\n                enabled: false\n            }\n        });\n        if (!anchor) {\n            // Ensure selection is visible\n            this._editor.revealPosition(this._editor.getPosition(), 1 /* ScrollType.Immediate */);\n            this._editor.render();\n            const cursorCoords = this._editor.getScrolledVisiblePosition(this._editor.getPosition());\n            // Translate to absolute editor position\n            const editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\n            const posx = editorCoords.left + cursorCoords.left;\n            const posy = editorCoords.top + cursorCoords.top + cursorCoords.height;\n            anchor = { x: posx, y: posy };\n        }\n        const useShadowDOM = this._editor.getOption(121 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        // Show menu\n        this._contextMenuIsBeingShownCount++;\n        this._contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n            getAnchor: () => anchor,\n            getActions: () => actions,\n            getActionViewItem: (action) => {\n                const keybinding = this._keybindingFor(action);\n                if (keybinding) {\n                    return new ActionViewItem(action, action, { label: true, keybinding: keybinding.getLabel(), isMenu: true });\n                }\n                const customActionViewItem = action;\n                if (typeof customActionViewItem.getActionViewItem === 'function') {\n                    return customActionViewItem.getActionViewItem();\n                }\n                return new ActionViewItem(action, action, { icon: true, label: true, isMenu: true });\n            },\n            getKeyBinding: (action) => {\n                return this._keybindingFor(action);\n            },\n            onHide: (wasCancelled) => {\n                this._contextMenuIsBeingShownCount--;\n                this._editor.updateOptions({\n                    hover: oldHoverSetting\n                });\n            }\n        });\n    }\n    _showScrollbarContextMenu(anchor) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const minimapOptions = this._editor.getOption(69 /* EditorOption.minimap */);\n        let lastId = 0;\n        const createAction = (opts) => {\n            return {\n                id: `menu-action-${++lastId}`,\n                label: opts.label,\n                tooltip: '',\n                class: undefined,\n                enabled: (typeof opts.enabled === 'undefined' ? true : opts.enabled),\n                checked: opts.checked,\n                run: opts.run\n            };\n        };\n        const createSubmenuAction = (label, actions) => {\n            return new SubmenuAction(`menu-action-${++lastId}`, label, actions, undefined);\n        };\n        const createEnumAction = (label, enabled, configName, configuredValue, options) => {\n            if (!enabled) {\n                return createAction({ label, enabled, run: () => { } });\n            }\n            const createRunner = (value) => {\n                return () => {\n                    this._configurationService.updateValue(configName, value);\n                };\n            };\n            const actions = [];\n            for (const option of options) {\n                actions.push(createAction({\n                    label: option.label,\n                    checked: configuredValue === option.value,\n                    run: createRunner(option.value)\n                }));\n            }\n            return createSubmenuAction(label, actions);\n        };\n        const actions = [];\n        actions.push(createAction({\n            label: nls.localize('context.minimap.minimap', \"Minimap\"),\n            checked: minimapOptions.enabled,\n            run: () => {\n                this._configurationService.updateValue(`editor.minimap.enabled`, !minimapOptions.enabled);\n            }\n        }));\n        actions.push(new Separator());\n        actions.push(createAction({\n            label: nls.localize('context.minimap.renderCharacters', \"Render Characters\"),\n            enabled: minimapOptions.enabled,\n            checked: minimapOptions.renderCharacters,\n            run: () => {\n                this._configurationService.updateValue(`editor.minimap.renderCharacters`, !minimapOptions.renderCharacters);\n            }\n        }));\n        actions.push(createEnumAction(nls.localize('context.minimap.size', \"Vertical size\"), minimapOptions.enabled, 'editor.minimap.size', minimapOptions.size, [{\n                label: nls.localize('context.minimap.size.proportional', \"Proportional\"),\n                value: 'proportional'\n            }, {\n                label: nls.localize('context.minimap.size.fill', \"Fill\"),\n                value: 'fill'\n            }, {\n                label: nls.localize('context.minimap.size.fit', \"Fit\"),\n                value: 'fit'\n            }]));\n        actions.push(createEnumAction(nls.localize('context.minimap.slider', \"Slider\"), minimapOptions.enabled, 'editor.minimap.showSlider', minimapOptions.showSlider, [{\n                label: nls.localize('context.minimap.slider.mouseover', \"Mouse Over\"),\n                value: 'mouseover'\n            }, {\n                label: nls.localize('context.minimap.slider.always', \"Always\"),\n                value: 'always'\n            }]));\n        const useShadowDOM = this._editor.getOption(121 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        this._contextMenuIsBeingShownCount++;\n        this._contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n            getAnchor: () => anchor,\n            getActions: () => actions,\n            onHide: (wasCancelled) => {\n                this._contextMenuIsBeingShownCount--;\n                this._editor.focus();\n            }\n        });\n    }\n    _keybindingFor(action) {\n        return this._keybindingService.lookupKeybinding(action.id);\n    }\n    dispose() {\n        if (this._contextMenuIsBeingShownCount > 0) {\n            this._contextViewService.hideContextView();\n        }\n        this._toDispose.dispose();\n    }\n};\nContextMenuController.ID = 'editor.contrib.contextmenu';\nContextMenuController = __decorate([\n    __param(1, IContextMenuService),\n    __param(2, IContextViewService),\n    __param(3, IContextKeyService),\n    __param(4, IKeybindingService),\n    __param(5, IMenuService),\n    __param(6, IConfigurationService)\n], ContextMenuController);\nexport { ContextMenuController };\nclass ShowContextMenu extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showContextMenu',\n            label: nls.localize('action.showContextMenu.label', \"Show Editor Context Menu\"),\n            alias: 'Show Editor Context Menu',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = ContextMenuController.get(editor)) === null || _a === void 0 ? void 0 : _a.showContextMenu();\n    }\n}\nregisterEditorContribution(ContextMenuController.ID, ContextMenuController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(ShowContextMenu);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DataTransfers } from '../../../../base/browser/dnd.js';\nimport { addDisposableListener } from '../../../../base/browser/dom.js';\nimport { createCancelablePromise, raceCancellation } from '../../../../base/common/async.js';\nimport { createStringDataTransferItem, UriList } from '../../../../base/common/dataTransfer.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Mimes } from '../../../../base/common/mime.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { toVSDataTransfer } from '../../../browser/dnd.js';\nimport { IBulkEditService, ResourceTextEdit } from '../../../browser/services/bulkEditService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { localize } from '../../../../nls.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IProgressService } from '../../../../platform/progress/common/progress.js';\nconst vscodeClipboardMime = 'application/vnd.code.copyMetadata';\nlet CopyPasteController = class CopyPasteController extends Disposable {\n    constructor(editor, _bulkEditService, _clipboardService, _configurationService, _languageFeaturesService, _progressService) {\n        super();\n        this._bulkEditService = _bulkEditService;\n        this._clipboardService = _clipboardService;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._progressService = _progressService;\n        this._editor = editor;\n        const container = editor.getContainerDomNode();\n        this._register(addDisposableListener(container, 'copy', e => this.handleCopy(e)));\n        this._register(addDisposableListener(container, 'cut', e => this.handleCopy(e)));\n        this._register(addDisposableListener(container, 'paste', e => this.handlePaste(e), true));\n    }\n    arePasteActionsEnabled(model) {\n        if (this._configurationService.getValue('editor.experimental.pasteActions.enabled', { resource: model.uri })) {\n            return true;\n        }\n        // TODO: This check is only here to support enabling `ipynb.pasteImagesAsAttachments.enabled` by default\n        return model.uri.scheme === Schemas.vscodeNotebookCell;\n    }\n    handleCopy(e) {\n        var _a;\n        if (!e.clipboardData || !this._editor.hasTextFocus()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const selections = this._editor.getSelections();\n        if (!model || !(selections === null || selections === void 0 ? void 0 : selections.length)) {\n            return;\n        }\n        if (!this.arePasteActionsEnabled(model)) {\n            return;\n        }\n        const ranges = [...selections];\n        const primarySelection = selections[0];\n        const wasFromEmptySelection = primarySelection.isEmpty();\n        if (wasFromEmptySelection) {\n            if (!this._editor.getOption(34 /* EditorOption.emptySelectionClipboard */)) {\n                return;\n            }\n            ranges[0] = new Range(primarySelection.startLineNumber, 0, primarySelection.startLineNumber, model.getLineLength(primarySelection.startLineNumber));\n        }\n        const providers = this._languageFeaturesService.documentPasteEditProvider.ordered(model).filter(x => !!x.prepareDocumentPaste);\n        if (!providers.length) {\n            this.setCopyMetadata(e.clipboardData, { wasFromEmptySelection });\n            return;\n        }\n        const dataTransfer = toVSDataTransfer(e.clipboardData);\n        // Save off a handle pointing to data that VS Code maintains.\n        const handle = generateUuid();\n        this.setCopyMetadata(e.clipboardData, {\n            id: handle,\n            wasFromEmptySelection,\n        });\n        const promise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n            const results = yield Promise.all(providers.map(provider => {\n                return provider.prepareDocumentPaste(model, ranges, dataTransfer, token);\n            }));\n            for (const result of results) {\n                result === null || result === void 0 ? void 0 : result.forEach((value, key) => {\n                    dataTransfer.replace(key, value);\n                });\n            }\n            return dataTransfer;\n        }));\n        (_a = this._currentClipboardItem) === null || _a === void 0 ? void 0 : _a.dataTransferPromise.cancel();\n        this._currentClipboardItem = { handle: handle, dataTransferPromise: promise };\n    }\n    setCopyMetadata(dataTransfer, metadata) {\n        dataTransfer.setData(vscodeClipboardMime, JSON.stringify(metadata));\n    }\n    handlePaste(e) {\n        var _a, _b, _c, _d;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!e.clipboardData || !this._editor.hasTextFocus()) {\n                return;\n            }\n            const selections = this._editor.getSelections();\n            if (!(selections === null || selections === void 0 ? void 0 : selections.length) || !this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            if (!this.arePasteActionsEnabled(model)) {\n                return;\n            }\n            let metadata;\n            const rawMetadata = (_a = e.clipboardData) === null || _a === void 0 ? void 0 : _a.getData(vscodeClipboardMime);\n            if (rawMetadata && typeof rawMetadata === 'string') {\n                metadata = JSON.parse(rawMetadata);\n            }\n            const providers = this._languageFeaturesService.documentPasteEditProvider.ordered(model);\n            if (!providers.length) {\n                return;\n            }\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            const tokenSource = new EditorStateCancellationTokenSource(this._editor, 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */);\n            try {\n                const dataTransfer = toVSDataTransfer(e.clipboardData);\n                if ((metadata === null || metadata === void 0 ? void 0 : metadata.id) && ((_b = this._currentClipboardItem) === null || _b === void 0 ? void 0 : _b.handle) === metadata.id) {\n                    const toMergeDataTransfer = yield this._currentClipboardItem.dataTransferPromise;\n                    if (tokenSource.token.isCancellationRequested) {\n                        return;\n                    }\n                    toMergeDataTransfer.forEach((value, key) => {\n                        dataTransfer.replace(key, value);\n                    });\n                }\n                if (!dataTransfer.has(Mimes.uriList)) {\n                    const resources = yield this._clipboardService.readResources();\n                    if (tokenSource.token.isCancellationRequested) {\n                        return;\n                    }\n                    if (resources.length) {\n                        dataTransfer.append(Mimes.uriList, createStringDataTransferItem(UriList.create(resources)));\n                    }\n                }\n                dataTransfer.delete(vscodeClipboardMime);\n                const providerEdit = yield this._progressService.withProgress({\n                    location: 15 /* ProgressLocation.Notification */,\n                    delay: 750,\n                    title: localize('pasteProgressTitle', \"Running paste handlers...\"),\n                    cancellable: true,\n                }, () => {\n                    return this.getProviderPasteEdit(providers, dataTransfer, model, selections, tokenSource.token);\n                }, () => {\n                    return tokenSource.cancel();\n                });\n                if (tokenSource.token.isCancellationRequested) {\n                    return;\n                }\n                if (providerEdit) {\n                    const snippet = typeof providerEdit.insertText === 'string' ? SnippetParser.escape(providerEdit.insertText) : providerEdit.insertText.snippet;\n                    const combinedWorkspaceEdit = {\n                        edits: [\n                            new ResourceTextEdit(model.uri, {\n                                range: Selection.liftSelection(this._editor.getSelection()),\n                                text: snippet,\n                                insertAsSnippet: true,\n                            }),\n                            ...((_d = (_c = providerEdit.additionalEdit) === null || _c === void 0 ? void 0 : _c.edits) !== null && _d !== void 0 ? _d : [])\n                        ]\n                    };\n                    yield this._bulkEditService.apply(combinedWorkspaceEdit, { editor: this._editor });\n                    return;\n                }\n                yield this.applyDefaultPasteHandler(dataTransfer, metadata, tokenSource.token);\n            }\n            finally {\n                tokenSource.dispose();\n            }\n        });\n    }\n    getProviderPasteEdit(providers, dataTransfer, model, selections, token) {\n        return raceCancellation((() => __awaiter(this, void 0, void 0, function* () {\n            for (const provider of providers) {\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                if (!isSupportedProvider(provider, dataTransfer)) {\n                    continue;\n                }\n                const edit = yield provider.provideDocumentPasteEdits(model, selections, dataTransfer, token);\n                if (edit) {\n                    return edit;\n                }\n            }\n            return undefined;\n        }))(), token);\n    }\n    applyDefaultPasteHandler(dataTransfer, metadata, token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const textDataTransfer = (_a = dataTransfer.get(Mimes.text)) !== null && _a !== void 0 ? _a : dataTransfer.get('text');\n            if (!textDataTransfer) {\n                return;\n            }\n            const text = yield textDataTransfer.asString();\n            if (token.isCancellationRequested) {\n                return;\n            }\n            this._editor.trigger('keyboard', \"paste\" /* Handler.Paste */, {\n                text: text,\n                pasteOnNewLine: metadata === null || metadata === void 0 ? void 0 : metadata.wasFromEmptySelection,\n                multicursorText: null\n            });\n        });\n    }\n};\nCopyPasteController.ID = 'editor.contrib.copyPasteActionController';\nCopyPasteController = __decorate([\n    __param(1, IBulkEditService),\n    __param(2, IClipboardService),\n    __param(3, IConfigurationService),\n    __param(4, ILanguageFeaturesService),\n    __param(5, IProgressService)\n], CopyPasteController);\nexport { CopyPasteController };\nfunction isSupportedProvider(provider, dataTransfer) {\n    return provider.pasteMimeTypes.some(type => {\n        if (type.toLowerCase() === DataTransfers.FILES.toLowerCase()) {\n            return [...dataTransfer.values()].some(item => item.asFile());\n        }\n        return dataTransfer.has(type);\n    });\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { editorConfigurationBaseNode } from '../../../common/config/editorConfigurationSchema.js';\nimport { CopyPasteController } from './copyPasteController.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nregisterEditorContribution(CopyPasteController.ID, CopyPasteController, 0 /* EditorContributionInstantiation.Eager */); // eager because it listens to events on the container dom node of the editor\nRegistry.as(Extensions.Configuration).registerConfiguration(Object.assign(Object.assign({}, editorConfigurationBaseNode), { properties: {\n        'editor.experimental.pasteActions.enabled': {\n            type: 'boolean',\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('pasteActions', \"Enable/disable running edits from extensions on paste.\"),\n            default: false,\n        },\n    } }));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass CursorState {\n    constructor(selections) {\n        this.selections = selections;\n    }\n    equals(other) {\n        const thisLen = this.selections.length;\n        const otherLen = other.selections.length;\n        if (thisLen !== otherLen) {\n            return false;\n        }\n        for (let i = 0; i < thisLen; i++) {\n            if (!this.selections[i].equalsSelection(other.selections[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\nclass StackElement {\n    constructor(cursorState, scrollTop, scrollLeft) {\n        this.cursorState = cursorState;\n        this.scrollTop = scrollTop;\n        this.scrollLeft = scrollLeft;\n    }\n}\nclass CursorUndoRedoController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(CursorUndoRedoController.ID);\n    }\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._isCursorUndoRedo = false;\n        this._undoStack = [];\n        this._redoStack = [];\n        this._register(editor.onDidChangeModel((e) => {\n            this._undoStack = [];\n            this._redoStack = [];\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._undoStack = [];\n            this._redoStack = [];\n        }));\n        this._register(editor.onDidChangeCursorSelection((e) => {\n            if (this._isCursorUndoRedo) {\n                return;\n            }\n            if (!e.oldSelections) {\n                return;\n            }\n            if (e.oldModelVersionId !== e.modelVersionId) {\n                return;\n            }\n            const prevState = new CursorState(e.oldSelections);\n            const isEqualToLastUndoStack = (this._undoStack.length > 0 && this._undoStack[this._undoStack.length - 1].cursorState.equals(prevState));\n            if (!isEqualToLastUndoStack) {\n                this._undoStack.push(new StackElement(prevState, editor.getScrollTop(), editor.getScrollLeft()));\n                this._redoStack = [];\n                if (this._undoStack.length > 50) {\n                    // keep the cursor undo stack bounded\n                    this._undoStack.shift();\n                }\n            }\n        }));\n    }\n    cursorUndo() {\n        if (!this._editor.hasModel() || this._undoStack.length === 0) {\n            return;\n        }\n        this._redoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n        this._applyState(this._undoStack.pop());\n    }\n    cursorRedo() {\n        if (!this._editor.hasModel() || this._redoStack.length === 0) {\n            return;\n        }\n        this._undoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n        this._applyState(this._redoStack.pop());\n    }\n    _applyState(stackElement) {\n        this._isCursorUndoRedo = true;\n        this._editor.setSelections(stackElement.cursorState.selections);\n        this._editor.setScrollPosition({\n            scrollTop: stackElement.scrollTop,\n            scrollLeft: stackElement.scrollLeft\n        });\n        this._isCursorUndoRedo = false;\n    }\n}\nCursorUndoRedoController.ID = 'editor.contrib.cursorUndoRedoController';\nexport { CursorUndoRedoController };\nexport class CursorUndo extends EditorAction {\n    constructor() {\n        super({\n            id: 'cursorUndo',\n            label: nls.localize('cursor.undo', \"Cursor Undo\"),\n            alias: 'Cursor Undo',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 51 /* KeyCode.KeyU */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorUndo();\n    }\n}\nexport class CursorRedo extends EditorAction {\n    constructor() {\n        super({\n            id: 'cursorRedo',\n            label: nls.localize('cursor.redo', \"Cursor Redo\"),\n            alias: 'Cursor Redo',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorRedo();\n    }\n}\nregisterEditorContribution(CursorUndoRedoController.ID, CursorUndoRedoController, 0 /* EditorContributionInstantiation.Eager */); // eager because it needs to listen to record cursor state ASAP\nregisterEditorAction(CursorUndo);\nregisterEditorAction(CursorRedo);\n"],"names":["__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","SelectionAnchorSet","RawContextKey","SelectionAnchorController","editor","contextKeyService","_this","_classCallCheck","this","selectionAnchorSetContextKey","bindTo","modelChangeListener","onDidChangeModel","reset","_createClass","_this2","hasModel","position","getPosition","changeDecorations","accessor","decorationId","removeDecoration","addDecoration","Selection","fromPositions","description","stickiness","hoverMessage","MarkdownString","appendText","localize","className","set","alert","lineNumber","column","anchorPosition","getModel","getDecorationRange","setPosition","getStartPosition","start","end","setSelection","cancelSelectionAnchor","_this3","undefined","dispose","getContribution","ID","IContextKeyService","SetSelectionAnchor","_EditorAction","_inherits","_super","_createSuper","call","id","label","alias","precondition","kbOpts","kbExpr","EditorContextKeys","editorTextFocus","primary","KeyChord","weight","_accessor","_a","_regeneratorRuntime","mark","_callee","wrap","_context","prev","get","setSelectionAnchor","stop","EditorAction","GoToSelectionAnchor","_EditorAction2","_super2","_callee2","_context2","goToSelectionAnchor","SelectFromAnchorToCursor","_EditorAction3","_super3","_callee3","_context3","selectFromAnchorToCursor","CancelSelectionAnchor","_EditorAction4","_super4","_callee4","_context4","registerEditorContribution","registerEditorAction","overviewRulerBracketMatchForeground","registerColor","dark","light","hcDark","hcLight","nls","JumpToBracketAction","BracketMatchingController","jumpToBracket","SelectToBracketAction","args","name","schema","type","properties","default","selectBrackets","selectToBracket","BracketsData","brackets","options","_Disposable","_editor","_lastBracketsData","_lastVersionId","_decorations","createDecorationsCollection","_updateBracketsSoon","_register","RunOnceScheduler","_updateBrackets","_matchBrackets","getOption","schedule","onDidChangeCursorPosition","onDidChangeModelContent","onDidChangeModelLanguageConfiguration","onDidChangeConfiguration","hasChanged","clear","onDidBlurEditorWidget","onDidFocusEditorWidget","model","newSelections","getSelections","map","selection","bracketPairs","matchBracket","newCursorPosition","containsPosition","enclosingBrackets","findEnclosingBrackets","nextBracket","findNextBracket","range","setSelections","revealRange","forEach","selectFrom","selectTo","sort","Range","compareRangesUsingStarts","_brackets","_brackets2","_slicedToArray","open","close","getEndPosition","tmp","push","_recomputeBrackets","_step","newDecorations","newDecorationsLen","_iterator","_createForOfIteratorHelper","s","n","bracketData","err","f","hasWidgetFocus","selections","versionId","getVersionId","previousData","positions","positionsLen","len","isEmpty","Position","compare","newData","newDataLen","previousIndex","previousLen","isBefore","equals","_DECORATION_OPTIONS_WITH_OVERVIEW_RULER","_DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER","Disposable","ModelDecorationOptions","register","overviewRuler","color","themeColorFromId","OverviewRulerLane","Center","MenuRegistry","appendMenuItem","MenuId","MenubarGoMenu","group","command","title","comment","order","MoveCaretCommand","isMovingLeft","_selection","_isMovingLeft","builder","startLineNumber","endLineNumber","startColumn","endColumn","getLineMaxColumn","rangeBefore","charBefore","getValueInRange","addEditOperation","rangeAfter","charAfter","helper","MoveCaretAction","left","opts","commands","pushUndoStop","executeCommands","MoveCaretLeftAction","_MoveCaretAction","writable","MoveCaretRightAction","_MoveCaretAction2","TransposeLettersAction","textInputFocus","mac","lastColumn","endPosition","MoveOperations","rightPosition","middlePosition","leftPosition","beginPosition","leftChar","rightChar","replaceRange","ReplaceCommand","CLIPBOARD_CONTEXT_MENU_GROUP","supportsCut","platform","document","queryCommandSupported","supportsCopy","supportsPaste","navigator","clipboard","browser","registerCommand","CutAction","MultiCommand","win","secondary","menuOpts","menuId","MenubarEditMenu","EditorContext","when","CommandPalette","SimpleEditorContext","CopyAction","submenu","MenubarCopy","original","EditorContextCopy","EditorContextShare","PasteAction","linux","ExecCommandCopyWithSyntaxHighlightingAction","getSelection","CopyOptions","forceCopyWithSyntaxHighlighting","focus","execCommand","registerExecCommandImpl","browserCommand","addImplementation","focusedEditor","ICodeEditorService","getFocusedCodeEditor","hasTextFocus","emptySelectionClipboard","codeEditorService","clipboardService","IClipboardService","clipboardText","metadata","pasteOnNewLine","multicursorText","mode","readText","sent","InMemoryClipboardMetadataManager","INSTANCE","isFromEmptySelection","trigger","text","ApplyCodeActionReason","getAdditionalDocumentationForShowingActions","codeActionCommandId","refactorCommandId","refactorPreviewCommandId","sourceActionCommandId","organizeImportsCommandId","fixAllCommandId","ManagedCodeActionSet","actions","documentation","disposables","allActions","_toConsumableArray","codeActionsComparator","validActions","filter","_ref","action","disabled","some","_ref2","fix","kind","CodeActionKind","QuickFix","contains","isPreferred","a","b","_ref3","_ref4","isNonEmptyArray","diagnostics","codeActionsPreferredComparator","emptyCodeActionsResponse","getCodeActions","registry","rangeOrSelection","progress","token","codeActionContext","cts","providers","promises","listener","allDocumentation","only","include","TextModelCancellationTokenSource","getCodeActionProviders","DisposableStore","provider","providedCodeActions","filteredActions","report","provideCodeActions","add","isCancellationRequested","abrupt","filtersAction","getDocumentationFromProvider","CodeActionItem","t0","isCancellationError","onUnexpectedExternalError","onDidChange","newProviders","all","cancel","x","flat","concat","coalesce","finish","providedCodeActionKinds","mayIncludeActionsOfKind","actionsToShow","_b","_c","_getAdditionalMenuItems","delegateYield","item","t1","_marked","entry","currentBest","_step2","_iterator2","_step3","_iterator3","_step4","_iterator4","applyCodeAction","codeActionReason","CancellationToken","None","bulkEditService","commandService","telemetryService","notificationService","message","IBulkEditService","ICommandService","ITelemetryService","INotificationService","publicLog2","codeActionTitle","codeActionKind","codeActionIsPreferred","reason","edit","edits","quotableLabel","code","respectAutoSaveConfig","OnSave","showPreview","preview","isApplied","executeCommand","asMessage","error","Error","CommandsRegistry","resource","itemResolveCount","_accessor$get","codeActionProvider","validatedRangeOrSelection","codeActionSet","resolving","resolveCount","_context5","URI","illegalArgument","ILanguageFeaturesService","IModelService","isISelection","liftSelection","isIRange","validateRange","triggerAction","CodeActionTriggerSource","Default","includeSourceActions","Progress","Math","min","setTimeout","CodeActionKeybindingResolver","keybindingService","allCodeActionBindings","Lazy","getKeybindings","codeActionCommands","indexOf","resolvedKeybinding","commandArgs","SourceOrganizeImports","SourceFixAll","assign","CodeActionCommandArgs","fromUser","binding","bestKeybindingForCodeAction","candidates","candidate","preferred","reduceRight","IKeybindingService","uncategorizedCodeActionGroup","freeze","Empty","codeActionGroups","RefactorExtract","icon","Codicon","wrench","RefactorInline","RefactorRewrite","RefactorMove","SurroundWith","symbolSnippet","Source","symbolFile","toMenuItems","inputCodeActions","showHeaders","keybindingResolver","menuEntries","menuEntry","allMenuItems","keybinding","LightBulbState","Hidden","Showing","editorPosition","widgetPosition","LightBulbWidget","quickFixActionId","preferredFixActionId","_onClick","Emitter","onClick","event","_state","_domNode","dom","$","Gesture","ignoreTarget","addContentWidget","_assertThisInitialized","_","editorModel","state","getLineCount","hide","addStandardDisposableGenericMouseDownListener","preventDefault","_dom$getDomNodePagePo","getDomNodePagePosition","top","height","lineHeight","pad","floor","fire","posx","y","addDisposableListener","buttons","enabled","Event","runAndSubscribe","onDidUpdateKeybindings","_preferredKbLabel","withNullAsUndefined","lookupKeybinding","getLabel","_quickFixKbLabel","_updateLightBulbTitleAndIcon","_get","_getPrototypeOf","prototype","removeContentWidget","atPosition","getOptions","_model$validatePositi","validatePosition","tabSize","fontInfo","lineContent","getLineContent","indent","computeIndentLevel","isFolded","getTopForLineNumber","effectiveLineNumber","spaceWidth","preference","_posPref","layoutContentWidget","_this$_domNode$classL3","_this$_domNode$classL4","_this$_domNode$classL","_this$_domNode$classL2","hasAutoFix","classList","remove","ThemeIcon","asClassNameArray","lightBulb","lightbulbAutofix","_CodeActionUi_disposed","__classPrivateFieldSet","receiver","TypeError","has","__classPrivateFieldGet","CodeActionUi","delegate","instantiationService","_configurationService","_actionWidgetService","_commandService","_activeCodeActions","MutableDisposable","_showDisabled","_lightBulbWidget","widget","createInstance","showCodeActionList","includeDisabledActions","fromLightbulb","_resolver","onDidLayoutChange","newState","_d","_e","validActionToApply","invalidAction","rawValue","onUnexpectedError","update","tryGetValidActionToApply","context","getInvalidActionThatWouldHaveBeenApplied","MessageController","showMessage","notAvailableMessage","toCoords","isVisible","autoApply","find","at","editorDom","anchor","getDomNode","isIPosition","onSelect","onHide","show","_shouldShowHeaders","getResolver","_getActionBarActions","revealPosition","render","cursorCoords","getScrolledVisiblePosition","editorCoords","getValue","uri","resultActions","tooltip","class","run","_this3$_commandServic","commandArguments","WeakMap","IInstantiationService","IConfigurationService","IActionWidgetService","_CodeActionModel_isDisposed","CodeActionsState","SUPPORTED_CODE_ACTIONS","CodeActionOracle","_markerService","_signalChange","_delay","_autoTriggerTimer","TimeoutTimer","onMarkerChanged","_onMarkerChanges","_onCursorChange","_getRangeOfSelectionUnlessWhitespaceEnclosed","_createEventAndSignalChange","resources","isEqual","cancelAndSet","_selection$getPositio","line","test","Triggered","_cancellablePromise","catch","emptyCodeActionSet","CodeActionModel","_Disposable2","_registry","_progressService","_this4","_codeActionOracle","_onDidChangeState","onDidChangeState","_supportedCodeActions","_update","onDidChangeModelLanguage","setState","_this5","supportedActions","Array","isArray","join","createCancelablePromise","showWhile","skipNotify","contextKeyForSupportedActions","ContextKeyExpr","regex","keys","RegExp","escapeRegExpCharacters","refactorTrigger","userArgs","codeActionFrom","Refactor","triggerCodeActionsForEditorSelection","onlyIncludePreferredActions","argsSchema","defaultSnippets","body","enum","enumDescriptions","CodeActionController","markerService","progressService","_instantiationService","languageFeaturesService","_model","_ui","QuickFixAction","Id","AutoFixAction","retrigger","_applyCodeAction","_trigger","closeMessage","triggerPosition","invokeFunction","FromCodeActions","controller","manualTriggerAtCurrentPosition","IMarkerService","IEditorProgressService","and","hasCodeActionsProvider","CodeActionCommand","_EditorCommand","EditorCommand","RefactorAction","contextMenuOpts","RefactorPreview","_super5","SourceAction","_super6","OrganizeImportsAction","_EditorAction5","_super7","OrganizeImports","FixAllAction","_EditorAction6","_super8","FixAll","_EditorAction7","_super9","AutoFix","registerEditorCommand","Registry","as","Extensions","Configuration","registerConfiguration","editorConfigurationBaseNode","scope","other","startsWith","sep","part","providedKind","intersects","excludes","exclude","excludesAction","actionKind","append","arg","defaults","getKindFromUser","getApplyFromUser","getPreferredUser","defaultAutoApply","toLowerCase","defaultKind","resolveCodeAction","CodeLensModel","lenses","_disposables","isDisposed","list","symbol","getCodeLensModel","providerRanks","ordered","Map","provideCodeLenses","_len","_key","assertType","isUri","codeLensProvider","_loop","Boolean","resolveCodeLens","finally","ICodeLensCache","createDecorator","CacheItem","lineCount","data","CodeLensCache","storageService","_fakeProvider","_class","_cache","LRUCache","runWhenIdle","raw","_deserialize","once","onWillSaveState","WillSaveStateReason","SHUTDOWN","store","_serialize","copyItems","copyModel","toString","delete","create","_step$value","lines","Set","values","JSON","stringify","parse","element","IStorageService","registerSingleton","CodeLensViewZone","afterLineNumber","heightInPx","onHeight","afterColumn","_onHeight","suppressMouseDown","domNode","createElement","_lastHeight","hasAttribute","CodeLensContentWidget","allowEditorOverflow","_commands","_isEmpty","_id","_idPool","updatePosition","animate","children","hasSymbol","lens","renderLabelWithIcons","trim","String","role","link","parentElement","getLineFirstNonWhitespaceColumn","_widgetPosition","CodeLensHelper","_removeDecorations","_addDecorations","_addDecorationsCallbacks","decoration","callback","changeAccessor","resultingDecorations","deltaDecorations","codeLensDecorationOptions","collapseOnReplaceEdit","CodeLensWidget","viewZoneChangeAccessor","updateCallback","_isDisposed","_data","_decorationIds","codeLensData","plusRange","lift","_viewZone","_viewZoneId","addZone","_createContentWidgetIfNecessary","_contentWidget","withCommands","removeZone","layoutZone","symbols","resolved","getCommand","isValid","CodeLensContribution","_languageFeaturesService","debounceService","_notificationService","_codeLensCache","_localToDispose","_lenses","_oldCodeLensModels","_provideCodeLensDebounce","for","_resolveCodeLensesDebounce","salt","_resolveCodeLensesScheduler","_resolveCodeLensesInViewport","_onModelChange","_updateLensStyle","_localDispose","_currentCodeLensModel","lineHeightFactor","max","fontSize","codeLensHeight","_this$_getLayoutInfo","_getLayoutInfo","fontFamily","editorFontInfo","style","getContainerDomNode","setProperty","fontFeatureSettings","EDITOR_FONT_DEFAULTS","changeViewZones","updateHeight","_getCodeLensModelPromise","_resolveCodeLensesPromise","cachedLenses","_renderCodeLensSymbols","registration","scheduler","Date","now","put","newDelay","delay","_resolveCodeLensesInViewportSoon","toDisposable","decorationsAccessor","viewZonesAccessor","toDispose","lastLensLineNumber","getLineNumber","l","splice","commit","onDidScrollChange","scrollTopChanged","scrollState","StableEditorScrollState","capture","_disposeAllLenses","restore","onMouseDown","tagName","disposableTimeout","cachedLensesNow","decChangeAccessor","lastGroup","_step5","maxLineNumber","groups","_iterator5","layoutInfo","viewZoneAccessor","codeLensIndex","groupsIndex","symbolsLineNumber","codeLensLineNumber","updateCodeLensSymbols","toResolve","request","computeIfNecessary","resolvePromise","resolvedSymbols","updateCommands","ILanguageFeatureDebounceService","ShowLensesInCurrentLine","hasCodeLensProvider","quickInputService","codelensController","items","_iterator6","_step6","IQuickInputService","positionLineNumber","pick","canPickMany","getColors","colors","reverse","provideDocumentColors","colorInfo","getColorPresentations","provideColorPresentations","colorProviderRegistry","colorProvider","rawCIs","ci","red","green","blue","alpha","_len2","_key2","_color","presentations","ColorDecorationInjectedTextMarker","ColorDetector","languageFeatureDebounceService","_decorationsIds","_colorDatas","_colorDecoratorIds","_ruleFactory","DynamicCssRules","_decoratorLimitReporter","DecoratorLimitReporter","_colorDecorationClassRefs","_debounceInformation","RECOMPUTE_TIME","_isEnabled","isEnabled","onModelChanged","prevIsEnabled","removeAllDecorations","_timeoutTimer","_computePromise","languageId","getLanguageId","deprecatedConfig","colorDecorators","beginCompute","sw","StopWatch","elapsed","colorInfos","updateDecorations","updateColorDecorators","colorDatas","decorations","EMPTY","colorData","limit","_colorData$i$colorInf","rgba","RGBA","round","g","ref","createClassNameRef","backgroundColor","before","content","noBreakWhitespace","inlineClassName","inlineClassNameAffectsLetterSpacing","attachedData","limited","removeDecorations","getDecorationsInRange","_onDidChange","_computed","_limited","computed","ColorPickerModel","availableColorPresentations","presentationIndex","_onColorFlushed","onColorFlushed","_onDidChangeColor","onDidChangeColor","_onDidChangePresentation","onDidChangePresentation","originalColor","_colorPresentations","colorPresentations","presentation","flushColor","originalText","originalTextPrefix","split","ColorPickerHeader","container","themeService","pickedColorNode","setAttribute","colorBox","Color","Format","CSS","format","getColorTheme","getColor","editorHoverBackground","white","onDidColorThemeChange","theme","EventType","CLICK","selectNextColorPresentation","toggle","isLighter","textContent","prepend","ColorPickerBody","pixelRatio","saturationBox","SaturationBox","onDidSaturationValueChange","opacityStrip","OpacityStrip","onDidOpacityChange","hueStrip","HueStrip","onDidHueChange","v","hsva","HSVA","h","layout","_Disposable3","canvas","POINTER_DOWN","onPointerDown","monitor","Element","GlobalPointerMoveMonitor","origin","onDidChangePosition","offsetX","offsetY","startMonitoring","pointerId","pageX","pageY","pointerUpListener","POINTER_UP","stopMonitoring","width","paintSelection","offsetWidth","offsetHeight","paint","saturatedColor","ctx","getContext","whiteGradient","createLinearGradient","addColorStop","blackGradient","rect","fillStyle","fill","isMonitoring","Strip","_Disposable4","overlay","slider","updateSliderPosition","_this6","onDidChangeTop","_Strip","_this7","_color$rgba","opaque","transparent","background","_Strip2","_this8","ColorPickerWidget","_Widget","_this9","PixelRatio","appendChild","header","Widget","ColorHover","owner","forceShowAtRange","ColorHoverParticipant","_themeService","hoverOrdinal","lineDecorations","AsyncIterableObject","fromPromise","_computeAsync","colorDetector","colorHover","isColorDecoration","getColorData","_createColorHover","_colorInfo$color","guessColorPresentation","hoverParts","fragment","setColorPicker","updateEditorModel","textEdits","newRange","textEdit","trackedRange","_setTrackedRange","executeEdits","_getTrackedRange","forceMoveMarkers","setEndPosition","additionalTextEdits","updateColorPresentations","IThemeService","ColorContribution","mouseEvent","detail","injectedText","hoverController","ModesHoverController","isColorPickerVisible","showContentHover","HoverParticipantRegistry","BlockCommentCommand","insertSpace","languageConfigurationService","_insertSpace","_usedEndToken","startToken","endToken","ops","startLineText","endLineText","startTokenIndex","lastIndexOf","endTokenIndex","substring","startLineAfterStartToken","endLineBeforeEndToken","charCodeAt","_createRemoveBlockCommentOperations","_createAddBlockCommentOperations","op","addTrackedEditOperation","tokenization","tokenizeIfCheap","getLanguageIdAtPosition","config","getLanguageConfiguration","comments","blockCommentStartToken","blockCommentEndToken","_createOperationsForBlockComment","inverseEditOperations","getInverseEditOperations","startTokenEditOperation","endTokenEditOperation","srcRange","deltaColumn","haystack","needle","offset","needleLength","codeA","codeB","res","EditOperation","replace","insert","LineCommentCommand","ignoreEmptyLines","ignoreFirstLine","_tabSize","_type","_selectionId","_deltaColumn","_moveEndPositionDown","_ignoreEmptyLines","_ignoreFirstLine","shouldRemoveComments","_createRemoveLineCommentsOperations","_normalizeInsertionPoint","_createAddLineCommentsOperations","cursorPosition","positionColumn","trackSelection","startTokenAllowedBeforeColumn","_attemptRemoveBlockComment","firstNonWhitespaceIndex","strings","_gatherPreflightData","supported","_executeLineComments","_executeBlockComment","getTrackedSelection","selectionStartLineNumber","selectionStartColumn","afterCommentStr","lineData","ignore","commentStrOffset","commentStr","lineCommentToken","commentStrLength","onlyWhitespaceLines","lineContentStartOffset","_haystackHasNeedleAtOffset","commentStrEndOffset","_gatherPreflightCommentStrings","_analyzeLines","currentVisibleColumn","isTab","columnSize","j","lenJ","minVisibleColumn","nextVisibleColumn","CommentLineAction","ILanguageConfigurationService","modelOptions","commentsOptions","index","curr","ToggleCommentLineAction","_CommentLineAction","AddLineCommentAction","_CommentLineAction2","RemoveLineCommentAction","_CommentLineAction3","BlockCommentAction","ContextMenuController","_contextMenuService","_contextViewService","_contextKeyService","_keybindingService","_menuService","_toDispose","_contextMenuIsBeingShownCount","onContextMenu","_onContextMenu","onMouseWheel","view","getContextViewElement","srcElement","shadowRoot","hideContextView","onKeyDown","keyCode","stopPropagation","showContextMenu","_showScrollbarContextMenu","posy","hasSelectionAtPosition","menuActions","_getMenuActions","isSimpleWidget","_doShowContextMenu","menu","createMenu","getActions","addedItems","SubmenuItemAction","subActions","SubmenuAction","Separator","pop","oldHoverSetting","updateOptions","hover","useShadowDOM","isIOS","domForShadowRoot","getAnchor","getActionViewItem","_keybindingFor","ActionViewItem","isMenu","customActionViewItem","getKeyBinding","wasCancelled","minimapOptions","lastId","createAction","checked","createEnumAction","configName","configuredValue","createRunner","updateValue","option","createSubmenuAction","renderCharacters","size","showSlider","IContextMenuService","IContextViewService","IMenuService","ShowContextMenu","vscodeClipboardMime","CopyPasteController","_bulkEditService","_clipboardService","handleCopy","handlePaste","scheme","Schemas","vscodeNotebookCell","clipboardData","arePasteActionsEnabled","ranges","primarySelection","wasFromEmptySelection","getLineLength","documentPasteEditProvider","prepareDocumentPaste","dataTransfer","toVSDataTransfer","handle","generateUuid","setCopyMetadata","promise","results","_currentClipboardItem","dataTransferPromise","setData","rawMetadata","tokenSource","toMergeDataTransfer","providerEdit","snippet","combinedWorkspaceEdit","getData","stopImmediatePropagation","EditorStateCancellationTokenSource","Mimes","uriList","readResources","createStringDataTransferItem","UriList","withProgress","location","cancellable","getProviderPasteEdit","insertText","SnippetParser","escape","ResourceTextEdit","insertAsSnippet","additionalEdit","applyDefaultPasteHandler","raceCancellation","isSupportedProvider","provideDocumentPasteEdits","textDataTransfer","asString","pasteMimeTypes","DataTransfers","FILES","asFile","IProgressService","CursorState","thisLen","equalsSelection","StackElement","cursorState","scrollTop","scrollLeft","CursorUndoRedoController","_isCursorUndoRedo","_undoStack","_redoStack","onDidChangeCursorSelection","oldSelections","oldModelVersionId","modelVersionId","prevState","getScrollTop","getScrollLeft","shift","_applyState","stackElement","setScrollPosition","CursorUndo","cursorUndo","CursorRedo","cursorRedo"],"sourceRoot":""}