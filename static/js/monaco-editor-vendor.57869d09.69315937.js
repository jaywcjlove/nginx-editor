"use strict";(self.webpackChunkmonaco_editor_nginx=self.webpackChunkmonaco_editor_nginx||[]).push([[5252],{2890:function(e,i,t){t.d(i,{CH:function(){return h},CR:function(){return u},D4:function(){return c},u7:function(){return d},xh:function(){return s},yu:function(){return l}});var n=t(60136),o=t(27277),r=t(15671),a=t(43144),s=function(e){(0,n.Z)(t,e);var i=(0,o.Z)(t);function t(e,n,o){var a;return(0,r.Z)(this,t),(a=i.call(this,e,n))._renderingContextBrand=void 0,a._viewLines=o,a}return(0,a.Z)(t,[{key:"linesVisibleRangesForRange",value:function(e,i){return this._viewLines.linesVisibleRangesForRange(e,i)}},{key:"visibleRangeForPosition",value:function(e){return this._viewLines.visibleRangeForPosition(e)}}]),t}(function(){function e(i,t){(0,r.Z)(this,e),this._restrictedRenderingContextBrand=void 0,this._viewLayout=i,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;var n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}return(0,a.Z)(e,[{key:"getScrolledTopFromAbsoluteTop",value:function(e){return e-this.scrollTop}},{key:"getVerticalOffsetForLineNumber",value:function(e,i){return this._viewLayout.getVerticalOffsetForLineNumber(e,i)}},{key:"getVerticalOffsetAfterLineNumber",value:function(e,i){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,i)}},{key:"getDecorationsInViewport",value:function(){return this.viewportData.getDecorationsInViewport()}}]),e}()),d=(0,a.Z)((function e(i,t,n,o){(0,r.Z)(this,e),this.outsideRenderedLine=i,this.lineNumber=t,this.ranges=n,this.continuesOnNextLine=o})),l=function(){function e(i,t){(0,r.Z)(this,e),this._horizontalRangeBrand=void 0,this.left=Math.round(i),this.width=Math.round(t)}return(0,a.Z)(e,[{key:"toString",value:function(){return"[".concat(this.left,",").concat(this.width,"]")}}],[{key:"from",value:function(i){for(var t=new Array(i.length),n=0,o=i.length;n<o;n++){var r=i[n];t[n]=new e(r.left,r.width)}return t}}]),e}(),u=function(){function e(i,t){(0,r.Z)(this,e),this._floatHorizontalRangeBrand=void 0,this.left=i,this.width=t}return(0,a.Z)(e,[{key:"toString",value:function(){return"[".concat(this.left,",").concat(this.width,"]")}}],[{key:"compare",value:function(e,i){return e.left-i.left}}]),e}(),c=(0,a.Z)((function e(i,t){(0,r.Z)(this,e),this.outsideRenderedLine=i,this.originalLeft=t,this.left=Math.round(this.originalLeft)})),h=(0,a.Z)((function e(i,t){(0,r.Z)(this,e),this.outsideRenderedLine=i,this.ranges=t}))},63835:function(e,i,t){t.d(i,{N:function(){return d}});var n=t(15671),o=t(43144),r=t(53651),a=t(65631),s=t(90650),d=function(){function e(i,t,o,r){(0,n.Z)(this,e),this.configuration=i,this.viewModel=t,this.userInputEvents=o,this.commandDelegate=r}return(0,o.Z)(e,[{key:"paste",value:function(e,i,t,n){this.commandDelegate.paste(e,i,t,n)}},{key:"type",value:function(e){this.commandDelegate.type(e)}},{key:"compositionType",value:function(e,i,t,n){this.commandDelegate.compositionType(e,i,t,n)}},{key:"compositionStart",value:function(){this.commandDelegate.startComposition()}},{key:"compositionEnd",value:function(){this.commandDelegate.endComposition()}},{key:"cut",value:function(){this.commandDelegate.cut()}},{key:"setSelection",value:function(e){r.CoreNavigationCommands.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}},{key:"_validateViewColumn",value:function(e){var i=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<i?new a.L(e.lineNumber,i):e}},{key:"_hasMulticursorModifier",value:function(e){switch(this.configuration.options.get(77)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}},{key:"_hasNonMulticursorModifier",value:function(e){switch(this.configuration.options.get(77)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}},{key:"dispatchMouse",value:function(e){var i=this.configuration.options,t=s.IJ&&i.get(106),n=i.get(22);e.middleButton&&!t?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():3===e.mouseDownCount?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):2===e.mouseDownCount?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey||n?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}},{key:"_usualArgs",value:function(e,i){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:i}}},{key:"moveTo",value:function(e,i){r.CoreNavigationCommands.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}},{key:"_moveToSelect",value:function(e,i){r.CoreNavigationCommands.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}},{key:"_columnSelect",value:function(e,i,t){e=this._validateViewColumn(e),r.CoreNavigationCommands.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:i,doColumnSelect:t})}},{key:"_createCursor",value:function(e,i){e=this._validateViewColumn(e),r.CoreNavigationCommands.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:i})}},{key:"_lastCursorMoveToSelect",value:function(e,i){r.CoreNavigationCommands.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}},{key:"_wordSelect",value:function(e,i){r.CoreNavigationCommands.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}},{key:"_wordSelectDrag",value:function(e,i){r.CoreNavigationCommands.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}},{key:"_lastCursorWordSelect",value:function(e,i){r.CoreNavigationCommands.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}},{key:"_lineSelect",value:function(e,i){r.CoreNavigationCommands.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}},{key:"_lineSelectDrag",value:function(e,i){r.CoreNavigationCommands.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}},{key:"_lastCursorLineSelect",value:function(e,i){r.CoreNavigationCommands.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}},{key:"_lastCursorLineSelectDrag",value:function(e,i){r.CoreNavigationCommands.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}},{key:"_selectAll",value:function(){r.CoreNavigationCommands.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}},{key:"_convertViewToModelPosition",value:function(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}},{key:"emitKeyDown",value:function(e){this.userInputEvents.emitKeyDown(e)}},{key:"emitKeyUp",value:function(e){this.userInputEvents.emitKeyUp(e)}},{key:"emitContextMenu",value:function(e){this.userInputEvents.emitContextMenu(e)}},{key:"emitMouseMove",value:function(e){this.userInputEvents.emitMouseMove(e)}},{key:"emitMouseLeave",value:function(e){this.userInputEvents.emitMouseLeave(e)}},{key:"emitMouseUp",value:function(e){this.userInputEvents.emitMouseUp(e)}},{key:"emitMouseDown",value:function(e){this.userInputEvents.emitMouseDown(e)}},{key:"emitMouseDrag",value:function(e){this.userInputEvents.emitMouseDrag(e)}},{key:"emitMouseDrop",value:function(e){this.userInputEvents.emitMouseDrop(e)}},{key:"emitMouseDropCanceled",value:function(){this.userInputEvents.emitMouseDropCanceled()}},{key:"emitMouseWheel",value:function(e){this.userInputEvents.emitMouseWheel(e)}}]),e}()},75861:function(e,i,t){t.d(i,{F:function(){return l},G:function(){return u}});var n=t(15671),o=t(43144),r=t(65379),a=t(81200),s=t(74146),d=t(53603),l=function(){function e(i){(0,n.Z)(this,e),this._createLine=i,this._set(1,[])}return(0,o.Z)(e,[{key:"flush",value:function(){this._set(1,[])}},{key:"_set",value:function(e,i){this._lines=i,this._rendLineNumberStart=e}},{key:"_get",value:function(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}},{key:"getStartLineNumber",value:function(){return this._rendLineNumberStart}},{key:"getEndLineNumber",value:function(){return this._rendLineNumberStart+this._lines.length-1}},{key:"getCount",value:function(){return this._lines.length}},{key:"getLine",value:function(e){var i=e-this._rendLineNumberStart;if(i<0||i>=this._lines.length)throw new s.he("Illegal value for lineNumber");return this._lines[i]}},{key:"onLinesDeleted",value:function(e,i){if(0===this.getCount())return null;var t=this.getStartLineNumber(),n=this.getEndLineNumber();if(i<t){var o=i-e+1;return this._rendLineNumberStart-=o,null}if(e>n)return null;for(var r=0,a=0,s=t;s<=n;s++){var d=s-this._rendLineNumberStart;e<=s&&s<=i&&(0===a?(r=d,a=1):a++)}if(e<t){var l=0;l=i<t?i-e+1:t-e,this._rendLineNumberStart-=l}return this._lines.splice(r,a)}},{key:"onLinesChanged",value:function(e,i){var t=e+i-1;if(0===this.getCount())return!1;for(var n=this.getStartLineNumber(),o=this.getEndLineNumber(),r=!1,a=e;a<=t;a++)a>=n&&a<=o&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),r=!0);return r}},{key:"onLinesInserted",value:function(e,i){if(0===this.getCount())return null;var t=i-e+1,n=this.getStartLineNumber(),o=this.getEndLineNumber();if(e<=n)return this._rendLineNumberStart+=t,null;if(e>o)return null;if(t+e>o)return this._lines.splice(e-this._rendLineNumberStart,o-e+1);for(var r=[],a=0;a<t;a++)r[a]=this._createLine();var s=e-this._rendLineNumberStart,d=this._lines.slice(0,s),l=this._lines.slice(s,this._lines.length-t),u=this._lines.slice(this._lines.length-t,this._lines.length);return this._lines=d.concat(r).concat(l),u}},{key:"onTokensChanged",value:function(e){if(0===this.getCount())return!1;for(var i=this.getStartLineNumber(),t=this.getEndLineNumber(),n=!1,o=0,r=e.length;o<r;o++){var a=e[o];if(!(a.toLineNumber<i||a.fromLineNumber>t))for(var s=Math.max(i,a.fromLineNumber),d=Math.min(t,a.toLineNumber),l=s;l<=d;l++){var u=l-this._rendLineNumberStart;this._lines[u].onTokensChanged(),n=!0}}return n}}]),e}(),u=function(){function e(i){var t=this;(0,n.Z)(this,e),this._host=i,this.domNode=this._createDomNode(),this._linesCollection=new l((function(){return t._host.createVisibleLine()}))}return(0,o.Z)(e,[{key:"_createDomNode",value:function(){var e=(0,r.X)(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}},{key:"onConfigurationChanged",value:function(e){return!!e.hasChanged(143)}},{key:"onFlushed",value:function(e){return this._linesCollection.flush(),!0}},{key:"onLinesChanged",value:function(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}},{key:"onLinesDeleted",value:function(e){var i=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(i)for(var t=0,n=i.length;t<n;t++){var o=i[t].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0}},{key:"onLinesInserted",value:function(e){var i=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(i)for(var t=0,n=i.length;t<n;t++){var o=i[t].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onTokensChanged",value:function(e){return this._linesCollection.onTokensChanged(e.ranges)}},{key:"onZonesChanged",value:function(e){return!0}},{key:"getStartLineNumber",value:function(){return this._linesCollection.getStartLineNumber()}},{key:"getEndLineNumber",value:function(){return this._linesCollection.getEndLineNumber()}},{key:"getVisibleLine",value:function(e){return this._linesCollection.getLine(e)}},{key:"renderLines",value:function(e){var i=this._linesCollection._get(),t=new c(this.domNode.domNode,this._host,e),n={rendLineNumberStart:i.rendLineNumberStart,lines:i.lines,linesLength:i.lines.length},o=t.render(n,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(o.rendLineNumberStart,o.lines)}}]),e}(),c=function(){function e(i,t,o){(0,n.Z)(this,e),this.domNode=i,this.host=t,this.viewportData=o}return(0,o.Z)(e,[{key:"render",value:function(e,i,t,n){var o={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(o.rendLineNumberStart+o.linesLength-1<i||t<o.rendLineNumberStart){o.rendLineNumberStart=i,o.linesLength=t-i+1,o.lines=[];for(var r=i;r<=t;r++)o.lines[r-i]=this.host.createVisibleLine();return this._finishRendering(o,!0,n),o}if(this._renderUntouchedLines(o,Math.max(i-o.rendLineNumberStart,0),Math.min(t-o.rendLineNumberStart,o.linesLength-1),n,i),o.rendLineNumberStart>i){var a=i,s=Math.min(t,o.rendLineNumberStart-1);a<=s&&(this._insertLinesBefore(o,a,s,n,i),o.linesLength+=s-a+1)}else if(o.rendLineNumberStart<i){var d=Math.min(o.linesLength,i-o.rendLineNumberStart);d>0&&(this._removeLinesBefore(o,d),o.linesLength-=d)}if(o.rendLineNumberStart=i,o.rendLineNumberStart+o.linesLength-1<t){var l=o.rendLineNumberStart+o.linesLength,u=t;l<=u&&(this._insertLinesAfter(o,l,u,n,i),o.linesLength+=u-l+1)}else if(o.rendLineNumberStart+o.linesLength-1>t){var c=Math.max(0,t-o.rendLineNumberStart+1),h=o.linesLength-1-c+1;h>0&&(this._removeLinesAfter(o,h),o.linesLength-=h)}return this._finishRendering(o,!1,n),o}},{key:"_renderUntouchedLines",value:function(e,i,t,n,o){for(var r=e.rendLineNumberStart,a=e.lines,s=i;s<=t;s++){var d=r+s;a[s].layoutLine(d,n[d-o])}}},{key:"_insertLinesBefore",value:function(e,i,t,n,o){for(var r=[],a=0,s=i;s<=t;s++)r[a++]=this.host.createVisibleLine();e.lines=r.concat(e.lines)}},{key:"_removeLinesBefore",value:function(e,i){for(var t=0;t<i;t++){var n=e.lines[t].getDomNode();n&&this.domNode.removeChild(n)}e.lines.splice(0,i)}},{key:"_insertLinesAfter",value:function(e,i,t,n,o){for(var r=[],a=0,s=i;s<=t;s++)r[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(r)}},{key:"_removeLinesAfter",value:function(e,i){for(var t=e.linesLength-i,n=0;n<i;n++){var o=e.lines[t+n].getDomNode();o&&this.domNode.removeChild(o)}e.lines.splice(t,i)}},{key:"_finishRenderingNewLines",value:function(i,t,n,o){e._ttPolicy&&(n=e._ttPolicy.createHTML(n));var r=this.domNode.lastChild;t||!r?this.domNode.innerHTML=n:r.insertAdjacentHTML("afterend",n);for(var a=this.domNode.lastChild,s=i.linesLength-1;s>=0;s--){var d=i.lines[s];o[s]&&(d.setDomNode(a),a=a.previousSibling)}}},{key:"_finishRenderingInvalidLines",value:function(i,t,n){var o=document.createElement("div");e._ttPolicy&&(t=e._ttPolicy.createHTML(t)),o.innerHTML=t;for(var r=0;r<i.linesLength;r++){var a=i.lines[r];if(n[r]){var s=o.firstChild,d=a.getDomNode();d.parentNode.replaceChild(s,d),a.setDomNode(s)}}}},{key:"_finishRendering",value:function(i,t,n){var o=e._sb,r=i.linesLength,a=i.lines,s=i.rendLineNumberStart,d=[];o.reset();for(var l=!1,u=0;u<r;u++){var c=a[u];if(d[u]=!1,!c.getDomNode())c.renderLine(u+s,n[u],this.viewportData,o)&&(d[u]=!0,l=!0)}l&&this._finishRenderingNewLines(i,t,o.build(),d),o.reset();for(var h=!1,f=[],g=0;g<r;g++){var v=a[g];if(f[g]=!1,!d[g])v.renderLine(g+s,n[g],this.viewportData,o)&&(f[g]=!0,h=!0)}h&&this._finishRenderingInvalidLines(i,o.build(),f)}}]),e}();c._ttPolicy=(0,a.Z)("editorViewLayer",{createHTML:function(e){return e}}),c._sb=new d.HT(1e5)},50183:function(e,i,t){t.d(i,{Ib:function(){return m},Ip:function(){return v}});var n=t(15671),o=t(43144),r=t(97326),a=t(11752),s=t(61120),d=t(60136),l=t(27277),u=t(65379),c=t(88616),h=t(75861),f=function(e){(0,d.Z)(t,e);var i=(0,l.Z)(t);function t(e){var o;(0,n.Z)(this,t),(o=i.call(this,e))._visibleLines=new h.G((0,r.Z)(o)),o.domNode=o._visibleLines.domNode;var a=o._context.configuration.options.get(50);return(0,c.N)(o.domNode,a),o._dynamicOverlays=[],o._isFocused=!1,o.domNode.setClassName("view-overlays"),o}return(0,o.Z)(t,[{key:"shouldRender",value:function(){if((0,a.Z)((0,s.Z)(t.prototype),"shouldRender",this).call(this))return!0;for(var e=0,i=this._dynamicOverlays.length;e<i;e++){if(this._dynamicOverlays[e].shouldRender())return!0}return!1}},{key:"dispose",value:function(){(0,a.Z)((0,s.Z)(t.prototype),"dispose",this).call(this);for(var e=0,i=this._dynamicOverlays.length;e<i;e++){this._dynamicOverlays[e].dispose()}this._dynamicOverlays=[]}},{key:"getDomNode",value:function(){return this.domNode}},{key:"createVisibleLine",value:function(){return new g(this._context.configuration,this._dynamicOverlays)}},{key:"addDynamicOverlay",value:function(e){this._dynamicOverlays.push(e)}},{key:"onConfigurationChanged",value:function(e){this._visibleLines.onConfigurationChanged(e);for(var i=this._visibleLines.getStartLineNumber(),t=this._visibleLines.getEndLineNumber(),n=i;n<=t;n++){this._visibleLines.getVisibleLine(n).onConfigurationChanged(e)}var o=this._context.configuration.options.get(50);return(0,c.N)(this.domNode,o),!0}},{key:"onFlushed",value:function(e){return this._visibleLines.onFlushed(e)}},{key:"onFocusChanged",value:function(e){return this._isFocused=e.isFocused,!0}},{key:"onLinesChanged",value:function(e){return this._visibleLines.onLinesChanged(e)}},{key:"onLinesDeleted",value:function(e){return this._visibleLines.onLinesDeleted(e)}},{key:"onLinesInserted",value:function(e){return this._visibleLines.onLinesInserted(e)}},{key:"onScrollChanged",value:function(e){return this._visibleLines.onScrollChanged(e)||!0}},{key:"onTokensChanged",value:function(e){return this._visibleLines.onTokensChanged(e)}},{key:"onZonesChanged",value:function(e){return this._visibleLines.onZonesChanged(e)}},{key:"prepareRender",value:function(e){for(var i=this._dynamicOverlays.filter((function(e){return e.shouldRender()})),t=0,n=i.length;t<n;t++){var o=i[t];o.prepareRender(e),o.onDidRender()}}},{key:"render",value:function(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}},{key:"_viewOverlaysRender",value:function(e){this._visibleLines.renderLines(e.viewportData)}}]),t}(t(81535).E),g=function(){function e(i,t){(0,n.Z)(this,e),this._configuration=i,this._lineHeight=this._configuration.options.get(66),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}return(0,o.Z)(e,[{key:"getDomNode",value:function(){return this._domNode?this._domNode.domNode:null}},{key:"setDomNode",value:function(e){this._domNode=(0,u.X)(e)}},{key:"onContentChanged",value:function(){}},{key:"onTokensChanged",value:function(){}},{key:"onConfigurationChanged",value:function(e){this._lineHeight=this._configuration.options.get(66)}},{key:"renderLine",value:function(e,i,t,n){for(var o="",r=0,a=this._dynamicOverlays.length;r<a;r++){o+=this._dynamicOverlays[r].render(t.startLineNumber,e)}return this._renderedContent!==o&&(this._renderedContent=o,n.appendString('<div style="position:absolute;top:'),n.appendString(String(i)),n.appendString("px;width:100%;height:"),n.appendString(String(this._lineHeight)),n.appendString('px;">'),n.appendString(o),n.appendString("</div>"),!0)}},{key:"layoutLine",value:function(e,i){this._domNode&&(this._domNode.setTop(i),this._domNode.setHeight(this._lineHeight))}}]),e}(),v=function(e){(0,d.Z)(t,e);var i=(0,l.Z)(t);function t(e){var o;(0,n.Z)(this,t);var r=(o=i.call(this,e))._context.configuration.options.get(143);return o._contentWidth=r.contentWidth,o.domNode.setHeight(0),o}return(0,o.Z)(t,[{key:"onConfigurationChanged",value:function(e){var i=this._context.configuration.options.get(143);return this._contentWidth=i.contentWidth,(0,a.Z)((0,s.Z)(t.prototype),"onConfigurationChanged",this).call(this,e)||!0}},{key:"onScrollChanged",value:function(e){return(0,a.Z)((0,s.Z)(t.prototype),"onScrollChanged",this).call(this,e)||e.scrollWidthChanged}},{key:"_viewOverlaysRender",value:function(e){(0,a.Z)((0,s.Z)(t.prototype),"_viewOverlaysRender",this).call(this,e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}]),t}(f),m=function(e){(0,d.Z)(t,e);var i=(0,l.Z)(t);function t(e){var o;(0,n.Z)(this,t);var r=(o=i.call(this,e))._context.configuration.options,a=r.get(143);return o._contentLeft=a.contentLeft,o.domNode.setClassName("margin-view-overlays"),o.domNode.setWidth(1),(0,c.N)(o.domNode,r.get(50)),o}return(0,o.Z)(t,[{key:"onConfigurationChanged",value:function(e){var i=this._context.configuration.options;(0,c.N)(this.domNode,i.get(50));var n=i.get(143);return this._contentLeft=n.contentLeft,(0,a.Z)((0,s.Z)(t.prototype),"onConfigurationChanged",this).call(this,e)||!0}},{key:"onScrollChanged",value:function(e){return(0,a.Z)((0,s.Z)(t.prototype),"onScrollChanged",this).call(this,e)||e.scrollHeightChanged}},{key:"_viewOverlaysRender",value:function(e){(0,a.Z)((0,s.Z)(t.prototype),"_viewOverlaysRender",this).call(this,e);var i=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(i),this.domNode.setWidth(this._contentLeft)}}]),t}(f)},81535:function(e,i,t){t.d(i,{E:function(){return u},K:function(){return c}});var n=t(15671),o=t(43144),r=t(97326),a=t(11752),s=t(61120),d=t(60136),l=t(27277),u=function(e){(0,d.Z)(t,e);var i=(0,l.Z)(t);function t(e){var o;return(0,n.Z)(this,t),(o=i.call(this))._context=e,o._context.addEventHandler((0,r.Z)(o)),o}return(0,o.Z)(t,[{key:"dispose",value:function(){this._context.removeEventHandler(this),(0,a.Z)((0,s.Z)(t.prototype),"dispose",this).call(this)}}]),t}(t(7339).O),c=function(){function e(){(0,n.Z)(this,e)}return(0,o.Z)(e,null,[{key:"write",value:function(e,i){e.setAttribute("data-mprt",String(i))}},{key:"read",value:function(e){var i=e.getAttribute("data-mprt");return null===i?0:parseInt(i,10)}},{key:"collect",value:function(e,i){for(var t=[],n=0;e&&e!==e.ownerDocument.body&&e!==i;)e.nodeType===e.ELEMENT_NODE&&(t[n++]=this.read(e)),e=e.parentElement;for(var o=new Uint8Array(n),r=0;r<n;r++)o[r]=t[n-r-1];return o}}]),e}()},56783:function(e,i,t){t.d(i,{q:function(){return a}});var n=t(15671),o=t(43144),r=t(65631),a=function(){function e(i){(0,n.Z)(this,e),this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=i}return(0,o.Z)(e,[{key:"emitKeyDown",value:function(e){var i;null===(i=this.onKeyDown)||void 0===i||i.call(this,e)}},{key:"emitKeyUp",value:function(e){var i;null===(i=this.onKeyUp)||void 0===i||i.call(this,e)}},{key:"emitContextMenu",value:function(e){var i;null===(i=this.onContextMenu)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseMove",value:function(e){var i;null===(i=this.onMouseMove)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseLeave",value:function(e){var i;null===(i=this.onMouseLeave)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseDown",value:function(e){var i;null===(i=this.onMouseDown)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseUp",value:function(e){var i;null===(i=this.onMouseUp)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseDrag",value:function(e){var i;null===(i=this.onMouseDrag)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseDrop",value:function(e){var i;null===(i=this.onMouseDrop)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseDropCanceled",value:function(){var e;null===(e=this.onMouseDropCanceled)||void 0===e||e.call(this)}},{key:"emitMouseWheel",value:function(e){var i;null===(i=this.onMouseWheel)||void 0===i||i.call(this,e)}},{key:"_convertViewToModelMouseEvent",value:function(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}},{key:"_convertViewToModelMouseTarget",value:function(i){return e.convertViewToModelMouseTarget(i,this._coordinatesConverter)}}],[{key:"convertViewToModelMouseTarget",value:function(e,i){var t=Object.assign({},e);return t.position&&(t.position=i.convertViewPositionToModelPosition(t.position)),t.range&&(t.range=i.convertViewRangeToModelRange(t.range)),5!==t.type&&8!==t.type||(t.detail=this.convertViewToModelViewZoneData(t.detail,i)),t}},{key:"convertViewToModelViewZoneData",value:function(e,i){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?i.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?i.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:i.convertViewPositionToModelPosition(e.position),afterLineNumber:i.convertViewPositionToModelPosition(new r.L(e.afterLineNumber,1)).lineNumber}}}]),e}()},80705:function(e,i,t){t.d(i,{Gm:function(){return oe}});var n,o=t(29439),r=t(74165),a=t(37762),s=t(97326),d=t(11752),l=t(61120),u=t(60136),c=t(27277),h=t(15671),f=t(43144),g=(t(9824),t(18420)),v=t(32959),m=t(74146),_=t(13880),p=t(65096),y=t(37649),C=t(85830),b=t(95253),w=t(76257),D=t(40688),L=t(56783),S=t(17683),M=t(30697),N=t(65631),k=t(17429),E=t(96601),T=t(13083),R=t(43886),I=t(98926),Z=t(78519),x=t(59881),P=t(43980),O=t(69683),V=t(99740),A=t(8022),W=t(64606),F=t(26746),H=t(49431),U=t(41335),B=t(93897),K=t(13698),z=t(47713),j=t(77002),Q=t(19536),q=t(88616),G=t(65441),J=t(71049),Y=function(e){(0,u.Z)(t,e);var i=(0,c.Z)(t);function t(){var e;return(0,h.Z)(this,t),(e=i.call(this))._editor=null,e._instantiationService=null,e._instances=e._register(new p.b2),e._pending=new Map,e._finishedInstantiation=[],e._finishedInstantiation[0]=!1,e._finishedInstantiation[1]=!1,e._finishedInstantiation[2]=!1,e._finishedInstantiation[3]=!1,e}return(0,f.Z)(t,[{key:"initialize",value:function(e,i,t){var n=this;this._editor=e,this._instantiationService=t;var o,r=(0,a.Z)(i);try{for(r.s();!(o=r.n()).done;){var s=o.value;this._pending.has(s.id)?(0,m.dL)(new Error("Cannot have two contributions with the same id ".concat(s.id))):this._pending.set(s.id,s)}}catch(d){r.e(d)}finally{r.f()}this._instantiateSome(0),this._register((0,J.To)((function(){n._instantiateSome(1)}))),this._register((0,J.To)((function(){n._instantiateSome(2)}))),this._register((0,J.To)((function(){n._instantiateSome(3)}),5e3))}},{key:"saveViewState",value:function(){var e,i={},t=(0,a.Z)(this._instances);try{for(t.s();!(e=t.n()).done;){var n=(0,o.Z)(e.value,2),r=n[0],s=n[1];"function"===typeof s.saveViewState&&(i[r]=s.saveViewState())}}catch(d){t.e(d)}finally{t.f()}return i}},{key:"restoreViewState",value:function(e){var i,t=(0,a.Z)(this._instances);try{for(t.s();!(i=t.n()).done;){var n=(0,o.Z)(i.value,2),r=n[0],s=n[1];"function"===typeof s.restoreViewState&&s.restoreViewState(e[r])}}catch(d){t.e(d)}finally{t.f()}}},{key:"get",value:function(e){return this._instantiateById(e),this._instances.get(e)||null}},{key:"onBeforeInteractionEvent",value:function(){this._instantiateSome(2)}},{key:"onAfterModelAttached",value:function(){var e=this;this._register((0,J.To)((function(){e._instantiateSome(1)}),50))}},{key:"_instantiateSome",value:function(e){if(!this._finishedInstantiation[e]){this._finishedInstantiation[e]=!0;var i,t=this._findPendingContributionsByInstantiation(e),n=(0,a.Z)(t);try{for(n.s();!(i=n.n()).done;){var o=i.value;this._instantiateById(o.id)}}catch(r){n.e(r)}finally{n.f()}}}},{key:"_findPendingContributionsByInstantiation",value:function(e){var i,t=[],n=(0,a.Z)(this._pending);try{for(n.s();!(i=n.n()).done;){var r=(0,o.Z)(i.value,2)[1];r.instantiation===e&&t.push(r)}}catch(s){n.e(s)}finally{n.f()}return t}},{key:"_instantiateById",value:function(e){var i=this._pending.get(e);if(i){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{var t=this._instantiationService.createInstance(i.ctor,this._editor);this._instances.set(i.id,t),"function"===typeof t.restoreViewState&&0!==i.instantiation&&console.warn("Editor contribution '".concat(i.id,"' should be eager instantiated because it uses saveViewState / restoreViewState."))}catch(n){(0,m.dL)(n)}}}}]),t}(p.JT),$=t(86128),X=function(e,i,t,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,i,t,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(i,t,a):o(i,t))||a);return r>3&&a&&Object.defineProperty(i,t,a),a},ee=function(e,i){return function(t,n){i(t,n,e)}},ie=function(e,i,t,n){return new(t||(t=Promise))((function(o,r){function a(e){try{d(n.next(e))}catch(i){r(i)}}function s(e){try{d(n.throw(e))}catch(i){r(i)}}function d(e){var i;e.done?o(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(a,s)}d((n=n.apply(e,i||[])).next())}))},te=0,ne=function(){function e(i,t,n,o,r,a){(0,h.Z)(this,e),this.model=i,this.viewModel=t,this.view=n,this.hasRealView=o,this.listenersToRemove=r,this.attachedView=a}return(0,f.Z)(e,[{key:"dispose",value:function(){(0,p.B9)(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}]),e}(),oe=n=function(e){(0,u.Z)(t,e);var i=(0,c.Z)(t);function t(e,n,o,d,l,u,c,f,g,p,y,C){var w,D;(0,h.Z)(this,t),(w=i.call(this)).languageConfigurationService=y,w._deliveryQueue=(0,_.Sp)(),w._contributions=w._register(new Y),w._onDidDispose=w._register(new _.Q5),w.onDidDispose=w._onDidDispose.event,w._onDidChangeModelContent=w._register(new _.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeModelContent=w._onDidChangeModelContent.event,w._onDidChangeModelLanguage=w._register(new _.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeModelLanguage=w._onDidChangeModelLanguage.event,w._onDidChangeModelLanguageConfiguration=w._register(new _.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeModelLanguageConfiguration=w._onDidChangeModelLanguageConfiguration.event,w._onDidChangeModelOptions=w._register(new _.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeModelOptions=w._onDidChangeModelOptions.event,w._onDidChangeModelDecorations=w._register(new _.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeModelDecorations=w._onDidChangeModelDecorations.event,w._onDidChangeModelTokens=w._register(new _.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeModelTokens=w._onDidChangeModelTokens.event,w._onDidChangeConfiguration=w._register(new _.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeConfiguration=w._onDidChangeConfiguration.event,w._onDidChangeModel=w._register(new _.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeModel=w._onDidChangeModel.event,w._onDidChangeCursorPosition=w._register(new _.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeCursorPosition=w._onDidChangeCursorPosition.event,w._onDidChangeCursorSelection=w._register(new _.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeCursorSelection=w._onDidChangeCursorSelection.event,w._onDidAttemptReadOnlyEdit=w._register(new ae(w._contributions,w._deliveryQueue)),w.onDidAttemptReadOnlyEdit=w._onDidAttemptReadOnlyEdit.event,w._onDidLayoutChange=w._register(new _.Q5({deliveryQueue:w._deliveryQueue})),w.onDidLayoutChange=w._onDidLayoutChange.event,w._editorTextFocus=w._register(new re({deliveryQueue:w._deliveryQueue})),w.onDidFocusEditorText=w._editorTextFocus.onDidChangeToTrue,w.onDidBlurEditorText=w._editorTextFocus.onDidChangeToFalse,w._editorWidgetFocus=w._register(new re({deliveryQueue:w._deliveryQueue})),w.onDidFocusEditorWidget=w._editorWidgetFocus.onDidChangeToTrue,w.onDidBlurEditorWidget=w._editorWidgetFocus.onDidChangeToFalse,w._onWillType=w._register(new ae(w._contributions,w._deliveryQueue)),w.onWillType=w._onWillType.event,w._onDidType=w._register(new ae(w._contributions,w._deliveryQueue)),w.onDidType=w._onDidType.event,w._onDidCompositionStart=w._register(new ae(w._contributions,w._deliveryQueue)),w.onDidCompositionStart=w._onDidCompositionStart.event,w._onDidCompositionEnd=w._register(new ae(w._contributions,w._deliveryQueue)),w.onDidCompositionEnd=w._onDidCompositionEnd.event,w._onDidPaste=w._register(new ae(w._contributions,w._deliveryQueue)),w.onDidPaste=w._onDidPaste.event,w._onMouseUp=w._register(new ae(w._contributions,w._deliveryQueue)),w.onMouseUp=w._onMouseUp.event,w._onMouseDown=w._register(new ae(w._contributions,w._deliveryQueue)),w.onMouseDown=w._onMouseDown.event,w._onMouseDrag=w._register(new ae(w._contributions,w._deliveryQueue)),w.onMouseDrag=w._onMouseDrag.event,w._onMouseDrop=w._register(new ae(w._contributions,w._deliveryQueue)),w.onMouseDrop=w._onMouseDrop.event,w._onMouseDropCanceled=w._register(new ae(w._contributions,w._deliveryQueue)),w.onMouseDropCanceled=w._onMouseDropCanceled.event,w._onDropIntoEditor=w._register(new ae(w._contributions,w._deliveryQueue)),w.onDropIntoEditor=w._onDropIntoEditor.event,w._onContextMenu=w._register(new ae(w._contributions,w._deliveryQueue)),w.onContextMenu=w._onContextMenu.event,w._onMouseMove=w._register(new ae(w._contributions,w._deliveryQueue)),w.onMouseMove=w._onMouseMove.event,w._onMouseLeave=w._register(new ae(w._contributions,w._deliveryQueue)),w.onMouseLeave=w._onMouseLeave.event,w._onMouseWheel=w._register(new ae(w._contributions,w._deliveryQueue)),w.onMouseWheel=w._onMouseWheel.event,w._onKeyUp=w._register(new ae(w._contributions,w._deliveryQueue)),w.onKeyUp=w._onKeyUp.event,w._onKeyDown=w._register(new ae(w._contributions,w._deliveryQueue)),w.onKeyDown=w._onKeyDown.event,w._onDidContentSizeChange=w._register(new _.Q5({deliveryQueue:w._deliveryQueue})),w.onDidContentSizeChange=w._onDidContentSizeChange.event,w._onDidScrollChange=w._register(new _.Q5({deliveryQueue:w._deliveryQueue})),w.onDidScrollChange=w._onDidScrollChange.event,w._onDidChangeViewZones=w._register(new _.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeViewZones=w._onDidChangeViewZones.event,w._onDidChangeHiddenAreas=w._register(new _.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeHiddenAreas=w._onDidChangeHiddenAreas.event,w._actions=new Map,w._bannerDomNode=null,w._dropIntoEditorDecorations=w.createDecorationsCollection(),l.willCreateCodeEditor();var L,S=Object.assign({},n);w._domElement=e,w._overflowWidgetsDomNode=S.overflowWidgetsDomNode,delete S.overflowWidgetsDomNode,w._id=++te,w._decorationTypeKeysToIds={},w._decorationTypeSubtypes={},w._telemetryData=o.telemetryData,w._configuration=w._register(w._createConfiguration(o.isSimpleWidget||!1,S,p)),w._register(w._configuration.onDidChange((function(e){w._onDidChangeConfiguration.fire(e);var i=w._configuration.options;if(e.hasChanged(143)){var t=i.get(143);w._onDidLayoutChange.fire(t)}}))),w._contextKeyService=w._register(c.createScoped(w._domElement)),w._notificationService=g,w._codeEditorService=l,w._commandService=u,w._themeService=f,w._register(new se((0,s.Z)(w),w._contextKeyService)),w._register(new de((0,s.Z)(w),w._contextKeyService,C)),w._instantiationService=d.createChild(new F.y([A.i6,w._contextKeyService])),w._modelData=null,w._focusTracker=new le(e),w._register(w._focusTracker.onChange((function(){w._editorWidgetFocus.setValue(w._focusTracker.hasFocus())}))),w._contentWidgets={},w._overlayWidgets={},w._glyphMarginWidgets={},L=Array.isArray(o.contributions)?o.contributions:b.Uc.getEditorContributions(),w._contributions.initialize((0,s.Z)(w),L,w._instantiationService);var M,N=(0,a.Z)(b.Uc.getEditorActions());try{var k=function(){var e=M.value;if(w._actions.has(e.id))return(0,m.dL)(new Error("Cannot have two actions with the same id ".concat(e.id))),1;var i=new T.p(e.id,e.label,e.alias,null!==(D=e.precondition)&&void 0!==D?D:void 0,(function(){return w._instantiationService.invokeFunction((function(i){return Promise.resolve(e.runEditorCommand(i,(0,s.Z)(w),null))}))}),w._contextKeyService);w._actions.set(i.id,i)};for(N.s();!(M=N.n()).done;)k()}catch(R){N.e(R)}finally{N.f()}var E=function(){return!w._configuration.options.get(90)&&w._configuration.options.get(36).enabled};return w._register(new v.DragAndDropObserver(w._domElement,{onDragEnter:function(){},onDragOver:function(e){if(E()){var i=w.getTargetAtClientPoint(e.clientX,e.clientY);(null===i||void 0===i?void 0:i.position)&&w.showDropIndicatorAt(i.position)}},onDrop:function(e){return ie((0,s.Z)(w),void 0,void 0,(0,r.Z)().mark((function i(){var t;return(0,r.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(E()){i.next=2;break}return i.abrupt("return");case 2:if(this.removeDropIndicator(),e.dataTransfer){i.next=5;break}return i.abrupt("return");case 5:(null===(t=this.getTargetAtClientPoint(e.clientX,e.clientY))||void 0===t?void 0:t.position)&&this._onDropIntoEditor.fire({position:t.position,event:e});case 7:case"end":return i.stop()}}),i,this)})))},onDragLeave:function(){w.removeDropIndicator()},onDragEnd:function(){w.removeDropIndicator()}})),w._codeEditorService.addCodeEditor((0,s.Z)(w)),w}return(0,f.Z)(t,[{key:"isSimpleWidget",get:function(){return this._configuration.isSimpleWidget}},{key:"writeScreenReaderContent",value:function(e){var i;null===(i=this._modelData)||void 0===i||i.view.writeScreenReaderContent(e)}},{key:"_createConfiguration",value:function(e,i,t){return new C.z(e,i,this._domElement,t)}},{key:"getId",value:function(){return this.getEditorType()+":"+this._id}},{key:"getEditorType",value:function(){return R.g.ICodeEditor}},{key:"dispose",value:function(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),(0,d.Z)((0,l.Z)(t.prototype),"dispose",this).call(this)}},{key:"invokeWithinContext",value:function(e){return this._instantiationService.invokeFunction(e)}},{key:"updateOptions",value:function(e){this._configuration.updateOptions(e||{})}},{key:"getOptions",value:function(){return this._configuration.options}},{key:"getOption",value:function(e){return this._configuration.options.get(e)}},{key:"getRawOptions",value:function(){return this._configuration.getRawOptions()}},{key:"getOverflowWidgetsDomNode",value:function(){return this._overflowWidgetsDomNode}},{key:"getConfiguredWordAtPosition",value:function(e){return this._modelData?j.w.getWordAtPosition(this._modelData.model,this._configuration.options.get(129),e):null}},{key:"getValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this._modelData)return"";var i=!(!e||!e.preserveBOM),t=0;return e&&e.lineEnding&&"\n"===e.lineEnding?t=1:e&&e.lineEnding&&"\r\n"===e.lineEnding&&(t=2),this._modelData.model.getValue(t,i)}},{key:"setValue",value:function(e){this._modelData&&this._modelData.model.setValue(e)}},{key:"getModel",value:function(){return this._modelData?this._modelData.model:null}},{key:"setModel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if((null!==this._modelData||null!==e)&&(!this._modelData||this._modelData.model!==e)){var i=this.hasTextFocus(),t=this._detachModel();this._attachModel(e),i&&this.hasModel()&&this.focus();var n={oldModelUrl:t?t.uri:null,newModelUrl:e?e.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(n),this._postDetachModelCleanup(t),this._contributions.onAfterModelAttached()}}},{key:"_removeDecorationTypes",value:function(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(var e in this._decorationTypeSubtypes){var i=this._decorationTypeSubtypes[e];for(var t in i)this._removeDecorationType(e+"-"+t)}this._decorationTypeSubtypes={}}}},{key:"getVisibleRanges",value:function(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}},{key:"getVisibleRangesPlusViewportAboveBelow",value:function(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}},{key:"getWhitespaces",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}},{key:"getTopForLineNumber",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._modelData?n._getVerticalOffsetForPosition(this._modelData,e,1,i):-1}},{key:"getTopForPosition",value:function(e,i){return this._modelData?n._getVerticalOffsetForPosition(this._modelData,e,i,!1):-1}},{key:"getBottomForLineNumber",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._modelData?n._getVerticalOffsetAfterPosition(this._modelData,e,1,i):-1}},{key:"setHiddenAreas",value:function(e,i){var t;null===(t=this._modelData)||void 0===t||t.viewModel.setHiddenAreas(e.map((function(e){return k.e.lift(e)})),i)}},{key:"getVisibleColumnFromPosition",value:function(e){if(!this._modelData)return e.column;var i=this._modelData.model.validatePosition(e),t=this._modelData.model.getOptions().tabSize;return M.i.visibleColumnFromColumn(this._modelData.model.getLineContent(i.lineNumber),i.column,t)+1}},{key:"getPosition",value:function(){return this._modelData?this._modelData.viewModel.getPosition():null}},{key:"setPosition",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";if(this._modelData){if(!N.L.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(i,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}},{key:"_sendRevealRange",value:function(e,i,t,n){if(this._modelData){if(!k.e.isIRange(e))throw new Error("Invalid arguments");var o=this._modelData.model.validateRange(e),r=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(o);this._modelData.viewModel.revealRange("api",t,r,i,n)}}},{key:"revealLine",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,0,i)}},{key:"revealLineInCenter",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,1,i)}},{key:"revealLineInCenterIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,2,i)}},{key:"revealLineNearTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,5,i)}},{key:"_revealLine",value:function(e,i,t){if("number"!==typeof e)throw new Error("Invalid arguments");this._sendRevealRange(new k.e(e,1,e,1),i,!1,t)}},{key:"revealPosition",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,0,!0,i)}},{key:"revealPositionInCenter",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,1,!0,i)}},{key:"revealPositionInCenterIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,2,!0,i)}},{key:"revealPositionNearTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,5,!0,i)}},{key:"_revealPosition",value:function(e,i,t,n){if(!N.L.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new k.e(e.lineNumber,e.column,e.lineNumber,e.column),i,t,n)}},{key:"getSelection",value:function(){return this._modelData?this._modelData.viewModel.getSelection():null}},{key:"getSelections",value:function(){return this._modelData?this._modelData.viewModel.getSelections():null}},{key:"setSelection",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",t=E.Y.isISelection(e),n=k.e.isIRange(e);if(!t&&!n)throw new Error("Invalid arguments");if(t)this._setSelectionImpl(e,i);else if(n){var o={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(o,i)}}},{key:"_setSelectionImpl",value:function(e,i){if(this._modelData){var t=new E.Y(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(i,[t])}}},{key:"revealLines",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,i,0,t)}},{key:"revealLinesInCenter",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,i,1,t)}},{key:"revealLinesInCenterIfOutsideViewport",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,i,2,t)}},{key:"revealLinesNearTop",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,i,5,t)}},{key:"_revealLines",value:function(e,i,t,n){if("number"!==typeof e||"number"!==typeof i)throw new Error("Invalid arguments");this._sendRevealRange(new k.e(e,1,i,1),t,!1,n)}},{key:"revealRange",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._revealRange(e,t?1:0,n,i)}},{key:"revealRangeInCenter",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,1,!0,i)}},{key:"revealRangeInCenterIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,2,!0,i)}},{key:"revealRangeNearTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,5,!0,i)}},{key:"revealRangeNearTopIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,6,!0,i)}},{key:"revealRangeAtTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,3,!0,i)}},{key:"_revealRange",value:function(e,i,t,n){if(!k.e.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(k.e.lift(e),i,t,n)}},{key:"setSelections",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this._modelData){if(!e||0===e.length)throw new Error("Invalid arguments");for(var n=0,o=e.length;n<o;n++)if(!E.Y.isISelection(e[n]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(i,e,t)}}},{key:"getContentWidth",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}},{key:"getScrollWidth",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}},{key:"getScrollLeft",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}},{key:"getContentHeight",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}},{key:"getScrollHeight",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}},{key:"getScrollTop",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}},{key:"setScrollLeft",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._modelData){if("number"!==typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},i)}}},{key:"setScrollTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._modelData){if("number"!==typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},i)}}},{key:"setScrollPosition",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,i)}},{key:"hasPendingScrollAnimation",value:function(){return!!this._modelData&&this._modelData.viewModel.viewLayout.hasPendingScrollAnimation()}},{key:"saveViewState",value:function(){if(!this._modelData)return null;var e=this._contributions.saveViewState();return{cursorState:this._modelData.viewModel.saveCursorState(),viewState:this._modelData.viewModel.saveState(),contributionsState:e}}},{key:"restoreViewState",value:function(e){if(this._modelData&&this._modelData.hasRealView){var i=e;if(i&&i.cursorState&&i.viewState){var t=i.cursorState;Array.isArray(t)?t.length>0&&this._modelData.viewModel.restoreCursorState(t):this._modelData.viewModel.restoreCursorState([t]),this._contributions.restoreViewState(i.contributionsState||{});var n=this._modelData.viewModel.reduceRestoreState(i.viewState);this._modelData.view.restoreState(n)}}}},{key:"handleInitialized",value:function(){var e;null===(e=this._getViewModel())||void 0===e||e.visibleLinesStabilized()}},{key:"getContribution",value:function(e){return this._contributions.get(e)}},{key:"getActions",value:function(){return Array.from(this._actions.values())}},{key:"getSupportedActions",value:function(){var e=this.getActions();return e=e.filter((function(e){return e.isSupported()}))}},{key:"getAction",value:function(e){return this._actions.get(e)||null}},{key:"trigger",value:function(e,i,t){switch(t=t||{},i){case"compositionStart":return void this._startComposition();case"compositionEnd":return void this._endComposition(e);case"type":var n=t;return void this._type(e,n.text||"");case"replacePreviousChar":var o=t;return void this._compositionType(e,o.text||"",o.replaceCharCnt||0,0,0);case"compositionType":var r=t;return void this._compositionType(e,r.text||"",r.replacePrevCharCnt||0,r.replaceNextCharCnt||0,r.positionDelta||0);case"paste":var a=t;return void this._paste(e,a.text||"",a.pasteOnNewLine||!1,a.multicursorText||null,a.mode||null);case"cut":return void this._cut(e)}var s=this.getAction(i);s?Promise.resolve(s.run(t)).then(void 0,m.dL):this._modelData&&(this._triggerEditorCommand(e,i,t)||this._triggerCommand(i,t))}},{key:"_triggerCommand",value:function(e,i){this._commandService.executeCommand(e,i)}},{key:"_startComposition",value:function(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}},{key:"_endComposition",value:function(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}},{key:"_type",value:function(e,i){this._modelData&&0!==i.length&&("keyboard"===e&&this._onWillType.fire(i),this._modelData.viewModel.type(i,e),"keyboard"===e&&this._onDidType.fire(i))}},{key:"_compositionType",value:function(e,i,t,n,o){this._modelData&&this._modelData.viewModel.compositionType(i,t,n,o,e)}},{key:"_paste",value:function(e,i,t,n,o){if(this._modelData&&0!==i.length){var r=this._modelData.viewModel,a=r.getSelection().getStartPosition();r.paste(i,t,n,e);var s=r.getSelection().getStartPosition();"keyboard"===e&&this._onDidPaste.fire({range:new k.e(a.lineNumber,a.column,s.lineNumber,s.column),languageId:o})}}},{key:"_cut",value:function(e){this._modelData&&this._modelData.viewModel.cut(e)}},{key:"_triggerEditorCommand",value:function(e,i,t){var n=this,o=b.Uc.getEditorCommand(i);return!!o&&((t=t||{}).source=e,this._instantiationService.invokeFunction((function(e){Promise.resolve(o.runEditorCommand(e,n,t)).then(void 0,m.dL)})),!0)}},{key:"_getViewModel",value:function(){return this._modelData?this._modelData.viewModel:null}},{key:"pushUndoStop",value:function(){return!!this._modelData&&(!this._configuration.options.get(90)&&(this._modelData.model.pushStackElement(),!0))}},{key:"popUndoStop",value:function(){return!!this._modelData&&(!this._configuration.options.get(90)&&(this._modelData.model.popStackElement(),!0))}},{key:"executeEdits",value:function(e,i,t){return!!this._modelData&&(!this._configuration.options.get(90)&&(n=t?Array.isArray(t)?function(){return t}:t:function(){return null},this._modelData.viewModel.executeEdits(e,i,n),!0));var n}},{key:"executeCommand",value:function(e,i){this._modelData&&this._modelData.viewModel.executeCommand(i,e)}},{key:"executeCommands",value:function(e,i){this._modelData&&this._modelData.viewModel.executeCommands(i,e)}},{key:"createDecorationsCollection",value:function(e){return new ue(this,e)}},{key:"changeDecorations",value:function(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}},{key:"getLineDecorations",value:function(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,(0,S.$J)(this._configuration.options)):null}},{key:"getDecorationsInRange",value:function(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,(0,S.$J)(this._configuration.options)):null}},{key:"deltaDecorations",value:function(e,i){return this._modelData?0===e.length&&0===i.length?e:this._modelData.model.deltaDecorations(e,i,this._id):[]}},{key:"removeDecorations",value:function(e){this._modelData&&0!==e.length&&this._modelData.model.changeDecorations((function(i){i.deltaDecorations(e,[])}))}},{key:"removeDecorationsByType",value:function(e){var i=this._decorationTypeKeysToIds[e];i&&this.deltaDecorations(i,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}},{key:"getLayoutInfo",value:function(){return this._configuration.options.get(143)}},{key:"createOverviewRuler",value:function(e){return this._modelData&&this._modelData.hasRealView?this._modelData.view.createOverviewRuler(e):null}},{key:"getContainerDomNode",value:function(){return this._domElement}},{key:"getDomNode",value:function(){return this._modelData&&this._modelData.hasRealView?this._modelData.view.domNode.domNode:null}},{key:"delegateVerticalScrollbarPointerDown",value:function(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateVerticalScrollbarPointerDown(e)}},{key:"delegateScrollFromMouseWheelEvent",value:function(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateScrollFromMouseWheelEvent(e)}},{key:"layout",value:function(e){this._configuration.observeContainer(e),this.render()}},{key:"focus",value:function(){this._modelData&&this._modelData.hasRealView&&this._modelData.view.focus()}},{key:"hasTextFocus",value:function(){return!(!this._modelData||!this._modelData.hasRealView)&&this._modelData.view.isFocused()}},{key:"hasWidgetFocus",value:function(){return this._focusTracker&&this._focusTracker.hasFocus()}},{key:"addContentWidget",value:function(e){var i={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=i,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(i)}},{key:"layoutContentWidget",value:function(e){var i=e.getId();if(this._contentWidgets.hasOwnProperty(i)){var t=this._contentWidgets[i];t.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(t)}}},{key:"removeContentWidget",value:function(e){var i=e.getId();if(this._contentWidgets.hasOwnProperty(i)){var t=this._contentWidgets[i];delete this._contentWidgets[i],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(t)}}},{key:"addOverlayWidget",value:function(e){var i={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=i,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(i)}},{key:"layoutOverlayWidget",value:function(e){var i=e.getId();if(this._overlayWidgets.hasOwnProperty(i)){var t=this._overlayWidgets[i];t.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(t)}}},{key:"removeOverlayWidget",value:function(e){var i=e.getId();if(this._overlayWidgets.hasOwnProperty(i)){var t=this._overlayWidgets[i];delete this._overlayWidgets[i],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(t)}}},{key:"addGlyphMarginWidget",value:function(e){var i={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=i,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(i)}},{key:"layoutGlyphMarginWidget",value:function(e){var i=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(i)){var t=this._glyphMarginWidgets[i];t.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(t)}}},{key:"removeGlyphMarginWidget",value:function(e){var i=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(i)){var t=this._glyphMarginWidgets[i];delete this._glyphMarginWidgets[i],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(t)}}},{key:"changeViewZones",value:function(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.change(e)}},{key:"getTargetAtClientPoint",value:function(e,i){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getTargetAtClientPoint(e,i):null}},{key:"getScrolledVisiblePosition",value:function(e){if(!this._modelData||!this._modelData.hasRealView)return null;var i=this._modelData.model.validatePosition(e),t=this._configuration.options,o=t.get(143);return{top:n._getVerticalOffsetForPosition(this._modelData,i.lineNumber,i.column)-this.getScrollTop(),left:this._modelData.view.getOffsetForColumn(i.lineNumber,i.column)+o.glyphMarginWidth+o.lineNumbersWidth+o.decorationsWidth-this.getScrollLeft(),height:t.get(66)}}},{key:"getOffsetForColumn",value:function(e,i){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getOffsetForColumn(e,i):-1}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._modelData&&this._modelData.hasRealView&&this._modelData.view.render(!0,e)}},{key:"setAriaOptions",value:function(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.setAriaOptions(e)}},{key:"applyFontInfo",value:function(e){(0,q.N)(e,this._configuration.options.get(50))}},{key:"setBanner",value:function(e,i){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?i:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}},{key:"_attachModel",value:function(e){var i=this;if(e){var t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());var n=e.onBeforeAttached(),r=new O.j(this._id,this._configuration,e,z.C.create(),K.p.create(this._configuration.options),(function(e){return v.scheduleAtNextAnimationFrame(e)}),this.languageConfigurationService,this._themeService,n);t.push(e.onWillDispose((function(){return i.setModel(null)}))),t.push(r.onEvent((function(t){switch(t.kind){case 0:i._onDidContentSizeChange.fire(t);break;case 1:i._editorTextFocus.setValue(t.hasFocus);break;case 2:i._onDidScrollChange.fire(t);break;case 3:i._onDidChangeViewZones.fire();break;case 4:i._onDidChangeHiddenAreas.fire();break;case 5:i._onDidAttemptReadOnlyEdit.fire();break;case 6:if(t.reachedMaxCursorCount){var n=i.getOption(79),o=g.NC("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",n);i._notificationService.prompt(H.zb.Warning,o,[{label:"Find and Replace",run:function(){i._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:g.NC("goToSetting","Increase Multi Cursor Limit"),run:function(){i._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}for(var r=[],a=0,s=t.selections.length;a<s;a++)r[a]=t.selections[a].getPosition();var d={position:r[0],secondaryPositions:r.slice(1),reason:t.reason,source:t.source};i._onDidChangeCursorPosition.fire(d);var l={selection:t.selections[0],secondarySelections:t.selections.slice(1),modelVersionId:t.modelVersionId,oldSelections:t.oldSelections,oldModelVersionId:t.oldModelVersionId,source:t.source,reason:t.reason};i._onDidChangeCursorSelection.fire(l);break;case 7:i._onDidChangeModelDecorations.fire(t.event);break;case 8:i._domElement.setAttribute("data-mode-id",e.getLanguageId()),i._onDidChangeModelLanguage.fire(t.event);break;case 9:i._onDidChangeModelLanguageConfiguration.fire(t.event);break;case 10:i._onDidChangeModelContent.fire(t.event);break;case 11:i._onDidChangeModelOptions.fire(t.event);break;case 12:i._onDidChangeModelTokens.fire(t.event)}})));var a=this._createView(r),s=(0,o.Z)(a,2),d=s[0],l=s[1];if(l){this._domElement.appendChild(d.domNode.domNode);for(var u=Object.keys(this._contentWidgets),c=0,h=u.length;c<h;c++){var f=u[c];d.addContentWidget(this._contentWidgets[f])}for(var m=0,_=(u=Object.keys(this._overlayWidgets)).length;m<_;m++){var p=u[m];d.addOverlayWidget(this._overlayWidgets[p])}for(var y=0,C=(u=Object.keys(this._glyphMarginWidgets)).length;y<C;y++){var b=u[y];d.addGlyphMarginWidget(this._glyphMarginWidgets[b])}d.render(!1,!0),d.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new ne(e,r,d,l,t,n)}else this._modelData=null}},{key:"_createView",value:function(e){var i,t=this;i=this.isSimpleWidget?{paste:function(e,i,n,o){t._paste("keyboard",e,i,n,o)},type:function(e){t._type("keyboard",e)},compositionType:function(e,i,n,o){t._compositionType("keyboard",e,i,n,o)},startComposition:function(){t._startComposition()},endComposition:function(){t._endComposition("keyboard")},cut:function(){t._cut("keyboard")}}:{paste:function(e,i,n,o){var r={text:e,pasteOnNewLine:i,multicursorText:n,mode:o};t._commandService.executeCommand("paste",r)},type:function(e){var i={text:e};t._commandService.executeCommand("type",i)},compositionType:function(e,i,n,o){if(n||o){var r={text:e,replacePrevCharCnt:i,replaceNextCharCnt:n,positionDelta:o};t._commandService.executeCommand("compositionType",r)}else{var a={text:e,replaceCharCnt:i};t._commandService.executeCommand("replacePreviousChar",a)}},startComposition:function(){t._commandService.executeCommand("compositionStart",{})},endComposition:function(){t._commandService.executeCommand("compositionEnd",{})},cut:function(){t._commandService.executeCommand("cut",{})}};var n=new L.q(e.coordinatesConverter);return n.onKeyDown=function(e){return t._onKeyDown.fire(e)},n.onKeyUp=function(e){return t._onKeyUp.fire(e)},n.onContextMenu=function(e){return t._onContextMenu.fire(e)},n.onMouseMove=function(e){return t._onMouseMove.fire(e)},n.onMouseLeave=function(e){return t._onMouseLeave.fire(e)},n.onMouseDown=function(e){return t._onMouseDown.fire(e)},n.onMouseUp=function(e){return t._onMouseUp.fire(e)},n.onMouseDrag=function(e){return t._onMouseDrag.fire(e)},n.onMouseDrop=function(e){return t._onMouseDrop.fire(e)},n.onMouseDropCanceled=function(e){return t._onMouseDropCanceled.fire(e)},n.onMouseWheel=function(e){return t._onMouseWheel.fire(e)},[new D.G(i,this._configuration,this._themeService.getColorTheme(),e,n,this._overflowWidgetsDomNode,this._instantiationService),!0]}},{key:"_postDetachModelCleanup",value:function(e){null===e||void 0===e||e.removeAllDecorationsWithOwnerId(this._id)}},{key:"_detachModel",value:function(){if(!this._modelData)return null;var e=this._modelData.model,i=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),i&&this._domElement.contains(i)&&this._domElement.removeChild(i),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}},{key:"_removeDecorationType",value:function(e){this._codeEditorService.removeDecorationType(e)}},{key:"hasModel",value:function(){return null!==this._modelData}},{key:"showDropIndicatorAt",value:function(e){var i=[{range:new k.e(e.lineNumber,e.column,e.lineNumber,e.column),options:n.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(i),this.revealPosition(e,1)}},{key:"removeDropIndicator",value:function(){this._dropIntoEditorDecorations.clear()}},{key:"setContextValue",value:function(e,i){this._contextKeyService.createKey(e,i)}}],[{key:"_getVerticalOffsetAfterPosition",value:function(e,i,t,n){var o=e.model.validatePosition({lineNumber:i,column:t}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(r.lineNumber,n)}},{key:"_getVerticalOffsetForPosition",value:function(e,i,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.model.validatePosition({lineNumber:i,column:t}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber,n)}}]),t}(p.JT);oe.dropIntoEditorDecorationOptions=Z.qx.register({description:"workbench-dnd-target",className:"dnd-target"}),oe=n=X([ee(3,W.TG),ee(4,w.$),ee(5,V.H),ee(6,A.i6),ee(7,U.XE),ee(8,H.lT),ee(9,B.F),ee(10,Q.c_),ee(11,G.p)],oe);var re=function(e){(0,u.Z)(t,e);var i=(0,c.Z)(t);function t(e){var n;return(0,h.Z)(this,t),(n=i.call(this))._emitterOptions=e,n._onDidChangeToTrue=n._register(new _.Q5(n._emitterOptions)),n.onDidChangeToTrue=n._onDidChangeToTrue.event,n._onDidChangeToFalse=n._register(new _.Q5(n._emitterOptions)),n.onDidChangeToFalse=n._onDidChangeToFalse.event,n._value=0,n}return(0,f.Z)(t,[{key:"setValue",value:function(e){var i=e?2:1;this._value!==i&&(this._value=i,2===this._value?this._onDidChangeToTrue.fire():1===this._value&&this._onDidChangeToFalse.fire())}}]),t}(p.JT),ae=function(e){(0,u.Z)(t,e);var i=(0,c.Z)(t);function t(e,n){var o;return(0,h.Z)(this,t),(o=i.call(this,{deliveryQueue:n}))._contributions=e,o}return(0,f.Z)(t,[{key:"fire",value:function(e){this._contributions.onBeforeInteractionEvent(),(0,d.Z)((0,l.Z)(t.prototype),"fire",this).call(this,e)}}]),t}(_.Q5),se=function(e){(0,u.Z)(t,e);var i=(0,c.Z)(t);function t(e,n){var o;return(0,h.Z)(this,t),(o=i.call(this))._editor=e,n.createKey("editorId",e.getId()),o._editorSimpleInput=I.u.editorSimpleInput.bindTo(n),o._editorFocus=I.u.focus.bindTo(n),o._textInputFocus=I.u.textInputFocus.bindTo(n),o._editorTextFocus=I.u.editorTextFocus.bindTo(n),o._tabMovesFocus=I.u.tabMovesFocus.bindTo(n),o._editorReadonly=I.u.readOnly.bindTo(n),o._inDiffEditor=I.u.inDiffEditor.bindTo(n),o._editorColumnSelection=I.u.columnSelection.bindTo(n),o._hasMultipleSelections=I.u.hasMultipleSelections.bindTo(n),o._hasNonEmptySelection=I.u.hasNonEmptySelection.bindTo(n),o._canUndo=I.u.canUndo.bindTo(n),o._canRedo=I.u.canRedo.bindTo(n),o._register(o._editor.onDidChangeConfiguration((function(){return o._updateFromConfig()}))),o._register(o._editor.onDidChangeCursorSelection((function(){return o._updateFromSelection()}))),o._register(o._editor.onDidFocusEditorWidget((function(){return o._updateFromFocus()}))),o._register(o._editor.onDidBlurEditorWidget((function(){return o._updateFromFocus()}))),o._register(o._editor.onDidFocusEditorText((function(){return o._updateFromFocus()}))),o._register(o._editor.onDidBlurEditorText((function(){return o._updateFromFocus()}))),o._register(o._editor.onDidChangeModel((function(){return o._updateFromModel()}))),o._register(o._editor.onDidChangeConfiguration((function(){return o._updateFromModel()}))),o._register($.n.onDidChangeTabFocus((function(e){return o._tabMovesFocus.set(e)}))),o._updateFromConfig(),o._updateFromSelection(),o._updateFromFocus(),o._updateFromModel(),o._editorSimpleInput.set(o._editor.isSimpleWidget),o}return(0,f.Z)(t,[{key:"_updateFromConfig",value:function(){var e=this._editor.getOptions();this._tabMovesFocus.set($.n.getTabFocusMode()),this._editorReadonly.set(e.get(90)),this._inDiffEditor.set(e.get(61)),this._editorColumnSelection.set(e.get(22))}},{key:"_updateFromSelection",value:function(){var e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some((function(e){return!e.isEmpty()})))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}},{key:"_updateFromFocus",value:function(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}},{key:"_updateFromModel",value:function(){var e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))}}]),t}(p.JT),de=function(e){(0,u.Z)(t,e);var i=(0,c.Z)(t);function t(e,n,o){var r;(0,h.Z)(this,t),(r=i.call(this))._editor=e,r._contextKeyService=n,r._languageFeaturesService=o,r._langId=I.u.languageId.bindTo(n),r._hasCompletionItemProvider=I.u.hasCompletionItemProvider.bindTo(n),r._hasCodeActionsProvider=I.u.hasCodeActionsProvider.bindTo(n),r._hasCodeLensProvider=I.u.hasCodeLensProvider.bindTo(n),r._hasDefinitionProvider=I.u.hasDefinitionProvider.bindTo(n),r._hasDeclarationProvider=I.u.hasDeclarationProvider.bindTo(n),r._hasImplementationProvider=I.u.hasImplementationProvider.bindTo(n),r._hasTypeDefinitionProvider=I.u.hasTypeDefinitionProvider.bindTo(n),r._hasHoverProvider=I.u.hasHoverProvider.bindTo(n),r._hasDocumentHighlightProvider=I.u.hasDocumentHighlightProvider.bindTo(n),r._hasDocumentSymbolProvider=I.u.hasDocumentSymbolProvider.bindTo(n),r._hasReferenceProvider=I.u.hasReferenceProvider.bindTo(n),r._hasRenameProvider=I.u.hasRenameProvider.bindTo(n),r._hasSignatureHelpProvider=I.u.hasSignatureHelpProvider.bindTo(n),r._hasInlayHintsProvider=I.u.hasInlayHintsProvider.bindTo(n),r._hasDocumentFormattingProvider=I.u.hasDocumentFormattingProvider.bindTo(n),r._hasDocumentSelectionFormattingProvider=I.u.hasDocumentSelectionFormattingProvider.bindTo(n),r._hasMultipleDocumentFormattingProvider=I.u.hasMultipleDocumentFormattingProvider.bindTo(n),r._hasMultipleDocumentSelectionFormattingProvider=I.u.hasMultipleDocumentSelectionFormattingProvider.bindTo(n),r._isInWalkThrough=I.u.isInWalkThroughSnippet.bindTo(n);var a=function(){return r._update()};return r._register(e.onDidChangeModel(a)),r._register(e.onDidChangeModelLanguage(a)),r._register(o.completionProvider.onDidChange(a)),r._register(o.codeActionProvider.onDidChange(a)),r._register(o.codeLensProvider.onDidChange(a)),r._register(o.definitionProvider.onDidChange(a)),r._register(o.declarationProvider.onDidChange(a)),r._register(o.implementationProvider.onDidChange(a)),r._register(o.typeDefinitionProvider.onDidChange(a)),r._register(o.hoverProvider.onDidChange(a)),r._register(o.documentHighlightProvider.onDidChange(a)),r._register(o.documentSymbolProvider.onDidChange(a)),r._register(o.referenceProvider.onDidChange(a)),r._register(o.renameProvider.onDidChange(a)),r._register(o.documentFormattingEditProvider.onDidChange(a)),r._register(o.documentRangeFormattingEditProvider.onDidChange(a)),r._register(o.signatureHelpProvider.onDidChange(a)),r._register(o.inlayHintsProvider.onDidChange(a)),a(),r}return(0,f.Z)(t,[{key:"dispose",value:function(){(0,d.Z)((0,l.Z)(t.prototype),"dispose",this).call(this)}},{key:"reset",value:function(){var e=this;this._contextKeyService.bufferChangeEvents((function(){e._langId.reset(),e._hasCompletionItemProvider.reset(),e._hasCodeActionsProvider.reset(),e._hasCodeLensProvider.reset(),e._hasDefinitionProvider.reset(),e._hasDeclarationProvider.reset(),e._hasImplementationProvider.reset(),e._hasTypeDefinitionProvider.reset(),e._hasHoverProvider.reset(),e._hasDocumentHighlightProvider.reset(),e._hasDocumentSymbolProvider.reset(),e._hasReferenceProvider.reset(),e._hasRenameProvider.reset(),e._hasDocumentFormattingProvider.reset(),e._hasDocumentSelectionFormattingProvider.reset(),e._hasSignatureHelpProvider.reset(),e._isInWalkThrough.reset()}))}},{key:"_update",value:function(){var e=this,i=this._editor.getModel();i?this._contextKeyService.bufferChangeEvents((function(){e._langId.set(i.getLanguageId()),e._hasCompletionItemProvider.set(e._languageFeaturesService.completionProvider.has(i)),e._hasCodeActionsProvider.set(e._languageFeaturesService.codeActionProvider.has(i)),e._hasCodeLensProvider.set(e._languageFeaturesService.codeLensProvider.has(i)),e._hasDefinitionProvider.set(e._languageFeaturesService.definitionProvider.has(i)),e._hasDeclarationProvider.set(e._languageFeaturesService.declarationProvider.has(i)),e._hasImplementationProvider.set(e._languageFeaturesService.implementationProvider.has(i)),e._hasTypeDefinitionProvider.set(e._languageFeaturesService.typeDefinitionProvider.has(i)),e._hasHoverProvider.set(e._languageFeaturesService.hoverProvider.has(i)),e._hasDocumentHighlightProvider.set(e._languageFeaturesService.documentHighlightProvider.has(i)),e._hasDocumentSymbolProvider.set(e._languageFeaturesService.documentSymbolProvider.has(i)),e._hasReferenceProvider.set(e._languageFeaturesService.referenceProvider.has(i)),e._hasRenameProvider.set(e._languageFeaturesService.renameProvider.has(i)),e._hasSignatureHelpProvider.set(e._languageFeaturesService.signatureHelpProvider.has(i)),e._hasInlayHintsProvider.set(e._languageFeaturesService.inlayHintsProvider.has(i)),e._hasDocumentFormattingProvider.set(e._languageFeaturesService.documentFormattingEditProvider.has(i)||e._languageFeaturesService.documentRangeFormattingEditProvider.has(i)),e._hasDocumentSelectionFormattingProvider.set(e._languageFeaturesService.documentRangeFormattingEditProvider.has(i)),e._hasMultipleDocumentFormattingProvider.set(e._languageFeaturesService.documentFormattingEditProvider.all(i).length+e._languageFeaturesService.documentRangeFormattingEditProvider.all(i).length>1),e._hasMultipleDocumentSelectionFormattingProvider.set(e._languageFeaturesService.documentRangeFormattingEditProvider.all(i).length>1),e._isInWalkThrough.set(i.uri.scheme===y.lg.walkThroughSnippet)})):this.reset()}}]),t}(p.JT),le=function(e){(0,u.Z)(t,e);var i=(0,c.Z)(t);function t(e){var n;return(0,h.Z)(this,t),(n=i.call(this))._onChange=n._register(new _.Q5),n.onChange=n._onChange.event,n._hasFocus=!1,n._domFocusTracker=n._register(v.trackFocus(e)),n._register(n._domFocusTracker.onDidFocus((function(){n._hasFocus=!0,n._onChange.fire(void 0)}))),n._register(n._domFocusTracker.onDidBlur((function(){n._hasFocus=!1,n._onChange.fire(void 0)}))),n}return(0,f.Z)(t,[{key:"hasFocus",value:function(){return this._hasFocus}}]),t}(p.JT),ue=function(){function e(i,t){(0,h.Z)(this,e),this._editor=i,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}return(0,f.Z)(e,[{key:"length",get:function(){return this._decorationIds.length}},{key:"onDidChange",value:function(e,i,t){var n=this;return this._editor.onDidChangeModelDecorations((function(t){n._isChangingDecorations||e.call(i,t)}),t)}},{key:"getRange",value:function(e){return this._editor.hasModel()?e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e]):null}},{key:"getRanges",value:function(){if(!this._editor.hasModel())return[];var e,i=this._editor.getModel(),t=[],n=(0,a.Z)(this._decorationIds);try{for(n.s();!(e=n.n()).done;){var o=e.value,r=i.getDecorationRange(o);r&&t.push(r)}}catch(s){n.e(s)}finally{n.f()}return t}},{key:"has",value:function(e){return this._decorationIds.includes(e.id)}},{key:"clear",value:function(){0!==this._decorationIds.length&&this.set([])}},{key:"set",value:function(e){var i=this;try{this._isChangingDecorations=!0,this._editor.changeDecorations((function(t){i._decorationIds=t.deltaDecorations(i._decorationIds,e)}))}finally{this._isChangingDecorations=!1}return this._decorationIds}}]),e}(),ce=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),he=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function fe(e){return ce+encodeURIComponent(e.toString())+he}var ge=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),ve=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');(0,U.Ic)((function(e,i){var t=e.getColor(P.lXJ);t&&i.addRule(".monaco-editor .".concat("squiggly-error",' { background: url("data:image/svg+xml,',fe(t),'") repeat-x bottom left; }'));var n=e.getColor(P.uoC);n&&i.addRule(".monaco-editor .".concat("squiggly-warning",' { background: url("data:image/svg+xml,',fe(n),'") repeat-x bottom left; }'));var o=e.getColor(P.c63);o&&i.addRule(".monaco-editor .".concat("squiggly-info",' { background: url("data:image/svg+xml,',fe(o),'") repeat-x bottom left; }'));var r=e.getColor(P.Dut);r&&i.addRule(".monaco-editor .".concat("squiggly-hint",' { background: url("data:image/svg+xml,',ge+encodeURIComponent(r.toString())+ve,'") no-repeat bottom left; }'));var a=e.getColor(x.zu);a&&i.addRule(".monaco-editor.showUnused .".concat("squiggly-inline-unnecessary"," { opacity: ",a.rgba.a,"; }"))}))},80381:function(e,i,t){t.r(i),t.d(i,{AccessibleDiffViewerNext:function(){return k},AccessibleDiffViewerPrev:function(){return E},CollapseAllUnchangedRegions:function(){return S},ExitCompareMove:function(){return L},ShowAllUnchangedRegions:function(){return M},SwitchSide:function(){return D},ToggleCollapseUnchangedRegions:function(){return y},ToggleShowMovedCodeBlocks:function(){return C},ToggleUseInlineViewWhenSpaceIsLimited:function(){return b},findFocusedDiffEditor:function(){return T}});var n=t(37762),o=t(15671),r=t(43144),a=t(60136),s=t(27277),d=t(32959),l=t(77409),u=t(95253),c=t(76257),h=t(49725),f=t(98926),g=t(18420),v=t(14443),m=t(99740),_=t(77819),p=t(8022),y=function(e){(0,a.Z)(t,e);var i=(0,s.Z)(t);function t(){return(0,o.Z)(this,t),i.call(this,{id:"diffEditor.toggleCollapseUnchangedRegions",title:{value:(0,g.NC)("toggleCollapseUnchangedRegions","Toggle Collapse Unchanged Regions"),original:"Toggle Collapse Unchanged Regions"},icon:l.l.map,toggled:p.Ao.has("config.diffEditor.hideUnchangedRegions.enabled"),precondition:p.Ao.has("isInDiffEditor"),menu:{when:p.Ao.has("isInDiffEditor"),id:v.eH.EditorTitle,order:22,group:"navigation"}})}return(0,r.Z)(t,[{key:"run",value:function(e){var i=e.get(_.Ui),t=!i.getValue("diffEditor.hideUnchangedRegions.enabled");i.updateValue("diffEditor.hideUnchangedRegions.enabled",t)}}]),t}(v.Ke);(0,v.r1)(y);var C=function(e){(0,a.Z)(t,e);var i=(0,s.Z)(t);function t(){return(0,o.Z)(this,t),i.call(this,{id:"diffEditor.toggleShowMovedCodeBlocks",title:{value:(0,g.NC)("toggleShowMovedCodeBlocks","Toggle Show Moved Code Blocks"),original:"Toggle Show Moved Code Blocks"},precondition:p.Ao.has("isInDiffEditor")})}return(0,r.Z)(t,[{key:"run",value:function(e){var i=e.get(_.Ui),t=!i.getValue("diffEditor.experimental.showMoves");i.updateValue("diffEditor.experimental.showMoves",t)}}]),t}(v.Ke);(0,v.r1)(C);var b=function(e){(0,a.Z)(t,e);var i=(0,s.Z)(t);function t(){return(0,o.Z)(this,t),i.call(this,{id:"diffEditor.toggleUseInlineViewWhenSpaceIsLimited",title:{value:(0,g.NC)("toggleUseInlineViewWhenSpaceIsLimited","Toggle Use Inline View When Space Is Limited"),original:"Toggle Use Inline View When Space Is Limited"},precondition:p.Ao.has("isInDiffEditor")})}return(0,r.Z)(t,[{key:"run",value:function(e){var i=e.get(_.Ui),t=!i.getValue("diffEditor.useInlineViewWhenSpaceIsLimited");i.updateValue("diffEditor.useInlineViewWhenSpaceIsLimited",t)}}]),t}(v.Ke);(0,v.r1)(b),v.BH.appendMenuItem(v.eH.EditorTitle,{command:{id:(new b).desc.id,title:(0,g.NC)("useInlineViewWhenSpaceIsLimited","Use Inline View When Space Is Limited"),toggled:p.Ao.has("config.diffEditor.useInlineViewWhenSpaceIsLimited"),precondition:p.Ao.has("isInDiffEditor")},order:11,group:"1_diff",when:p.Ao.and(f.u.diffEditorRenderSideBySideInlineBreakpointReached,p.Ao.has("isInDiffEditor"))}),v.BH.appendMenuItem(v.eH.EditorTitle,{command:{id:(new C).desc.id,title:(0,g.NC)("showMoves","Show Moved Code Blocks"),icon:l.l.move,toggled:p.cP.create("config.diffEditor.experimental.showMoves",!0),precondition:p.Ao.has("isInDiffEditor")},order:10,group:"1_diff",when:p.Ao.has("isInDiffEditor")});var w={value:(0,g.NC)("diffEditor","Diff Editor"),original:"Diff Editor"},D=function(e){(0,a.Z)(t,e);var i=(0,s.Z)(t);function t(){return(0,o.Z)(this,t),i.call(this,{id:"diffEditor.switchSide",title:{value:(0,g.NC)("switchSide","Switch Side"),original:"Switch Side"},icon:l.l.arrowSwap,precondition:p.Ao.has("isInDiffEditor"),f1:!0,category:w})}return(0,r.Z)(t,[{key:"runEditorCommand",value:function(e,i,t){var n=T(e);if(n instanceof h.p){if(t&&t.dryRun)return{destinationSelection:n.mapToOtherSide().destinationSelection};n.switchSide()}}}]),t}(u.x1);(0,v.r1)(D);var L=function(e){(0,a.Z)(t,e);var i=(0,s.Z)(t);function t(){return(0,o.Z)(this,t),i.call(this,{id:"diffEditor.exitCompareMove",title:{value:(0,g.NC)("exitCompareMove","Exit Compare Move"),original:"Exit Compare Move"},icon:l.l.close,precondition:f.u.comparingMovedCode,f1:!1,category:w,keybinding:{weight:1e4,primary:9}})}return(0,r.Z)(t,[{key:"runEditorCommand",value:function(e,i){var t=T(e);t instanceof h.p&&t.exitCompareMove()}}]),t}(u.x1);(0,v.r1)(L);var S=function(e){(0,a.Z)(t,e);var i=(0,s.Z)(t);function t(){return(0,o.Z)(this,t),i.call(this,{id:"diffEditor.collapseAllUnchangedRegions",title:{value:(0,g.NC)("collapseAllUnchangedRegions","Collapse All Unchanged Regions"),original:"Collapse All Unchanged Regions"},icon:l.l.fold,precondition:p.Ao.has("isInDiffEditor"),f1:!0,category:w})}return(0,r.Z)(t,[{key:"runEditorCommand",value:function(e,i){var t=T(e);t instanceof h.p&&t.collapseAllUnchangedRegions()}}]),t}(u.x1);(0,v.r1)(S);var M=function(e){(0,a.Z)(t,e);var i=(0,s.Z)(t);function t(){return(0,o.Z)(this,t),i.call(this,{id:"diffEditor.showAllUnchangedRegions",title:{value:(0,g.NC)("showAllUnchangedRegions","Show All Unchanged Regions"),original:"Show All Unchanged Regions"},icon:l.l.unfold,precondition:p.Ao.has("isInDiffEditor"),f1:!0,category:w})}return(0,r.Z)(t,[{key:"runEditorCommand",value:function(e,i){var t=T(e);t instanceof h.p&&t.showAllUnchangedRegions()}}]),t}(u.x1);(0,v.r1)(M);var N={value:(0,g.NC)("accessibleDiffViewer","Accessible Diff Viewer"),original:"Accessible Diff Viewer"},k=function(e){(0,a.Z)(t,e);var i=(0,s.Z)(t);function t(){return(0,o.Z)(this,t),i.call(this,{id:t.id,title:{value:(0,g.NC)("editor.action.accessibleDiffViewer.next","Go to Next Difference"),original:"Go to Next Difference"},category:N,precondition:p.Ao.has("isInDiffEditor"),keybinding:{primary:65,weight:100},f1:!0})}return(0,r.Z)(t,[{key:"run",value:function(e){var i=T(e);null===i||void 0===i||i.accessibleDiffViewerNext()}}]),t}(v.Ke);k.id="editor.action.accessibleDiffViewer.next",v.BH.appendMenuItem(v.eH.EditorTitle,{command:{id:k.id,title:(0,g.NC)("Open Accessible Diff Viewer","Open Accessible Diff Viewer"),precondition:p.Ao.has("isInDiffEditor")},order:10,group:"2_diff",when:p.Ao.and(f.u.accessibleDiffViewerVisible.negate(),p.Ao.has("isInDiffEditor"))});var E=function(e){(0,a.Z)(t,e);var i=(0,s.Z)(t);function t(){return(0,o.Z)(this,t),i.call(this,{id:t.id,title:{value:(0,g.NC)("editor.action.accessibleDiffViewer.prev","Go to Previous Difference"),original:"Go to Previous Difference"},category:N,precondition:p.Ao.has("isInDiffEditor"),keybinding:{primary:1089,weight:100},f1:!0})}return(0,r.Z)(t,[{key:"run",value:function(e){var i=T(e);null===i||void 0===i||i.accessibleDiffViewerPrev()}}]),t}(v.Ke);function T(e){var i,t=e.get(c.$),o=t.listDiffEditors(),r=null!==(i=t.getFocusedCodeEditor())&&void 0!==i?i:t.getActiveCodeEditor();if(!r)return null;for(var a=0,s=o.length;a<s;a++){var l=o[a];if(l.getModifiedEditor().getId()===r.getId()||l.getOriginalEditor().getId()===r.getId())return l}var u=(0,d.getActiveElement)();if(u){var h,f=(0,n.Z)(o);try{for(f.s();!(h=f.n()).done;){var g=h.value;if(R(g.getContainerDomNode(),u))return g}}catch(v){f.e(v)}finally{f.f()}}return null}function R(e,i){for(var t=i;t;){if(t===e)return!0;t=t.parentElement}return!1}E.id="editor.action.accessibleDiffViewer.prev",m.P.registerCommandAlias("editor.action.diffReview.next",k.id),(0,v.r1)(k),m.P.registerCommandAlias("editor.action.diffReview.prev",E.id),(0,v.r1)(E)},49725:function(e,i,t){t.d(i,{p:function(){return yt}});var n=t(37762),o=t(15671),r=t(43144),a=t(97326),s=t(60136),d=t(27277),l=t(32959),u=t(85928),c=t(74146),h=t(13880),f=t(65096),g=t(1370),v=t(95253),m=t(76257),_=t(80705),p=t(74165),y=t(81200),C=t(65171),b=t(15803),w=t(93720),D=t(38102),L=t(77409),S=t(79730),M=t(88616),N=t(11752),k=t(61120),E=t(93433),T=t(29439),R=t(7388),I=t(29104),Z=t(9284);function x(e,i){var t=new f.SL,n=e.createDecorationsCollection();return t.add((0,g.UV)({debugName:function(){return"Apply decorations from ".concat(i.debugName)}},(function(e){var t=i.read(e);n.set(t)}))),t.add({dispose:function(){n.clear()}}),t}function P(e,i){return e.appendChild(i),(0,f.OF)((function(){e.removeChild(i)}))}var O=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n){var r;return(0,o.Z)(this,t),(r=i.call(this)).elementSizeObserver=r._register(new Z.I(e,n)),r._width=(0,g.uh)((0,a.Z)(r),r.elementSizeObserver.getWidth()),r._height=(0,g.uh)((0,a.Z)(r),r.elementSizeObserver.getHeight()),r._register(r.elementSizeObserver.onDidChange((function(e){return(0,g.PS)((function(e){r._width.set(r.elementSizeObserver.getWidth(),e),r._height.set(r.elementSizeObserver.getHeight(),e)}))}))),r}return(0,r.Z)(t,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"observe",value:function(e){this.elementSizeObserver.observe(e)}},{key:"setAutomaticLayout",value:function(e){e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}]),t}(f.JT);function V(e,i){var t=e.get(),n=t,o=t,r=(0,g.uh)("animatedValue",t),a=-1,s=void 0;function d(){var e,i,l,u,c=Date.now()-a;o=Math.floor((i=n,l=t-n,(e=c)===(u=300)?i+l:l*(1-Math.pow(2,-10*e/u))+i)),c<300?s=requestAnimationFrame(d):o=t,r.set(o,void 0)}return i.add((0,g.nJ)({createEmptyChangeSummary:function(){return{animate:!1}},handleChange:function(i,t){return i.didChange(e)&&(t.animate=t.animate||i.change),!0}},(function(i,r){void 0!==s&&(cancelAnimationFrame(s),s=void 0),n=o,t=e.read(i),a=Date.now()-(r.animate?0:300),d()}))),r}var A=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n,r){var a;return(0,o.Z)(this,t),(a=i.call(this))._register(new F(e,r)),a._register(H(r,{height:n.actualHeight,top:n.actualTop})),a}return(0,r.Z)(t)}(f.JT),W=function(){function e(i,t){var n=this;(0,o.Z)(this,e),this._afterLineNumber=i,this.heightInPx=t,this.domNode=document.createElement("div"),this._actualTop=(0,g.uh)(this,void 0),this._actualHeight=(0,g.uh)(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=function(e){n._actualTop.set(e,void 0)},this.onComputedHeight=function(e){n._actualHeight.set(e,void 0)}}return(0,r.Z)(e,[{key:"afterLineNumber",get:function(){return this._afterLineNumber.get()}}]),e}(),F=function(){function e(i,t){var n=this;(0,o.Z)(this,e),this._editor=i,this._domElement=t,this._overlayWidgetId="managedOverlayWidget-".concat(e._counter++),this._overlayWidget={getId:function(){return n._overlayWidgetId},getDomNode:function(){return n._domElement},getPosition:function(){return null}},this._editor.addOverlayWidget(this._overlayWidget)}return(0,r.Z)(e,[{key:"dispose",value:function(){this._editor.removeOverlayWidget(this._overlayWidget)}}]),e}();function H(e,i){return(0,g.EH)((function(t){for(var n=0,o=Object.entries(i);n<o.length;n++){var r=(0,T.Z)(o[n],2),a=r[0],s=r[1];s&&"object"===typeof s&&"read"in s&&(s=s.read(t)),"number"===typeof s&&(s="".concat(s,"px")),a=a.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),e.style[a]=s}}))}function U(e,i){return function(e,i){if((0,I.H)()){(0,g.aq)("reload",(function(i){return(0,I.E)((function(t){if((0,E.Z)(Object.values(t)).some((function(i){return e.includes(i)})))return function(e){return i(void 0),!0}}))})).read(i)}}([e],i),e}function B(e,i,t){var o=new f.SL,r=[];return o.add((0,g.EH)((function(a){var s=i.read(a),d=new Map,l=new Map;t&&t(!0),e.changeViewZones((function(e){for(var i=0,t=r;i<t.length;i++){var o=t[i];e.removeZone(o)}r.length=0;var a,l=(0,n.Z)(s);try{for(l.s();!(a=l.n()).done;){var u=a.value,c=e.addZone(u);r.push(c),d.set(u,c)}}catch(h){l.e(h)}finally{l.f()}})),t&&t(!1),o.add((0,g.nJ)({createEmptyChangeSummary:function(){return[]},handleChange:function(e,i){var t=l.get(e.changedObservable);return void 0!==t&&i.push(t),!0}},(function(i,o){var r,a=(0,n.Z)(s);try{for(a.s();!(r=a.n()).done;){var u=r.value;u.onChange&&(l.set(u.onChange,d.get(u)),u.onChange.read(i))}}catch(c){a.e(c)}finally{a.f()}t&&t(!0),e.changeViewZones((function(e){var i,t=(0,n.Z)(o);try{for(t.s();!(i=t.n()).done;){var r=i.value;e.layoutZone(r)}}catch(c){t.e(c)}finally{t.f()}})),t&&t(!1)})))}))),o.add({dispose:function(){t&&t(!0),e.changeViewZones((function(e){for(var i=0,t=r;i<t.length;i++){var n=t[i];e.removeZone(n)}})),t&&t(!1)}}),o}F._counter=0;var K=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(){return(0,o.Z)(this,t),i.apply(this,arguments)}return(0,r.Z)(t,[{key:"dispose",value:function(){(0,N.Z)((0,k.Z)(t.prototype),"dispose",this).call(this,!0)}}]),t}(R.A),z=t(17683),j=t(77621),Q=t(25841),q=t(65631),G=t(17429),J=t(41629),Y=t(58188),$=t(51373),X=t(56606),ee=t(19484),ie=t(18420),te=t(93574),ne=t(64606),oe=t(87288),re=function(e,i,t,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,i,t,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(i,t,a):o(i,t))||a);return r>3&&a&&Object.defineProperty(i,t,a),a},ae=function(e,i){return function(t,n){i(t,n,e)}},se=function(e,i,t,n){return new(t||(t=Promise))((function(o,r){function a(e){try{d(n.next(e))}catch(i){r(i)}}function s(e){try{d(n.throw(e))}catch(i){r(i)}}function d(e){var i;e.done?o(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(a,s)}d((n=n.apply(e,i||[])).next())}))},de=(0,oe.q5)("diff-review-insert",L.l.add,(0,ie.NC)("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),le=(0,oe.q5)("diff-review-remove",L.l.remove,(0,ie.NC)("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),ue=(0,oe.q5)("diff-review-close",L.l.close,(0,ie.NC)("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer.")),ce=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n,r,s,d,l,u,c,h){var f;return(0,o.Z)(this,t),(f=i.call(this))._parentNode=e,f._visible=n,f._setVisible=r,f._canClose=s,f._width=d,f._height=l,f._diffs=u,f._editors=c,f._instantiationService=h,f.model=(0,g.Be)((0,a.Z)(f),(function(e,i){var t=f._visible.read(e);if(f._parentNode.style.visibility=t?"visible":"hidden",!t)return null;var n=i.add(f._instantiationService.createInstance(he,f._diffs,f._editors,f._setVisible,f._canClose));return{model:n,view:i.add(f._instantiationService.createInstance(Ce,f._parentNode,n,f._width,f._height,f._editors))}})),f._register((0,g.jx)(f.model)),f}return(0,r.Z)(t,[{key:"next",value:function(){var e=this;(0,g.PS)((function(i){var t=e._visible.get();e._setVisible(!0,i),t&&e.model.get().model.nextGroup(i)}))}},{key:"prev",value:function(){var e=this;(0,g.PS)((function(i){e._setVisible(!0,i),e.model.get().model.previousGroup(i)}))}},{key:"close",value:function(){var e=this;(0,g.PS)((function(i){e._setVisible(!1,i)}))}}]),t}(f.JT);ce._ttPolicy=(0,y.Z)("diffReview",{createHTML:function(e){return e}}),ce=re([ae(8,ne.TG)],ce);var he=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,r,s,d,l){var u;return(0,o.Z)(this,t),(u=i.call(this))._diffs=e,u._editors=r,u._setVisible=s,u.canClose=d,u._audioCueService=l,u._groups=(0,g.uh)((0,a.Z)(u),[]),u._currentGroupIdx=(0,g.uh)((0,a.Z)(u),0),u._currentElementIdx=(0,g.uh)((0,a.Z)(u),0),u.groups=u._groups,u.currentGroup=u._currentGroupIdx.map((function(e,i){return u._groups.read(i)[e]})),u.currentGroupIndex=u._currentGroupIdx,u.currentElement=u._currentElementIdx.map((function(e,i){var t;return null===(t=u.currentGroup.read(i))||void 0===t?void 0:t.lines[e]})),u._register((0,g.EH)((function(e){var i=u._diffs.read(e);if(i){var t=function(e,i,t){var o,r=[],a=(0,n.Z)((0,D.mw)(e,(function(e,i){return i.modified.startLineNumber-e.modified.endLineNumberExclusive<2*ge})));try{var s=function(){var e=o.value,n=[];n.push(new me);var a=new j.z(Math.max(1,e[0].original.startLineNumber-ge),Math.min(e[e.length-1].original.endLineNumberExclusive+ge,i+1)),s=new j.z(Math.max(1,e[0].modified.startLineNumber-ge),Math.min(e[e.length-1].modified.endLineNumberExclusive+ge,t+1));(0,D.zy)(e,(function(e,i){var t=new j.z(e?e.original.endLineNumberExclusive:a.startLineNumber,i?i.original.startLineNumber:a.endLineNumberExclusive),o=new j.z(e?e.modified.endLineNumberExclusive:s.startLineNumber,i?i.modified.startLineNumber:s.endLineNumberExclusive);t.forEach((function(e){n.push(new ye(e,o.startLineNumber+(e-t.startLineNumber)))})),i&&(i.original.forEach((function(e){n.push(new _e(i,e))})),i.modified.forEach((function(e){n.push(new pe(i,e))})))}));var d=e[0].modified.join(e[e.length-1].modified),l=e[0].original.join(e[e.length-1].original);r.push(new ve(new J.f0(d,l),n))};for(a.s();!(o=a.n()).done;)s()}catch(d){a.e(d)}finally{a.f()}return r}(i,u._editors.original.getModel().getLineCount(),u._editors.modified.getModel().getLineCount());(0,g.PS)((function(e){var i=u._editors.modified.getPosition();if(i){var n=t.findIndex((function(e){return(null===i||void 0===i?void 0:i.lineNumber)<e.range.modified.endLineNumberExclusive}));-1!==n&&u._currentGroupIdx.set(n,e)}u._groups.set(t,e)}))}else u._groups.set([],void 0)}))),u._register((0,g.EH)((function(e){var i=u.currentElement.read(e);(null===i||void 0===i?void 0:i.type)===fe.Deleted?u._audioCueService.playAudioCue(te.y$.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):(null===i||void 0===i?void 0:i.type)===fe.Added&&u._audioCueService.playAudioCue(te.y$.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})}))),u._register((0,g.EH)((function(e){var i,t=u.currentElement.read(e);if(t&&t.type!==fe.Header){var n=null!==(i=t.modifiedLineNumber)&&void 0!==i?i:t.diff.modified.startLineNumber;u._editors.modified.setSelection(G.e.fromPositions(new q.L(n,1)))}}))),u}return(0,r.Z)(t,[{key:"_goToGroupDelta",value:function(e,i){var t=this,n=this.groups.get();!n||n.length<=1||(0,g.c8)(i,(function(i){t._currentGroupIdx.set(Q.q.ofLength(n.length).clipCyclic(t._currentGroupIdx.get()+e),i),t._currentElementIdx.set(0,i)}))}},{key:"nextGroup",value:function(e){this._goToGroupDelta(1,e)}},{key:"previousGroup",value:function(e){this._goToGroupDelta(-1,e)}},{key:"_goToLineDelta",value:function(e){var i=this,t=this.currentGroup.get();!t||t.lines.length<=1||(0,g.PS)((function(n){i._currentElementIdx.set(Q.q.ofLength(t.lines.length).clip(i._currentElementIdx.get()+e),n)}))}},{key:"goToNextLine",value:function(){this._goToLineDelta(1)}},{key:"goToPreviousLine",value:function(){this._goToLineDelta(-1)}},{key:"goToLine",value:function(e){var i=this,t=this.currentGroup.get();if(t){var n=t.lines.indexOf(e);-1!==n&&(0,g.PS)((function(e){i._currentElementIdx.set(n,e)}))}}},{key:"revealCurrentElementInEditor",value:function(){this._setVisible(!1,void 0);var e=this.currentElement.get();e&&(e.type===fe.Deleted?(this._editors.original.setSelection(G.e.fromPositions(new q.L(e.originalLineNumber,1))),this._editors.original.revealLine(e.originalLineNumber),this._editors.original.focus()):(e.type!==fe.Header&&(this._editors.modified.setSelection(G.e.fromPositions(new q.L(e.modifiedLineNumber,1))),this._editors.modified.revealLine(e.modifiedLineNumber)),this._editors.modified.focus()))}},{key:"close",value:function(){this._setVisible(!1,void 0),this._editors.modified.focus()}}]),t}(f.JT);he=re([ae(4,te.e7)],he);var fe,ge=3;!function(e){e[e.Header=0]="Header",e[e.Unchanged=1]="Unchanged",e[e.Deleted=2]="Deleted",e[e.Added=3]="Added"}(fe||(fe={}));var ve=(0,r.Z)((function e(i,t){(0,o.Z)(this,e),this.range=i,this.lines=t})),me=(0,r.Z)((function e(){(0,o.Z)(this,e),this.type=fe.Header})),_e=(0,r.Z)((function e(i,t){(0,o.Z)(this,e),this.diff=i,this.originalLineNumber=t,this.type=fe.Deleted,this.modifiedLineNumber=void 0})),pe=(0,r.Z)((function e(i,t){(0,o.Z)(this,e),this.diff=i,this.modifiedLineNumber=t,this.type=fe.Added,this.originalLineNumber=void 0})),ye=(0,r.Z)((function e(i,t){(0,o.Z)(this,e),this.originalLineNumber=i,this.modifiedLineNumber=t,this.type=fe.Unchanged})),Ce=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n,r,s,d,u){var c;(0,o.Z)(this,t),(c=i.call(this))._element=e,c._model=n,c._width=r,c._height=s,c._editors=d,c._languageService=u,c.domNode=c._element,c.domNode.className="diff-review monaco-editor-background";var h=document.createElement("div");return h.className="diff-review-actions",c._actionBar=c._register(new C.o(h)),c._register((0,g.EH)((function(e){c._actionBar.clear(),c._model.canClose.read(e)&&c._actionBar.push(new w.aU("diffreview.close",(0,ie.NC)("label.close","Close"),"close-diff-review "+S.k.asClassName(ue),!0,(function(){return se((0,a.Z)(c),void 0,void 0,(0,p.Z)().mark((function e(){return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.close());case 1:case"end":return e.stop()}}),e)})))})),{label:!1,icon:!0})}))),c._content=document.createElement("div"),c._content.className="diff-review-content",c._content.setAttribute("role","code"),c._scrollbar=c._register(new b.s$(c._content,{})),(0,l.reset)(c.domNode,c._scrollbar.getDomNode(),h),c._register((0,f.OF)((function(){(0,l.reset)(c.domNode)}))),c._register(H(c.domNode,{width:c._width,height:c._height})),c._register(H(c._content,{width:c._width,height:c._height})),c._register((0,g.gp)((function(e,i){c._model.currentGroup.read(e),c._render(i)}))),c._register((0,l.addStandardDisposableListener)(c.domNode,"keydown",(function(e){(e.equals(18)||e.equals(2066)||e.equals(530))&&(e.preventDefault(),c._model.goToNextLine()),(e.equals(16)||e.equals(2064)||e.equals(528))&&(e.preventDefault(),c._model.goToPreviousLine()),(e.equals(9)||e.equals(2057)||e.equals(521)||e.equals(1033))&&(e.preventDefault(),c._model.close()),(e.equals(10)||e.equals(3))&&(e.preventDefault(),c._model.revealCurrentElementInEditor())}))),c}return(0,r.Z)(t,[{key:"_render",value:function(e){var i=this,t=this._editors.original.getOptions(),o=this._editors.modified.getOptions(),r=document.createElement("div");r.className="diff-review-table",r.setAttribute("role","list"),r.setAttribute("aria-label",(0,ie.NC)("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),(0,M.N)(r,o.get(50)),(0,l.reset)(this._content,r);var a=this._editors.original.getModel(),s=this._editors.modified.getModel();if(a&&s){var d,u=a.getOptions(),c=s.getOptions(),h=o.get(66),f=this._model.currentGroup.get(),v=(0,n.Z)((null===f||void 0===f?void 0:f.lines)||[]);try{var m=function(){var n,v=d.value;if(!f)return 1;if(v.type===fe.Header){var m=document.createElement("div");m.className="diff-review-row",m.setAttribute("role","listitem");var _=f.range,p=i._model.currentGroupIndex.get(),y=i._model.groups.get().length,C=function(e){return 0===e?(0,ie.NC)("no_lines_changed","no lines changed"):1===e?(0,ie.NC)("one_line_changed","1 line changed"):(0,ie.NC)("more_lines_changed","{0} lines changed",e)},b=C(_.original.length),w=C(_.modified.length);m.setAttribute("aria-label",(0,ie.NC)({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",p+1,y,_.original.startLineNumber,b,_.modified.startLineNumber,w));var D=document.createElement("div");D.className="diff-review-cell diff-review-summary",D.appendChild(document.createTextNode("".concat(p+1,"/").concat(y,": @@ -").concat(_.original.startLineNumber,",").concat(_.original.length," +").concat(_.modified.startLineNumber,",").concat(_.modified.length," @@"))),m.appendChild(D),n=m}else n=i._createRow(v,h,i._width.get(),t,a,u,o,s,c);r.appendChild(n);var L=(0,g.nK)((function(e){return i._model.currentElement.read(e)===v}));e.add((0,g.EH)((function(e){var i=L.read(e);n.tabIndex=i?0:-1,i&&n.focus()}))),e.add((0,l.addDisposableListener)(n,"focus",(function(){i._model.goToLine(v)})))};for(v.s();!(d=v.n()).done&&!m(););}catch(_){v.e(_)}finally{v.f()}this._scrollbar.scanDomNode()}}},{key:"_createRow",value:function(e,i,t,n,o,r,a,s,d){var l=n.get(143),u=l.glyphMarginWidth+l.lineNumbersWidth,c=a.get(143),h=10+c.glyphMarginWidth+c.lineNumbersWidth,f="diff-review-row",g="",v=null;switch(e.type){case fe.Added:f="diff-review-row line-insert",g=" char-insert",v=de;break;case fe.Deleted:f="diff-review-row line-delete",g=" char-delete",v=le}var m=document.createElement("div");m.style.minWidth=t+"px",m.className=f,m.setAttribute("role","listitem"),m.ariaLevel="";var _=document.createElement("div");_.className="diff-review-cell",_.style.height="".concat(i,"px"),m.appendChild(_);var p=document.createElement("span");p.style.width=u+"px",p.style.minWidth=u+"px",p.className="diff-review-line-number"+g,void 0!==e.originalLineNumber?p.appendChild(document.createTextNode(String(e.originalLineNumber))):p.innerText="\xa0",_.appendChild(p);var y=document.createElement("span");y.style.width=h+"px",y.style.minWidth=h+"px",y.style.paddingRight="10px",y.className="diff-review-line-number"+g,void 0!==e.modifiedLineNumber?y.appendChild(document.createTextNode(String(e.modifiedLineNumber))):y.innerText="\xa0",_.appendChild(y);var C,b=document.createElement("span");if(b.className="diff-review-spacer",v){var w=document.createElement("span");w.className=S.k.asClassName(v),w.innerText="\xa0\xa0",b.appendChild(w)}else b.innerText="\xa0\xa0";if(_.appendChild(b),void 0!==e.modifiedLineNumber){var D=this._getLineHtml(s,a,d.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);ce._ttPolicy&&(D=ce._ttPolicy.createHTML(D)),_.insertAdjacentHTML("beforeend",D),C=s.getLineContent(e.modifiedLineNumber)}else{var L=this._getLineHtml(o,n,r.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);ce._ttPolicy&&(L=ce._ttPolicy.createHTML(L)),_.insertAdjacentHTML("beforeend",L),C=o.getLineContent(e.originalLineNumber)}0===C.length&&(C=(0,ie.NC)("blankLine","blank"));var M="";switch(e.type){case fe.Unchanged:M=e.originalLineNumber===e.modifiedLineNumber?(0,ie.NC)({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",C,e.originalLineNumber):(0,ie.NC)("equalLine","{0} original line {1} modified line {2}",C,e.originalLineNumber,e.modifiedLineNumber);break;case fe.Added:M=(0,ie.NC)("insertLine","+ {0} modified line {1}",C,e.modifiedLineNumber);break;case fe.Deleted:M=(0,ie.NC)("deleteLine","- {0} original line {1}",C,e.originalLineNumber)}return m.setAttribute("aria-label",M),m}},{key:"_getLineHtml",value:function(e,i,t,n,o){var r=e.getLineContent(n),a=i.get(50),s=$.A.createEmpty(r,o),d=ee.wA.isBasicASCII(r,e.mightContainNonBasicASCII()),l=ee.wA.containsRTL(r,d,e.mightContainRTL());return(0,X.tF)(new X.IJ(a.isMonospace&&!i.get(33),a.canUseHalfwidthRightwardsArrow,r,!1,d,l,0,s,[],t,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,i.get(116),i.get(98),i.get(93),i.get(51)!==z.n0.OFF,null)).html}}]),t}(f.JT);Ce=re([ae(5,Y.O)],Ce);var be=t(71047),we=t(78519),De=(0,oe.q5)("diff-insert",L.l.add,(0,ie.NC)("diffInsertIcon","Line decoration for inserts in the diff editor.")),Le=(0,oe.q5)("diff-remove",L.l.remove,(0,ie.NC)("diffRemoveIcon","Line decoration for removals in the diff editor.")),Se=we.qx.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+S.k.asClassName(De),marginClassName:"gutter-insert"}),Me=we.qx.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+S.k.asClassName(Le),marginClassName:"gutter-delete"}),Ne=we.qx.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),ke=we.qx.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),Ee=we.qx.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),Te=we.qx.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),Re=we.qx.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),Ie=we.qx.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),Ze=we.qx.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),xe=we.qx.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"}),Pe=we.qx.register({description:"diff-editor-arrow-revert-change",glyphMarginHoverMessage:new be.W5(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown((0,ie.NC)("revertChangeHoverMessage","Click to revert change")),glyphMarginClassName:"arrow-revert-change "+S.k.asClassName(L.l.arrowRight),zIndex:10001}),Oe=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,r,s,d,l){var u;(0,o.Z)(this,t),(u=i.call(this))._rootElement=e,u._diffModel=r,u._originalEditorLayoutInfo=s,u._modifiedEditorLayoutInfo=d,u._editors=l,u._originalScrollTop=(0,g.rD)(u._editors.original.onDidScrollChange,(function(){return u._editors.original.getScrollTop()})),u._modifiedScrollTop=(0,g.rD)(u._editors.modified.onDidScrollChange,(function(){return u._editors.modified.getScrollTop()})),u._viewZonesChanged=(0,g.aq)("onDidChangeViewZones",u._editors.modified.onDidChangeViewZones),u.width=(0,g.uh)((0,a.Z)(u),0),u._modifiedViewZonesChangedSignal=(0,g.aq)("modified.onDidChangeViewZones",u._editors.modified.onDidChangeViewZones),u._originalViewZonesChangedSignal=(0,g.aq)("original.onDidChangeViewZones",u._editors.original.onDidChangeViewZones),u._state=(0,g.Be)((function(e,i){var o;u._element.replaceChildren();var r=u._diffModel.read(e),a=null===(o=null===r||void 0===r?void 0:r.diff.read(e))||void 0===o?void 0:o.movedTexts;if(a&&0!==a.length){u._viewZonesChanged.read(e);var s=u._originalEditorLayoutInfo.read(e),d=u._modifiedEditorLayoutInfo.read(e);if(s&&d){u._modifiedViewZonesChangedSignal.read(e),u._originalViewZonesChangedSignal.read(e);var l=a.map((function(i){function t(e,i){return(i.getTopForLineNumber(e.startLineNumber,!0)+i.getTopForLineNumber(e.endLineNumberExclusive,!0))/2}var n=t(i.lineRangeMapping.original,u._editors.original),o=u._originalScrollTop.read(e),r=t(i.lineRangeMapping.modified,u._editors.modified),a=n-o,s=r-u._modifiedScrollTop.read(e),d=Math.min(n,r),l=Math.max(n,r);return{range:new Q.q(d,l),from:a,to:s,fromWithoutScroll:n,toWithoutScroll:r,move:i}}));l.sort((0,D.f_)((0,D.tT)((function(e){return e.fromWithoutScroll>e.toWithoutScroll}),D.nW),(0,D.tT)((function(e){return e.fromWithoutScroll>e.toWithoutScroll?e.fromWithoutScroll:-e.toWithoutScroll}),D.fv)));var c,h=Ve.compute(l.map((function(e){return e.range}))),f=s.verticalScrollbarWidth,v=10*(h.getTrackCount()-1)+20,m=f+v+(d.contentLeft-t.movedCodeBlockPadding),_=0,p=(0,n.Z)(l);try{var y=function(){var e=c.value,t=h.getTrack(_),n=f+10+10*t,o=m,a=d.glyphMarginWidth+d.lineNumbersWidth,s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.classList.add("arrow-rectangle"),s.setAttribute("x","".concat(o-a)),s.setAttribute("y","".concat(e.to-9)),s.setAttribute("width","".concat(a)),s.setAttribute("height","".concat(18)),u._element.appendChild(s);var l=document.createElementNS("http://www.w3.org/2000/svg","g"),v=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("d","M ".concat(0," ",e.from," L ").concat(n," ").concat(e.from," L ").concat(n," ").concat(e.to," L ").concat(o-15," ").concat(e.to)),v.setAttribute("fill","none"),l.appendChild(v);var p=document.createElementNS("http://www.w3.org/2000/svg","polygon");p.classList.add("arrow"),i.add((0,g.EH)((function(i){v.classList.toggle("currentMove",e.move===r.activeMovedText.read(i)),p.classList.toggle("currentMove",e.move===r.activeMovedText.read(i))}))),p.setAttribute("points","".concat(o-15,",").concat(e.to-7.5," ").concat(o,",").concat(e.to," ").concat(o-15,",").concat(e.to+7.5)),l.appendChild(p),u._element.appendChild(l),_++};for(p.s();!(c=p.n()).done;)y()}catch(C){p.e(C)}finally{p.f()}u.width.set(v,void 0)}else u.width.set(0,void 0)}else u.width.set(0,void 0)})),u._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),u._element.setAttribute("class","moved-blocks-lines"),u._rootElement.appendChild(u._element),u._register((0,f.OF)((function(){return u._element.remove()}))),u._register((0,g.EH)((function(e){var i=u._originalEditorLayoutInfo.read(e),n=u._modifiedEditorLayoutInfo.read(e);i&&n&&(u._element.style.left="".concat(i.width-i.verticalScrollbarWidth,"px"),u._element.style.height="".concat(i.height,"px"),u._element.style.width="".concat(i.verticalScrollbarWidth+i.contentLeft-t.movedCodeBlockPadding+u.width.read(e),"px"))}))),u._register((0,g.jx)(u._state));var c=(0,g.nK)((function(e){var i=u._diffModel.read(e),t=null===i||void 0===i?void 0:i.diff.read(e);return t?t.movedTexts.map((function(e){return{move:e,original:new W((0,g.Dz)(e.lineRangeMapping.original.startLineNumber-1),18),modified:new W((0,g.Dz)(e.lineRangeMapping.modified.startLineNumber-1),18)}})):[]}));u._register(B(u._editors.original,c.map((function(e){return e.map((function(e){return e.original}))})))),u._register(B(u._editors.modified,c.map((function(e){return e.map((function(e){return e.modified}))})))),u._register((0,g.gp)((function(e,i){var t,o=c.read(e),r=(0,n.Z)(o);try{for(r.s();!(t=r.n()).done;){var a=t.value;i.add(new Ae(u._editors.original,a.original,a.move,"original",u._diffModel.get())),i.add(new Ae(u._editors.modified,a.modified,a.move,"modified",u._diffModel.get()))}}catch(s){r.e(s)}finally{r.f()}})));var h=(0,g.rD)(u._editors.original.onDidChangeCursorPosition,(function(){return u._editors.original.getPosition()})),v=(0,g.rD)(u._editors.modified.onDidChangeCursorPosition,(function(){return u._editors.modified.getPosition()})),m=(0,g.aq)("original.onDidFocusEditorWidget",(function(e){return u._editors.original.onDidFocusEditorWidget((function(){return setTimeout((function(){return e(void 0)}),0)}))})),_=(0,g.aq)("modified.onDidFocusEditorWidget",(function(e){return u._editors.modified.onDidFocusEditorWidget((function(){return setTimeout((function(){return e(void 0)}),0)}))})),p="modified";return u._register((0,g.nJ)({createEmptyChangeSummary:function(){},handleChange:function(e,i){return e.didChange(m)&&(p="original"),e.didChange(_)&&(p="modified"),!0}},(function(e){m.read(e),_.read(e);var i=u._diffModel.read(e);if(i){var t=i.diff.read(e),n=void 0;if(t&&"original"===p){var o=h.read(e);o&&(n=t.movedTexts.find((function(e){return e.lineRangeMapping.original.contains(o.lineNumber)})))}if(t&&"modified"===p){var r=v.read(e);r&&(n=t.movedTexts.find((function(e){return e.lineRangeMapping.modified.contains(r.lineNumber)})))}n!==i.movedTextToCompare.get()&&i.movedTextToCompare.set(void 0,void 0),i.setActiveMovedText(n)}}))),u}return(0,r.Z)(t)}(f.JT);Oe.movedCodeBlockPadding=4;var Ve=function(){function e(i,t){(0,o.Z)(this,e),this._trackCount=i,this.trackPerLineIdx=t}return(0,r.Z)(e,[{key:"getTrack",value:function(e){return this.trackPerLineIdx[e]}},{key:"getTrackCount",value:function(){return this._trackCount}}],[{key:"compute",value:function(i){var t,o=[],r=[],a=(0,n.Z)(i);try{var s=function(){var e=t.value,i=o.findIndex((function(i){return!i.intersectsStrict(e)}));if(-1===i){o.length>=6?i=(0,u.tQ)(o,(0,D.tT)((function(i){return i.intersectWithRangeLength(e)}),D.fv)):(i=o.length,o.push(new Q.M))}o[i].addRange(e),r.push(i)};for(a.s();!(t=a.n()).done;)s()}catch(d){a.e(d)}finally{a.f()}return new e(o.length,r)}}]),e}(),Ae=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n,r,a,s){var d;(0,o.Z)(this,t);var u=(0,l.h)("div.diff-hidden-lines-widget");(d=i.call(this,e,n,u.root))._editor=e,d._move=r,d._kind=a,d._diffModel=s,d._nodes=(0,l.h)("div.diff-moved-code-block",{style:{marginRight:"4px"}},[(0,l.h)("div.text-content@textContent"),(0,l.h)("div.action-bar@actionBar")]),u.root.appendChild(d._nodes.root);var c,h=(0,g.rD)(d._editor.onDidLayoutChange,(function(){return d._editor.getLayoutInfo()}));d._register(H(d._nodes.root,{paddingRight:h.map((function(e){return e.verticalScrollbarWidth}))})),c=r.changes.length>0?"original"===d._kind?(0,ie.NC)("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",d._move.lineRangeMapping.modified.startLineNumber,d._move.lineRangeMapping.modified.endLineNumberExclusive-1):(0,ie.NC)("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",d._move.lineRangeMapping.original.startLineNumber,d._move.lineRangeMapping.original.endLineNumberExclusive-1):"original"===d._kind?(0,ie.NC)("codeMovedTo","Code moved to line {0}-{1}",d._move.lineRangeMapping.modified.startLineNumber,d._move.lineRangeMapping.modified.endLineNumberExclusive-1):(0,ie.NC)("codeMovedFrom","Code moved from line {0}-{1}",d._move.lineRangeMapping.original.startLineNumber,d._move.lineRangeMapping.original.endLineNumberExclusive-1);var f=d._register(new C.o(d._nodes.actionBar,{highlightToggledItems:!0})),v=new w.aU("",c,"",!1);f.push(v,{icon:!1,label:!0});var m=new w.aU("","Compare",S.k.asClassName(L.l.compareChanges),!0,(function(){d._editor.focus(),d._diffModel.movedTextToCompare.set(d._diffModel.movedTextToCompare.get()===r?void 0:d._move,void 0)}));return d._register((0,g.EH)((function(e){var i=d._diffModel.movedTextToCompare.read(e)===r;m.checked=i}))),f.push(m,{icon:!1,label:!0}),d}return(0,r.Z)(t)}(A),We=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,r,s){var d;return(0,o.Z)(this,t),(d=i.call(this))._editors=e,d._diffModel=r,d._options=s,d._decorations=(0,g.nK)((0,a.Z)(d),(function(e){var i,t=null===(i=d._diffModel.read(e))||void 0===i?void 0:i.diff.read(e);if(!t)return null;var o=d._diffModel.read(e).movedTextToCompare.read(e),r=d._options.renderIndicators.read(e),a=d._options.showEmptyDecorations.read(e),s=[],l=[];if(!o){var u,c=(0,n.Z)(t.mappings);try{for(c.s();!(u=c.n()).done;){var h=u.value;if(h.lineRangeMapping.original.isEmpty||s.push({range:h.lineRangeMapping.original.toInclusiveRange(),options:r?Me:ke}),h.lineRangeMapping.modified.isEmpty||l.push({range:h.lineRangeMapping.modified.toInclusiveRange(),options:r?Se:Ne}),h.lineRangeMapping.modified.isEmpty||h.lineRangeMapping.original.isEmpty)h.lineRangeMapping.original.isEmpty||s.push({range:h.lineRangeMapping.original.toInclusiveRange(),options:Ze}),h.lineRangeMapping.modified.isEmpty||l.push({range:h.lineRangeMapping.modified.toInclusiveRange(),options:Te});else{var f,g=(0,n.Z)(h.lineRangeMapping.innerChanges||[]);try{for(g.s();!(f=g.n()).done;){var v=f.value;h.lineRangeMapping.original.contains(v.originalRange.startLineNumber)&&s.push({range:v.originalRange,options:v.originalRange.isEmpty()&&a?xe:Ie}),h.lineRangeMapping.modified.contains(v.modifiedRange.startLineNumber)&&l.push({range:v.modifiedRange,options:v.modifiedRange.isEmpty()&&a?Re:Ee})}}catch(k){g.e(k)}finally{g.f()}}h.lineRangeMapping.modified.isEmpty||!d._options.shouldRenderRevertArrows.read(e)||o||l.push({range:G.e.fromPositions(new q.L(h.lineRangeMapping.modified.startLineNumber,1)),options:Pe})}}catch(k){c.e(k)}finally{c.f()}}if(o){var m,_=(0,n.Z)(o.changes);try{for(_.s();!(m=_.n()).done;){var p=m.value,y=p.original.toInclusiveRange();y&&s.push({range:y,options:r?Me:ke});var C=p.modified.toInclusiveRange();C&&l.push({range:C,options:r?Se:Ne});var b,w=(0,n.Z)(p.innerChanges||[]);try{for(w.s();!(b=w.n()).done;){var D=b.value;s.push({range:D.originalRange,options:Ie}),l.push({range:D.modifiedRange,options:Ee})}}catch(k){w.e(k)}finally{w.f()}}}catch(k){_.e(k)}finally{_.f()}}var L,S=d._diffModel.read(e).activeMovedText.read(e),M=(0,n.Z)(t.movedTexts);try{for(M.s();!(L=M.n()).done;){var N=L.value;s.push({range:N.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(N===S?" currentMove":""),blockPadding:[Oe.movedCodeBlockPadding,0,Oe.movedCodeBlockPadding,Oe.movedCodeBlockPadding]}}),l.push({range:N.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(N===S?" currentMove":""),blockPadding:[4,0,4,4]}})}}catch(k){M.e(k)}finally{M.f()}return{originalDecorations:s,modifiedDecorations:l}})),d._register(x(d._editors.original,d._decorations.map((function(e){return(null===e||void 0===e?void 0:e.originalDecorations)||[]})))),d._register(x(d._editors.modified,d._decorations.map((function(e){return(null===e||void 0===e?void 0:e.modifiedDecorations)||[]})))),d}return(0,r.Z)(t)}(f.JT),Fe=t(16860),He=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n,r){var s;return(0,o.Z)(this,t),(s=i.call(this))._options=e,s._domNode=n,s._dimensions=r,s._sashRatio=(0,g.uh)((0,a.Z)(s),void 0),s.sashLeft=(0,g.nK)((0,a.Z)(s),(function(e){var i,t=null!==(i=s._sashRatio.read(e))&&void 0!==i?i:s._options.splitViewDefaultRatio.read(e);return s._computeSashLeft(t,e)})),s._sash=s._register(new Fe.g(s._domNode,{getVerticalSashTop:function(e){return 0},getVerticalSashLeft:function(e){return s.sashLeft.get()},getVerticalSashHeight:function(e){return s._dimensions.height.get()}},{orientation:0})),s._startSashPosition=void 0,s._register(s._sash.onDidStart((function(){s._startSashPosition=s.sashLeft.get()}))),s._register(s._sash.onDidChange((function(e){var i=s._dimensions.width.get(),t=s._computeSashLeft((s._startSashPosition+(e.currentX-e.startX))/i,void 0);s._sashRatio.set(t/i,void 0)}))),s._register(s._sash.onDidEnd((function(){return s._sash.layout()}))),s._register(s._sash.onDidReset((function(){return s._sashRatio.set(void 0,void 0)}))),s._register((0,g.EH)((function(e){var i=s._options.enableSplitViewResizing.read(e);s._sash.state=i?3:0,s.sashLeft.read(e),s._dimensions.height.read(e),s._sash.layout()}))),s}return(0,r.Z)(t,[{key:"setBoundarySashes",value:function(e){this._sash.orthogonalEndSash=e.bottom}},{key:"_computeSashLeft",value:function(e,i){var t=this._dimensions.width.read(i),n=Math.floor(this._options.splitViewDefaultRatio.read(i)*t),o=this._options.enableSplitViewResizing.read(i)?Math.floor(e*t):n,r=100;return t<=200?n:o<r?r:o>t-r?t-r:o}}]),t}(f.JT),Ue=t(26805),Be=t(63021),Ke=t(12928),ze=function(){function e(){(0,o.Z)(this,e)}return(0,r.Z)(e,[{key:"remove",value:function(){var e;null===(e=this.parent)||void 0===e||e.children.delete(this.id)}}],[{key:"findId",value:function(e,i){var t;"string"===typeof e?t="".concat(i.id,"/").concat(e):(t="".concat(i.id,"/").concat(e.name),void 0!==i.children.get(t)&&(t="".concat(i.id,"/").concat(e.name,"_").concat(e.range.startLineNumber,"_").concat(e.range.startColumn)));for(var n=t,o=0;void 0!==i.children.get(n);o++)n="".concat(t,"_").concat(o);return n}},{key:"empty",value:function(e){return 0===e.children.size}}]),e}(),je=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n,r){var a;return(0,o.Z)(this,t),(a=i.call(this)).id=e,a.parent=n,a.symbol=r,a.children=new Map,a}return(0,r.Z)(t)}(ze),Qe=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n,r,a){var s;return(0,o.Z)(this,t),(s=i.call(this)).id=e,s.parent=n,s.label=r,s.order=a,s.children=new Map,s}return(0,r.Z)(t)}(ze),qe=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e){var n;return(0,o.Z)(this,t),(n=i.call(this)).uri=e,n.id="root",n.parent=void 0,n._groups=new Map,n.children=new Map,n.id="root",n.parent=void 0,n}return(0,r.Z)(t,[{key:"_compact",value:function(){var e,i=0,t=(0,n.Z)(this._groups);try{for(t.s();!(e=t.n()).done;){var o=(0,T.Z)(e.value,2),r=o[0];0===o[1].children.size?this._groups.delete(r):i+=1}}catch(u){t.e(u)}finally{t.f()}if(1!==i)this.children=this._groups;else{var a,s=Ke.$.first(this._groups.values()),d=(0,n.Z)(s.children);try{for(d.s();!(a=d.n()).done;){var l=(0,T.Z)(a.value,2)[1];l.parent=this,this.children.set(l.id,l)}}catch(u){d.e(u)}finally{d.f()}}return this}},{key:"getTopLevelSymbols",value:function(){var e,i=[],t=(0,n.Z)(this.children.values());try{for(t.s();!(e=t.n()).done;){var o=e.value;o instanceof je?i.push(o.symbol):i.push.apply(i,(0,E.Z)(Ke.$.map(o.children.values(),(function(e){return e.symbol}))))}}catch(r){t.e(r)}finally{t.f()}return i.sort((function(e,i){return G.e.compareRangesUsingStarts(e.range,i.range)}))}},{key:"asListOfDocumentSymbols",value:function(){var e=this.getTopLevelSymbols(),i=[];return t._flattenDocumentSymbols(i,e,""),i.sort((function(e,i){return q.L.compare(G.e.getStartPosition(e.range),G.e.getStartPosition(i.range))||q.L.compare(G.e.getEndPosition(i.range),G.e.getEndPosition(e.range))}))}}],[{key:"create",value:function(e,i,o){var r=new R.A(o),a=new t(i.uri),s=e.ordered(i),d=s.map((function(e,o){var s,d=ze.findId("provider_".concat(o),a),l=new Qe(d,a,null!==(s=e.displayName)&&void 0!==s?s:"Unknown Outline Provider",o);return Promise.resolve(e.provideDocumentSymbols(i,r.token)).then((function(e){var i,o=(0,n.Z)(e||[]);try{for(o.s();!(i=o.n()).done;){var r=i.value;t._makeOutlineElement(r,l)}}catch(a){o.e(a)}finally{o.f()}return l}),(function(e){return(0,c.Cp)(e),l})).then((function(e){ze.empty(e)?e.remove():a._groups.set(d,e)}))})),l=e.onDidChange((function(){var t=e.ordered(i);(0,D.fS)(t,s)||r.cancel()}));return Promise.all(d).then((function(){return r.token.isCancellationRequested&&!o.isCancellationRequested?t.create(e,i,o):a._compact()})).finally((function(){r.dispose(),l.dispose()}))}},{key:"_makeOutlineElement",value:function(e,i){var o=ze.findId(e,i),r=new je(o,i,e);if(e.children){var a,s=(0,n.Z)(e.children);try{for(s.s();!(a=s.n()).done;){var d=a.value;t._makeOutlineElement(d,r)}}catch(l){s.e(l)}finally{s.f()}}i.children.set(r.id,r)}},{key:"_flattenDocumentSymbols",value:function(e,i,o){var r,a=(0,n.Z)(i);try{for(a.s();!(r=a.n()).done;){var s=r.value;e.push({kind:s.kind,tags:s.tags,name:s.name,detail:s.detail,containerName:s.containerName||o,range:s.range,selectionRange:s.selectionRange,children:void 0}),s.children&&t._flattenDocumentSymbols(e,s.children,s.name)}}catch(d){a.e(d)}finally{a.f()}}}]),t}(ze),Ge=t(70133),Je=t(65441),Ye=function(e,i,t,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,i,t,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(i,t,a):o(i,t))||a);return r>3&&a&&Object.defineProperty(i,t,a),a},$e=function(e,i){return function(t,n){i(t,n,e)}},Xe=function(e,i,t,n){return new(t||(t=Promise))((function(o,r){function a(e){try{d(n.next(e))}catch(i){r(i)}}function s(e){try{d(n.throw(e))}catch(i){r(i)}}function d(e){var i;e.done?o(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(a,s)}d((n=n.apply(e,i||[])).next())}))},ei=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,r,s,d){var l;(0,o.Z)(this,t),(l=i.call(this))._editors=e,l._diffModel=r,l._options=s,l._languageFeaturesService=d,l._isUpdatingViewZones=!1,l._modifiedOutlineSource=(0,g.Be)((0,a.Z)(l),(function(e,i){var t=l._editors.modifiedModel.read(e);if(t)return i.add(new ii(l._languageFeaturesService,t))})),l._register(l._editors.original.onDidChangeCursorPosition((function(e){if(3===e.reason){var i=l._diffModel.get();(0,g.PS)((function(e){var t,o=(0,n.Z)(l._editors.original.getSelections()||[]);try{for(o.s();!(t=o.n()).done;){var r=t.value;null===i||void 0===i||i.ensureOriginalLineIsVisible(r.getStartPosition().lineNumber,e),null===i||void 0===i||i.ensureOriginalLineIsVisible(r.getEndPosition().lineNumber,e)}}catch(a){o.e(a)}finally{o.f()}}))}}))),l._register(l._editors.modified.onDidChangeCursorPosition((function(e){if(3===e.reason){var i=l._diffModel.get();(0,g.PS)((function(e){var t,o=(0,n.Z)(l._editors.modified.getSelections()||[]);try{for(o.s();!(t=o.n()).done;){var r=t.value;null===i||void 0===i||i.ensureModifiedLineIsVisible(r.getStartPosition().lineNumber,e),null===i||void 0===i||i.ensureModifiedLineIsVisible(r.getEndPosition().lineNumber,e)}}catch(a){o.e(a)}finally{o.f()}}))}})));var u=l._diffModel.map((function(e,i){var t,n;return 0===(null===(t=null===e||void 0===e?void 0:e.diff.read(i))||void 0===t?void 0:t.mappings.length)?[]:null!==(n=null===e||void 0===e?void 0:e.unchangedRegions.read(i))&&void 0!==n?n:[]})),c=(0,g.Be)((0,a.Z)(l),(function(e,i){var t=l._modifiedOutlineSource.read(e);if(!t)return{origViewZones:[],modViewZones:[]};var o,r=[],a=[],s=l._options.renderSideBySide.read(e),d=u.read(e),c=(0,n.Z)(d);try{var h=function(){var n=o.value;if(n.shouldHideControls(e))return 1;var d=(0,g.nK)((function(e){return n.getHiddenOriginalRange(e).startLineNumber-1})),u=new W(d,24);r.push(u),i.add(new ni(l._editors.original,u,n,n.originalUnchangedRange,!s,t,(function(e){return l._diffModel.get().ensureModifiedLineIsVisible(e,void 0)}),l._options));var c=(0,g.nK)((function(e){return n.getHiddenModifiedRange(e).startLineNumber-1})),h=new W(c,24);a.push(h),i.add(new ni(l._editors.modified,h,n,n.modifiedUnchangedRange,!1,t,(function(e){return l._diffModel.get().ensureModifiedLineIsVisible(e,void 0)}),l._options))};for(c.s();!(o=c.n()).done;)h()}catch(f){c.e(f)}finally{c.f()}return{origViewZones:r,modViewZones:a}})),h={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},f={description:"Fold Unchanged",glyphMarginHoverMessage:new be.W5(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown((0,ie.NC)("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+S.k.asClassName(L.l.fold),zIndex:10001};return l._register(x(l._editors.original,(0,g.nK)((function(e){var i,t=u.read(e),o=t.map((function(e){return{range:e.originalUnchangedRange.toInclusiveRange(),options:h}})),r=(0,n.Z)(t);try{for(r.s();!(i=r.n()).done;){var a=i.value;a.shouldHideControls(e)&&o.push({range:G.e.fromPositions(new q.L(a.originalLineNumber,1)),options:f})}}catch(s){r.e(s)}finally{r.f()}return o})))),l._register(x(l._editors.modified,(0,g.nK)((function(e){var i,t=u.read(e),o=t.map((function(e){return{range:e.modifiedUnchangedRange.toInclusiveRange(),options:h}})),r=(0,n.Z)(t);try{for(r.s();!(i=r.n()).done;){var a=i.value;a.shouldHideControls(e)&&o.push({range:j.z.ofLength(a.modifiedLineNumber,1).toInclusiveRange(),options:f})}}catch(s){r.e(s)}finally{r.f()}return o})))),l._register(B(l._editors.original,c.map((function(e){return e.origViewZones})),(function(e){return l._isUpdatingViewZones=e}))),l._register(B(l._editors.modified,c.map((function(e){return e.modViewZones})),(function(e){return l._isUpdatingViewZones=e}))),l._register((0,g.EH)((function(e){var i=u.read(e);l._editors.original.setHiddenAreas(i.map((function(i){return i.getHiddenOriginalRange(e).toInclusiveRange()})).filter(Be.$K)),l._editors.modified.setHiddenAreas(i.map((function(i){return i.getHiddenModifiedRange(e).toInclusiveRange()})).filter(Be.$K))}))),l._register(l._editors.modified.onMouseUp((function(e){var i;if(!e.event.rightButton&&e.target.position&&(null===(i=e.target.element)||void 0===i?void 0:i.className.includes("fold-unchanged"))){var t=e.target.position.lineNumber,n=l._diffModel.get();if(!n)return;var o=n.unchangedRegions.get().find((function(e){return e.modifiedUnchangedRange.includes(t)}));if(!o)return;o.collapseAll(void 0),e.event.stopPropagation(),e.event.preventDefault()}}))),l._register(l._editors.original.onMouseUp((function(e){var i;if(!e.event.rightButton&&e.target.position&&(null===(i=e.target.element)||void 0===i?void 0:i.className.includes("fold-unchanged"))){var t=e.target.position.lineNumber,n=l._diffModel.get();if(!n)return;var o=n.unchangedRegions.get().find((function(e){return e.originalUnchangedRange.includes(t)}));if(!o)return;o.collapseAll(void 0),e.event.stopPropagation(),e.event.preventDefault()}}))),l}return(0,r.Z)(t,[{key:"isUpdatingViewZones",get:function(){return this._isUpdatingViewZones}}]),t}(f.JT);ei=Ye([$e(3,Je.p)],ei);var ii=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n){var r;(0,o.Z)(this,t),(r=i.call(this))._languageFeaturesService=e,r._textModel=n,r._currentModel=(0,g.uh)((0,a.Z)(r),void 0);var s=(0,g.aq)("documentSymbolProvider.onDidChange",r._languageFeaturesService.documentSymbolProvider.onDidChange),d=(0,g.aq)("_textModel.onDidChangeContent",h.ju.debounce((function(e){return r._textModel.onDidChangeContent(e)}),(function(){}),100));return r._register((0,g.gp)((function(e,i){return Xe((0,a.Z)(r),void 0,void 0,(0,p.Z)().mark((function t(){var n,o;return(0,p.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.read(e),d.read(e),n=i.add(new K),t.next=5,qe.create(this._languageFeaturesService.documentSymbolProvider,this._textModel,n.token);case 5:if(o=t.sent,!i.isDisposed){t.next=8;break}return t.abrupt("return");case 8:this._currentModel.set(o,void 0);case 9:case"end":return t.stop()}}),t,this)})))}))),r}return(0,r.Z)(t,[{key:"getBreadcrumbItems",value:function(e,i){var t=this._currentModel.read(i);if(!t)return[];var n=t.asListOfDocumentSymbols().filter((function(i){return e.contains(i.range.startLineNumber)&&!e.contains(i.range.endLineNumber)}));return n.sort((0,D.BV)((0,D.tT)((function(e){return e.range.endLineNumber-e.range.startLineNumber}),D.fv))),n.map((function(e){return{name:e.name,kind:e.kind,startLineNumber:e.range.startLineNumber}}))}}]),t}(f.JT);ii=Ye([$e(0,Je.p)],ii);var ti,ni=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n,r,a,s,d,u,c){var h;(0,o.Z)(this,t);var f=(0,l.h)("div.diff-hidden-lines-widget");(h=i.call(this,e,n,f.root))._editor=e,h._unchangedRegion=r,h._unchangedRegionRange=a,h.hide=s,h._modifiedOutlineSource=d,h._revealModifiedHiddenLine=u,h._options=c,h._nodes=(0,l.h)("div.diff-hidden-lines",[(0,l.h)("div.top@top",{title:(0,ie.NC)("diff.hiddenLines.top","Click or drag to show more above")}),(0,l.h)("div.center@content",{style:{display:"flex"}},[(0,l.h)("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[l.$.apply(void 0,["a",{title:(0,ie.NC)("showAll","Show all"),role:"button",onclick:function(){h._unchangedRegion.showAll(void 0)}}].concat((0,E.Z)((0,Ue.T)("$(unfold)"))))]),(0,l.h)("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),(0,l.h)("div.bottom@bottom",{title:(0,ie.NC)("diff.bottom","Click or drag to show more below"),role:"button"})]),f.root.appendChild(h._nodes.root);var v=(0,g.rD)(h._editor.onDidLayoutChange,(function(){return h._editor.getLayoutInfo()}));h.hide?(0,l.reset)(h._nodes.first):h._register(H(h._nodes.first,{width:v.map((function(e){return e.contentLeft}))}));var m=h._editor;return h._register((0,l.addDisposableListener)(h._nodes.top,"mousedown",(function(e){if(0===e.button){h._nodes.top.classList.toggle("dragging",!0),h._nodes.root.classList.toggle("dragging",!0),e.preventDefault();var i=e.clientY,t=!1,n=h._unchangedRegion.visibleLineCountTop.get();h._unchangedRegion.isDragged.set(!0,void 0);var o=(0,l.addDisposableListener)(window,"mousemove",(function(e){var o=e.clientY-i;t=t||Math.abs(o)>2;var r=Math.round(o/m.getOption(66)),a=Math.max(0,Math.min(n+r,h._unchangedRegion.getMaxVisibleLineCountTop()));h._unchangedRegion.visibleLineCountTop.set(a,void 0)})),r=(0,l.addDisposableListener)(window,"mouseup",(function(e){t||h._unchangedRegion.showMoreAbove(h._options.hideUnchangedRegionsRevealLineCount.get(),void 0),h._nodes.top.classList.toggle("dragging",!1),h._nodes.root.classList.toggle("dragging",!1),h._unchangedRegion.isDragged.set(!1,void 0),o.dispose(),r.dispose()}))}}))),h._register((0,l.addDisposableListener)(h._nodes.bottom,"mousedown",(function(e){if(0===e.button){h._nodes.bottom.classList.toggle("dragging",!0),h._nodes.root.classList.toggle("dragging",!0),e.preventDefault();var i=e.clientY,t=!1,n=h._unchangedRegion.visibleLineCountBottom.get();h._unchangedRegion.isDragged.set(!0,void 0);var o=(0,l.addDisposableListener)(window,"mousemove",(function(e){var o=e.clientY-i;t=t||Math.abs(o)>2;var r=Math.round(o/m.getOption(66)),a=Math.max(0,Math.min(n-r,h._unchangedRegion.getMaxVisibleLineCountBottom())),s=m.getTopForLineNumber(h._unchangedRegionRange.endLineNumberExclusive);h._unchangedRegion.visibleLineCountBottom.set(a,void 0);var d=m.getTopForLineNumber(h._unchangedRegionRange.endLineNumberExclusive);m.setScrollTop(m.getScrollTop()+(d-s))})),r=(0,l.addDisposableListener)(window,"mouseup",(function(e){if(h._unchangedRegion.isDragged.set(!1,void 0),!t){var i=m.getTopForLineNumber(h._unchangedRegionRange.endLineNumberExclusive);h._unchangedRegion.showMoreBelow(h._options.hideUnchangedRegionsRevealLineCount.get(),void 0);var n=m.getTopForLineNumber(h._unchangedRegionRange.endLineNumberExclusive);m.setScrollTop(m.getScrollTop()+(n-i))}h._nodes.bottom.classList.toggle("dragging",!1),h._nodes.root.classList.toggle("dragging",!1),o.dispose(),r.dispose()}))}}))),h._register((0,g.EH)((function(e){var i=[];if(!h.hide){var t=r.getHiddenModifiedRange(e).length,n=(0,ie.NC)("hiddenLines","{0} hidden lines",t),o=(0,l.$)("span",{title:(0,ie.NC)("diff.hiddenLines.expandAll","Double click to unfold")},n);o.addEventListener("dblclick",(function(e){0===e.button&&(e.preventDefault(),h._unchangedRegion.showAll(void 0))})),i.push(o);var a=h._unchangedRegion.getHiddenModifiedRange(e),s=h._modifiedOutlineSource.getBreadcrumbItems(a,e);if(s.length>0){i.push((0,l.$)("span",void 0,"\xa0\xa0|\xa0\xa0"));for(var d=function(){var e=s[u],t=Ge.uZ.toIcon(e.kind),n=(0,l.h)("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[(0,Ue.h)(t),"\xa0",e.name].concat((0,E.Z)(u===s.length-1?[]:[(0,Ue.h)(L.l.chevronRight)]))).root;i.push(n),n.onclick=function(){h._revealModifiedHiddenLine(e.startLineNumber)}},u=0;u<s.length;u++)d()}}l.reset.apply(void 0,[h._nodes.others].concat(i))}))),h}return(0,r.Z)(t)}(A),oi=t(71049),ri=t(49039),ai=t(48497),si=t(88697),di=t(45536),li=function(e,i,t,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,i,t,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(i,t,a):o(i,t))||a);return r>3&&a&&Object.defineProperty(i,t,a),a},ui=function(e,i){return function(t,n){i(t,n,e)}},ci=function(e,i,t,n){return new(t||(t=Promise))((function(o,r){function a(e){try{d(n.next(e))}catch(i){r(i)}}function s(e){try{d(n.throw(e))}catch(i){r(i)}}function d(e){var i;e.done?o(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(a,s)}d((n=n.apply(e,i||[])).next())}))},hi=ti=function(){function e(i,t,n){(0,o.Z)(this,e),this.editorWorkerService=t,this.telemetryService=n,this.onDidChangeEventEmitter=new h.Q5,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(i)}return(0,r.Z)(e,[{key:"dispose",value:function(){var e;null===(e=this.diffAlgorithmOnDidChangeSubscription)||void 0===e||e.dispose()}},{key:"computeDiff",value:function(e,i,t,n){var o,r;return ci(this,void 0,void 0,(0,p.Z)().mark((function a(){var s,d,l,u,c,h;return(0,p.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("string"===typeof this.diffAlgorithm){a.next=2;break}return a.abrupt("return",this.diffAlgorithm.computeDiff(e,i,t,n));case 2:if(1!==e.getLineCount()||1!==e.getLineMaxColumn(1)){a.next=6;break}if(1!==i.getLineCount()||1!==i.getLineMaxColumn(1)){a.next=5;break}return a.abrupt("return",{changes:[],identical:!0,quitEarly:!1,moves:[]});case 5:return a.abrupt("return",{changes:[new J.gB(new j.z(1,2),new j.z(1,i.getLineCount()+1),[new J.iy(e.getFullModelRange(),i.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]});case 6:if(s=JSON.stringify([e.uri.toString(),i.uri.toString()]),d=JSON.stringify([e.id,i.id,e.getAlternativeVersionId(),i.getAlternativeVersionId(),JSON.stringify(t)]),!(l=ti.diffCache.get(s))||l.context!==d){a.next=11;break}return a.abrupt("return",l.result);case 11:return u=ai.G.create(),a.next=14,this.editorWorkerService.computeDiff(e.uri,i.uri,t,this.diffAlgorithm);case 14:if(c=a.sent,h=u.elapsed(),this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:h,timedOut:null===(o=null===c||void 0===c?void 0:c.quitEarly)||void 0===o||o,detectedMoves:t.computeMoves?null!==(r=null===c||void 0===c?void 0:c.moves.length)&&void 0!==r?r:0:-1}),!n.isCancellationRequested){a.next=19;break}return a.abrupt("return",{changes:[],identical:!1,quitEarly:!0,moves:[]});case 19:if(c){a.next=21;break}throw new Error("no diff result available");case 21:return ti.diffCache.size>10&&ti.diffCache.delete(ti.diffCache.keys().next().value),ti.diffCache.set(s,{result:c,context:d}),a.abrupt("return",c);case 24:case"end":return a.stop()}}),a,this)})))}},{key:"setOptions",value:function(e){var i,t=this,n=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&(null===(i=this.diffAlgorithmOnDidChangeSubscription)||void 0===i||i.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,"string"!==typeof e.diffAlgorithm&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange((function(){return t.onDidChangeEventEmitter.fire()}))),n=!0),n&&this.onDidChangeEventEmitter.fire()}}]),e}();hi.diffCache=new Map,hi=ti=li([ui(1,si.p),ui(2,di.b)],hi);var fi=t(57832),gi=function(e,i,t,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,i,t,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(i,t,a):o(i,t))||a);return r>3&&a&&Object.defineProperty(i,t,a),a},vi=function(e,i){return function(t,n){i(t,n,e)}},mi=(0,ne.yh)("diffProviderFactoryService"),_i=function(){function e(i){(0,o.Z)(this,e),this.instantiationService=i}return(0,r.Z)(e,[{key:"createDiffProvider",value:function(e,i){return this.instantiationService.createInstance(hi,i)}}]),e}();_i=gi([vi(0,ne.TG)],_i),(0,fi.z)(mi,_i,1);var pi=t(27613),yi=t(75576),Ci=t(63571),bi=t(18288),wi=function(e,i,t,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,i,t,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(i,t,a):o(i,t))||a);return r>3&&a&&Object.defineProperty(i,t,a),a},Di=function(e,i){return function(t,n){i(t,n,e)}},Li=function(e,i,t,n){return new(t||(t=Promise))((function(o,r){function a(e){try{d(n.next(e))}catch(i){r(i)}}function s(e){try{d(n.throw(e))}catch(i){r(i)}}function d(e){var i;e.done?o(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(a,s)}d((n=n.apply(e,i||[])).next())}))},Si=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,r,s,d){var l;(0,o.Z)(this,t),(l=i.call(this)).model=e,l._options=r,l._editor=s,l._diffProviderFactoryService=d,l._isDiffUpToDate=(0,g.uh)((0,a.Z)(l),!1),l.isDiffUpToDate=l._isDiffUpToDate,l._diff=(0,g.uh)((0,a.Z)(l),void 0),l.diff=l._diff,l._unchangedRegions=(0,g.uh)((0,a.Z)(l),{regions:[],originalDecorationIds:[],modifiedDecorationIds:[]}),l.unchangedRegions=(0,g.nK)((0,a.Z)(l),(function(e){return l._options.hideUnchangedRegions.read(e)?l._unchangedRegions.read(e).regions:((0,g.PS)((function(e){var i,t=(0,n.Z)(l._unchangedRegions.get().regions);try{for(t.s();!(i=t.n()).done;){i.value.collapseAll(e)}}catch(o){t.e(o)}finally{t.f()}})),[])})),l.movedTextToCompare=(0,g.uh)((0,a.Z)(l),void 0),l._activeMovedText=(0,g.uh)((0,a.Z)(l),void 0),l._hoveredMovedText=(0,g.uh)((0,a.Z)(l),void 0),l.activeMovedText=(0,g.nK)((0,a.Z)(l),(function(e){var i,t;return null!==(t=null!==(i=l.movedTextToCompare.read(e))&&void 0!==i?i:l._hoveredMovedText.read(e))&&void 0!==t?t:l._activeMovedText.read(e)})),l._cancellationTokenSource=new R.A,l._diffProvider=(0,g.nK)((0,a.Z)(l),(function(e){var i=l._diffProviderFactoryService.createDiffProvider(l._editor,{diffAlgorithm:l._options.diffAlgorithm.read(e)});return{diffProvider:i,onChangeSignal:(0,g.aq)("onDidChange",i.onDidChange)}})),l._register((0,f.OF)((function(){return l._cancellationTokenSource.cancel()})));var u=(0,g.GN)("contentChangedSignal"),c=l._register(new oi.pY((function(){return u.trigger(void 0)}),200)),h=function(i,t,o){var r,a=Ei.fromDiffs(i.changes,e.original.getLineCount(),e.modified.getLineCount(),l._options.hideUnchangedRegionsMinimumLineCount.read(o),l._options.hideUnchangedRegionsContextLineCount.read(o)),s=l._unchangedRegions.get(),d=s.originalDecorationIds.map((function(i){return e.original.getDecorationRange(i)})).filter((function(e){return!!e})).map((function(e){return j.z.fromRange(e)})),u=s.modifiedDecorationIds.map((function(i){return e.modified.getDecorationRange(i)})).filter((function(e){return!!e})).map((function(e){return j.z.fromRange(e)})),c=e.original.deltaDecorations(s.originalDecorationIds,a.map((function(e){return{range:e.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}}))),h=e.modified.deltaDecorations(s.modifiedDecorationIds,a.map((function(e){return{range:e.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}}))),f=(0,n.Z)(a);try{for(f.s();!(r=f.n()).done;)for(var g=r.value,v=0;v<s.regions.length;v++)if(g.originalUnchangedRange.intersectsStrict(d[v])&&g.modifiedUnchangedRange.intersectsStrict(u[v])){g.setHiddenModifiedRange(s.regions[v].getHiddenModifiedRange(void 0),t);break}}catch(m){f.e(m)}finally{f.f()}l._unchangedRegions.set({regions:a,originalDecorationIds:c,modifiedDecorationIds:h},t)};return l._register(e.modified.onDidChangeContent((function(i){if(l._diff.get()){var t=yi.Q.fromModelContentChanges(i.changes),n=Ri(l._lastDiff,t,e.original,e.modified);n&&(l._lastDiff=n,(0,g.PS)((function(e){l._diff.set(Ni.fromDiffResult(l._lastDiff),e),h(n,e);var i=l.movedTextToCompare.get();l.movedTextToCompare.set(i?l._lastDiff.moves.find((function(e){return e.lineRangeMapping.modified.intersect(i.lineRangeMapping.modified)})):void 0,e)})))}c.schedule()}))),l._register(e.original.onDidChangeContent((function(i){if(l._diff.get()){var t=yi.Q.fromModelContentChanges(i.changes),n=Ti(l._lastDiff,t,e.original,e.modified);n&&(l._lastDiff=n,(0,g.PS)((function(e){l._diff.set(Ni.fromDiffResult(l._lastDiff),e),h(n,e);var i=l.movedTextToCompare.get();l.movedTextToCompare.set(i?l._lastDiff.moves.find((function(e){return e.lineRangeMapping.modified.intersect(i.lineRangeMapping.modified)})):void 0,e)})))}c.schedule()}))),l._register((0,g.gp)((function(i,t){return Li((0,a.Z)(l),void 0,void 0,(0,p.Z)().mark((function n(){var o,r,a,s,d,l,f=this;return(0,p.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this._options.hideUnchangedRegionsMinimumLineCount.read(i),this._options.hideUnchangedRegionsContextLineCount.read(i),c.cancel(),u.read(i),(a=this._diffProvider.read(i)).onChangeSignal.read(i),U(pi.DW,i),U(bi.xG,i),this._isDiffUpToDate.set(!1,void 0),s=[],t.add(e.original.onDidChangeContent((function(e){var i=yi.Q.fromModelContentChanges(e.changes);s=(0,Ci.o)(s,i)}))),d=[],t.add(e.modified.onDidChangeContent((function(e){var i=yi.Q.fromModelContentChanges(e.changes);d=(0,Ci.o)(d,i)}))),n.next=15,a.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(i),maxComputationTimeMs:this._options.maxComputationTimeMs.read(i),computeMoves:this._options.showMoves.read(i)},this._cancellationTokenSource.token);case 15:if(l=n.sent,!this._cancellationTokenSource.token.isCancellationRequested){n.next=18;break}return n.abrupt("return");case 18:l=Mi(l,e.original,e.modified),l=null!==(o=Ti(l,s,e.original,e.modified))&&void 0!==o?o:l,l=null!==(r=Ri(l,d,e.original,e.modified))&&void 0!==r?r:l,(0,g.PS)((function(e){h(l,e),f._lastDiff=l;var i=Ni.fromDiffResult(l);f._diff.set(i,e),f._isDiffUpToDate.set(!0,e);var t=f.movedTextToCompare.get();f.movedTextToCompare.set(t?f._lastDiff.moves.find((function(e){return e.lineRangeMapping.modified.intersect(t.lineRangeMapping.modified)})):void 0,e)}));case 22:case"end":return n.stop()}}),n,this)})))}))),l}return(0,r.Z)(t,[{key:"setActiveMovedText",value:function(e){this._activeMovedText.set(e,void 0)}},{key:"ensureModifiedLineIsVisible",value:function(e,i){var t;if(0!==(null===(t=this.diff.get())||void 0===t?void 0:t.mappings.length)){var o,r=this._unchangedRegions.get().regions,a=(0,n.Z)(r);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s.getHiddenModifiedRange(void 0).contains(e))return void s.showModifiedLine(e,i)}}catch(d){a.e(d)}finally{a.f()}}}},{key:"ensureOriginalLineIsVisible",value:function(e,i){var t;if(0!==(null===(t=this.diff.get())||void 0===t?void 0:t.mappings.length)){var o,r=this._unchangedRegions.get().regions,a=(0,n.Z)(r);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s.getHiddenOriginalRange(void 0).contains(e))return void s.showOriginalLine(e,i)}}catch(d){a.e(d)}finally{a.f()}}}},{key:"waitForDiff",value:function(){return Li(this,void 0,void 0,(0,p.Z)().mark((function e(){return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.F_)(this.isDiffUpToDate,(function(e){return e}));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"serializeState",value:function(){return{collapsedRegions:this._unchangedRegions.get().regions.map((function(e){return{range:e.getHiddenModifiedRange(void 0).serialize()}}))}}},{key:"restoreSerializedState",value:function(e){var i=e.collapsedRegions.map((function(e){return j.z.deserialize(e.range)})),t=this._unchangedRegions.get();(0,g.PS)((function(e){var o,r=(0,n.Z)(t.regions);try{for(r.s();!(o=r.n()).done;){var a,s=o.value,d=(0,n.Z)(i);try{for(d.s();!(a=d.n()).done;){var l=a.value;if(s.modifiedUnchangedRange.intersect(l)){s.setHiddenModifiedRange(l,e);break}}}catch(u){d.e(u)}finally{d.f()}}}catch(u){r.e(u)}finally{r.f()}}))}}]),t}(f.JT);function Mi(e,i,t){return{changes:e.changes.map((function(e){return new J.gB(e.original,e.modified,e.innerChanges?e.innerChanges.map((function(e){return function(e,i,t){var n=e.originalRange,o=e.modifiedRange;(1!==n.endColumn||1!==o.endColumn)&&n.endColumn===i.getLineMaxColumn(n.endLineNumber)&&o.endColumn===t.getLineMaxColumn(o.endLineNumber)&&n.endLineNumber<i.getLineCount()&&o.endLineNumber<t.getLineCount()&&(n=n.setEndPosition(n.endLineNumber+1,1),o=o.setEndPosition(o.endLineNumber+1,1));return new J.iy(n,o)}(e,i,t)})):void 0)})),moves:e.moves,identical:e.identical,quitEarly:e.quitEarly}}Si=wi([Di(3,mi)],Si);var Ni=function(){function e(i,t,n,r){(0,o.Z)(this,e),this.mappings=i,this.movedTexts=t,this.identical=n,this.quitEarly=r}return(0,r.Z)(e,null,[{key:"fromDiffResult",value:function(i){return new e(i.changes.map((function(e){return new ki(e)})),i.moves||[],i.identical,i.quitEarly)}}]),e}(),ki=(0,r.Z)((function e(i){(0,o.Z)(this,e),this.lineRangeMapping=i})),Ei=function(){function e(i,t,n,r,a){var s=this;(0,o.Z)(this,e),this.originalLineNumber=i,this.modifiedLineNumber=t,this.lineCount=n,this._visibleLineCountTop=(0,g.uh)(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=(0,g.uh)(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=(0,g.nK)(this,(function(e){return s.visibleLineCountTop.read(e)+s.visibleLineCountBottom.read(e)===s.lineCount&&!s.isDragged.read(e)})),this.isDragged=(0,g.uh)(this,!1),this._visibleLineCountTop.set(r,void 0),this._visibleLineCountBottom.set(a,void 0)}return(0,r.Z)(e,[{key:"originalUnchangedRange",get:function(){return j.z.ofLength(this.originalLineNumber,this.lineCount)}},{key:"modifiedUnchangedRange",get:function(){return j.z.ofLength(this.modifiedLineNumber,this.lineCount)}},{key:"shouldHideControls",value:function(e){return this._shouldHideControls.read(e)}},{key:"getHiddenOriginalRange",value:function(e){return j.z.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}},{key:"getHiddenModifiedRange",value:function(e){return j.z.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}},{key:"setHiddenModifiedRange",value:function(e,i){var t=e.startLineNumber-this.modifiedLineNumber,n=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(t,n,i)}},{key:"getMaxVisibleLineCountTop",value:function(){return this.lineCount-this._visibleLineCountBottom.get()}},{key:"getMaxVisibleLineCountBottom",value:function(){return this.lineCount-this._visibleLineCountTop.get()}},{key:"showMoreAbove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1?arguments[1]:void 0,t=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,t),i)}},{key:"showMoreBelow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1?arguments[1]:void 0,t=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,t),i)}},{key:"showAll",value:function(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}},{key:"showModifiedLine",value:function(e,i){var t=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),n=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;t<n?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+t,i):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+n,i)}},{key:"showOriginalLine",value:function(e,i){var t=e-this.originalLineNumber,n=this.originalLineNumber+this.lineCount-e;t<n?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+n-t,this.getMaxVisibleLineCountTop()),i):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+t-n,this.getMaxVisibleLineCountBottom()),i)}},{key:"collapseAll",value:function(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}},{key:"setState",value:function(e,i,t){e=Math.max(Math.min(e,this.lineCount),0),i=Math.max(Math.min(i,this.lineCount-e),0),this._visibleLineCountTop.set(e,t),this._visibleLineCountBottom.set(i,t)}}],[{key:"fromDiffs",value:function(i,t,o,r,a){var s,d=J.gB.inverse(i,t,o),l=[],u=(0,n.Z)(d);try{for(u.s();!(s=u.n()).done;){var c=s.value,h=c.original.startLineNumber,f=c.modified.startLineNumber,g=c.original.length,v=1===h&&1===f,m=h+g===t+1&&f+g===o+1;(v||m)&&g>=a+r?(v&&!m&&(g-=a),m&&!v&&(h+=a,f+=a,g-=a),l.push(new e(h,f,g,0,0))):g>=2*a+r&&(h+=a,f+=a,g-=2*a,l.push(new e(h,f,g,0,0)))}}catch(_){u.e(_)}finally{u.f()}return l}}]),e}();function Ti(e,i,t,n){}function Ri(e,i,t,n){}var Ii=t(90650),Zi=function(e,i,t,n){return new(t||(t=Promise))((function(o,r){function a(e){try{d(n.next(e))}catch(i){r(i)}}function s(e){try{d(n.throw(e))}catch(i){r(i)}}function d(e){var i;e.done?o(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(a,s)}d((n=n.apply(e,i||[])).next())}))},xi=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n,r,s,d,u,c,h,f){var g;(0,o.Z)(this,t),(g=i.call(this))._getViewZoneId=e,g._marginDomNode=n,g._modifiedEditor=r,g._diff=s,g._editor=d,g._viewLineCounts=u,g._originalTextModel=c,g._contextMenuService=h,g._clipboardService=f,g._visibility=!1,g._marginDomNode.style.zIndex="10",g._diffActions=document.createElement("div"),g._diffActions.className=S.k.asClassName(L.l.lightBulb)+" lightbulb-glyph",g._diffActions.style.position="absolute";var v=g._modifiedEditor.getOption(66);g._diffActions.style.right="0px",g._diffActions.style.visibility="hidden",g._diffActions.style.height="".concat(v,"px"),g._diffActions.style.lineHeight="".concat(v,"px"),g._marginDomNode.appendChild(g._diffActions);var m=0,_=r.getOption(126)&&!Ii.gn,y=function(e,i){var t;g._contextMenuService.showContextMenu({domForShadowRoot:_&&null!==(t=r.getDomNode())&&void 0!==t?t:void 0,getAnchor:function(){return{x:e,y:i}},getActions:function(){var e=[],i=s.modified.isEmpty;return e.push(new w.aU("diff.clipboard.copyDeletedContent",i?s.original.length>1?(0,ie.NC)("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):(0,ie.NC)("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):s.original.length>1?(0,ie.NC)("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):(0,ie.NC)("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,(function(){return Zi((0,a.Z)(g),void 0,void 0,(0,p.Z)().mark((function e(){var i;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._originalTextModel.getValueInRange(s.original.toExclusiveRange()),e.next=3,this._clipboardService.writeText(i);case 3:case"end":return e.stop()}}),e,this)})))}))),s.original.length>1&&e.push(new w.aU("diff.clipboard.copyDeletedLineContent",i?(0,ie.NC)("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",s.original.startLineNumber+m):(0,ie.NC)("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",s.original.startLineNumber+m),void 0,!0,(function(){return Zi((0,a.Z)(g),void 0,void 0,(0,p.Z)().mark((function e(){var i,t;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return""===(i=this._originalTextModel.getLineContent(s.original.startLineNumber+m))&&(t=this._originalTextModel.getEndOfLineSequence(),i=0===t?"\n":"\r\n"),e.next=4,this._clipboardService.writeText(i);case 4:case"end":return e.stop()}}),e,this)})))}))),r.getOption(90)||e.push(new w.aU("diff.inline.revertChange",(0,ie.NC)("diff.inline.revertChange.label","Revert this change"),void 0,!0,(function(){return Zi((0,a.Z)(g),void 0,void 0,(0,p.Z)().mark((function e(){return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._editor.revert(this._diff);case 1:case"end":return e.stop()}}),e,this)})))}))),e},autoSelectFirstItem:!0})};return g._register((0,l.addStandardDisposableListener)(g._diffActions,"mousedown",(function(e){var i=(0,l.getDomNodePagePosition)(g._diffActions),t=i.top,n=i.height,o=Math.floor(v/3);e.preventDefault(),y(e.posx,t+n+o)}))),g._register(r.onMouseMove((function(e){8!==e.target.type&&5!==e.target.type||e.target.detail.viewZoneId!==g._getViewZoneId()?g.visibility=!1:(m=g._updateLightBulbPosition(g._marginDomNode,e.event.browserEvent.y,v),g.visibility=!0)}))),g._register(r.onMouseDown((function(e){e.event.rightButton&&(8!==e.target.type&&5!==e.target.type||e.target.detail.viewZoneId===g._getViewZoneId()&&(e.event.preventDefault(),m=g._updateLightBulbPosition(g._marginDomNode,e.event.browserEvent.y,v),y(e.event.posx,e.event.posy+v)))}))),g}return(0,r.Z)(t,[{key:"visibility",get:function(){return this._visibility},set:function(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}},{key:"_updateLightBulbPosition",value:function(e,i,t){var n=i-(0,l.getDomNodePagePosition)(e).top,o=Math.floor(n/t),r=o*t;if(this._diffActions.style.top="".concat(r,"px"),this._viewLineCounts)for(var a=0,s=0;s<this._viewLineCounts.length;s++)if(o<(a+=this._viewLineCounts[s]))return s;return o}}]),t}(f.JT),Pi=t(53603),Oi=t(63465),Vi=(0,y.Z)("diffEditorWidget",{createHTML:function(e){return e}});var Ai=(0,r.Z)((function e(i,t,n,r){(0,o.Z)(this,e),this.lineTokens=i,this.lineBreakData=t,this.mightContainNonBasicASCII=n,this.mightContainRTL=r})),Wi=function(){function e(i,t,n,r,a,s,d,l,u,c,h){(0,o.Z)(this,e),this.tabSize=i,this.fontInfo=t,this.disableMonospaceOptimizations=n,this.typicalHalfwidthCharacterWidth=r,this.scrollBeyondLastColumn=a,this.lineHeight=s,this.lineDecorationsWidth=d,this.stopRenderingLineAfter=l,this.renderWhitespace=u,this.renderControlCharacters=c,this.fontLigatures=h}return(0,r.Z)(e,null,[{key:"fromEditor",value:function(i){var t,n=i.getOptions(),o=n.get(50),r=n.get(143);return new e((null===(t=i.getModel())||void 0===t?void 0:t.getOptions().tabSize)||0,o,n.get(33),o.typicalHalfwidthCharacterWidth,n.get(103),n.get(66),r.decorationsWidth,n.get(116),n.get(98),n.get(93),n.get(51))}}]),e}();function Fi(e,i,t,n,o,r,a,s){s.appendString('<div class="view-line'),n||s.appendString(" char-delete"),s.appendString('" style="top:'),s.appendString(String(e*a.lineHeight)),s.appendString('px;width:1000000px;">');var d=i.getLineContent(),l=ee.wA.isBasicASCII(d,o),u=ee.wA.containsRTL(d,l,r),c=(0,X.d1)(new X.IJ(a.fontInfo.isMonospace&&!a.disableMonospaceOptimizations,a.fontInfo.canUseHalfwidthRightwardsArrow,d,!1,l,u,0,i,t,a.tabSize,0,a.fontInfo.spaceWidth,a.fontInfo.middotWidth,a.fontInfo.wsmiddotWidth,a.stopRenderingLineAfter,a.renderWhitespace,a.renderControlCharacters,a.fontLigatures!==z.n0.OFF,null),s);return s.appendString("</div>"),c.characterMapping.getHorizontalOffset(c.characterMapping.length)}var Hi=t(76344),Ui=t(92361),Bi=function(e,i,t,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,i,t,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(i,t,a):o(i,t))||a);return r>3&&a&&Object.defineProperty(i,t,a),a},Ki=function(e,i){return function(t,n){i(t,n,e)}},zi=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,r,s,d,u,c,h){var v;(0,o.Z)(this,t),(v=i.call(this))._editors=e,v._diffModel=r,v._options=s,v._diffEditorWidget=d,v._canIgnoreViewZoneUpdateEvent=u,v._clipboardService=c,v._contextMenuService=h,v._originalTopPadding=(0,g.uh)((0,a.Z)(v),0),v._originalScrollOffset=(0,g.uh)((0,a.Z)(v),0),v._originalScrollOffsetAnimated=V(v._originalScrollOffset,v._store),v._modifiedTopPadding=(0,g.uh)((0,a.Z)(v),0),v._modifiedScrollOffset=(0,g.uh)((0,a.Z)(v),0),v._modifiedScrollOffsetAnimated=V(v._modifiedScrollOffset,v._store);var m=!1,_=(0,g.uh)("state",0),p=v._register(new oi.pY((function(){_.set(_.get()+1,void 0)}),0));v._register(v._editors.original.onDidChangeViewZones((function(e){m||v._canIgnoreViewZoneUpdateEvent()||p.schedule()}))),v._register(v._editors.modified.onDidChangeViewZones((function(e){m||v._canIgnoreViewZoneUpdateEvent()||p.schedule()}))),v._register(v._editors.original.onDidChangeConfiguration((function(e){(e.hasChanged(144)||e.hasChanged(66))&&p.schedule()}))),v._register(v._editors.modified.onDidChangeConfiguration((function(e){(e.hasChanged(144)||e.hasChanged(66))&&p.schedule()})));var y=v._diffModel.map((function(e){return e?(0,g.rD)(e.model.original.onDidChangeTokens,(function(){return 2===e.model.original.tokenization.backgroundTokenizationState})):void 0})).map((function(e,i){return null===e||void 0===e?void 0:e.read(i)})),C=new Set,b=new Set,w=(0,g.nK)((function(e){var i=v._diffModel.read(e),t=null===i||void 0===i?void 0:i.diff.read(e);if(!i||!t)return null;_.read(e);var n=v._options.renderSideBySide.read(e);return ji(v._editors.original,v._editors.modified,t.mappings,C,b,n)})),D=(0,g.nK)((function(e){var i,t=null===(i=v._diffModel.read(e))||void 0===i?void 0:i.movedTextToCompare.read(e);if(!t)return null;_.read(e);var n=t.changes.map((function(e){return new ki(e)}));return ji(v._editors.original,v._editors.modified,n,C,b,!0)}));function N(){var e=document.createElement("div");return e.className="diagonal-fill",e}var k=v._register(new f.SL),E=(0,g.nK)((function(e){var i,t,o,r,a,s,d,u;k.clear();var c=w.read(e)||[],h=[],f=[],g=v._modifiedTopPadding.read(e);g>0&&f.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:g,showInHiddenAreas:!0,suppressMouseDown:!0});var m=v._originalTopPadding.read(e);m>0&&h.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:m,showInHiddenAreas:!0,suppressMouseDown:!0});var _=v._options.renderSideBySide.read(e),p=_||null===(i=v._editors.modified._getViewModel())||void 0===i?void 0:i.createLineBreaksComputer();if(p){var C,b=(0,n.Z)(c);try{for(b.s();!(C=b.n()).done;){var E=C.value;if(E.diff)for(var T=E.originalRange.startLineNumber;T<E.originalRange.endLineNumberExclusive;T++)null===p||void 0===p||p.addRequest(v._editors.original.getModel().getLineContent(T),null,null)}}catch(z){b.e(z)}finally{b.f()}}var R,I=null!==(t=null===p||void 0===p?void 0:p.finalize())&&void 0!==t?t:[],Z=0,x=v._editors.modified.getOption(66),P=null===(o=v._diffModel.read(e))||void 0===o?void 0:o.movedTextToCompare.read(e),O=null!==(a=null===(r=v._editors.original.getModel())||void 0===r?void 0:r.mightContainNonBasicASCII())&&void 0!==a&&a,V=null!==(d=null===(s=v._editors.original.getModel())||void 0===s?void 0:s.mightContainRTL())&&void 0!==d&&d,A=Wi.fromEditor(v._editors.modified),W=(0,n.Z)(c);try{var F=function(){var i=R.value;if(i.diff&&!_){if(!i.originalRange.isEmpty){y.read(e);var t=document.createElement("div");t.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");var o,r=new Ai(i.originalRange.mapToLineArray((function(e){return v._editors.original.getModel().tokenization.getLineTokens(e)})),i.originalRange.mapToLineArray((function(e){return I[Z++]})),O,V),a=[],s=(0,n.Z)(i.diff.innerChanges||[]);try{for(s.s();!(o=s.n()).done;){var d=o.value;a.push(new ee.$t(d.originalRange.delta(-(i.diff.original.startLineNumber-1)),Ie.className,0))}}catch(z){s.e(z)}finally{s.f()}var u=function(e,i,t,o){(0,M.N)(o,i.fontInfo);for(var r=t.length>0,a=new Pi.HT(1e4),s=0,d=0,l=[],u=0;u<e.lineTokens.length;u++){var c=u+1,h=e.lineTokens[u],f=e.lineBreakData[u],g=Oi.Kp.filter(t,c,1,Number.MAX_SAFE_INTEGER);if(f){var v,m=0,_=(0,n.Z)(f.breakOffsets);try{for(_.s();!(v=_.n()).done;){var p=v.value,y=h.sliceAndInflate(m,p,0);s=Math.max(s,Fi(d,y,Oi.Kp.extractWrapped(g,m,p),r,e.mightContainNonBasicASCII,e.mightContainRTL,i,a)),d++,m=p}}catch(z){_.e(z)}finally{_.f()}l.push(f.breakOffsets.length)}else l.push(1),s=Math.max(s,Fi(d,h,g,r,e.mightContainNonBasicASCII,e.mightContainRTL,i,a)),d++}s+=i.scrollBeyondLastColumn;var C=a.build(),b=Vi?Vi.createHTML(C):C;return o.innerHTML=b,{heightInLines:d,minWidthInPx:s*i.typicalHalfwidthCharacterWidth,viewLineCounts:l}}(r,A,a,t),c=document.createElement("div");if(c.className="inline-deleted-margin-view-zone",(0,M.N)(c,A.fontInfo),v._options.renderIndicators.read(e))for(var g=0;g<u.heightInLines;g++){var m=document.createElement("div");m.className="delete-sign ".concat(S.k.asClassName(Le)),m.setAttribute("style","position:absolute;top:".concat(g*x,"px;width:").concat(A.lineDecorationsWidth,"px;height:").concat(x,"px;right:0;")),c.appendChild(m)}var p=void 0;k.add(new xi((function(){return(0,Be.cW)(p)}),c,v._editors.modified,i.diff,v._diffEditorWidget,u.viewLineCounts,v._editors.original.getModel(),v._contextMenuService,v._clipboardService));for(var C=0;C<u.viewLineCounts.length;C++){var b=u.viewLineCounts[C];b>1&&h.push({afterLineNumber:i.originalRange.startLineNumber+C,domNode:N(),heightInPx:(b-1)*x,showInHiddenAreas:!0,suppressMouseDown:!0})}f.push({afterLineNumber:i.modifiedRange.startLineNumber-1,domNode:t,heightInPx:u.heightInLines*x,minWidthInPx:u.minWidthInPx,marginDomNode:c,setZoneId:function(e){p=e},showInHiddenAreas:!0,suppressMouseDown:!0})}var w=document.createElement("div");w.className="gutter-delete",h.push({afterLineNumber:i.originalRange.endLineNumberExclusive-1,domNode:N(),heightInPx:i.modifiedHeightInPx,marginDomNode:w,showInHiddenAreas:!0,suppressMouseDown:!0})}else{var D=i.modifiedHeightInPx-i.originalHeightInPx;if(D>0){if(null===P||void 0===P?void 0:P.lineRangeMapping.original.delta(-1).deltaLength(2).contains(i.originalRange.endLineNumberExclusive-1))return 0;h.push({afterLineNumber:i.originalRange.endLineNumberExclusive-1,domNode:N(),heightInPx:D,showInHiddenAreas:!0,suppressMouseDown:!0})}else{if(null===P||void 0===P?void 0:P.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(i.modifiedRange.endLineNumberExclusive-1))return 0;var E=void 0;i.diff&&i.diff.modified.isEmpty&&v._options.shouldRenderRevertArrows.read(e)&&(E=function(){var e=document.createElement("div");return e.className="arrow-revert-change "+S.k.asClassName(L.l.arrowRight),(0,l.$)("div",{},e)}()),f.push({afterLineNumber:i.modifiedRange.endLineNumberExclusive-1,domNode:N(),heightInPx:-D,marginDomNode:E,showInHiddenAreas:!0,suppressMouseDown:!0})}}};for(W.s();!(R=W.n()).done;)F()}catch(z){W.e(z)}finally{W.f()}var H,U=(0,n.Z)(null!==(u=D.read(e))&&void 0!==u?u:[]);try{for(U.s();!(H=U.n()).done;){var B=H.value;if((null===P||void 0===P?void 0:P.lineRangeMapping.original.intersect(B.originalRange))&&(null===P||void 0===P?void 0:P.lineRangeMapping.modified.intersect(B.modifiedRange))){var K=B.modifiedHeightInPx-B.originalHeightInPx;K>0?h.push({afterLineNumber:B.originalRange.endLineNumberExclusive-1,domNode:N(),heightInPx:K,showInHiddenAreas:!0,suppressMouseDown:!0}):f.push({afterLineNumber:B.modifiedRange.endLineNumberExclusive-1,domNode:N(),heightInPx:-K,showInHiddenAreas:!0,suppressMouseDown:!0})}}}catch(z){U.e(z)}finally{U.f()}return{orig:h,mod:f}}));v._register((0,g.gp)((function(e){var i=ri.Z.capture(v._editors.modified),t=E.read(e);m=!0,v._editors.original.changeViewZones((function(e){var i,o=(0,n.Z)(C);try{for(o.s();!(i=o.n()).done;){var r=i.value;e.removeZone(r)}}catch(u){o.e(u)}finally{o.f()}C.clear();var a,s=(0,n.Z)(t.orig);try{for(s.s();!(a=s.n()).done;){var d=a.value,l=e.addZone(d);d.setZoneId&&d.setZoneId(l),C.add(l)}}catch(u){s.e(u)}finally{s.f()}})),v._editors.modified.changeViewZones((function(e){var i,o=(0,n.Z)(b);try{for(o.s();!(i=o.n()).done;){var r=i.value;e.removeZone(r)}}catch(u){o.e(u)}finally{o.f()}b.clear();var a,s=(0,n.Z)(t.mod);try{for(s.s();!(a=s.n()).done;){var d=a.value,l=e.addZone(d);d.setZoneId&&d.setZoneId(l),b.add(l)}}catch(u){s.e(u)}finally{s.f()}})),m=!1,i.restore(v._editors.modified)}))),v._register((0,f.OF)((function(){v._editors.original.changeViewZones((function(e){var i,t=(0,n.Z)(C);try{for(t.s();!(i=t.n()).done;){var o=i.value;e.removeZone(o)}}catch(r){t.e(r)}finally{t.f()}C.clear()})),v._editors.modified.changeViewZones((function(e){var i,t=(0,n.Z)(b);try{for(t.s();!(i=t.n()).done;){var o=i.value;e.removeZone(o)}}catch(r){t.e(r)}finally{t.f()}b.clear()}))})));var T=!1;return v._register(v._editors.original.onDidScrollChange((function(e){e.scrollLeftChanged&&!T&&(T=!0,v._editors.modified.setScrollLeft(e.scrollLeft),T=!1)}))),v._register(v._editors.modified.onDidScrollChange((function(e){e.scrollLeftChanged&&!T&&(T=!0,v._editors.original.setScrollLeft(e.scrollLeft),T=!1)}))),v._originalScrollTop=(0,g.rD)(v._editors.original.onDidScrollChange,(function(){return v._editors.original.getScrollTop()})),v._modifiedScrollTop=(0,g.rD)(v._editors.modified.onDidScrollChange,(function(){return v._editors.modified.getScrollTop()})),v._register((0,g.EH)((function(e){var i=v._originalScrollTop.read(e)-(v._originalScrollOffsetAnimated.get()-v._modifiedScrollOffsetAnimated.read(e))-(v._originalTopPadding.get()-v._modifiedTopPadding.read(e));i!==v._editors.modified.getScrollTop()&&v._editors.modified.setScrollTop(i,1)}))),v._register((0,g.EH)((function(e){var i=v._modifiedScrollTop.read(e)-(v._modifiedScrollOffsetAnimated.get()-v._originalScrollOffsetAnimated.read(e))-(v._modifiedTopPadding.get()-v._originalTopPadding.read(e));i!==v._editors.original.getScrollTop()&&v._editors.original.setScrollTop(i,1)}))),v._register((0,g.EH)((function(e){var i,t=null===(i=v._diffModel.read(e))||void 0===i?void 0:i.movedTextToCompare.read(e),n=0;if(t){var o=v._editors.original.getTopForLineNumber(t.lineRangeMapping.original.startLineNumber,!0)-v._originalTopPadding.get();n=v._editors.modified.getTopForLineNumber(t.lineRangeMapping.modified.startLineNumber,!0)-v._modifiedTopPadding.get()-o}n>0?(v._modifiedTopPadding.set(0,void 0),v._originalTopPadding.set(n,void 0)):n<0?(v._modifiedTopPadding.set(-n,void 0),v._originalTopPadding.set(0,void 0)):setTimeout((function(){v._modifiedTopPadding.set(0,void 0),v._originalTopPadding.set(0,void 0)}),400),v._editors.modified.hasTextFocus()?v._originalScrollOffset.set(v._modifiedScrollOffset.get()-n,void 0,!0):v._modifiedScrollOffset.set(v._originalScrollOffset.get()+n,void 0,!0)}))),v}return(0,r.Z)(t)}(f.JT);function ji(e,i,t,o,r,a){var s=new D.H9(Qi(e,o)),d=new D.H9(Qi(i,r)),l=e.getOption(66),u=i.getOption(66),c=[],h=0,f=0;function g(e,i){for(;;){var t=s.peek(),n=d.peek();if(t&&t.lineNumber>=e&&(t=void 0),n&&n.lineNumber>=i&&(n=void 0),!t&&!n)break;var o=t?t.lineNumber-h:Number.MAX_VALUE,r=n?n.lineNumber-f:Number.MAX_VALUE;o<r?(s.dequeue(),n={lineNumber:t.lineNumber-h+f,heightInPx:0}):o>r?(d.dequeue(),t={lineNumber:n.lineNumber-f+h,heightInPx:0}):(s.dequeue(),d.dequeue()),c.push({originalRange:j.z.ofLength(t.lineNumber,1),modifiedRange:j.z.ofLength(n.lineNumber,1),originalHeightInPx:l+t.heightInPx,modifiedHeightInPx:u+n.heightInPx,diff:void 0})}}var v,m=(0,n.Z)(t);try{var _=function(){var i=v.value,t=i.lineRangeMapping;g(t.original.startLineNumber,t.modified.startLineNumber);var o=!0,r=t.modified.startLineNumber,m=t.original.startLineNumber;function _(e,t){var n,a,h,f;if(!(e<m||t<r)){if(o)o=!1;else if(e===m||t===r)return;var g=new j.z(m,e),v=new j.z(r,t);if(!g.isEmpty||!v.isEmpty){var _=null!==(a=null===(n=s.takeWhile((function(i){return i.lineNumber<e})))||void 0===n?void 0:n.reduce((function(e,i){return e+i.heightInPx}),0))&&void 0!==a?a:0,p=null!==(f=null===(h=d.takeWhile((function(e){return e.lineNumber<t})))||void 0===h?void 0:h.reduce((function(e,i){return e+i.heightInPx}),0))&&void 0!==f?f:0;c.push({originalRange:g,modifiedRange:v,originalHeightInPx:g.length*l+_,modifiedHeightInPx:v.length*u+p,diff:i.lineRangeMapping}),m=e,r=t}}}if(a){var p,y=(0,n.Z)(t.innerChanges||[]);try{for(y.s();!(p=y.n()).done;){var C=p.value;C.originalRange.startColumn>1&&C.modifiedRange.startColumn>1&&_(C.originalRange.startLineNumber,C.modifiedRange.startLineNumber),C.originalRange.endColumn<e.getModel().getLineMaxColumn(C.originalRange.endLineNumber)&&_(C.originalRange.endLineNumber,C.modifiedRange.endLineNumber)}}catch(b){y.e(b)}finally{y.f()}}_(t.original.endLineNumberExclusive,t.modified.endLineNumberExclusive),h=t.original.endLineNumberExclusive,f=t.modified.endLineNumberExclusive};for(m.s();!(v=m.n()).done;)_()}catch(p){m.e(p)}finally{m.f()}return g(Number.MAX_VALUE,Number.MAX_VALUE),c}function Qi(e,i){var t=[],o=[],r=-1!==e.getOption(144).wrappingColumn,a=e._getViewModel().coordinatesConverter,s=e.getOption(66);if(r)for(var d=1;d<=e.getModel().getLineCount();d++){var l=a.getModelLineViewLineCount(d);l>1&&o.push({lineNumber:d,heightInPx:s*(l-1)})}var u,c=(0,n.Z)(e.getWhitespaces());try{for(c.s();!(u=c.n()).done;){var h=u.value;if(!i.has(h.id)){var f=0===h.afterLineNumber?0:a.convertViewPositionToModelPosition(new q.L(h.afterLineNumber,1)).lineNumber;t.push({lineNumber:f,heightInPx:h.height})}}}catch(v){c.e(v)}finally{c.f()}var g=function(e,i,t,n){if(0===e.length)return i;if(0===i.length)return e;for(var o=[],r=0,a=0;r<e.length&&a<i.length;){var s=e[r],d=i[a],l=t(s),u=t(d);l<u?(o.push(s),r++):l>u?(o.push(d),a++):(o.push(n(s,d)),r++,a++)}for(;r<e.length;)o.push(e[r]),r++;for(;a<i.length;)o.push(i[a]),a++;return o}(t,o,(function(e){return e.lineNumber}),(function(e,i){return{lineNumber:e.lineNumber,heightInPx:e.heightInPx+i.heightInPx}}));return g}zi=Bi([Ki(5,Hi.p),Ki(6,Ui.i)],zi);var qi,Gi=t(65379),Ji=t(60038),Yi=t(92578),$i=t(43980),Xi=t(41335),et=function(e,i,t,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,i,t,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(i,t,a):o(i,t))||a);return r>3&&a&&Object.defineProperty(i,t,a),a},it=function(e,i){return function(t,n){i(t,n,e)}},tt=qi=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n,r,a,s,d,u,c){var h;(0,o.Z)(this,t),(h=i.call(this))._editors=e,h._rootElement=n,h._diffModel=r,h._rootWidth=a,h._rootHeight=s,h._modifiedEditorLayoutInfo=d,h._options=u,h._themeService=c;var f=(0,g.rD)(h._themeService.onDidColorThemeChange,(function(){return h._themeService.getColorTheme()})),v=(0,g.nK)((function(e){var i=f.read(e);return{insertColor:i.getColor($i.P6Y)||(i.getColor($i.ypS)||$i.CzK).transparent(2),removeColor:i.getColor($i.F9q)||(i.getColor($i.P4M)||$i.keg).transparent(2)}})),m=(0,g.rD)(h._editors.modified.onDidScrollChange,(function(){return h._editors.modified.getScrollTop()})),_=(0,g.rD)(h._editors.modified.onDidScrollChange,(function(){return h._editors.modified.getScrollHeight()}));return h._register((0,g.gp)((function(e,i){if(h._options.renderOverviewRuler.read(e)){var t=(0,Gi.X)(document.createElement("div"));t.setClassName("diffViewport"),t.setPosition("absolute");var n=(0,l.h)("div.diffOverview",{style:{position:"absolute",top:"0px",width:qi.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;i.add(P(n,t.domNode)),i.add((0,l.addStandardDisposableListener)(n,l.EventType.POINTER_DOWN,(function(e){h._editors.modified.delegateVerticalScrollbarPointerDown(e)}))),i.add((0,l.addDisposableListener)(n,l.EventType.MOUSE_WHEEL,(function(e){h._editors.modified.delegateScrollFromMouseWheelEvent(e)}),{passive:!1})),i.add(P(h._rootElement,n)),i.add((0,g.gp)((function(e,i){var o=h._diffModel.read(e),r=h._editors.original.createOverviewRuler("original diffOverviewRuler");r&&(i.add(r),i.add(P(n,r.getDomNode())));var a=h._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(a&&(i.add(a),i.add(P(n,a.getDomNode()))),r&&a){var s=(0,g.aq)("viewZoneChanged",h._editors.original.onDidChangeViewZones),d=(0,g.aq)("viewZoneChanged",h._editors.modified.onDidChangeViewZones),l=(0,g.aq)("hiddenRangesChanged",h._editors.original.onDidChangeHiddenAreas),u=(0,g.aq)("hiddenRangesChanged",h._editors.modified.onDidChangeHiddenAreas);i.add((0,g.EH)((function(e){var i;s.read(e),d.read(e),l.read(e),u.read(e);var t=v.read(e),n=null===(i=null===o||void 0===o?void 0:o.diff.read(e))||void 0===i?void 0:i.mappings;function c(e,i,t){var n=t._getViewModel();return n?e.filter((function(e){return e.length>0})).map((function(e){var t=n.coordinatesConverter.convertModelPositionToViewPosition(new q.L(e.startLineNumber,1)),o=n.coordinatesConverter.convertModelPositionToViewPosition(new q.L(e.endLineNumberExclusive,1)),r=o.lineNumber-t.lineNumber;return new Yi.EY(t.lineNumber,o.lineNumber,r,i.toString())})):[]}var f=c((n||[]).map((function(e){return e.lineRangeMapping.original})),t.removeColor,h._editors.original),g=c((n||[]).map((function(e){return e.lineRangeMapping.modified})),t.insertColor,h._editors.modified);null===r||void 0===r||r.setZones(f),null===a||void 0===a||a.setZones(g)}))),i.add((0,g.EH)((function(e){var i=h._rootHeight.read(e),o=h._rootWidth.read(e),s=h._modifiedEditorLayoutInfo.read(e);if(s){var d=qi.ENTIRE_DIFF_OVERVIEW_WIDTH-2*qi.ONE_OVERVIEW_WIDTH;r.setLayout({top:0,height:i,right:d+qi.ONE_OVERVIEW_WIDTH,width:qi.ONE_OVERVIEW_WIDTH}),a.setLayout({top:0,height:i,right:0,width:qi.ONE_OVERVIEW_WIDTH});var l=m.read(e),u=_.read(e),c=h._editors.modified.getOption(102),f=new Ji.M(c.verticalHasArrows?c.arrowSize:0,c.verticalScrollbarSize,0,s.height,u,l);t.setTop(f.getSliderPosition()),t.setHeight(f.getSliderSize())}else t.setTop(0),t.setHeight(0);n.style.height=i+"px",n.style.left=o-qi.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",t.setWidth(qi.ENTIRE_DIFF_OVERVIEW_WIDTH)})))}})))}}))),h}return(0,r.Z)(t)}(f.JT);tt.ONE_OVERVIEW_WIDTH=15,tt.ENTIRE_DIFF_OVERVIEW_WIDTH=2*qi.ONE_OVERVIEW_WIDTH,tt=qi=et([it(7,Xi.XE)],tt);var nt=t(43886),ot=t(98926),rt=t(49198),at=t(8022),st=t(26746),dt=t(28322),lt=((0,$i.P6G)("diffEditor.move.border",{dark:"#8b8b8b9c",light:"#8b8b8b9c",hcDark:"#8b8b8b9c",hcLight:"#8b8b8b9c"},(0,ie.NC)("diffEditor.move.border","The border color for text that got moved in the diff editor.")),(0,$i.P6G)("diffEditor.moveActive.border",{dark:"#FFA500",light:"#FFA500",hcDark:"#FFA500",hcLight:"#FFA500"},(0,ie.NC)("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor.")),function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(){var e;return(0,o.Z)(this,t),(e=i.apply(this,arguments))._id=++t.idCounter,e._onDidDispose=e._register(new h.Q5),e.onDidDispose=e._onDidDispose.event,e}return(0,r.Z)(t,[{key:"getId",value:function(){return this.getEditorType()+":v2:"+this._id}},{key:"getVisibleColumnFromPosition",value:function(e){return this._targetEditor.getVisibleColumnFromPosition(e)}},{key:"getPosition",value:function(){return this._targetEditor.getPosition()}},{key:"setPosition",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._targetEditor.setPosition(e,i)}},{key:"revealLine",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLine(e,i)}},{key:"revealLineInCenter",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLineInCenter(e,i)}},{key:"revealLineInCenterIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLineInCenterIfOutsideViewport(e,i)}},{key:"revealLineNearTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLineNearTop(e,i)}},{key:"revealPosition",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPosition(e,i)}},{key:"revealPositionInCenter",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPositionInCenter(e,i)}},{key:"revealPositionInCenterIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPositionInCenterIfOutsideViewport(e,i)}},{key:"revealPositionNearTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPositionNearTop(e,i)}},{key:"getSelection",value:function(){return this._targetEditor.getSelection()}},{key:"getSelections",value:function(){return this._targetEditor.getSelections()}},{key:"setSelection",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._targetEditor.setSelection(e,i)}},{key:"setSelections",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._targetEditor.setSelections(e,i)}},{key:"revealLines",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLines(e,i,t)}},{key:"revealLinesInCenter",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLinesInCenter(e,i,t)}},{key:"revealLinesInCenterIfOutsideViewport",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLinesInCenterIfOutsideViewport(e,i,t)}},{key:"revealLinesNearTop",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLinesNearTop(e,i,t)}},{key:"revealRange",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._targetEditor.revealRange(e,i,t,n)}},{key:"revealRangeInCenter",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeInCenter(e,i)}},{key:"revealRangeInCenterIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeInCenterIfOutsideViewport(e,i)}},{key:"revealRangeNearTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeNearTop(e,i)}},{key:"revealRangeNearTopIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeNearTopIfOutsideViewport(e,i)}},{key:"revealRangeAtTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeAtTop(e,i)}},{key:"getSupportedActions",value:function(){return this._targetEditor.getSupportedActions()}},{key:"focus",value:function(){this._targetEditor.focus()}},{key:"trigger",value:function(e,i,t){this._targetEditor.trigger(e,i,t)}},{key:"createDecorationsCollection",value:function(e){return this._targetEditor.createDecorationsCollection(e)}},{key:"changeDecorations",value:function(e){return this._targetEditor.changeDecorations(e)}}]),t}(f.JT));lt.idCounter=0;var ut=t(75256),ct=function(e,i,t,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,i,t,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(i,t,a):o(i,t))||a);return r>3&&a&&Object.defineProperty(i,t,a),a},ht=function(e,i){return function(t,n){i(t,n,e)}},ft=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n,r,a,s,d,l){var u;return(0,o.Z)(this,t),(u=i.call(this)).originalEditorElement=e,u.modifiedEditorElement=n,u._options=r,u._createInnerEditor=s,u._instantiationService=d,u._keybindingService=l,u._onDidContentSizeChange=u._register(new h.Q5),u.original=u._register(u._createLeftHandSideEditor(r.editorOptions.get(),a.originalEditor||{})),u.modified=u._register(u._createRightHandSideEditor(r.editorOptions.get(),a.modifiedEditor||{})),u.modifiedModel=(0,g.rD)(u.modified.onDidChangeModel,(function(){return u.modified.getModel()})),u._register((0,g.nJ)({createEmptyChangeSummary:function(){return{}},handleChange:function(e,i){return e.didChange(r.editorOptions)&&Object.assign(i,e.change.changedOptions),!0}},(function(e,i){r.editorOptions.read(e),u._options.renderSideBySide.read(e),u.modified.updateOptions(u._adjustOptionsForRightHandSide(e,i)),u.original.updateOptions(u._adjustOptionsForLeftHandSide(e,i))}))),u}return(0,r.Z)(t,[{key:"_createLeftHandSideEditor",value:function(e,i){var t=this._adjustOptionsForLeftHandSide(void 0,e),n=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,t,i);return n.setContextValue("isInDiffLeftEditor",!0),n}},{key:"_createRightHandSideEditor",value:function(e,i){var t=this._adjustOptionsForRightHandSide(void 0,e),n=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,t,i);return n.setContextValue("isInDiffRightEditor",!0),n}},{key:"_constructInnerEditor",value:function(e,i,t,n){var o=this,r=this._createInnerEditor(e,i,t,n);return this._register(r.onDidContentSizeChange((function(e){var i=o.original.getContentWidth()+o.modified.getContentWidth()+tt.ENTIRE_DIFF_OVERVIEW_WIDTH,t=Math.max(o.modified.getContentHeight(),o.original.getContentHeight());o._onDidContentSizeChange.fire({contentHeight:t,contentWidth:i,contentHeightChanged:e.contentHeightChanged,contentWidthChanged:e.contentWidthChanged})}))),r}},{key:"_adjustOptionsForLeftHandSide",value:function(e,i){var t=this._adjustOptionsForSubEditor(i);return this._options.renderSideBySide.get()?(t.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},t.wordWrapOverride1=this._options.diffWordWrap.get()):(t.wordWrapOverride1="off",t.wordWrapOverride2="off",t.stickyScroll={enabled:!1},t.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),i.originalAriaLabel&&(t.ariaLabel=i.originalAriaLabel),t.ariaLabel=this._updateAriaLabel(t.ariaLabel),t.readOnly=!this._options.originalEditable.get(),t.dropIntoEditor={enabled:!t.readOnly},t.extraEditorClassName="original-in-monaco-diff-editor",t}},{key:"_adjustOptionsForRightHandSide",value:function(e,i){var t=this._adjustOptionsForSubEditor(i);return i.modifiedAriaLabel&&(t.ariaLabel=i.modifiedAriaLabel),t.ariaLabel=this._updateAriaLabel(t.ariaLabel),t.wordWrapOverride1=this._options.diffWordWrap.get(),t.revealHorizontalRightPadding=z.BH.revealHorizontalRightPadding.defaultValue+tt.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",t}},{key:"_adjustOptionsForSubEditor",value:function(e){var i=Object.assign(Object.assign({},e),{dimension:{height:0,width:0}});return i.inDiffEditor=!0,i.automaticLayout=!1,i.scrollbar=Object.assign({},i.scrollbar||{}),i.scrollbar.vertical="visible",i.folding=!1,i.codeLens=this._options.diffCodeLens.get(),i.fixedOverflowWidgets=!0,i.minimap=Object.assign({},i.minimap||{}),i.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?i.stickyScroll={enabled:!1}:i.stickyScroll=this._options.editorOptions.get().stickyScroll,i}},{key:"_updateAriaLabel",value:function(e){var i;e||(e="");var t=(0,ie.NC)("diff-aria-navigation-tip"," use {0} to open the accessibility help.",null===(i=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))||void 0===i?void 0:i.getAriaLabel());return this._options.accessibilityVerbose.get()?e+t:e?e.replaceAll(t,""):""}}]),t}(f.JT);ft=ct([ht(5,ne.TG),ht(6,ut.d)],ft);var gt=t(3945),vt=function(){function e(i,t){var n=this;(0,o.Z)(this,e),this.diffEditorWidth=t,this.couldShowInlineViewBecauseOfSize=(0,g.nK)(this,(function(e){return n._options.read(e).renderSideBySide&&n.diffEditorWidth.read(e)<=n._options.read(e).renderSideBySideInlineBreakpoint})),this.renderOverviewRuler=(0,g.nK)(this,(function(e){return n._options.read(e).renderOverviewRuler})),this.renderSideBySide=(0,g.nK)(this,(function(e){return n._options.read(e).renderSideBySide&&!(n._options.read(e).useInlineViewWhenSpaceIsLimited&&n.couldShowInlineViewBecauseOfSize.read(e))})),this.readOnly=(0,g.nK)(this,(function(e){return n._options.read(e).readOnly})),this.shouldRenderRevertArrows=(0,g.nK)(this,(function(e){return!!n._options.read(e).renderMarginRevertIcon&&(!!n.renderSideBySide.read(e)&&!n.readOnly.read(e))})),this.renderIndicators=(0,g.nK)(this,(function(e){return n._options.read(e).renderIndicators})),this.enableSplitViewResizing=(0,g.nK)(this,(function(e){return n._options.read(e).enableSplitViewResizing})),this.splitViewDefaultRatio=(0,g.nK)(this,(function(e){return n._options.read(e).splitViewDefaultRatio})),this.ignoreTrimWhitespace=(0,g.nK)(this,(function(e){return n._options.read(e).ignoreTrimWhitespace})),this.maxComputationTimeMs=(0,g.nK)(this,(function(e){return n._options.read(e).maxComputationTime})),this.showMoves=(0,g.nK)(this,(function(e){return n._options.read(e).experimental.showMoves&&n.renderSideBySide.read(e)})),this.isInEmbeddedEditor=(0,g.nK)(this,(function(e){return n._options.read(e).isInEmbeddedEditor})),this.diffWordWrap=(0,g.nK)(this,(function(e){return n._options.read(e).diffWordWrap})),this.originalEditable=(0,g.nK)(this,(function(e){return n._options.read(e).originalEditable})),this.diffCodeLens=(0,g.nK)(this,(function(e){return n._options.read(e).diffCodeLens})),this.accessibilityVerbose=(0,g.nK)(this,(function(e){return n._options.read(e).accessibilityVerbose})),this.diffAlgorithm=(0,g.nK)(this,(function(e){return n._options.read(e).diffAlgorithm})),this.showEmptyDecorations=(0,g.nK)(this,(function(e){return n._options.read(e).experimental.showEmptyDecorations})),this.onlyShowAccessibleDiffViewer=(0,g.nK)(this,(function(e){return n._options.read(e).onlyShowAccessibleDiffViewer})),this.hideUnchangedRegions=(0,g.nK)(this,(function(e){return n._options.read(e).hideUnchangedRegions.enabled})),this.hideUnchangedRegionsRevealLineCount=(0,g.nK)(this,(function(e){return n._options.read(e).hideUnchangedRegions.revealLineCount})),this.hideUnchangedRegionsContextLineCount=(0,g.nK)(this,(function(e){return n._options.read(e).hideUnchangedRegions.contextLineCount})),this.hideUnchangedRegionsMinimumLineCount=(0,g.nK)(this,(function(e){return n._options.read(e).hideUnchangedRegions.minimumLineCount}));var r=Object.assign(Object.assign({},i),mt(i,gt.k));this._options=(0,g.uh)(this,r)}return(0,r.Z)(e,[{key:"editorOptions",get:function(){return this._options}},{key:"updateOptions",value:function(e){var i=mt(e,this._options.get()),t=Object.assign(Object.assign(Object.assign({},this._options.get()),e),i);this._options.set(t,void 0,{changedOptions:e})}}]),e}();function mt(e,i){var t,n,o,r,a,s,d,l;return{enableSplitViewResizing:(0,z.O7)(e.enableSplitViewResizing,i.enableSplitViewResizing),splitViewDefaultRatio:(0,z.L_)(e.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:(0,z.O7)(e.renderSideBySide,i.renderSideBySide),renderMarginRevertIcon:(0,z.O7)(e.renderMarginRevertIcon,i.renderMarginRevertIcon),maxComputationTime:(0,z.Zc)(e.maxComputationTime,i.maxComputationTime,0,1073741824),maxFileSize:(0,z.Zc)(e.maxFileSize,i.maxFileSize,0,1073741824),ignoreTrimWhitespace:(0,z.O7)(e.ignoreTrimWhitespace,i.ignoreTrimWhitespace),renderIndicators:(0,z.O7)(e.renderIndicators,i.renderIndicators),originalEditable:(0,z.O7)(e.originalEditable,i.originalEditable),diffCodeLens:(0,z.O7)(e.diffCodeLens,i.diffCodeLens),renderOverviewRuler:(0,z.O7)(e.renderOverviewRuler,i.renderOverviewRuler),diffWordWrap:(0,z.NY)(e.diffWordWrap,i.diffWordWrap,["off","on","inherit"]),diffAlgorithm:(0,z.NY)(e.diffAlgorithm,i.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:(0,z.O7)(e.accessibilityVerbose,i.accessibilityVerbose),experimental:{showMoves:(0,z.O7)(null===(t=e.experimental)||void 0===t?void 0:t.showMoves,i.experimental.showMoves),showEmptyDecorations:(0,z.O7)(null===(n=e.experimental)||void 0===n?void 0:n.showEmptyDecorations,i.experimental.showEmptyDecorations)},hideUnchangedRegions:{enabled:(0,z.O7)(null!==(r=null===(o=e.hideUnchangedRegions)||void 0===o?void 0:o.enabled)&&void 0!==r?r:null===(a=e.experimental)||void 0===a?void 0:a.collapseUnchangedRegions,i.hideUnchangedRegions.enabled),contextLineCount:(0,z.Zc)(null===(s=e.hideUnchangedRegions)||void 0===s?void 0:s.contextLineCount,i.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:(0,z.Zc)(null===(d=e.hideUnchangedRegions)||void 0===d?void 0:d.minimumLineCount,i.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:(0,z.Zc)(null===(l=e.hideUnchangedRegions)||void 0===l?void 0:l.revealLineCount,i.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:(0,z.O7)(e.isInEmbeddedEditor,i.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:(0,z.O7)(e.onlyShowAccessibleDiffViewer,i.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:(0,z.Zc)(e.renderSideBySideInlineBreakpoint,i.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:(0,z.O7)(e.useInlineViewWhenSpaceIsLimited,i.useInlineViewWhenSpaceIsLimited)}}var _t=function(e,i,t,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,i,t,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(i,t,a):o(i,t))||a);return r>3&&a&&Object.defineProperty(i,t,a),a},pt=function(e,i){return function(t,n){i(t,n,e)}},yt=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n,r,s,d,u,c,v){var m,_;(0,o.Z)(this,t),(m=i.call(this))._domElement=e,m._parentContextKeyService=s,m._parentInstantiationService=d,m._audioCueService=c,m._editorProgressService=v,m.elements=(0,l.h)("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[(0,l.h)("div.noModificationsOverlay@overlay",{style:{position:"absolute",height:"100%",visibility:"hidden"}},[(0,l.$)("span",{},"No Changes")]),(0,l.h)("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),(0,l.h)("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),(0,l.h)("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),m._diffModel=m._register((0,g.DN)("diffModel",void 0)),m.onDidChangeModel=h.ju.fromObservableLight(m._diffModel),m._contextKeyService=m._register(m._parentContextKeyService.createScoped(m._domElement)),m._instantiationService=m._parentInstantiationService.createChild(new st.y([at.i6,m._contextKeyService])),m._boundarySashes=(0,g.uh)((0,a.Z)(m),void 0),m._accessibleDiffViewerShouldBeVisible=(0,g.uh)((0,a.Z)(m),!1),m._accessibleDiffViewerVisible=(0,g.nK)((0,a.Z)(m),(function(e){return!!m._options.onlyShowAccessibleDiffViewer.read(e)||m._accessibleDiffViewerShouldBeVisible.read(e)})),m.movedBlocksLinesPart=(0,g.uh)((0,a.Z)(m),void 0),m._layoutInfo=(0,g.nK)((0,a.Z)(m),(function(e){var i,t,n,o=m._rootSizeObserver.width.read(e),r=m._rootSizeObserver.height.read(e),a=null===(i=m._sash.read(e))||void 0===i?void 0:i.sashLeft.read(e),s=null!==a&&void 0!==a?a:Math.max(5,m._editors.original.getLayoutInfo().decorationsLeft),d=o-s-(m._options.renderOverviewRuler.read(e)?tt.ENTIRE_DIFF_OVERVIEW_WIDTH:0),l=s-(null!==(n=null===(t=m.movedBlocksLinesPart.read(e))||void 0===t?void 0:t.width.read(e))&&void 0!==n?n:0);return m.elements.original.style.width=l+"px",m.elements.original.style.left="0px",m.elements.modified.style.width=d+"px",m.elements.modified.style.left=s+"px",m._editors.original.layout({width:l,height:r}),m._editors.modified.layout({width:d,height:r}),{modifiedEditor:m._editors.modified.getLayoutInfo(),originalEditor:m._editors.original.getLayoutInfo()}})),m._diffValue=m._diffModel.map((function(e,i){return null===e||void 0===e?void 0:e.diff.read(i)})),m.onDidUpdateDiff=h.ju.fromObservableLight(m._diffValue),u.willCreateDiffEditor(),m._contextKeyService.createKey("isInDiffEditor",!0),m._domElement.appendChild(m.elements.root),m._register((0,f.OF)((function(){return m._domElement.removeChild(m.elements.root)}))),m._rootSizeObserver=m._register(new O(m.elements.root,n.dimension)),m._rootSizeObserver.setAutomaticLayout(null!==(_=n.automaticLayout)&&void 0!==_&&_),m._options=new vt(n,m._rootSizeObserver.width),m._contextKeyService.createKey(ot.u.isEmbeddedDiffEditor.key,!1);var p=ot.u.isEmbeddedDiffEditor.bindTo(m._contextKeyService);m._register((0,g.EH)((function(e){p.set(m._options.isInEmbeddedEditor.read(e))})));var y=ot.u.comparingMovedCode.bindTo(m._contextKeyService);m._register((0,g.EH)((function(e){var i;y.set(!!(null===(i=m._diffModel.read(e))||void 0===i?void 0:i.movedTextToCompare.read(e)))})));var C=ot.u.diffEditorRenderSideBySideInlineBreakpointReached.bindTo(m._contextKeyService);m._register((0,g.EH)((function(e){C.set(m._options.couldShowInlineViewBecauseOfSize.read(e))}))),m._editors=m._register(m._instantiationService.createInstance(ft,m.elements.original,m.elements.modified,m._options,r,(function(e,i,t,n){return m._createInnerEditor(e,i,t,n)}))),m._sash=(0,g.Be)((0,a.Z)(m),(function(e,i){var t=m._options.renderSideBySide.read(e);if(m.elements.root.classList.toggle("side-by-side",t),t){var n=i.add(new He(m._options,m.elements.root,{height:m._rootSizeObserver.height,width:m._rootSizeObserver.width.map((function(e,i){return e-(m._options.renderOverviewRuler.read(i)?tt.ENTIRE_DIFF_OVERVIEW_WIDTH:0)}))}));return i.add((0,g.EH)((function(e){var i=m._boundarySashes.read(e);i&&n.setBoundarySashes(i)}))),n}})),m._register((0,g.jx)(m._sash)),m._register((0,g.gp)((function(e,i){m.unchangedRangesFeature=i.add(m._instantiationService.createInstance(U(ei,e),m._editors,m._diffModel,m._options))}))),m._register((0,g.gp)((function(e,i){i.add(new(U(We,e))(m._editors,m._diffModel,m._options))}))),m._register((0,g.gp)((function(e,i){i.add(m._instantiationService.createInstance(U(zi,e),m._editors,m._diffModel,m._options,(0,a.Z)(m),(function(){return m.unchangedRangesFeature.isUpdatingViewZones})))}))),m._register((0,g.gp)((function(e,i){i.add(m._instantiationService.createInstance(U(tt,e),m._editors,m.elements.root,m._diffModel,m._rootSizeObserver.width,m._rootSizeObserver.height,m._layoutInfo.map((function(e){return e.modifiedEditor})),m._options))}))),m._register((0,g.gp)((function(e,i){m._accessibleDiffViewer=i.add(m._register(m._instantiationService.createInstance(U(ce,e),m.elements.accessibleDiffViewer,m._accessibleDiffViewerVisible,(function(e,i){return m._accessibleDiffViewerShouldBeVisible.set(e,i)}),m._options.onlyShowAccessibleDiffViewer.map((function(e){return!e})),m._rootSizeObserver.width,m._rootSizeObserver.height,m._diffModel.map((function(e,i){var t;return null===(t=null===e||void 0===e?void 0:e.diff.read(i))||void 0===t?void 0:t.mappings.map((function(e){return e.lineRangeMapping}))})),m._editors)))})));var b=m._accessibleDiffViewerVisible.map((function(e){return e?"hidden":"visible"}));m._register(H(m.elements.modified,{visibility:b})),m._register(H(m.elements.original,{visibility:b})),m._createDiffEditorContributions(),u.addDiffEditor((0,a.Z)(m)),m._register((0,g.jx)(m._layoutInfo)),m._register((0,g.gp)((function(e,i){m.movedBlocksLinesPart.set(i.add(new(U(Oe,e))(m.elements.root,m._diffModel,m._layoutInfo.map((function(e){return e.originalEditor})),m._layoutInfo.map((function(e){return e.modifiedEditor})),m._editors)),void 0)}))),m._register(H(m.elements.overlay,{width:m._layoutInfo.map((function(e,i){return e.originalEditor.width+(m._options.renderSideBySide.read(i)?0:e.modifiedEditor.width)})),visibility:(0,g.nK)((function(e){var i,t;return m._options.hideUnchangedRegions.read(e)&&0===(null===(t=null===(i=m._diffModel.read(e))||void 0===i?void 0:i.diff.read(e))||void 0===t?void 0:t.mappings.length)?"visible":"hidden"}))})),m._register(m._editors.modified.onMouseDown((function(e){var i,t;if(!e.event.rightButton&&e.target.position&&(null===(i=e.target.element)||void 0===i?void 0:i.className.includes("arrow-revert-change"))){var n=e.target.position.lineNumber,o=e.target,r=m._diffModel.get();if(!r)return;var a=null===(t=r.diff.get())||void 0===t?void 0:t.mappings;if(!a)return;var s=a.find((function(e){return(null===o||void 0===o?void 0:o.detail.afterLineNumber)===e.lineRangeMapping.modified.startLineNumber-1||e.lineRangeMapping.modified.startLineNumber===n}));if(!s)return;m.revert(s.lineRangeMapping),e.event.stopPropagation()}}))),m._register(h.ju.runAndSubscribe(m._editors.modified.onDidChangeCursorPosition,(function(e){var i,t;if(3===(null===e||void 0===e?void 0:e.reason)){var n=null===(t=null===(i=m._diffModel.get())||void 0===i?void 0:i.diff.get())||void 0===t?void 0:t.mappings.find((function(i){return i.lineRangeMapping.modified.contains(e.position.lineNumber)}));(null===n||void 0===n?void 0:n.lineRangeMapping.modified.isEmpty)?m._audioCueService.playAudioCue(te.y$.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):(null===n||void 0===n?void 0:n.lineRangeMapping.original.isEmpty)?m._audioCueService.playAudioCue(te.y$.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):n&&m._audioCueService.playAudioCue(te.y$.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}})));var w=m._diffModel.map((function(e,i){return null===e||void 0===e?void 0:e.isDiffUpToDate.read(i)}));return m._register((0,g.gp)((function(e,i){if(!1===w.read(e)){var t=m._editorProgressService.show(!0,1e3);i.add((0,f.OF)((function(){return t.done()})))}}))),m}return(0,r.Z)(t,[{key:"_createInnerEditor",value:function(e,i,t,n){return e.createInstance(_.Gm,i,t,n)}},{key:"_createDiffEditorContributions",value:function(){var e,i=v.Uc.getDiffEditorContributions(),t=(0,n.Z)(i);try{for(t.s();!(e=t.n()).done;){var o=e.value;try{this._register(this._instantiationService.createInstance(o.ctor,this))}catch(r){(0,c.dL)(r)}}}catch(r){t.e(r)}finally{t.f()}}},{key:"_targetEditor",get:function(){return this._editors.modified}},{key:"getEditorType",value:function(){return nt.g.IDiffEditor}},{key:"layout",value:function(e){this._rootSizeObserver.observe(e)}},{key:"hasTextFocus",value:function(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}},{key:"saveViewState",value:function(){var e;return{original:this._editors.original.saveViewState(),modified:this._editors.modified.saveViewState(),modelState:null===(e=this._diffModel.get())||void 0===e?void 0:e.serializeState()}}},{key:"restoreViewState",value:function(e){var i;if(e&&e.original&&e.modified){var t=e;this._editors.original.restoreViewState(t.original),this._editors.modified.restoreViewState(t.modified),t.modelState&&(null===(i=this._diffModel.get())||void 0===i||i.restoreSerializedState(t.modelState))}}},{key:"createViewModel",value:function(e){return this._instantiationService.createInstance(Si,e,this._options,this)}},{key:"getModel",value:function(){var e,i;return null!==(i=null===(e=this._diffModel.get())||void 0===e?void 0:e.model)&&void 0!==i?i:null}},{key:"setModel",value:function(e){var i=this;!e&&this._diffModel.get()&&this._accessibleDiffViewer.close();var t=e?"model"in e?e:this.createViewModel(e):void 0;this._editors.original.setModel(t?t.model.original:null),this._editors.modified.setModel(t?t.model.modified:null),(0,g.PS)((function(e){i._diffModel.set(t,e)}))}},{key:"updateOptions",value:function(e){this._options.updateOptions(e)}},{key:"getContainerDomNode",value:function(){return this._domElement}},{key:"getOriginalEditor",value:function(){return this._editors.original}},{key:"getModifiedEditor",value:function(){return this._editors.modified}},{key:"getLineChanges",value:function(){var e,i=null===(e=this._diffModel.get())||void 0===e?void 0:e.diff.get();return i?i.mappings.map((function(e){var i,t,n,o,r=e.lineRangeMapping,a=r.innerChanges;return r.original.isEmpty?(i=r.original.startLineNumber-1,t=0,a=void 0):(i=r.original.startLineNumber,t=r.original.endLineNumberExclusive-1),r.modified.isEmpty?(n=r.modified.startLineNumber-1,o=0,a=void 0):(n=r.modified.startLineNumber,o=r.modified.endLineNumberExclusive-1),{originalStartLineNumber:i,originalEndLineNumber:t,modifiedStartLineNumber:n,modifiedEndLineNumber:o,charChanges:null===a||void 0===a?void 0:a.map((function(e){return{originalStartLineNumber:e.originalRange.startLineNumber,originalStartColumn:e.originalRange.startColumn,originalEndLineNumber:e.originalRange.endLineNumber,originalEndColumn:e.originalRange.endColumn,modifiedStartLineNumber:e.modifiedRange.startLineNumber,modifiedStartColumn:e.modifiedRange.startColumn,modifiedEndLineNumber:e.modifiedRange.endLineNumber,modifiedEndColumn:e.modifiedRange.endColumn}}))}})):null}},{key:"revert",value:function(e){var i,t=null===(i=this._diffModel.get())||void 0===i?void 0:i.model;if(t){var n=e.innerChanges?e.innerChanges.map((function(e){return{range:e.modifiedRange,text:t.original.getValueInRange(e.originalRange)}})):[{range:e.modified.toExclusiveRange(),text:t.original.getValueInRange(e.original.toExclusiveRange())}];this._editors.modified.executeEdits("diffEditor",n)}}},{key:"accessibleDiffViewerNext",value:function(){this._accessibleDiffViewer.next()}},{key:"accessibleDiffViewerPrev",value:function(){this._accessibleDiffViewer.prev()}},{key:"mapToOtherSide",value:function(){var e,i,t,n=this._editors.modified.hasWidgetFocus(),o=n?this._editors.modified:this._editors.original,r=n?this._editors.original:this._editors.modified,a=o.getSelection();if(a){var s=null===(i=null===(e=this._diffModel.get())||void 0===e?void 0:e.diff.get())||void 0===i?void 0:i.mappings.map((function(e){return n?e.lineRangeMapping.flip():e.lineRangeMapping}));if(s){var d=Ct(a.getStartPosition(),s),l=Ct(a.getEndPosition(),s);t=G.e.plusRange(d,l)}}return{destination:r,destinationSelection:t}}},{key:"switchSide",value:function(){var e=this.mapToOtherSide(),i=e.destination,t=e.destinationSelection;i.focus(),t&&i.setSelection(t)}},{key:"exitCompareMove",value:function(){var e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}},{key:"collapseAllUnchangedRegions",value:function(){var e,i=null===(e=this._diffModel.get())||void 0===e?void 0:e.unchangedRegions.get();i&&(0,g.PS)((function(e){var t,o=(0,n.Z)(i);try{for(o.s();!(t=o.n()).done;){t.value.collapseAll(e)}}catch(r){o.e(r)}finally{o.f()}}))}},{key:"showAllUnchangedRegions",value:function(){var e,i=null===(e=this._diffModel.get())||void 0===e?void 0:e.unchangedRegions.get();i&&(0,g.PS)((function(e){var t,o=(0,n.Z)(i);try{for(o.s();!(t=o.n()).done;){t.value.showAll(e)}}catch(r){o.e(r)}finally{o.f()}}))}}]),t}(lt);function Ct(e,i){var t=(0,u.dF)(i,(function(i){return i.original.startLineNumber<=e.lineNumber}));if(!t)return G.e.fromPositions(e);if(t.original.endLineNumberExclusive<=e.lineNumber){var n=e.lineNumber-t.original.endLineNumberExclusive+t.modified.endLineNumberExclusive;return G.e.fromPositions(new q.L(n,e.column))}if(!t.innerChanges)return G.e.fromPositions(new q.L(t.modified.startLineNumber,1));var o=(0,u.dF)(t.innerChanges,(function(i){return i.originalRange.getStartPosition().isBeforeOrEqual(e)}));if(!o){var r=e.lineNumber-t.original.startLineNumber+t.modified.startLineNumber;return G.e.fromPositions(new q.L(r,e.column))}if(o.originalRange.containsPosition(e))return o.modifiedRange;var a,s,d,l,c=(d=o.originalRange.getEndPosition(),l=e,d.lineNumber===l.lineNumber?new rt.OE(0,l.column-d.column):new rt.OE(l.lineNumber-d.lineNumber,l.column-1));return G.e.fromPositions((a=o.modifiedRange.getEndPosition(),0===(s=c).lineCount?new q.L(a.lineNumber,a.column+s.columnCount):new q.L(a.lineNumber+s.lineCount,s.columnCount+1)))}yt=_t([pt(3,at.i6),pt(4,ne.TG),pt(5,m.$),pt(6,te.e7),pt(7,dt.ek)],yt)},4391:function(e,i,t){t.d(i,{H:function(){return D}});var n=t(15671),o=t(43144),r=t(97326),a=t(60136),s=t(27277),d=t(11752),l=t(61120),u=t(28751),c=t(76257),h=t(80705),f=t(19536),g=t(65441),v=t(93897),m=t(99740),_=t(8022),p=t(64606),y=t(49431),C=t(41335),b=function(e,i,t,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,i,t,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(i,t,a):o(i,t))||a);return r>3&&a&&Object.defineProperty(i,t,a),a},w=function(e,i){return function(t,n){i(t,n,e)}},D=function(e){(0,a.Z)(t,e);var i=(0,s.Z)(t);function t(e,o,a,s,u,c,h,f,g,v,m,_,p){var y,C;return(0,n.Z)(this,t),(C=i.call(this,e,Object.assign(Object.assign({},s.getRawOptions()),{overflowWidgetsDomNode:s.getOverflowWidgetsDomNode()}),a,u,c,h,f,g,v,m,_,p))._parentEditor=s,C._overwriteOptions=o,(0,d.Z)((y=(0,r.Z)(C),(0,l.Z)(t.prototype)),"updateOptions",y).call(y,C._overwriteOptions),C._register(s.onDidChangeConfiguration((function(e){return C._onParentConfigurationChanged(e)}))),C}return(0,o.Z)(t,[{key:"getParentEditor",value:function(){return this._parentEditor}},{key:"_onParentConfigurationChanged",value:function(e){(0,d.Z)((0,l.Z)(t.prototype),"updateOptions",this).call(this,this._parentEditor.getRawOptions()),(0,d.Z)((0,l.Z)(t.prototype),"updateOptions",this).call(this,this._overwriteOptions)}},{key:"updateOptions",value:function(e){u.jB(this._overwriteOptions,e,!0),(0,d.Z)((0,l.Z)(t.prototype),"updateOptions",this).call(this,this._overwriteOptions)}}]),t}(h.Gm);D=b([w(4,p.TG),w(5,c.$),w(6,m.H),w(7,_.i6),w(8,C.XE),w(9,y.lT),w(10,v.F),w(11,f.c_),w(12,g.p)],D)},18424:function(e,i,t){t.d(i,{OY:function(){return s},Sj:function(){return d},T4:function(){return a},Uo:function(){return l},hP:function(){return u}});var n=t(15671),o=t(43144),r=t(96601),a=function(){function e(i,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,n.Z)(this,e),this._range=i,this._text=t,this.insertsAutoWhitespace=o}return(0,o.Z)(e,[{key:"getEditOperations",value:function(e,i){i.addTrackedEditOperation(this._range,this._text)}},{key:"computeCursorState",value:function(e,i){var t=i.getInverseEditOperations()[0].range;return r.Y.fromPositions(t.getEndPosition())}}]),e}(),s=function(){function e(i,t){(0,n.Z)(this,e),this._range=i,this._text=t}return(0,o.Z)(e,[{key:"getEditOperations",value:function(e,i){i.addTrackedEditOperation(this._range,this._text)}},{key:"computeCursorState",value:function(e,i){var t=i.getInverseEditOperations()[0].range;return r.Y.fromRange(t,0)}}]),e}(),d=function(){function e(i,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,n.Z)(this,e),this._range=i,this._text=t,this.insertsAutoWhitespace=o}return(0,o.Z)(e,[{key:"getEditOperations",value:function(e,i){i.addTrackedEditOperation(this._range,this._text)}},{key:"computeCursorState",value:function(e,i){var t=i.getInverseEditOperations()[0].range;return r.Y.fromPositions(t.getStartPosition())}}]),e}(),l=function(){function e(i,t,o,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,n.Z)(this,e),this._range=i,this._text=t,this._columnDeltaOffset=r,this._lineNumberDeltaOffset=o,this.insertsAutoWhitespace=a}return(0,o.Z)(e,[{key:"getEditOperations",value:function(e,i){i.addTrackedEditOperation(this._range,this._text)}},{key:"computeCursorState",value:function(e,i){var t=i.getInverseEditOperations()[0].range;return r.Y.fromPositions(t.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}]),e}(),u=function(){function e(i,t,o){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,n.Z)(this,e),this._range=i,this._text=t,this._initialSelection=o,this._forceMoveMarkers=r,this._selectionId=null}return(0,o.Z)(e,[{key:"getEditOperations",value:function(e,i){i.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=i.trackSelection(this._initialSelection)}},{key:"computeCursorState",value:function(e,i){return i.getTrackedSelection(this._selectionId)}}]),e}()},2413:function(e,i,t){t.d(i,{U:function(){return m}});var n,o=t(15671),r=t(43144),a=t(31906),s=t(30697),d=t(17429),l=t(96601),u=t(98657),c=t(19536),h=function(e,i,t,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,i,t,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(i,t,a):o(i,t))||a);return r>3&&a&&Object.defineProperty(i,t,a),a},f=function(e,i){return function(t,n){i(t,n,e)}},g=Object.create(null);function v(e,i){if(i<=0)return"";g[e]||(g[e]=["",e]);for(var t=g[e],n=t.length;n<=i;n++)t[n]=t[n-1]+e;return t[i]}var m=n=function(){function e(i,t,n){(0,o.Z)(this,e),this._languageConfigurationService=n,this._opts=t,this._selection=i,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}return(0,r.Z)(e,[{key:"_addEditOperation",value:function(e,i,t){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(i,t):e.addEditOperation(i,t)}},{key:"getEditOperations",value:function(e,i){var t=this._selection.startLineNumber,o=this._selection.endLineNumber;1===this._selection.endColumn&&t!==o&&(o-=1);var r=this._opts,l=r.tabSize,c=r.indentSize,h=r.insertSpaces,f=t===o;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(t))&&(this._useLastEditRangeForCursorEndPosition=!0);for(var g=0,m=0,_=t;_<=o;_++,g=m){m=0;var p=e.getLineContent(_),y=a.LC(p);if((!this._opts.isUnshift||0!==p.length&&0!==y)&&(f||this._opts.isUnshift||0!==p.length)){if(-1===y&&(y=p.length),_>1)if(s.i.visibleColumnFromColumn(p,y+1,l)%c!==0&&e.tokenization.isCheapToTokenize(_-1)){var C=(0,u.A)(this._opts.autoIndent,e,new d.e(_-1,e.getLineMaxColumn(_-1),_-1,e.getLineMaxColumn(_-1)),this._languageConfigurationService);if(C){if(m=g,C.appendText)for(var b=0,w=C.appendText.length;b<w&&m<c&&32===C.appendText.charCodeAt(b);b++)m++;C.removeText&&(m=Math.max(0,m-C.removeText));for(var D=0;D<m&&(0!==y&&32===p.charCodeAt(y-1));D++)y--}}if(!this._opts.isUnshift||0!==y){var L=void 0;L=this._opts.isUnshift?n.unshiftIndent(p,y+1,l,c,h):n.shiftIndent(p,y+1,l,c,h),this._addEditOperation(i,new d.e(_,1,_,y+1),L),_!==t||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=this._selection.startColumn<=y+1)}}}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&0===e.getLineLength(t)&&(this._useLastEditRangeForCursorEndPosition=!0);for(var S=h?v(" ",c):"\t",M=t;M<=o;M++){var N=e.getLineContent(M),k=a.LC(N);if((!this._opts.isUnshift||0!==N.length&&0!==k)&&((f||this._opts.isUnshift||0!==N.length)&&(-1===k&&(k=N.length),!this._opts.isUnshift||0!==k)))if(this._opts.isUnshift){k=Math.min(k,c);for(var E=0;E<k;E++){if(9===N.charCodeAt(E)){k=E+1;break}}this._addEditOperation(i,new d.e(M,1,M,k+1),"")}else this._addEditOperation(i,new d.e(M,1,M,1),S),M!==t||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=1===this._selection.startColumn)}}this._selectionId=i.trackSelection(this._selection)}},{key:"computeCursorState",value:function(e,i){if(this._useLastEditRangeForCursorEndPosition){var t=i.getInverseEditOperations()[0];return new l.Y(t.range.endLineNumber,t.range.endColumn,t.range.endLineNumber,t.range.endColumn)}var n=i.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){var o=this._selection.startColumn;return n.startColumn<=o?n:0===n.getDirection()?new l.Y(n.startLineNumber,o,n.endLineNumber,n.endColumn):new l.Y(n.endLineNumber,n.endColumn,n.startLineNumber,o)}return n}}],[{key:"unshiftIndent",value:function(e,i,t,n,o){var r=s.i.visibleColumnFromColumn(e,i,t);if(o){var a=v(" ",n);return v(a,s.i.prevIndentTabStop(r,n)/n)}return v("\t",s.i.prevRenderTabStop(r,t)/t)}},{key:"shiftIndent",value:function(e,i,t,n,o){var r=s.i.visibleColumnFromColumn(e,i,t);if(o){var a=v(" ",n);return v(a,s.i.nextIndentTabStop(r,n)/n)}return v("\t",s.i.nextRenderTabStop(r,t)/t)}}]),e}();m=n=h([f(2,c.c_)],m)},22721:function(e,i,t){t.d(i,{F:function(){return s},K:function(){return d}});var n=t(15671),o=t(43144),r=t(17429),a=t(96601),s=function(){function e(i,t,o){(0,n.Z)(this,e),this._range=i,this._charBeforeSelection=t,this._charAfterSelection=o}return(0,o.Z)(e,[{key:"getEditOperations",value:function(e,i){i.addTrackedEditOperation(new r.e(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),i.addTrackedEditOperation(new r.e(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}},{key:"computeCursorState",value:function(e,i){var t=i.getInverseEditOperations(),n=t[0].range,o=t[1].range;return new a.Y(n.endLineNumber,n.endColumn,o.endLineNumber,o.endColumn-this._charAfterSelection.length)}}]),e}(),d=function(){function e(i,t,o){(0,n.Z)(this,e),this._position=i,this._text=t,this._charAfter=o}return(0,o.Z)(e,[{key:"getEditOperations",value:function(e,i){i.addTrackedEditOperation(new r.e(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}},{key:"computeCursorState",value:function(e,i){var t=i.getInverseEditOperations()[0].range;return new a.Y(t.endLineNumber,t.startColumn,t.endLineNumber,t.endColumn-this._charAfter.length)}}]),e}()},58714:function(e,i,t){t.d(i,{V:function(){return d}});var n=t(15671),o=t(43144),r=t(31906),a=t(62557),s=t(17429),d=function(){function e(i,t){(0,n.Z)(this,e),this._selection=i,this._cursors=t,this._selectionId=null}return(0,o.Z)(e,[{key:"getEditOperations",value:function(e,i){for(var t=function(e,i){i.sort((function(e,i){return e.lineNumber===i.lineNumber?e.column-i.column:e.lineNumber-i.lineNumber}));for(var t=i.length-2;t>=0;t--)i[t].lineNumber===i[t+1].lineNumber&&i.splice(t,1);for(var n=[],o=0,d=0,l=i.length,u=1,c=e.getLineCount();u<=c;u++){var h=e.getLineContent(u),f=h.length+1,g=0;if(!(d<l&&i[d].lineNumber===u&&(g=i[d].column,d++,g===f))&&0!==h.length){var v=r.ow(h),m=0;if(-1===v)m=1;else{if(v===h.length-1)continue;m=v+2}m=Math.max(g,m),n[o++]=a.h.delete(new s.e(u,m,u,f))}}return n}(e,this._cursors),n=0,o=t.length;n<o;n++){var d=t[n];i.addEditOperation(d.range,d.text)}this._selectionId=i.trackSelection(this._selection)}},{key:"computeCursorState",value:function(e,i){return i.getTrackedSelection(this._selectionId)}}]),e}()}}]);
//# sourceMappingURL=monaco-editor-vendor.57869d09.69315937.js.map